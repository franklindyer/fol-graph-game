/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={523:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var o=i(601),n=i.n(o),r=i(314),s=i.n(r)()(n());s.push([t.id,"body {\n  margin: 0;\n  max-width: 100vw;\n}\n\npre,\ncode {\n  overflow: auto;\n}\n\n#pageContainer {\n  display: flex;\n  width: 100%;\n  max-width: 100vw;\n  height: 100vh;\n}\n\n#blocklyDiv {\n  flex-basis: 100%;\n  height: 100%;\n  min-width: 600px;\n}\n\n#outputPane {\n  display: flex;\n  flex-direction: column;\n  width: 400px;\n  flex: 0 0 400px;\n  overflow: auto;\n  margin: 1rem;\n}\n\n#generatedCode {\n  height: 50%;\n  background-color: rgb(247, 240, 228);\n}\n\n#output {\n  height: 50%;\n}\n\n#networkbox {\n  width: 95%;\n  height: 400px;\n  border: 1px solid lightgray;\n}\n",""]);const a=s},314:t=>{"use strict";t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var i="",o=void 0!==e[5];return e[4]&&(i+="@supports (".concat(e[4],") {")),e[2]&&(i+="@media ".concat(e[2]," {")),o&&(i+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),i+=t(e),o&&(i+="}"),e[2]&&(i+="}"),e[4]&&(i+="}"),i})).join("")},e.i=function(t,i,o,n,r){"string"==typeof t&&(t=[[null,t,void 0]]);var s={};if(o)for(var a=0;a<this.length;a++){var g=this[a][0];null!=g&&(s[g]=!0)}for(var l=0;l<t.length;l++){var h=[].concat(t[l]);o&&s[h[0]]||(void 0!==r&&(void 0===h[5]||(h[1]="@layer".concat(h[5].length>0?" ".concat(h[5]):""," {").concat(h[1],"}")),h[5]=r),i&&(h[2]?(h[1]="@media ".concat(h[2]," {").concat(h[1],"}"),h[2]=i):h[2]=i),n&&(h[4]?(h[1]="@supports (".concat(h[4],") {").concat(h[1],"}"),h[4]=n):h[4]="".concat(n)),e.push(h))}},e}},601:t=>{"use strict";t.exports=function(t){return t[1]}},72:t=>{"use strict";var e=[];function i(t){for(var i=-1,o=0;o<e.length;o++)if(e[o].identifier===t){i=o;break}return i}function o(t,o){for(var r={},s=[],a=0;a<t.length;a++){var g=t[a],l=o.base?g[0]+o.base:g[0],h=r[l]||0,c="".concat(l," ").concat(h);r[l]=h+1;var u=i(c),d={css:g[1],media:g[2],sourceMap:g[3],supports:g[4],layer:g[5]};if(-1!==u)e[u].references++,e[u].updater(d);else{var A=n(d,o);o.byIndex=a,e.splice(a,0,{identifier:c,updater:A,references:1})}s.push(c)}return s}function n(t,e){var i=e.domAPI(e);return i.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;i.update(t=e)}else i.remove()}}t.exports=function(t,n){var r=o(t=t||[],n=n||{});return function(t){t=t||[];for(var s=0;s<r.length;s++){var a=i(r[s]);e[a].references--}for(var g=o(t,n),l=0;l<r.length;l++){var h=i(r[l]);0===e[h].references&&(e[h].updater(),e.splice(h,1))}r=g}}},659:t=>{"use strict";var e={};t.exports=function(t,i){var o=function(t){if(void 0===e[t]){var i=document.querySelector(t);if(window.HTMLIFrameElement&&i instanceof window.HTMLIFrameElement)try{i=i.contentDocument.head}catch(t){i=null}e[t]=i}return e[t]}(t);if(!o)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");o.appendChild(i)}},540:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},56:(t,e,i)=>{"use strict";t.exports=function(t){var e=i.nc;e&&t.setAttribute("nonce",e)}},825:t=>{"use strict";t.exports=function(t){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var e=t.insertStyleElement(t);return{update:function(i){!function(t,e,i){var o="";i.supports&&(o+="@supports (".concat(i.supports,") {")),i.media&&(o+="@media ".concat(i.media," {"));var n=void 0!==i.layer;n&&(o+="@layer".concat(i.layer.length>0?" ".concat(i.layer):""," {")),o+=i.css,n&&(o+="}"),i.media&&(o+="}"),i.supports&&(o+="}");var r=i.sourceMap;r&&"undefined"!=typeof btoa&&(o+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(r))))," */")),e.styleTagTransform(o,t,e.options)}(e,t,i)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},113:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},107:function(t,e,i){!function(t){function e(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r={exports:{}},s=function(t){return t&&t.Math===Math&&t},a=s("object"==typeof globalThis&&globalThis)||s("object"==typeof window&&window)||s("object"==typeof self&&self)||s("object"==typeof o&&o)||function(){return this}()||o||Function("return this")(),g=function(t){try{return!!t()}catch(t){return!0}},l=!g((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),h=l,c=Function.prototype,u=c.apply,d=c.call,A="object"==typeof Reflect&&Reflect.apply||(h?d.bind(u):function(){return d.apply(u,arguments)}),I=l,C=Function.prototype,p=C.call,f=I&&C.bind.bind(p,p),v=I?f:function(t){return function(){return p.apply(t,arguments)}},m=v,b=m({}.toString),y=m("".slice),_=function(t){return y(b(t),8,-1)},T=_,E=v,w=function(t){if("Function"===T(t))return E(t)},k="object"==typeof document&&document.all,O={all:k,IS_HTMLDDA:void 0===k&&void 0!==k},S=O.all,R=O.IS_HTMLDDA?function(t){return"function"==typeof t||t===S}:function(t){return"function"==typeof t},x={},D=!g((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),M=l,N=Function.prototype.call,L=M?N.bind(N):function(){return N.apply(N,arguments)},P={},$={}.propertyIsEnumerable,B=Object.getOwnPropertyDescriptor,F=B&&!$.call({1:2},1);P.f=F?function(t){var e=B(this,t);return!!e&&e.enumerable}:$;var z,H,G=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},U=g,V=_,W=Object,j=v("".split),Y=U((function(){return!W("z").propertyIsEnumerable(0)}))?function(t){return"String"===V(t)?j(t,""):W(t)}:W,X=function(t){return null==t},Z=X,K=TypeError,Q=function(t){if(Z(t))throw new K("Can't call method on "+t);return t},J=Y,q=Q,tt=function(t){return J(q(t))},et=R,it=O.all,ot=O.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:et(t)||t===it}:function(t){return"object"==typeof t?null!==t:et(t)},nt={},rt=nt,st=a,at=R,gt=function(t){return at(t)?t:void 0},lt=function(t,e){return arguments.length<2?gt(rt[t])||gt(st[t]):rt[t]&&rt[t][e]||st[t]&&st[t][e]},ht=v({}.isPrototypeOf),ct="undefined"!=typeof navigator&&String(navigator.userAgent)||"",ut=a,dt=ct,At=ut.process,It=ut.Deno,Ct=At&&At.versions||It&&It.version,pt=Ct&&Ct.v8;pt&&(H=(z=pt.split("."))[0]>0&&z[0]<4?1:+(z[0]+z[1])),!H&&dt&&(!(z=dt.match(/Edge\/(\d+)/))||z[1]>=74)&&(z=dt.match(/Chrome\/(\d+)/))&&(H=+z[1]);var ft=H,vt=ft,mt=g,bt=a.String,yt=!!Object.getOwnPropertySymbols&&!mt((function(){var t=Symbol("symbol detection");return!bt(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&vt&&vt<41})),_t=yt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Tt=lt,Et=R,wt=ht,kt=Object,Ot=_t?function(t){return"symbol"==typeof t}:function(t){var e=Tt("Symbol");return Et(e)&&wt(e.prototype,kt(t))},St=String,Rt=function(t){try{return St(t)}catch(t){return"Object"}},xt=R,Dt=Rt,Mt=TypeError,Nt=function(t){if(xt(t))return t;throw new Mt(Dt(t)+" is not a function")},Lt=Nt,Pt=X,$t=function(t,e){var i=t[e];return Pt(i)?void 0:Lt(i)},Bt=L,Ft=R,zt=ot,Ht=TypeError,Gt={exports:{}},Ut=a,Vt=Object.defineProperty,Wt="__core-js_shared__",jt=a[Wt]||function(t,e){try{Vt(Ut,t,{value:e,configurable:!0,writable:!0})}catch(i){Ut[t]=e}return e}(Wt,{}),Yt=jt;(Gt.exports=function(t,e){return Yt[t]||(Yt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.2",mode:"pure",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.2/LICENSE",source:"https://github.com/zloirock/core-js"});var Xt=Gt.exports,Zt=Q,Kt=Object,Qt=function(t){return Kt(Zt(t))},Jt=Qt,qt=v({}.hasOwnProperty),te=Object.hasOwn||function(t,e){return qt(Jt(t),e)},ee=v,ie=0,oe=Math.random(),ne=ee(1..toString),re=function(t){return"Symbol("+(void 0===t?"":t)+")_"+ne(++ie+oe,36)},se=Xt,ae=te,ge=re,le=yt,he=_t,ce=a.Symbol,ue=se("wks"),de=he?ce.for||ce:ce&&ce.withoutSetter||ge,Ae=function(t){return ae(ue,t)||(ue[t]=le&&ae(ce,t)?ce[t]:de("Symbol."+t)),ue[t]},Ie=L,Ce=ot,pe=Ot,fe=$t,ve=function(t,e){var i,o;if("string"===e&&Ft(i=t.toString)&&!zt(o=Bt(i,t)))return o;if(Ft(i=t.valueOf)&&!zt(o=Bt(i,t)))return o;if("string"!==e&&Ft(i=t.toString)&&!zt(o=Bt(i,t)))return o;throw new Ht("Can't convert object to primitive value")},me=TypeError,be=Ae("toPrimitive"),ye=Ot,_e=function(t){var e=function(t,e){if(!Ce(t)||pe(t))return t;var i,o=fe(t,be);if(o){if(void 0===e&&(e="default"),i=Ie(o,t,e),!Ce(i)||pe(i))return i;throw new me("Can't convert object to primitive value")}return void 0===e&&(e="number"),ve(t,e)}(t,"string");return ye(e)?e:e+""},Te=ot,Ee=a.document,we=Te(Ee)&&Te(Ee.createElement),ke=function(t){return we?Ee.createElement(t):{}},Oe=ke,Se=!D&&!g((function(){return 7!==Object.defineProperty(Oe("div"),"a",{get:function(){return 7}}).a})),Re=D,xe=L,De=P,Me=G,Ne=tt,Le=_e,Pe=te,$e=Se,Be=Object.getOwnPropertyDescriptor;x.f=Re?Be:function(t,e){if(t=Ne(t),e=Le(e),$e)try{return Be(t,e)}catch(t){}if(Pe(t,e))return Me(!xe(De.f,t,e),t[e])};var Fe=g,ze=R,He=/#|\.prototype\./,Ge=function(t,e){var i=Ve[Ue(t)];return i===je||i!==We&&(ze(e)?Fe(e):!!e)},Ue=Ge.normalize=function(t){return String(t).replace(He,".").toLowerCase()},Ve=Ge.data={},We=Ge.NATIVE="N",je=Ge.POLYFILL="P",Ye=Ge,Xe=Nt,Ze=l,Ke=w(w.bind),Qe=function(t,e){return Xe(t),void 0===e?t:Ze?Ke(t,e):function(){return t.apply(e,arguments)}},Je={},qe=D&&g((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),ti=ot,ei=String,ii=TypeError,oi=function(t){if(ti(t))return t;throw new ii(ei(t)+" is not an object")},ni=D,ri=Se,si=qe,ai=oi,gi=_e,li=TypeError,hi=Object.defineProperty,ci=Object.getOwnPropertyDescriptor,ui="enumerable",di="configurable",Ai="writable";Je.f=ni?si?function(t,e,i){if(ai(t),e=gi(e),ai(i),"function"==typeof t&&"prototype"===e&&"value"in i&&Ai in i&&!i[Ai]){var o=ci(t,e);o&&o[Ai]&&(t[e]=i.value,i={configurable:di in i?i[di]:o[di],enumerable:ui in i?i[ui]:o[ui],writable:!1})}return hi(t,e,i)}:hi:function(t,e,i){if(ai(t),e=gi(e),ai(i),ri)try{return hi(t,e,i)}catch(t){}if("get"in i||"set"in i)throw new li("Accessors not supported");return"value"in i&&(t[e]=i.value),t};var Ii=Je,Ci=G,pi=D?function(t,e,i){return Ii.f(t,e,Ci(1,i))}:function(t,e,i){return t[e]=i,t},fi=a,vi=A,mi=w,bi=R,yi=x.f,_i=Ye,Ti=nt,Ei=Qe,wi=pi,ki=te,Oi=function(t){var e=function(i,o,n){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(i);case 2:return new t(i,o)}return new t(i,o,n)}return vi(t,this,arguments)};return e.prototype=t.prototype,e},Si=function(t,e){var i,o,n,r,s,a,g,l,h,c=t.target,u=t.global,d=t.stat,A=t.proto,I=u?fi:d?fi[c]:(fi[c]||{}).prototype,C=u?Ti:Ti[c]||wi(Ti,c,{})[c],p=C.prototype;for(r in e)o=!(i=_i(u?r:c+(d?".":"#")+r,t.forced))&&I&&ki(I,r),a=C[r],o&&(g=t.dontCallGetSet?(h=yi(I,r))&&h.value:I[r]),s=o&&g?g:e[r],o&&typeof a==typeof s||(l=t.bind&&o?Ei(s,fi):t.wrap&&o?Oi(s):A&&bi(s)?mi(s):s,(t.sham||s&&s.sham||a&&a.sham)&&wi(l,"sham",!0),wi(C,r,l),A&&(ki(Ti,n=c+"Prototype")||wi(Ti,n,{}),wi(Ti[n],r,s),t.real&&p&&(i||!p[r])&&wi(p,r,s)))},Ri=Si,xi=D,Di=Je.f;Ri({target:"Object",stat:!0,forced:Object.defineProperty!==Di,sham:!xi},{defineProperty:Di});var Mi=nt.Object,Ni=r.exports=function(t,e,i){return Mi.defineProperty(t,e,i)};Mi.defineProperty.sham&&(Ni.sham=!0);var Li=r.exports,Pi=Li,$i=n(Pi),Bi=_,Fi=Array.isArray||function(t){return"Array"===Bi(t)},zi=Math.ceil,Hi=Math.floor,Gi=Math.trunc||function(t){var e=+t;return(e>0?Hi:zi)(e)},Ui=function(t){var e=+t;return e!=e||0===e?0:Gi(e)},Vi=Ui,Wi=Math.min,ji=function(t){return(e=t.length)>0?Wi(Vi(e),9007199254740991):0;var e},Yi=TypeError,Xi=function(t){if(t>9007199254740991)throw Yi("Maximum allowed index exceeded");return t},Zi=_e,Ki=Je,Qi=G,Ji=function(t,e,i){var o=Zi(e);o in t?Ki.f(t,o,Qi(0,i)):t[o]=i},qi={};qi[Ae("toStringTag")]="z";var to="[object z]"===String(qi),eo=to,io=R,oo=_,no=Ae("toStringTag"),ro=Object,so="Arguments"===oo(function(){return arguments}()),ao=eo?oo:function(t){var e,i,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=ro(t),no))?i:so?oo(e):"Object"===(o=oo(e))&&io(e.callee)?"Arguments":o},go=R,lo=jt,ho=v(Function.toString);go(lo.inspectSource)||(lo.inspectSource=function(t){return ho(t)});var co=lo.inspectSource,uo=v,Ao=g,Io=R,Co=ao,po=co,fo=function(){},vo=[],mo=lt("Reflect","construct"),bo=/^\s*(?:class|function)\b/,yo=uo(bo.exec),_o=!bo.test(fo),To=function(t){if(!Io(t))return!1;try{return mo(fo,vo,t),!0}catch(t){return!1}},Eo=function(t){if(!Io(t))return!1;switch(Co(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return _o||!!yo(bo,po(t))}catch(t){return!0}};Eo.sham=!0;var wo=!mo||Ao((function(){var t;return To(To.call)||!To(Object)||!To((function(){t=!0}))||t}))?Eo:To,ko=Fi,Oo=wo,So=ot,Ro=Ae("species"),xo=Array,Do=function(t,e){return new(function(t){var e;return ko(t)&&(e=t.constructor,(Oo(e)&&(e===xo||ko(e.prototype))||So(e)&&null===(e=e[Ro]))&&(e=void 0)),void 0===e?xo:e}(t))(0===e?0:e)},Mo=g,No=ft,Lo=Ae("species"),Po=function(t){return No>=51||!Mo((function(){var e=[];return(e.constructor={})[Lo]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},$o=Si,Bo=g,Fo=Fi,zo=ot,Ho=Qt,Go=ji,Uo=Xi,Vo=Ji,Wo=Do,jo=Po,Yo=ft,Xo=Ae("isConcatSpreadable"),Zo=Yo>=51||!Bo((function(){var t=[];return t[Xo]=!1,t.concat()[0]!==t})),Ko=function(t){if(!zo(t))return!1;var e=t[Xo];return void 0!==e?!!e:Fo(t)};$o({target:"Array",proto:!0,arity:1,forced:!Zo||!jo("concat")},{concat:function(t){var e,i,o,n,r,s=Ho(this),a=Wo(s,0),g=0;for(e=-1,o=arguments.length;e<o;e++)if(Ko(r=-1===e?s:arguments[e]))for(n=Go(r),Uo(g+n),i=0;i<n;i++,g++)i in r&&Vo(a,g,r[i]);else Uo(g+1),Vo(a,g++,r);return a.length=g,a}});var Qo=ao,Jo=String,qo=function(t){if("Symbol"===Qo(t))throw new TypeError("Cannot convert a Symbol value to a string");return Jo(t)},tn={},en=Ui,on=Math.max,nn=Math.min,rn=function(t,e){var i=en(t);return i<0?on(i+e,0):nn(i,e)},sn=tt,an=rn,gn=ji,ln=function(t){return function(e,i,o){var n,r=sn(e),s=gn(r),a=an(o,s);if(t&&i!=i){for(;s>a;)if((n=r[a++])!=n)return!0}else for(;s>a;a++)if((t||a in r)&&r[a]===i)return t||a||0;return!t&&-1}},hn={includes:ln(!0),indexOf:ln(!1)},cn={},un=te,dn=tt,An=hn.indexOf,In=cn,Cn=v([].push),pn=function(t,e){var i,o=dn(t),n=0,r=[];for(i in o)!un(In,i)&&un(o,i)&&Cn(r,i);for(;e.length>n;)un(o,i=e[n++])&&(~An(r,i)||Cn(r,i));return r},fn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],vn=pn,mn=fn,bn=Object.keys||function(t){return vn(t,mn)},yn=D,_n=qe,Tn=Je,En=oi,wn=tt,kn=bn;tn.f=yn&&!_n?Object.defineProperties:function(t,e){En(t);for(var i,o=wn(e),n=kn(e),r=n.length,s=0;r>s;)Tn.f(t,i=n[s++],o[i]);return t};var On,Sn=lt("document","documentElement"),Rn=re,xn=Xt("keys"),Dn=function(t){return xn[t]||(xn[t]=Rn(t))},Mn=oi,Nn=tn,Ln=fn,Pn=cn,$n=Sn,Bn=ke,Fn="prototype",zn="script",Hn=Dn("IE_PROTO"),Gn=function(){},Un=function(t){return"<"+zn+">"+t+"</"+zn+">"},Vn=function(t){t.write(Un("")),t.close();var e=t.parentWindow.Object;return t=null,e},Wn=function(){try{On=new ActiveXObject("htmlfile")}catch(t){}var t,e,i;Wn="undefined"!=typeof document?document.domain&&On?Vn(On):(e=Bn("iframe"),i="java"+zn+":",e.style.display="none",$n.appendChild(e),e.src=String(i),(t=e.contentWindow.document).open(),t.write(Un("document.F=Object")),t.close(),t.F):Vn(On);for(var o=Ln.length;o--;)delete Wn[Fn][Ln[o]];return Wn()};Pn[Hn]=!0;var jn=Object.create||function(t,e){var i;return null!==t?(Gn[Fn]=Mn(t),i=new Gn,Gn[Fn]=null,i[Hn]=t):i=Wn(),void 0===e?i:Nn.f(i,e)},Yn={},Xn=pn,Zn=fn.concat("length","prototype");Yn.f=Object.getOwnPropertyNames||function(t){return Xn(t,Zn)};var Kn={},Qn=rn,Jn=ji,qn=Ji,tr=Array,er=Math.max,ir=function(t,e,i){for(var o=Jn(t),n=Qn(e,o),r=Qn(void 0===i?o:i,o),s=tr(er(r-n,0)),a=0;n<r;n++,a++)qn(s,a,t[n]);return s.length=a,s},or=_,nr=tt,rr=Yn.f,sr=ir,ar="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Kn.f=function(t){return ar&&"Window"===or(t)?function(t){try{return rr(t)}catch(t){return sr(ar)}}(t):rr(nr(t))};var gr={};gr.f=Object.getOwnPropertySymbols;var lr=pi,hr=function(t,e,i,o){return o&&o.enumerable?t[e]=i:lr(t,e,i),t},cr=Je,ur=function(t,e,i){return cr.f(t,e,i)},dr={},Ar=Ae;dr.f=Ar;var Ir,Cr,pr,fr=nt,vr=te,mr=dr,br=Je.f,yr=function(t){var e=fr.Symbol||(fr.Symbol={});vr(e,t)||br(e,t,{value:mr.f(t)})},_r=L,Tr=lt,Er=Ae,wr=hr,kr=function(){var t=Tr("Symbol"),e=t&&t.prototype,i=e&&e.valueOf,o=Er("toPrimitive");e&&!e[o]&&wr(e,o,(function(t){return _r(i,this)}),{arity:1})},Or=ao,Sr=to?{}.toString:function(){return"[object "+Or(this)+"]"},Rr=to,xr=Je.f,Dr=pi,Mr=te,Nr=Sr,Lr=Ae("toStringTag"),Pr=function(t,e,i,o){if(t){var n=i?t:t.prototype;Mr(n,Lr)||xr(n,Lr,{configurable:!0,value:e}),o&&!Rr&&Dr(n,"toString",Nr)}},$r=R,Br=a.WeakMap,Fr=$r(Br)&&/native code/.test(String(Br)),zr=a,Hr=ot,Gr=pi,Ur=te,Vr=jt,Wr=Dn,jr=cn,Yr="Object already initialized",Xr=zr.TypeError,Zr=zr.WeakMap;if(Fr||Vr.state){var Kr=Vr.state||(Vr.state=new Zr);Kr.get=Kr.get,Kr.has=Kr.has,Kr.set=Kr.set,Ir=function(t,e){if(Kr.has(t))throw new Xr(Yr);return e.facade=t,Kr.set(t,e),e},Cr=function(t){return Kr.get(t)||{}},pr=function(t){return Kr.has(t)}}else{var Qr=Wr("state");jr[Qr]=!0,Ir=function(t,e){if(Ur(t,Qr))throw new Xr(Yr);return e.facade=t,Gr(t,Qr,e),e},Cr=function(t){return Ur(t,Qr)?t[Qr]:{}},pr=function(t){return Ur(t,Qr)}}var Jr={set:Ir,get:Cr,has:pr,enforce:function(t){return pr(t)?Cr(t):Ir(t,{})},getterFor:function(t){return function(e){var i;if(!Hr(e)||(i=Cr(e)).type!==t)throw new Xr("Incompatible receiver, "+t+" required");return i}}},qr=Qe,ts=Y,es=Qt,is=ji,os=Do,ns=v([].push),rs=function(t){var e=1===t,i=2===t,o=3===t,n=4===t,r=6===t,s=7===t,a=5===t||r;return function(g,l,h,c){for(var u,d,A=es(g),I=ts(A),C=qr(l,h),p=is(I),f=0,v=c||os,m=e?v(g,p):i||s?v(g,0):void 0;p>f;f++)if((a||f in I)&&(d=C(u=I[f],f,A),t))if(e)m[f]=d;else if(d)switch(t){case 3:return!0;case 5:return u;case 6:return f;case 2:ns(m,u)}else switch(t){case 4:return!1;case 7:ns(m,u)}return r?-1:o||n?n:m}},ss={forEach:rs(0),map:rs(1),filter:rs(2),some:rs(3),every:rs(4),find:rs(5),findIndex:rs(6),filterReject:rs(7)},as=Si,gs=a,ls=L,hs=v,cs=D,us=yt,ds=g,As=te,Is=ht,Cs=oi,ps=tt,fs=_e,vs=qo,ms=G,bs=jn,ys=bn,_s=Yn,Ts=Kn,Es=gr,ws=x,ks=Je,Os=tn,Ss=P,Rs=hr,xs=ur,Ds=Xt,Ms=cn,Ns=re,Ls=Ae,Ps=dr,$s=yr,Bs=kr,Fs=Pr,zs=Jr,Hs=ss.forEach,Gs=Dn("hidden"),Us="Symbol",Vs="prototype",Ws=zs.set,js=zs.getterFor(Us),Ys=Object[Vs],Xs=gs.Symbol,Zs=Xs&&Xs[Vs],Ks=gs.RangeError,Qs=gs.TypeError,Js=gs.QObject,qs=ws.f,ta=ks.f,ea=Ts.f,ia=Ss.f,oa=hs([].push),na=Ds("symbols"),ra=Ds("op-symbols"),sa=Ds("wks"),aa=!Js||!Js[Vs]||!Js[Vs].findChild,ga=function(t,e,i){var o=qs(Ys,e);o&&delete Ys[e],ta(t,e,i),o&&t!==Ys&&ta(Ys,e,o)},la=cs&&ds((function(){return 7!==bs(ta({},"a",{get:function(){return ta(this,"a",{value:7}).a}})).a}))?ga:ta,ha=function(t,e){var i=na[t]=bs(Zs);return Ws(i,{type:Us,tag:t,description:e}),cs||(i.description=e),i},ca=function(t,e,i){t===Ys&&ca(ra,e,i),Cs(t);var o=fs(e);return Cs(i),As(na,o)?(i.enumerable?(As(t,Gs)&&t[Gs][o]&&(t[Gs][o]=!1),i=bs(i,{enumerable:ms(0,!1)})):(As(t,Gs)||ta(t,Gs,ms(1,{})),t[Gs][o]=!0),la(t,o,i)):ta(t,o,i)},ua=function(t,e){Cs(t);var i=ps(e),o=ys(i).concat(Ca(i));return Hs(o,(function(e){cs&&!ls(da,i,e)||ca(t,e,i[e])})),t},da=function(t){var e=fs(t),i=ls(ia,this,e);return!(this===Ys&&As(na,e)&&!As(ra,e))&&(!(i||!As(this,e)||!As(na,e)||As(this,Gs)&&this[Gs][e])||i)},Aa=function(t,e){var i=ps(t),o=fs(e);if(i!==Ys||!As(na,o)||As(ra,o)){var n=qs(i,o);return!n||!As(na,o)||As(i,Gs)&&i[Gs][o]||(n.enumerable=!0),n}},Ia=function(t){var e=ea(ps(t)),i=[];return Hs(e,(function(t){As(na,t)||As(Ms,t)||oa(i,t)})),i},Ca=function(t){var e=t===Ys,i=ea(e?ra:ps(t)),o=[];return Hs(i,(function(t){!As(na,t)||e&&!As(Ys,t)||oa(o,na[t])})),o};us||(Xs=function(){if(Is(Zs,this))throw new Qs("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?vs(arguments[0]):void 0,e=Ns(t),i=function(t){var o=void 0===this?gs:this;o===Ys&&ls(i,ra,t),As(o,Gs)&&As(o[Gs],e)&&(o[Gs][e]=!1);var n=ms(1,t);try{la(o,e,n)}catch(t){if(!(t instanceof Ks))throw t;ga(o,e,n)}};return cs&&aa&&la(Ys,e,{configurable:!0,set:i}),ha(e,t)},Rs(Zs=Xs[Vs],"toString",(function(){return js(this).tag})),Rs(Xs,"withoutSetter",(function(t){return ha(Ns(t),t)})),Ss.f=da,ks.f=ca,Os.f=ua,ws.f=Aa,_s.f=Ts.f=Ia,Es.f=Ca,Ps.f=function(t){return ha(Ls(t),t)},cs&&xs(Zs,"description",{configurable:!0,get:function(){return js(this).description}})),as({global:!0,constructor:!0,wrap:!0,forced:!us,sham:!us},{Symbol:Xs}),Hs(ys(sa),(function(t){$s(t)})),as({target:Us,stat:!0,forced:!us},{useSetter:function(){aa=!0},useSimple:function(){aa=!1}}),as({target:"Object",stat:!0,forced:!us,sham:!cs},{create:function(t,e){return void 0===e?bs(t):ua(bs(t),e)},defineProperty:ca,defineProperties:ua,getOwnPropertyDescriptor:Aa}),as({target:"Object",stat:!0,forced:!us},{getOwnPropertyNames:Ia}),Bs(),Fs(Xs,Us),Ms[Gs]=!0;var pa=yt&&!!Symbol.for&&!!Symbol.keyFor,fa=Si,va=lt,ma=te,ba=qo,ya=Xt,_a=pa,Ta=ya("string-to-symbol-registry"),Ea=ya("symbol-to-string-registry");fa({target:"Symbol",stat:!0,forced:!_a},{for:function(t){var e=ba(t);if(ma(Ta,e))return Ta[e];var i=va("Symbol")(e);return Ta[e]=i,Ea[i]=e,i}});var wa=Si,ka=te,Oa=Ot,Sa=Rt,Ra=pa,xa=Xt("symbol-to-string-registry");wa({target:"Symbol",stat:!0,forced:!Ra},{keyFor:function(t){if(!Oa(t))throw new TypeError(Sa(t)+" is not a symbol");if(ka(xa,t))return xa[t]}});var Da=v([].slice),Ma=Fi,Na=R,La=_,Pa=qo,$a=v([].push),Ba=Si,Fa=lt,za=A,Ha=L,Ga=v,Ua=g,Va=R,Wa=Ot,ja=Da,Ya=yt,Xa=String,Za=Fa("JSON","stringify"),Ka=Ga(/./.exec),Qa=Ga("".charAt),Ja=Ga("".charCodeAt),qa=Ga("".replace),tg=Ga(1..toString),eg=/[\uD800-\uDFFF]/g,ig=/^[\uD800-\uDBFF]$/,og=/^[\uDC00-\uDFFF]$/,ng=!Ya||Ua((function(){var t=Fa("Symbol")("stringify detection");return"[null]"!==Za([t])||"{}"!==Za({a:t})||"{}"!==Za(Object(t))})),rg=Ua((function(){return'"\\udf06\\ud834"'!==Za("\udf06\ud834")||'"\\udead"'!==Za("\udead")})),sg=function(t,e){var i=ja(arguments),o=function(t){if(Na(t))return t;if(Ma(t)){for(var e=t.length,i=[],o=0;o<e;o++){var n=t[o];"string"==typeof n?$a(i,n):"number"!=typeof n&&"Number"!==La(n)&&"String"!==La(n)||$a(i,Pa(n))}var r=i.length,s=!0;return function(t,e){if(s)return s=!1,e;if(Ma(this))return e;for(var o=0;o<r;o++)if(i[o]===t)return e}}}(e);if(Va(o)||void 0!==t&&!Wa(t))return i[1]=function(t,e){if(Va(o)&&(e=Ha(o,this,Xa(t),e)),!Wa(e))return e},za(Za,null,i)},ag=function(t,e,i){var o=Qa(i,e-1),n=Qa(i,e+1);return Ka(ig,t)&&!Ka(og,n)||Ka(og,t)&&!Ka(ig,o)?"\\u"+tg(Ja(t,0),16):t};Za&&Ba({target:"JSON",stat:!0,arity:3,forced:ng||rg},{stringify:function(t,e,i){var o=ja(arguments),n=za(ng?sg:Za,null,o);return rg&&"string"==typeof n?qa(n,eg,ag):n}});var gg=gr,lg=Qt;Si({target:"Object",stat:!0,forced:!yt||g((function(){gg.f(1)}))},{getOwnPropertySymbols:function(t){var e=gg.f;return e?e(lg(t)):[]}}),yr("asyncIterator"),yr("hasInstance"),yr("isConcatSpreadable"),yr("iterator"),yr("match"),yr("matchAll"),yr("replace"),yr("search"),yr("species"),yr("split");var hg=kr;yr("toPrimitive"),hg();var cg=lt,ug=Pr;yr("toStringTag"),ug(cg("Symbol"),"Symbol"),yr("unscopables"),Pr(a.JSON,"JSON",!0);var dg,Ag,Ig,Cg=nt.Symbol,pg={},fg=D,vg=te,mg=Function.prototype,bg=fg&&Object.getOwnPropertyDescriptor,yg=vg(mg,"name"),_g={EXISTS:yg,PROPER:yg&&"something"===function(){}.name,CONFIGURABLE:yg&&(!fg||fg&&bg(mg,"name").configurable)},Tg=!g((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Eg=te,wg=R,kg=Qt,Og=Tg,Sg=Dn("IE_PROTO"),Rg=Object,xg=Rg.prototype,Dg=Og?Rg.getPrototypeOf:function(t){var e=kg(t);if(Eg(e,Sg))return e[Sg];var i=e.constructor;return wg(i)&&e instanceof i?i.prototype:e instanceof Rg?xg:null},Mg=g,Ng=R,Lg=ot,Pg=jn,$g=Dg,Bg=hr,Fg=Ae("iterator"),zg=!1;[].keys&&("next"in(Ig=[].keys())?(Ag=$g($g(Ig)))!==Object.prototype&&(dg=Ag):zg=!0),dg=!Lg(dg)||Mg((function(){var t={};return dg[Fg].call(t)!==t}))?{}:Pg(dg),Ng(dg[Fg])||Bg(dg,Fg,(function(){return this}));var Hg={IteratorPrototype:dg,BUGGY_SAFARI_ITERATORS:zg},Gg=Hg.IteratorPrototype,Ug=jn,Vg=G,Wg=Pr,jg=pg,Yg=function(){return this},Xg=v,Zg=Nt,Kg=R,Qg=String,Jg=TypeError,qg=oi,tl=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=function(t,e,i){try{return Xg(Zg(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(t){}}(Object.prototype,"__proto__","set"))(i,[]),e=i instanceof Array}catch(t){}return function(i,o){return qg(i),function(t){if("object"==typeof t||Kg(t))return t;throw new Jg("Can't set "+Qg(t)+" as a prototype")}(o),e?t(i,o):i.__proto__=o,i}}():void 0),el=Si,il=L,ol=_g,nl=function(t,e,i,o){var n=e+" Iterator";return t.prototype=Ug(Gg,{next:Vg(+!o,i)}),Wg(t,n,!1,!0),jg[n]=Yg,t},rl=Dg,sl=Pr,al=hr,gl=pg,ll=Hg,hl=ol.PROPER,cl=ll.BUGGY_SAFARI_ITERATORS,ul=Ae("iterator"),dl="keys",Al="values",Il="entries",Cl=function(){return this},pl=function(t,e,i,o,n,r,s){nl(i,e,o);var a,g,l,h=function(t){if(t===n&&I)return I;if(!cl&&t&&t in d)return d[t];switch(t){case dl:case Al:case Il:return function(){return new i(this,t)}}return function(){return new i(this)}},c=e+" Iterator",u=!1,d=t.prototype,A=d[ul]||d["@@iterator"]||n&&d[n],I=!cl&&A||h(n),C="Array"===e&&d.entries||A;if(C&&(a=rl(C.call(new t)))!==Object.prototype&&a.next&&(sl(a,c,!0,!0),gl[c]=Cl),hl&&n===Al&&A&&A.name!==Al&&(u=!0,I=function(){return il(A,this)}),n)if(g={values:h(Al),keys:r?I:h(dl),entries:h(Il)},s)for(l in g)(cl||u||!(l in d))&&al(d,l,g[l]);else el({target:e,proto:!0,forced:cl||u},g);return s&&d[ul]!==I&&al(d,ul,I,{name:n}),gl[e]=I,g},fl=function(t,e){return{value:t,done:e}},vl=tt,ml=pg,bl=Jr;Je.f;var yl=pl,_l=fl,Tl="Array Iterator",El=bl.set,wl=bl.getterFor(Tl);yl(Array,"Array",(function(t,e){El(this,{type:Tl,target:vl(t),index:0,kind:e})}),(function(){var t=wl(this),e=t.target,i=t.index++;if(!e||i>=e.length)return t.target=void 0,_l(void 0,!0);switch(t.kind){case"keys":return _l(i,!1);case"values":return _l(e[i],!1)}return _l([i,e[i]],!1)}),"values"),ml.Arguments=ml.Array;var kl=a,Ol=ao,Sl=pi,Rl=pg,xl=Ae("toStringTag");for(var Dl in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Ml=kl[Dl],Nl=Ml&&Ml.prototype;Nl&&Ol(Nl)!==xl&&Sl(Nl,xl,Dl),Rl[Dl]=Rl.Array}var Ll=Cg,Pl=Ae,$l=Je.f,Bl=Pl("metadata"),Fl=Function.prototype;void 0===Fl[Bl]&&$l(Fl,Bl,{value:null}),yr("asyncDispose"),yr("dispose"),yr("metadata");var zl=Ll,Hl=v,Gl=lt("Symbol"),Ul=Gl.keyFor,Vl=Hl(Gl.prototype.valueOf),Wl=Gl.isRegisteredSymbol||function(t){try{return void 0!==Ul(Vl(t))}catch(t){return!1}};Si({target:"Symbol",stat:!0},{isRegisteredSymbol:Wl});for(var jl=Xt,Yl=lt,Xl=v,Zl=Ot,Kl=Ae,Ql=Yl("Symbol"),Jl=Ql.isWellKnownSymbol,ql=Yl("Object","getOwnPropertyNames"),th=Xl(Ql.prototype.valueOf),eh=jl("wks"),ih=0,oh=ql(Ql),nh=oh.length;ih<nh;ih++)try{var rh=oh[ih];Zl(Ql[rh])&&Kl(rh)}catch(t){}var sh=function(t){if(Jl&&Jl(t))return!0;try{for(var e=th(t),i=0,o=ql(eh),n=o.length;i<n;i++)if(eh[o[i]]==e)return!0}catch(t){}return!1};Si({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:sh}),yr("matcher"),yr("observable"),Si({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Wl}),Si({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:sh}),yr("metadataKey"),yr("patternMatch"),yr("replaceAll");var ah=zl,gh=n(ah),lh=v,hh=Ui,ch=qo,uh=Q,dh=lh("".charAt),Ah=lh("".charCodeAt),Ih=lh("".slice),Ch=function(t){return function(e,i){var o,n,r=ch(uh(e)),s=hh(i),a=r.length;return s<0||s>=a?t?"":void 0:(o=Ah(r,s))<55296||o>56319||s+1===a||(n=Ah(r,s+1))<56320||n>57343?t?dh(r,s):o:t?Ih(r,s,s+2):n-56320+(o-55296<<10)+65536}},ph=(Ch(!1),Ch(!0)),fh=qo,vh=Jr,mh=pl,bh=fl,yh="String Iterator",_h=vh.set,Th=vh.getterFor(yh);mh(String,"String",(function(t){_h(this,{type:yh,string:fh(t),index:0})}),(function(){var t,e=Th(this),i=e.string,o=e.index;return o>=i.length?bh(void 0,!0):(t=ph(i,o),e.index+=t.length,bh(t,!1))}));var Eh=dr.f("iterator"),wh=Eh,kh=n(wh);function Oh(t){return Oh="function"==typeof gh&&"symbol"==typeof kh?function(t){return typeof t}:function(t){return t&&"function"==typeof gh&&t.constructor===gh&&t!==gh.prototype?"symbol":typeof t},Oh(t)}var Sh=n(dr.f("toPrimitive"));function Rh(t){var e=function(t,e){if("object"!==Oh(t)||null===t)return t;var i=t[Sh];if(void 0!==i){var o=i.call(t,e||"default");if("object"!==Oh(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"===Oh(e)?e:String(e)}function xh(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),$i(t,Rh(o.key),o)}}function Dh(t,e,i){return e&&xh(t.prototype,e),i&&xh(t,i),$i(t,"prototype",{writable:!1}),t}function Mh(t,e,i){return(e=Rh(e))in t?$i(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Nh=v,Lh=Nt,Ph=ot,$h=te,Bh=Da,Fh=l,zh=Function,Hh=Nh([].concat),Gh=Nh([].join),Uh={},Vh=Fh?zh.bind:function(t){var e=Lh(this),i=e.prototype,o=Bh(arguments,1),n=function(){var i=Hh(o,Bh(arguments));return this instanceof n?function(t,e,i){if(!$h(Uh,e)){for(var o=[],n=0;n<e;n++)o[n]="a["+n+"]";Uh[e]=zh("C,a","return new C("+Gh(o,",")+")")}return Uh[e](t,i)}(e,i.length,i):e.apply(t,i)};return Ph(i)&&(n.prototype=i),n},Wh=Vh;Si({target:"Function",proto:!0,forced:Function.bind!==Wh},{bind:Wh});var jh=a,Yh=nt,Xh=function(t,e){var i=Yh[t+"Prototype"],o=i&&i[e];if(o)return o;var n=jh[t],r=n&&n.prototype;return r&&r[e]},Zh=Xh("Function","bind"),Kh=ht,Qh=Zh,Jh=Function.prototype,qh=function(t){var e=t.bind;return t===Jh||Kh(Jh,t)&&e===Jh.bind?Qh:e},tc=n(qh),ec=Nt,ic=Qt,oc=Y,nc=ji,rc=TypeError,sc=function(t){return function(e,i,o,n){ec(i);var r=ic(e),s=oc(r),a=nc(r),g=t?a-1:0,l=t?-1:1;if(o<2)for(;;){if(g in s){n=s[g],g+=l;break}if(g+=l,t?g<0:a<=g)throw new rc("Reduce of empty array with no initial value")}for(;t?g>=0:a>g;g+=l)g in s&&(n=i(n,s[g],g,r));return n}},ac={left:sc(!1),right:sc(!0)},gc=g,lc=function(t,e){var i=[][t];return!!i&&gc((function(){i.call(null,e||function(){return 1},1)}))},hc="process"===_(a.process),cc=ac.left;Si({target:"Array",proto:!0,forced:!hc&&ft>79&&ft<83||!lc("reduce")},{reduce:function(t){var e=arguments.length;return cc(this,t,e,e>1?arguments[1]:void 0)}});var uc=Xh("Array","reduce"),dc=ht,Ac=uc,Ic=Array.prototype,Cc=n((function(t){var e=t.reduce;return t===Ic||dc(Ic,t)&&e===Ic.reduce?Ac:e})),pc=ss.filter;Si({target:"Array",proto:!0,forced:!Po("filter")},{filter:function(t){return pc(this,t,arguments.length>1?arguments[1]:void 0)}});var fc=Xh("Array","filter"),vc=ht,mc=fc,bc=Array.prototype,yc=n((function(t){var e=t.filter;return t===bc||vc(bc,t)&&e===bc.filter?mc:e})),_c=ss.map;Si({target:"Array",proto:!0,forced:!Po("map")},{map:function(t){return _c(this,t,arguments.length>1?arguments[1]:void 0)}});var Tc=Xh("Array","map"),Ec=ht,wc=Tc,kc=Array.prototype,Oc=n((function(t){var e=t.map;return t===kc||Ec(kc,t)&&e===kc.map?wc:e})),Sc=Fi,Rc=ji,xc=Xi,Dc=Qe,Mc=function(t,e,i,o,n,r,s,a){for(var g,l,h=n,c=0,u=!!s&&Dc(s,a);c<o;)c in i&&(g=u?u(i[c],c,e):i[c],r>0&&Sc(g)?(l=Rc(g),h=Mc(t,e,g,l,h,r-1)-1):(xc(h+1),t[h]=g),h++),c++;return h},Nc=Mc,Lc=Nt,Pc=Qt,$c=ji,Bc=Do;Si({target:"Array",proto:!0},{flatMap:function(t){var e,i=Pc(this),o=$c(i);return Lc(t),(e=Bc(i,0)).length=Nc(e,i,i,o,0,1,t,arguments.length>1?arguments[1]:void 0),e}});var Fc=Xh("Array","flatMap"),zc=ht,Hc=Fc,Gc=Array.prototype,Uc=n((function(t){var e=t.flatMap;return t===Gc||zc(Gc,t)&&e===Gc.flatMap?Hc:e}));var Vc=function(){function t(i,o,n){var r,s,a;e(this,t),Mh(this,"_listeners",{add:tc(r=this._add).call(r,this),remove:tc(s=this._remove).call(s,this),update:tc(a=this._update).call(a,this)}),this._source=i,this._transformers=o,this._target=n}return Dh(t,[{key:"all",value:function(){return this._target.update(this._transformItems(this._source.get())),this}},{key:"start",value:function(){return this._source.on("add",this._listeners.add),this._source.on("remove",this._listeners.remove),this._source.on("update",this._listeners.update),this}},{key:"stop",value:function(){return this._source.off("add",this._listeners.add),this._source.off("remove",this._listeners.remove),this._source.off("update",this._listeners.update),this}},{key:"_transformItems",value:function(t){var e;return Cc(e=this._transformers).call(e,(function(t,e){return e(t)}),t)}},{key:"_add",value:function(t,e){null!=e&&this._target.add(this._transformItems(this._source.get(e.items)))}},{key:"_update",value:function(t,e){null!=e&&this._target.update(this._transformItems(this._source.get(e.items)))}},{key:"_remove",value:function(t,e){null!=e&&this._target.remove(this._transformItems(e.oldData))}}]),t}(),Wc=function(){function t(i){e(this,t),Mh(this,"_transformers",[]),this._source=i}return Dh(t,[{key:"filter",value:function(t){return this._transformers.push((function(e){return yc(e).call(e,t)})),this}},{key:"map",value:function(t){return this._transformers.push((function(e){return Oc(e).call(e,t)})),this}},{key:"flatMap",value:function(t){return this._transformers.push((function(e){return Uc(e).call(e,t)})),this}},{key:"to",value:function(t){return new Vc(this._source,this._transformers,t)}}]),t}(),jc=L,Yc=oi,Xc=$t,Zc=function(t,e,i){var o,n;Yc(t);try{if(!(o=Xc(t,"return"))){if("throw"===e)throw i;return i}o=jc(o,t)}catch(t){n=!0,o=t}if("throw"===e)throw i;if(n)throw o;return Yc(o),i},Kc=oi,Qc=Zc,Jc=pg,qc=Ae("iterator"),tu=Array.prototype,eu=function(t){return void 0!==t&&(Jc.Array===t||tu[qc]===t)},iu=ao,ou=$t,nu=X,ru=pg,su=Ae("iterator"),au=function(t){if(!nu(t))return ou(t,su)||ou(t,"@@iterator")||ru[iu(t)]},gu=L,lu=Nt,hu=oi,cu=Rt,uu=au,du=TypeError,Au=function(t,e){var i=arguments.length<2?uu(t):e;if(lu(i))return hu(gu(i,t));throw new du(cu(t)+" is not iterable")},Iu=Qe,Cu=L,pu=Qt,fu=function(t,e,i,o){try{return o?e(Kc(i)[0],i[1]):e(i)}catch(e){Qc(t,"throw",e)}},vu=eu,mu=wo,bu=ji,yu=Ji,_u=Au,Tu=au,Eu=Array,wu=Ae("iterator"),ku=!1;try{var Ou=0,Su={next:function(){return{done:!!Ou++}},return:function(){ku=!0}};Su[wu]=function(){return this},Array.from(Su,(function(){throw 2}))}catch(t){}var Ru=function(t,e){try{if(!e&&!ku)return!1}catch(t){return!1}var i=!1;try{var o={};o[wu]=function(){return{next:function(){return{done:i=!0}}}},t(o)}catch(t){}return i},xu=function(t){var e=pu(t),i=mu(this),o=arguments.length,n=o>1?arguments[1]:void 0,r=void 0!==n;r&&(n=Iu(n,o>2?arguments[2]:void 0));var s,a,g,l,h,c,u=Tu(e),d=0;if(!u||this===Eu&&vu(u))for(s=bu(e),a=i?new this(s):Eu(s);s>d;d++)c=r?n(e[d],d):e[d],yu(a,d,c);else for(h=(l=_u(e,u)).next,a=i?new this:[];!(g=Cu(h,l)).done;d++)c=r?fu(l,n,[g.value,d],!0):g.value,yu(a,d,c);return a.length=d,a};Si({target:"Array",stat:!0,forced:!Ru((function(t){Array.from(t)}))},{from:xu});var Du=nt.Array.from,Mu=n(Du),Nu=au,Lu=n(Nu),Pu=n(Nu);Si({target:"Array",stat:!0},{isArray:Fi});var $u=nt.Array.isArray,Bu=n($u);var Fu=D,zu=Fi,Hu=TypeError,Gu=Object.getOwnPropertyDescriptor,Uu=Fu&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(zu(t)&&!Gu(t,"length").writable)throw new Hu("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},Vu=Qt,Wu=ji,ju=Uu,Yu=Xi;Si({target:"Array",proto:!0,arity:1,forced:g((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=Vu(this),i=Wu(e),o=arguments.length;Yu(i+o);for(var n=0;n<o;n++)e[i]=arguments[n],i++;return ju(e,i),i}});var Xu=Xh("Array","push"),Zu=ht,Ku=Xu,Qu=Array.prototype,Ju=function(t){var e=t.push;return t===Qu||Zu(Qu,t)&&e===Qu.push?Ku:e},qu=n(Ju);var td=Si,ed=Fi,id=wo,od=ot,nd=rn,rd=ji,sd=tt,ad=Ji,gd=Ae,ld=Da,hd=Po("slice"),cd=gd("species"),ud=Array,dd=Math.max;td({target:"Array",proto:!0,forced:!hd},{slice:function(t,e){var i,o,n,r=sd(this),s=rd(r),a=nd(t,s),g=nd(void 0===e?s:e,s);if(ed(r)&&(i=r.constructor,(id(i)&&(i===ud||ed(i.prototype))||od(i)&&null===(i=i[cd]))&&(i=void 0),i===ud||void 0===i))return ld(r,a,g);for(o=new(void 0===i?ud:i)(dd(g-a,0)),n=0;a<g;a++,n++)a in r&&ad(o,n,r[a]);return o.length=n,o}});var Ad=Xh("Array","slice"),Id=ht,Cd=Ad,pd=Array.prototype,fd=function(t){var e=t.slice;return t===pd||Id(pd,t)&&e===pd.slice?Cd:e},vd=fd,md=n(vd),bd=n(Du);function yd(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function _d(t,e){var i;if(t){if("string"==typeof t)return yd(t,e);var o=md(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?bd(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?yd(t,e):void 0}}function Td(t,e){return function(t){if(Bu(t))return t}(t)||function(t,e){var i=null==t?null:void 0!==gh&&Lu(t)||t["@@iterator"];if(null!=i){var o,n,r,s,a=[],g=!0,l=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;g=!1}else for(;!(g=(o=r.call(i)).done)&&(qu(a).call(a,o.value),a.length!==e);g=!0);}catch(t){l=!0,n=t}finally{try{if(!g&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw n}}return a}}(t,e)||_d(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ed(t){return function(t){if(Bu(t))return yd(t)}(t)||function(t){if(void 0!==gh&&null!=Lu(t)||null!=t["@@iterator"])return bd(t)}(t)||_d(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var wd=n(Ll),kd=Xh("Array","concat"),Od=ht,Sd=kd,Rd=Array.prototype,xd=n((function(t){var e=t.concat;return t===Rd||Od(Rd,t)&&e===Rd.concat?Sd:e})),Dd=n(fd),Md=lt,Nd=Yn,Ld=gr,Pd=oi,$d=v([].concat),Bd=Md("Reflect","ownKeys")||function(t){var e=Nd.f(Pd(t)),i=Ld.f;return i?$d(e,i(t)):e};Si({target:"Reflect",stat:!0},{ownKeys:Bd});var Fd=n(nt.Reflect.ownKeys),zd=n($u),Hd=Qt,Gd=bn;Si({target:"Object",stat:!0,forced:g((function(){Gd(1)}))},{keys:function(t){return Gd(Hd(t))}});var Ud=n(nt.Object.keys),Vd=ss.forEach,Wd=lc("forEach")?[].forEach:function(t){return Vd(this,t,arguments.length>1?arguments[1]:void 0)};Si({target:"Array",proto:!0,forced:[].forEach!==Wd},{forEach:Wd});var jd=Xh("Array","forEach"),Yd=ao,Xd=te,Zd=ht,Kd=jd,Qd=Array.prototype,Jd={DOMTokenList:!0,NodeList:!0},qd=function(t){var e=t.forEach;return t===Qd||Zd(Qd,t)&&e===Qd.forEach||Xd(Jd,Yd(t))?Kd:e},tA=n(qd),eA=Si,iA=Fi,oA=v([].reverse),nA=[1,2];eA({target:"Array",proto:!0,forced:String(nA)===String(nA.reverse())},{reverse:function(){return iA(this)&&(this.length=this.length),oA(this)}});var rA=Xh("Array","reverse"),sA=ht,aA=rA,gA=Array.prototype,lA=function(t){var e=t.reverse;return t===gA||sA(gA,t)&&e===gA.reverse?aA:e},hA=n(lA),cA=Rt,uA=TypeError,dA=function(t,e){if(!delete t[e])throw new uA("Cannot delete property "+cA(e)+" of "+cA(t))},AA=Si,IA=Qt,CA=rn,pA=Ui,fA=ji,vA=Uu,mA=Xi,bA=Do,yA=Ji,_A=dA,TA=Po("splice"),EA=Math.max,wA=Math.min;AA({target:"Array",proto:!0,forced:!TA},{splice:function(t,e){var i,o,n,r,s,a,g=IA(this),l=fA(g),h=CA(t,l),c=arguments.length;for(0===c?i=o=0:1===c?(i=0,o=l-h):(i=c-2,o=wA(EA(pA(e),0),l-h)),mA(l+i-o),n=bA(g,o),r=0;r<o;r++)(s=h+r)in g&&yA(n,r,g[s]);if(n.length=o,i<o){for(r=h;r<l-o;r++)a=r+i,(s=r+o)in g?g[a]=g[s]:_A(g,a);for(r=l;r>l-o+i;r--)_A(g,r-1)}else if(i>o)for(r=l-o;r>h;r--)a=r+i-1,(s=r+o-1)in g?g[a]=g[s]:_A(g,a);for(r=0;r<i;r++)g[r+h]=arguments[r+2];return vA(g,l-o+i),n}});var kA=Xh("Array","splice"),OA=ht,SA=kA,RA=Array.prototype,xA=n((function(t){var e=t.splice;return t===RA||OA(RA,t)&&e===RA.splice?SA:e})),DA=D,MA=v,NA=L,LA=g,PA=bn,$A=gr,BA=P,FA=Qt,zA=Y,HA=Object.assign,GA=Object.defineProperty,UA=MA([].concat),VA=!HA||LA((function(){if(DA&&1!==HA({b:1},HA(GA({},"a",{enumerable:!0,get:function(){GA(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol("assign detection"),o="abcdefghijklmnopqrst";return t[i]=7,o.split("").forEach((function(t){e[t]=t})),7!==HA({},t)[i]||PA(HA({},e)).join("")!==o}))?function(t,e){for(var i=FA(t),o=arguments.length,n=1,r=$A.f,s=BA.f;o>n;)for(var a,g=zA(arguments[n++]),l=r?UA(PA(g),r(g)):PA(g),h=l.length,c=0;h>c;)a=l[c++],DA&&!NA(s,g,a)||(i[a]=g[a]);return i}:HA,WA=VA;Si({target:"Object",stat:!0,arity:2,forced:Object.assign!==WA},{assign:WA});var jA=n(nt.Object.assign),YA=Qt,XA=Dg,ZA=Tg;Si({target:"Object",stat:!0,forced:g((function(){XA(1)})),sham:!ZA},{getPrototypeOf:function(t){return XA(YA(t))}});var KA=nt.Object.getPrototypeOf;Si({target:"Object",stat:!0,sham:!D},{create:jn});var QA=nt.Object,JA=function(t,e){return QA.create(t,e)},qA=n(JA),tI=nt,eI=A;tI.JSON||(tI.JSON={stringify:JSON.stringify});var iI=function(t,e,i){return eI(tI.JSON.stringify,null,arguments)},oI=n(iI),nI="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,rI=TypeError,sI=function(t,e){if(t<e)throw new rI("Not enough arguments");return t},aI=a,gI=A,lI=R,hI=nI,cI=ct,uI=Da,dI=sI,AI=aI.Function,II=/MSIE .\./.test(cI)||hI&&function(){var t=aI.Bun.version.split(".");return t.length<3||"0"===t[0]&&(t[1]<3||"3"===t[1]&&"0"===t[2])}(),CI=function(t,e){var i=e?2:1;return II?function(o,n){var r=dI(arguments.length,1)>i,s=lI(o)?o:AI(o),a=r?uI(arguments,i):[],g=r?function(){gI(s,this,a)}:s;return e?t(g,n):t(g)}:t},pI=Si,fI=a,vI=CI(fI.setInterval,!0);pI({global:!0,bind:!0,forced:fI.setInterval!==vI},{setInterval:vI});var mI=Si,bI=a,yI=CI(bI.setTimeout,!0);mI({global:!0,bind:!0,forced:bI.setTimeout!==yI},{setTimeout:yI});var _I=n(nt.setTimeout),TI={exports:{}};!function(t){function e(t){if(t)return function(t){return Object.assign(t,e.prototype),t._callbacks=new Map,t}(t);this._callbacks=new Map}e.prototype.on=function(t,e){const i=this._callbacks.get(t)??[];return i.push(e),this._callbacks.set(t,i),this},e.prototype.once=function(t,e){const i=(...o)=>{this.off(t,i),e.apply(this,o)};return i.fn=e,this.on(t,i),this},e.prototype.off=function(t,e){if(void 0===t&&void 0===e)return this._callbacks.clear(),this;if(void 0===e)return this._callbacks.delete(t),this;const i=this._callbacks.get(t);if(i){for(const[t,o]of i.entries())if(o===e||o.fn===e){i.splice(t,1);break}0===i.length?this._callbacks.delete(t):this._callbacks.set(t,i)}return this},e.prototype.emit=function(t,...e){const i=this._callbacks.get(t);if(i){const t=[...i];for(const i of t)i.apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks.get(t)??[]},e.prototype.listenerCount=function(t){if(t)return this.listeners(t).length;let e=0;for(const t of this._callbacks.values())e+=t.length;return e},e.prototype.hasListeners=function(t){return this.listenerCount(t)>0},e.prototype.addEventListener=e.prototype.on,e.prototype.removeListener=e.prototype.off,e.prototype.removeEventListener=e.prototype.off,e.prototype.removeAllListeners=e.prototype.off,t.exports=e}(TI);var EI,wI=n(TI.exports);function kI(){return kI=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},kI.apply(this,arguments)}function OI(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function SI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}EI="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}return e}:Object.assign;var RI,xI=EI,DI=["","webkit","Moz","MS","ms","o"],MI="undefined"==typeof document?{style:{}}:document.createElement("div"),NI=Math.round,LI=Math.abs,PI=Date.now;function $I(t,e){for(var i,o,n=e[0].toUpperCase()+e.slice(1),r=0;r<DI.length;){if((o=(i=DI[r])?i+n:e)in t)return o;r++}}RI="undefined"==typeof window?{}:window;var BI=$I(MI.style,"touchAction"),FI=void 0!==BI;var zI="compute",HI="auto",GI="manipulation",UI="none",VI="pan-x",WI="pan-y",jI=function(){if(!FI)return!1;var t={},e=RI.CSS&&RI.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){return t[i]=!e||RI.CSS.supports("touch-action",i)})),t}(),YI="ontouchstart"in RI,XI=void 0!==$I(RI,"PointerEvent"),ZI=YI&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),KI="touch",QI="mouse",JI=16,qI=24,tC=["x","y"],eC=["clientX","clientY"];function iC(t,e,i){var o;if(t)if(t.forEach)t.forEach(e,i);else if(void 0!==t.length)for(o=0;o<t.length;)e.call(i,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function oC(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function nC(t,e){return t.indexOf(e)>-1}var rC=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===zI&&(t=this.compute()),FI&&this.manager.element.style&&jI[t]&&(this.manager.element.style[BI]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return iC(this.manager.recognizers,(function(e){oC(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(nC(t,UI))return UI;var e=nC(t,VI),i=nC(t,WI);return e&&i?UI:e||i?e?VI:WI:nC(t,GI)?GI:HI}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var o=this.actions,n=nC(o,UI)&&!jI[UI],r=nC(o,WI)&&!jI[WI],s=nC(o,VI)&&!jI[VI];if(n){var a=1===t.pointers.length,g=t.distance<2,l=t.deltaTime<250;if(a&&g&&l)return}if(!s||!r)return n||r&&6&i||s&&i&qI?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function sC(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function aC(t){var e=t.length;if(1===e)return{x:NI(t[0].clientX),y:NI(t[0].clientY)};for(var i=0,o=0,n=0;n<e;)i+=t[n].clientX,o+=t[n].clientY,n++;return{x:NI(i/e),y:NI(o/e)}}function gC(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:NI(t.pointers[i].clientX),clientY:NI(t.pointers[i].clientY)},i++;return{timeStamp:PI(),pointers:e,center:aC(e),deltaX:t.deltaX,deltaY:t.deltaY}}function lC(t,e,i){i||(i=tC);var o=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return Math.sqrt(o*o+n*n)}function hC(t,e,i){i||(i=tC);var o=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return 180*Math.atan2(n,o)/Math.PI}function cC(t,e){return t===e?1:LI(t)>=LI(e)?t<0?2:4:e<0?8:JI}function uC(t,e,i){return{x:e/t||0,y:i/t||0}}function dC(t,e){var i=t.session,o=e.pointers,n=o.length;i.firstInput||(i.firstInput=gC(e)),n>1&&!i.firstMultiple?i.firstMultiple=gC(e):1===n&&(i.firstMultiple=!1);var r=i.firstInput,s=i.firstMultiple,a=s?s.center:r.center,g=e.center=aC(o);e.timeStamp=PI(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=hC(a,g),e.distance=lC(a,g),function(t,e){var i=e.center,o=t.offsetDelta||{},n=t.prevDelta||{},r=t.prevInput||{};1!==e.eventType&&4!==r.eventType||(n=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},o=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=n.x+(i.x-o.x),e.deltaY=n.y+(i.y-o.y)}(i,e),e.offsetDirection=cC(e.deltaX,e.deltaY);var l,h,c=uC(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=LI(c.x)>LI(c.y)?c.x:c.y,e.scale=s?(l=s.pointers,lC((h=o)[0],h[1],eC)/lC(l[0],l[1],eC)):1,e.rotation=s?function(t,e){return hC(e[1],e[0],eC)+hC(t[1],t[0],eC)}(s.pointers,o):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,o,n,r,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(8!==e.eventType&&(a>25||void 0===s.velocity)){var g=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,h=uC(a,g,l);o=h.x,n=h.y,i=LI(h.x)>LI(h.y)?h.x:h.y,r=cC(g,l),t.lastInterval=e}else i=s.velocity,o=s.velocityX,n=s.velocityY,r=s.direction;e.velocity=i,e.velocityX=o,e.velocityY=n,e.direction=r}(i,e);var u,d=t.element,A=e.srcEvent;sC(u=A.composedPath?A.composedPath()[0]:A.path?A.path[0]:A.target,d)&&(d=u),e.target=d}function AC(t,e,i){var o=i.pointers.length,n=i.changedPointers.length,r=1&e&&o-n==0,s=12&e&&o-n==0;i.isFirst=!!r,i.isFinal=!!s,r&&(t.session={}),i.eventType=e,dC(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function IC(t){return t.trim().split(/\s+/g)}function CC(t,e,i){iC(IC(e),(function(e){t.addEventListener(e,i,!1)}))}function pC(t,e,i){iC(IC(e),(function(e){t.removeEventListener(e,i,!1)}))}function fC(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var vC=function(){function t(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){oC(t.options.enable,[t])&&i.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&CC(this.element,this.evEl,this.domHandler),this.evTarget&&CC(this.target,this.evTarget,this.domHandler),this.evWin&&CC(fC(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&pC(this.element,this.evEl,this.domHandler),this.evTarget&&pC(this.target,this.evTarget,this.domHandler),this.evWin&&pC(fC(this.element),this.evWin,this.domHandler)},t}();function mC(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var o=0;o<t.length;){if(i&&t[o][i]==e||!i&&t[o]===e)return o;o++}return-1}var bC={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},yC={2:KI,3:"pen",4:QI,5:"kinect"},_C="pointerdown",TC="pointermove pointerup pointercancel";RI.MSPointerEvent&&!RI.PointerEvent&&(_C="MSPointerDown",TC="MSPointerMove MSPointerUp MSPointerCancel");var EC=function(t){function e(){var i,o=e.prototype;return o.evEl=_C,o.evWin=TC,(i=t.apply(this,arguments)||this).store=i.manager.session.pointerEvents=[],i}return OI(e,t),e.prototype.handler=function(t){var e=this.store,i=!1,o=t.type.toLowerCase().replace("ms",""),n=bC[o],r=yC[t.pointerType]||t.pointerType,s=r===KI,a=mC(e,t.pointerId,"pointerId");1&n&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&n&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,n,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))},e}(vC);function wC(t){return Array.prototype.slice.call(t,0)}function kC(t,e,i){for(var o=[],n=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];mC(n,s)<0&&o.push(t[r]),n[r]=s,r++}return i&&(o=e?o.sort((function(t,i){return t[e]>i[e]})):o.sort()),o}var OC={touchstart:1,touchmove:2,touchend:4,touchcancel:8},SC=function(t){function e(){var i;return e.prototype.evTarget="touchstart touchmove touchend touchcancel",(i=t.apply(this,arguments)||this).targetIds={},i}return OI(e,t),e.prototype.handler=function(t){var e=OC[t.type],i=RC.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:KI,srcEvent:t})},e}(vC);function RC(t,e){var i,o,n=wC(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var s=wC(t.changedTouches),a=[],g=this.target;if(o=n.filter((function(t){return sC(t.target,g)})),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&e&&delete r[s[i].identifier],i++;return a.length?[kC(o.concat(a),"identifier",!0),a]:void 0}var xC={mousedown:1,mousemove:2,mouseup:4},DC=function(t){function e(){var i,o=e.prototype;return o.evEl="mousedown",o.evWin="mousemove mouseup",(i=t.apply(this,arguments)||this).pressed=!1,i}return OI(e,t),e.prototype.handler=function(t){var e=xC[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:QI,srcEvent:t}))},e}(vC);function MC(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY},o=this.lastTouches;this.lastTouches.push(i);setTimeout((function(){var t=o.indexOf(i);t>-1&&o.splice(t,1)}),2500)}}function NC(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,MC.call(this,e)):12&t&&MC.call(this,e)}function LC(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,o=0;o<this.lastTouches.length;o++){var n=this.lastTouches[o],r=Math.abs(e-n.x),s=Math.abs(i-n.y);if(r<=25&&s<=25)return!0}return!1}var PC=function(){return function(t){function e(e,i){var o;return(o=t.call(this,e,i)||this).handler=function(t,e,i){var n=i.pointerType===KI,r=i.pointerType===QI;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)NC.call(SI(SI(o)),e,i);else if(r&&LC.call(SI(SI(o)),i))return;o.callback(t,e,i)}},o.touch=new SC(o.manager,o.handler),o.mouse=new DC(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}return OI(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(vC)}();function $C(t,e,i){return!!Array.isArray(t)&&(iC(t,i[e],i),!0)}var BC=32,FC=1;function zC(t,e){var i=e.manager;return i?i.get(t):t}function HC(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var GC=function(){function t(t){void 0===t&&(t={}),this.options=kI({enable:!0},t),this.id=FC++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return xI(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if($C(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=zC(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return $C(t,"dropRecognizeWith",this)||(t=zC(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if($C(t,"requireFailure",this))return this;var e=this.requireFail;return-1===mC(e,t=zC(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if($C(t,"dropRequireFailure",this))return this;t=zC(t,this);var e=mC(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,i=this.state;function o(i){e.manager.emit(i,t)}i<8&&o(e.options.event+HC(i)),o(e.options.event),t.additionalEvent&&o(t.additionalEvent),i>=8&&o(e.options.event+HC(i))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=BC},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=xI({},t);if(!oC(this.options.enable,[this,e]))return this.reset(),void(this.state=BC);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),UC=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,kI({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}OI(e,t);var i=e.prototype;return i.getTouchAction=function(){return[GI]},i.process=function(t){var e=this,i=this.options,o=t.pointers.length===i.pointers,n=t.distance<i.threshold,r=t.deltaTime<i.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&r&&o){if(4!==t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<i.interval,a=!this.pCenter||lC(this.pCenter,t.center)<i.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t,0==this.count%i.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.interval),2):8}return BC},i.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=BC}),this.options.interval),BC},i.reset=function(){clearTimeout(this._timer)},i.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(GC),VC=function(t){function e(e){return void 0===e&&(e={}),t.call(this,kI({pointers:1},e))||this}OI(e,t);var i=e.prototype;return i.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},i.process=function(t){var e=this.state,i=t.eventType,o=6&e,n=this.attrTest(t);return o&&(8&i||!n)?16|e:o||n?4&i?8|e:2&e?4|e:2:BC},e}(GC);function WC(t){return t===JI?"down":8===t?"up":2===t?"left":4===t?"right":""}var jC=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,kI({event:"pan",threshold:10,pointers:1,direction:30},e))||this).pX=null,i.pY=null,i}OI(e,t);var i=e.prototype;return i.getTouchAction=function(){var t=this.options.direction,e=[];return 6&t&&e.push(WI),t&qI&&e.push(VI),e},i.directionTest=function(t){var e=this.options,i=!0,o=t.distance,n=t.direction,r=t.deltaX,s=t.deltaY;return n&e.direction||(6&e.direction?(n=0===r?1:r<0?2:4,i=r!==this.pX,o=Math.abs(t.deltaX)):(n=0===s?1:s<0?8:JI,i=s!==this.pY,o=Math.abs(t.deltaY))),t.direction=n,i&&o>e.threshold&&n&e.direction},i.attrTest=function(t){return VC.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},i.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var i=WC(e.direction);i&&(e.additionalEvent=this.options.event+i),t.prototype.emit.call(this,e)},e}(VC),YC=function(t){function e(e){return void 0===e&&(e={}),t.call(this,kI({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},e))||this}OI(e,t);var i=e.prototype;return i.getTouchAction=function(){return jC.prototype.getTouchAction.call(this)},i.attrTest=function(e){var i,o=this.options.direction;return 30&o?i=e.overallVelocity:6&o?i=e.overallVelocityX:o&qI&&(i=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&o&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&LI(i)>this.options.velocity&&4&e.eventType},i.emit=function(t){var e=WC(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(VC),XC=function(t){function e(e){return void 0===e&&(e={}),t.call(this,kI({event:"pinch",threshold:0,pointers:2},e))||this}OI(e,t);var i=e.prototype;return i.getTouchAction=function(){return[UI]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},i.emit=function(e){if(1!==e.scale){var i=e.scale<1?"in":"out";e.additionalEvent=this.options.event+i}t.prototype.emit.call(this,e)},e}(VC),ZC=function(t){function e(e){return void 0===e&&(e={}),t.call(this,kI({event:"rotate",threshold:0,pointers:2},e))||this}OI(e,t);var i=e.prototype;return i.getTouchAction=function(){return[UI]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(VC),KC=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,kI({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,i._input=null,i}OI(e,t);var i=e.prototype;return i.getTouchAction=function(){return[HI]},i.process=function(t){var e=this,i=this.options,o=t.pointers.length===i.pointers,n=t.distance<i.threshold,r=t.deltaTime>i.time;if(this._input=t,!n||!o||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.time);else if(4&t.eventType)return 8;return BC},i.reset=function(){clearTimeout(this._timer)},i.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=PI(),this.manager.emit(this.options.event,this._input)))},e}(GC),QC={domEvents:!1,touchAction:zI,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},JC=[[ZC,{enable:!1}],[XC,{enable:!1},["rotate"]],[YC,{direction:6}],[jC,{direction:6},["swipe"]],[UC],[UC,{event:"doubletap",taps:2},["tap"]],[KC]];function qC(t,e){var i,o=t.element;o.style&&(iC(t.options.cssProps,(function(n,r){i=$I(o.style,r),e?(t.oldCssProps[i]=o.style[i],o.style[i]=n):o.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}var tp=function(){function t(t,e){var i,o=this;this.options=xI({},QC,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new((i=this).options.inputClass||(XI?EC:ZI?SC:YI?PC:DC))(i,AC),this.touchAction=new rC(this,this.options.touchAction),qC(this,!0),iC(this.options.recognizers,(function(t){var e=o.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}var e=t.prototype;return e.set=function(t){return xI(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var o=this.recognizers,n=e.curRecognizer;(!n||n&&8&n.state)&&(e.curRecognizer=null,n=null);for(var r=0;r<o.length;)i=o[r],2===e.stopped||n&&i!==n&&!i.canRecognizeWith(n)?i.reset():i.recognize(t),!n&&14&i.state&&(e.curRecognizer=i,n=i),r++}},e.get=function(t){if(t instanceof GC)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event===t)return e[i];return null},e.add=function(t){if($C(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if($C(t,"remove",this))return this;var e=this.get(t);if(t){var i=this.recognizers,o=mC(i,e);-1!==o&&(i.splice(o,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var i=this.handlers;return iC(IC(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this},e.off=function(t,e){if(void 0===t)return this;var i=this.handlers;return iC(IC(t),(function(t){e?i[t]&&i[t].splice(mC(i[t],e),1):delete i[t]})),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var o=0;o<i.length;)i[o](e),o++}},e.destroy=function(){this.element&&qC(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),ep={touchstart:1,touchmove:2,touchend:4,touchcancel:8},ip=function(t){function e(){var i,o=e.prototype;return o.evTarget="touchstart",o.evWin="touchstart touchmove touchend touchcancel",(i=t.apply(this,arguments)||this).started=!1,i}return OI(e,t),e.prototype.handler=function(t){var e=ep[t.type];if(1===e&&(this.started=!0),this.started){var i=op.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:KI,srcEvent:t})}},e}(vC);function op(t,e){var i=wC(t.touches),o=wC(t.changedTouches);return 12&e&&(i=kC(i.concat(o),"identifier",!0)),[i,o]}function np(t,e,i){var o="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",n=window.console&&(window.console.warn||window.console.log);return n&&n.call(window.console,o,i),t.apply(this,arguments)}}var rp=np((function(t,e,i){for(var o=Object.keys(e),n=0;n<o.length;)(!i||i&&void 0===t[o[n]])&&(t[o[n]]=e[o[n]]),n++;return t}),"extend","Use `assign`."),sp=np((function(t,e){return rp(t,e,!0)}),"merge","Use `assign`.");function ap(t,e,i){var o,n=e.prototype;(o=t.prototype=Object.create(n)).constructor=t,o._super=n,i&&xI(o,i)}function gp(t,e){return function(){return t.apply(e,arguments)}}var lp=function(){var t=function(t,e){return void 0===e&&(e={}),new tp(t,kI({recognizers:JC.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=30,t.DIRECTION_DOWN=JI,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=qI,t.DIRECTION_NONE=1,t.DIRECTION_DOWN=JI,t.INPUT_START=1,t.INPUT_MOVE=2,t.INPUT_END=4,t.INPUT_CANCEL=8,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=BC,t.Manager=tp,t.Input=vC,t.TouchAction=rC,t.TouchInput=SC,t.MouseInput=DC,t.PointerEventInput=EC,t.TouchMouseInput=PC,t.SingleTouchInput=ip,t.Recognizer=GC,t.AttrRecognizer=VC,t.Tap=UC,t.Pan=jC,t.Swipe=YC,t.Pinch=XC,t.Rotate=ZC,t.Press=KC,t.on=CC,t.off=pC,t.each=iC,t.merge=sp,t.extend=rp,t.bindFn=gp,t.assign=xI,t.inherit=ap,t.bindFn=gp,t.prefixed=$I,t.toArray=wC,t.inArray=mC,t.uniqueArray=kC,t.splitStr=IC,t.boolOrFn=oC,t.hasParent=sC,t.addEventListeners=CC,t.removeEventListeners=pC,t.defaults=xI({},QC,{preset:JC}),t}();function hp(t,e){var i=void 0!==wd&&Pu(t)||t["@@iterator"];if(!i){if(zd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return cp(t,e);var o=Dd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Mu(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?cp(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function cp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var up=wd("DELETE");function dp(){var t=Ap.apply(void 0,arguments);return Cp(t),t}function Ap(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e.length<2)return e[0];var o;if(e.length>2)return Ap.apply(void 0,xd(o=[dp(e[0],e[1])]).call(o,Ed(Dd(e).call(e,2))));var n=e[0],r=e[1];if(n instanceof Date&&r instanceof Date)return n.setTime(r.getTime()),n;var s,a=hp(Fd(r));try{for(a.s();!(s=a.n()).done;){var g=s.value;Object.prototype.propertyIsEnumerable.call(r,g)&&(r[g]===up?delete n[g]:null===n[g]||null===r[g]||"object"!=typeof n[g]||"object"!=typeof r[g]||zd(n[g])||zd(r[g])?n[g]=Ip(r[g]):n[g]=Ap(n[g],r[g]))}}catch(t){a.e(t)}finally{a.f()}return n}function Ip(t){return zd(t)?Oc(t).call(t,(function(t){return Ip(t)})):"object"==typeof t&&null!==t?t instanceof Date?new Date(t.getTime()):Ap({},t):t}function Cp(t){for(var e=0,i=Ud(t);e<i.length;e++){var o=i[e];t[o]===up?delete t[o]:"object"==typeof t[o]&&null!==t[o]&&Cp(t[o])}}var pp="undefined"!=typeof window?window.Hammer||lp:function(){return function(){var t=function(){};return{on:t,off:t,destroy:t,emit:t,get:()=>({set:t})}}()};function fp(t){var e,i=this;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){i._dom.overlay.parentNode.removeChild(i._dom.overlay)}));var o=pp(this._dom.overlay);o.on("tap",tc(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push((function(){o.destroy()}));var n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];tA(n).call(n,(function(t){o.on(t,(function(t){t.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(e){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||i.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",i._onClick)}))),this._escListener=function(t){("key"in t?"Escape"===t.key:27===t.keyCode)&&i.deactivate()}}wI(fp.prototype),fp.current=null,fp.prototype.destroy=function(){var t,e;this.deactivate();var i,o=hp(hA(t=xA(e=this._cleanupQueue).call(e,0)).call(t));try{for(o.s();!(i=o.n()).done;)(0,i.value)()}catch(t){o.e(t)}finally{o.f()}},fp.prototype.activate=function(){fp.current&&fp.current.deactivate(),fp.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},fp.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},fp.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var vp=wo,mp=Rt,bp=TypeError,yp=function(t){if(vp(t))return t;throw new bp(mp(t)+" is not a constructor")},_p=Si,Tp=A,Ep=Vh,wp=yp,kp=oi,Op=ot,Sp=jn,Rp=g,xp=lt("Reflect","construct"),Dp=Object.prototype,Mp=[].push,Np=Rp((function(){function t(){}return!(xp((function(){}),[],t)instanceof t)})),Lp=!Rp((function(){xp((function(){}))})),Pp=Np||Lp;_p({target:"Reflect",stat:!0,forced:Pp,sham:Pp},{construct:function(t,e){wp(t),kp(e);var i=arguments.length<3?t:wp(arguments[2]);if(Lp&&!Np)return xp(t,e,i);if(t===i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var o=[null];return Tp(Mp,o,e),new(Tp(Ep,t,o))}var n=i.prototype,r=Sp(Op(n)?n:Dp),s=Tp(t,r,e);return Op(s)?s:r}});var $p=n(nt.Reflect.construct),Bp=n(nt.Object.getOwnPropertySymbols),Fp={exports:{}},zp=Si,Hp=g,Gp=tt,Up=x.f,Vp=D;zp({target:"Object",stat:!0,forced:!Vp||Hp((function(){Up(1)})),sham:!Vp},{getOwnPropertyDescriptor:function(t,e){return Up(Gp(t),e)}});var Wp=nt.Object,jp=Fp.exports=function(t,e){return Wp.getOwnPropertyDescriptor(t,e)};Wp.getOwnPropertyDescriptor.sham&&(jp.sham=!0);var Yp=n(Fp.exports),Xp=Bd,Zp=tt,Kp=x,Qp=Ji;Si({target:"Object",stat:!0,sham:!D},{getOwnPropertyDescriptors:function(t){for(var e,i,o=Zp(t),n=Kp.f,r=Xp(o),s={},a=0;r.length>a;)void 0!==(i=n(o,e=r[a++]))&&Qp(s,e,i);return s}});var Jp=n(nt.Object.getOwnPropertyDescriptors),qp={exports:{}},tf=Si,ef=D,of=tn.f;tf({target:"Object",stat:!0,forced:Object.defineProperties!==of,sham:!ef},{defineProperties:of});var nf=nt.Object,rf=qp.exports=function(t,e){return nf.defineProperties(t,e)};nf.defineProperties.sham&&(rf.sham=!0);var sf=n(qp.exports),af=n(Li);function gf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var lf=JA,hf=n(lf);Si({target:"Object",stat:!0},{setPrototypeOf:tl});var cf=nt.Object.setPrototypeOf,uf=n(cf),df=n(qh);function Af(t,e){var i;return Af=uf?df(i=uf).call(i):function(t,e){return t.__proto__=e,t},Af(t,e)}function If(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=hf(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),$i(t,"prototype",{writable:!1}),e&&Af(t,e)}function Cf(t,e){if(e&&("object"===Oh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gf(t)}var pf=KA,ff=n(pf);function vf(t){var e;return vf=uf?df(e=ff).call(e):function(t){return t.__proto__||ff(t)},vf(t)}var mf={exports:{}},bf={exports:{}};!function(t){var e=ah,i=wh;function o(n){return t.exports=o="function"==typeof e&&"symbol"==typeof i?function(t){return typeof t}:function(t){return t&&"function"==typeof e&&t.constructor===e&&t!==e.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,o(n)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}(bf);var yf=bf.exports,_f=qd,Tf=te,Ef=Bd,wf=x,kf=Je,Of=ot,Sf=pi,Rf=Error,xf=v("".replace),Df=String(new Rf("zxcasd").stack),Mf=/\n\s*at [^:]*:[^\n]*/,Nf=Mf.test(Df),Lf=G,Pf=!g((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",Lf(1,7)),7!==t.stack)})),$f=pi,Bf=function(t,e){if(Nf&&"string"==typeof t&&!Rf.prepareStackTrace)for(;e--;)t=xf(t,Mf,"");return t},Ff=Pf,zf=Error.captureStackTrace,Hf=Qe,Gf=L,Uf=oi,Vf=Rt,Wf=eu,jf=ji,Yf=ht,Xf=Au,Zf=au,Kf=Zc,Qf=TypeError,Jf=function(t,e){this.stopped=t,this.result=e},qf=Jf.prototype,tv=function(t,e,i){var o,n,r,s,a,g,l,h=i&&i.that,c=!(!i||!i.AS_ENTRIES),u=!(!i||!i.IS_RECORD),d=!(!i||!i.IS_ITERATOR),A=!(!i||!i.INTERRUPTED),I=Hf(e,h),C=function(t){return o&&Kf(o,"normal",t),new Jf(!0,t)},p=function(t){return c?(Uf(t),A?I(t[0],t[1],C):I(t[0],t[1])):A?I(t,C):I(t)};if(u)o=t.iterator;else if(d)o=t;else{if(!(n=Zf(t)))throw new Qf(Vf(t)+" is not iterable");if(Wf(n)){for(r=0,s=jf(t);s>r;r++)if((a=p(t[r]))&&Yf(qf,a))return a;return new Jf(!1)}o=Xf(t,n)}for(g=u?t.next:o.next;!(l=Gf(g,o)).done;){try{a=p(l.value)}catch(t){Kf(o,"throw",t)}if("object"==typeof a&&a&&Yf(qf,a))return a}return new Jf(!1)},ev=qo,iv=Si,ov=ht,nv=Dg,rv=tl,sv=function(t,e,i){for(var o=Ef(e),n=kf.f,r=wf.f,s=0;s<o.length;s++){var a=o[s];Tf(t,a)||i&&Tf(i,a)||n(t,a,r(e,a))}},av=jn,gv=pi,lv=G,hv=function(t,e){Of(e)&&"cause"in e&&Sf(t,"cause",e.cause)},cv=function(t,e,i,o){Ff&&(zf?zf(t,e):$f(t,"stack",Bf(i,o)))},uv=tv,dv=function(t,e){return void 0===t?arguments.length<2?"":e:ev(t)},Av=Ae("toStringTag"),Iv=Error,Cv=[].push,pv=function(t,e){var i,o=ov(fv,this);rv?i=rv(new Iv,o?nv(this):fv):(i=o?this:av(fv),gv(i,Av,"Error")),void 0!==e&&gv(i,"message",dv(e)),cv(i,pv,i.stack,1),arguments.length>2&&hv(i,arguments[2]);var n=[];return uv(t,Cv,{that:n}),gv(i,"errors",n),i};rv?rv(pv,Iv):sv(pv,Iv,{name:!0});var fv=pv.prototype=av(Iv.prototype,{constructor:lv(1,pv),message:lv(1,""),name:lv(1,"AggregateError")});iv({global:!0,constructor:!0,arity:2},{AggregateError:pv});var vv,mv,bv,yv,_v=lt,Tv=ur,Ev=D,wv=Ae("species"),kv=function(t){var e=_v(t);Ev&&e&&!e[wv]&&Tv(e,wv,{configurable:!0,get:function(){return this}})},Ov=ht,Sv=TypeError,Rv=function(t,e){if(Ov(e,t))return t;throw new Sv("Incorrect invocation")},xv=oi,Dv=yp,Mv=X,Nv=Ae("species"),Lv=function(t,e){var i,o=xv(t).constructor;return void 0===o||Mv(i=xv(o)[Nv])?e:Dv(i)},Pv=/(?:ipad|iphone|ipod).*applewebkit/i.test(ct),$v=a,Bv=A,Fv=Qe,zv=R,Hv=te,Gv=g,Uv=Sn,Vv=Da,Wv=ke,jv=sI,Yv=Pv,Xv=hc,Zv=$v.setImmediate,Kv=$v.clearImmediate,Qv=$v.process,Jv=$v.Dispatch,qv=$v.Function,tm=$v.MessageChannel,em=$v.String,im=0,om={},nm="onreadystatechange";Gv((function(){vv=$v.location}));var rm=function(t){if(Hv(om,t)){var e=om[t];delete om[t],e()}},sm=function(t){return function(){rm(t)}},am=function(t){rm(t.data)},gm=function(t){$v.postMessage(em(t),vv.protocol+"//"+vv.host)};Zv&&Kv||(Zv=function(t){jv(arguments.length,1);var e=zv(t)?t:qv(t),i=Vv(arguments,1);return om[++im]=function(){Bv(e,void 0,i)},mv(im),im},Kv=function(t){delete om[t]},Xv?mv=function(t){Qv.nextTick(sm(t))}:Jv&&Jv.now?mv=function(t){Jv.now(sm(t))}:tm&&!Yv?(yv=(bv=new tm).port2,bv.port1.onmessage=am,mv=Fv(yv.postMessage,yv)):$v.addEventListener&&zv($v.postMessage)&&!$v.importScripts&&vv&&"file:"!==vv.protocol&&!Gv(gm)?(mv=gm,$v.addEventListener("message",am,!1)):mv=nm in Wv("script")?function(t){Uv.appendChild(Wv("script"))[nm]=function(){Uv.removeChild(this),rm(t)}}:function(t){setTimeout(sm(t),0)});var lm={set:Zv,clear:Kv},hm=function(){this.head=null,this.tail=null};hm.prototype={add:function(t){var e={item:t,next:null},i=this.tail;i?i.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var cm,um,dm,Am,Im,Cm=hm,pm=/ipad|iphone|ipod/i.test(ct)&&"undefined"!=typeof Pebble,fm=/web0s(?!.*chrome)/i.test(ct),vm=a,mm=Qe,bm=x.f,ym=lm.set,_m=Cm,Tm=Pv,Em=pm,wm=fm,km=hc,Om=vm.MutationObserver||vm.WebKitMutationObserver,Sm=vm.document,Rm=vm.process,xm=vm.Promise,Dm=bm(vm,"queueMicrotask"),Mm=Dm&&Dm.value;if(!Mm){var Nm=new _m,Lm=function(){var t,e;for(km&&(t=Rm.domain)&&t.exit();e=Nm.get();)try{e()}catch(t){throw Nm.head&&cm(),t}t&&t.enter()};Tm||km||wm||!Om||!Sm?!Em&&xm&&xm.resolve?((Am=xm.resolve(void 0)).constructor=xm,Im=mm(Am.then,Am),cm=function(){Im(Lm)}):km?cm=function(){Rm.nextTick(Lm)}:(ym=mm(ym,vm),cm=function(){ym(Lm)}):(um=!0,dm=Sm.createTextNode(""),new Om(Lm).observe(dm,{characterData:!0}),cm=function(){dm.data=um=!um}),Mm=function(t){Nm.head||cm(),Nm.add(t)}}var Pm=Mm,$m=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},Bm=a.Promise,Fm="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,zm=!Fm&&!hc&&"object"==typeof window&&"object"==typeof document,Hm=a,Gm=Bm,Um=R,Vm=Ye,Wm=co,jm=Ae,Ym=zm,Xm=Fm,Zm=ft,Km=Gm&&Gm.prototype,Qm=jm("species"),Jm=!1,qm=Um(Hm.PromiseRejectionEvent),tb={CONSTRUCTOR:Vm("Promise",(function(){var t=Wm(Gm),e=t!==String(Gm);if(!e&&66===Zm)return!0;if(!Km.catch||!Km.finally)return!0;if(!Zm||Zm<51||!/native code/.test(t)){var i=new Gm((function(t){t(1)})),o=function(t){t((function(){}),(function(){}))};if((i.constructor={})[Qm]=o,!(Jm=i.then((function(){}))instanceof o))return!0}return!e&&(Ym||Xm)&&!qm})),REJECTION_EVENT:qm,SUBCLASSING:Jm},eb={},ib=Nt,ob=TypeError,nb=function(t){var e,i;this.promise=new t((function(t,o){if(void 0!==e||void 0!==i)throw new ob("Bad Promise constructor");e=t,i=o})),this.resolve=ib(e),this.reject=ib(i)};eb.f=function(t){return new nb(t)};var rb,sb,ab=Si,gb=hc,lb=a,hb=L,cb=hr,ub=Pr,db=kv,Ab=Nt,Ib=R,Cb=ot,pb=Rv,fb=Lv,vb=lm.set,mb=Pm,bb=function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}},yb=$m,_b=Cm,Tb=Jr,Eb=Bm,wb=tb,kb=eb,Ob="Promise",Sb=wb.CONSTRUCTOR,Rb=wb.REJECTION_EVENT,xb=Tb.getterFor(Ob),Db=Tb.set,Mb=Eb&&Eb.prototype,Nb=Eb,Lb=Mb,Pb=lb.TypeError,$b=lb.document,Bb=lb.process,Fb=kb.f,zb=Fb,Hb=!!($b&&$b.createEvent&&lb.dispatchEvent),Gb="unhandledrejection",Ub=function(t){var e;return!(!Cb(t)||!Ib(e=t.then))&&e},Vb=function(t,e){var i,o,n,r=e.value,s=1===e.state,a=s?t.ok:t.fail,g=t.resolve,l=t.reject,h=t.domain;try{a?(s||(2===e.rejection&&Zb(e),e.rejection=1),!0===a?i=r:(h&&h.enter(),i=a(r),h&&(h.exit(),n=!0)),i===t.promise?l(new Pb("Promise-chain cycle")):(o=Ub(i))?hb(o,i,g,l):g(i)):l(r)}catch(t){h&&!n&&h.exit(),l(t)}},Wb=function(t,e){t.notified||(t.notified=!0,mb((function(){for(var i,o=t.reactions;i=o.get();)Vb(i,t);t.notified=!1,e&&!t.rejection&&Yb(t)})))},jb=function(t,e,i){var o,n;Hb?((o=$b.createEvent("Event")).promise=e,o.reason=i,o.initEvent(t,!1,!0),lb.dispatchEvent(o)):o={promise:e,reason:i},!Rb&&(n=lb["on"+t])?n(o):t===Gb&&bb("Unhandled promise rejection",i)},Yb=function(t){hb(vb,lb,(function(){var e,i=t.facade,o=t.value;if(Xb(t)&&(e=yb((function(){gb?Bb.emit("unhandledRejection",o,i):jb(Gb,i,o)})),t.rejection=gb||Xb(t)?2:1,e.error))throw e.value}))},Xb=function(t){return 1!==t.rejection&&!t.parent},Zb=function(t){hb(vb,lb,(function(){var e=t.facade;gb?Bb.emit("rejectionHandled",e):jb("rejectionhandled",e,t.value)}))},Kb=function(t,e,i){return function(o){t(e,o,i)}},Qb=function(t,e,i){t.done||(t.done=!0,i&&(t=i),t.value=e,t.state=2,Wb(t,!0))},Jb=function(t,e,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===e)throw new Pb("Promise can't be resolved itself");var o=Ub(e);o?mb((function(){var i={done:!1};try{hb(o,e,Kb(Jb,i,t),Kb(Qb,i,t))}catch(e){Qb(i,e,t)}})):(t.value=e,t.state=1,Wb(t,!1))}catch(e){Qb({done:!1},e,t)}}};Sb&&(Lb=(Nb=function(t){pb(this,Lb),Ab(t),hb(rb,this);var e=xb(this);try{t(Kb(Jb,e),Kb(Qb,e))}catch(t){Qb(e,t)}}).prototype,(rb=function(t){Db(this,{type:Ob,done:!1,notified:!1,parent:!1,reactions:new _b,rejection:!1,state:0,value:void 0})}).prototype=cb(Lb,"then",(function(t,e){var i=xb(this),o=Fb(fb(this,Nb));return i.parent=!0,o.ok=!Ib(t)||t,o.fail=Ib(e)&&e,o.domain=gb?Bb.domain:void 0,0===i.state?i.reactions.add(o):mb((function(){Vb(o,i)})),o.promise})),sb=function(){var t=new rb,e=xb(t);this.promise=t,this.resolve=Kb(Jb,e),this.reject=Kb(Qb,e)},kb.f=Fb=function(t){return t===Nb||undefined===t?new sb(t):zb(t)}),ab({global:!0,constructor:!0,wrap:!0,forced:Sb},{Promise:Nb}),ub(Nb,Ob,!1,!0),db(Ob);var qb=Bm,ty=tb.CONSTRUCTOR||!Ru((function(t){qb.all(t).then(void 0,(function(){}))})),ey=L,iy=Nt,oy=eb,ny=$m,ry=tv;Si({target:"Promise",stat:!0,forced:ty},{all:function(t){var e=this,i=oy.f(e),o=i.resolve,n=i.reject,r=ny((function(){var i=iy(e.resolve),r=[],s=0,a=1;ry(t,(function(t){var g=s++,l=!1;a++,ey(i,e,t).then((function(t){l||(l=!0,r[g]=t,--a||o(r))}),n)})),--a||o(r)}));return r.error&&n(r.value),i.promise}});var sy=Si,ay=tb.CONSTRUCTOR;Bm&&Bm.prototype,sy({target:"Promise",proto:!0,forced:ay,real:!0},{catch:function(t){return this.then(void 0,t)}});var gy=L,ly=Nt,hy=eb,cy=$m,uy=tv;Si({target:"Promise",stat:!0,forced:ty},{race:function(t){var e=this,i=hy.f(e),o=i.reject,n=cy((function(){var n=ly(e.resolve);uy(t,(function(t){gy(n,e,t).then(i.resolve,o)}))}));return n.error&&o(n.value),i.promise}});var dy=L,Ay=eb;Si({target:"Promise",stat:!0,forced:tb.CONSTRUCTOR},{reject:function(t){var e=Ay.f(this);return dy(e.reject,void 0,t),e.promise}});var Iy=oi,Cy=ot,py=eb,fy=function(t,e){if(Iy(t),Cy(e)&&e.constructor===t)return e;var i=py.f(t);return(0,i.resolve)(e),i.promise},vy=Si,my=Bm,by=tb.CONSTRUCTOR,yy=fy,_y=lt("Promise"),Ty=!by;vy({target:"Promise",stat:!0,forced:true},{resolve:function(t){return yy(Ty&&this===_y?my:this,t)}});var Ey=L,wy=Nt,ky=eb,Oy=$m,Sy=tv;Si({target:"Promise",stat:!0,forced:ty},{allSettled:function(t){var e=this,i=ky.f(e),o=i.resolve,n=i.reject,r=Oy((function(){var i=wy(e.resolve),n=[],r=0,s=1;Sy(t,(function(t){var a=r++,g=!1;s++,Ey(i,e,t).then((function(t){g||(g=!0,n[a]={status:"fulfilled",value:t},--s||o(n))}),(function(t){g||(g=!0,n[a]={status:"rejected",reason:t},--s||o(n))}))})),--s||o(n)}));return r.error&&n(r.value),i.promise}});var Ry=L,xy=Nt,Dy=lt,My=eb,Ny=$m,Ly=tv,Py="No one promise resolved";Si({target:"Promise",stat:!0,forced:ty},{any:function(t){var e=this,i=Dy("AggregateError"),o=My.f(e),n=o.resolve,r=o.reject,s=Ny((function(){var o=xy(e.resolve),s=[],a=0,g=1,l=!1;Ly(t,(function(t){var h=a++,c=!1;g++,Ry(o,e,t).then((function(t){c||l||(l=!0,n(t))}),(function(t){c||l||(c=!0,s[h]=t,--g||r(new i(s,Py)))}))})),--g||r(new i(s,Py))}));return s.error&&r(s.value),o.promise}});var $y=Si,By=Bm,Fy=g,zy=lt,Hy=R,Gy=Lv,Uy=fy,Vy=By&&By.prototype;$y({target:"Promise",proto:!0,real:!0,forced:!!By&&Fy((function(){Vy.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=Gy(this,zy("Promise")),i=Hy(t);return this.then(i?function(i){return Uy(e,t()).then((function(){return i}))}:t,i?function(i){return Uy(e,t()).then((function(){throw i}))}:t)}});var Wy=nt.Promise,jy=eb;Si({target:"Promise",stat:!0},{withResolvers:function(){var t=jy.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}});var Yy=Wy,Xy=eb,Zy=$m;Si({target:"Promise",stat:!0,forced:!0},{try:function(t){var e=Xy.f(this),i=Zy(t);return(i.error?e.reject:e.resolve)(i.value),e.promise}});var Ky=Yy,Qy=lA;!function(t){var e=yf.default,i=Pi,o=ah,n=lf,r=pf,s=_f,a=Ju,g=cf,l=Ky,h=Qy,c=vd;function u(){t.exports=u=function(){return A},t.exports.__esModule=!0,t.exports.default=t.exports;var d,A={},I=Object.prototype,C=I.hasOwnProperty,p=i||function(t,e,i){t[e]=i.value},f="function"==typeof o?o:{},v=f.iterator||"@@iterator",m=f.asyncIterator||"@@asyncIterator",b=f.toStringTag||"@@toStringTag";function y(t,e,o){return i(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{y({},"")}catch(d){y=function(t,e,i){return t[e]=i}}function _(t,e,i,o){var r=e&&e.prototype instanceof R?e:R,s=n(r.prototype),a=new G(o||[]);return p(s,"_invoke",{value:B(t,i,a)}),s}function T(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}A.wrap=_;var E="suspendedStart",w="suspendedYield",k="executing",O="completed",S={};function R(){}function x(){}function D(){}var M={};y(M,v,(function(){return this}));var N=r&&r(r(U([])));N&&N!==I&&C.call(N,v)&&(M=N);var L=D.prototype=R.prototype=n(M);function P(t){var e;s(e=["next","throw","return"]).call(e,(function(e){y(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,i){function o(n,r,s,a){var g=T(t[n],t,r);if("throw"!==g.type){var l=g.arg,h=l.value;return h&&"object"==e(h)&&C.call(h,"__await")?i.resolve(h.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):i.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return o("throw",t,s,a)}))}a(g.arg)}var n;p(this,"_invoke",{value:function(t,e){function r(){return new i((function(i,n){o(t,e,i,n)}))}return n=n?n.then(r,r):r()}})}function B(t,e,i){var o=E;return function(n,r){if(o===k)throw new Error("Generator is already running");if(o===O){if("throw"===n)throw r;return{value:d,done:!0}}for(i.method=n,i.arg=r;;){var s=i.delegate;if(s){var a=F(s,i);if(a){if(a===S)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===E)throw o=O,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=k;var g=T(t,e,i);if("normal"===g.type){if(o=i.done?O:w,g.arg===S)continue;return{value:g.arg,done:i.done}}"throw"===g.type&&(o=O,i.method="throw",i.arg=g.arg)}}}function F(t,e){var i=e.method,o=t.iterator[i];if(o===d)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=d,F(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),S;var n=T(o,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,S;var r=n.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=d),e.delegate=null,S):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,S)}function z(t){var e,i={tryLoc:t[0]};1 in t&&(i.catchLoc=t[1]),2 in t&&(i.finallyLoc=t[2],i.afterLoc=t[3]),a(e=this.tryEntries).call(e,i)}function H(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],s(t).call(t,z,this),this.reset(!0)}function U(t){if(t||""===t){var i=t[v];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,n=function e(){for(;++o<t.length;)if(C.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=d,e.done=!0,e};return n.next=n}}throw new TypeError(e(t)+" is not iterable")}return x.prototype=D,p(L,"constructor",{value:D,configurable:!0}),p(D,"constructor",{value:x,configurable:!0}),x.displayName=y(D,b,"GeneratorFunction"),A.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},A.mark=function(t){return g?g(t,D):(t.__proto__=D,y(t,b,"GeneratorFunction")),t.prototype=n(L),t},A.awrap=function(t){return{__await:t}},P($.prototype),y($.prototype,m,(function(){return this})),A.AsyncIterator=$,A.async=function(t,e,i,o,n){void 0===n&&(n=l);var r=new $(_(t,e,i,o),n);return A.isGeneratorFunction(e)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},P(L),y(L,b,"Generator"),y(L,v,(function(){return this})),y(L,"toString",(function(){return"[object Generator]"})),A.keys=function(t){var e=Object(t),i=[];for(var o in e)a(i).call(i,o);return h(i).call(i),function t(){for(;i.length;){var o=i.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},A.values=U,G.prototype={constructor:G,reset:function(t){var e;if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,s(e=this.tryEntries).call(e,H),!t)for(var i in this)"t"===i.charAt(0)&&C.call(this,i)&&!isNaN(+c(i).call(i,1))&&(this[i]=d)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,o){return r.type="throw",r.arg=t,e.next=i,o&&(e.method="next",e.arg=d),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],r=n.completion;if("root"===n.tryLoc)return i("end");if(n.tryLoc<=this.prev){var s=C.call(n,"catchLoc"),a=C.call(n,"finallyLoc");if(s&&a){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(s){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&C.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var r=n?n.completion:{};return r.type=t,r.arg=e,n?(this.method="next",this.next=n.finallyLoc,S):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),S},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),H(i),S}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var n=o.arg;H(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:U(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=d),S}},A}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports}(mf);var Jy=(0,mf.exports)(),qy=Jy;try{regeneratorRuntime=Jy}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=Jy:Function("r","regeneratorRuntime = r")(Jy)}var t_=n(qy),e_={exports:{}},i_=g((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),o_=g,n_=ot,r_=_,s_=i_,a_=Object.isExtensible,g_=o_((function(){a_(1)}))||s_?function(t){return!!n_(t)&&(!s_||"ArrayBuffer"!==r_(t))&&(!a_||a_(t))}:a_,l_=!g((function(){return Object.isExtensible(Object.preventExtensions({}))})),h_=Si,c_=v,u_=cn,d_=ot,A_=te,I_=Je.f,C_=Yn,p_=Kn,f_=g_,v_=l_,m_=!1,b_=re("meta"),y_=0,__=function(t){I_(t,b_,{value:{objectID:"O"+y_++,weakData:{}}})},T_=e_.exports={enable:function(){T_.enable=function(){},m_=!0;var t=C_.f,e=c_([].splice),i={};i[b_]=1,t(i).length&&(C_.f=function(i){for(var o=t(i),n=0,r=o.length;n<r;n++)if(o[n]===b_){e(o,n,1);break}return o},h_({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:p_.f}))},fastKey:function(t,e){if(!d_(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!A_(t,b_)){if(!f_(t))return"F";if(!e)return"E";__(t)}return t[b_].objectID},getWeakData:function(t,e){if(!A_(t,b_)){if(!f_(t))return!0;if(!e)return!1;__(t)}return t[b_].weakData},onFreeze:function(t){return v_&&m_&&f_(t)&&!A_(t,b_)&&__(t),t}};u_[b_]=!0;var E_=e_.exports,w_=Si,k_=a,O_=E_,S_=g,R_=pi,x_=tv,D_=Rv,M_=R,N_=ot,L_=X,P_=Pr,$_=Je.f,B_=ss.forEach,F_=D,z_=Jr.set,H_=Jr.getterFor,G_=function(t,e,i){var o,n=-1!==t.indexOf("Map"),r=-1!==t.indexOf("Weak"),s=n?"set":"add",a=k_[t],g=a&&a.prototype,l={};if(F_&&M_(a)&&(r||g.forEach&&!S_((function(){(new a).entries().next()})))){var h=(o=e((function(e,i){z_(D_(e,h),{type:t,collection:new a}),L_(i)||x_(i,e[s],{that:e,AS_ENTRIES:n})}))).prototype,c=H_(t);B_(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"===t||"set"===t;!(t in g)||r&&"clear"===t||R_(h,t,(function(i,o){var n=c(this).collection;if(!e&&r&&!N_(i))return"get"===t&&void 0;var s=n[t](0===i?0:i,o);return e?this:s}))})),r||$_(h,"size",{configurable:!0,get:function(){return c(this).collection.size}})}else o=i.getConstructor(e,t,n,s),O_.enable();return P_(o,t,!1,!0),l[t]=o,w_({global:!0,forced:!0},l),r||i.setStrong(o,t,n),o},U_=hr,V_=jn,W_=ur,j_=function(t,e,i){for(var o in e)i&&i.unsafe&&t[o]?t[o]=e[o]:U_(t,o,e[o],i);return t},Y_=Qe,X_=Rv,Z_=X,K_=tv,Q_=pl,J_=fl,q_=kv,tT=D,eT=E_.fastKey,iT=Jr.set,oT=Jr.getterFor,nT={getConstructor:function(t,e,i,o){var n=t((function(t,n){X_(t,r),iT(t,{type:e,index:V_(null),first:void 0,last:void 0,size:0}),tT||(t.size=0),Z_(n)||K_(n,t[o],{that:t,AS_ENTRIES:i})})),r=n.prototype,s=oT(e),a=function(t,e,i){var o,n,r=s(t),a=g(t,e);return a?a.value=i:(r.last=a={index:n=eT(e,!0),key:e,value:i,previous:o=r.last,next:void 0,removed:!1},r.first||(r.first=a),o&&(o.next=a),tT?r.size++:t.size++,"F"!==n&&(r.index[n]=a)),t},g=function(t,e){var i,o=s(t),n=eT(e);if("F"!==n)return o.index[n];for(i=o.first;i;i=i.next)if(i.key===e)return i};return j_(r,{clear:function(){for(var t=s(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,tT?t.size=0:this.size=0},delete:function(t){var e=this,i=s(e),o=g(e,t);if(o){var n=o.next,r=o.previous;delete i.index[o.index],o.removed=!0,r&&(r.next=n),n&&(n.previous=r),i.first===o&&(i.first=n),i.last===o&&(i.last=r),tT?i.size--:e.size--}return!!o},forEach:function(t){for(var e,i=s(this),o=Y_(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:i.first;)for(o(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!g(this,t)}}),j_(r,i?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),tT&&W_(r,"size",{configurable:!0,get:function(){return s(this).size}}),n},setStrong:function(t,e,i){var o=e+" Iterator",n=oT(e),r=oT(o);Q_(t,e,(function(t,e){iT(this,{type:o,target:t,state:n(t),kind:e,last:void 0})}),(function(){for(var t=r(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?J_("keys"===e?i.key:"values"===e?i.value:[i.key,i.value],!1):(t.target=void 0,J_(void 0,!0))}),i?"entries":"values",!i,!0),q_(e)}};G_("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),nT);var rT=n(nt.Map),sT=ss.some;Si({target:"Array",proto:!0,forced:!lc("some")},{some:function(t){return sT(this,t,arguments.length>1?arguments[1]:void 0)}});var aT=Xh("Array","some"),gT=ht,lT=aT,hT=Array.prototype,cT=n((function(t){var e=t.some;return t===hT||gT(hT,t)&&e===hT.some?lT:e})),uT=Xh("Array","keys"),dT=ao,AT=te,IT=ht,CT=uT,pT=Array.prototype,fT={DOMTokenList:!0,NodeList:!0},vT=n((function(t){var e=t.keys;return t===pT||IT(pT,t)&&e===pT.keys||AT(fT,dT(t))?CT:e})),mT=ir,bT=Math.floor,yT=function(t,e){var i=t.length,o=bT(i/2);return i<8?_T(t,e):TT(t,yT(mT(t,0,o),e),yT(mT(t,o),e),e)},_T=function(t,e){for(var i,o,n=t.length,r=1;r<n;){for(o=r,i=t[r];o&&e(t[o-1],i)>0;)t[o]=t[--o];o!==r++&&(t[o]=i)}return t},TT=function(t,e,i,o){for(var n=e.length,r=i.length,s=0,a=0;s<n||a<r;)t[s+a]=s<n&&a<r?o(e[s],i[a])<=0?e[s++]:i[a++]:s<n?e[s++]:i[a++];return t},ET=yT,wT=ct.match(/firefox\/(\d+)/i),kT=!!wT&&+wT[1],OT=/MSIE|Trident/.test(ct),ST=ct.match(/AppleWebKit\/(\d+)\./),RT=!!ST&&+ST[1],xT=Si,DT=v,MT=Nt,NT=Qt,LT=ji,PT=dA,$T=qo,BT=g,FT=ET,zT=lc,HT=kT,GT=OT,UT=ft,VT=RT,WT=[],jT=DT(WT.sort),YT=DT(WT.push),XT=BT((function(){WT.sort(void 0)})),ZT=BT((function(){WT.sort(null)})),KT=zT("sort"),QT=!BT((function(){if(UT)return UT<70;if(!(HT&&HT>3)){if(GT)return!0;if(VT)return VT<603;var t,e,i,o,n="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(o=0;o<47;o++)WT.push({k:e+o,v:i})}for(WT.sort((function(t,e){return e.v-t.v})),o=0;o<WT.length;o++)e=WT[o].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}}));xT({target:"Array",proto:!0,forced:XT||!ZT||!KT||!QT},{sort:function(t){void 0!==t&&MT(t);var e=NT(this);if(QT)return void 0===t?jT(e):jT(e,t);var i,o,n=[],r=LT(e);for(o=0;o<r;o++)o in e&&YT(n,e[o]);for(FT(n,function(t){return function(e,i){return void 0===i?-1:void 0===e?1:void 0!==t?+t(e,i)||0:$T(e)>$T(i)?1:-1}}(t)),i=LT(n),o=0;o<i;)e[o]=n[o++];for(;o<r;)PT(e,o++);return e}});var JT=Xh("Array","sort"),qT=ht,tE=JT,eE=Array.prototype,iE=n((function(t){var e=t.sort;return t===eE||qT(eE,t)&&e===eE.sort?tE:e})),oE=Xh("Array","values"),nE=ao,rE=te,sE=ht,aE=oE,gE=Array.prototype,lE={DOMTokenList:!0,NodeList:!0},hE=n((function(t){var e=t.values;return t===gE||sE(gE,t)&&e===gE.values||rE(lE,nE(t))?aE:e})),cE=n(Eh),uE=Xh("Array","entries"),dE=ao,AE=te,IE=ht,CE=uE,pE=Array.prototype,fE={DOMTokenList:!0,NodeList:!0},vE=n((function(t){var e=t.entries;return t===pE||IE(pE,t)&&e===pE.entries||AE(fE,dE(t))?CE:e}));let mE;const bE=new Uint8Array(16);function yE(){if(!mE&&(mE="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!mE))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return mE(bE)}const _E=[];for(let t=0;t<256;++t)_E.push((t+256).toString(16).slice(1));var TE={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function EE(t,e,i){if(TE.randomUUID&&!e&&!t)return TE.randomUUID();const o=(t=t||{}).random||(t.rng||yE)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){i=i||0;for(let t=0;t<16;++t)e[i+t]=o[t];return e}return function(t,e=0){return _E[t[e+0]]+_E[t[e+1]]+_E[t[e+2]]+_E[t[e+3]]+"-"+_E[t[e+4]]+_E[t[e+5]]+"-"+_E[t[e+6]]+_E[t[e+7]]+"-"+_E[t[e+8]]+_E[t[e+9]]+"-"+_E[t[e+10]]+_E[t[e+11]]+_E[t[e+12]]+_E[t[e+13]]+_E[t[e+14]]+_E[t[e+15]]}(o)}function wE(t){return"string"==typeof t||"number"==typeof t}var kE=function(){function t(i){e(this,t),Mh(this,"_queue",[]),Mh(this,"_timeout",null),Mh(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(i)}return Dh(t,[{key:"setOptions",value:function(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,i=0;i<e.length;i++){var o=e[i];o.original?t[o.name]=o.original:delete t[o.name]}this._extended=null}}},{key:"replace",value:function(t,e){var i=this,o=t[e];if(!o)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.queue({args:e,fn:o,context:this})}}},{key:"queue",value:function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"==typeof this.delay&&(this._timeout=_I((function(){t.flush()}),this.delay))}},{key:"flush",value:function(){var t,e;tA(t=xA(e=this._queue).call(e,0)).call(t,(function(t){t.fn.apply(t.context||t.fn,t.args||[])}))}}],[{key:"extend",value:function(e,i){var o=new t(i);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){o.flush()};var n=[{name:"flush",original:void 0}];if(i&&i.replace)for(var r=0;r<i.replace.length;r++){var s=i.replace[r];n.push({name:s,original:e[s]}),o.replace(e,s)}return o._extended={object:e,methods:n},o}}]),t}(),OE=function(){function t(){e(this,t),Mh(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),Mh(this,"subscribe",t.prototype.on),Mh(this,"unsubscribe",t.prototype.off)}return Dh(t,[{key:"_trigger",value:function(t,e,i){var o,n;if("*"===t)throw new Error("Cannot trigger event *");tA(o=xd(n=[]).call(n,Ed(this._subscribers[t]),Ed(this._subscribers["*"]))).call(o,(function(o){o(t,e,null!=i?i:null)}))}},{key:"on",value:function(t,e){"function"==typeof e&&this._subscribers[t].push(e)}},{key:"off",value:function(t,e){var i;this._subscribers[t]=yc(i=this._subscribers[t]).call(i,(function(t){return t!==e}))}}]),t}();G_("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),nT);var SE=n(nt.Set),RE=n(Au);function xE(t,e){var i=void 0!==wd&&Pu(t)||t["@@iterator"];if(!i){if(zd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return DE(t,e);var o=Dd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Mu(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?DE(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function DE(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var ME=function(t){function i(t){e(this,i),this._pairs=t}return Dh(i,[{key:t,value:t_.mark((function t(){var e,i,o,n,r;return t_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=xE(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return o=Td(i.value,2),n=o[0],r=o[1],t.next=7,[n,r];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"entries",value:t_.mark((function t(){var e,i,o,n,r;return t_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=xE(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return o=Td(i.value,2),n=o[0],r=o[1],t.next=7,[n,r];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"keys",value:t_.mark((function t(){var e,i,o,n;return t_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=xE(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return o=Td(i.value,1),n=o[0],t.next=7,n;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"values",value:t_.mark((function t(){var e,i,o,n;return t_.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=xE(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return o=Td(i.value,2),n=o[1],t.next=7,n;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"toIdArray",value:function(){var t;return Oc(t=Ed(this._pairs)).call(t,(function(t){return t[0]}))}},{key:"toItemArray",value:function(){var t;return Oc(t=Ed(this._pairs)).call(t,(function(t){return t[1]}))}},{key:"toEntryArray",value:function(){return Ed(this._pairs)}},{key:"toObjectMap",value:function(){var t,e=qA(null),i=xE(this._pairs);try{for(i.s();!(t=i.n()).done;){var o=Td(t.value,2),n=o[0],r=o[1];e[n]=r}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"toMap",value:function(){return new rT(this._pairs)}},{key:"toIdSet",value:function(){return new SE(this.toIdArray())}},{key:"toItemSet",value:function(){return new SE(this.toItemArray())}},{key:"cache",value:function(){return new i(Ed(this._pairs))}},{key:"distinct",value:function(t){var e,i=new SE,o=xE(this._pairs);try{for(o.s();!(e=o.n()).done;){var n=Td(e.value,2),r=n[0],s=n[1];i.add(t(s,r))}}catch(t){o.e(t)}finally{o.f()}return i}},{key:"filter",value:function(t){var e=this._pairs;return new i({[cE]:()=>t_.mark((function i(){var o,n,r,s,a;return t_.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o=xE(e),i.prev=1,o.s();case 3:if((n=o.n()).done){i.next=10;break}if(r=Td(n.value,2),s=r[0],a=r[1],!t(a,s)){i.next=8;break}return i.next=8,[s,a];case 8:i.next=3;break;case 10:i.next=15;break;case 12:i.prev=12,i.t0=i.catch(1),o.e(i.t0);case 15:return i.prev=15,o.f(),i.finish(15);case 18:case"end":return i.stop()}}),i,null,[[1,12,15,18]])}))()})}},{key:"forEach",value:function(t){var e,i=xE(this._pairs);try{for(i.s();!(e=i.n()).done;){var o=Td(e.value,2),n=o[0];t(o[1],n)}}catch(t){i.e(t)}finally{i.f()}}},{key:"map",value:function(t){var e=this._pairs;return new i({[cE]:()=>t_.mark((function i(){var o,n,r,s,a;return t_.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o=xE(e),i.prev=1,o.s();case 3:if((n=o.n()).done){i.next=9;break}return r=Td(n.value,2),s=r[0],a=r[1],i.next=7,[s,t(a,s)];case 7:i.next=3;break;case 9:i.next=14;break;case 11:i.prev=11,i.t0=i.catch(1),o.e(i.t0);case 14:return i.prev=14,o.f(),i.finish(14);case 17:case"end":return i.stop()}}),i,null,[[1,11,14,17]])}))()})}},{key:"max",value:function(t){var e=RE(this._pairs),i=e.next();if(i.done)return null;for(var o=i.value[1],n=t(i.value[1],i.value[0]);!(i=e.next()).done;){var r=Td(i.value,2),s=r[0],a=r[1],g=t(a,s);g>n&&(n=g,o=a)}return o}},{key:"min",value:function(t){var e=RE(this._pairs),i=e.next();if(i.done)return null;for(var o=i.value[1],n=t(i.value[1],i.value[0]);!(i=e.next()).done;){var r=Td(i.value,2),s=r[0],a=r[1],g=t(a,s);g<n&&(n=g,o=a)}return o}},{key:"reduce",value:function(t,e){var i,o=xE(this._pairs);try{for(o.s();!(i=o.n()).done;){var n=Td(i.value,2),r=n[0];e=t(e,n[1],r)}}catch(t){o.e(t)}finally{o.f()}return e}},{key:"sort",value:function(t){var e=this;return new i({[cE]:function(){var i;return RE(iE(i=Ed(e._pairs)).call(i,(function(e,i){var o=Td(e,2),n=o[0],r=o[1],s=Td(i,2),a=s[0],g=s[1];return t(r,g,n,a)})))}})}}]),i}(cE);function NE(t,e){var i=Ud(t);if(Bp){var o=Bp(t);e&&(o=yc(o).call(o,(function(e){return Yp(t,e).enumerable}))),i.push.apply(i,o)}return i}function LE(t){for(var e=1;e<arguments.length;e++){var i,o,n=null!=arguments[e]?arguments[e]:{};e%2?tA(i=NE(Object(n),!0)).call(i,(function(e){Mh(t,e,n[e])})):Jp?sf(t,Jp(n)):tA(o=NE(Object(n))).call(o,(function(e){af(t,e,Yp(n,e))}))}return t}function PE(t,e){var i=void 0!==wd&&Pu(t)||t["@@iterator"];if(!i){if(zd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return $E(t,e);var o=Dd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Mu(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?$E(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function $E(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function BE(t){var e=function(){if("undefined"==typeof Reflect||!$p)return!1;if($p.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($p(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=vf(t);if(e){var n=vf(this).constructor;i=$p(o,arguments,n)}else i=o.apply(this,arguments);return Cf(this,i)}}var FE=function(t){If(o,t);var i=BE(o);function o(t,n){var r;return e(this,o),Mh(gf(r=i.call(this)),"_queue",null),t&&!zd(t)&&(n=t,t=[]),r._options=n||{},r._data=new rT,r.length=0,r._idProp=r._options.fieldId||"id",t&&t.length&&r.add(t),r.setOptions(n),r}return Dh(o,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=kE.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"==typeof t.queue&&this._queue.setOptions(t.queue)))}},{key:"add",value:function(t,e){var i,o=this,n=[];if(zd(t)){var r=Oc(t).call(t,(function(t){return t[o._idProp]}));if(cT(r).call(r,(function(t){return o._data.has(t)})))throw new Error("A duplicate id was found in the parameter array.");for(var s=0,a=t.length;s<a;s++)i=this._addItem(t[s]),n.push(i)}else{if(!t||"object"!=typeof t)throw new Error("Unknown dataType");i=this._addItem(t),n.push(i)}return n.length&&this._trigger("add",{items:n},e),n}},{key:"update",value:function(t,e){var i=this,o=[],n=[],r=[],s=[],a=this._idProp,g=function(t){var e=t[a];if(null!=e&&i._data.has(e)){var g=t,l=jA({},i._data.get(e)),h=i._updateItem(g);n.push(h),s.push(g),r.push(l)}else{var c=i._addItem(t);o.push(c)}};if(zd(t))for(var l=0,h=t.length;l<h;l++)t[l]&&"object"==typeof t[l]?g(t[l]):console.warn("Ignoring input item, which is not an object at index "+l);else{if(!t||"object"!=typeof t)throw new Error("Unknown dataType");g(t)}if(o.length&&this._trigger("add",{items:o},e),n.length){var c={items:n,oldData:r,data:s};this._trigger("update",c,e)}return xd(o).call(o,n)}},{key:"updateOnly",value:function(t,e){var i,o=this;zd(t)||(t=[t]);var n=Oc(i=Oc(t).call(t,(function(t){var e=o._data.get(t[o._idProp]);if(null==e)throw new Error("Updating non-existent items is not allowed.");return{oldData:e,update:t}}))).call(i,(function(t){var e=t.oldData,i=t.update,n=e[o._idProp],r=function(t){for(var e,i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];return dp.apply(void 0,xd(e=[{},t]).call(e,o))}(e,i);return o._data.set(n,r),{id:n,oldData:e,updatedData:r}}));if(n.length){var r={items:Oc(n).call(n,(function(t){return t.id})),oldData:Oc(n).call(n,(function(t){return t.oldData})),data:Oc(n).call(n,(function(t){return t.updatedData}))};return this._trigger("update",r,e),r.items}return[]}},{key:"get",value:function(t,e){var i=void 0,o=void 0,n=void 0;wE(t)?(i=t,n=e):zd(t)?(o=t,n=e):n=t;var r,s=n&&"Object"===n.returnType?"Object":"Array",a=n&&yc(n),g=[],l=void 0,h=void 0,c=void 0;if(null!=i)(l=this._data.get(i))&&a&&!a(l)&&(l=void 0);else if(null!=o)for(var u=0,d=o.length;u<d;u++)null==(l=this._data.get(o[u]))||a&&!a(l)||g.push(l);else for(var A,I=0,C=(h=Ed(vT(A=this._data).call(A))).length;I<C;I++)c=h[I],null==(l=this._data.get(c))||a&&!a(l)||g.push(l);if(n&&n.order&&null==i&&this._sort(g,n.order),n&&n.fields){var p=n.fields;if(null!=i&&null!=l)l=this._filterFields(l,p);else for(var f=0,v=g.length;f<v;f++)g[f]=this._filterFields(g[f],p)}if("Object"==s){for(var m={},b=0,y=g.length;b<y;b++){var _=g[b];m[_[this._idProp]]=_}return m}return null!=i?null!==(r=l)&&void 0!==r?r:null:g}},{key:"getIds",value:function(t){var e=this._data,i=t&&yc(t),o=t&&t.order,n=Ed(vT(e).call(e)),r=[];if(i)if(o){for(var s=[],a=0,g=n.length;a<g;a++){var l=n[a],h=this._data.get(l);null!=h&&i(h)&&s.push(h)}this._sort(s,o);for(var c=0,u=s.length;c<u;c++)r.push(s[c][this._idProp])}else for(var d=0,A=n.length;d<A;d++){var I=n[d],C=this._data.get(I);null!=C&&i(C)&&r.push(C[this._idProp])}else if(o){for(var p=[],f=0,v=n.length;f<v;f++){var m=n[f];p.push(e.get(m))}this._sort(p,o);for(var b=0,y=p.length;b<y;b++)r.push(p[b][this._idProp])}else for(var _=0,T=n.length;_<T;_++){var E=n[_],w=e.get(E);null!=w&&r.push(w[this._idProp])}return r}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(t,e){var i=e&&yc(e),o=this._data,n=Ed(vT(o).call(o));if(e&&e.order)for(var r=this.get(e),s=0,a=r.length;s<a;s++){var g=r[s];t(g,g[this._idProp])}else for(var l=0,h=n.length;l<h;l++){var c=n[l],u=this._data.get(c);null==u||i&&!i(u)||t(u,c)}}},{key:"map",value:function(t,e){for(var i=e&&yc(e),o=[],n=this._data,r=Ed(vT(n).call(n)),s=0,a=r.length;s<a;s++){var g=r[s],l=this._data.get(g);null==l||i&&!i(l)||o.push(t(l,g))}return e&&e.order&&this._sort(o,e.order),o}},{key:"_filterFields",value:function(t,e){var i;return t?Cc(i=zd(e)?e:Ud(e)).call(i,(function(e,i){return e[i]=t[i],e}),{}):t}},{key:"_sort",value:function(t,e){if("string"==typeof e){var i=e;iE(t).call(t,(function(t,e){var o=t[i],n=e[i];return o>n?1:o<n?-1:0}))}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");iE(t).call(t,e)}}},{key:"remove",value:function(t,e){for(var i=[],o=[],n=zd(t)?t:[t],r=0,s=n.length;r<s;r++){var a=this._remove(n[r]);if(a){var g=a[this._idProp];null!=g&&(i.push(g),o.push(a))}}return i.length&&this._trigger("remove",{items:i,oldData:o},e),i}},{key:"_remove",value:function(t){var e;if(wE(t)?e=t:t&&"object"==typeof t&&(e=t[this._idProp]),null!=e&&this._data.has(e)){var i=this._data.get(e)||null;return this._data.delete(e),--this.length,i}return null}},{key:"clear",value:function(t){for(var e,i=Ed(vT(e=this._data).call(e)),o=[],n=0,r=i.length;n<r;n++)o.push(this._data.get(i[n]));return this._data.clear(),this.length=0,this._trigger("remove",{items:i,oldData:o},t),i}},{key:"max",value:function(t){var e,i,o=null,n=null,r=PE(hE(e=this._data).call(e));try{for(r.s();!(i=r.n()).done;){var s=i.value,a=s[t];"number"==typeof a&&(null==n||a>n)&&(o=s,n=a)}}catch(t){r.e(t)}finally{r.f()}return o||null}},{key:"min",value:function(t){var e,i,o=null,n=null,r=PE(hE(e=this._data).call(e));try{for(r.s();!(i=r.n()).done;){var s=i.value,a=s[t];"number"==typeof a&&(null==n||a<n)&&(o=s,n=a)}}catch(t){r.e(t)}finally{r.f()}return o||null}},{key:"distinct",value:function(t){for(var e=this._data,i=Ed(vT(e).call(e)),o=[],n=0,r=0,s=i.length;r<s;r++){for(var a=i[r],g=e.get(a)[t],l=!1,h=0;h<n;h++)if(o[h]==g){l=!0;break}l||void 0===g||(o[n]=g,n++)}return o}},{key:"_addItem",value:function(t){var e=function(t,e){return null==t[e]&&(t[e]=EE()),t}(t,this._idProp),i=e[this._idProp];if(this._data.has(i))throw new Error("Cannot add item: item with id "+i+" already exists");return this._data.set(i,e),++this.length,i}},{key:"_updateItem",value:function(t){var e=t[this._idProp];if(null==e)throw new Error("Cannot update item: item has no id (item: "+oI(t)+")");var i=this._data.get(e);if(!i)throw new Error("Cannot update item: no item with id "+e+" found");return this._data.set(e,LE(LE({},i),t)),e}},{key:"stream",value:function(t){if(t){var e=this._data;return new ME({[cE]:()=>t_.mark((function i(){var o,n,r,s;return t_.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o=PE(t),i.prev=1,o.s();case 3:if((n=o.n()).done){i.next=11;break}if(r=n.value,null==(s=e.get(r))){i.next=9;break}return i.next=9,[r,s];case 9:i.next=3;break;case 11:i.next=16;break;case 13:i.prev=13,i.t0=i.catch(1),o.e(i.t0);case 16:return i.prev=16,o.f(),i.finish(16);case 19:case"end":return i.stop()}}),i,null,[[1,13,16,19]])}))()})}var i;return new ME({[cE]:tc(i=vE(this._data)).call(i,this._data)})}}]),o}(OE);function zE(t,e){var i=void 0!==wd&&Pu(t)||t["@@iterator"];if(!i){if(zd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return HE(t,e);var o=Dd(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Mu(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?HE(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function HE(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function GE(t){var e=function(){if("undefined"==typeof Reflect||!$p)return!1;if($p.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($p(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=vf(t);if(e){var n=vf(this).constructor;i=$p(o,arguments,n)}else i=o.apply(this,arguments);return Cf(this,i)}}var UE=function(t){If(o,t);var i=GE(o);function o(t,n){var r,s;return e(this,o),Mh(gf(s=i.call(this)),"length",0),Mh(gf(s),"_ids",new SE),s._options=n||{},s._listener=tc(r=s._onEvent).call(r,gf(s)),s.setData(t),s}return Dh(o,[{key:"idProp",get:function(){return this.getDataSet().idProp}},{key:"setData",value:function(t){if(this._data){this._data.off&&this._data.off("*",this._listener);var e=this._data.getIds({filter:yc(this._options)}),i=this._data.get(e);this._ids.clear(),this.length=0,this._trigger("remove",{items:e,oldData:i})}if(null!=t){this._data=t;for(var o=this._data.getIds({filter:yc(this._options)}),n=0,r=o.length;n<r;n++){var s=o[n];this._ids.add(s)}this.length=o.length,this._trigger("add",{items:o})}else this._data=new FE;this._data.on&&this._data.on("*",this._listener)}},{key:"refresh",value:function(){for(var t=this._data.getIds({filter:yc(this._options)}),e=Ed(this._ids),i={},o=[],n=[],r=[],s=0,a=t.length;s<a;s++){var g=t[s];i[g]=!0,this._ids.has(g)||(o.push(g),this._ids.add(g))}for(var l=0,h=e.length;l<h;l++){var c=e[l],u=this._data.get(c);null==u?console.error("If you see this, report it please."):i[c]||(n.push(c),r.push(u),this._ids.delete(c))}this.length+=o.length-n.length,o.length&&this._trigger("add",{items:o}),n.length&&this._trigger("remove",{items:n,oldData:r})}},{key:"get",value:function(t,e){if(null==this._data)return null;var i,o=null;wE(t)||zd(t)?(o=t,i=e):i=t;var n=jA({},this._options,i),r=yc(this._options),s=i&&yc(i);return r&&s&&(n.filter=function(t){return r(t)&&s(t)}),null==o?this._data.get(n):this._data.get(o,n)}},{key:"getIds",value:function(t){if(this._data.length){var e,i=yc(this._options),o=null!=t?yc(t):null;return e=o?i?function(t){return i(t)&&o(t)}:o:i,this._data.getIds({filter:e,order:t&&t.order})}return[]}},{key:"forEach",value:function(t,e){if(this._data){var i,o,n=yc(this._options),r=e&&yc(e);o=r?n?function(t){return n(t)&&r(t)}:r:n,tA(i=this._data).call(i,t,{filter:o,order:e&&e.order})}}},{key:"map",value:function(t,e){if(this._data){var i,o,n=yc(this._options),r=e&&yc(e);return o=r?n?function(t){return n(t)&&r(t)}:r:n,Oc(i=this._data).call(i,t,{filter:o,order:e&&e.order})}return[]}},{key:"getDataSet",value:function(){return this._data.getDataSet()}},{key:"stream",value:function(t){var e;return this._data.stream(t||{[cE]:tc(e=vT(this._ids)).call(e,this._ids)})}},{key:"dispose",value:function(){var t;null!==(t=this._data)&&void 0!==t&&t.off&&this._data.off("*",this._listener);var e,i="This data view has already been disposed of.",n={get:function(){throw new Error(i)},set:function(){throw new Error(i)},configurable:!1},r=zE(Fd(o.prototype));try{for(r.s();!(e=r.n()).done;){var s=e.value;af(this,s,n)}}catch(t){r.e(t)}finally{r.f()}}},{key:"_onEvent",value:function(t,e,i){if(e&&e.items&&this._data){var o=e.items,n=[],r=[],s=[],a=[],g=[],l=[];switch(t){case"add":for(var h=0,c=o.length;h<c;h++){var u=o[h];this.get(u)&&(this._ids.add(u),n.push(u))}break;case"update":for(var d=0,A=o.length;d<A;d++){var I=o[d];this.get(I)?this._ids.has(I)?(r.push(I),g.push(e.data[d]),a.push(e.oldData[d])):(this._ids.add(I),n.push(I)):this._ids.has(I)&&(this._ids.delete(I),s.push(I),l.push(e.oldData[d]))}break;case"remove":for(var C=0,p=o.length;C<p;C++){var f=o[C];this._ids.has(f)&&(this._ids.delete(f),s.push(f),l.push(e.oldData[C]))}}this.length+=n.length-s.length,n.length&&this._trigger("add",{items:n},i),r.length&&this._trigger("update",{items:r,oldData:a,data:g},i),s.length&&this._trigger("remove",{items:s,oldData:l},i)}}}]),o}(OE);function VE(t,e){return"object"==typeof e&&null!==e&&t===e.idProp&&"function"==typeof e.add&&"function"==typeof e.clear&&"function"==typeof e.distinct&&"function"==typeof tA(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof Oc(e)&&"function"==typeof e.max&&"function"==typeof e.min&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.remove&&"function"==typeof e.setOptions&&"function"==typeof e.stream&&"function"==typeof e.update&&"function"==typeof e.updateOnly}t.DELETE=up,t.DataSet=FE,t.DataStream=ME,t.DataView=UE,t.Queue=kE,t.createNewDataPipeFrom=function(t){return new Wc(t)},t.isDataSetLike=VE,t.isDataViewLike=function(t,e){return"object"==typeof e&&null!==e&&t===e.idProp&&"function"==typeof tA(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof Oc(e)&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.stream&&VE(t,e.getDataSet())}}(e)},993:function(t,e,i){!function(t,e){var o="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{};function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var r=function(t){return t&&t.Math===Math&&t},s=r("object"==typeof globalThis&&globalThis)||r("object"==typeof window&&window)||r("object"==typeof self&&self)||r("object"==typeof o&&o)||function(){return this}()||o||Function("return this")(),a=function(t){try{return!!t()}catch(t){return!0}},g=!a((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),l=g,h=Function.prototype,c=h.apply,u=h.call,d="object"==typeof Reflect&&Reflect.apply||(l?u.bind(c):function(){return u.apply(c,arguments)}),A=g,I=Function.prototype,C=I.call,p=A&&I.bind.bind(C,C),f=A?p:function(t){return function(){return C.apply(t,arguments)}},v=f,m=v({}.toString),b=v("".slice),y=function(t){return b(m(t),8,-1)},_=y,T=f,E=function(t){if("Function"===_(t))return T(t)},w="object"==typeof document&&document.all,k={all:w,IS_HTMLDDA:void 0===w&&void 0!==w},O=k.all,S=k.IS_HTMLDDA?function(t){return"function"==typeof t||t===O}:function(t){return"function"==typeof t},R={},x=!a((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),D=g,M=Function.prototype.call,N=D?M.bind(M):function(){return M.apply(M,arguments)},L={},P={}.propertyIsEnumerable,$=Object.getOwnPropertyDescriptor,B=$&&!P.call({1:2},1);L.f=B?function(t){var e=$(this,t);return!!e&&e.enumerable}:P;var F,z,H=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},G=a,U=y,V=Object,W=f("".split),j=G((function(){return!V("z").propertyIsEnumerable(0)}))?function(t){return"String"===U(t)?W(t,""):V(t)}:V,Y=function(t){return null==t},X=Y,Z=TypeError,K=function(t){if(X(t))throw new Z("Can't call method on "+t);return t},Q=j,J=K,q=function(t){return Q(J(t))},tt=S,et=k.all,it=k.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:tt(t)||t===et}:function(t){return"object"==typeof t?null!==t:tt(t)},ot={},nt=ot,rt=s,st=S,at=function(t){return st(t)?t:void 0},gt=function(t,e){return arguments.length<2?at(nt[t])||at(rt[t]):nt[t]&&nt[t][e]||rt[t]&&rt[t][e]},lt=f({}.isPrototypeOf),ht="undefined"!=typeof navigator&&String(navigator.userAgent)||"",ct=s,ut=ht,dt=ct.process,At=ct.Deno,It=dt&&dt.versions||At&&At.version,Ct=It&&It.v8;Ct&&(z=(F=Ct.split("."))[0]>0&&F[0]<4?1:+(F[0]+F[1])),!z&&ut&&(!(F=ut.match(/Edge\/(\d+)/))||F[1]>=74)&&(F=ut.match(/Chrome\/(\d+)/))&&(z=+F[1]);var pt=z,ft=pt,vt=a,mt=s.String,bt=!!Object.getOwnPropertySymbols&&!vt((function(){var t=Symbol("symbol detection");return!mt(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&ft&&ft<41})),yt=bt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,_t=gt,Tt=S,Et=lt,wt=Object,kt=yt?function(t){return"symbol"==typeof t}:function(t){var e=_t("Symbol");return Tt(e)&&Et(e.prototype,wt(t))},Ot=String,St=function(t){try{return Ot(t)}catch(t){return"Object"}},Rt=S,xt=St,Dt=TypeError,Mt=function(t){if(Rt(t))return t;throw new Dt(xt(t)+" is not a function")},Nt=Mt,Lt=Y,Pt=function(t,e){var i=t[e];return Lt(i)?void 0:Nt(i)},$t=N,Bt=S,Ft=it,zt=TypeError,Ht={exports:{}},Gt=s,Ut=Object.defineProperty,Vt="__core-js_shared__",Wt=s[Vt]||function(t,e){try{Ut(Gt,t,{value:e,configurable:!0,writable:!0})}catch(i){Gt[t]=e}return e}(Vt,{}),jt=Wt;(Ht.exports=function(t,e){return jt[t]||(jt[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.0",mode:"pure",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"});var Yt=Ht.exports,Xt=K,Zt=Object,Kt=function(t){return Zt(Xt(t))},Qt=Kt,Jt=f({}.hasOwnProperty),qt=Object.hasOwn||function(t,e){return Jt(Qt(t),e)},te=f,ee=0,ie=Math.random(),oe=te(1..toString),ne=function(t){return"Symbol("+(void 0===t?"":t)+")_"+oe(++ee+ie,36)},re=Yt,se=qt,ae=ne,ge=bt,le=yt,he=s.Symbol,ce=re("wks"),ue=le?he.for||he:he&&he.withoutSetter||ae,de=function(t){return se(ce,t)||(ce[t]=ge&&se(he,t)?he[t]:ue("Symbol."+t)),ce[t]},Ae=N,Ie=it,Ce=kt,pe=Pt,fe=TypeError,ve=de("toPrimitive"),me=function(t,e){if(!Ie(t)||Ce(t))return t;var i,o=pe(t,ve);if(o){if(void 0===e&&(e="default"),i=Ae(o,t,e),!Ie(i)||Ce(i))return i;throw new fe("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var i,o;if("string"===e&&Bt(i=t.toString)&&!Ft(o=$t(i,t)))return o;if(Bt(i=t.valueOf)&&!Ft(o=$t(i,t)))return o;if("string"!==e&&Bt(i=t.toString)&&!Ft(o=$t(i,t)))return o;throw new zt("Can't convert object to primitive value")}(t,e)},be=kt,ye=function(t){var e=me(t,"string");return be(e)?e:e+""},_e=it,Te=s.document,Ee=_e(Te)&&_e(Te.createElement),we=function(t){return Ee?Te.createElement(t):{}},ke=we,Oe=!x&&!a((function(){return 7!==Object.defineProperty(ke("div"),"a",{get:function(){return 7}}).a})),Se=x,Re=N,xe=L,De=H,Me=q,Ne=ye,Le=qt,Pe=Oe,$e=Object.getOwnPropertyDescriptor;R.f=Se?$e:function(t,e){if(t=Me(t),e=Ne(e),Pe)try{return $e(t,e)}catch(t){}if(Le(t,e))return De(!Re(xe.f,t,e),t[e])};var Be=a,Fe=S,ze=/#|\.prototype\./,He=function(t,e){var i=Ue[Ge(t)];return i===We||i!==Ve&&(Fe(e)?Be(e):!!e)},Ge=He.normalize=function(t){return String(t).replace(ze,".").toLowerCase()},Ue=He.data={},Ve=He.NATIVE="N",We=He.POLYFILL="P",je=He,Ye=Mt,Xe=g,Ze=E(E.bind),Ke=function(t,e){return Ye(t),void 0===e?t:Xe?Ze(t,e):function(){return t.apply(e,arguments)}},Qe={},Je=x&&a((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),qe=it,ti=String,ei=TypeError,ii=function(t){if(qe(t))return t;throw new ei(ti(t)+" is not an object")},oi=x,ni=Oe,ri=Je,si=ii,ai=ye,gi=TypeError,li=Object.defineProperty,hi=Object.getOwnPropertyDescriptor,ci="enumerable",ui="configurable",di="writable";Qe.f=oi?ri?function(t,e,i){if(si(t),e=ai(e),si(i),"function"==typeof t&&"prototype"===e&&"value"in i&&di in i&&!i[di]){var o=hi(t,e);o&&o[di]&&(t[e]=i.value,i={configurable:ui in i?i[ui]:o[ui],enumerable:ci in i?i[ci]:o[ci],writable:!1})}return li(t,e,i)}:li:function(t,e,i){if(si(t),e=ai(e),si(i),ni)try{return li(t,e,i)}catch(t){}if("get"in i||"set"in i)throw new gi("Accessors not supported");return"value"in i&&(t[e]=i.value),t};var Ai=Qe,Ii=H,Ci=x?function(t,e,i){return Ai.f(t,e,Ii(1,i))}:function(t,e,i){return t[e]=i,t},pi=s,fi=d,vi=E,mi=S,bi=R.f,yi=je,_i=ot,Ti=Ke,Ei=Ci,wi=qt,ki=function(t){var e=function(i,o,n){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(i);case 2:return new t(i,o)}return new t(i,o,n)}return fi(t,this,arguments)};return e.prototype=t.prototype,e},Oi=function(t,e){var i,o,n,r,s,a,g,l,h,c=t.target,u=t.global,d=t.stat,A=t.proto,I=u?pi:d?pi[c]:(pi[c]||{}).prototype,C=u?_i:_i[c]||Ei(_i,c,{})[c],p=C.prototype;for(r in e)o=!(i=yi(u?r:c+(d?".":"#")+r,t.forced))&&I&&wi(I,r),a=C[r],o&&(g=t.dontCallGetSet?(h=bi(I,r))&&h.value:I[r]),s=o&&g?g:e[r],o&&typeof a==typeof s||(l=t.bind&&o?Ti(s,pi):t.wrap&&o?ki(s):A&&mi(s)?vi(s):s,(t.sham||s&&s.sham||a&&a.sham)&&Ei(l,"sham",!0),Ei(C,r,l),A&&(wi(_i,n=c+"Prototype")||Ei(_i,n,{}),Ei(_i[n],r,s),t.real&&p&&(i||!p[r])&&Ei(p,r,s)))},Si=Math.ceil,Ri=Math.floor,xi=Math.trunc||function(t){var e=+t;return(e>0?Ri:Si)(e)},Di=function(t){var e=+t;return e!=e||0===e?0:xi(e)},Mi=Di,Ni=Math.max,Li=Math.min,Pi=function(t,e){var i=Mi(t);return i<0?Ni(i+e,0):Li(i,e)},$i=Di,Bi=Math.min,Fi=function(t){return function(t){return t>0?Bi($i(t),9007199254740991):0}(t.length)},zi=q,Hi=Pi,Gi=Fi,Ui=function(t){return function(e,i,o){var n,r=zi(e),s=Gi(r),a=Hi(o,s);if(t&&i!=i){for(;s>a;)if((n=r[a++])!=n)return!0}else for(;s>a;a++)if((t||a in r)&&r[a]===i)return t||a||0;return!t&&-1}},Vi={includes:Ui(!0),indexOf:Ui(!1)},Wi={},ji=qt,Yi=q,Xi=Vi.indexOf,Zi=Wi,Ki=f([].push),Qi=function(t,e){var i,o=Yi(t),n=0,r=[];for(i in o)!ji(Zi,i)&&ji(o,i)&&Ki(r,i);for(;e.length>n;)ji(o,i=e[n++])&&(~Xi(r,i)||Ki(r,i));return r},Ji=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],qi=Qi,to=Ji,eo=Object.keys||function(t){return qi(t,to)},io={};io.f=Object.getOwnPropertySymbols;var oo=x,no=f,ro=N,so=a,ao=eo,go=io,lo=L,ho=Kt,co=j,uo=Object.assign,Ao=Object.defineProperty,Io=no([].concat),Co=!uo||so((function(){if(oo&&1!==uo({b:1},uo(Ao({},"a",{enumerable:!0,get:function(){Ao(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol("assign detection"),o="abcdefghijklmnopqrst";return t[i]=7,o.split("").forEach((function(t){e[t]=t})),7!==uo({},t)[i]||ao(uo({},e)).join("")!==o}))?function(t,e){for(var i=ho(t),o=arguments.length,n=1,r=go.f,s=lo.f;o>n;)for(var a,g=co(arguments[n++]),l=r?Io(ao(g),r(g)):ao(g),h=l.length,c=0;h>c;)a=l[c++],oo&&!ro(s,g,a)||(i[a]=g[a]);return i}:uo,po=Co;Oi({target:"Object",stat:!0,arity:2,forced:Object.assign!==po},{assign:po});var fo=n(ot.Object.assign),vo=f([].slice),mo=f,bo=Mt,yo=it,_o=qt,To=vo,Eo=g,wo=Function,ko=mo([].concat),Oo=mo([].join),So={},Ro=Eo?wo.bind:function(t){var e=bo(this),i=e.prototype,o=To(arguments,1),n=function(){var i=ko(o,To(arguments));return this instanceof n?function(t,e,i){if(!_o(So,e)){for(var o=[],n=0;n<e;n++)o[n]="a["+n+"]";So[e]=wo("C,a","return new C("+Oo(o,",")+")")}return So[e](t,i)}(e,i.length,i):e.apply(t,i)};return yo(i)&&(n.prototype=i),n},xo=Ro;Oi({target:"Function",proto:!0,forced:Function.bind!==xo},{bind:xo});var Do=ot,Mo=function(t){return Do[t+"Prototype"]},No=Mo("Function").bind,Lo=lt,Po=No,$o=Function.prototype,Bo=function(t){var e=t.bind;return t===$o||Lo($o,t)&&e===$o.bind?Po:e},Fo=n(Bo);function zo(t,e,i,o){t.beginPath(),t.arc(e,i,o,0,2*Math.PI,!1),t.closePath()}function Ho(t,e,i,o,n,r){var s=Math.PI/180;o-2*r<0&&(r=o/2),n-2*r<0&&(r=n/2),t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+o-r,i),t.arc(e+o-r,i+r,r,270*s,360*s,!1),t.lineTo(e+o,i+n-r),t.arc(e+o-r,i+n-r,r,0,90*s,!1),t.lineTo(e+r,i+n),t.arc(e+r,i+n-r,r,90*s,180*s,!1),t.lineTo(e,i+r),t.arc(e+r,i+r,r,180*s,270*s,!1),t.closePath()}function Go(t,e,i,o,n){var r=.5522848,s=o/2*r,a=n/2*r,g=e+o,l=i+n,h=e+o/2,c=i+n/2;t.beginPath(),t.moveTo(e,c),t.bezierCurveTo(e,c-a,h-s,i,h,i),t.bezierCurveTo(h+s,i,g,c-a,g,c),t.bezierCurveTo(g,c+a,h+s,l,h,l),t.bezierCurveTo(h-s,l,e,c+a,e,c),t.closePath()}function Uo(t,e,i,o,n){var r=n*(1/3),s=.5522848,a=o/2*s,g=r/2*s,l=e+o,h=i+r,c=e+o/2,u=i+r/2,d=i+(n-r/2),A=i+n;t.beginPath(),t.moveTo(l,u),t.bezierCurveTo(l,u+g,c+a,h,c,h),t.bezierCurveTo(c-a,h,e,u+g,e,u),t.bezierCurveTo(e,u-g,c-a,i,c,i),t.bezierCurveTo(c+a,i,l,u-g,l,u),t.lineTo(l,d),t.bezierCurveTo(l,d+g,c+a,A,c,A),t.bezierCurveTo(c-a,A,e,d+g,e,d),t.lineTo(e,u)}function Vo(t,e,i,o,n,r){t.beginPath(),t.moveTo(e,i);for(var s=r.length,a=o-e,g=n-i,l=g/a,h=Math.sqrt(a*a+g*g),c=0,u=!0,d=0,A=+r[0];h>=.1;)(A=+r[c++%s])>h&&(A=h),d=Math.sqrt(A*A/(1+l*l)),e+=d=a<0?-d:d,i+=l*d,!0===u?t.lineTo(e,i):t.moveTo(e,i),h-=A,u=!u}var Wo={circle:zo,dashedLine:Vo,database:Uo,diamond:function(t,e,i,o){t.beginPath(),t.lineTo(e,i+o),t.lineTo(e+o,i),t.lineTo(e,i-o),t.lineTo(e-o,i),t.closePath()},ellipse:Go,ellipse_vis:Go,hexagon:function(t,e,i,o){t.beginPath();var n=2*Math.PI/6;t.moveTo(e+o,i);for(var r=1;r<6;r++)t.lineTo(e+o*Math.cos(n*r),i+o*Math.sin(n*r));t.closePath()},roundRect:Ho,square:function(t,e,i,o){t.beginPath(),t.rect(e-o,i-o,2*o,2*o),t.closePath()},star:function(t,e,i,o){t.beginPath(),i+=.1*(o*=.82);for(var n=0;n<10;n++){var r=n%2==0?1.3*o:.5*o;t.lineTo(e+r*Math.sin(2*n*Math.PI/10),i-r*Math.cos(2*n*Math.PI/10))}t.closePath()},triangle:function(t,e,i,o){t.beginPath(),i+=.275*(o*=1.15);var n=2*o,r=n/2,s=Math.sqrt(3)/6*n,a=Math.sqrt(n*n-r*r);t.moveTo(e,i-(a-s)),t.lineTo(e+r,i+s),t.lineTo(e-r,i+s),t.lineTo(e,i-(a-s)),t.closePath()},triangleDown:function(t,e,i,o){t.beginPath(),i-=.275*(o*=1.15);var n=2*o,r=n/2,s=Math.sqrt(3)/6*n,a=Math.sqrt(n*n-r*r);t.moveTo(e,i+(a-s)),t.lineTo(e+r,i-s),t.lineTo(e-r,i-s),t.lineTo(e,i+(a-s)),t.closePath()}},jo={exports:{}};!function(t){function e(t){if(t)return function(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,o=this._callbacks["$"+t];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<o.length;n++)if((i=o[n])===e||i.fn===e){o.splice(n,1);break}return 0===o.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if(i){o=0;for(var n=(i=i.slice(0)).length;o<n;++o)i[o].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}(jo);var Yo=n(jo.exports),Xo={};Xo[de("toStringTag")]="z";var Zo,Ko,Qo,Jo="[object z]"===String(Xo),qo=Jo,tn=S,en=y,on=de("toStringTag"),nn=Object,rn="Arguments"===en(function(){return arguments}()),sn=qo?en:function(t){var e,i,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=nn(t),on))?i:rn?en(e):"Object"===(o=en(e))&&tn(e.callee)?"Arguments":o},an=sn,gn=String,ln=function(t){if("Symbol"===an(t))throw new TypeError("Cannot convert a Symbol value to a string");return gn(t)},hn=f,cn=Di,un=ln,dn=K,An=hn("".charAt),In=hn("".charCodeAt),Cn=hn("".slice),pn=function(t){return function(e,i){var o,n,r=un(dn(e)),s=cn(i),a=r.length;return s<0||s>=a?t?"":void 0:(o=In(r,s))<55296||o>56319||s+1===a||(n=In(r,s+1))<56320||n>57343?t?An(r,s):o:t?Cn(r,s,s+2):n-56320+(o-55296<<10)+65536}},fn={codeAt:pn(!1),charAt:pn(!0)},vn=S,mn=s.WeakMap,bn=vn(mn)&&/native code/.test(String(mn)),yn=ne,_n=Yt("keys"),Tn=function(t){return _n[t]||(_n[t]=yn(t))},En=bn,wn=s,kn=it,On=Ci,Sn=qt,Rn=Wt,xn=Tn,Dn=Wi,Mn="Object already initialized",Nn=wn.TypeError,Ln=wn.WeakMap;if(En||Rn.state){var Pn=Rn.state||(Rn.state=new Ln);Pn.get=Pn.get,Pn.has=Pn.has,Pn.set=Pn.set,Zo=function(t,e){if(Pn.has(t))throw new Nn(Mn);return e.facade=t,Pn.set(t,e),e},Ko=function(t){return Pn.get(t)||{}},Qo=function(t){return Pn.has(t)}}else{var $n=xn("state");Dn[$n]=!0,Zo=function(t,e){if(Sn(t,$n))throw new Nn(Mn);return e.facade=t,On(t,$n,e),e},Ko=function(t){return Sn(t,$n)?t[$n]:{}},Qo=function(t){return Sn(t,$n)}}var Bn={set:Zo,get:Ko,has:Qo,enforce:function(t){return Qo(t)?Ko(t):Zo(t,{})},getterFor:function(t){return function(e){var i;if(!kn(e)||(i=Ko(e)).type!==t)throw new Nn("Incompatible receiver, "+t+" required");return i}}},Fn=x,zn=qt,Hn=Function.prototype,Gn=Fn&&Object.getOwnPropertyDescriptor,Un=zn(Hn,"name"),Vn={EXISTS:Un,PROPER:Un&&"something"===function(){}.name,CONFIGURABLE:Un&&(!Fn||Fn&&Gn(Hn,"name").configurable)},Wn={},jn=x,Yn=Je,Xn=Qe,Zn=ii,Kn=q,Qn=eo;Wn.f=jn&&!Yn?Object.defineProperties:function(t,e){Zn(t);for(var i,o=Kn(e),n=Qn(e),r=n.length,s=0;r>s;)Xn.f(t,i=n[s++],o[i]);return t};var Jn,qn=gt("document","documentElement"),tr=ii,er=Wn,ir=Ji,or=Wi,nr=qn,rr=we,sr="prototype",ar="script",gr=Tn("IE_PROTO"),lr=function(){},hr=function(t){return"<"+ar+">"+t+"</"+ar+">"},cr=function(t){t.write(hr("")),t.close();var e=t.parentWindow.Object;return t=null,e},ur=function(){try{Jn=new ActiveXObject("htmlfile")}catch(t){}var t,e,i;ur="undefined"!=typeof document?document.domain&&Jn?cr(Jn):(e=rr("iframe"),i="java"+ar+":",e.style.display="none",nr.appendChild(e),e.src=String(i),(t=e.contentWindow.document).open(),t.write(hr("document.F=Object")),t.close(),t.F):cr(Jn);for(var o=ir.length;o--;)delete ur[sr][ir[o]];return ur()};or[gr]=!0;var dr,Ar,Ir,Cr=Object.create||function(t,e){var i;return null!==t?(lr[sr]=tr(t),i=new lr,lr[sr]=null,i[gr]=t):i=ur(),void 0===e?i:er.f(i,e)},pr=!a((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),fr=qt,vr=S,mr=Kt,br=pr,yr=Tn("IE_PROTO"),_r=Object,Tr=_r.prototype,Er=br?_r.getPrototypeOf:function(t){var e=mr(t);if(fr(e,yr))return e[yr];var i=e.constructor;return vr(i)&&e instanceof i?i.prototype:e instanceof _r?Tr:null},wr=Ci,kr=function(t,e,i,o){return o&&o.enumerable?t[e]=i:wr(t,e,i),t},Or=a,Sr=S,Rr=it,xr=Cr,Dr=Er,Mr=kr,Nr=de("iterator"),Lr=!1;[].keys&&("next"in(Ir=[].keys())?(Ar=Dr(Dr(Ir)))!==Object.prototype&&(dr=Ar):Lr=!0);var Pr=!Rr(dr)||Or((function(){var t={};return dr[Nr].call(t)!==t}));Sr((dr=Pr?{}:xr(dr))[Nr])||Mr(dr,Nr,(function(){return this}));var $r={IteratorPrototype:dr,BUGGY_SAFARI_ITERATORS:Lr},Br=sn,Fr=Jo?{}.toString:function(){return"[object "+Br(this)+"]"},zr=Jo,Hr=Qe.f,Gr=Ci,Ur=qt,Vr=Fr,Wr=de("toStringTag"),jr=function(t,e,i,o){if(t){var n=i?t:t.prototype;Ur(n,Wr)||Hr(n,Wr,{configurable:!0,value:e}),o&&!zr&&Gr(n,"toString",Vr)}},Yr={},Xr=$r.IteratorPrototype,Zr=Cr,Kr=H,Qr=jr,Jr=Yr,qr=function(){return this},ts=f,es=Mt,is=S,os=String,ns=TypeError,rs=ii,ss=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=function(t,e,i){try{return ts(es(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(t){}}(Object.prototype,"__proto__","set"))(i,[]),e=i instanceof Array}catch(t){}return function(i,o){return rs(i),function(t){if("object"==typeof t||is(t))return t;throw new ns("Can't set "+os(t)+" as a prototype")}(o),e?t(i,o):i.__proto__=o,i}}():void 0),as=Oi,gs=N,ls=Er,hs=jr,cs=kr,us=Yr,ds=Vn.PROPER,As=$r.BUGGY_SAFARI_ITERATORS,Is=de("iterator"),Cs="keys",ps="values",fs="entries",vs=function(){return this},ms=function(t,e,i,o,n,r,s){!function(t,e,i,o){var n=e+" Iterator";t.prototype=Zr(Xr,{next:Kr(+!o,i)}),Qr(t,n,!1,!0),Jr[n]=qr}(i,e,o);var a,g,l,h=function(t){if(t===n&&I)return I;if(!As&&t&&t in d)return d[t];switch(t){case Cs:case ps:case fs:return function(){return new i(this,t)}}return function(){return new i(this)}},c=e+" Iterator",u=!1,d=t.prototype,A=d[Is]||d["@@iterator"]||n&&d[n],I=!As&&A||h(n),C="Array"===e&&d.entries||A;if(C&&(a=ls(C.call(new t)))!==Object.prototype&&a.next&&(hs(a,c,!0,!0),us[c]=vs),ds&&n===ps&&A&&A.name!==ps&&(u=!0,I=function(){return gs(A,this)}),n)if(g={values:h(ps),keys:r?I:h(Cs),entries:h(fs)},s)for(l in g)(As||u||!(l in d))&&cs(d,l,g[l]);else as({target:e,proto:!0,forced:As||u},g);return s&&d[Is]!==I&&cs(d,Is,I,{name:n}),us[e]=I,g},bs=function(t,e){return{value:t,done:e}},ys=fn.charAt,_s=ln,Ts=Bn,Es=ms,ws=bs,ks="String Iterator",Os=Ts.set,Ss=Ts.getterFor(ks);Es(String,"String",(function(t){Os(this,{type:ks,string:_s(t),index:0})}),(function(){var t,e=Ss(this),i=e.string,o=e.index;return o>=i.length?ws(void 0,!0):(t=ys(i,o),e.index+=t.length,ws(t,!1))}));var Rs=N,xs=ii,Ds=Pt,Ms=function(t,e,i){var o,n;xs(t);try{if(!(o=Ds(t,"return"))){if("throw"===e)throw i;return i}o=Rs(o,t)}catch(t){n=!0,o=t}if("throw"===e)throw i;if(n)throw o;return xs(o),i},Ns=ii,Ls=Ms,Ps=Yr,$s=de("iterator"),Bs=Array.prototype,Fs=function(t){return void 0!==t&&(Ps.Array===t||Bs[$s]===t)},zs=S,Hs=Wt,Gs=f(Function.toString);zs(Hs.inspectSource)||(Hs.inspectSource=function(t){return Gs(t)});var Us=Hs.inspectSource,Vs=f,Ws=a,js=S,Ys=sn,Xs=Us,Zs=function(){},Ks=[],Qs=gt("Reflect","construct"),Js=/^\s*(?:class|function)\b/,qs=Vs(Js.exec),ta=!Js.test(Zs),ea=function(t){if(!js(t))return!1;try{return Qs(Zs,Ks,t),!0}catch(t){return!1}},ia=function(t){if(!js(t))return!1;switch(Ys(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return ta||!!qs(Js,Xs(t))}catch(t){return!0}};ia.sham=!0;var oa=!Qs||Ws((function(){var t;return ea(ea.call)||!ea(Object)||!ea((function(){t=!0}))||t}))?ia:ea,na=ye,ra=Qe,sa=H,aa=function(t,e,i){var o=na(e);o in t?ra.f(t,o,sa(0,i)):t[o]=i},ga=sn,la=Pt,ha=Y,ca=Yr,ua=de("iterator"),da=function(t){if(!ha(t))return la(t,ua)||la(t,"@@iterator")||ca[ga(t)]},Aa=N,Ia=Mt,Ca=ii,pa=St,fa=da,va=TypeError,ma=function(t,e){var i=arguments.length<2?fa(t):e;if(Ia(i))return Ca(Aa(i,t));throw new va(pa(t)+" is not iterable")},ba=Ke,ya=N,_a=Kt,Ta=function(t,e,i,o){try{return o?e(Ns(i)[0],i[1]):e(i)}catch(e){Ls(t,"throw",e)}},Ea=Fs,wa=oa,ka=Fi,Oa=aa,Sa=ma,Ra=da,xa=Array,Da=de("iterator"),Ma=!1;try{var Na=0,La={next:function(){return{done:!!Na++}},return:function(){Ma=!0}};La[Da]=function(){return this},Array.from(La,(function(){throw 2}))}catch(t){}Oi({target:"Array",stat:!0,forced:!function(t,e){try{if(!e&&!Ma)return!1}catch(t){return!1}var i=!1;try{var o={};o[Da]=function(){return{next:function(){return{done:i=!0}}}},t(o)}catch(t){}return i}((function(t){Array.from(t)}))},{from:function(t){var e=_a(t),i=wa(this),o=arguments.length,n=o>1?arguments[1]:void 0,r=void 0!==n;r&&(n=ba(n,o>2?arguments[2]:void 0));var s,a,g,l,h,c,u=Ra(e),d=0;if(!u||this===xa&&Ea(u))for(s=ka(e),a=i?new this(s):xa(s);s>d;d++)c=r?n(e[d],d):e[d],Oa(a,d,c);else for(h=(l=Sa(e,u)).next,a=i?new this:[];!(g=ya(h,l)).done;d++)c=r?Ta(l,n,[g.value,d],!0):g.value,Oa(a,d,c);return a.length=d,a}});var Pa=ot.Array.from,$a=n(Pa),Ba=q,Fa=Yr,za=Bn;Qe.f;var Ha=ms,Ga=bs,Ua="Array Iterator",Va=za.set,Wa=za.getterFor(Ua);Ha(Array,"Array",(function(t,e){Va(this,{type:Ua,target:Ba(t),index:0,kind:e})}),(function(){var t=Wa(this),e=t.target,i=t.kind,o=t.index++;if(!e||o>=e.length)return t.target=void 0,Ga(void 0,!0);switch(i){case"keys":return Ga(o,!1);case"values":return Ga(e[o],!1)}return Ga([o,e[o]],!1)}),"values"),Fa.Arguments=Fa.Array;var ja=da,Ya=s,Xa=sn,Za=Ci,Ka=Yr,Qa=de("toStringTag");for(var Ja in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var qa=Ya[Ja],tg=qa&&qa.prototype;tg&&Xa(tg)!==Qa&&Za(tg,Qa,Ja),Ka[Ja]=Ka.Array}var eg=ja,ig=n(eg),og=n(eg);function ng(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var rg={exports:{}},sg=Oi,ag=x,gg=Qe.f;sg({target:"Object",stat:!0,forced:Object.defineProperty!==gg,sham:!ag},{defineProperty:gg});var lg=ot.Object,hg=rg.exports=function(t,e,i){return lg.defineProperty(t,e,i)};lg.defineProperty.sham&&(hg.sham=!0);var cg=rg.exports,ug=n(cg),dg=y,Ag=Array.isArray||function(t){return"Array"===dg(t)},Ig=TypeError,Cg=function(t){if(t>9007199254740991)throw Ig("Maximum allowed index exceeded");return t},pg=Ag,fg=oa,vg=it,mg=de("species"),bg=Array,yg=function(t,e){return new(function(t){var e;return pg(t)&&(e=t.constructor,(fg(e)&&(e===bg||pg(e.prototype))||vg(e)&&null===(e=e[mg]))&&(e=void 0)),void 0===e?bg:e}(t))(0===e?0:e)},_g=a,Tg=pt,Eg=de("species"),wg=function(t){return Tg>=51||!_g((function(){var e=[];return(e.constructor={})[Eg]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},kg=Oi,Og=a,Sg=Ag,Rg=it,xg=Kt,Dg=Fi,Mg=Cg,Ng=aa,Lg=yg,Pg=wg,$g=pt,Bg=de("isConcatSpreadable"),Fg=$g>=51||!Og((function(){var t=[];return t[Bg]=!1,t.concat()[0]!==t})),zg=function(t){if(!Rg(t))return!1;var e=t[Bg];return void 0!==e?!!e:Sg(t)};kg({target:"Array",proto:!0,arity:1,forced:!Fg||!Pg("concat")},{concat:function(t){var e,i,o,n,r,s=xg(this),a=Lg(s,0),g=0;for(e=-1,o=arguments.length;e<o;e++)if(zg(r=-1===e?s:arguments[e]))for(n=Dg(r),Mg(g+n),i=0;i<n;i++,g++)i in r&&Ng(a,g,r[i]);else Mg(g+1),Ng(a,g++,r);return a.length=g,a}});var Hg={},Gg=Qi,Ug=Ji.concat("length","prototype");Hg.f=Object.getOwnPropertyNames||function(t){return Gg(t,Ug)};var Vg={},Wg=Pi,jg=Fi,Yg=aa,Xg=Array,Zg=Math.max,Kg=function(t,e,i){for(var o=jg(t),n=Wg(e,o),r=Wg(void 0===i?o:i,o),s=Xg(Zg(r-n,0)),a=0;n<r;n++,a++)Yg(s,a,t[n]);return s.length=a,s},Qg=y,Jg=q,qg=Hg.f,tl=Kg,el="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];Vg.f=function(t){return el&&"Window"===Qg(t)?function(t){try{return qg(t)}catch(t){return tl(el)}}(t):qg(Jg(t))};var il=Qe,ol=function(t,e,i){return il.f(t,e,i)},nl={},rl=de;nl.f=rl;var sl=ot,al=qt,gl=nl,ll=Qe.f,hl=function(t){var e=sl.Symbol||(sl.Symbol={});al(e,t)||ll(e,t,{value:gl.f(t)})},cl=N,ul=gt,dl=de,Al=kr,Il=function(){var t=ul("Symbol"),e=t&&t.prototype,i=e&&e.valueOf,o=dl("toPrimitive");e&&!e[o]&&Al(e,o,(function(t){return cl(i,this)}),{arity:1})},Cl=Ke,pl=j,fl=Kt,vl=Fi,ml=yg,bl=f([].push),yl=function(t){var e=1===t,i=2===t,o=3===t,n=4===t,r=6===t,s=7===t,a=5===t||r;return function(g,l,h,c){for(var u,d,A=fl(g),I=pl(A),C=Cl(l,h),p=vl(I),f=0,v=c||ml,m=e?v(g,p):i||s?v(g,0):void 0;p>f;f++)if((a||f in I)&&(d=C(u=I[f],f,A),t))if(e)m[f]=d;else if(d)switch(t){case 3:return!0;case 5:return u;case 6:return f;case 2:bl(m,u)}else switch(t){case 4:return!1;case 7:bl(m,u)}return r?-1:o||n?n:m}},_l={forEach:yl(0),map:yl(1),filter:yl(2),some:yl(3),every:yl(4),find:yl(5),findIndex:yl(6),filterReject:yl(7)},Tl=Oi,El=s,wl=N,kl=f,Ol=x,Sl=bt,Rl=a,xl=qt,Dl=lt,Ml=ii,Nl=q,Ll=ye,Pl=ln,$l=H,Bl=Cr,Fl=eo,zl=Hg,Hl=Vg,Gl=io,Ul=R,Vl=Qe,Wl=Wn,jl=L,Yl=kr,Xl=ol,Zl=Yt,Kl=Wi,Ql=ne,Jl=de,ql=nl,th=hl,eh=Il,ih=jr,oh=Bn,nh=_l.forEach,rh=Tn("hidden"),sh="Symbol",ah="prototype",gh=oh.set,lh=oh.getterFor(sh),hh=Object[ah],ch=El.Symbol,uh=ch&&ch[ah],dh=El.RangeError,Ah=El.TypeError,Ih=El.QObject,Ch=Ul.f,ph=Vl.f,fh=Hl.f,vh=jl.f,mh=kl([].push),bh=Zl("symbols"),yh=Zl("op-symbols"),_h=Zl("wks"),Th=!Ih||!Ih[ah]||!Ih[ah].findChild,Eh=function(t,e,i){var o=Ch(hh,e);o&&delete hh[e],ph(t,e,i),o&&t!==hh&&ph(hh,e,o)},wh=Ol&&Rl((function(){return 7!==Bl(ph({},"a",{get:function(){return ph(this,"a",{value:7}).a}})).a}))?Eh:ph,kh=function(t,e){var i=bh[t]=Bl(uh);return gh(i,{type:sh,tag:t,description:e}),Ol||(i.description=e),i},Oh=function(t,e,i){t===hh&&Oh(yh,e,i),Ml(t);var o=Ll(e);return Ml(i),xl(bh,o)?(i.enumerable?(xl(t,rh)&&t[rh][o]&&(t[rh][o]=!1),i=Bl(i,{enumerable:$l(0,!1)})):(xl(t,rh)||ph(t,rh,$l(1,{})),t[rh][o]=!0),wh(t,o,i)):ph(t,o,i)},Sh=function(t,e){Ml(t);var i=Nl(e),o=Fl(i).concat(Mh(i));return nh(o,(function(e){Ol&&!wl(Rh,i,e)||Oh(t,e,i[e])})),t},Rh=function(t){var e=Ll(t),i=wl(vh,this,e);return!(this===hh&&xl(bh,e)&&!xl(yh,e))&&(!(i||!xl(this,e)||!xl(bh,e)||xl(this,rh)&&this[rh][e])||i)},xh=function(t,e){var i=Nl(t),o=Ll(e);if(i!==hh||!xl(bh,o)||xl(yh,o)){var n=Ch(i,o);return!n||!xl(bh,o)||xl(i,rh)&&i[rh][o]||(n.enumerable=!0),n}},Dh=function(t){var e=fh(Nl(t)),i=[];return nh(e,(function(t){xl(bh,t)||xl(Kl,t)||mh(i,t)})),i},Mh=function(t){var e=t===hh,i=fh(e?yh:Nl(t)),o=[];return nh(i,(function(t){!xl(bh,t)||e&&!xl(hh,t)||mh(o,bh[t])})),o};Sl||(ch=function(){if(Dl(uh,this))throw new Ah("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?Pl(arguments[0]):void 0,e=Ql(t),i=function(t){this===hh&&wl(i,yh,t),xl(this,rh)&&xl(this[rh],e)&&(this[rh][e]=!1);var o=$l(1,t);try{wh(this,e,o)}catch(t){if(!(t instanceof dh))throw t;Eh(this,e,o)}};return Ol&&Th&&wh(hh,e,{configurable:!0,set:i}),kh(e,t)},Yl(uh=ch[ah],"toString",(function(){return lh(this).tag})),Yl(ch,"withoutSetter",(function(t){return kh(Ql(t),t)})),jl.f=Rh,Vl.f=Oh,Wl.f=Sh,Ul.f=xh,zl.f=Hl.f=Dh,Gl.f=Mh,ql.f=function(t){return kh(Jl(t),t)},Ol&&Xl(uh,"description",{configurable:!0,get:function(){return lh(this).description}})),Tl({global:!0,constructor:!0,wrap:!0,forced:!Sl,sham:!Sl},{Symbol:ch}),nh(Fl(_h),(function(t){th(t)})),Tl({target:sh,stat:!0,forced:!Sl},{useSetter:function(){Th=!0},useSimple:function(){Th=!1}}),Tl({target:"Object",stat:!0,forced:!Sl,sham:!Ol},{create:function(t,e){return void 0===e?Bl(t):Sh(Bl(t),e)},defineProperty:Oh,defineProperties:Sh,getOwnPropertyDescriptor:xh}),Tl({target:"Object",stat:!0,forced:!Sl},{getOwnPropertyNames:Dh}),eh(),ih(ch,sh),Kl[rh]=!0;var Nh=bt&&!!Symbol.for&&!!Symbol.keyFor,Lh=Oi,Ph=gt,$h=qt,Bh=ln,Fh=Yt,zh=Nh,Hh=Fh("string-to-symbol-registry"),Gh=Fh("symbol-to-string-registry");Lh({target:"Symbol",stat:!0,forced:!zh},{for:function(t){var e=Bh(t);if($h(Hh,e))return Hh[e];var i=Ph("Symbol")(e);return Hh[e]=i,Gh[i]=e,i}});var Uh=Oi,Vh=qt,Wh=kt,jh=St,Yh=Nh,Xh=Yt("symbol-to-string-registry");Uh({target:"Symbol",stat:!0,forced:!Yh},{keyFor:function(t){if(!Wh(t))throw new TypeError(jh(t)+" is not a symbol");if(Vh(Xh,t))return Xh[t]}});var Zh=Ag,Kh=S,Qh=y,Jh=ln,qh=f([].push),tc=Oi,ec=gt,ic=d,oc=N,nc=f,rc=a,sc=S,ac=kt,gc=vo,lc=bt,hc=String,cc=ec("JSON","stringify"),uc=nc(/./.exec),dc=nc("".charAt),Ac=nc("".charCodeAt),Ic=nc("".replace),Cc=nc(1..toString),pc=/[\uD800-\uDFFF]/g,fc=/^[\uD800-\uDBFF]$/,vc=/^[\uDC00-\uDFFF]$/,mc=!lc||rc((function(){var t=ec("Symbol")("stringify detection");return"[null]"!==cc([t])||"{}"!==cc({a:t})||"{}"!==cc(Object(t))})),bc=rc((function(){return'"\\udf06\\ud834"'!==cc("\udf06\ud834")||'"\\udead"'!==cc("\udead")})),yc=function(t,e){var i=gc(arguments),o=function(t){if(Kh(t))return t;if(Zh(t)){for(var e=t.length,i=[],o=0;o<e;o++){var n=t[o];"string"==typeof n?qh(i,n):"number"!=typeof n&&"Number"!==Qh(n)&&"String"!==Qh(n)||qh(i,Jh(n))}var r=i.length,s=!0;return function(t,e){if(s)return s=!1,e;if(Zh(this))return e;for(var o=0;o<r;o++)if(i[o]===t)return e}}}(e);if(sc(o)||void 0!==t&&!ac(t))return i[1]=function(t,e){if(sc(o)&&(e=oc(o,this,hc(t),e)),!ac(e))return e},ic(cc,null,i)},_c=function(t,e,i){var o=dc(i,e-1),n=dc(i,e+1);return uc(fc,t)&&!uc(vc,n)||uc(vc,t)&&!uc(fc,o)?"\\u"+Cc(Ac(t,0),16):t};cc&&tc({target:"JSON",stat:!0,arity:3,forced:mc||bc},{stringify:function(t,e,i){var o=gc(arguments),n=ic(mc?yc:cc,null,o);return bc&&"string"==typeof n?Ic(n,pc,_c):n}});var Tc=io,Ec=Kt;Oi({target:"Object",stat:!0,forced:!bt||a((function(){Tc.f(1)}))},{getOwnPropertySymbols:function(t){var e=Tc.f;return e?e(Ec(t)):[]}}),hl("asyncIterator"),hl("hasInstance"),hl("isConcatSpreadable"),hl("iterator"),hl("match"),hl("matchAll"),hl("replace"),hl("search"),hl("species"),hl("split");var wc=Il;hl("toPrimitive"),wc();var kc=gt,Oc=jr;hl("toStringTag"),Oc(kc("Symbol"),"Symbol"),hl("unscopables"),jr(s.JSON,"JSON",!0);var Sc=ot.Symbol,Rc=de,xc=Qe.f,Dc=Rc("metadata"),Mc=Function.prototype;void 0===Mc[Dc]&&xc(Mc,Dc,{value:null}),hl("asyncDispose"),hl("dispose"),hl("metadata");var Nc=Sc,Lc=f,Pc=gt("Symbol"),$c=Pc.keyFor,Bc=Lc(Pc.prototype.valueOf),Fc=Pc.isRegisteredSymbol||function(t){try{return void 0!==$c(Bc(t))}catch(t){return!1}};Oi({target:"Symbol",stat:!0},{isRegisteredSymbol:Fc});for(var zc=Yt,Hc=gt,Gc=f,Uc=kt,Vc=de,Wc=Hc("Symbol"),jc=Wc.isWellKnownSymbol,Yc=Hc("Object","getOwnPropertyNames"),Xc=Gc(Wc.prototype.valueOf),Zc=zc("wks"),Kc=0,Qc=Yc(Wc),Jc=Qc.length;Kc<Jc;Kc++)try{var qc=Qc[Kc];Uc(Wc[qc])&&Vc(qc)}catch(t){}var tu=function(t){if(jc&&jc(t))return!0;try{for(var e=Xc(t),i=0,o=Yc(Zc),n=o.length;i<n;i++)if(Zc[o[i]]==e)return!0}catch(t){}return!1};Oi({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:tu}),hl("matcher"),hl("observable"),Oi({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:Fc}),Oi({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:tu}),hl("metadataKey"),hl("patternMatch"),hl("replaceAll");var eu=n(Nc),iu=n(nl.f("iterator"));function ou(t){return ou="function"==typeof eu&&"symbol"==typeof iu?function(t){return typeof t}:function(t){return t&&"function"==typeof eu&&t.constructor===eu&&t!==eu.prototype?"symbol":typeof t},ou(t)}var nu=n(nl.f("toPrimitive"));function ru(t){var e=function(t){if("object"!==ou(t)||null===t)return t;var e=t[nu];if(void 0!==e){var i=e.call(t,"string");if("object"!==ou(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===ou(e)?e:String(e)}function su(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),ug(t,ru(o.key),o)}}function au(t,e,i){return e&&su(t.prototype,e),i&&su(t,i),ug(t,"prototype",{writable:!1}),t}Oi({target:"Array",stat:!0},{isArray:Ag});var gu=ot.Array.isArray,lu=n(gu),hu=x,cu=Ag,uu=TypeError,du=Object.getOwnPropertyDescriptor,Au=hu&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(cu(t)&&!du(t,"length").writable)throw new uu("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},Iu=Kt,Cu=Fi,pu=Au,fu=Cg;Oi({target:"Array",proto:!0,arity:1,forced:a((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=Iu(this),i=Cu(e),o=arguments.length;fu(i+o);for(var n=0;n<o;n++)e[i]=arguments[n],i++;return pu(e,i),i}});var vu=Mo("Array").push,mu=lt,bu=vu,yu=Array.prototype,_u=n((function(t){var e=t.push;return t===yu||mu(yu,t)&&e===yu.push?bu:e})),Tu=Oi,Eu=Ag,wu=oa,ku=it,Ou=Pi,Su=Fi,Ru=q,xu=aa,Du=de,Mu=vo,Nu=wg("slice"),Lu=Du("species"),Pu=Array,$u=Math.max;Tu({target:"Array",proto:!0,forced:!Nu},{slice:function(t,e){var i,o,n,r=Ru(this),s=Su(r),a=Ou(t,s),g=Ou(void 0===e?s:e,s);if(Eu(r)&&(i=r.constructor,(wu(i)&&(i===Pu||Eu(i.prototype))||ku(i)&&null===(i=i[Lu]))&&(i=void 0),i===Pu||void 0===i))return Mu(r,a,g);for(o=new(void 0===i?Pu:i)($u(g-a,0)),n=0;a<g;a++,n++)a in r&&xu(o,n,r[a]);return o.length=n,o}});var Bu=Mo("Array").slice,Fu=lt,zu=Bu,Hu=Array.prototype,Gu=function(t){var e=t.slice;return t===Hu||Fu(Hu,t)&&e===Hu.slice?zu:e},Uu=n(Gu),Vu=n(Pa);function Wu(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function ju(t,e){var i;if(t){if("string"==typeof t)return Wu(t,e);var o=Uu(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Vu(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Wu(t,e):void 0}}function Yu(t,e){return function(t){if(lu(t))return t}(t)||function(t,e){var i=null==t?null:void 0!==eu&&ig(t)||t["@@iterator"];if(null!=i){var o,n,r,s,a=[],g=!0,l=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;g=!1}else for(;!(g=(o=r.call(i)).done)&&(_u(a).call(a,o.value),a.length!==e);g=!0);}catch(t){l=!0,n=t}finally{try{if(!g&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw n}}return a}}(t,e)||ju(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xu(t){return function(t){if(lu(t))return Wu(t)}(t)||function(t){if(void 0!==eu&&null!=ig(t)||null!=t["@@iterator"])return Vu(t)}(t)||ju(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Zu=n(Sc),Ku=Mo("Array").concat,Qu=lt,Ju=Ku,qu=Array.prototype,td=n((function(t){var e=t.concat;return t===qu||Qu(qu,t)&&e===qu.concat?Ju:e})),ed=n(Gu),id=gt,od=Hg,nd=io,rd=ii,sd=f([].concat),ad=id("Reflect","ownKeys")||function(t){var e=od.f(rd(t)),i=nd.f;return i?sd(e,i(t)):e},gd=n(gu),ld=_l.map;Oi({target:"Array",proto:!0,forced:!wg("map")},{map:function(t){return ld(this,t,arguments.length>1?arguments[1]:void 0)}});var hd=Mo("Array").map,cd=lt,ud=hd,dd=Array.prototype,Ad=n((function(t){var e=t.map;return t===dd||cd(dd,t)&&e===dd.map?ud:e})),Id=Kt,Cd=eo;Oi({target:"Object",stat:!0,forced:a((function(){Cd(1)}))},{keys:function(t){return Cd(Id(t))}});var pd=n(ot.Object.keys),fd=Oi,vd=Date,md=f(vd.prototype.getTime);fd({target:"Date",stat:!0},{now:function(){return md(new vd)}});var bd=n(ot.Date.now),yd=a,_d=function(t,e){var i=[][t];return!!i&&yd((function(){i.call(null,e||function(){return 1},1)}))},Td=_l.forEach,Ed=_d("forEach")?[].forEach:function(t){return Td(this,t,arguments.length>1?arguments[1]:void 0)};Oi({target:"Array",proto:!0,forced:[].forEach!==Ed},{forEach:Ed});var wd=Mo("Array").forEach,kd=sn,Od=qt,Sd=lt,Rd=wd,xd=Array.prototype,Dd={DOMTokenList:!0,NodeList:!0},Md=n((function(t){var e=t.forEach;return t===xd||Sd(xd,t)&&e===xd.forEach||Od(Dd,kd(t))?Rd:e})),Nd=Oi,Ld=Ag,Pd=f([].reverse),$d=[1,2];Nd({target:"Array",proto:!0,forced:String($d)===String($d.reverse())},{reverse:function(){return Ld(this)&&(this.length=this.length),Pd(this)}});var Bd=Mo("Array").reverse,Fd=lt,zd=Bd,Hd=Array.prototype,Gd=n((function(t){var e=t.reverse;return t===Hd||Fd(Hd,t)&&e===Hd.reverse?zd:e})),Ud=St,Vd=TypeError,Wd=function(t,e){if(!delete t[e])throw new Vd("Cannot delete property "+Ud(e)+" of "+Ud(t))},jd=Oi,Yd=Kt,Xd=Pi,Zd=Di,Kd=Fi,Qd=Au,Jd=Cg,qd=yg,tA=aa,eA=Wd,iA=wg("splice"),oA=Math.max,nA=Math.min;jd({target:"Array",proto:!0,forced:!iA},{splice:function(t,e){var i,o,n,r,s,a,g=Yd(this),l=Kd(g),h=Xd(t,l),c=arguments.length;for(0===c?i=o=0:1===c?(i=0,o=l-h):(i=c-2,o=nA(oA(Zd(e),0),l-h)),Jd(l+i-o),n=qd(g,o),r=0;r<o;r++)(s=h+r)in g&&tA(n,r,g[s]);if(n.length=o,i<o){for(r=h;r<l-o;r++)a=r+i,(s=r+o)in g?g[a]=g[s]:eA(g,a);for(r=l;r>l-o+i;r--)eA(g,r-1)}else if(i>o)for(r=l-o;r>h;r--)a=r+i-1,(s=r+o-1)in g?g[a]=g[s]:eA(g,a);for(r=0;r<i;r++)g[r+h]=arguments[r+2];return Qd(g,l-o+i),n}});var rA=Mo("Array").splice,sA=lt,aA=rA,gA=Array.prototype,lA=n((function(t){var e=t.splice;return t===gA||sA(gA,t)&&e===gA.splice?aA:e})),hA=Vi.includes;Oi({target:"Array",proto:!0,forced:a((function(){return!Array(1).includes()}))},{includes:function(t){return hA(this,t,arguments.length>1?arguments[1]:void 0)}});var cA=Mo("Array").includes,uA=it,dA=y,AA=de("match"),IA=TypeError,CA=de("match"),pA=Oi,fA=function(t){if(function(t){var e;return uA(t)&&(void 0!==(e=t[AA])?!!e:"RegExp"===dA(t))}(t))throw new IA("The method doesn't accept regular expressions");return t},vA=K,mA=ln,bA=f("".indexOf);pA({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[CA]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~bA(mA(vA(this)),mA(fA(t)),arguments.length>1?arguments[1]:void 0)}});var yA=Mo("String").includes,_A=lt,TA=cA,EA=yA,wA=Array.prototype,kA=String.prototype,OA=n((function(t){var e=t.includes;return t===wA||_A(wA,t)&&e===wA.includes?TA:"string"==typeof t||t===kA||_A(kA,t)&&e===kA.includes?EA:e})),SA=Kt,RA=Er,xA=pr;Oi({target:"Object",stat:!0,forced:a((function(){RA(1)})),sham:!xA},{getPrototypeOf:function(t){return RA(SA(t))}});var DA=ot.Object.getPrototypeOf,MA=n(DA),NA=_l.filter;Oi({target:"Array",proto:!0,forced:!wg("filter")},{filter:function(t){return NA(this,t,arguments.length>1?arguments[1]:void 0)}});var LA=Mo("Array").filter,PA=lt,$A=LA,BA=Array.prototype,FA=n((function(t){var e=t.filter;return t===BA||PA(BA,t)&&e===BA.filter?$A:e})),zA="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",HA=K,GA=ln,UA=zA,VA=f("".replace),WA=RegExp("^["+UA+"]+"),jA=RegExp("(^|[^"+UA+"])["+UA+"]+$"),YA=function(t){return function(e){var i=GA(HA(e));return 1&t&&(i=VA(i,WA,"")),2&t&&(i=VA(i,jA,"$1")),i}},XA={start:YA(1),end:YA(2),trim:YA(3)},ZA=s,KA=a,QA=f,JA=ln,qA=XA.trim,tI=zA,eI=ZA.parseInt,iI=ZA.Symbol,oI=iI&&iI.iterator,nI=/^[+-]?0x/i,rI=QA(nI.exec),sI=8!==eI(tI+"08")||22!==eI(tI+"0x16")||oI&&!KA((function(){eI(Object(oI))}))?function(t,e){var i=qA(JA(t));return eI(i,e>>>0||(rI(nI,i)?16:10))}:eI;Oi({global:!0,forced:parseInt!==sI},{parseInt:sI});var aI=n(ot.parseInt),gI=Oi,lI=Vi.indexOf,hI=_d,cI=E([].indexOf),uI=!!cI&&1/cI([1],1,-0)<0;gI({target:"Array",proto:!0,forced:uI||!hI("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return uI?cI(this,t,e)||0:lI(this,t,e)}});var dI=Mo("Array").indexOf,AI=lt,II=dI,CI=Array.prototype,pI=n((function(t){var e=t.indexOf;return t===CI||AI(CI,t)&&e===CI.indexOf?II:e}));Oi({target:"Object",stat:!0,sham:!x},{create:Cr});var fI=ot.Object,vI=function(t,e){return fI.create(t,e)},mI=n(vI),bI=ot,yI=d;bI.JSON||(bI.JSON={stringify:JSON.stringify});var _I=n((function(t,e,i){return yI(bI.JSON.stringify,null,arguments)})),TI="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,EI=TypeError,wI=s,kI=d,OI=S,SI=TI,RI=ht,xI=vo,DI=wI.Function,MI=/MSIE .\./.test(RI)||SI&&function(){var t=wI.Bun.version.split(".");return t.length<3||"0"===t[0]&&(t[1]<3||"3"===t[1]&&"0"===t[2])}(),NI=function(t,e){var i=e?2:1;return MI?function(o,n){var r=function(t,e){if(t<e)throw new EI("Not enough arguments");return t}(arguments.length,1)>i,s=OI(o)?o:DI(o),a=r?xI(arguments,i):[],g=r?function(){kI(s,this,a)}:s;return e?t(g,n):t(g)}:t},LI=Oi,PI=s,$I=NI(PI.setInterval,!0);LI({global:!0,bind:!0,forced:PI.setInterval!==$I},{setInterval:$I});var BI=Oi,FI=s,zI=NI(FI.setTimeout,!0);BI({global:!0,bind:!0,forced:FI.setTimeout!==zI},{setTimeout:zI});var HI=n(ot.setTimeout),GI=Kt,UI=Pi,VI=Fi;Oi({target:"Array",proto:!0},{fill:function(t){for(var e=GI(this),i=VI(e),o=arguments.length,n=UI(o>1?arguments[1]:void 0,i),r=o>2?arguments[2]:void 0,s=void 0===r?i:UI(r,i);s>n;)e[n++]=t;return e}});var WI,jI=Mo("Array").fill,YI=lt,XI=jI,ZI=Array.prototype,KI=n((function(t){var e=t.fill;return t===ZI||YI(ZI,t)&&e===ZI.fill?XI:e}));function QI(){return QI=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},QI.apply(this,arguments)}function JI(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function qI(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}WI="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}return e}:Object.assign;var tC,eC=WI,iC=["","webkit","Moz","MS","ms","o"],oC="undefined"==typeof document?{style:{}}:document.createElement("div"),nC=Math.round,rC=Math.abs,sC=Date.now;function aC(t,e){for(var i,o,n=e[0].toUpperCase()+e.slice(1),r=0;r<iC.length;){if((o=(i=iC[r])?i+n:e)in t)return o;r++}}tC="undefined"==typeof window?{}:window;var gC=aC(oC.style,"touchAction"),lC=void 0!==gC,hC="compute",cC="auto",uC="manipulation",dC="none",AC="pan-x",IC="pan-y",CC=function(){if(!lC)return!1;var t={},e=tC.CSS&&tC.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){return t[i]=!e||tC.CSS.supports("touch-action",i)})),t}(),pC="ontouchstart"in tC,fC=void 0!==aC(tC,"PointerEvent"),vC=pC&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),mC="touch",bC="mouse",yC=16,_C=24,TC=["x","y"],EC=["clientX","clientY"];function wC(t,e,i){var o;if(t)if(t.forEach)t.forEach(e,i);else if(void 0!==t.length)for(o=0;o<t.length;)e.call(i,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function kC(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function OC(t,e){return t.indexOf(e)>-1}var SC=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===hC&&(t=this.compute()),lC&&this.manager.element.style&&CC[t]&&(this.manager.element.style[gC]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return wC(this.manager.recognizers,(function(e){kC(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(OC(t,dC))return dC;var e=OC(t,AC),i=OC(t,IC);return e&&i?dC:e||i?e?AC:IC:OC(t,uC)?uC:cC}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var o=this.actions,n=OC(o,dC)&&!CC[dC],r=OC(o,IC)&&!CC[IC],s=OC(o,AC)&&!CC[AC];if(n){var a=1===t.pointers.length,g=t.distance<2,l=t.deltaTime<250;if(a&&g&&l)return}if(!s||!r)return n||r&&6&i||s&&i&_C?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function RC(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function xC(t){var e=t.length;if(1===e)return{x:nC(t[0].clientX),y:nC(t[0].clientY)};for(var i=0,o=0,n=0;n<e;)i+=t[n].clientX,o+=t[n].clientY,n++;return{x:nC(i/e),y:nC(o/e)}}function DC(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:nC(t.pointers[i].clientX),clientY:nC(t.pointers[i].clientY)},i++;return{timeStamp:sC(),pointers:e,center:xC(e),deltaX:t.deltaX,deltaY:t.deltaY}}function MC(t,e,i){i||(i=TC);var o=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return Math.sqrt(o*o+n*n)}function NC(t,e,i){i||(i=TC);var o=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return 180*Math.atan2(n,o)/Math.PI}function LC(t,e){return t===e?1:rC(t)>=rC(e)?t<0?2:4:e<0?8:yC}function PC(t,e,i){return{x:e/t||0,y:i/t||0}}function $C(t,e,i){var o=i.pointers.length,n=i.changedPointers.length,r=1&e&&o-n==0,s=12&e&&o-n==0;i.isFirst=!!r,i.isFinal=!!s,r&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,o=e.pointers,n=o.length;i.firstInput||(i.firstInput=DC(e)),n>1&&!i.firstMultiple?i.firstMultiple=DC(e):1===n&&(i.firstMultiple=!1);var r=i.firstInput,s=i.firstMultiple,a=s?s.center:r.center,g=e.center=xC(o);e.timeStamp=sC(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=NC(a,g),e.distance=MC(a,g),function(t,e){var i=e.center,o=t.offsetDelta||{},n=t.prevDelta||{},r=t.prevInput||{};1!==e.eventType&&4!==r.eventType||(n=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},o=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=n.x+(i.x-o.x),e.deltaY=n.y+(i.y-o.y)}(i,e),e.offsetDirection=LC(e.deltaX,e.deltaY);var l,h,c=PC(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=rC(c.x)>rC(c.y)?c.x:c.y,e.scale=s?(l=s.pointers,MC((h=o)[0],h[1],EC)/MC(l[0],l[1],EC)):1,e.rotation=s?function(t,e){return NC(e[1],e[0],EC)+NC(t[1],t[0],EC)}(s.pointers,o):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,o,n,r,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(8!==e.eventType&&(a>25||void 0===s.velocity)){var g=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,h=PC(a,g,l);o=h.x,n=h.y,i=rC(h.x)>rC(h.y)?h.x:h.y,r=LC(g,l),t.lastInterval=e}else i=s.velocity,o=s.velocityX,n=s.velocityY,r=s.direction;e.velocity=i,e.velocityX=o,e.velocityY=n,e.direction=r}(i,e);var u,d=t.element,A=e.srcEvent;RC(u=A.composedPath?A.composedPath()[0]:A.path?A.path[0]:A.target,d)&&(d=u),e.target=d}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function BC(t){return t.trim().split(/\s+/g)}function FC(t,e,i){wC(BC(e),(function(e){t.addEventListener(e,i,!1)}))}function zC(t,e,i){wC(BC(e),(function(e){t.removeEventListener(e,i,!1)}))}function HC(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var GC=function(){function t(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){kC(t.options.enable,[t])&&i.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&FC(this.element,this.evEl,this.domHandler),this.evTarget&&FC(this.target,this.evTarget,this.domHandler),this.evWin&&FC(HC(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&zC(this.element,this.evEl,this.domHandler),this.evTarget&&zC(this.target,this.evTarget,this.domHandler),this.evWin&&zC(HC(this.element),this.evWin,this.domHandler)},t}();function UC(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var o=0;o<t.length;){if(i&&t[o][i]==e||!i&&t[o]===e)return o;o++}return-1}var VC={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},WC={2:mC,3:"pen",4:bC,5:"kinect"},jC="pointerdown",YC="pointermove pointerup pointercancel";tC.MSPointerEvent&&!tC.PointerEvent&&(jC="MSPointerDown",YC="MSPointerMove MSPointerUp MSPointerCancel");var XC=function(t){function e(){var i,o=e.prototype;return o.evEl=jC,o.evWin=YC,(i=t.apply(this,arguments)||this).store=i.manager.session.pointerEvents=[],i}return JI(e,t),e.prototype.handler=function(t){var e=this.store,i=!1,o=t.type.toLowerCase().replace("ms",""),n=VC[o],r=WC[t.pointerType]||t.pointerType,s=r===mC,a=UC(e,t.pointerId,"pointerId");1&n&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&n&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,n,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))},e}(GC);function ZC(t){return Array.prototype.slice.call(t,0)}function KC(t,e,i){for(var o=[],n=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];UC(n,s)<0&&o.push(t[r]),n[r]=s,r++}return i&&(o=e?o.sort((function(t,i){return t[e]>i[e]})):o.sort()),o}var QC={touchstart:1,touchmove:2,touchend:4,touchcancel:8},JC=function(t){function e(){var i;return e.prototype.evTarget="touchstart touchmove touchend touchcancel",(i=t.apply(this,arguments)||this).targetIds={},i}return JI(e,t),e.prototype.handler=function(t){var e=QC[t.type],i=qC.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:mC,srcEvent:t})},e}(GC);function qC(t,e){var i,o,n=ZC(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var s=ZC(t.changedTouches),a=[],g=this.target;if(o=n.filter((function(t){return RC(t.target,g)})),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&e&&delete r[s[i].identifier],i++;return a.length?[KC(o.concat(a),"identifier",!0),a]:void 0}var tp={mousedown:1,mousemove:2,mouseup:4},ep=function(t){function e(){var i,o=e.prototype;return o.evEl="mousedown",o.evWin="mousemove mouseup",(i=t.apply(this,arguments)||this).pressed=!1,i}return JI(e,t),e.prototype.handler=function(t){var e=tp[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:bC,srcEvent:t}))},e}(GC);function ip(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY},o=this.lastTouches;this.lastTouches.push(i),setTimeout((function(){var t=o.indexOf(i);t>-1&&o.splice(t,1)}),2500)}}function op(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,ip.call(this,e)):12&t&&ip.call(this,e)}function np(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,o=0;o<this.lastTouches.length;o++){var n=this.lastTouches[o],r=Math.abs(e-n.x),s=Math.abs(i-n.y);if(r<=25&&s<=25)return!0}return!1}var rp=function(t){function e(e,i){var o;return(o=t.call(this,e,i)||this).handler=function(t,e,i){var n=i.pointerType===mC,r=i.pointerType===bC;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)op.call(qI(qI(o)),e,i);else if(r&&np.call(qI(qI(o)),i))return;o.callback(t,e,i)}},o.touch=new JC(o.manager,o.handler),o.mouse=new ep(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}return JI(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(GC);function sp(t,e,i){return!!Array.isArray(t)&&(wC(t,i[e],i),!0)}var ap=32,gp=1;function lp(t,e){var i=e.manager;return i?i.get(t):t}function hp(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var cp=function(){function t(t){void 0===t&&(t={}),this.options=QI({enable:!0},t),this.id=gp++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return eC(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(sp(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=lp(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return sp(t,"dropRecognizeWith",this)||(t=lp(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(sp(t,"requireFailure",this))return this;var e=this.requireFail;return-1===UC(e,t=lp(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(sp(t,"dropRequireFailure",this))return this;t=lp(t,this);var e=UC(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,i=this.state;function o(i){e.manager.emit(i,t)}i<8&&o(e.options.event+hp(i)),o(e.options.event),t.additionalEvent&&o(t.additionalEvent),i>=8&&o(e.options.event+hp(i))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=ap},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=eC({},t);if(!kC(this.options.enable,[this,e]))return this.reset(),void(this.state=ap);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),up=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,QI({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}JI(e,t);var i=e.prototype;return i.getTouchAction=function(){return[uC]},i.process=function(t){var e=this,i=this.options,o=t.pointers.length===i.pointers,n=t.distance<i.threshold,r=t.deltaTime<i.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&r&&o){if(4!==t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<i.interval,a=!this.pCenter||MC(this.pCenter,t.center)<i.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t,0==this.count%i.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.interval),2):8}return ap},i.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=ap}),this.options.interval),ap},i.reset=function(){clearTimeout(this._timer)},i.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(cp),dp=function(t){function e(e){return void 0===e&&(e={}),t.call(this,QI({pointers:1},e))||this}JI(e,t);var i=e.prototype;return i.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},i.process=function(t){var e=this.state,i=t.eventType,o=6&e,n=this.attrTest(t);return o&&(8&i||!n)?16|e:o||n?4&i?8|e:2&e?4|e:2:ap},e}(cp);function Ap(t){return t===yC?"down":8===t?"up":2===t?"left":4===t?"right":""}var Ip=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,QI({event:"pan",threshold:10,pointers:1,direction:30},e))||this).pX=null,i.pY=null,i}JI(e,t);var i=e.prototype;return i.getTouchAction=function(){var t=this.options.direction,e=[];return 6&t&&e.push(IC),t&_C&&e.push(AC),e},i.directionTest=function(t){var e=this.options,i=!0,o=t.distance,n=t.direction,r=t.deltaX,s=t.deltaY;return n&e.direction||(6&e.direction?(n=0===r?1:r<0?2:4,i=r!==this.pX,o=Math.abs(t.deltaX)):(n=0===s?1:s<0?8:yC,i=s!==this.pY,o=Math.abs(t.deltaY))),t.direction=n,i&&o>e.threshold&&n&e.direction},i.attrTest=function(t){return dp.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},i.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var i=Ap(e.direction);i&&(e.additionalEvent=this.options.event+i),t.prototype.emit.call(this,e)},e}(dp),Cp=function(t){function e(e){return void 0===e&&(e={}),t.call(this,QI({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},e))||this}JI(e,t);var i=e.prototype;return i.getTouchAction=function(){return Ip.prototype.getTouchAction.call(this)},i.attrTest=function(e){var i,o=this.options.direction;return 30&o?i=e.overallVelocity:6&o?i=e.overallVelocityX:o&_C&&(i=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&o&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&rC(i)>this.options.velocity&&4&e.eventType},i.emit=function(t){var e=Ap(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(dp),pp=function(t){function e(e){return void 0===e&&(e={}),t.call(this,QI({event:"pinch",threshold:0,pointers:2},e))||this}JI(e,t);var i=e.prototype;return i.getTouchAction=function(){return[dC]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},i.emit=function(e){if(1!==e.scale){var i=e.scale<1?"in":"out";e.additionalEvent=this.options.event+i}t.prototype.emit.call(this,e)},e}(dp),fp=function(t){function e(e){return void 0===e&&(e={}),t.call(this,QI({event:"rotate",threshold:0,pointers:2},e))||this}JI(e,t);var i=e.prototype;return i.getTouchAction=function(){return[dC]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(dp),vp=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,QI({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,i._input=null,i}JI(e,t);var i=e.prototype;return i.getTouchAction=function(){return[cC]},i.process=function(t){var e=this,i=this.options,o=t.pointers.length===i.pointers,n=t.distance<i.threshold,r=t.deltaTime>i.time;if(this._input=t,!n||!o||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.time);else if(4&t.eventType)return 8;return ap},i.reset=function(){clearTimeout(this._timer)},i.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=sC(),this.manager.emit(this.options.event,this._input)))},e}(cp),mp={domEvents:!1,touchAction:hC,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},bp=[[fp,{enable:!1}],[pp,{enable:!1},["rotate"]],[Cp,{direction:6}],[Ip,{direction:6},["swipe"]],[up],[up,{event:"doubletap",taps:2},["tap"]],[vp]];function yp(t,e){var i,o=t.element;o.style&&(wC(t.options.cssProps,(function(n,r){i=aC(o.style,r),e?(t.oldCssProps[i]=o.style[i],o.style[i]=n):o.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}var _p=function(){function t(t,e){var i=this;this.options=eC({},mp,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(fC?XC:vC?JC:pC?rp:ep))(this,$C),this.touchAction=new SC(this,this.options.touchAction),yp(this,!0),wC(this.options.recognizers,(function(t){var e=i.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}var e=t.prototype;return e.set=function(t){return eC(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var o=this.recognizers,n=e.curRecognizer;(!n||n&&8&n.state)&&(e.curRecognizer=null,n=null);for(var r=0;r<o.length;)i=o[r],2===e.stopped||n&&i!==n&&!i.canRecognizeWith(n)?i.reset():i.recognize(t),!n&&14&i.state&&(e.curRecognizer=i,n=i),r++}},e.get=function(t){if(t instanceof cp)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event===t)return e[i];return null},e.add=function(t){if(sp(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(sp(t,"remove",this))return this;var e=this.get(t);if(t){var i=this.recognizers,o=UC(i,e);-1!==o&&(i.splice(o,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var i=this.handlers;return wC(BC(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this},e.off=function(t,e){if(void 0===t)return this;var i=this.handlers;return wC(BC(t),(function(t){e?i[t]&&i[t].splice(UC(i[t],e),1):delete i[t]})),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var o=0;o<i.length;)i[o](e),o++}},e.destroy=function(){this.element&&yp(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Tp={touchstart:1,touchmove:2,touchend:4,touchcancel:8},Ep=function(t){function e(){var i,o=e.prototype;return o.evTarget="touchstart",o.evWin="touchstart touchmove touchend touchcancel",(i=t.apply(this,arguments)||this).started=!1,i}return JI(e,t),e.prototype.handler=function(t){var e=Tp[t.type];if(1===e&&(this.started=!0),this.started){var i=wp.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:mC,srcEvent:t})}},e}(GC);function wp(t,e){var i=ZC(t.touches),o=ZC(t.changedTouches);return 12&e&&(i=KC(i.concat(o),"identifier",!0)),[i,o]}function kp(t,e,i){var o="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",n=window.console&&(window.console.warn||window.console.log);return n&&n.call(window.console,o,i),t.apply(this,arguments)}}var Op=kp((function(t,e,i){for(var o=Object.keys(e),n=0;n<o.length;)(!i||i&&void 0===t[o[n]])&&(t[o[n]]=e[o[n]]),n++;return t}),"extend","Use `assign`."),Sp=kp((function(t,e){return Op(t,e,!0)}),"merge","Use `assign`.");function Rp(t,e,i){var o,n=e.prototype;(o=t.prototype=Object.create(n)).constructor=t,o._super=n,i&&eC(o,i)}function xp(t,e){return function(){return t.apply(e,arguments)}}var Dp=function(){var t=function(t,e){return void 0===e&&(e={}),new _p(t,QI({recognizers:bp.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=30,t.DIRECTION_DOWN=yC,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=_C,t.DIRECTION_NONE=1,t.DIRECTION_DOWN=yC,t.INPUT_START=1,t.INPUT_MOVE=2,t.INPUT_END=4,t.INPUT_CANCEL=8,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=ap,t.Manager=_p,t.Input=GC,t.TouchAction=SC,t.TouchInput=JC,t.MouseInput=ep,t.PointerEventInput=XC,t.TouchMouseInput=rp,t.SingleTouchInput=Ep,t.Recognizer=cp,t.AttrRecognizer=dp,t.Tap=up,t.Pan=Ip,t.Swipe=Cp,t.Pinch=pp,t.Rotate=fp,t.Press=vp,t.on=FC,t.off=zC,t.each=wC,t.merge=Sp,t.extend=Op,t.bindFn=xp,t.assign=eC,t.inherit=Rp,t.bindFn=xp,t.prefixed=aC,t.toArray=ZC,t.inArray=UC,t.uniqueArray=KC,t.splitStr=BC,t.boolOrFn=kC,t.hasParent=RC,t.addEventListeners=FC,t.removeEventListeners=zC,t.defaults=eC({},mp,{preset:bp}),t}();Dp.defaults;var Mp=Dp;function Np(t,e){var i=void 0!==Zu&&og(t)||t["@@iterator"];if(!i){if(gd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Lp(t,e);var o=ed(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?$a(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Lp(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function Lp(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function Pp(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){var e=function(){for(var t=function(){var t=4022871197;return function(e){for(var i=e.toString(),o=0;o<i.length;o++){var n=.02519603282416938*(t+=i.charCodeAt(o));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)}}(),e=t(" "),i=t(" "),o=t(" "),n=0;n<arguments.length;n++)(e-=t(n<0||arguments.length<=n?void 0:arguments[n]))<0&&(e+=1),(i-=t(n<0||arguments.length<=n?void 0:arguments[n]))<0&&(i+=1),(o-=t(n<0||arguments.length<=n?void 0:arguments[n]))<0&&(o+=1);return[e,i,o]}(t),i=Yu(e,3),o=i[0],n=i[1],r=i[2],s=1,a=function(){var t=2091639*o+2.3283064365386963e-10*s;return o=n,n=r,r=t-(s=0|t)};return a.uint32=function(){return 4294967296*a()},a.fract53=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.algorithm="Alea",a.seed=t,a.version="0.9",a}(e.length?e:[bd()])}Zu("DELETE");var $p="undefined"!=typeof window?window.Hammer||Mp:function(){return function(){var t=function(){};return{on:t,off:t,destroy:t,emit:t,get:function(){return{set:t}}}}()};function Bp(t){var e,i=this;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){i._dom.overlay.parentNode.removeChild(i._dom.overlay)}));var o=$p(this._dom.overlay);o.on("tap",Fo(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push((function(){o.destroy()}));var n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];Md(n).call(n,(function(t){o.on(t,(function(t){t.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(e){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||i.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",i._onClick)}))),this._escListener=function(t){("key"in t?"Escape"===t.key:27===t.keyCode)&&i.deactivate()}}Yo(Bp.prototype),Bp.current=null,Bp.prototype.destroy=function(){var t,e;this.deactivate();var i,o=Np(Gd(t=lA(e=this._cleanupQueue).call(e,0)).call(t));try{for(o.s();!(i=o.n()).done;)(0,i.value)()}catch(t){o.e(t)}finally{o.f()}},Bp.prototype.activate=function(){Bp.current&&Bp.current.deactivate(),Bp.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},Bp.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},Bp.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var Fp=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,zp=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Hp=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,Gp=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function Up(t){if(t)for(;!0===t.hasChildNodes();){var e=t.firstChild;e&&(Up(e),t.removeChild(e))}}function Vp(t){return t instanceof String||"string"==typeof t}function Wp(t){return"object"===ou(t)&&null!==t}function jp(t,e,i,o){var n=!1;!0===o&&(n=null===e[i]&&void 0!==t[i]),n?delete t[i]:t[i]=e[i]}function Yp(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var o in t)if(void 0!==e[o])if(null===e[o]||"object"!==ou(e[o]))jp(t,e,o,i);else{var n=t[o],r=e[o];Wp(n)&&Wp(r)&&Yp(n,r,i)}}function Xp(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(gd(i))throw new TypeError("Arrays are not supported by deepExtend");for(var n=0;n<t.length;n++){var r=t[n];if(Object.prototype.hasOwnProperty.call(i,r))if(i[r]&&i[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r].constructor===Object?Kp(e[r],i[r],!1,o):jp(e,i,r,o);else{if(gd(i[r]))throw new TypeError("Arrays are not supported by deepExtend");jp(e,i,r,o)}}return e}function Zp(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(gd(i))throw new TypeError("Arrays are not supported by deepExtend");for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&!OA(t).call(t,n))if(i[n]&&i[n].constructor===Object)void 0===e[n]&&(e[n]={}),e[n].constructor===Object?Kp(e[n],i[n]):jp(e,i,n,o);else if(gd(i[n])){e[n]=[];for(var r=0;r<i[n].length;r++)e[n].push(i[n][r])}else jp(e,i,n,o);return e}function Kp(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)||!0===i)if("object"===ou(e[n])&&null!==e[n]&&MA(e[n])===Object.prototype)void 0===t[n]?t[n]=Kp({},e[n],i):"object"===ou(t[n])&&null!==t[n]&&MA(t[n])===Object.prototype?Kp(t[n],e[n],i):jp(t,e,n,o);else if(gd(e[n])){var r;t[n]=ed(r=e[n]).call(r)}else jp(t,e,n,o);return t}function Qp(t,e){var i;return td(i=[]).call(i,Xu(t),[e])}function Jp(t){return t.getBoundingClientRect().top}function qp(t,e){if(gd(t))for(var i=t.length,o=0;o<i;o++)e(t[o],o,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function tf(t){var e;switch(t.length){case 3:case 4:return(e=zp.exec(t))?{r:aI(e[1]+e[1],16),g:aI(e[2]+e[2],16),b:aI(e[3]+e[3],16)}:null;case 6:case 7:return(e=Fp.exec(t))?{r:aI(e[1],16),g:aI(e[2],16),b:aI(e[3],16)}:null;default:return null}}function ef(t,e){if(OA(t).call(t,"rgba"))return t;if(OA(t).call(t,"rgb")){var i=t.substr(pI(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"}var o=tf(t);return null==o?t:"rgba("+o.r+","+o.g+","+o.b+","+e+")"}function of(t,e,i){var o;return"#"+ed(o=((1<<24)+(t<<16)+(e<<8)+i).toString(16)).call(o,1)}function nf(t,e){if(Vp(t)){var i=t;if(lf(i)){var o,n=Ad(o=i.substr(4).substr(0,i.length-5).split(",")).call(o,(function(t){return aI(t)}));i=of(n[0],n[1],n[2])}if(!0===gf(i)){var r=function(t){var e=tf(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return rf(e.r,e.g,e.b)}(i),s={h:r.h,s:.8*r.s,v:Math.min(1,1.02*r.v)},a={h:r.h,s:Math.min(1,1.25*r.s),v:.8*r.v},g=af(a.h,a.s,a.v),l=af(s.h,s.s,s.v);return{background:i,border:g,highlight:{background:l,border:g},hover:{background:l,border:g}}}return{background:i,border:i,highlight:{background:i,border:i},hover:{background:i,border:i}}}return e?{background:t.background||e.background,border:t.border||e.border,highlight:Vp(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||e.highlight.background,border:t.highlight&&t.highlight.border||e.highlight.border},hover:Vp(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||e.hover.border,background:t.hover&&t.hover.background||e.hover.background}}:{background:t.background||void 0,border:t.border||void 0,highlight:Vp(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:Vp(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function rf(t,e,i){t/=255,e/=255,i/=255;var o=Math.min(t,Math.min(e,i)),n=Math.max(t,Math.max(e,i));return o===n?{h:0,s:0,v:o}:{h:60*((t===o?3:i===o?1:5)-(t===o?e-i:i===o?t-e:i-t)/(n-o))/360,s:(n-o)/n,v:n}}function sf(t,e,i){var o,n,r,s=Math.floor(6*t),a=6*t-s,g=i*(1-e),l=i*(1-a*e),h=i*(1-(1-a)*e);switch(s%6){case 0:o=i,n=h,r=g;break;case 1:o=l,n=i,r=g;break;case 2:o=g,n=i,r=h;break;case 3:o=g,n=l,r=i;break;case 4:o=h,n=g,r=i;break;case 5:o=i,n=g,r=l}return{r:Math.floor(255*o),g:Math.floor(255*n),b:Math.floor(255*r)}}function af(t,e,i){var o=sf(t,e,i);return of(o.r,o.g,o.b)}function gf(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function lf(t){return Hp.test(t)}function hf(t){if(null===t||"object"!==ou(t))return null;if(t instanceof Element)return t;var e=mI(t);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&"object"==ou(t[i])&&(e[i]=hf(t[i]));return e}function cf(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=function(t){return null!=t},r=function(t){return null!==t&&"object"===ou(t)};if(!r(t))throw new Error("Parameter mergeTarget must be an object");if(!r(e))throw new Error("Parameter options must be an object");if(!n(i))throw new Error("Parameter option must have a value");if(!r(o))throw new Error("Parameter globalOptions must be an object");var s=e[i],a=r(o)&&!function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(o)?o[i]:void 0,g=a?a.enabled:void 0;if(void 0!==s){if("boolean"==typeof s)return r(t[i])||(t[i]={}),void(t[i].enabled=s);if(null===s&&!r(t[i])){if(!n(a))return;t[i]=mI(a)}if(r(s)){var l=!0;void 0!==s.enabled?l=s.enabled:void 0!==g&&(l=a.enabled),function(t,e,i){r(t[i])||(t[i]={});var o=e[i],n=t[i];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])}(t,e,i),t[i].enabled=l}}}var uf={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function df(t,e){var i;gd(e)||(e=[e]);var o,n=Np(t);try{for(n.s();!(o=n.n()).done;){var r=o.value;if(r){i=r[e[0]];for(var s=1;s<e.length;s++)i&&(i=i[e[s]]);if(void 0!==i)break}}}catch(t){n.e(t)}finally{n.f()}return i}var Af={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},If=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;ng(this,t),this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return au(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){if("string"==typeof t)return Af[t]}},{key:"setColor",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==t){var i,o=this._isColorString(t);if(void 0!==o&&(t=o),!0===Vp(t)){if(!0===lf(t)){var n=t.substr(4).substr(0,t.length-5).split(",");i={r:n[0],g:n[1],b:n[2],a:1}}else if(!0===function(t){return Gp.test(t)}(t)){var r=t.substr(5).substr(0,t.length-6).split(",");i={r:r[0],g:r[1],b:r[2],a:r[3]}}else if(!0===gf(t)){var s=tf(t);i={r:s.r,g:s.g,b:s.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var a=void 0!==t.a?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a}}if(void 0===i)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+_I(t));this._setColor(i,e)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this;!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.previousColor=fo({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",HI((function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)}),0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){!0===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.initialColor=fo({},t)),this.color=t;var e=rf(t.r,t.g,t.b),i=2*Math.PI,o=this.r*e.s,n=this.centerCoordinates.x+o*Math.sin(i*e.h),r=this.centerCoordinates.y+o*Math.cos(i*e.h);this.colorPickerSelector.style.left=n-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=r-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=rf(this.color.r,this.color.g,this.color.b);e.v=t/100;var i=sf(e.h,e.s,e.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.color,e=rf(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var o=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,o,n),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-e.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),KI(i).call(i),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,e,i,o;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var n=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var r=document.createElement("DIV");r.style.color="red",r.style.fontWeight="bold",r.style.padding="10px",r.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(r)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=Fo(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=Fo(e=this._apply).call(e,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=Fo(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=Fo(o=this._loadLast).call(o,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new $p(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",(function(e){e.isFirst&&t._moveSelector(e)})),this.hammer.on("tap",(function(e){t._moveSelector(e)})),this.hammer.on("panstart",(function(e){t._moveSelector(e)})),this.hammer.on("panmove",(function(e){t._moveSelector(e)})),this.hammer.on("panend",(function(e){t._moveSelector(e)}))}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e,i,o,n,r=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,r,s),this.centerCoordinates={x:.5*r,y:.5*s},this.r=.49*r;var a,g=2*Math.PI/360,l=1/this.r;for(o=0;o<360;o++)for(n=0;n<this.r;n++)e=this.centerCoordinates.x+n*Math.sin(g*o),i=this.centerCoordinates.y+n*Math.cos(g*o),a=sf(.002777777777777778*o,n*l,1),t.fillStyle="rgb("+a.r+","+a.g+","+a.b+")",t.fillRect(e-.5,i-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,r,s)}this.generated=!0}},{key:"_moveSelector",value:function(t){var e=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-e.left,o=t.center.y-e.top,n=.5*this.colorPickerDiv.clientHeight,r=.5*this.colorPickerDiv.clientWidth,s=i-r,a=o-n,g=Math.atan2(s,a),l=.98*Math.min(Math.sqrt(s*s+a*a),r),h=Math.cos(g)*l+n,c=Math.sin(g)*l+r;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=c-.5*this.colorPickerSelector.clientWidth+"px";var u=g/(2*Math.PI);u=u<0?u+1:u;var d=l/this.r,A=rf(this.color.r,this.color.g,this.color.b);A.h=u,A.s=d;var I=sf(A.h,A.s,A.v);I.a=this.color.a,this.color=I,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}();function Cf(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e.length<1)throw new TypeError("Invalid arguments.");if(1===e.length)return document.createTextNode(e[0]);var o=document.createElement(e[0]);return o.appendChild(Cf.apply(void 0,Xu(ed(e).call(e,1)))),o}var pf,ff=function(){function t(e,i,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!1};ng(this,t),this.parent=e,this.changedOptions=[],this.container=i,this.allowCreation=!1,this.hideOption=r,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},fo(this.options,this.defaultOptions),this.configureOptions=o,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new If(n),this.wrapper=void 0}return au(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;if("string"==typeof t)this.options.filter=t;else if(gd(t))this.options.filter=t.join();else if("object"===ou(t)){if(null==t)throw new TypeError("options cannot be null");void 0!==t.container&&(this.options.container=t.container),void 0!==FA(t)&&(this.options.filter=FA(t)),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)}else"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0);!1===FA(this.options)&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=FA(this.options),e=0,i=!1;for(var o in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,o)&&(this.allowCreation=!1,i=!1,"function"==typeof t?i=(i=t(o,[]))||this._handleObject(this.configureOptions[o],[o],!0):!0!==t&&-1===pI(t).call(t,o)||(i=!0),!1!==i&&(this.allowCreation=!0,e>0&&this._makeItem([]),this._makeHeader(o),this._handleObject(this.configureOptions[o],[o])),e++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,i=0;i<t.length;i++){if(void 0===e[t[i]]){e=void 0;break}e=e[t[i]]}return e}},{key:"_makeItem",value:function(t){if(!0===this.allowCreation){var e=document.createElement("div");e.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];return Md(o).call(o,(function(t){e.appendChild(t)})),this.domElements.push(e),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerText=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=document.createElement("div");if(o.className="vis-configuration vis-config-label vis-config-s"+e.length,!0===i){for(;o.firstChild;)o.removeChild(o.firstChild);o.appendChild(Cf("i","b",t))}else o.innerText=t+":";return o}},{key:"_makeDropdown",value:function(t,e,i){var o=document.createElement("select");o.className="vis-configuration vis-config-select";var n=0;void 0!==e&&-1!==pI(t).call(t,e)&&(n=pI(t).call(t,e));for(var r=0;r<t.length;r++){var s=document.createElement("option");s.value=t[r],r===n&&(s.selected="selected"),s.innerText=t[r],o.appendChild(s)}var a=this;o.onchange=function(){a._update(this.value,i)};var g=this._makeLabel(i[i.length-1],i);this._makeItem(i,g,o)}},{key:"_makeRange",value:function(t,e,i){var o=t[0],n=t[1],r=t[2],s=t[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=n,a.max=r}catch(t){}a.step=s;var g="",l=0;if(void 0!==e){var h=1.2;e<0&&e*h<n?(a.min=Math.ceil(e*h),l=a.min,g="range increased"):e/h<n&&(a.min=Math.ceil(e/h),l=a.min,g="range increased"),e*h>r&&1!==r&&(a.max=Math.ceil(e*h),l=a.max,g="range increased"),a.value=e}else a.value=o;var c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=a.value;var u=this;a.onchange=function(){c.value=this.value,u._update(Number(this.value),i)},a.oninput=function(){c.value=this.value};var d=this._makeLabel(i[i.length-1],i),A=this._makeItem(i,d,a,c);""!==g&&this.popupHistory[A]!==l&&(this.popupHistory[A]=l,this._setupPopup(g,A))}},{key:"_makeButton",value:function(){var t=this;if(!0===this.options.showButton){var e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=function(){t._printOptions()},e.onmouseover=function(){e.className="vis-configuration vis-config-button hover"},e.onmouseout=function(){e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}},{key:"_setupPopup",value:function(t,e){var i=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var o=document.createElement("div");o.id="vis-configuration-popup",o.className="vis-configuration-popup",o.innerText=t,o.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:o,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=e.left+"px",this.popupDiv.html.style.top=e.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=HI((function(){t.popupDiv.html.style.opacity=0}),1500),this.popupDiv.deleteTimeout=HI((function(){t._removePopup()}),1800)}}},{key:"_makeCheckbox",value:function(t,e,i){var o=document.createElement("input");o.type="checkbox",o.className="vis-configuration vis-config-checkbox",o.checked=t,void 0!==e&&(o.checked=e,e!==t&&("object"===ou(t)?e!==t.enabled&&this.changedOptions.push({path:i,value:e}):this.changedOptions.push({path:i,value:e})));var n=this;o.onchange=function(){n._update(this.checked,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,o)}},{key:"_makeTextInput",value:function(t,e,i){var o=document.createElement("input");o.type="text",o.className="vis-configuration vis-config-text",o.value=e,e!==t&&this.changedOptions.push({path:i,value:e});var n=this;o.onchange=function(){n._update(this.value,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,o)}},{key:"_makeColorField",value:function(t,e,i){var o=this,n=t[1],r=document.createElement("div");"none"!==(e=void 0===e?n:e)?(r.className="vis-configuration vis-config-colorBlock",r.style.backgroundColor=e):r.className="vis-configuration vis-config-colorBlock none",e=void 0===e?n:e,r.onclick=function(){o._showColorPicker(e,r,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,r)}},{key:"_showColorPicker",value:function(t,e,i){var o=this;e.onclick=function(){},this.colorPicker.insertTo(e),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback((function(t){var n="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=n,o._update(n,i)})),this.colorPicker.setCloseCallback((function(){e.onclick=function(){o._showColorPicker(t,e,i)}}))}},{key:"_handleObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!1,n=FA(this.options),r=!1;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){o=!0;var a=t[s],g=Qp(e,s);if("function"==typeof n&&!1===(o=n(s,e))&&!gd(a)&&"string"!=typeof a&&"boolean"!=typeof a&&a instanceof Object&&(this.allowCreation=!1,o=this._handleObject(a,g,!0),this.allowCreation=!1===i),!1!==o){r=!0;var l=this._getValue(g);if(gd(a))this._handleArray(a,l,g);else if("string"==typeof a)this._makeTextInput(a,l,g);else if("boolean"==typeof a)this._makeCheckbox(a,l,g);else if(a instanceof Object){if(!this.hideOption(e,s,this.moduleOptions))if(void 0!==a.enabled){var h=Qp(g,"enabled"),c=this._getValue(h);if(!0===c){var u=this._makeLabel(s,g,!0);this._makeItem(g,u),r=this._handleObject(a,g)||r}else this._makeCheckbox(a,c,g)}else{var d=this._makeLabel(s,g,!0);this._makeItem(g,d),r=this._handleObject(a,g)||r}}else console.error("dont know how to handle",a,s,g)}}return r}},{key:"_handleArray",value:function(t,e,i){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,i),t[1]!==e&&this.changedOptions.push({path:i,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:Number(e)}))}},{key:"_update",value:function(t,e){var i=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i;t="false"!==(t="true"===t||t)&&t;for(var n=0;n<e.length;n++)"global"!==e[n]&&(void 0===o[e[n]]&&(o[e[n]]={}),n!==e.length-1?o=o[e[n]]:o[e[n]]=t);return i}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(Cf("pre","const options = "+_I(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),t}(),vf=function(){function t(e,i){ng(this,t),this.container=e,this.overflowMethod=i||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return au(t,[{key:"setPosition",value:function(t,e){this.x=aI(t),this.y=aI(e)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var e=this.frame.clientHeight,i=this.frame.clientWidth,o=this.frame.parentNode.clientHeight,n=this.frame.parentNode.clientWidth,r=0,s=0;if("flip"==this.overflowMethod){var a=!1,g=!0;this.y-e<this.padding&&(g=!1),this.x+i>n-this.padding&&(a=!0),r=a?this.x-i:this.x,s=g?this.y-e:this.y}else(s=this.y-e)+e+this.padding>o&&(s=o-e-this.padding),s<this.padding&&(s=this.padding),(r=this.x)+i+this.padding>n&&(r=n-i-this.padding),r<this.padding&&(r=this.padding);this.frame.style.left=r+"px",this.frame.style.top=s+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}(),mf=!1,bf="background: #FFeeee; color: #dd0000",yf=function(){function t(){ng(this,t)}return au(t,null,[{key:"validate",value:function(e,i,o){mf=!1,pf=i;var n=i;return void 0!==o&&(n=i[o]),t.parse(e,n,[]),mf}},{key:"parse",value:function(e,i,o){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.check(n,e,i,o)}},{key:"check",value:function(e,i,o,n){if(void 0!==o[e]||void 0!==o.__any__){var r=e,s=!0;void 0===o[e]&&void 0!==o.__any__&&(r="__any__",s="object"===t.getType(i[e]));var a=o[r];s&&void 0!==a.__type__&&(a=a.__type__),t.checkFields(e,i,o,r,a,n)}else t.getSuggestion(e,o,n)}},{key:"checkFields",value:function(e,i,o,n,r,s){var a=function(i){console.error("%c"+i+t.printLocation(s,e),bf)},g=t.getType(i[e]),l=r[g];void 0!==l?"array"===t.getType(l)&&-1===pI(l).call(l,i[e])?(a('Invalid option detected in "'+e+'". Allowed values are:'+t.print(l)+' not "'+i[e]+'". '),mf=!0):"object"===g&&"__any__"!==n&&(s=Qp(s,e),t.parse(i[e],o[n],s)):void 0===r.any&&(a('Invalid type received for "'+e+'". Expected: '+t.print(pd(r))+". Received ["+g+'] "'+i[e]+'"'),mf=!0)}},{key:"getType",value:function(t){var e=ou(t);return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":gd(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(e,i,o){var n,r=t.findInOptions(e,i,o,!1),s=t.findInOptions(e,pf,[],!0);n=void 0!==r.indexMatch?" in "+t.printLocation(r.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+'"?\n\n':s.distance<=4&&r.distance>s.distance?" in "+t.printLocation(r.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(s.path,s.closestMatch,""):r.distance<=8?'. Did you mean "'+r.closestMatch+'"?'+t.printLocation(r.path,e):". Did you mean one of these: "+t.print(pd(i))+t.printLocation(o,e),console.error('%cUnknown option detected: "'+e+'"'+n,bf),mf=!0}},{key:"findInOptions",value:function(e,i,o){var n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=1e9,a="",g=[],l=e.toLowerCase(),h=void 0;for(var c in i){var u=void 0;if(void 0!==i[c].__type__&&!0===r){var d=t.findInOptions(e,i[c],Qp(o,c));s>d.distance&&(a=d.closestMatch,g=d.path,s=d.distance,h=d.indexMatch)}else{var A;-1!==pI(A=c.toLowerCase()).call(A,l)&&(h=c),s>(u=t.levenshteinDistance(e,c))&&(a=c,g=ed(n=o).call(n),s=u)}}return{closestMatch:a,path:g,distance:s,indexMatch:h}}},{key:"printLocation",value:function(t,e){for(var i="\n\n"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n")+"options = {\n",o=0;o<t.length;o++){for(var n=0;n<o+1;n++)i+="  ";i+=t[o]+": {\n"}for(var r=0;r<t.length+1;r++)i+="  ";i+=e+"\n";for(var s=0;s<t.length+1;s++){for(var a=0;a<t.length-s;a++)i+="  ";i+="}\n"}return i+"\n\n"}},{key:"print",value:function(t){return _I(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var i,o,n=[];for(i=0;i<=e.length;i++)n[i]=[i];for(o=0;o<=t.length;o++)n[0][o]=o;for(i=1;i<=e.length;i++)for(o=1;o<=t.length;o++)e.charAt(i-1)==t.charAt(o-1)?n[i][o]=n[i-1][o-1]:n[i][o]=Math.min(n[i-1][o-1]+1,Math.min(n[i][o-1]+1,n[i-1][o]+1));return n[e.length][t.length]}}]),t}(),_f=Bp,Tf=ff,Ef=$p,wf=vf,kf=bf,Of=yf;function Sf(t){return Nf=t,function(){var t={};if(Lf=0,Pf=Nf.charAt(0),Yf(),"strict"===$f&&(t.strict=!0,Yf()),"graph"!==$f&&"digraph"!==$f||(t.type=$f,Yf()),Bf===Df.IDENTIFIER&&(t.id=$f,Yf()),"{"!=$f)throw qf("Angle bracket { expected");if(Yf(),Xf(t),"}"!=$f)throw qf("Angle bracket } expected");if(Yf(),""!==$f)throw qf("End of file expected");return Yf(),delete t.node,delete t.edge,delete t.graph,t}()}var Rf={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},xf=mI(Rf);xf.color="color.color",xf.style="dashes";var Df={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},Mf={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},Nf="",Lf=0,Pf="",$f="",Bf=Df.NULL;function Ff(){Lf++,Pf=Nf.charAt(Lf)}function zf(){return Nf.charAt(Lf+1)}function Hf(t){var e=t.charCodeAt(0);return e<47?35===e||46===e:e<59?e>47:e<91?e>64:e<96?95===e:e<123&&e>96}function Gf(t,e){if(t||(t={}),e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function Uf(t,e,i){for(var o=e.split("."),n=t;o.length;){var r=o.shift();o.length?(n[r]||(n[r]={}),n=n[r]):n[r]=i}}function Vf(t,e){for(var i,o,n=null,r=[t],s=t;s.parent;)r.push(s.parent),s=s.parent;if(s.nodes)for(i=0,o=s.nodes.length;i<o;i++)if(e.id===s.nodes[i].id){n=s.nodes[i];break}for(n||(n={id:e.id},t.node&&(n.attr=Gf(n.attr,t.node))),i=r.length-1;i>=0;i--){var a,g=r[i];g.nodes||(g.nodes=[]),-1===pI(a=g.nodes).call(a,n)&&g.nodes.push(n)}e.attr&&(n.attr=Gf(n.attr,e.attr))}function Wf(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var i=Gf({},t.edge);e.attr=Gf(i,e.attr)}}function jf(t,e,i,o,n){var r={from:e,to:i,type:o};return t.edge&&(r.attr=Gf({},t.edge)),r.attr=Gf(r.attr||{},n),null!=n&&n.hasOwnProperty("arrows")&&null!=n.arrows&&(r.arrows={to:{enabled:!0,type:n.arrows.type}},n.arrows=null),r}function Yf(){for(Bf=Df.NULL,$f="";" "===Pf||"\t"===Pf||"\n"===Pf||"\r"===Pf;)Ff();do{var t=!1;if("#"===Pf){for(var e=Lf-1;" "===Nf.charAt(e)||"\t"===Nf.charAt(e);)e--;if("\n"===Nf.charAt(e)||""===Nf.charAt(e)){for(;""!=Pf&&"\n"!=Pf;)Ff();t=!0}}if("/"===Pf&&"/"===zf()){for(;""!=Pf&&"\n"!=Pf;)Ff();t=!0}if("/"===Pf&&"*"===zf()){for(;""!=Pf;){if("*"===Pf&&"/"===zf()){Ff(),Ff();break}Ff()}t=!0}for(;" "===Pf||"\t"===Pf||"\n"===Pf||"\r"===Pf;)Ff()}while(t);if(""!==Pf){var i=Pf+zf();if(Mf[i])return Bf=Df.DELIMITER,$f=i,Ff(),void Ff();if(Mf[Pf])return Bf=Df.DELIMITER,$f=Pf,void Ff();if(Hf(Pf)||"-"===Pf){for($f+=Pf,Ff();Hf(Pf);)$f+=Pf,Ff();return"false"===$f?$f=!1:"true"===$f?$f=!0:isNaN(Number($f))||($f=Number($f)),void(Bf=Df.IDENTIFIER)}if('"'===Pf){for(Ff();""!=Pf&&('"'!=Pf||'"'===Pf&&'"'===zf());)'"'===Pf?($f+=Pf,Ff()):"\\"===Pf&&"n"===zf()?($f+="\n",Ff()):$f+=Pf,Ff();if('"'!=Pf)throw qf('End of string " expected');return Ff(),void(Bf=Df.IDENTIFIER)}for(Bf=Df.UNKNOWN;""!=Pf;)$f+=Pf,Ff();throw new SyntaxError('Syntax error in part "'+tv($f,30)+'"')}Bf=Df.DELIMITER}function Xf(t){for(;""!==$f&&"}"!=$f;)Zf(t),";"===$f&&Yf()}function Zf(t){var e=Kf(t);if(e)Qf(t,e);else{var i=function(t){return"node"===$f?(Yf(),t.node=Jf(),"node"):"edge"===$f?(Yf(),t.edge=Jf(),"edge"):"graph"===$f?(Yf(),t.graph=Jf(),"graph"):null}(t);if(!i){if(Bf!=Df.IDENTIFIER)throw qf("Identifier expected");var o=$f;if(Yf(),"="===$f){if(Yf(),Bf!=Df.IDENTIFIER)throw qf("Identifier expected");t[o]=$f,Yf()}else!function(t,e){var i={id:e},o=Jf();o&&(i.attr=o),Vf(t,i),Qf(t,e)}(t,o)}}}function Kf(t){var e=null;if("subgraph"===$f&&((e={}).type="subgraph",Yf(),Bf===Df.IDENTIFIER&&(e.id=$f,Yf())),"{"===$f){if(Yf(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,Xf(e),"}"!=$f)throw qf("Angle bracket } expected");Yf(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function Qf(t,e){for(;"->"===$f||"--"===$f;){var i,o=$f;Yf();var n=Kf(t);if(n)i=n;else{if(Bf!=Df.IDENTIFIER)throw qf("Identifier or subgraph expected");Vf(t,{id:i=$f}),Yf()}Wf(t,jf(t,e,i,o,Jf())),e=i}}function Jf(){for(var t,e,i=null,o={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},r=new Array,s=new Array;"["===$f;){for(Yf(),i={};""!==$f&&"]"!=$f;){if(Bf!=Df.IDENTIFIER)throw qf("Attribute name expected");var a=$f;if(Yf(),"="!=$f)throw qf("Equal sign = expected");if(Yf(),Bf!=Df.IDENTIFIER)throw qf("Attribute value expected");var g=$f;"style"===a&&(g=o[g]),"arrowhead"===a&&(a="arrows",g={to:{enabled:!0,type:n[g]}}),"arrowtail"===a&&(a="arrows",g={from:{enabled:!0,type:n[g]}}),r.push({attr:i,name:a,value:g}),s.push(a),Yf(),","==$f&&Yf()}if("]"!=$f)throw qf("Bracket ] expected");Yf()}if(OA(s).call(s,"dir")){var l={arrows:{}};for(t=0;t<r.length;t++)if("arrows"===r[t].name)if(null!=r[t].value.to)l.arrows.to=t;else{if(null==r[t].value.from)throw qf("Invalid value of arrows");l.arrows.from=t}else"dir"===r[t].name&&(l.dir=t);var h,c,u=r[l.dir].value;if(!OA(s).call(s,"arrows"))if("both"===u)r.push({attr:r[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=r.length-1,r.push({attr:r[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=r.length-1;else if("forward"===u)r.push({attr:r[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=r.length-1;else if("back"===u)r.push({attr:r[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=r.length-1;else{if("none"!==u)throw qf('Invalid dir type "'+u+'"');r.push({attr:r[l.dir].attr,name:"arrows",value:""}),l.arrows.to=r.length-1}if("both"===u)l.arrows.to&&l.arrows.from?(c=r[l.arrows.to].value.to.type,h=r[l.arrows.from].value.from.type,r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}},lA(r).call(r,l.arrows.from,1)):l.arrows.to?(c=r[l.arrows.to].value.to.type,h="arrow",r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}):l.arrows.from&&(c="arrow",h=r[l.arrows.from].value.from.type,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}});else if("back"===u)l.arrows.to&&l.arrows.from?(c="",h=r[l.arrows.from].value.from.type,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}):l.arrows.to?(c="",h="arrow",l.arrows.from=l.arrows.to,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}):l.arrows.from&&(c="",h=r[l.arrows.from].value.from.type,r[l.arrows.to]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}),r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{from:{enabled:!0,type:r[l.arrows.from].value.from.type}}};else if("none"===u){var d;r[d=l.arrows.to?l.arrows.to:l.arrows.from]={attr:r[d].attr,name:r[d].name,value:""}}else{if("forward"!==u)throw qf('Invalid dir type "'+u+'"');l.arrows.to&&l.arrows.from||l.arrows.to?(c=r[l.arrows.to].value.to.type,h="",r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}):l.arrows.from&&(c="arrow",h="",l.arrows.to=l.arrows.from,r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}),r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:r[l.arrows.to].value.to.type}}}}lA(r).call(r,l.dir,1)}if(OA(s).call(s,"penwidth")){var A=[];for(e=r.length,t=0;t<e;t++)"width"!==r[t].name&&("penwidth"===r[t].name&&(r[t].name="width"),A.push(r[t]));r=A}for(e=r.length,t=0;t<e;t++)Uf(r[t].attr,r[t].name,r[t].value);return i}function qf(t){return new SyntaxError(t+', got "'+tv($f,30)+'" (char '+Lf+")")}function tv(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function ev(t,e,i){for(var o=e.split("."),n=o.pop(),r=t,s=0;s<o.length;s++){var a=o[s];a in r||(r[a]={}),r=r[a]}return r[n]=i,t}function iv(t,e){var i={};for(var o in t)if(t.hasOwnProperty(o)){var n=e[o];gd(n)?Md(n).call(n,(function(e){ev(i,e,t[o])})):ev(i,"string"==typeof n?n:o,t[o])}return i}function ov(t){var e,i=Sf(t),o={nodes:[],edges:[],options:{}};if(i.nodes&&Md(e=i.nodes).call(e,(function(t){var e={id:t.id,label:String(t.label||t.id)};Gf(e,iv(t.attr,Rf)),e.image&&(e.shape="image"),o.nodes.push(e)})),i.edges){var n,r=function(t){var e={from:t.from,to:t.to};return Gf(e,iv(t.attr,xf)),null==e.arrows&&"->"===t.type&&(e.arrows="to"),e};Md(n=i.edges).call(n,(function(t){var e,i,n,s,a,g,l;e=t.from instanceof Object?t.from.nodes:{id:t.from},i=t.to instanceof Object?t.to.nodes:{id:t.to},t.from instanceof Object&&t.from.edges&&Md(n=t.from.edges).call(n,(function(t){var e=r(t);o.edges.push(e)})),a=i,g=function(e,i){var n=jf(o,e.id,i.id,t.type,t.attr),s=r(n);o.edges.push(s)},gd(s=e)?Md(s).call(s,(function(t){gd(a)?Md(a).call(a,(function(e){g(t,e)})):g(t,a)})):gd(a)?Md(a).call(a,(function(t){g(s,t)})):g(s,a),t.to instanceof Object&&t.to.edges&&Md(l=t.to.edges).call(l,(function(t){var e=r(t);o.edges.push(e)}))}))}return i.attr&&(o.options=i.attr),o}var nv=Object.freeze({__proto__:null,DOTToGraph:ov,parseDOT:Sf});function rv(t,e){var i,o={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};null!=e&&(null!=e.fixed&&(o.nodes.fixed=e.fixed),null!=e.parseColor&&(o.nodes.parseColor=e.parseColor),null!=e.inheritColor&&(o.edges.inheritColor=e.inheritColor));var n=t.edges,r=Ad(n).call(n,(function(t){var e={from:t.source,id:t.id,to:t.target};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),"Directed"===t.type&&(e.arrows="to"),t.color&&!1===o.edges.inheritColor&&(e.color=t.color),e}));return{nodes:Ad(i=t.nodes).call(i,(function(t){var e={id:t.id,fixed:o.nodes.fixed&&null!=t.x&&null!=t.y};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.size&&(e.size=t.size),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),null!=t.title&&(e.title=t.title),null!=t.x&&(e.x=t.x),null!=t.y&&(e.y=t.y),null!=t.color&&(!0===o.nodes.parseColor?e.color=t.color:e.color={background:t.color,border:t.color,highlight:{background:t.color,border:t.color},hover:{background:t.color,border:t.color}}),e})),edges:r}}var sv=Object.freeze({__proto__:null,parseGephi:rv}),av=Object.freeze({__proto__:null,cn:{addDescription:"åå»ç©ºç½å¤æ¾ç½®æ°èç¹ã",addEdge:"æ·»å è¿æ¥çº¿",addNode:"æ·»å èç¹",back:"è¿å",close:"éé",createEdgeError:"æ æ³å°è¿æ¥çº¿è¿æ¥å°ç¾¤éã",del:"å é¤éå®",deleteClusterError:"æ æ³å é¤ç¾¤éã",edgeDescription:"åå»æä¸ªèç¹å¹¶å°è¯¥è¿æ¥çº¿æå¨å°å¦ä¸ä¸ªèç¹ä»¥è¿æ¥å®ä»¬ã",edit:"ç¼è¾",editClusterError:"æ æ³ç¼è¾ç¾¤éã",editEdge:"ç¼è¾è¿æ¥çº¿",editEdgeDescription:"åå»æ§å¶èç¹å¹¶å°å®ä»¬æå°èç¹ä¸è¿æ¥ã",editNode:"ç¼è¾èç¹"},cs:{addDescription:"KluknutÃ­m do prÃ¡zdnÃ©ho prostoru mÅ¯Å¾ete pÅidat novÃ½ vrchol.",addEdge:"PÅidat hranu",addNode:"PÅidat vrchol",back:"ZpÄt",close:"ZavÅÃ­t",createEdgeError:"Nelze pÅipojit hranu ke shluku.",del:"Smazat vÃ½bÄr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"PÅetaÅ¾enÃ­m z jednoho vrcholu do druhÃ©ho mÅ¯Å¾ete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"PÅetaÅ¾enÃ­m kontrolnÃ­ho vrcholu hrany ji mÅ¯Å¾ete pÅipojit k jinÃ©mu vrcholu.",editNode:"Upravit vrchol"},de:{addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufÃ¼gen",addNode:"Knoten hinzufÃ¼gen",back:"ZurÃ¼ck",close:"SchlieÃen",createEdgeError:"Es ist nicht mÃ¶glich, Kanten mit Clustern zu verbinden.",del:"LÃ¶sche Auswahl",deleteClusterError:"Cluster kÃ¶nnen nicht gelÃ¶scht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster kÃ¶nnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},en:{addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},es:{addDescription:"Haga clic en un lugar vacÃ­o para colocar un nuevo nodo.",addEdge:"AÃ±adir arista",addNode:"AÃ±adir nodo",back:"AtrÃ¡s",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selecciÃ³n",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},fr:{addDescription:"Cliquez dans un endroit vide pour placer un nÅud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nÅud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crÃ©er un lien vers un cluster.",del:"Effacer la sÃ©lection",deleteClusterError:"Les clusters ne peuvent pas Ãªtre effacÃ©s.",edgeDescription:"Cliquez sur un nÅud et glissez le lien vers un autre nÅud pour les connecter.",edit:"Ãditer",editClusterError:"Les clusters ne peuvent pas Ãªtre Ã©ditÃ©s.",editEdge:"Ãditer le lien",editEdgeDescription:"Cliquez sur les points de contrÃ´le et glissez-les pour connecter un nÅud.",editNode:"Ãditer le nÅud"},it:{addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},nl:{addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},pt:{addDescription:"Clique em um espaÃ§o em branco para adicionar um novo nÃ³",addEdge:"Adicionar aresta",addNode:"Adicionar nÃ³",back:"Voltar",close:"Fechar",createEdgeError:"NÃ£o foi possÃ­vel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters nÃ£o puderam ser removidos.",edgeDescription:"Clique em um nÃ³ e arraste a aresta atÃ© outro nÃ³ para conectÃ¡-los",edit:"Editar",editClusterError:"Clusters nÃ£o puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nÃ³ para conectÃ¡-los",editNode:"Editar nÃ³"},ru:{addDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð² ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ðµ Ð¼ÐµÑÑÐ¾, ÑÑÐ¾Ð±Ñ Ð´Ð¾Ð±Ð°Ð²Ð¸ÑÑ Ð½Ð¾Ð²ÑÐ¹ ÑÐ·ÐµÐ».",addEdge:"ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ ÑÐµÐ±ÑÐ¾",addNode:"ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ ÑÐ·ÐµÐ»",back:"ÐÐ°Ð·Ð°Ð´",close:"ÐÐ°ÐºÑÑÐ²Ð°ÑÑ",createEdgeError:"ÐÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑ ÑÐµÐ±ÑÐ° Ð² ÐºÐ»Ð°ÑÑÐµÑ.",del:"Ð£Ð´Ð°Ð»Ð¸ÑÑ Ð²ÑÐ±ÑÐ°Ð½Ð½Ð¾Ðµ",deleteClusterError:"ÐÐ»Ð°ÑÑÐµÑÑ Ð½Ðµ Ð¼Ð¾Ð³ÑÑ Ð±ÑÑÑ ÑÐ´Ð°Ð»ÐµÐ½Ñ",edgeDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð½Ð° ÑÐ·ÐµÐ» Ð¸ Ð¿ÑÐ¾ÑÑÐ½Ð¸ÑÐµ ÑÐµÐ±ÑÐ¾ Ðº Ð´ÑÑÐ³Ð¾Ð¼Ñ ÑÐ·Ð»Ñ, ÑÑÐ¾Ð±Ñ ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑ Ð¸Ñ.",edit:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ",editClusterError:"ÐÐ»Ð°ÑÑÐµÑÑ Ð½ÐµÐ´Ð¾ÑÑÑÐ¿Ð½Ñ Ð´Ð»Ñ ÑÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°Ð½Ð¸Ñ.",editEdge:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ ÑÐµÐ±ÑÐ¾",editEdgeDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð½Ð° ÐºÐ¾Ð½ÑÑÐ¾Ð»ÑÐ½ÑÐµ ÑÐ¾ÑÐºÐ¸ Ð¸ Ð¿ÐµÑÐµÑÐ°ÑÐ¸ÑÐµ Ð¸Ñ Ð² ÑÐ·ÐµÐ», ÑÑÐ¾Ð±Ñ Ð¿Ð¾Ð´ÐºÐ»ÑÑÐ¸ÑÑÑÑ Ðº Ð½ÐµÐ¼Ñ.",editNode:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ ÑÐ·ÐµÐ»"},uk:{addDescription:"KÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° Ð²ÑÐ»ÑÐ½Ðµ Ð¼ÑÑÑÐµ, ÑÐ¾Ð± Ð´Ð¾Ð´Ð°ÑÐ¸ Ð½Ð¾Ð²Ð¸Ð¹ Ð²ÑÐ·Ð¾Ð».",addEdge:"ÐÐ¾Ð´Ð°ÑÐ¸ ÐºÑÐ°Ð¹",addNode:"ÐÐ¾Ð´Ð°ÑÐ¸ Ð²ÑÐ·Ð¾Ð»",back:"ÐÐ°Ð·Ð°Ð´",close:"ÐÐ°ÐºÑÐ¸ÑÐ¸",createEdgeError:"ÐÐµ Ð¼Ð¾Ð¶Ð»Ð¸Ð²Ð¾ Ð¾Ð±'ÑÐ´Ð½Ð°ÑÐ¸ ÐºÑÐ°Ñ Ð² Ð³ÑÑÐ¿Ñ.",del:"ÐÐ¸Ð´Ð°Ð»Ð¸ÑÐ¸ Ð¾Ð±ÑÐ°Ð½Ðµ",deleteClusterError:"ÐÑÑÐ¿Ð¸ Ð½Ðµ Ð¼Ð¾Ð¶ÑÑÑ Ð±ÑÑÐ¸ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ñ.",edgeDescription:"ÐÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° Ð²ÑÐ·Ð¾Ð» Ñ Ð¿ÐµÑÐµÑÑÐ³Ð½ÑÑÑ ÐºÑÐ°Ð¹ Ð´Ð¾ ÑÐ½ÑÐ¾Ð³Ð¾ Ð²ÑÐ·Ð»Ð°, ÑÐ¾Ð± ÑÑ Ð·'ÑÐ´Ð½Ð°ÑÐ¸.",edit:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸",editClusterError:"ÐÑÑÐ¿Ð¸ Ð½ÐµÐ´Ð¾ÑÑÑÐ¿Ð½Ñ Ð´Ð»Ñ ÑÐµÐ´Ð°Ð³ÑÐ²Ð°Ð½Ð½Ñ.",editEdge:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸ ÐºÑÐ°Ð¹",editEdgeDescription:"ÐÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑÐ¾Ð»ÑÐ½Ñ ÑÐ¾ÑÐºÐ¸ Ñ Ð¿ÐµÑÐµÑÑÐ³Ð½ÑÑÑ ÑÑ Ñ Ð²ÑÐ·Ð¾Ð», ÑÐ¾Ð± Ð¿ÑÐ´ÐºÐ»ÑÑÐ¸ÑÐ¸ÑÑ Ð´Ð¾ Ð½ÑÐ¾Ð³Ð¾.",editNode:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸ Ð²ÑÐ·Ð¾Ð»"}}),gv=function(){function t(){ng(this,t),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return au(t,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,e=this.image.height;this.width=t,this.height=e;var i=Math.floor(e/2),o=Math.floor(e/4),n=Math.floor(e/8),r=Math.floor(e/16),s=Math.floor(t/2),a=Math.floor(t/4),g=Math.floor(t/8),l=Math.floor(t/16);this.canvas.width=3*a,this.canvas.height=i,this.coordinates=[[0,0,s,i],[s,0,a,o],[s,o,g,n],[5*g,o,l,r]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),e=this.coordinates[0];t.drawImage(this.image,e[0],e[1],e[2],e[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var o=this.coordinates[i-1],n=this.coordinates[i];t.drawImage(this.canvas,o[0],o[1],o[2],o[3],n[0],n[1],n[2],n[3])}}},{key:"drawImageAtPosition",value:function(t,e,i,o,n,r){if(this.initialized())if(e>2){e*=.5;for(var s=0;e>2&&s<this.NUM_ITERATIONS;)e*=.5,s+=1;s>=this.NUM_ITERATIONS&&(s=this.NUM_ITERATIONS-1);var a=this.coordinates[s];t.drawImage(this.canvas,a[0],a[1],a[2],a[3],i,o,n,r)}else t.drawImage(this.image,i,o,n,r)}}]),t}(),lv=function(){function t(e){ng(this,t),this.images={},this.imageBroken={},this.callback=e}return au(t,[{key:"_tryloadBrokenUrl",value:function(t,e,i){void 0!==t&&void 0!==i&&(void 0!==e?(i.image.onerror=function(){console.error("Could not load brokenImage:",e)},i.image.src=e):console.warn("No broken url image defined"))}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,e){var i=this,o=this.images[t];if(o)return o;var n=new gv;return this.images[t]=n,n.image.onload=function(){i._fixImageCoordinates(n.image),n.init(),i._redrawWithImage(n)},n.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,e,n)},n.image.src=t,n}},{key:"_fixImageCoordinates",value:function(t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),t}(),hv={exports:{}},cv=a((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),uv=a,dv=it,Av=y,Iv=cv,Cv=Object.isExtensible,pv=uv((function(){Cv(1)}))||Iv?function(t){return!!dv(t)&&(!Iv||"ArrayBuffer"!==Av(t))&&(!Cv||Cv(t))}:Cv,fv=!a((function(){return Object.isExtensible(Object.preventExtensions({}))})),vv=Oi,mv=f,bv=Wi,yv=it,_v=qt,Tv=Qe.f,Ev=Hg,wv=Vg,kv=pv,Ov=fv,Sv=!1,Rv=ne("meta"),xv=0,Dv=function(t){Tv(t,Rv,{value:{objectID:"O"+xv++,weakData:{}}})},Mv=hv.exports={enable:function(){Mv.enable=function(){},Sv=!0;var t=Ev.f,e=mv([].splice),i={};i[Rv]=1,t(i).length&&(Ev.f=function(i){for(var o=t(i),n=0,r=o.length;n<r;n++)if(o[n]===Rv){e(o,n,1);break}return o},vv({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:wv.f}))},fastKey:function(t,e){if(!yv(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!_v(t,Rv)){if(!kv(t))return"F";if(!e)return"E";Dv(t)}return t[Rv].objectID},getWeakData:function(t,e){if(!_v(t,Rv)){if(!kv(t))return!0;if(!e)return!1;Dv(t)}return t[Rv].weakData},onFreeze:function(t){return Ov&&Sv&&kv(t)&&!_v(t,Rv)&&Dv(t),t}};bv[Rv]=!0;var Nv=hv.exports,Lv=Ke,Pv=N,$v=ii,Bv=St,Fv=Fs,zv=Fi,Hv=lt,Gv=ma,Uv=da,Vv=Ms,Wv=TypeError,jv=function(t,e){this.stopped=t,this.result=e},Yv=jv.prototype,Xv=function(t,e,i){var o,n,r,s,a,g,l,h=i&&i.that,c=!(!i||!i.AS_ENTRIES),u=!(!i||!i.IS_RECORD),d=!(!i||!i.IS_ITERATOR),A=!(!i||!i.INTERRUPTED),I=Lv(e,h),C=function(t){return o&&Vv(o,"normal",t),new jv(!0,t)},p=function(t){return c?($v(t),A?I(t[0],t[1],C):I(t[0],t[1])):A?I(t,C):I(t)};if(u)o=t.iterator;else if(d)o=t;else{if(!(n=Uv(t)))throw new Wv(Bv(t)+" is not iterable");if(Fv(n)){for(r=0,s=zv(t);s>r;r++)if((a=p(t[r]))&&Hv(Yv,a))return a;return new jv(!1)}o=Gv(t,n)}for(g=u?t.next:o.next;!(l=Pv(g,o)).done;){try{a=p(l.value)}catch(t){Vv(o,"throw",t)}if("object"==typeof a&&a&&Hv(Yv,a))return a}return new jv(!1)},Zv=lt,Kv=TypeError,Qv=function(t,e){if(Zv(e,t))return t;throw new Kv("Incorrect invocation")},Jv=Oi,qv=s,tm=Nv,em=a,im=Ci,om=Xv,nm=Qv,rm=S,sm=it,am=Y,gm=jr,lm=Qe.f,hm=_l.forEach,cm=x,um=Bn.set,dm=Bn.getterFor,Am=function(t,e,i){var o,n=-1!==t.indexOf("Map"),r=-1!==t.indexOf("Weak"),s=n?"set":"add",a=qv[t],g=a&&a.prototype,l={};if(cm&&rm(a)&&(r||g.forEach&&!em((function(){(new a).entries().next()})))){var h=(o=e((function(e,i){um(nm(e,h),{type:t,collection:new a}),am(i)||om(i,e[s],{that:e,AS_ENTRIES:n})}))).prototype,c=dm(t);hm(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"===t||"set"===t;!(t in g)||r&&"clear"===t||im(h,t,(function(i,o){var n=c(this).collection;if(!e&&r&&!sm(i))return"get"===t&&void 0;var s=n[t](0===i?0:i,o);return e?this:s}))})),r||lm(h,"size",{configurable:!0,get:function(){return c(this).collection.size}})}else o=i.getConstructor(e,t,n,s),tm.enable();return gm(o,t,!1,!0),l[t]=o,Jv({global:!0,forced:!0},l),r||i.setStrong(o,t,n),o},Im=kr,Cm=function(t,e,i){for(var o in e)i&&i.unsafe&&t[o]?t[o]=e[o]:Im(t,o,e[o],i);return t},pm=gt,fm=ol,vm=x,mm=de("species"),bm=Cr,ym=ol,_m=Cm,Tm=Ke,Em=Qv,wm=Y,km=Xv,Om=ms,Sm=bs,Rm=x,xm=Nv.fastKey,Dm=Bn.set,Mm=Bn.getterFor,Nm={getConstructor:function(t,e,i,o){var n=t((function(t,n){Em(t,r),Dm(t,{type:e,index:bm(null),first:void 0,last:void 0,size:0}),Rm||(t.size=0),wm(n)||km(n,t[o],{that:t,AS_ENTRIES:i})})),r=n.prototype,s=Mm(e),a=function(t,e,i){var o,n,r=s(t),a=g(t,e);return a?a.value=i:(r.last=a={index:n=xm(e,!0),key:e,value:i,previous:o=r.last,next:void 0,removed:!1},r.first||(r.first=a),o&&(o.next=a),Rm?r.size++:t.size++,"F"!==n&&(r.index[n]=a)),t},g=function(t,e){var i,o=s(t),n=xm(e);if("F"!==n)return o.index[n];for(i=o.first;i;i=i.next)if(i.key===e)return i};return _m(r,{clear:function(){for(var t=s(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,Rm?t.size=0:this.size=0},delete:function(t){var e=this,i=s(e),o=g(e,t);if(o){var n=o.next,r=o.previous;delete i.index[o.index],o.removed=!0,r&&(r.next=n),n&&(n.previous=r),i.first===o&&(i.first=n),i.last===o&&(i.last=r),Rm?i.size--:e.size--}return!!o},forEach:function(t){for(var e,i=s(this),o=Tm(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:i.first;)for(o(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!g(this,t)}}),_m(r,i?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),Rm&&ym(r,"size",{configurable:!0,get:function(){return s(this).size}}),n},setStrong:function(t,e,i){var o=e+" Iterator",n=Mm(e),r=Mm(o);Om(t,e,(function(t,e){Dm(this,{type:o,target:t,state:n(t),kind:e,last:void 0})}),(function(){for(var t=r(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?Sm("keys"===e?i.key:"values"===e?i.value:[i.key,i.value],!1):(t.target=void 0,Sm(void 0,!0))}),i?"entries":"values",!i,!0),function(t){var e=pm(t);vm&&e&&!e[mm]&&fm(e,mm,{configurable:!0,get:function(){return this}})}(e)}};Am("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Nm);var Lm=n(ot.Map),Pm=function(){function t(){ng(this,t),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},fo(this.options,this.defaultOptions)}return au(t,[{key:"setOptions",value:function(t){var e=["useDefaultGroups"];if(void 0!==t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&-1===pI(e).call(e,i)){var o=t[i];this.add(i,o)}}},{key:"clear",value:function(){this._groups=new Lm,this._groupNames=[]}},{key:"get",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._groups.get(t);if(void 0===i&&e)if(!1===this.options.useDefaultGroups&&this._groupNames.length>0){var o=this._groupIndex%this._groupNames.length;++this._groupIndex,(i={}).color=this._groups.get(this._groupNames[o]),this._groups.set(t,i)}else{var n=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,(i={}).color=this._defaultGroups[n],this._groups.set(t,i)}return i}},{key:"add",value:function(t,e){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,e),e}}]),t}();Oi({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});var $m=n(ot.Number.isNaN),Bm=s.isFinite,Fm=Number.isFinite||function(t){return"number"==typeof t&&Bm(t)};Oi({target:"Number",stat:!0},{isFinite:Fm});var zm=n(ot.Number.isFinite),Hm=_l.some;Oi({target:"Array",proto:!0,forced:!_d("some")},{some:function(t){return Hm(this,t,arguments.length>1?arguments[1]:void 0)}});var Gm=Mo("Array").some,Um=lt,Vm=Gm,Wm=Array.prototype,jm=n((function(t){var e=t.some;return t===Wm||Um(Wm,t)&&e===Wm.some?Vm:e})),Ym=n(ot.Object.getOwnPropertySymbols),Xm={exports:{}},Zm=Oi,Km=a,Qm=q,Jm=R.f,qm=x;Zm({target:"Object",stat:!0,forced:!qm||Km((function(){Jm(1)})),sham:!qm},{getOwnPropertyDescriptor:function(t,e){return Jm(Qm(t),e)}});var tb=ot.Object,eb=Xm.exports=function(t,e){return tb.getOwnPropertyDescriptor(t,e)};tb.getOwnPropertyDescriptor.sham&&(eb.sham=!0);var ib=Xm.exports,ob=n(ib),nb=ad,rb=q,sb=R,ab=aa;Oi({target:"Object",stat:!0,sham:!x},{getOwnPropertyDescriptors:function(t){for(var e,i,o=rb(t),n=sb.f,r=nb(o),s={},a=0;r.length>a;)void 0!==(i=n(o,e=r[a++]))&&ab(s,e,i);return s}});var gb=n(ot.Object.getOwnPropertyDescriptors),lb={exports:{}},hb=Oi,cb=x,ub=Wn.f;hb({target:"Object",stat:!0,forced:Object.defineProperties!==ub,sham:!cb},{defineProperties:ub});var db=ot.Object,Ab=lb.exports=function(t,e){return db.defineProperties(t,e)};db.defineProperties.sham&&(Ab.sham=!0);var Ib=n(lb.exports),Cb=n(cg);function pb(t,e,i){return(e=ru(e))in t?ug(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var fb=s,vb=a,mb=ln,bb=XA.trim,yb=zA,_b=f("".charAt),Tb=fb.parseFloat,Eb=fb.Symbol,wb=Eb&&Eb.iterator,kb=1/Tb(yb+"-0")!=-1/0||wb&&!vb((function(){Tb(Object(wb))}))?function(t){var e=bb(mb(t)),i=Tb(e);return 0===i&&"-"===_b(e,0)?-0:i}:Tb;Oi({global:!0,forced:parseFloat!==kb},{parseFloat:kb});var Ob=n(ot.parseFloat),Sb=Oi,Rb=a,xb=Vg.f;Sb({target:"Object",stat:!0,forced:Rb((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:xb});var Db=ot.Object,Mb=n((function(t){return Db.getOwnPropertyNames(t)}));function Nb(t,e){var i=["node","edge","label"],o=!0,n=df(e,"chosen");if("boolean"==typeof n)o=n;else if("object"===ou(n)){if(-1===pI(i).call(i,t))throw new Error("choosify: subOption '"+t+"' should be one of '"+i.join("', '")+"'");var r=df(e,["chosen",t]);"boolean"!=typeof r&&"function"!=typeof r||(o=r)}return o}function Lb(t,e,i){if(t.width<=0||t.height<=0)return!1;if(void 0!==i){var o={x:e.x-i.x,y:e.y-i.y};if(0!==i.angle){var n=-i.angle;e={x:Math.cos(n)*o.x-Math.sin(n)*o.y,y:Math.sin(n)*o.x+Math.cos(n)*o.y}}else e=o}var r=t.x+t.width,s=t.y+t.width;return t.left<e.x&&r>e.x&&t.top<e.y&&s>e.y}function Pb(t){return"string"==typeof t&&""!==t}function $b(t,e,i,o){var n=o.x,r=o.y;if("function"==typeof o.distanceToBorder){var s=o.distanceToBorder(t,e),a=Math.sin(e)*s,g=Math.cos(e)*s;g===s?(n+=s,r=o.y):a===s?(n=o.x,r-=s):(n+=g,r-=a)}else o.shape.width>o.shape.height?(n=o.x+.5*o.shape.width,r=o.y-i):(n=o.x+i,r=o.y-.5*o.shape.height);return{x:n,y:r}}var Bb=Mo("Array").values,Fb=sn,zb=qt,Hb=lt,Gb=Bb,Ub=Array.prototype,Vb={DOMTokenList:!0,NodeList:!0},Wb=n((function(t){var e=t.values;return t===Ub||Hb(Ub,t)&&e===Ub.values||zb(Vb,Fb(t))?Gb:e})),jb=function(){function t(e){ng(this,t),this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}return au(t,[{key:"_add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[t]&&(this.lines[t]={width:0,height:0,blocks:[]});var o=e;void 0!==e&&""!==e||(o=" ");var n=this.measureText(o,i),r=fo({},Wb(n));r.text=e,r.width=n.width,r.mod=i,void 0!==e&&""!==e||(r.width=0),this.lines[t].blocks.push(r),this.lines[t].width+=r.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return void 0===t?0:t.width}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e)}},{key:"newLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var e=this.lines[t],i=0;if(void 0!==e.blocks)for(var o=0;o<e.blocks.length;o++){var n=e.blocks[o];i<n.height&&(i=n.height)}e.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,e=0,i=0;i<this.lines.length;i++){var o=this.lines[i];o.width>t&&(t=o.width),e+=o.height}this.width=t,this.height=e}},{key:"removeEmptyBlocks",value:function(){for(var t=[],e=0;e<this.lines.length;e++){var i=this.lines[e];if(0!==i.blocks.length&&(e!==this.lines.length-1||0!==i.width)){var o={};fo(o,i),o.blocks=[];for(var n=void 0,r=[],s=0;s<i.blocks.length;s++){var a=i.blocks[s];0!==a.width?r.push(a):void 0===n&&(n=a)}0===r.length&&void 0!==n&&r.push(n),o.blocks=r,t.push(o)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),t}(),Yb={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},Xb=function(){function t(e){ng(this,t),this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return au(t,[{key:"mod",value:function(){return 0===this.modStack.length?"normal":this.modStack[0]}},{key:"modName",value:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":this.bold&&this.ital?"boldital":this.bold?"bold":this.ital?"ital":void 0}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){" "===t&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return!!/[ \t]/.test(t)&&(this.mono?this.add(t):this.spacing=!0,!0)}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,e){return!(this.mono||this[t]||!this.match(e)||(this.setTag(t),0))}},{key:"match",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=Yu(this.prepareRegExp(t),2),o=i[0],n=i[1],r=o.test(this.text.substr(this.position,n));return r&&e&&(this.position+=n-1),r}},{key:"parseEndTag",value:function(t,e,i){var o=this.mod()===t;return!(!(o="mono"===t?o&&this.mono:o&&!this.mono)||!this.match(e)||(void 0!==i?(this.position===this.text.length-1||this.match(i,!1))&&this.unsetTag(t):this.unsetTag(t),0))}},{key:"replace",value:function(t,e){return!!this.match(t)&&(this.add(e),this.position+=length-1,!0)}},{key:"prepareRegExp",value:function(t){var e,i;if(t instanceof RegExp)i=t,e=1;else{var o=Yb[t];i=void 0!==o?o:new RegExp(t),e=t.length}return[i,e]}}]),t}(),Zb=function(){function t(e,i,o,n){var r=this;ng(this,t),this.ctx=e,this.parent=i,this.selected=o,this.hover=n,this.lines=new jb((function(t,i){if(void 0===t)return 0;var s=r.parent.getFormattingValues(e,o,n,i),a=0;return""!==t&&(a=r.ctx.measureText(t).width),{width:a,values:s}}))}return au(t,[{key:"process",value:function(t){if(!Pb(t))return this.lines.finalize();var e=this.parent.fontOptions;t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");var i=String(t).split("\n"),o=i.length;if(e.multi)for(var n=0;n<o;n++){var r=this.splitBlocks(i[n],e.multi);if(void 0!==r)if(0!==r.length){if(e.maxWdt>0)for(var s=0;s<r.length;s++){var a=r[s].mod,g=r[s].text;this.splitStringIntoLines(g,a,!0)}else for(var l=0;l<r.length;l++){var h=r[l].mod,c=r[l].text;this.lines.append(c,h)}this.lines.newLine()}else this.lines.newLine("")}else if(e.maxWdt>0)for(var u=0;u<o;u++)this.splitStringIntoLines(i[u]);else for(var d=0;d<o;d++)this.lines.newLine(i[d]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var e="none";return"markdown"===t||"md"===t?e="markdown":!0!==t&&"html"!==t||(e="html"),e}},{key:"splitHtmlBlocks",value:function(t){for(var e=new Xb(t),i=function(t){return!!/&/.test(t)&&(e.replace(e.text,"&lt;","<")||e.replace(e.text,"&amp;","&")||e.add("&"),!0)};e.position<e.text.length;){var o=e.text.charAt(e.position);e.parseWS(o)||/</.test(o)&&(e.parseStartTag("bold","<b>")||e.parseStartTag("ital","<i>")||e.parseStartTag("mono","<code>")||e.parseEndTag("bold","</b>")||e.parseEndTag("ital","</i>")||e.parseEndTag("mono","</code>"))||i(o)||e.add(o),e.position++}return e.emitBlock(),e.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var e=this,i=new Xb(t),o=!0,n=function(t){return!!/\\/.test(t)&&(i.position<e.text.length+1&&(i.position++,t=e.text.charAt(i.position),/ \t/.test(t)?i.spacing=!0:(i.add(t),o=!1)),!0)};i.position<i.text.length;){var r=i.text.charAt(i.position);i.parseWS(r)||n(r)||(o||i.spacing)&&(i.parseStartTag("bold","*")||i.parseStartTag("ital","_")||i.parseStartTag("mono","`"))||i.parseEndTag("bold","*","afterBold")||i.parseEndTag("ital","_","afterItal")||i.parseEndTag("mono","`","afterMono")||(i.add(r),o=!1),i.position++}return i.emitBlock(),i.blocks}},{key:"splitBlocks",value:function(t,e){var i=this.decodeMarkupSystem(e);return"none"===i?[{text:t,mod:"normal"}]:"markdown"===i?this.splitMarkdownBlocks(t):"html"===i?this.splitHtmlBlocks(t):void 0}},{key:"overMaxWidth",value:function(t){var e=this.ctx.measureText(t).width;return this.lines.curWidth()+e>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var e="",i=0;i<t.length;){var o=e+(""===e?"":" ")+t[i];if(this.overMaxWidth(o))break;e=o,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var e=0;e<t.length&&!this.overMaxWidth(ed(t).call(t,0,e));)e++;return e}},{key:"splitStringIntoLines",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.parent.getFormattingValues(this.ctx,this.selected,this.hover,e);for(var o=(t=(t=t.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");o.length>0;){var n=this.getLongestFit(o);if(0===n){var r=o[0],s=this.getLongestFitWord(r);this.lines.newLine(ed(r).call(r,0,s),e),o[0]=ed(r).call(r,s)}else{var a=n;" "===o[n-1]?n--:" "===o[a]&&a++;var g=ed(o).call(o,0,n).join("");n==o.length&&i?this.lines.append(g,e):this.lines.newLine(g,e),o=ed(o).call(o,a)}}}}]),t}(),Kb=["bold","ital","boldital","mono"],Qb=function(){function t(e,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];ng(this,t),this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(i),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=o}return au(t,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),Pb(t.label)?this.labelDirty=!0:t.label=void 0,void 0!==t.font&&null!==t.font)if("string"==typeof t.font)this.baseSize=this.fontOptions.size;else if("object"===ou(t.font)){var e=t.font.size;void 0!==e&&(this.baseSize=e)}}},{key:"initFontOptions",value:function(e){var i=this;qp(Kb,(function(t){i.fontOptions[t]={}})),t.parseFontString(this.fontOptions,e)?this.fontOptions.vadjust=0:qp(e,(function(t,e){null!=t&&"object"!==ou(t)&&(i.fontOptions[e]=t)}))}},{key:"constrain",value:function(t){var e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=df(t,"widthConstraint");if("number"==typeof i)e.maxWdt=Number(i),e.minWdt=Number(i);else if("object"===ou(i)){var o=df(t,["widthConstraint","maximum"]);"number"==typeof o&&(e.maxWdt=Number(o));var n=df(t,["widthConstraint","minimum"]);"number"==typeof n&&(e.minWdt=Number(n))}var r=df(t,"heightConstraint");if("number"==typeof r)e.minHgt=Number(r);else if("object"===ou(r)){var s=df(t,["heightConstraint","minimum"]);"number"==typeof s&&(e.minHgt=Number(s));var a=df(t,["heightConstraint","valign"]);"string"==typeof a&&("top"!==a&&"bottom"!==a||(e.valign=a))}return e}},{key:"update",value:function(t,e){this.setOptions(t,!0),this.propagateFonts(e),Kp(this.fontOptions,this.constrain(e)),this.fontOptions.chooser=Nb("label",e)}},{key:"adjustSizes",value:function(t){var e=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,e){for(var i=0;i<e.length;++i)this.addFontToPile(t,e[i])}},{key:"addFontToPile",value:function(t,e){if(void 0!==e&&void 0!==e.font&&null!==e.font){var i=e.font;t.push(i)}}},{key:"getBasicOptions",value:function(e){for(var i={},o=0;o<e.length;++o){var n=e[o],r={};t.parseFontString(r,n)&&(n=r),qp(n,(function(t,e){void 0!==t&&(Object.prototype.hasOwnProperty.call(i,e)||(-1!==pI(Kb).call(Kb,e)?i[e]={}:i[e]=t))}))}return i}},{key:"getFontOption",value:function(e,i,o){for(var n,r=0;r<e.length;++r){var s=e[r];if(Object.prototype.hasOwnProperty.call(s,i)){if(null==(n=s[i]))continue;var a={};if(t.parseFontString(a,n)&&(n=a),Object.prototype.hasOwnProperty.call(n,o))return n[o]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,o))return this.fontOptions[o];throw new Error("Did not find value for multi-font for property: '"+o+"'")}},{key:"getFontOptions",value:function(t,e){for(var i={},o=["color","size","face","mod","vadjust"],n=0;n<o.length;++n){var r=o[n];i[r]=this.getFontOption(t,e,r)}return i}},{key:"propagateFonts",value:function(t){var e=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var o=function(){var t=Kb[n],o=e.fontOptions[t];qp(e.getFontOptions(i,t),(function(t,e){o[e]=t})),o.size=Number(o.size),o.vadjust=Number(o.vadjust)},n=0;n<Kb.length;++n)o()}},{key:"draw",value:function(t,e,i,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var s=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&s<this.elementOptions.scaling.label.drawThreshold-1||(s>=this.elementOptions.scaling.label.maxVisible&&(s=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,o,n,e,i,r),this._drawBackground(t),this._drawText(t,e,this.size.yLine,r,s))}}},{key:"_drawBackground",value:function(t){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){t.fillStyle=this.fontOptions.background;var e=this.getSize();t.fillRect(e.left,e.top,e.width,e.height)}}},{key:"_drawText",value:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle",n=arguments.length>4?arguments[4]:void 0,r=Yu(this._setAlignment(t,e,i,o),2);e=r[0],i=r[1],t.textAlign="left",e-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(i-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(i+=(this.size.height-this.size.labelHeight)/2));for(var s=0;s<this.lineCount;s++){var a=this.lines[s];if(a&&a.blocks){var g=0;this.isEdgeLabel||"center"===this.fontOptions.align?g+=(this.size.width-a.width)/2:"right"===this.fontOptions.align&&(g+=this.size.width-a.width);for(var l=0;l<a.blocks.length;l++){var h=a.blocks[l];t.font=h.font;var c=Yu(this._getColor(h.color,n,h.strokeColor),2),u=c[0],d=c[1];h.strokeWidth>0&&(t.lineWidth=h.strokeWidth,t.strokeStyle=d,t.lineJoin="round"),t.fillStyle=u,h.strokeWidth>0&&t.strokeText(h.text,e+g,i+h.vadjust),t.fillText(h.text,e+g,i+h.vadjust),g+=h.width}i+=a.height}}}},{key:"_setAlignment",value:function(t,e,i,o){return this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf?(e=0,i=0,"top"===this.fontOptions.align?(t.textBaseline="alphabetic",i-=4):"bottom"===this.fontOptions.align?(t.textBaseline="hanging",i+=4):t.textBaseline="middle"):t.textBaseline=o,[e,i]}},{key:"_getColor",value:function(t,e,i){var o=t||"#000000",n=i||"#ffffff";if(e<=this.elementOptions.scaling.label.drawThreshold){var r=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-e)));o=ef(o,r),n=ef(n,r)}return[o,n]}},{key:"getTextSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._processLabel(t,e,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){var i=.5*-this.size.width;switch(this.fontOptions.align){case"middle":t=i,e=.5*-this.size.height;break;case"top":t=i,e=-(this.size.height+2);break;case"bottom":t=i,e=2}}return{left:t,top:e,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(t,e,i),this.size.left=o-.5*this.size.width,this.size.top=n-.5*this.size.height,this.size.yLine=n+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===r&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,e,i,o){var n=function(t,e,i){return"normal"===e?"mod"===i?"":t[i]:void 0!==t[e][i]?t[e][i]:t[i]},r={color:n(this.fontOptions,o,"color"),size:n(this.fontOptions,o,"size"),face:n(this.fontOptions,o,"face"),mod:n(this.fontOptions,o,"mod"),vadjust:n(this.fontOptions,o,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(e||i)&&("normal"===o&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?r.mod="bold":"function"==typeof this.fontOptions.chooser&&this.fontOptions.chooser(r,this.elementOptions.id,e,i));var s="";return void 0!==r.mod&&""!==r.mod&&(s+=r.mod+" "),s+=r.size+"px "+r.face,t.font=s.replace(/"/g,""),r.font=t.font,r.height=r.size,r}},{key:"differentState",value:function(t,e){return t!==this.selectedState||e!==this.hoverState}},{key:"_processLabelText",value:function(t,e,i,o){return new Zb(t,this,e,i).process(o)}},{key:"_processLabel",value:function(t,e,i){if(!1!==this.labelDirty||this.differentState(e,i)){var o=this._processLabelText(t,e,i,this.elementOptions.label);this.fontOptions.minWdt>0&&o.width<this.fontOptions.minWdt&&(o.width=this.fontOptions.minWdt),this.size.labelHeight=o.height,this.fontOptions.minHgt>0&&o.height<this.fontOptions.minHgt&&(o.height=this.fontOptions.minHgt),this.lines=o.lines,this.lineCount=o.lines.length,this.size.width=o.width,this.size.height=o.height,this.selectedState=e,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,e){if(!e||"string"!=typeof e)return!1;var i=e.split(" ");return t.size=+i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),t}(),Jb=oa,qb=St,ty=TypeError,ey=Oi,iy=d,oy=Ro,ny=function(t){if(Jb(t))return t;throw new ty(qb(t)+" is not a constructor")},ry=ii,sy=it,ay=Cr,gy=a,ly=gt("Reflect","construct"),hy=Object.prototype,cy=[].push,uy=gy((function(){function t(){}return!(ly((function(){}),[],t)instanceof t)})),dy=!gy((function(){ly((function(){}))})),Ay=uy||dy;ey({target:"Reflect",stat:!0,forced:Ay,sham:Ay},{construct:function(t,e){ny(t),ry(e);var i=arguments.length<3?t:ny(arguments[2]);if(dy&&!uy)return ly(t,e,i);if(t===i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var o=[null];return iy(cy,o,e),new(iy(oy,t,o))}var n=i.prototype,r=ay(sy(n)?n:hy),s=iy(t,r,e);return sy(s)?s:r}});var Iy=n(ot.Reflect.construct),Cy=n(vI);Oi({target:"Object",stat:!0},{setPrototypeOf:ss});var py=n(ot.Object.setPrototypeOf),fy=n(Bo);function vy(t,e){var i;return vy=py?fy(i=py).call(i):function(t,e){return t.__proto__=e,t},vy(t,e)}function my(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Cy(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),ug(t,"prototype",{writable:!1}),e&&vy(t,e)}function by(t,e){if(e&&("object"===ou(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}var yy=n(DA);function _y(t){var e;return _y=py?fy(e=yy).call(e):function(t){return t.__proto__||yy(t)},_y(t)}var Ty=function(){function t(e,i,o){ng(this,t),this.body=i,this.labelModule=o,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return au(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&("object"==ou(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,e){var i=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}},{key:"enableShadow",value:function(t,e){e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,e){if(!1!==e.borderDashes)if(void 0!==t.setLineDash){var i=e.borderDashes;!0===i&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,e){!1!==e.borderDashes&&(void 0!==t.setLineDash?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1))}},{key:"needsRefresh",value:function(t,e){return!0===this.refreshNeeded?(this.refreshNeeded=!1,!0):void 0===this.width||this.labelModule.differentState(t,e)}},{key:"initContextForDraw",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=e.borderColor,t.fillStyle=e.color}},{key:"performStroke",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,e),t.stroke(),this.disableBorderDashes(t,e)),t.restore()}},{key:"performFill",value:function(t,e){t.save(),t.fillStyle=e.color,this.enableShadow(t,e),KI(t).call(t),this.disableShadow(t,e),t.restore(),this.performStroke(t,e)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,e,i,o,n){void 0!==i&&this.resize(i,o,n),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,e,i,o,n){this._updateBoundingBox(t,e,i,o,n)}},{key:"getDimensionsFromLabel",value:function(t,e,i){this.textSize=this.labelModule.getTextSize(t,e,i);var o=this.textSize.width,n=this.textSize.height;return 0===o&&(o=14,n=14),{width:o,height:n}}}]),t}();var Ey=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){var r;return ng(this,i),(r=e.call(this,t,o,n))._setMargins(n),r}return au(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var o=this.getDimensionsFromLabel(t,e,i);this.width=o.width+this.margin.right+this.margin.left,this.height=o.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,r),Ho(t,this.left,this.top,this.width,this.height,r.borderRadius),this.performFill(t,r),this.updateBoundingBox(e,i,t,o,n),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,o,n)}},{key:"updateBoundingBox",value:function(t,e,i,o,n){this._updateBoundingBox(t,e,i,o,n);var r=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(r)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var i=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}}]),i}(Ty);var wy=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){var r;return ng(this,i),(r=e.call(this,t,o,n)).labelOffset=0,r.selected=!1,r}return au(i,[{key:"setOptions",value:function(t,e,i){this.options=t,void 0===e&&void 0===i||this.setImages(e,i)}},{key:"setImages",value:function(t,e){e&&this.selected?(this.imageObj=e,this.imageObjAlt=t):(this.imageObj=t,this.imageObjAlt=e)}},{key:"switchImages",value:function(t){var e=t&&!this.selected||!t&&this.selected;if(this.selected=t,void 0!==this.imageObjAlt&&e){var i=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=i}}},{key:"_getImagePadding",value:function(){var t={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var e=this.options.imagePadding;"object"==ou(e)?(t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left):(t.top=e,t.right=e,t.bottom=e,t.left=e)}return t}},{key:"_resizeImage",value:function(){var t,e;if(!1===this.options.shapeProperties.useImageSize){var i=1,o=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?i=this.imageObj.width/this.imageObj.height:o=this.imageObj.height/this.imageObj.width),t=2*this.options.size*i,e=2*this.options.size*o}else{var n=this._getImagePadding();t=this.imageObj.width+n.left+n.right,e=this.imageObj.height+n.top+n.bottom}this.width=t,this.height=e,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(t,e,i,o){this.initContextForDraw(t,o),zo(t,e,i,o.size),this.performFill(t,o)}},{key:"_drawImageAtPosition",value:function(t,e){if(0!=this.imageObj.width){t.globalAlpha=void 0!==e.opacity?e.opacity:1,this.enableShadow(t,e);var i=1;!0===this.options.shapeProperties.interpolation&&(i=this.imageObj.width/this.width/this.body.view.scale);var o=this._getImagePadding(),n=this.left+o.left,r=this.top+o.top,s=this.width-o.left-o.right,a=this.height-o.top-o.bottom;this.imageObj.drawImageAtPosition(t,i,n,r,s,a),this.disableShadow(t,e)}}},{key:"_drawImageLabel",value:function(t,e,i,o,n){var r=0;if(void 0!==this.height){r=.5*this.height;var s=this.labelModule.getTextSize(t,o,n);s.lineCount>=1&&(r+=s.height/2)}var a=i+r;this.options.label&&(this.labelOffset=r),this.labelModule.draw(t,e,a,o,n,"hanging")}}]),i}(Ty);var ky=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){var r;return ng(this,i),(r=e.call(this,t,o,n))._setMargins(n),r}return au(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var o=this.getDimensionsFromLabel(t,e,i),n=Math.max(o.width+this.margin.right+this.margin.left,o.height+this.margin.top+this.margin.bottom);this.options.size=n/2,this.width=n,this.height=n,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,r),this.updateBoundingBox(e,i),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,i,o,n)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),.5*this.width}}]),i}(wy);var Oy=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n,r,s){var a;return ng(this,i),(a=e.call(this,t,o,n)).setImages(r,s),a}return au(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var o=2*this.options.size;return this.width=o,this.height=o,void(this.radius=.5*this.width)}this.needsRefresh(e,i)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,o,n,r){this.switchImages(o),this.resize();var s=e,a=i;"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=i,s+=this.width/2,a+=this.height/2):(this.left=e-this.width/2,this.top=i-this.height/2),this._drawRawCircle(t,s,a,r),t.save(),t.clip(),this._drawImageAtPosition(t,r),t.restore(),this._drawImageLabel(t,s,a,o,n),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){"top-left"===this.options.shapeProperties.coordinateOrigin?(this.boundingBox.top=e,this.boundingBox.left=t,this.boundingBox.right=t+2*this.options.size,this.boundingBox.bottom=e+2*this.options.size):(this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),.5*this.width}}]),i}(wy);var Sy=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};if(this.needsRefresh(e,i)){var n,r;this.labelModule.getTextSize(t,e,i);var s=2*o.size;this.width=null!==(n=this.customSizeWidth)&&void 0!==n?n:s,this.height=null!==(r=this.customSizeHeight)&&void 0!==r?r:s,this.radius=.5*this.width}}},{key:"_drawShape",value:function(t,e,i,o,n,r,s,a){var g,l=this;return this.resize(t,r,s,a),this.left=o-this.width/2,this.top=n-this.height/2,this.initContextForDraw(t,a),(g=e,Object.prototype.hasOwnProperty.call(Wo,g)?Wo[g]:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];CanvasRenderingContext2D.prototype[g].call(t,i)})(t,o,n,a.size),this.performFill(t,a),void 0!==this.options.icon&&void 0!==this.options.icon.code&&(t.font=(r?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.options.icon.code,o,n)),{drawExternalLabel:function(){if(void 0!==l.options.label){l.labelModule.calculateLabelSize(t,r,s,o,n,"hanging");var e=n+.5*l.height+.5*l.labelModule.size.height;l.labelModule.draw(t,o,e,r,s,"hanging")}l.updateBoundingBox(o,n)}}}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),i}(Ty);function Ry(t,e){var i=pd(t);if(Ym){var o=Ym(t);e&&(o=FA(o).call(o,(function(e){return ob(t,e).enumerable}))),i.push.apply(i,o)}return i}function xy(t){for(var e=1;e<arguments.length;e++){var i,o,n=null!=arguments[e]?arguments[e]:{};e%2?Md(i=Ry(Object(n),!0)).call(i,(function(e){pb(t,e,n[e])})):gb?Ib(t,gb(n)):Md(o=Ry(Object(n))).call(o,(function(e){Cb(t,e,ob(n,e))}))}return t}var Dy=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n,r){var s;return ng(this,i),(s=e.call(this,t,o,n,r)).ctxRenderer=r,s}return au(i,[{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n,r),this.left=e-this.width/2,this.top=i-this.height/2,t.save();var s=this.ctxRenderer({ctx:t,id:this.options.id,x:e,y:i,state:{selected:o,hover:n},style:xy({},r),label:this.options.label});if(null!=s.drawNode&&s.drawNode(),t.restore(),s.drawExternalLabel){var a=s.drawExternalLabel;s.drawExternalLabel=function(){t.save(),a(),t.restore()}}return s.nodeDimensions&&(this.customSizeWidth=s.nodeDimensions.width,this.customSizeHeight=s.nodeDimensions.height),s}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(Sy);var My=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){var r;return ng(this,i),(r=e.call(this,t,o,n))._setMargins(n),r}return au(i,[{key:"resize",value:function(t,e,i){if(this.needsRefresh(e,i)){var o=this.getDimensionsFromLabel(t,e,i).width+this.margin.right+this.margin.left;this.width=o,this.height=o,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,r),Uo(t,e-this.width/2,i-this.height/2,this.width,this.height),this.performFill(t,r),this.updateBoundingBox(e,i,t,o,n),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,o,n)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(Ty);var Ny=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"diamond",4,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(Sy);var Ly=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"circle",2,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),this.options.size}}]),i}(Sy);var Py=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var o=this.getDimensionsFromLabel(t,e,i);this.height=2*o.height,this.width=o.width+o.height,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n),this.left=e-.5*this.width,this.top=i-.5*this.height,this.initContextForDraw(t,r),Go(t,this.left,this.top,this.width,this.height),this.performFill(t,r),this.updateBoundingBox(e,i,t,o,n),this.labelModule.draw(t,e,i,o,n)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var i=.5*this.width,o=.5*this.height,n=Math.sin(e)*i,r=Math.cos(e)*o;return i*o/Math.sqrt(n*n+r*r)}}]),i}(Ty);var $y=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){var r;return ng(this,i),(r=e.call(this,t,o,n))._setMargins(n),r}return au(i,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,o,n,r){var s=this;return this.resize(t,o,n),this.options.icon.size=this.options.icon.size||50,this.left=e-this.width/2,this.top=i-this.height/2,this._icon(t,e,i,o,n,r),{drawExternalLabel:function(){void 0!==s.options.label&&s.labelModule.draw(t,s.left+s.iconSize.width/2+s.margin.left,i+s.height/2+5,o),s.updateBoundingBox(e,i)}}}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}},{key:"_icon",value:function(t,e,i,o,n,r){var s=Number(this.options.icon.size);void 0!==this.options.icon.code?(t.font=[null!=this.options.icon.weight?this.options.icon.weight:o?"bold":"",(null!=this.options.icon.weight&&o?5:0)+s+"px",this.options.icon.face].join(" "),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t,r),t.fillText(this.options.icon.code,e,i),this.disableShadow(t,r)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(Ty);var By=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n,r,s){var a;return ng(this,i),(a=e.call(this,t,o,n)).setImages(r,s),a}return au(i,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var o=2*this.options.size;return this.width=o,void(this.height=o)}this.needsRefresh(e,i)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,o,n,r){t.save(),this.switchImages(o),this.resize();var s=e,a=i;if("top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=i,s+=this.width/2,a+=this.height/2):(this.left=e-this.width/2,this.top=i-this.height/2),!0===this.options.shapeProperties.useBorderWithImage){var g=this.options.borderWidth,l=this.options.borderWidthSelected||2*this.options.borderWidth,h=(o?l:g)/this.body.view.scale;t.lineWidth=Math.min(this.width,h),t.beginPath();var c=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,u=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background;void 0!==r.opacity&&(c=ef(c,r.opacity),u=ef(u,r.opacity)),t.strokeStyle=c,t.fillStyle=u,t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth),KI(t).call(t),this.performStroke(t,r),t.closePath()}this._drawImageAtPosition(t,r),this._drawImageLabel(t,s,a,o,n),this.updateBoundingBox(e,i),t.restore()}},{key:"updateBoundingBox",value:function(t,e){this.resize(),"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=t,this.top=e):(this.left=t-this.width/2,this.top=e-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(wy);var Fy=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"square",2,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(Sy);var zy=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"hexagon",4,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(Sy);var Hy=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"star",4,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(Sy);var Gy=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){var r;return ng(this,i),(r=e.call(this,t,o,n))._setMargins(n),r}return au(i,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.textSize=this.labelModule.getTextSize(t,e,i),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n),this.left=e-this.width/2,this.top=i-this.height/2,this.enableShadow(t,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,o,n),this.disableShadow(t,r),this.updateBoundingBox(e,i,t,o,n)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(Ty);var Uy=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"triangle",3,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(Sy);var Vy=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"triangleDown",3,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),i}(Sy);function Wy(t,e){var i=pd(t);if(Ym){var o=Ym(t);e&&(o=FA(o).call(o,(function(e){return ob(t,e).enumerable}))),i.push.apply(i,o)}return i}function jy(t){for(var e=1;e<arguments.length;e++){var i,o,n=null!=arguments[e]?arguments[e]:{};e%2?Md(i=Wy(Object(n),!0)).call(i,(function(e){pb(t,e,n[e])})):gb?Ib(t,gb(n)):Md(o=Wy(Object(n))).call(o,(function(e){Cb(t,e,ob(n,e))}))}return t}var Yy=function(){function t(e,i,o,n,r,s){ng(this,t),this.options=hf(r),this.globalOptions=r,this.defaultOptions=s,this.body=i,this.edges=[],this.id=void 0,this.imagelist=o,this.grouplist=n,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new Qb(this.body,this.options,!1),this.setOptions(e)}return au(t,[{key:"attachEdge",value:function(t){var e;-1===pI(e=this.edges).call(e,t)&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var e,i,o=pI(e=this.edges).call(e,t);-1!=o&&lA(i=this.edges).call(i,o,1)}},{key:"setOptions",value:function(e){var i=this.options.shape;if(e){if(void 0!==e.color&&(this._localColor=e.color),void 0!==e.id&&(this.id=e.id),void 0===this.id)throw new Error("Node must have an id");t.checkMass(e,this.id),void 0!==e.x&&(null===e.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=aI(e.x),this.predefinedPosition=!0)),void 0!==e.y&&(null===e.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=aI(e.y),this.predefinedPosition=!0)),void 0!==e.size&&(this.baseSize=e.size),void 0!==e.value&&(e.value=Ob(e.value)),t.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);var o=[e,this.options,this.defaultOptions];return this.chooser=Nb("node",o),this._load_images(),this.updateLabelModule(e),void 0!==e.opacity&&t.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(i),void 0!==e.hidden||void 0!==e.physics}}},{key:"_load_images",value:function(){if(("circularImage"===this.options.shape||"image"===this.options.shape)&&void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0!==this.options.image){if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"==typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),void 0!==this.options.image.selected?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?!0===this.chooser?this.selected?(null!=this.options.borderWidthSelected?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):"function"==typeof this.chooser&&(this.chooser(t,this.options.id,this.selected,this.hover),!1===t.shadow&&(t.shadowColor===this.options.shadow.color&&t.shadowSize===this.options.shadow.size&&t.shadowX===this.options.shadow.x&&t.shadowY===this.options.shadow.y||(t.shadow=!0))):t.shadow=this.options.shadow.enabled,void 0!==this.options.opacity){var e=this.options.opacity;t.borderColor=ef(t.borderColor,e),t.color=ef(t.color,e),t.shadowColor=ef(t.shadowColor,e)}return t}},{key:"updateLabelModule",value:function(e){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),t.updateGroupOptions(this.options,jy(jy({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);var i=this.grouplist.get(this.options.group,!1),o=[e,this.options,i,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,o),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new Ey(this.options,this.body,this.labelModule);break;case"circle":this.shape=new ky(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new Oy(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new Dy(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new My(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new Ny(this.options,this.body,this.labelModule);break;case"dot":this.shape=new Ly(this.options,this.body,this.labelModule);break;case"ellipse":default:this.shape=new Py(this.options,this.body,this.labelModule);break;case"icon":this.shape=new $y(this.options,this.body,this.labelModule);break;case"image":this.shape=new By(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new Fy(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new zy(this.options,this.body,this.labelModule);break;case"star":this.shape=new Hy(this.options,this.body,this.labelModule);break;case"text":this.shape=new Gy(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new Uy(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new Vy(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,e){return this.shape.distanceToBorder(t,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var o=this.options.scaling.customScalingFunction(t,e,i,this.options.value),n=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var r=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+o*r}this.options.size=this.options.scaling.min+o*n}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var e=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,e)||{}}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var e=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,e)}},{key:"getItemsOnPoint",value:function(t){var e=[];return this.labelModule.visible()&&Lb(this.labelModule.getSize(),t)&&e.push({nodeId:this.id,labelId:0}),Lb(this.shape.boundingBox,t)&&e.push({nodeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"checkOpacity",value:function(t){return 0<=t&&t<=1}},{key:"checkCoordinateOrigin",value:function(t){return void 0===t||"center"===t||"top-left"===t}},{key:"updateGroupOptions",value:function(e,i,o){var n;if(void 0!==o){var r=e.group;if(void 0!==i&&void 0!==i.group&&r!==i.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"==typeof r||"string"==typeof r&&""!=r){var s=o.get(r);void 0!==s.opacity&&void 0===i.opacity&&(t.checkOpacity(s.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+s.opacity),s.opacity=void 0));var a=FA(n=Mb(i)).call(n,(function(t){return null!=i[t]}));a.push("font"),Zp(a,e,s),e.color=nf(e.color)}}}},{key:"parseOptions",value:function(e,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0;if(Zp(["color","fixed","shadow"],e,i,o),t.checkMass(i),void 0!==e.opacity&&(t.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),void 0!==i.opacity&&(t.checkOpacity(i.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+i.opacity),i.opacity=void 0)),i.shapeProperties&&!t.checkCoordinateOrigin(i.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+i.shapeProperties.coordinateOrigin),cf(e,i,"shadow",n),void 0!==i.color&&null!==i.color){var s=nf(i.color);Yp(e.color,s)}else!0===o&&null===i.color&&(e.color=hf(n.color));void 0!==i.fixed&&null!==i.fixed&&("boolean"==typeof i.fixed?(e.fixed.x=i.fixed,e.fixed.y=i.fixed):(void 0!==i.fixed.x&&"boolean"==typeof i.fixed.x&&(e.fixed.x=i.fixed.x),void 0!==i.fixed.y&&"boolean"==typeof i.fixed.y&&(e.fixed.y=i.fixed.y))),!0===o&&null===i.font&&(e.font=hf(n.font)),t.updateGroupOptions(e,i,r),void 0!==i.scaling&&cf(e.scaling,i.scaling,"label",n.scaling)}},{key:"checkMass",value:function(t,e){if(void 0!==t.mass&&t.mass<=0){var i="";void 0!==e&&(i=" in node id: "+e),console.error("%cNegative or zero mass disallowed"+i+", setting mass to 1.",kf),t.mass=1}}}]),t}();function Xy(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var Zy=function(){function t(e,i,o,n){var r,s=this;if(ng(this,t),this.body=e,this.images=i,this.groups=o,this.layoutEngine=n,this.body.functions.createNode=Fo(r=this.create).call(r,this),this.nodesListeners={add:function(t,e){s.add(e.items)},update:function(t,e){s.update(e.items,e.data,e.oldData)},remove:function(t,e){s.remove(e.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,o){if(e===t)return.5;var n=1/(e-t);return Math.max(0,(o-t)*n)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=hf(this.defaultOptions),this.bindEventListeners()}return au(t,[{key:"bindEventListeners",value:function(){var t,e,i=this;this.body.emitter.on("refreshNodes",Fo(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",Fo(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",(function(){qp(i.nodesListeners,(function(t,e){i.body.data.nodes&&i.body.data.nodes.off(e,t)})),delete i.body.functions.createNode,delete i.nodesListeners.add,delete i.nodesListeners.update,delete i.nodesListeners.remove,delete i.nodesListeners}))}},{key:"setOptions",value:function(t){if(void 0!==t){if(Yy.parseOptions(this.options,t),void 0!==t.opacity&&($m(t.opacity)||!zm(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),void 0!==t.shape)for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&this.body.nodes[e].updateShape();if(void 0!==t.font||void 0!==t.widthConstraint||void 0!==t.heightConstraint)for(var i=0,o=pd(this.body.nodes);i<o.length;i++){var n=o[i];this.body.nodes[n].updateLabelModule(),this.body.nodes[n].needsRefresh()}if(void 0!==t.size)for(var r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();void 0===t.hidden&&void 0===t.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.body.data.nodes;if(e.isDataViewLike("id",t))this.body.data.nodes=t;else if(gd(t))this.body.data.nodes=new e.DataSet,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new e.DataSet}if(o&&qp(this.nodesListeners,(function(t,e){o.off(e,t)})),this.body.nodes={},this.body.data.nodes){var n=this;qp(this.nodesListeners,(function(t,e){n.body.data.nodes.on(e,t)}));var r=this.body.data.nodes.getIds();this.add(r,!0)}!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=[],n=0;n<t.length;n++){e=t[n];var r=this.body.data.nodes.get(e),s=this.create(r);o.push(s),this.body.nodes[e]=s}this.layoutEngine.positionInitially(o),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,e,i){for(var o=this.body.nodes,n=!1,r=0;r<t.length;r++){var s=t[r],a=o[s],g=e[r];void 0!==a?a.setOptions(g)&&(n=!0):(n=!0,a=this.create(g),o[s]=a)}n||void 0===i||(n=jm(e).call(e,(function(t,e){var o=i[e];return o&&o.level!==t.level}))),!0===n?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e=this.body.nodes,i=0;i<t.length;i++)delete e[t[i]];this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){return new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yy)(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];qp(this.body.nodes,(function(i,o){var n=t.body.data.nodes.get(o);void 0!==n&&(!0===e&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(n))}))}},{key:"getPositions",value:function(t){var e={};if(void 0!==t){if(!0===gd(t)){for(var i=0;i<t.length;i++)if(void 0!==this.body.nodes[t[i]]){var o=this.body.nodes[t[i]];e[t[i]]={x:Math.round(o.x),y:Math.round(o.y)}}}else if(void 0!==this.body.nodes[t]){var n=this.body.nodes[t];e[t]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(var r=0;r<this.body.nodeIndices.length;r++){var s=this.body.nodes[this.body.nodeIndices[r]];e[this.body.nodeIndices[r]]={x:Math.round(s.x),y:Math.round(s.y)}}return e}},{key:"getPosition",value:function(t){if(null==t)throw new TypeError("No id was specified for getPosition method.");if(null==this.body.nodes[t])throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}},{key:"storePositions",value:function(){var t,e=[],i=this.body.data.nodes.getDataSet(),o=function(t,e){var i=void 0!==Zu&&og(t)||t["@@iterator"];if(!i){if(gd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Xy(t,e);var o=ed(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?$a(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Xy(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}(i.get());try{for(o.s();!(t=o.n()).done;){var n=t.value,r=n.id,s=this.body.nodes[r],a=Math.round(s.x),g=Math.round(s.y);n.x===a&&n.y===g||e.push({id:r,x:a,y:g})}}catch(t){o.e(t)}finally{o.f()}i.update(e)}},{key:"getBoundingBox",value:function(t){if(void 0!==this.body.nodes[t])return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,e){var i=[];if(void 0!==this.body.nodes[t])for(var o=this.body.nodes[t],n={},r=0;r<o.edges.length;r++){var s=o.edges[r];"to"!==e&&s.toId==o.id?void 0===n[s.fromId]&&(i.push(s.fromId),n[s.fromId]=!0):"from"!==e&&s.fromId==o.id&&void 0===n[s.toId]&&(i.push(s.toId),n[s.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var i=this.body.nodes[t],o=0;o<i.edges.length;o++)e.push(i.edges[o].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}},{key:"moveNode",value:function(t,e,i){var o=this;void 0!==this.body.nodes[t]?(this.body.nodes[t].x=Number(e),this.body.nodes[t].y=Number(i),HI((function(){o.body.emitter.emit("startSimulation")}),0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}]),t}(),Ky=qt,Qy=N,Jy=it,qy=ii,t_=R,e_=Er;Oi({target:"Reflect",stat:!0},{get:function t(e,i){var o,n,r=arguments.length<3?e:arguments[2];return qy(e)===r?e[i]:(o=t_.f(e,i))?function(t){return void 0!==t&&(Ky(t,"value")||Ky(t,"writable"))}(o)?o.value:void 0===o.get?void 0:Qy(o.get,r):Jy(n=e_(e))?t(n,i,r):void 0}});var i_=n(ot.Reflect.get),o_=n(ib);function n_(){var t;return n_="undefined"!=typeof Reflect&&i_?fy(t=i_).call(t):function(t,e,i){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_y(t)););return t}(t,e);if(o){var n=o_(o,e);return n.get?n.get.call(arguments.length<3?t:i):n.value}},n_.apply(this,arguments)}var r_=Oi,s_=Math.hypot,a_=Math.abs,g_=Math.sqrt;r_({target:"Math",stat:!0,arity:2,forced:!!s_&&s_(1/0,NaN)!==1/0},{hypot:function(t,e){for(var i,o,n=0,r=0,s=arguments.length,a=0;r<s;)a<(i=a_(arguments[r++]))?(n=n*(o=a/i)*o+1,a=i):n+=i>0?(o=i/a)*o:i;return a===1/0?1/0:a*g_(n)}});var l_=n(ot.Math.hypot);function h_(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}var c_=function(){function t(){ng(this,t)}return au(t,null,[{key:"transform",value:function(t,e){gd(t)||(t=[t]);for(var i=e.point.x,o=e.point.y,n=e.angle,r=e.length,s=0;s<t.length;++s){var a=t[s],g=a.x*Math.cos(n)-a.y*Math.sin(n),l=a.x*Math.sin(n)+a.y*Math.cos(n);a.x=i+r*g,a.y=o+r*l}}},{key:"drawPath",value:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;++i)t.lineTo(e[i].x,e[i].y);t.closePath()}}]),t}(),u_=function(t){my(i,t);var e=h_(i);function i(){return ng(this,i),e.apply(this,arguments)}return au(i,null,[{key:"draw",value:function(t,e){if(e.image){t.save(),t.translate(e.point.x,e.point.y),t.rotate(Math.PI/2+e.angle);var i=null!=e.imageWidth?e.imageWidth:e.image.width,o=null!=e.imageHeight?e.imageHeight:e.image.height;e.image.drawImageAtPosition(t,1,-i/2,0,i,o),t.restore()}return!1}}]),i}(c_),d_=function(t){my(i,t);var e=h_(i);function i(){return ng(this,i),e.apply(this,arguments)}return au(i,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return c_.transform(i,e),c_.drawPath(t,i),!0}}]),i}(c_),A_=function(){function t(){ng(this,t)}return au(t,null,[{key:"draw",value:function(t,e){var i=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return c_.transform(i,e),c_.drawPath(t,i),!0}}]),t}(),I_=function(){function t(){ng(this,t)}return au(t,null,[{key:"draw",value:function(t,e){var i={x:-.4,y:0};c_.transform(i,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var o=Math.PI,n=e.angle-o/2,r=e.angle+o/2;return t.beginPath(),t.arc(i.x,i.y,.4*e.length,n,r,!1),t.stroke(),!0}}]),t}(),C_=function(){function t(){ng(this,t)}return au(t,null,[{key:"draw",value:function(t,e){var i={x:-.3,y:0};c_.transform(i,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var o=Math.PI,n=e.angle+o/2,r=e.angle+3*o/2;return t.beginPath(),t.arc(i.x,i.y,.4*e.length,n,r,!1),t.stroke(),!0}}]),t}(),p_=function(){function t(){ng(this,t)}return au(t,null,[{key:"draw",value:function(t,e){var i=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return c_.transform(i,e),c_.drawPath(t,i),!0}}]),t}(),f_=function(){function t(){ng(this,t)}return au(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return c_.transform(i,e),c_.drawPath(t,i),!0}}]),t}(),v_=function(){function t(){ng(this,t)}return au(t,null,[{key:"draw",value:function(t,e){var i={x:-.4,y:0};return c_.transform(i,e),zo(t,i.x,i.y,.4*e.length),!0}}]),t}(),m_=function(){function t(){ng(this,t)}return au(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return c_.transform(i,e),c_.drawPath(t,i),!0}}]),t}(),b_=function(){function t(){ng(this,t)}return au(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return c_.transform(i,e),c_.drawPath(t,i),!0}}]),t}(),y_=function(){function t(){ng(this,t)}return au(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return c_.transform(i,e),c_.drawPath(t,i),!0}}]),t}(),__=function(){function t(){ng(this,t)}return au(t,null,[{key:"draw",value:function(t,e){var i=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return c_.transform(i,e),c_.drawPath(t,i),!0}}]),t}(),T_=function(){function t(){ng(this,t)}return au(t,null,[{key:"draw",value:function(t,e){var i;switch(e.type&&(i=e.type.toLowerCase()),i){case"image":return u_.draw(t,e);case"circle":return v_.draw(t,e);case"box":return b_.draw(t,e);case"crow":return A_.draw(t,e);case"curve":return I_.draw(t,e);case"diamond":return y_.draw(t,e);case"inv_curve":return C_.draw(t,e);case"triangle":return p_.draw(t,e);case"inv_triangle":return f_.draw(t,e);case"bar":return m_.draw(t,e);case"vee":return __.draw(t,e);default:return d_.draw(t,e)}}}]),t}();function E_(t,e){var i=pd(t);if(Ym){var o=Ym(t);e&&(o=FA(o).call(o,(function(e){return ob(t,e).enumerable}))),i.push.apply(i,o)}return i}function w_(t){for(var e=1;e<arguments.length;e++){var i,o,n=null!=arguments[e]?arguments[e]:{};e%2?Md(i=E_(Object(n),!0)).call(i,(function(e){pb(t,e,n[e])})):gb?Ib(t,gb(n)):Md(o=E_(Object(n))).call(o,(function(e){Cb(t,e,ob(n,e))}))}return t}var k_=function(){function t(e,i,o){ng(this,t),this._body=i,this._labelModule=o,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}return au(t,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,e,i,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,e),t.lineWidth=e.width,!1!==e.dashes?this._drawDashedLine(t,e,n):this._drawLine(t,e,n)}},{key:"_drawLine",value:function(t,e,i,o,n){if(this.from!=this.to)this._line(t,e,i,o,n);else{var r=Yu(this._getCircleData(t),3),s=r[0],a=r[1],g=r[2];this._circle(t,e,s,a,g)}}},{key:"_drawDashedLine",value:function(t,e,i,o,n){t.lineCap="round";var r=gd(e.dashes)?e.dashes:[5,5];if(void 0!==t.setLineDash){if(t.save(),t.setLineDash(r),t.lineDashOffset=0,this.from!=this.to)this._line(t,e,i);else{var s=Yu(this._getCircleData(t),3),a=s[0],g=s[1],l=s[2];this._circle(t,e,a,g,l)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)Vo(t,this.from.x,this.from.y,this.to.x,this.to.y,r);else{var h=Yu(this._getCircleData(t),3),c=h[0],u=h[1],d=h[2];this._circle(t,e,c,u,d)}this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}}},{key:"findBorderPosition",value:function(t,e,i){return this.from!=this.to?this._findBorderPosition(t,e,i):this._findBorderPositionCircle(t,e,i)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var e,i=Yu(ed(e=this._getCircleData(t)).call(e,0,2),2),o=i[0],n=i[1];return{from:this._findBorderPositionCircle(this.from,t,{x:o,y:n,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:o,y:n,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var e=this.options.selfReference.size;void 0!==t&&void 0===this.from.shape.width&&this.from.shape.resize(t);var i=$b(t,this.options.selfReference.angle,e,this.from);return[i.x,i.y,e]}},{key:"_pointOnCircle",value:function(t,e,i,o){var n=2*o*Math.PI;return{x:t+i*Math.cos(n),y:e-i*Math.sin(n)}}},{key:"_findBorderPositionCircle",value:function(t,e,i){var o,n=i.x,r=i.y,s=i.low,a=i.high,g=i.direction,l=this.options.selfReference.size,h=.5*(s+a),c=0;!0===this.options.arrowStrikethrough&&(-1===g?c=this.options.endPointOffset.from:1===g&&(c=this.options.endPointOffset.to));var u=0;do{h=.5*(s+a),o=this._pointOnCircle(n,r,l,h);var d=Math.atan2(t.y-o.y,t.x-o.x),A=t.distanceToBorder(e,d)+c-Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2));if(Math.abs(A)<.05)break;A>0?g>0?s=h:a=h:g>0?a=h:s=h,++u}while(s<=a&&u<10);return w_(w_({},o),{},{t:h})}},{key:"getLineWidth",value:function(t,e){return!0===t?Math.max(this.selectionWidth,.3/this._body.view.scale):!0===e?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,e){if(!1!==e.inheritsColor){if("both"===e.inheritsColor&&this.from.id!==this.to.id){var i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),o=this.from.options.color.highlight.border,n=this.to.options.color.highlight.border;return!1===this.from.selected&&!1===this.to.selected?(o=ef(this.from.options.color.border,e.opacity),n=ef(this.to.options.color.border,e.opacity)):!0===this.from.selected&&!1===this.to.selected?n=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(o=this.from.options.color.border),i.addColorStop(0,o),i.addColorStop(1,n),i}return"to"===e.inheritsColor?ef(this.to.options.color.border,e.opacity):ef(this.from.options.color.border,e.opacity)}return ef(e.color,e.opacity)}},{key:"_circle",value:function(t,e,i,o,n){this.enableShadow(t,e);var r=0,s=2*Math.PI;if(!this.options.selfReference.renderBehindTheNode){var a=this.options.selfReference.angle,g=this.options.selfReference.angle+Math.PI,l=this._findBorderPositionCircle(this.from,t,{x:i,y:o,low:a,high:g,direction:-1}),h=this._findBorderPositionCircle(this.from,t,{x:i,y:o,low:a,high:g,direction:1});r=Math.atan2(l.y-o,l.x-i),s=Math.atan2(h.y-o,h.x-i)}t.beginPath(),t.arc(i,o,n,r,s,!1),t.stroke(),this.disableShadow(t,e)}},{key:"getDistanceToEdge",value:function(t,e,i,o,n,r){if(this.from!=this.to)return this._getDistanceToEdge(t,e,i,o,n,r);var s=Yu(this._getCircleData(void 0),3),a=s[0],g=s[1],l=s[2],h=a-n,c=g-r;return Math.abs(Math.sqrt(h*h+c*c)-l)}},{key:"_getDistanceToLine",value:function(t,e,i,o,n,r){var s=i-t,a=o-e,g=((n-t)*s+(r-e)*a)/(s*s+a*a);g>1?g=1:g<0&&(g=0);var l=t+g*s-n,h=e+g*a-r;return Math.sqrt(l*l+h*h)}},{key:"getArrowData",value:function(t,e,i,o,n,r){var s,a,g,l,h,c,u,d=r.width;"from"===e?(g=this.from,l=this.to,h=r.fromArrowScale<0,c=Math.abs(r.fromArrowScale),u=r.fromArrowType):"to"===e?(g=this.to,l=this.from,h=r.toArrowScale<0,c=Math.abs(r.toArrowScale),u=r.toArrowType):(g=this.to,l=this.from,h=r.middleArrowScale<0,c=Math.abs(r.middleArrowScale),u=r.middleArrowType);var A=15*c+3*d;if(g!=l){var I=A/l_(g.x-l.x,g.y-l.y);if("middle"!==e)if(!0===this.options.smooth.enabled){var C=this._findBorderPosition(g,t,{via:i}),p=this.getPoint(C.t+I*("from"===e?1:-1),i);s=Math.atan2(C.y-p.y,C.x-p.x),a=C}else s=Math.atan2(g.y-l.y,g.x-l.x),a=this._findBorderPosition(g,t);else{var f=(h?-I:I)/2,v=this.getPoint(.5+f,i),m=this.getPoint(.5-f,i);s=Math.atan2(v.y-m.y,v.x-m.x),a=this.getPoint(.5,i)}}else{var b=Yu(this._getCircleData(t),3),y=b[0],_=b[1],T=b[2];if("from"===e){var E=this.options.selfReference.angle,w=this.options.selfReference.angle+Math.PI,k=this._findBorderPositionCircle(this.from,t,{x:y,y:_,low:E,high:w,direction:-1});s=-2*k.t*Math.PI+1.5*Math.PI+.1*Math.PI,a=k}else if("to"===e){var O=this.options.selfReference.angle,S=this.options.selfReference.angle+Math.PI,R=this._findBorderPositionCircle(this.from,t,{x:y,y:_,low:O,high:S,direction:1});s=-2*R.t*Math.PI+1.5*Math.PI-1.1*Math.PI,a=R}else{var x=this.options.selfReference.angle/(2*Math.PI);a=this._pointOnCircle(y,_,T,x),s=-2*x*Math.PI+1.5*Math.PI+.1*Math.PI}}return{point:a,core:{x:a.x-.9*A*Math.cos(s),y:a.y-.9*A*Math.sin(s)},angle:s,length:A,type:u}}},{key:"drawArrowHead",value:function(t,e,i,o,n){t.strokeStyle=this.getColor(t,e),t.fillStyle=t.strokeStyle,t.lineWidth=e.width,T_.draw(t,n)&&(this.enableShadow(t,e),KI(t).call(t),this.disableShadow(t,e))}},{key:"enableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,e){if(!1!==e.background){var i={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=e.backgroundColor,t.lineWidth=e.backgroundSize,this.setStrokeDashed(t,e.backgroundDashes),t.stroke(),t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.dashes=i.dashes,this.setStrokeDashed(t,e.dashes)}}},{key:"setStrokeDashed",value:function(t,e){if(!1!==e)if(void 0!==t.setLineDash){var i=gd(e)?e:[5,5];t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else void 0!==t.setLineDash?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),t}();function O_(t,e){var i=pd(t);if(Ym){var o=Ym(t);e&&(o=FA(o).call(o,(function(e){return ob(t,e).enumerable}))),i.push.apply(i,o)}return i}function S_(t){for(var e=1;e<arguments.length;e++){var i,o,n=null!=arguments[e]?arguments[e]:{};e%2?Md(i=O_(Object(n),!0)).call(i,(function(e){pb(t,e,n[e])})):gb?Ib(t,gb(n)):Md(o=O_(Object(n))).call(o,(function(e){Cb(t,e,ob(n,e))}))}return t}var R_=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"_findBorderPositionBezier",value:function(t,e){var i,o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),r=!1,s=1,a=0,g=this.to,l=this.options.endPointOffset?this.options.endPointOffset.to:0;t.id===this.from.id&&(g=this.from,r=!0,l=this.options.endPointOffset?this.options.endPointOffset.from:0),!1===this.options.arrowStrikethrough&&(l=0);var h=0;do{o=.5*(a+s),i=this.getPoint(o,n);var c=Math.atan2(g.y-i.y,g.x-i.x),u=g.distanceToBorder(e,c)+l-Math.sqrt(Math.pow(i.x-g.x,2)+Math.pow(i.y-g.y,2));if(Math.abs(u)<.2)break;u<0?!1===r?a=o:s=o:!1===r?s=o:a=o,++h}while(a<=s&&h<10);return S_(S_({},i),{},{t:o})}},{key:"_getDistanceToBezierEdge",value:function(t,e,i,o,n,r,s){var a,g,l,h,c,u=1e9,d=t,A=e;for(g=1;g<10;g++)l=.1*g,h=Math.pow(1-l,2)*t+2*l*(1-l)*s.x+Math.pow(l,2)*i,c=Math.pow(1-l,2)*e+2*l*(1-l)*s.y+Math.pow(l,2)*o,g>0&&(u=(a=this._getDistanceToLine(d,A,h,c,n,r))<u?a:u),d=h,A=c;return u}},{key:"_bezierCurve",value:function(t,e,i,o){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),null!=i&&null!=i.x?null!=o&&null!=o.x?t.bezierCurveTo(i.x,i.y,o.x,o.y,this.toPoint.x,this.toPoint.y):t.quadraticCurveTo(i.x,i.y,this.toPoint.x,this.toPoint.y):t.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(t,e),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),i}(k_);var x_=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){var r;return ng(this,i),(r=e.call(this,t,o,n)).via=r.via,r._boundFunction=function(){r.positionBezierNode()},r._body.emitter.on("_repositionBezierNodes",r._boundFunction),r}return au(i,[{key:"setOptions",value:function(t){n_(_y(i.prototype),"setOptions",this).call(this,t);var e=!1;this.options.physics!==t.physics&&(e=!0),this.options=t,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===e&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics||this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this._body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var t="edgeId:"+this.id,e=this._body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this._body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.via;if(this.from===this.to){var i=Yu(this._getCircleData(),3),o=i[0],n=i[1],r=i[2],s=2*Math.PI*(1-t);return{x:o+r*Math.sin(s),y:n+r-r*(1-Math.cos(s))}}return{x:Math.pow(1-t,2)*this.fromPoint.x+2*t*(1-t)*e.x+Math.pow(t,2)*this.toPoint.x,y:Math.pow(1-t,2)*this.fromPoint.y+2*t*(1-t)*e.y+Math.pow(t,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e,this.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,o,n,r){return this._getDistanceToBezierEdge(t,e,i,o,n,r,this.via)}}]),i}(R_);var D_=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var t,e,i=this.options.smooth.roundness,o=this.options.smooth.type,n=Math.abs(this.from.x-this.to.x),r=Math.abs(this.from.y-this.to.y);if("discrete"===o||"diagonalCross"===o){var s,a;s=a=n<=r?i*r:i*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(a=-a);var g=this.from.x+s,l=this.from.y+a;return"discrete"===o&&(n<=r?g=n<i*r?this.from.x:g:l=r<i*n?this.from.y:l),{x:g,y:l}}if("straightCross"===o){var h=(1-i)*n,c=(1-i)*r;return n<=r?(h=0,this.from.y<this.to.y&&(c=-c)):(this.from.x<this.to.x&&(h=-h),c=0),{x:this.to.x+h,y:this.to.y+c}}if("horizontal"===o){var u=(1-i)*n;return this.from.x<this.to.x&&(u=-u),{x:this.to.x+u,y:this.from.y}}if("vertical"===o){var d=(1-i)*r;return this.from.y<this.to.y&&(d=-d),{x:this.from.x,y:this.to.y+d}}if("curvedCW"===o){n=this.to.x-this.from.x,r=this.from.y-this.to.y;var A=Math.sqrt(n*n+r*r),I=Math.PI,C=(Math.atan2(r,n)+(.5*i+.5)*I)%(2*I);return{x:this.from.x+(.5*i+.5)*A*Math.sin(C),y:this.from.y+(.5*i+.5)*A*Math.cos(C)}}if("curvedCCW"===o){n=this.to.x-this.from.x,r=this.from.y-this.to.y;var p=Math.sqrt(n*n+r*r),f=Math.PI,v=(Math.atan2(r,n)+(.5*-i+.5)*f)%(2*f);return{x:this.from.x+(.5*i+.5)*p*Math.sin(v),y:this.from.y+(.5*i+.5)*p*Math.cos(v)}}t=e=n<=r?i*r:i*n,this.from.x>this.to.x&&(t=-t),this.from.y>=this.to.y&&(e=-e);var m=this.from.x+t,b=this.from.y+e;return n<=r?m=this.from.x<=this.to.x?this.to.x<m?this.to.x:m:this.to.x>m?this.to.x:m:b=this.from.y>=this.to.y?this.to.y>b?this.to.y:b:this.to.y<b?this.to.y:b,{x:m,y:b}}},{key:"_findBorderPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(t,e,i.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,o,n,r){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,e,i,o,n,r,s)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),i=t;return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*e.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*e.y+Math.pow(i,2)*this.toPoint.y}}}]),i}(R_);var M_=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"_getDistanceToBezierEdge2",value:function(t,e,i,o,n,r,s,a){for(var g=1e9,l=t,h=e,c=[0,0,0,0],u=1;u<10;u++){var d=.1*u;c[0]=Math.pow(1-d,3),c[1]=3*d*Math.pow(1-d,2),c[2]=3*Math.pow(d,2)*(1-d),c[3]=Math.pow(d,3);var A=c[0]*t+c[1]*s.x+c[2]*a.x+c[3]*i,I=c[0]*e+c[1]*s.y+c[2]*a.y+c[3]*o;if(u>0){var C=this._getDistanceToLine(l,h,A,I,n,r);g=C<g?C:g}l=A,h=I}return g}}]),i}(R_);var N_=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"_line",value:function(t,e,i){var o=i[0],n=i[1];this._bezierCurve(t,e,o,n)}},{key:"_getViaCoordinates",value:function(){var t,e,i,o,n=this.from.x-this.to.x,r=this.from.y-this.to.y,s=this.options.smooth.roundness;return(Math.abs(n)>Math.abs(r)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(e=this.from.y,o=this.to.y,t=this.from.x-s*n,i=this.to.x+s*n):(e=this.from.y-s*r,o=this.to.y+s*r,t=this.from.x,i=this.to.x),[{x:t,y:e},{x:i,y:o}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e)}},{key:"_getDistanceToEdge",value:function(t,e,i,o,n,r){var s=Yu(arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),2),a=s[0],g=s[1];return this._getDistanceToBezierEdge2(t,e,i,o,n,r,a,g)}},{key:"getPoint",value:function(t){var e=Yu(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),2),i=e[0],o=e[1],n=t,r=[Math.pow(1-n,3),3*n*Math.pow(1-n,2),3*Math.pow(n,2)*(1-n),Math.pow(n,3)];return{x:r[0]*this.fromPoint.x+r[1]*i.x+r[2]*o.x+r[3]*this.toPoint.x,y:r[0]*this.fromPoint.y+r[1]*i.y+r[2]*o.y+r[3]*this.toPoint.y}}}]),i}(M_);var L_=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){var i=this.to,o=this.from;t.id===this.from.id&&(i=this.from,o=this.to);var n=Math.atan2(i.y-o.y,i.x-o.x),r=i.x-o.x,s=i.y-o.y,a=Math.sqrt(r*r+s*s),g=(a-t.distanceToBorder(e,n))/a;return{x:(1-g)*o.x+g*i.x,y:(1-g)*o.y+g*i.y,t:0}}},{key:"_getDistanceToEdge",value:function(t,e,i,o,n,r){return this._getDistanceToLine(t,e,i,o,n,r)}}]),i}(k_),P_=function(){function t(e,i,o,n,r){if(ng(this,t),void 0===i)throw new Error("No body provided");this.options=hf(n),this.globalOptions=n,this.defaultOptions=r,this.body=i,this.imagelist=o,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new Qb(this.body,this.options,!0),this.setOptions(e)}return au(t,[{key:"setOptions",value:function(e){if(e){var i=void 0!==e.physics&&this.options.physics!==e.physics||void 0!==e.hidden&&(this.options.hidden||!1)!==(e.hidden||!1)||void 0!==e.from&&this.options.from!==e.from||void 0!==e.to&&this.options.to!==e.to;t.parseOptions(this.options,e,!0,this.globalOptions),void 0!==e.id&&(this.id=e.id),void 0!==e.from&&(this.fromId=e.from),void 0!==e.to&&(this.toId=e.to),void 0!==e.title&&(this.title=e.title),void 0!==e.value&&(e.value=Ob(e.value));var o=[e,this.options,this.defaultOptions];return this.chooser=Nb("edge",o),this.updateLabelModule(e),i=this.updateEdgeType()||i,this._setInteractionWidths(),this.connect(),i}}},{key:"getFormattingValues",value:function(){var t=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,e=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,i=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,o=this.options.color.inherit,n={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:e,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:o?void 0:this.options.color.color,inheritsColor:o,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(!0===this.chooser){if(this.selected){var r=this.options.selectionWidth;"function"==typeof r?n.width=r(n.width):"number"==typeof r&&(n.width+=r),n.width=Math.max(n.width,.3/this.body.view.scale),n.color=this.options.color.highlight,n.shadow=this.options.shadow.enabled}else if(this.hover){var s=this.options.hoverWidth;"function"==typeof s?n.width=s(n.width):"number"==typeof s&&(n.width+=s),n.width=Math.max(n.width,.3/this.body.view.scale),n.color=this.options.color.hover,n.shadow=this.options.shadow.enabled}}else"function"==typeof this.chooser&&(this.chooser(n,this.options.id,this.selected,this.hover),void 0!==n.color&&(n.inheritsColor=!1),!1===n.shadow&&(n.shadowColor===this.options.shadow.color&&n.shadowSize===this.options.shadow.size&&n.shadowX===this.options.shadow.x&&n.shadowY===this.options.shadow.y||(n.shadow=!0)));else n.shadow=this.options.shadow.enabled,n.width=Math.max(n.width,.3/this.body.view.scale);return n}},{key:"updateLabelModule",value:function(t){var e=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,e),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,e=!1,i=!0;return void 0!==this.edgeType&&((this.edgeType instanceof x_&&!0===t.enabled&&"dynamic"===t.type||this.edgeType instanceof N_&&!0===t.enabled&&"cubicBezier"===t.type||this.edgeType instanceof D_&&!0===t.enabled&&"dynamic"!==t.type&&"cubicBezier"!==t.type||this.edgeType instanceof L_&&!1===t.type.enabled)&&(i=!1),!0===i&&(e=this.cleanup())),!0===i?!0===t.enabled?"dynamic"===t.type?(e=!0,this.edgeType=new x_(this.options,this.body,this.labelModule)):"cubicBezier"===t.type?this.edgeType=new N_(this.options,this.body,this.labelModule):this.edgeType=new D_(this.options,this.body,this.labelModule):this.edgeType=new L_(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var o=this.options.scaling.customScalingFunction(t,e,i,this.options.value),n=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var r=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+o*r}this.options.width=this.options.scaling.min+o*n}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var i=this.edgeType.getViaNode();this.edgeType.drawLine(t,e,this.selected,this.hover,i),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var i=this.edgeType.getViaNode(),o={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,e.fromArrow&&(o.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.fromPoint=o.from.core),e.fromArrowSrc&&(o.from.image=this.imagelist.load(e.fromArrowSrc)),e.fromArrowImageWidth&&(o.from.imageWidth=e.fromArrowImageWidth),e.fromArrowImageHeight&&(o.from.imageHeight=e.fromArrowImageHeight)),e.toArrow&&(o.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.toPoint=o.to.core),e.toArrowSrc&&(o.to.image=this.imagelist.load(e.toArrowSrc)),e.toArrowImageWidth&&(o.to.imageWidth=e.toArrowImageWidth),e.toArrowImageHeight&&(o.to.imageHeight=e.toArrowImageHeight)),e.middleArrow&&(o.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,e),e.middleArrowSrc&&(o.middle.image=this.imagelist.load(e.middleArrowSrc)),e.middleArrowImageWidth&&(o.middle.imageWidth=e.middleArrowImageWidth),e.middleArrowImageHeight&&(o.middle.imageHeight=e.middleArrowImageHeight)),e.fromArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,o.from),e.middleArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,o.middle),e.toArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,o.to)}}},{key:"drawLabel",value:function(t,e){if(void 0!==this.options.label){var i,o=this.from,n=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover),o.id!=n.id){this.labelModule.pointToSelf=!1,i=this.edgeType.getPoint(.5,e),t.save();var r=this._getRotation(t);0!=r.angle&&(t.translate(r.x,r.y),t.rotate(r.angle)),this.labelModule.draw(t,i.x,i.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var s=$b(t,this.options.selfReference.angle,this.options.selfReference.size,o);i=this._pointOnCircle(s.x,s.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,i.x,i.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var e=[];if(this.labelModule.visible()){var i=this._getRotation();Lb(this.labelModule.getSize(),t,i)&&e.push({edgeId:this.id,labelId:0})}var o={left:t.x,top:t.y};return this.isOverlappingWith(o)&&e.push({edgeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){if(this.connected){var e=this.from.x,i=this.from.y,o=this.to.x,n=this.to.y,r=t.left,s=t.top;return this.edgeType.getDistanceToEdge(e,i,o,n,r,s)<10}return!1}},{key:"_getRotation",value:function(t){var e=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,e);void 0!==t&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var o={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return o;if("horizontal"===this.options.font.align)return o;var n=this.from.y-this.to.y,r=this.from.x-this.to.x,s=Math.atan2(n,r);return(s<-1&&r<0||s>0&&r<0)&&(s+=Math.PI),o.angle=s,o}},{key:"_pointOnCircle",value:function(t,e,i,o){return{x:t+i*Math.cos(o),y:e-i*Math.sin(o)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(Xp(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],t,e,i),void 0!==e.endPointOffset&&void 0!==e.endPointOffset.from&&(zm(e.endPointOffset.from)?t.endPointOffset.from=e.endPointOffset.from:(t.endPointOffset.from=void 0!==o.endPointOffset.from?o.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),void 0!==e.endPointOffset&&void 0!==e.endPointOffset.to&&(zm(e.endPointOffset.to)?t.endPointOffset.to=e.endPointOffset.to:(t.endPointOffset.to=void 0!==o.endPointOffset.to?o.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),Pb(e.label)?t.label=e.label:Pb(t.label)||(t.label=void 0),cf(t,e,"smooth",o),cf(t,e,"shadow",o),cf(t,e,"background",o),void 0!==e.dashes&&null!==e.dashes?t.dashes=e.dashes:!0===i&&null===e.dashes&&(t.dashes=mI(o.dashes)),void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(t.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(t.scaling.max=e.scaling.max),cf(t.scaling,e.scaling,"label",o.scaling)):!0===i&&null===e.scaling&&(t.scaling=mI(o.scaling)),void 0!==e.arrows&&null!==e.arrows)if("string"==typeof e.arrows){var r=e.arrows.toLowerCase();t.arrows.to.enabled=-1!=pI(r).call(r,"to"),t.arrows.middle.enabled=-1!=pI(r).call(r,"middle"),t.arrows.from.enabled=-1!=pI(r).call(r,"from")}else{if("object"!==ou(e.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+_I(e.arrows));cf(t.arrows,e.arrows,"to",o.arrows),cf(t.arrows,e.arrows,"middle",o.arrows),cf(t.arrows,e.arrows,"from",o.arrows)}else!0===i&&null===e.arrows&&(t.arrows=mI(o.arrows));if(void 0!==e.color&&null!==e.color){var s=Vp(e.color)?{color:e.color,highlight:e.color,hover:e.color,inherit:!1,opacity:1}:e.color,a=t.color;if(n)Kp(a,o.color,!1,i);else for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&delete a[g];if(Vp(a))a.color=a,a.highlight=a,a.hover=a,a.inherit=!1,void 0===s.opacity&&(a.opacity=1);else{var l=!1;void 0!==s.color&&(a.color=s.color,l=!0),void 0!==s.highlight&&(a.highlight=s.highlight,l=!0),void 0!==s.hover&&(a.hover=s.hover,l=!0),void 0!==s.inherit&&(a.inherit=s.inherit),void 0!==s.opacity&&(a.opacity=Math.min(1,Math.max(0,s.opacity))),!0===l?a.inherit=!1:void 0===a.inherit&&(a.inherit="from")}}else!0===i&&null===e.color&&(t.color=hf(o.color));!0===i&&null===e.font&&(t.font=hf(o.font)),Object.prototype.hasOwnProperty.call(e,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=e.selfReferenceSize)}}]),t}(),$_=function(){function t(e,i,o){var n,r=this;ng(this,t),this.body=e,this.images=i,this.groups=o,this.body.functions.createEdge=Fo(n=this.create).call(n,this),this.edgesListeners={add:function(t,e){r.add(e.items)},update:function(t,e){r.update(e.items)},remove:function(t,e){r.remove(e.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,o){if(e===t)return.5;var n=1/(e-t);return Math.max(0,(o-t)*n)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},Kp(this.options,this.defaultOptions),this.bindEventListeners()}return au(t,[{key:"bindEventListeners",value:function(){var t,e,i=this;this.body.emitter.on("_forceDisableDynamicCurves",(function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"dynamic"===t&&(t="continuous");var o=!1;for(var n in i.body.edges)if(Object.prototype.hasOwnProperty.call(i.body.edges,n)){var r=i.body.edges[n],s=i.body.data.edges.get(n);if(null!=s){var a=s.smooth;void 0!==a&&!0===a.enabled&&"dynamic"===a.type&&(void 0===t?r.setOptions({smooth:!1}):r.setOptions({smooth:{type:t}}),o=!0)}}!0===e&&!0===o&&i.body.emitter.emit("_dataChanged")})),this.body.emitter.on("_dataUpdated",(function(){i.reconnectEdges()})),this.body.emitter.on("refreshEdges",Fo(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",Fo(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",(function(){qp(i.edgesListeners,(function(t,e){i.body.data.edges&&i.body.data.edges.off(e,t)})),delete i.body.functions.createEdge,delete i.edgesListeners.add,delete i.edgesListeners.update,delete i.edgesListeners.remove,delete i.edgesListeners}))}},{key:"setOptions",value:function(t){if(void 0!==t){P_.parseOptions(this.options,t,!0,this.defaultOptions,!0);var e=!1;if(void 0!==t.smooth)for(var i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&(e=this.body.edges[i].updateEdgeType()||e);if(void 0!==t.font)for(var o in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,o)&&this.body.edges[o].updateLabelModule();void 0===t.hidden&&void 0===t.physics&&!0!==e||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var i=this,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.data.edges;if(e.isDataViewLike("id",t))this.body.data.edges=t;else if(gd(t))this.body.data.edges=new e.DataSet,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new e.DataSet}if(n&&qp(this.edgesListeners,(function(t,e){n.off(e,t)})),this.body.edges={},this.body.data.edges){qp(this.edgesListeners,(function(t,e){i.body.data.edges.on(e,t)}));var r=this.body.data.edges.getIds();this.add(r,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===o&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.edges,o=this.body.data.edges,n=0;n<t.length;n++){var r=t[n],s=i[r];s&&s.disconnect();var a=o.get(r,{showInternalIds:!0});i[r]=this.create(a)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var e=this.body.edges,i=this.body.data.edges,o=!1,n=0;n<t.length;n++){var r=t[n],s=i.get(r),a=e[r];void 0!==a?(a.disconnect(),o=a.setOptions(s)||o,a.connect()):(this.body.edges[r]=this.create(s),o=!0)}!0===o?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!==t.length){var i=this.body.edges;qp(t,(function(t){var e=i[t];void 0!==e&&e.remove()})),e&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;qp(this.body.edges,(function(e,i){var o=t.body.data.edges.get(i);void 0!==o&&e.setOptions(o)}))}},{key:"create",value:function(t){return new P_(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,e=this.body.nodes,i=this.body.edges;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].edges=[]);for(t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var o=i[t];o.from=null,o.to=null,o.connect()}}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.edges[t]){var i=this.body.edges[t];void 0!==i.fromId&&e.push(i.fromId),void 0!==i.toId&&e.push(i.toId)}return e}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,e=[];qp(this.body.edges,(function(i,o){var n=t.body.nodes[i.toId],r=t.body.nodes[i.fromId];void 0!==n&&!0===n.isCluster||void 0!==r&&!0===r.isCluster||void 0!==n&&void 0!==r||e.push(o)})),this.remove(e,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(null!=t){var e=this.body.edges,i=[];Md(t).call(t,(function(t,o){void 0===e[o]&&i.push(o)})),this.add(i,!0)}}}]),t}(),B_=function(){function t(e,i,o){ng(this,t),this.body=e,this.physicsBody=i,this.barnesHutTree,this.setOptions(o),this._rng=Pp("BARNES HUT SOLVER")}return au(t,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var t,e=this.body.nodes,i=this.physicsBody.physicsNodeIndices,o=i.length,n=this._formBarnesHutTree(e,i);this.barnesHutTree=n;for(var r=0;r<o;r++)(t=e[i[r]]).options.mass>0&&this._getForceContributions(n.root,t)}}},{key:"_getForceContributions",value:function(t,e){this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)}},{key:"_getForceContribution",value:function(t,e){if(t.childrenCount>0){var i=t.centerOfMass.x-e.x,o=t.centerOfMass.y-e.y,n=Math.sqrt(i*i+o*o);n*t.calcSize>this.thetaInversed?this._calculateForces(n,i,o,e,t):4===t.childrenCount?this._getForceContributions(t,e):t.children.data.id!=e.id&&this._calculateForces(n,i,o,e,t)}}},{key:"_calculateForces",value:function(t,e,i,o,n){0===t&&(e=t=.1),this.overlapAvoidanceFactor<1&&o.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*o.shape.radius,t-o.shape.radius));var r=this.options.gravitationalConstant*n.mass*o.options.mass/Math.pow(t,3),s=e*r,a=i*r;this.physicsBody.forces[o.id].x+=s,this.physicsBody.forces[o.id].y+=a}},{key:"_formBarnesHutTree",value:function(t,e){for(var i,o=e.length,n=t[e[0]].x,r=t[e[0]].y,s=t[e[0]].x,a=t[e[0]].y,g=1;g<o;g++){var l=t[e[g]],h=l.x,c=l.y;l.options.mass>0&&(h<n&&(n=h),h>s&&(s=h),c<r&&(r=c),c>a&&(a=c))}var u=Math.abs(s-n)-Math.abs(a-r);u>0?(r-=.5*u,a+=.5*u):(n+=.5*u,s-=.5*u);var d=Math.max(1e-5,Math.abs(s-n)),A=.5*d,I=.5*(n+s),C=.5*(r+a),p={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:I-A,maxX:I+A,minY:C-A,maxY:C+A},size:d,calcSize:1/d,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(p.root);for(var f=0;f<o;f++)(i=t[e[f]]).options.mass>0&&this._placeInTree(p.root,i);return p}},{key:"_updateBranchMass",value:function(t,e){var i=t.centerOfMass,o=t.mass+e.options.mass,n=1/o;i.x=i.x*t.mass+e.x*e.options.mass,i.x*=n,i.y=i.y*t.mass+e.y*e.options.mass,i.y*=n,t.mass=o;var r=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<r?r:t.maxWidth}},{key:"_placeInTree",value:function(t,e,i){1==i&&void 0!==i||this._updateBranchMass(t,e);var o,n=t.children.NW.range;o=n.maxX>e.x?n.maxY>e.y?"NW":"SW":n.maxY>e.y?"NE":"SE",this._placeInRegion(t,e,o)}},{key:"_placeInRegion",value:function(t,e,i){var o=t.children[i];switch(o.childrenCount){case 0:o.children.data=e,o.childrenCount=1,this._updateBranchMass(o,e);break;case 1:o.children.data.x===e.x&&o.children.data.y===e.y?(e.x+=this._rng(),e.y+=this._rng()):(this._splitBranch(o),this._placeInTree(o,e));break;case 4:this._placeInTree(o,e)}}},{key:"_splitBranch",value:function(t){var e=null;1===t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)}},{key:"_insertRegion",value:function(t,e){var i,o,n,r,s=.5*t.size;switch(e){case"NW":i=t.range.minX,o=t.range.minX+s,n=t.range.minY,r=t.range.minY+s;break;case"NE":i=t.range.minX+s,o=t.range.maxX,n=t.range.minY,r=t.range.minY+s;break;case"SW":i=t.range.minX,o=t.range.minX+s,n=t.range.minY+s,r=t.range.maxY;break;case"SE":i=t.range.minX+s,o=t.range.maxX,n=t.range.minY+s,r=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:o,minY:n,maxY:r},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}},{key:"_drawBranch",value:function(t,e,i){void 0===i&&(i="#FF0000"),4===t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=i,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}]),t}(),F_=function(){function t(e,i,o){ng(this,t),this._rng=Pp("REPULSION SOLVER"),this.body=e,this.physicsBody=i,this.setOptions(o)}return au(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,o,n,r,s,a,g=this.body.nodes,l=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,c=this.options.nodeDistance,u=-2/3/c,d=0;d<l.length-1;d++){s=g[l[d]];for(var A=d+1;A<l.length;A++)t=(a=g[l[A]]).x-s.x,e=a.y-s.y,0===(i=Math.sqrt(t*t+e*e))&&(t=i=.1*this._rng()),i<2*c&&(r=i<.5*c?1:u*i+1.3333333333333333,o=t*(r/=i),n=e*r,h[s.id].x-=o,h[s.id].y-=n,h[a.id].x+=o,h[a.id].y+=n)}}}]),t}(),z_=function(){function t(e,i,o){ng(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return au(t,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,e=this.physicsBody.physicsNodeIndices,i=this.physicsBody.forces,o=this.options.nodeDistance,n=0;n<e.length-1;n++)for(var r=t[e[n]],s=n+1;s<e.length;s++){var a=t[e[s]];if(r.level===a.level){var g=o+this.overlapAvoidanceFactor*((r.shape.radius||0)/2+(a.shape.radius||0)/2),l=a.x-r.x,h=a.y-r.y,c=Math.sqrt(l*l+h*h),u=void 0;u=c<g?-Math.pow(.05*c,2)+Math.pow(.05*g,2):0,0!==c&&(u/=c);var d=l*u,A=h*u;i[r.id].x-=d,i[r.id].y-=A,i[a.id].x+=d,i[a.id].y+=A}}}}]),t}(),H_=function(){function t(e,i,o){ng(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return au(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,o,n,r=this.physicsBody.physicsEdgeIndices,s=this.body.edges,a=0;a<r.length;a++)!0===(e=s[r[a]]).connected&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0!==e.edgeType.via?(t=void 0===e.options.length?this.options.springLength:e.options.length,i=e.to,o=e.edgeType.via,n=e.from,this._calculateSpringForce(i,o,.5*t),this._calculateSpringForce(o,n,.5*t)):(t=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)))}},{key:"_calculateSpringForce",value:function(t,e,i){var o=t.x-e.x,n=t.y-e.y,r=Math.max(Math.sqrt(o*o+n*n),.01),s=this.options.springConstant*(i-r)/r,a=o*s,g=n*s;void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x+=a,this.physicsBody.forces[t.id].y+=g),void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x-=a,this.physicsBody.forces[e.id].y-=g)}}]),t}(),G_=function(){function t(e,i,o){ng(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return au(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,o,n,r,s,a,g,l,h=this.body.edges,c=.5,u=this.physicsBody.physicsEdgeIndices,d=this.physicsBody.physicsNodeIndices,A=this.physicsBody.forces,I=0;I<d.length;I++){var C=d[I];A[C].springFx=0,A[C].springFy=0}for(var p=0;p<u.length;p++)!0===(e=h[u[p]]).connected&&(t=void 0===e.options.length?this.options.springLength:e.options.length,i=e.from.x-e.to.x,o=e.from.y-e.to.y,a=0===(a=Math.sqrt(i*i+o*o))?.01:a,n=i*(s=this.options.springConstant*(t-a)/a),r=o*s,e.to.level!=e.from.level?(void 0!==A[e.toId]&&(A[e.toId].springFx-=n,A[e.toId].springFy-=r),void 0!==A[e.fromId]&&(A[e.fromId].springFx+=n,A[e.fromId].springFy+=r)):(void 0!==A[e.toId]&&(A[e.toId].x-=c*n,A[e.toId].y-=c*r),void 0!==A[e.fromId]&&(A[e.fromId].x+=c*n,A[e.fromId].y+=c*r)));s=1;for(var f=0;f<d.length;f++){var v=d[f];g=Math.min(s,Math.max(-s,A[v].springFx)),l=Math.min(s,Math.max(-s,A[v].springFy)),A[v].x+=g,A[v].y+=l}for(var m=0,b=0,y=0;y<d.length;y++){var _=d[y];m+=A[_].x,b+=A[_].y}for(var T=m/d.length,E=b/d.length,w=0;w<d.length;w++){var k=d[w];A[k].x-=T,A[k].y-=E}}}]),t}(),U_=function(){function t(e,i,o){ng(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return au(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,o,n=this.body.nodes,r=this.physicsBody.physicsNodeIndices,s=this.physicsBody.forces,a=0;a<r.length;a++)t=-(o=n[r[a]]).x,e=-o.y,i=Math.sqrt(t*t+e*e),this._calculateForces(i,t,e,s,o)}},{key:"_calculateForces",value:function(t,e,i,o,n){var r=0===t?0:this.options.centralGravity/t;o[n.id].x=e*r,o[n.id].y=i*r}}]),t}();var V_=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){var r;return ng(this,i),(r=e.call(this,t,o,n))._rng=Pp("FORCE ATLAS 2 BASED REPULSION SOLVER"),r}return au(i,[{key:"_calculateForces",value:function(t,e,i,o,n){0===t&&(e=t=.1*this._rng()),this.overlapAvoidanceFactor<1&&o.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*o.shape.radius,t-o.shape.radius));var r=o.edges.length+1,s=this.options.gravitationalConstant*n.mass*o.options.mass*r/Math.pow(t,2),a=e*s,g=i*s;this.physicsBody.forces[o.id].x+=a,this.physicsBody.forces[o.id].y+=g}}]),i}(B_);var W_=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n){return ng(this,i),e.call(this,t,o,n)}return au(i,[{key:"_calculateForces",value:function(t,e,i,o,n){if(t>0){var r=n.edges.length+1,s=this.options.centralGravity*r*n.options.mass;o[n.id].x=e*s,o[n.id].y=i*s}}}]),i}(U_),j_=function(){function t(e){ng(this,t),this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},fo(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return au(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",(function(){t.initPhysics()})),this.body.emitter.on("_layoutFailed",(function(){t.layoutFailed=!0})),this.body.emitter.on("resetPhysics",(function(){t.stopSimulation(),t.ready=!1})),this.body.emitter.on("disablePhysics",(function(){t.physicsEnabled=!1,t.stopSimulation()})),this.body.emitter.on("restorePhysics",(function(){t.setOptions(t.options),!0===t.ready&&t.startSimulation()})),this.body.emitter.on("startSimulation",(function(){!0===t.ready&&t.startSimulation()})),this.body.emitter.on("stopSimulation",(function(){t.stopSimulation()})),this.body.emitter.on("destroy",(function(){t.stopSimulation(!1),t.body.emitter.off()})),this.body.emitter.on("_dataChanged",(function(){t.updatePhysicsData()}))}},{key:"setOptions",value:function(t){if(void 0!==t)if(!1===t)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(!0===t)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,Zp(["stabilization"],this.options,t),cf(this.options,t,"stabilization"),void 0===t.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation());var e=this.options.wind;e&&(("number"!=typeof e.x||$m(e.x))&&(e.x=0),("number"!=typeof e.y||$m(e.y))&&(e.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;"forceAtlas2Based"===this.options.solver?(t=this.options.forceAtlas2Based,this.nodesSolver=new V_(this.body,this.physicsBody,t),this.edgesSolver=new H_(this.body,this.physicsBody,t),this.gravitySolver=new W_(this.body,this.physicsBody,t)):"repulsion"===this.options.solver?(t=this.options.repulsion,this.nodesSolver=new F_(this.body,this.physicsBody,t),this.edgesSolver=new H_(this.body,this.physicsBody,t),this.gravitySolver=new U_(this.body,this.physicsBody,t)):"hierarchicalRepulsion"===this.options.solver?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new z_(this.body,this.physicsBody,t),this.edgesSolver=new G_(this.body,this.physicsBody,t),this.gravitySolver=new U_(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new B_(this.body,this.physicsBody,t),this.edgesSolver=new H_(this.body,this.physicsBody,t),this.gravitySolver=new U_(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){var t;!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=Fo(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stabilized=!0,!0===t&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,!0===t&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=bd();this.physicsTick(),(bd()-t<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||!0===this.startedStabilization)&&HI((function(){t.body.emitter.emit("stabilized",{iterations:e}),t.startedStabilization=!1,t.stabilizationIterations=0}),0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){this._startStabilizing(),!0!==this.stabilized&&(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled?(this.adaptiveCounter%this.adaptiveInterval==0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),!0===this.stabilized&&this.revert(),this.stabilizationIterations++)}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,e=this.body.edges;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&!0===t[i].options.physics&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&!0===e[o].options.physics&&this.physicsBody.physicsEdgeIndices.push(e[o].id);for(var n=0;n<this.physicsBody.physicsNodeIndices.length;n++){var r=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[r]={x:0,y:0},void 0===this.physicsBody.velocities[r]&&(this.physicsBody.velocities[r]={x:0,y:0})}for(var s in this.physicsBody.velocities)void 0===t[s]&&delete this.physicsBody.velocities[s]}},{key:"revert",value:function(){var t=pd(this.previousStates),e=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var o=0;o<t.length;o++){var n=t[o];void 0!==e[n]?!0===e[n].options.physics&&(this.referenceState[n]={positions:{x:e[n].x,y:e[n].y}},i[n].x=this.previousStates[n].vx,i[n].y=this.previousStates[n].vy,e[n].x=this.previousStates[n].x,e[n].y=this.previousStates[n].y):delete this.previousStates[n]}}},{key:"_evaluateStepQuality",value:function(){var t,e,i=this.body.nodes,o=this.referenceState;for(var n in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,n)&&void 0!==i[n]&&(t=i[n].x-o[n].positions.x,e=i[n].y-o[n].positions.y,Math.sqrt(Math.pow(t,2)+Math.pow(e,2))>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,e=0,i=0,o=0;o<t.length;o++){var n=t[o],r=this._performStep(n);e=Math.max(e,r),i+=r}this.adaptiveTimestepEnabled=i/t.length<5,this.stabilized=e<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,e,i){t+=(e-this.modelOptions.damping*t)/i*this.timestep;var o=this.options.maxVelocity||1e9;return Math.abs(t)>o&&(t=t>0?o:-o),t}},{key:"_performStep",value:function(t){var e=this.body.nodes[t],i=this.physicsBody.forces[t];this.options.wind&&(i.x+=this.options.wind.x,i.y+=this.options.wind.y);var o=this.physicsBody.velocities[t];return this.previousStates[t]={x:e.x,y:e.y,vx:o.x,vy:o.y},!1===e.options.fixed.x?(o.x=this.calculateComponentVelocity(o.x,i.x,e.options.mass),e.x+=o.x*this.timestep):(i.x=0,o.x=0),!1===e.options.fixed.y?(o.y=this.calculateComponentVelocity(o.y,i.y,e.options.mass),e.y+=o.y*this.timestep):(i.y=0,o.y=0),Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&t[e].x&&t[e].y){var i=t[e].options.fixed;this.freezeCache[e]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&void 0!==this.freezeCache[e]&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;"number"!=typeof e&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),0!==this.physicsBody.physicsNodeIndices.length?(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,HI((function(){return t._stabilizationBatch()}),0)):this.ready=!0}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,e=function(){return!1===t.stabilized&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var o,n=0;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;i(),e()?HI(Fo(o=this._stabilizationBatch).call(o,this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var i=this.physicsBody.physicsNodeIndices[e],o=this.body.nodes[i],n=this.physicsBody.forces[i],r=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.x,2)),s=Math.min(Math.max(5,r),15),a=3*s,g=af((180-180*Math.min(1,Math.max(0,.03*r)))/360,1,1),l={x:o.x+20*n.x,y:o.y+20*n.y};t.lineWidth=s,t.strokeStyle=g,t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(l.x,l.y),t.stroke();var h=Math.atan2(n.y,n.x);t.fillStyle=g,T_.draw(t,{type:"arrow",point:l,angle:h,length:a}),KI(t).call(t)}}}]),t}();let Y_;const X_=new Uint8Array(16);function Z_(){if(!Y_&&(Y_="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!Y_))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return Y_(X_)}const K_=[];for(let t=0;t<256;++t)K_.push((t+256).toString(16).slice(1));var Q_={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function J_(t,e,i){if(Q_.randomUUID&&!e&&!t)return Q_.randomUUID();const o=(t=t||{}).random||(t.rng||Z_)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){i=i||0;for(let t=0;t<16;++t)e[i+t]=o[t];return e}return function(t,e=0){return K_[t[e+0]]+K_[t[e+1]]+K_[t[e+2]]+K_[t[e+3]]+"-"+K_[t[e+4]]+K_[t[e+5]]+"-"+K_[t[e+6]]+K_[t[e+7]]+"-"+K_[t[e+8]]+K_[t[e+9]]+"-"+K_[t[e+10]]+K_[t[e+11]]+K_[t[e+12]]+K_[t[e+13]]+K_[t[e+14]]+K_[t[e+15]]}(o)}var q_=function(){function t(){ng(this,t)}return au(t,null,[{key:"getRange",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=1e9,n=-1e9,r=1e9,s=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)r>(e=t[i[a]]).shape.boundingBox.left&&(r=e.shape.boundingBox.left),s<e.shape.boundingBox.right&&(s=e.shape.boundingBox.right),o>e.shape.boundingBox.top&&(o=e.shape.boundingBox.top),n<e.shape.boundingBox.bottom&&(n=e.shape.boundingBox.bottom);return 1e9===r&&-1e9===s&&1e9===o&&-1e9===n&&(o=0,n=0,r=0,s=0),{minX:r,maxX:s,minY:o,maxY:n}}},{key:"getRangeCore",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=1e9,n=-1e9,r=1e9,s=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)r>(e=t[i[a]]).x&&(r=e.x),s<e.x&&(s=e.x),o>e.y&&(o=e.y),n<e.y&&(n=e.y);return 1e9===r&&-1e9===s&&1e9===o&&-1e9===n&&(o=0,n=0,r=0,s=0),{minX:r,maxX:s,minY:o,maxY:n}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,e){var i={};return void 0===e||"node"===e?(Kp(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):Kp(i,t.options,!0),i}}]),t}();var tT=function(t){my(i,t);var e=function(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}(i);function i(t,o,n,r,s,a){var g;return ng(this,i),(g=e.call(this,t,o,n,r,s,a)).isCluster=!0,g.containedNodes={},g.containedEdges={},g}return au(i,[{key:"_openChildCluster",value:function(t){var e=this,i=this.body.nodes[t];if(void 0===this.containedNodes[t])throw new Error("node with id: "+t+" not in current cluster");if(!i.isCluster)throw new Error("node with id: "+t+" is not a cluster");delete this.containedNodes[t],qp(i.edges,(function(t){delete e.containedEdges[t.id]})),qp(i.containedNodes,(function(t,i){e.containedNodes[i]=t})),i.containedNodes={},qp(i.containedEdges,(function(t,i){e.containedEdges[i]=t})),i.containedEdges={},qp(i.edges,(function(t){qp(e.edges,(function(i){var o,n,r=pI(o=i.clusteringEdgeReplacingIds).call(o,t.id);-1!==r&&(qp(t.clusteringEdgeReplacingIds,(function(t){i.clusteringEdgeReplacingIds.push(t),e.body.edges[t].edgeReplacedById=i.id})),lA(n=i.clusteringEdgeReplacingIds).call(n,r,1))}))})),i.edges=[]}}]),i}(Yy),eT=function(){function t(e){var i=this;ng(this,t),this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},fo(this.options,this.defaultOptions),this.body.emitter.on("_resetData",(function(){i.clusteredNodes={},i.clusteredEdges={}}))}return au(t,[{key:"clusterByHubsize",value:function(t,e){void 0===t?t=this._getHubSize():"object"===ou(t)&&(e=this._checkOptions(t),t=this._getHubSize());for(var i=[],o=0;o<this.body.nodeIndices.length;o++){var n=this.body.nodes[this.body.nodeIndices[o]];n.edges.length>=t&&i.push(n.id)}for(var r=0;r<i.length;r++)this.clusterByConnection(i[r],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===e.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);var o={},n={};qp(this.body.nodes,(function(i,r){i.options&&!0===e.joinCondition(i.options)&&(o[r]=i,qp(i.edges,(function(e){void 0===t.clusteredEdges[e.id]&&(n[e.id]=e)})))})),this._cluster(o,n,e,i)}},{key:"clusterByEdgeCount",value:function(t,e){var i=this,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=this._checkOptions(e);for(var n,r,s,a=[],g={},l=function(){var o={},l={},c=i.body.nodeIndices[h],u=i.body.nodes[c];if(void 0===g[c]){s=0,r=[];for(var d=0;d<u.edges.length;d++)n=u.edges[d],void 0===i.clusteredEdges[n.id]&&(n.toId!==n.fromId&&s++,r.push(n));if(s===t){for(var A=function(t){if(void 0===e.joinCondition||null===e.joinCondition)return!0;var i=q_.cloneOptions(t);return e.joinCondition(i)},I=!0,C=0;C<r.length;C++){n=r[C];var p=i._getConnectedId(n,c);if(!A(u)){I=!1;break}l[n.id]=n,o[c]=u,o[p]=i.body.nodes[p],g[c]=!0}if(pd(o).length>0&&pd(l).length>0&&!0===I){var f=function(){for(var t=0;t<a.length;++t)for(var e in o)if(void 0!==a[t].nodes[e])return a[t]}();if(void 0!==f){for(var v in o)void 0===f.nodes[v]&&(f.nodes[v]=o[v]);for(var m in l)void 0===f.edges[m]&&(f.edges[m]=l[m])}else a.push({nodes:o,edges:l})}}}},h=0;h<this.body.nodeIndices.length;h++)l();for(var c=0;c<a.length;c++)this._cluster(a[c].nodes,a[c].edges,e,!1);!0===o&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,t,e)}},{key:"clusterBridges",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,t,e)}},{key:"clusterByConnection",value:function(t,e){var i,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[t])throw new Error("The nodeId given to clusterByConnection does not exist!");var n=this.body.nodes[t];void 0===(e=this._checkOptions(e,n)).clusterNodeProperties.x&&(e.clusterNodeProperties.x=n.x),void 0===e.clusterNodeProperties.y&&(e.clusterNodeProperties.y=n.y),void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=n.options.fixed.x,e.clusterNodeProperties.fixed.y=n.options.fixed.y);var r={},s={},a=n.id,g=q_.cloneOptions(n);r[a]=n;for(var l=0;l<n.edges.length;l++){var h=n.edges[l];if(void 0===this.clusteredEdges[h.id]){var c=this._getConnectedId(h,a);if(void 0===this.clusteredNodes[c])if(c!==a)if(void 0===e.joinCondition)s[h.id]=h,r[c]=this.body.nodes[c];else{var u=q_.cloneOptions(this.body.nodes[c]);!0===e.joinCondition(g,u)&&(s[h.id]=h,r[c]=this.body.nodes[c])}else s[h.id]=h}}var d=Ad(i=pd(r)).call(i,(function(t){return r[t].id}));for(var A in r)if(Object.prototype.hasOwnProperty.call(r,A))for(var I=r[A],C=0;C<I.edges.length;C++){var p=I.edges[C];pI(d).call(d,this._getConnectedId(p,I.id))>-1&&(s[p.id]=p)}this._cluster(r,s,e,o)}},{key:"_createClusterEdges",value:function(t,e,i,o){for(var n,r,s,a,g,l,h=pd(t),c=[],u=0;u<h.length;u++){s=t[r=h[u]];for(var d=0;d<s.edges.length;d++)n=s.edges[d],void 0===this.clusteredEdges[n.id]&&(n.toId==n.fromId?e[n.id]=n:n.toId==r?(a=i.id,l=g=n.fromId):(a=n.toId,g=i.id,l=a),void 0===t[l]&&c.push({edge:n,fromId:g,toId:a}))}for(var A=[],I=function(t){for(var e=0;e<A.length;e++){var i=A[e],o=t.fromId===i.fromId&&t.toId===i.toId,n=t.fromId===i.toId&&t.toId===i.fromId;if(o||n)return i}return null},C=0;C<c.length;C++){var p=c[C],f=p.edge,v=I(p);null===v?(v=this._createClusteredEdge(p.fromId,p.toId,f,o),A.push(v)):v.clusteringEdgeReplacingIds.push(f.id),this.body.edges[f.id].edgeReplacedById=v.id,this._backupEdgeOptions(f),f.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.clusterEdgeProperties&&(t.clusterEdgeProperties={}),void 0===t.clusterNodeProperties&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&void 0!==this.clusteredNodes[r]&&n.push(r);for(var s=0;s<n.length;++s)delete t[n[s]];if(0!=pd(t).length&&(1!=pd(t).length||1==i.clusterNodeProperties.allowSingleNodeCluster)){var a=Kp({},i.clusterNodeProperties);if(void 0!==i.processProperties){var g=[];for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var h=q_.cloneOptions(t[l]);g.push(h)}var c=[];for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)&&"clusterEdge:"!==u.substr(0,12)){var d=q_.cloneOptions(e[u],"edge");c.push(d)}if(!(a=i.processProperties(a,g,c)))throw new Error("The processProperties function does not return properties!")}void 0===a.id&&(a.id="cluster:"+J_());var A=a.id;void 0===a.label&&(a.label="cluster");var I=void 0;void 0===a.x&&(I=this._getClusterPosition(t),a.x=I.x),void 0===a.y&&(void 0===I&&(I=this._getClusterPosition(t)),a.y=I.y),a.id=A;var C=this.body.functions.createNode(a,tT);C.containedNodes=t,C.containedEdges=e,C.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[a.id]=C,this._clusterEdges(t,e,a,i.clusterEdgeProperties),a.id=void 0,!0===o&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){void 0===this.clusteredEdges[t.id]&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var e=this.clusteredEdges[t.id];void 0!==e&&(t.setOptions({physics:e.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return void 0!==this.body.nodes[t]?!0===this.body.nodes[t].isCluster:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var e,i=pd(t),o=t[i[0]].x,n=t[i[0]].x,r=t[i[0]].y,s=t[i[0]].y,a=1;a<i.length;a++)o=(e=t[i[a]]).x<o?e.x:o,n=e.x>n?e.x:n,r=e.y<r?e.y:r,s=e.y>s?e.y:s;return{x:.5*(o+n),y:.5*(r+s)}}},{key:"openCluster",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No clusterNodeId supplied to openCluster.");var o=this.body.nodes[t];if(void 0===o)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==o.isCluster||void 0===o.containedNodes||void 0===o.containedEdges)throw new Error("The node:"+t+" is not a valid cluster.");var n=this.findNode(t),r=pI(n).call(n,t)-1;if(r>=0){var s=n[r];return this.body.nodes[s]._openChildCluster(t),delete this.body.nodes[t],void(!0===i&&this.body.emitter.emit("_dataChanged"))}var a=o.containedNodes,g=o.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"==typeof e.releaseFunction){var l={},h={x:o.x,y:o.y};for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var u=this.body.nodes[c];l[c]={x:u.x,y:u.y}}var d=e.releaseFunction(h,l);for(var A in a)if(Object.prototype.hasOwnProperty.call(a,A)){var I=this.body.nodes[A];void 0!==d[A]&&(I.x=void 0===d[A].x?o.x:d[A].x,I.y=void 0===d[A].y?o.y:d[A].y)}}else qp(a,(function(t){!1===t.options.fixed.x&&(t.x=o.x),!1===t.options.fixed.y&&(t.y=o.y)}));for(var C in a)if(Object.prototype.hasOwnProperty.call(a,C)){var p=this.body.nodes[C];p.vx=o.vx,p.vy=o.vy,p.setOptions({physics:!0}),delete this.clusteredNodes[C]}for(var f=[],v=0;v<o.edges.length;v++)f.push(o.edges[v]);for(var m=0;m<f.length;m++){for(var b=f[m],y=this._getConnectedId(b,t),_=this.clusteredNodes[y],T=0;T<b.clusteringEdgeReplacingIds.length;T++){var E=b.clusteringEdgeReplacingIds[T],w=this.body.edges[E];if(void 0!==w)if(void 0!==_){var k=this.body.nodes[_.clusterId];k.containedEdges[w.id]=w,delete g[w.id];var O=w.fromId,S=w.toId;w.toId==y?S=_.clusterId:O=_.clusterId,this._createClusteredEdge(O,S,w,k.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(w)}b.remove()}for(var R in g)Object.prototype.hasOwnProperty.call(g,R)&&this._restoreEdge(g[R]);delete this.body.nodes[t],!0===i&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var e=[];if(!0===this.isCluster(t)){var i=this.body.nodes[t].containedNodes;for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.push(this.body.nodes[o].id)}return e}},{key:"findNode",value:function(t){for(var e,i=[],o=0;void 0!==this.clusteredNodes[t]&&o<100;){if(void 0===(e=this.body.nodes[t]))return[];i.push(e.id),t=this.clusteredNodes[t].clusterId,o++}return void 0===(e=this.body.nodes[t])?[]:(i.push(e.id),Gd(i).call(i),i)}},{key:"updateClusteredNode",value:function(t,e){if(void 0===t)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===e)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[t])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(e),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,e){if(void 0===t)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===e)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[t])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),o=0;o<i.length;o++)this.body.edges[i[o]].setOptions(e);this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var e=[],i=0;void 0!==t&&void 0!==this.body.edges[t]&&i<100;)e.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,i++;return Gd(e).call(e),e}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var e=[t],i=[],o=[],n=0;e.length>0&&n<100;){var r=e.pop();if(void 0!==r){var s=this.body.edges[r];if(void 0!==s){n++;var a=s.clusteringEdgeReplacingIds;if(void 0===a)o.push(r);else for(var g=0;g<a.length;++g){var l=a[g];-1===pI(e).call(e,a)&&-1===pI(i).call(i,a)&&e.push(l)}i.push(r)}}}return o}},{key:"_getConnectedId",value:function(t,e){return t.toId!=e?t.toId:(t.fromId,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,e=0,i=0,o=0,n=0;n<this.body.nodeIndices.length;n++){var r=this.body.nodes[this.body.nodeIndices[n]];r.edges.length>o&&(o=r.edges.length),t+=r.edges.length,e+=Math.pow(r.edges.length,2),i+=1}t/=i;var s=(e/=i)-Math.pow(t,2),a=Math.sqrt(s),g=Math.floor(t+2*a);return g>o&&(g=o),g}},{key:"_createClusteredEdge",value:function(t,e,i,o,n){var r=q_.cloneOptions(i,"edge");Kp(r,o),r.from=t,r.to=e,r.id="clusterEdge:"+J_(),void 0!==n&&Kp(r,n);var s=this.body.functions.createEdge(r);return s.clusteringEdgeReplacingIds=[i.id],s.connect(),this.body.edges[s.id]=s,s}},{key:"_clusterEdges",value:function(t,e,i,o){if(e instanceof P_){var n=e,r={};r[n.id]=n,e=r}if(t instanceof Yy){var s=t,a={};a[s.id]=s,t=a}if(null==i)throw new Error("_clusterEdges: parameter clusterNode required");for(var g in void 0===o&&(o=i.clusterEdgeProperties),this._createClusterEdges(t,e,i,o),e)if(Object.prototype.hasOwnProperty.call(e,g)&&void 0!==this.body.edges[g]){var l=this.body.edges[g];this._backupEdgeOptions(l),l.setOptions({physics:!1})}for(var h in t)Object.prototype.hasOwnProperty.call(t,h)&&(this.clusteredNodes[h]={clusterId:i.id,node:this.body.nodes[h]},this.body.nodes[h].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(void 0!==t){var e=this.clusteredNodes[t];if(void 0!==e){var i=e.clusterId;if(void 0!==i)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,e){var i=[];return qp(t,(function(t){e(t)&&i.push(t)})),i}},{key:"_updateState",value:function(){var t,e=this,i=[],o={},n=function(t){qp(e.body.nodes,(function(e){!0===e.isCluster&&t(e)}))};for(t in this.clusteredNodes)Object.prototype.hasOwnProperty.call(this.clusteredNodes,t)&&void 0===this.body.nodes[t]&&i.push(t);n((function(t){for(var e=0;e<i.length;e++)delete t.containedNodes[i[e]]}));for(var r=0;r<i.length;r++)delete this.clusteredNodes[i[r]];qp(this.clusteredEdges,(function(t){var i=e.body.edges[t];void 0!==i&&i.endPointsValid()||(o[t]=t)})),n((function(t){qp(t.containedEdges,(function(t,e){t.endPointsValid()||o[e]||(o[e]=e)}))})),qp(this.body.edges,(function(t,i){var n=!0,r=t.clusteringEdgeReplacingIds;if(void 0!==r){var s=0;qp(r,(function(t){var i=e.body.edges[t];void 0!==i&&i.endPointsValid()&&(s+=1)})),n=s>0}t.endPointsValid()&&n||(o[i]=i)})),n((function(t){qp(o,(function(i){delete t.containedEdges[i],qp(t.edges,(function(n,r){n.id!==i?n.clusteringEdgeReplacingIds=e._filter(n.clusteringEdgeReplacingIds,(function(t){return!o[t]})):t.edges[r]=null})),t.edges=e._filter(t.edges,(function(t){return null!==t}))}))})),qp(o,(function(t){delete e.clusteredEdges[t]})),qp(o,(function(t){delete e.body.edges[t]})),qp(pd(this.body.edges),(function(t){var i=e.body.edges[t],o=e._isClusteredNode(i.fromId)||e._isClusteredNode(i.toId);if(o!==e._isClusteredEdge(i.id))if(o){var n=e._getClusterNodeForNode(i.fromId);void 0!==n&&e._clusterEdges(e.body.nodes[i.fromId],i,n);var r=e._getClusterNodeForNode(i.toId);void 0!==r&&e._clusterEdges(e.body.nodes[i.toId],i,r)}else delete e._clusterEdges[t],e._restoreEdge(i)}));for(var s=!1,a=!0,g=function(){var t=[];n((function(e){var i=pd(e.containedNodes).length,o=!0===e.options.allowSingleNodeCluster;(o&&i<1||!o&&i<2)&&t.push(e.id)}));for(var i=0;i<t.length;++i)e.openCluster(t[i],{},!1);a=t.length>0,s=s||a};a;)g();s&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return void 0!==this.clusteredNodes[t]}},{key:"_isClusteredEdge",value:function(t){return void 0!==this.clusteredEdges[t]}}]),t}(),iT=function(){function t(e,i){var o;ng(this,t),void 0!==window&&(o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===o?function(t){t()}:o,this.body=e,this.canvas=i,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},fo(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return au(t,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.on("dragStart",(function(){e.dragging=!0})),this.body.emitter.on("dragEnd",(function(){e.dragging=!1})),this.body.emitter.on("zoom",(function(){e.zooming=!0,window.clearTimeout(e.zoomTimeoutId),e.zoomTimeoutId=HI((function(){var t;e.zooming=!1,Fo(t=e._requestRedraw).call(t,e)()}),250)})),this.body.emitter.on("_resizeNodes",(function(){e._resizeNodes()})),this.body.emitter.on("_redraw",(function(){!1===e.renderingActive&&e._redraw()})),this.body.emitter.on("_blockRedraw",(function(){e.allowRedraw=!1})),this.body.emitter.on("_allowRedraw",(function(){e.allowRedraw=!0,e.redrawRequested=!1})),this.body.emitter.on("_requestRedraw",Fo(t=this._requestRedraw).call(t,this)),this.body.emitter.on("_startRendering",(function(){e.renderRequests+=1,e.renderingActive=!0,e._startRendering()})),this.body.emitter.on("_stopRendering",(function(){e.renderRequests-=1,e.renderingActive=e.renderRequests>0,e.renderTimer=void 0})),this.body.emitter.on("destroy",(function(){e.renderRequests=0,e.allowRedraw=!1,e.renderingActive=!1,!0===e.requiresTimeout?clearTimeout(e.renderTimer):window.cancelAnimationFrame(e.renderTimer),e.body.emitter.off()}))}},{key:"setOptions",value:function(t){void 0!==t&&Xp(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,t)}},{key:"_requestNextFrame",value:function(t,e){if("undefined"!=typeof window){var i,o=window;return!0===this.requiresTimeout?i=HI(t,e):o.requestAnimationFrame&&(i=o.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){var t;!0===this.renderingActive&&void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(Fo(t=this._renderStep).call(t,this),this.simulationInterval))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame((function(){t._redraw(!1)}),0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var e={drawExternalLabels:null};0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.canvas.setTransform();var i=this.canvas.getContext(),o=this.canvas.frame.canvas.clientWidth,n=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,o,n),0===this.canvas.frame.clientWidth)return;if(i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawEdges(i),!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag){var r=this._drawNodes(i,t).drawExternalLabels;e.drawExternalLabels=r}!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawArrows(i),null!=e.drawExternalLabels&&e.drawExternalLabels(),!1===t&&this._drawSelectionBox(i),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),!0===t&&i.clearRect(0,0,o,n)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var e,i=this.body.nodes;for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&((e=i[o]).resize(t),e.updateBoundingBox(t,e.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var e,i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.nodes,r=this.body.nodeIndices,s=[],a=[],g=this.canvas.DOMtoCanvas({x:-20,y:-20}),l=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20}),h={top:g.y,left:g.x,bottom:l.y,right:l.x},c=[],u=0;u<r.length;u++)if((e=n[r[u]]).hover)a.push(r[u]);else if(e.isSelected())s.push(r[u]);else if(!0===o){var d=e.draw(t);null!=d.drawExternalLabel&&c.push(d.drawExternalLabel)}else if(!0===e.isBoundingBoxOverlappingWith(h)){var A=e.draw(t);null!=A.drawExternalLabel&&c.push(A.drawExternalLabel)}else e.updateBoundingBox(t,e.selected);var I=s.length,C=a.length;for(i=0;i<I;i++){var p=(e=n[s[i]]).draw(t);null!=p.drawExternalLabel&&c.push(p.drawExternalLabel)}for(i=0;i<C;i++){var f=(e=n[a[i]]).draw(t);null!=f.drawExternalLabel&&c.push(f.drawExternalLabel)}return{drawExternalLabels:function(){for(var t=0,e=c;t<e.length;t++)(0,e[t])()}}}},{key:"_drawEdges",value:function(t){for(var e=this.body.edges,i=this.body.edgeIndices,o=0;o<i.length;o++){var n=e[i[o]];!0===n.connected&&n.draw(t)}}},{key:"_drawArrows",value:function(t){for(var e=this.body.edges,i=this.body.edgeIndices,o=0;o<i.length;o++){var n=e[i[o]];!0===n.connected&&n.drawArrows(t)}}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,(-1!=pI(t).call(t,"msie 9.0")||-1!=pI(t).call(t,"safari")&&pI(t).call(t,"chrome")<=-1)&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(t){if(this.body.selectionBox.show){t.beginPath();var e=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,i=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,i),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,i),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}]),t}(),oT=n(ot.setInterval);function nT(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)}function rT(t,e){return e.inputHandler=function(t){t.isFinal&&e(t)},t.on("hammer.input",e.inputHandler)}var sT=function(){function t(e){ng(this,t),this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},fo(this.options,this.defaultOptions),this.bindEventListeners()}return au(t,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.once("resize",(function(t){0!==t.width&&(e.body.view.translation.x=.5*t.width),0!==t.height&&(e.body.view.translation.y=.5*t.height)})),this.body.emitter.on("setSize",Fo(t=this.setSize).call(t,this)),this.body.emitter.on("destroy",(function(){e.hammerFrame.destroy(),e.hammer.destroy(),e._cleanUp()}))}},{key:"setOptions",value:function(t){var e=this;if(void 0!==t&&Xp(["width","height","autoResize"],this.options,t),this._cleanUp(),!0===this.options.autoResize){var i;if(window.ResizeObserver){var o=new ResizeObserver((function(){!0===e.setSize()&&e.body.emitter.emit("_requestRedraw")})),n=this.frame;o.observe(n),this._cleanupCallbacks.push((function(){o.unobserve(n)}))}else{var r=oT((function(){!0===e.setSize()&&e.body.emitter.emit("_requestRedraw")}),1e3);this._cleanupCallbacks.push((function(){clearInterval(r)}))}var s=Fo(i=this._onResize).call(i,this);window.addEventListener("resize",s),this._cleanupCallbacks.push((function(){window.removeEventListener("resize",s)}))}}},{key:"_cleanUp",value:function(){var t,e,i;Md(t=Gd(e=lA(i=this._cleanupCallbacks).call(i,0)).call(e)).call(t,(function(t){try{t()}catch(t){console.error(t)}}))}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;1!=t&&1!=e?i=.5*this.cameraState.scale*(t+e):1!=t?i=this.cameraState.scale*t:1!=e&&(i=this.cameraState.scale*e),this.body.view.scale=i;var o=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),n={x:o.x-this.cameraState.position.x,y:o.y-this.cameraState.position.y};this.body.view.translation.x+=n.x*this.body.view.scale,this.body.view.translation.y+=n.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if("number"==typeof t)return t+"px";if("string"==typeof t){if(-1!==pI(t).call(t,"%")||-1!==pI(t).call(t,"px"))return t;if(-1===pI(t).call(t,"%"))return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new Ef(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:Ef.DIRECTION_ALL}),nT(this.hammer,(function(e){t.body.eventListeners.onTouch(e)})),this.hammer.on("tap",(function(e){t.body.eventListeners.onTap(e)})),this.hammer.on("doubletap",(function(e){t.body.eventListeners.onDoubleTap(e)})),this.hammer.on("press",(function(e){t.body.eventListeners.onHold(e)})),this.hammer.on("panstart",(function(e){t.body.eventListeners.onDragStart(e)})),this.hammer.on("panmove",(function(e){t.body.eventListeners.onDrag(e)})),this.hammer.on("panend",(function(e){t.body.eventListeners.onDragEnd(e)})),this.hammer.on("pinch",(function(e){t.body.eventListeners.onPinch(e)})),this.frame.canvas.addEventListener("wheel",(function(e){t.body.eventListeners.onMouseWheel(e)})),this.frame.canvas.addEventListener("mousemove",(function(e){t.body.eventListeners.onMouseMove(e)})),this.frame.canvas.addEventListener("contextmenu",(function(e){t.body.eventListeners.onContext(e)})),this.hammerFrame=new Ef(this.frame),rT(this.hammerFrame,(function(e){t.body.eventListeners.onRelease(e)}))}},{key:"setSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.height;t=this._prepareValue(t),e=this._prepareValue(e);var i=!1,o=this.frame.canvas.width,n=this.frame.canvas.height,r=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||e!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=e)this._getCameraState(r),this.frame.style.width=t,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=e,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{var s=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),a=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===s&&this.frame.canvas.height===a||this._getCameraState(r),this.frame.canvas.width!==s&&(this.frame.canvas.width=s,i=!0),this.frame.canvas.height!==a&&(this.frame.canvas.height=a,i=!0)}return!0===i&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(o/this.pixelRatio),oldHeight:Math.round(n/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");var e=1;return"undefined"!=typeof window&&(e=window.devicePixelRatio||1),e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),t}(),aT=function(){function t(e,i){var o,n,r=this;ng(this,t),this.body=e,this.canvas=i,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",Fo(o=this.fit).call(o,this)),this.body.emitter.on("animationFinished",(function(){r.body.emitter.emit("_stopRendering")})),this.body.emitter.on("unlockNode",Fo(n=this.releaseNode).call(n,this))}return au(t,[{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t}},{key:"fit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=function(t,e){var i=fo({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},null!=t?t:{});if(!gd(i.nodes))throw new TypeError("Nodes has to be an array of ids.");if(0===i.nodes.length&&(i.nodes=e),!("number"==typeof i.minZoomLevel&&i.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!("number"==typeof i.maxZoomLevel&&i.minZoomLevel<=i.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return i}(t,this.body.nodeIndices);var i,o,n=this.canvas.frame.canvas.clientWidth,r=this.canvas.frame.canvas.clientHeight;if(0===n||0===r)o=1,i=q_.getRange(this.body.nodes,t.nodes);else if(!0===e){var s=0;for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&!0===this.body.nodes[a].predefinedPosition&&(s+=1);if(s>.5*this.body.nodeIndices.length)return void this.fit(t,!1);i=q_.getRange(this.body.nodes,t.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822,o*=Math.min(n/600,r/600)}else{this.body.emitter.emit("_resizeNodes"),i=q_.getRange(this.body.nodes,t.nodes);var g=n/(1.1*Math.abs(i.maxX-i.minX)),l=r/(1.1*Math.abs(i.maxY-i.minY));o=g<=l?g:l}o>t.maxZoomLevel?o=t.maxZoomLevel:o<t.minZoomLevel&&(o=t.minZoomLevel);var h={position:q_.findCenter(i),scale:o,animation:t.animation};this.moveTo(h)}},{key:"focus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this.body.nodes[t]){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};e.position=i,e.lockedOnNode=t,this.moveTo(e)}else console.error("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(void 0!==t){if(null!=t.offset){if(null!=t.offset.x){if(t.offset.x=+t.offset.x,!zm(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(null!=t.offset.y){if(t.offset.y=+t.offset.y,!zm(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(null!=t.position){if(null!=t.position.x){if(t.position.x=+t.position.x,!zm(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(null!=t.position.y){if(t.position.y=+t.position.y,!zm(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(null!=t.scale){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;void 0===t.animation&&(t.animation={duration:0}),!1===t.animation&&(t.animation={duration:0}),!0===t.animation&&(t.animation={}),void 0===t.animation.duration&&(t.animation.duration=1e3),void 0===t.animation.easingFunction&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}else t={}}},{key:"animateView",value:function(t){if(void 0!==t){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),!0===t.locked&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var e,i,o=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n=o.x-t.position.x,r=o.y-t.position.y;this.targetTranslation={x:this.sourceTranslation.x+n*this.targetScale+t.offset.x,y:this.sourceTranslation.y+r*this.targetScale+t.offset.y},0===t.animation.duration?null!=this.lockedOnNodeId?(this.viewFunction=Fo(e=this._lockedRedraw).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=Fo(i=this._transitionRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var t=this.body.nodes[this.lockedOnNodeId].x,e=this.body.nodes[this.lockedOnNodeId].y,i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),o=i.x-t,n=i.y-e,r=this.body.view.translation,s={x:r.x+o*this.body.view.scale+this.lockedOnNodeOffset.x,y:r.y+n*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===t?1:this.easingTime;var e,i=uf[this.animationEasingFunction](this.easingTime);this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*i,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*i,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*i},this.easingTime>=1&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,null!=this.lockedOnNodeId&&(this.viewFunction=Fo(e=this._lockedRedraw).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),t}();function gT(t){var e,i=t&&t.preventDefault||!1,o=t&&t.container||window,n={},r={keydown:{},keyup:{}},s={};for(e=97;e<=122;e++)s[String.fromCharCode(e)]={code:e-97+65,shift:!1};for(e=65;e<=90;e++)s[String.fromCharCode(e)]={code:e,shift:!0};for(e=0;e<=9;e++)s[""+e]={code:48+e,shift:!1};for(e=1;e<=12;e++)s["F"+e]={code:111+e,shift:!1};for(e=0;e<=9;e++)s["num"+e]={code:96+e,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(t){l(t,"keydown")},g=function(t){l(t,"keyup")},l=function(t,e){if(void 0!==r[e][t.keyCode]){for(var o=r[e][t.keyCode],n=0;n<o.length;n++)(void 0===o[n].shift||1==o[n].shift&&1==t.shiftKey||0==o[n].shift&&0==t.shiftKey)&&o[n].fn(t);1==i&&t.preventDefault()}};return n.bind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);void 0===r[i][s[t].code]&&(r[i][s[t].code]=[]),r[i][s[t].code].push({fn:e,shift:s[t].shift})},n.bindAll=function(t,e){for(var i in void 0===e&&(e="keydown"),s)s.hasOwnProperty(i)&&n.bind(i,t,e)},n.getKey=function(t){for(var e in s)if(s.hasOwnProperty(e)){if(1==t.shiftKey&&1==s[e].shift&&t.keyCode==s[e].code)return e;if(0==t.shiftKey&&0==s[e].shift&&t.keyCode==s[e].code)return e;if(t.keyCode==s[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},n.unbind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);if(void 0!==e){var o=[],n=r[i][s[t].code];if(void 0!==n)for(var a=0;a<n.length;a++)n[a].fn==e&&n[a].shift==s[t].shift||o.push(r[i][s[t].code][a]);r[i][s[t].code]=o}else r[i][s[t].code]=[]},n.reset=function(){r={keydown:{},keyup:{}}},n.destroy=function(){r={keydown:{},keyup:{}},o.removeEventListener("keydown",a,!0),o.removeEventListener("keyup",g,!0)},o.addEventListener("keydown",a,!0),o.addEventListener("keyup",g,!0),n}var lT=function(){function t(e,i){var o=this;ng(this,t),this.body=e,this.canvas=i,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",(function(){o.activated=!0,o.configureKeyboardBindings()})),this.body.emitter.on("deactivate",(function(){o.activated=!1,o.configureKeyboardBindings()})),this.body.emitter.on("destroy",(function(){void 0!==o.keycharm&&o.keycharm.destroy()})),this.options={}}return au(t,[{key:"setOptions",value:function(t){void 0!==t&&(this.options=t,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);var n,r,s=new Ef(this.navigationDOM[e[o]]);nT(s,"_fit"===i[o]?Fo(n=this._fit).call(n,this):Fo(r=this.bindToRedraw).call(r,this,i[o])),this.navigationHammers.push(s)}var a=new Ef(this.canvas.frame);rT(a,(function(){t._stopMovement()})),this.navigationHammers.push(a),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){var e;void 0===this.boundFunctions[t]&&(this.boundFunctions[t]=Fo(e=this[t]).call(e,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(t){void 0!==this.boundFunctions[t]&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,e=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,o=e/t,n=(1-o)*this.canvas.canvasViewCenter.x+i.x*o,r=(1-o)*this.canvas.canvasViewCenter.y+i.y*o;this.body.view.scale=e,this.body.view.translation={x:n,y:r},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,e=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,o=e/t,n=(1-o)*this.canvas.canvasViewCenter.x+i.x*o,r=(1-o)*this.canvas.canvasViewCenter.y+i.y*o;this.body.view.scale=e,this.body.view.translation={x:n,y:r},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t,e,i,o,n,r,s,a,g,l,h,c,u,d,A,I,C,p,f,v,m,b,y,_,T=this;void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled&&(!0===this.options.keyboard.bindToWindow?this.keycharm=gT({container:window,preventDefault:!0}):this.keycharm=gT({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(Fo(t=this.keycharm).call(t,"up",(function(){T.bindToRedraw("_moveUp")}),"keydown"),Fo(e=this.keycharm).call(e,"down",(function(){T.bindToRedraw("_moveDown")}),"keydown"),Fo(i=this.keycharm).call(i,"left",(function(){T.bindToRedraw("_moveLeft")}),"keydown"),Fo(o=this.keycharm).call(o,"right",(function(){T.bindToRedraw("_moveRight")}),"keydown"),Fo(n=this.keycharm).call(n,"=",(function(){T.bindToRedraw("_zoomIn")}),"keydown"),Fo(r=this.keycharm).call(r,"num+",(function(){T.bindToRedraw("_zoomIn")}),"keydown"),Fo(s=this.keycharm).call(s,"num-",(function(){T.bindToRedraw("_zoomOut")}),"keydown"),Fo(a=this.keycharm).call(a,"-",(function(){T.bindToRedraw("_zoomOut")}),"keydown"),Fo(g=this.keycharm).call(g,"[",(function(){T.bindToRedraw("_zoomOut")}),"keydown"),Fo(l=this.keycharm).call(l,"]",(function(){T.bindToRedraw("_zoomIn")}),"keydown"),Fo(h=this.keycharm).call(h,"pageup",(function(){T.bindToRedraw("_zoomIn")}),"keydown"),Fo(c=this.keycharm).call(c,"pagedown",(function(){T.bindToRedraw("_zoomOut")}),"keydown"),Fo(u=this.keycharm).call(u,"up",(function(){T.unbindFromRedraw("_moveUp")}),"keyup"),Fo(d=this.keycharm).call(d,"down",(function(){T.unbindFromRedraw("_moveDown")}),"keyup"),Fo(A=this.keycharm).call(A,"left",(function(){T.unbindFromRedraw("_moveLeft")}),"keyup"),Fo(I=this.keycharm).call(I,"right",(function(){T.unbindFromRedraw("_moveRight")}),"keyup"),Fo(C=this.keycharm).call(C,"=",(function(){T.unbindFromRedraw("_zoomIn")}),"keyup"),Fo(p=this.keycharm).call(p,"num+",(function(){T.unbindFromRedraw("_zoomIn")}),"keyup"),Fo(f=this.keycharm).call(f,"num-",(function(){T.unbindFromRedraw("_zoomOut")}),"keyup"),Fo(v=this.keycharm).call(v,"-",(function(){T.unbindFromRedraw("_zoomOut")}),"keyup"),Fo(m=this.keycharm).call(m,"[",(function(){T.unbindFromRedraw("_zoomOut")}),"keyup"),Fo(b=this.keycharm).call(b,"]",(function(){T.unbindFromRedraw("_zoomIn")}),"keyup"),Fo(y=this.keycharm).call(y,"pageup",(function(){T.unbindFromRedraw("_zoomIn")}),"keyup"),Fo(_=this.keycharm).call(_,"pagedown",(function(){T.unbindFromRedraw("_zoomOut")}),"keyup")))}}]),t}();function hT(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var cT=function(){function t(e,i,o){var n,r,s,a,g,l,h,c,u,d,A,I,C;ng(this,t),this.body=e,this.canvas=i,this.selectionHandler=o,this.navigationHandler=new lT(e,i),this.body.eventListeners.onTap=Fo(n=this.onTap).call(n,this),this.body.eventListeners.onTouch=Fo(r=this.onTouch).call(r,this),this.body.eventListeners.onDoubleTap=Fo(s=this.onDoubleTap).call(s,this),this.body.eventListeners.onHold=Fo(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=Fo(g=this.onDragStart).call(g,this),this.body.eventListeners.onDrag=Fo(l=this.onDrag).call(l,this),this.body.eventListeners.onDragEnd=Fo(h=this.onDragEnd).call(h,this),this.body.eventListeners.onMouseWheel=Fo(c=this.onMouseWheel).call(c,this),this.body.eventListeners.onPinch=Fo(u=this.onPinch).call(u,this),this.body.eventListeners.onMouseMove=Fo(d=this.onMouseMove).call(d,this),this.body.eventListeners.onRelease=Fo(A=this.onRelease).call(A,this),this.body.eventListeners.onContext=Fo(I=this.onContext).call(I,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=Fo(C=this.getPointer).call(C,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},fo(this.options,this.defaultOptions),this.bindEventListeners()}return au(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",(function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer}))}},{key:"setOptions",value:function(t){void 0!==t&&(Zp(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,t),cf(this.options,t,"keyboard"),t.tooltip&&(fo(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=nf(t.tooltip.color)))),this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-(e=this.canvas.frame.canvas,e.getBoundingClientRect().left),y:t.y-Jp(this.canvas.frame.canvas)};var e}},{key:"onTouch",value:function(t){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,i),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e)}},{key:"onDoubleTap",value:function(t){var e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,e)}},{key:"onHold",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,i),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e),this.selectionHandler.generateClickEvent("hold",t,e)}},{key:"onRelease",value:function(t){if((new Date).valueOf()-this.touchTime>10){var e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,e),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(t){var e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,e)}},{key:"checkSelectionChanges",value:function(t){!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}},{key:"_determineDifference",value:function(t,e){var i=function(t,e){for(var i=[],o=0;o<t.length;o++){var n=t[o];-1===pI(e).call(e,n)&&i.push(n)}return i};return{nodes:i(t.nodes,e.nodes),edges:i(t.edges,e.edges)}}},{key:"onDragStart",value:function(t){if(!this.drag.dragging){void 0===this.drag.pointer&&this.onTouch(t);var e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=fo({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;var i=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)}}else if(void 0!==e&&!0===this.options.dragNodes){this.drag.nodeId=e.id,!1===e.isSelected()&&this.selectionHandler.setSelection({nodes:[e.id]}),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);var o,n=function(t,e){var i=void 0!==Zu&&og(t)||t["@@iterator"];if(!i){if(gd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return hT(t,e);var o=ed(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?$a(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?hT(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}(this.selectionHandler.getSelectedNodes());try{for(n.s();!(o=n.n()).done;){var r=o.value,s={id:r.id,node:r,x:r.x,y:r.y,xFixed:r.options.fixed.x,yFixed:r.options.fixed.y};r.options.fixed.x=!0,r.options.fixed.y=!0,this.drag.selection.push(s)}}catch(t){n.e(t)}finally{n.f()}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(t){var e=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),o=this.drag.selection;if(o&&o.length&&!0===this.options.dragNodes){this.selectionHandler.generateClickEvent("dragging",t,i);var n=i.x-this.drag.pointer.x,r=i.y-this.drag.pointer.y;Md(o).call(o,(function(t){var i=t.node;!1===t.xFixed&&(i.x=e.canvas._XconvertDOMtoCanvas(e.canvas._XconvertCanvasToDOM(t.x)+n)),!1===t.yFixed&&(i.y=e.canvas._YconvertDOMtoCanvas(e.canvas._YconvertCanvasToDOM(t.y)+r))})),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.emitter.emit("_requestRedraw")}if(!0===this.options.dragView&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);var s=i.x-this.drag.pointer.x,a=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+s,y:this.drag.translation.y+a},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(t){var e=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var i;this.body.selectionBox.show=!1;var o=this.body.selectionBox.position,n={minX:Math.min(o.start.x,o.end.x),minY:Math.min(o.start.y,o.end.y),maxX:Math.max(o.start.x,o.end.x),maxY:Math.max(o.start.y,o.end.y)},r=FA(i=this.body.nodeIndices).call(i,(function(t){var i=e.body.nodes[t];return i.x>=n.minX&&i.x<=n.maxX&&i.y>=n.minY&&i.y<=n.maxY}));Md(r).call(r,(function(t){return e.selectionHandler.selectObject(e.body.nodes[t])}));var s=this.getPointer(t.center);this.selectionHandler.commitAndEmit(s,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var a=this.drag.selection;a&&a.length?(Md(a).call(a,(function(t){t.node.options.fixed.x=t.xFixed,t.node.options.fixed.y=t.yFixed})),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(t){var e=this.getPointer(t.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,e)}},{key:"zoom",value:function(t,e){if(!0===this.options.zoomView){var i=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var o=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(o=this.canvas.DOMtoCanvas(this.drag.pointer));var n=this.body.view.translation,r=t/i,s=(1-r)*e.x+n.x*r,a=(1-r)*e.y+n.y*r;if(this.body.view.scale=t,this.body.view.translation={x:s,y:a},null!=o){var g=this.canvas.canvasToDOM(o);this.drag.pointer.x=g.x,this.drag.pointer.y=g.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}},{key:"onMouseWheel",value:function(t){if(!0===this.options.zoomView){if(0!==t.deltaY){var e=this.body.view.scale;e*=1+(t.deltaY<0?1:-1)*(.1*this.options.zoomSpeed);var i=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(e,i)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var e=this,i=this.getPointer({x:t.clientX,y:t.clientY}),o=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(i),!1===this.popup.hidden&&(o=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),this.options.keyboard.autoFocus&&!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===o&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=HI((function(){return e._checkShowPopup(i)}),this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var e=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),o={left:e,top:i,right:e,bottom:i},n=void 0===this.popupObj?void 0:this.popupObj.id,r=!1,s="node";if(void 0===this.popupObj){for(var a,g=this.body.nodeIndices,l=this.body.nodes,h=[],c=0;c<g.length;c++)!0===(a=l[g[c]]).isOverlappingWith(o)&&(r=!0,void 0!==a.getTitle()&&h.push(g[c]));h.length>0&&(this.popupObj=l[h[h.length-1]],r=!0)}if(void 0===this.popupObj&&!1===r){for(var u,d=this.body.edgeIndices,A=this.body.edges,I=[],C=0;C<d.length;C++)!0===(u=A[d[C]]).isOverlappingWith(o)&&!0===u.connected&&void 0!==u.getTitle()&&I.push(d[C]);I.length>0&&(this.popupObj=A[I[I.length-1]],s="edge")}void 0!==this.popupObj?this.popupObj.id!==n&&(void 0===this.popup&&(this.popup=new wf(this.canvas.frame)),this.popup.popupTargetType=s,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var e=this.selectionHandler._pointerToPositionObject(t),i=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e))){var o=this.selectionHandler.getNodeAt(t);i=void 0!==o&&o.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(t)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));!1===i&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),t}();Am("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),Nm);var uT=n(ot.Set),dT=f,AT=Cm,IT=Nv.getWeakData,CT=Qv,pT=ii,fT=Y,vT=it,mT=Xv,bT=qt,yT=Bn.set,_T=Bn.getterFor,TT=_l.find,ET=_l.findIndex,wT=dT([].splice),kT=0,OT=function(t){return t.frozen||(t.frozen=new ST)},ST=function(){this.entries=[]},RT=function(t,e){return TT(t.entries,(function(t){return t[0]===e}))};ST.prototype={get:function(t){var e=RT(this,t);if(e)return e[1]},has:function(t){return!!RT(this,t)},set:function(t,e){var i=RT(this,t);i?i[1]=e:this.entries.push([t,e])},delete:function(t){var e=ET(this.entries,(function(e){return e[0]===t}));return~e&&wT(this.entries,e,1),!!~e}};var xT,DT={getConstructor:function(t,e,i,o){var n=t((function(t,n){CT(t,r),yT(t,{type:e,id:kT++,frozen:void 0}),fT(n)||mT(n,t[o],{that:t,AS_ENTRIES:i})})),r=n.prototype,s=_T(e),a=function(t,e,i){var o=s(t),n=IT(pT(e),!0);return!0===n?OT(o).set(e,i):n[o.id]=i,t};return AT(r,{delete:function(t){var e=s(this);if(!vT(t))return!1;var i=IT(t);return!0===i?OT(e).delete(t):i&&bT(i,e.id)&&delete i[e.id]},has:function(t){var e=s(this);if(!vT(t))return!1;var i=IT(t);return!0===i?OT(e).has(t):i&&bT(i,e.id)}}),AT(r,i?{get:function(t){var e=s(this);if(vT(t)){var i=IT(t);return!0===i?OT(e).get(t):i?i[e.id]:void 0}},set:function(t,e){return a(this,t,e)}}:{add:function(t){return a(this,t,!0)}}),n}},MT=fv,NT=s,LT=f,PT=Cm,$T=Nv,BT=Am,FT=DT,zT=it,HT=Bn.enforce,GT=a,UT=bn,VT=Object,WT=Array.isArray,jT=VT.isExtensible,YT=VT.isFrozen,XT=VT.isSealed,ZT=VT.freeze,KT=VT.seal,QT={},JT={},qT=!NT.ActiveXObject&&"ActiveXObject"in NT,tE=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},eE=BT("WeakMap",tE,FT),iE=eE.prototype,oE=LT(iE.set);if(UT)if(qT){xT=FT.getConstructor(tE,"WeakMap",!0),$T.enable();var nE=LT(iE.delete),rE=LT(iE.has),sE=LT(iE.get);PT(iE,{delete:function(t){if(zT(t)&&!jT(t)){var e=HT(this);return e.frozen||(e.frozen=new xT),nE(this,t)||e.frozen.delete(t)}return nE(this,t)},has:function(t){if(zT(t)&&!jT(t)){var e=HT(this);return e.frozen||(e.frozen=new xT),rE(this,t)||e.frozen.has(t)}return rE(this,t)},get:function(t){if(zT(t)&&!jT(t)){var e=HT(this);return e.frozen||(e.frozen=new xT),rE(this,t)?sE(this,t):e.frozen.get(t)}return sE(this,t)},set:function(t,e){if(zT(t)&&!jT(t)){var i=HT(this);i.frozen||(i.frozen=new xT),rE(this,t)?oE(this,t,e):i.frozen.set(t,e)}else oE(this,t,e);return this}})}else MT&&GT((function(){var t=ZT([]);return oE(new eE,t,1),!YT(t)}))&&PT(iE,{set:function(t,e){var i;return WT(t)&&(YT(t)?i=QT:XT(t)&&(i=JT)),oE(this,t,e),i===QT&&ZT(t),i===JT&&KT(t),this}});var aE,gE,lE,hE,cE,uE=n(ot.WeakMap);function dE(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)}function AE(t,e,i,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(t,i):n?n.value=i:e.set(t,i),i}function IE(t,e){var i=void 0!==Zu&&og(t)||t["@@iterator"];if(!i){if(gd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return CE(t,e);var o=ed(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?$a(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?CE(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function CE(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function pE(t,e){var i,o=new uT,n=IE(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;t.has(r)||o.add(r)}}catch(t){n.e(t)}finally{n.f()}return o}"function"==typeof SuppressedError&&SuppressedError;var fE=function(){function t(){ng(this,t),aE.set(this,new uT),gE.set(this,new uT)}return au(t,[{key:"size",get:function(){return dE(this,gE,"f").size}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var o=0,n=e;o<n.length;o++){var r=n[o];dE(this,gE,"f").add(r)}}},{key:"delete",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var o=0,n=e;o<n.length;o++){var r=n[o];dE(this,gE,"f").delete(r)}}},{key:"clear",value:function(){dE(this,gE,"f").clear()}},{key:"getSelection",value:function(){return Xu(dE(this,gE,"f"))}},{key:"getChanges",value:function(){return{added:Xu(pE(dE(this,aE,"f"),dE(this,gE,"f"))),deleted:Xu(pE(dE(this,gE,"f"),dE(this,aE,"f"))),previous:Xu(new uT(dE(this,aE,"f"))),current:Xu(new uT(dE(this,gE,"f")))}}},{key:"commit",value:function(){var t=this.getChanges();AE(this,aE,dE(this,gE,"f"),"f"),AE(this,gE,new uT(dE(this,aE,"f")),"f");var e,i=IE(t.added);try{for(i.s();!(e=i.n()).done;)e.value.select()}catch(t){i.e(t)}finally{i.f()}var o,n=IE(t.deleted);try{for(n.s();!(o=n.n()).done;)o.value.unselect()}catch(t){n.e(t)}finally{n.f()}return t}}]),t}();aE=new uE,gE=new uE;var vE=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};ng(this,t),lE.set(this,new fE),hE.set(this,new fE),cE.set(this,void 0),AE(this,cE,e,"f")}return au(t,[{key:"sizeNodes",get:function(){return dE(this,lE,"f").size}},{key:"sizeEdges",get:function(){return dE(this,hE,"f").size}},{key:"getNodes",value:function(){return dE(this,lE,"f").getSelection()}},{key:"getEdges",value:function(){return dE(this,hE,"f").getSelection()}},{key:"addNodes",value:function(){var t;(t=dE(this,lE,"f")).add.apply(t,arguments)}},{key:"addEdges",value:function(){var t;(t=dE(this,hE,"f")).add.apply(t,arguments)}},{key:"deleteNodes",value:function(t){dE(this,lE,"f").delete(t)}},{key:"deleteEdges",value:function(t){dE(this,hE,"f").delete(t)}},{key:"clear",value:function(){dE(this,lE,"f").clear(),dE(this,hE,"f").clear()}},{key:"commit",value:function(){for(var t,e,i={nodes:dE(this,lE,"f").commit(),edges:dE(this,hE,"f").commit()},o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=dE(this,cE,"f")).call.apply(t,td(e=[this,i]).call(e,n)),i}}]),t}();function mE(t,e){var i=void 0!==Zu&&og(t)||t["@@iterator"];if(!i){if(gd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return bE(t,e);var o=ed(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?$a(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?bE(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function bE(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}lE=new uE,hE=new uE,cE=new uE;var yE=function(){function t(e,i){var o=this;ng(this,t),this.body=e,this.canvas=i,this._selectionAccumulator=new vE,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},fo(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",(function(){o.updateSelection()}))}return au(t,[{key:"setOptions",value:function(t){void 0!==t&&Xp(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,t)}},{key:"selectOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),void 0!==i&&(e=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return e}},{key:"selectAdditionalOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);void 0!==i&&(e=!0,!0===i.isSelected()?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return e}},{key:"_initBaseEvent",value:function(t,e){var i={};return i.pointer={DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)},i.event=t,i}},{key:"generateClickEvent",value:function(t,e,i,o){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this._initBaseEvent(e,i);if(!0===n)r.nodes=[],r.edges=[];else{var s=this.getSelection();r.nodes=s.nodes,r.edges=s.edges}void 0!==o&&(r.previousSelection=o),"click"==t&&(r.items=this.getClickedItems(i)),void 0!==e.controlEdge&&(r.controlEdge=e.controlEdge),this.body.emitter.emit(t,r)}},{key:"selectObject",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;return void 0!==t&&(t instanceof Yy?(!0===i&&(e=this._selectionAccumulator).addEdges.apply(e,Xu(t.edges)),this._selectionAccumulator.addNodes(t)):this._selectionAccumulator.addEdges(t),!0)}},{key:"deselectObject",value:function(t){!0===t.isSelected()&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var e=[],i=this.body.nodes,o=0;o<this.body.nodeIndices.length;o++){var n=this.body.nodeIndices[o];i[n].isOverlappingWith(t)&&e.push(n)}return e}},{key:"_pointerToPositionObject",value:function(t){var e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}},{key:"getNodeAt",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._pointerToPositionObject(t),o=this._getAllNodesOverlappingWith(i);return o.length>0?!0===e?this.body.nodes[o[o.length-1]]:o[o.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(t,e){for(var i=this.body.edges,o=0;o<this.body.edgeIndices.length;o++){var n=this.body.edgeIndices[o];i[n].isOverlappingWith(t)&&e.push(n)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var e=[];return this._getEdgesOverlappingWith(t,e),e}},{key:"getEdgeAt",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.canvas.DOMtoCanvas(t),o=10,n=null,r=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var a=this.body.edgeIndices[s],g=r[a];if(g.connected){var l=g.from.x,h=g.from.y,c=g.to.x,u=g.to.y,d=g.edgeType.getDistanceToEdge(l,h,c,u,i.x,i.y);d<o&&(n=a,o=d)}}return null!==n?!0===e?this.body.edges[n]:n:void 0}},{key:"_addToHover",value:function(t){t instanceof Yy?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){var e;t instanceof Yy?(this._selectionAccumulator.deleteNodes(t),(e=this._selectionAccumulator).deleteEdges.apply(e,Xu(t.edges))):this._selectionAccumulator.deleteEdges(t)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.hover=!0,this._addToHover(i)}}},{key:"emitBlurEvent",value:function(t,e,i){var o=this._initBaseEvent(t,e);!0===i.hover&&(i.hover=!1,i instanceof Yy?(o.node=i.id,this.body.emitter.emit("blurNode",o)):(o.edge=i.id,this.body.emitter.emit("blurEdge",o)))}},{key:"emitHoverEvent",value:function(t,e,i){var o=this._initBaseEvent(t,e),n=!1;return!1===i.hover&&(i.hover=!0,this._addToHover(i),n=!0,i instanceof Yy?(o.node=i.id,this.body.emitter.emit("hoverNode",o)):(o.edge=i.id,this.body.emitter.emit("hoverEdge",o))),n}},{key:"hoverObject",value:function(t,e){var i=this.getNodeAt(e);void 0===i&&(i=this.getEdgeAt(e));var o=!1;for(var n in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,n)&&(void 0===i||i instanceof Yy&&i.id!=n||i instanceof P_)&&(this.emitBlurEvent(t,e,this.hoverObj.nodes[n]),delete this.hoverObj.nodes[n],o=!0);for(var r in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,r)&&(!0===o?(this.hoverObj.edges[r].hover=!1,delete this.hoverObj.edges[r]):(void 0===i||i instanceof P_&&i.id!=r||i instanceof Yy&&!i.hover)&&(this.emitBlurEvent(t,e,this.hoverObj.edges[r]),delete this.hoverObj.edges[r],o=!0));if(void 0!==i){var s=pd(this.hoverObj.edges).length,a=pd(this.hoverObj.nodes).length;(o||i instanceof P_&&0===s&&0===a||i instanceof Yy&&0===s&&0===a)&&(o=this.emitHoverEvent(t,e,i)),i instanceof Yy&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(i)}!0===o&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(t,e){var i=!1,o=this._selectionAccumulator.commit(),n={nodes:o.nodes.previous,edges:o.edges.previous};o.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",e,t,n),i=!0),o.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",e,t,n),i=!0),o.nodes.added.length>0&&(this.generateClickEvent("selectNode",e,t),i=!0),o.edges.added.length>0&&(this.generateClickEvent("selectEdge",e,t),i=!0),!0===i&&this.generateClickEvent("select",e,t)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var t;return Ad(t=this._selectionAccumulator.getNodes()).call(t,(function(t){return t.id}))}},{key:"getSelectedEdgeIds",value:function(){var t;return Ad(t=this._selectionAccumulator.getEdges()).call(t,(function(t){return t.id}))}},{key:"setSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((e.unselectAll||void 0===e.unselectAll)&&this.unselectAll(),t.nodes){var i,o=mE(t.nodes);try{for(o.s();!(i=o.n()).done;){var n=i.value,r=this.body.nodes[n];if(!r)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(r,e.highlightEdges)}}catch(t){o.e(t)}finally{o.f()}}if(t.edges){var s,a=mE(t.edges);try{for(a.s();!(s=a.n()).done;){var g=s.value,l=this.body.edges[g];if(!l)throw new RangeError('Edge with id "'+g+'" not found');this.selectObject(l)}}catch(t){a.e(t)}finally{a.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:e})}},{key:"selectEdges",value:function(t){if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(var e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}},{key:"getClickedItems",value:function(t){for(var e=this.canvas.DOMtoCanvas(t),i=[],o=this.body.nodeIndices,n=this.body.nodes,r=o.length-1;r>=0;r--){var s=n[o[r]].getItemsOnPoint(e);i.push.apply(i,s)}for(var a=this.body.edgeIndices,g=this.body.edges,l=a.length-1;l>=0;l--){var h=g[a[l]].getItemsOnPoint(e);i.push.apply(i,h)}return i}}]),t}(),_E=Kg,TE=Math.floor,EE=function(t,e){var i=t.length,o=TE(i/2);return i<8?wE(t,e):kE(t,EE(_E(t,0,o),e),EE(_E(t,o),e),e)},wE=function(t,e){for(var i,o,n=t.length,r=1;r<n;){for(o=r,i=t[r];o&&e(t[o-1],i)>0;)t[o]=t[--o];o!==r++&&(t[o]=i)}return t},kE=function(t,e,i,o){for(var n=e.length,r=i.length,s=0,a=0;s<n||a<r;)t[s+a]=s<n&&a<r?o(e[s],i[a])<=0?e[s++]:i[a++]:s<n?e[s++]:i[a++];return t},OE=EE,SE=ht.match(/firefox\/(\d+)/i),RE=!!SE&&+SE[1],xE=/MSIE|Trident/.test(ht),DE=ht.match(/AppleWebKit\/(\d+)\./),ME=!!DE&&+DE[1],NE=Oi,LE=f,PE=Mt,$E=Kt,BE=Fi,FE=Wd,zE=ln,HE=a,GE=OE,UE=_d,VE=RE,WE=xE,jE=pt,YE=ME,XE=[],ZE=LE(XE.sort),KE=LE(XE.push),QE=HE((function(){XE.sort(void 0)})),JE=HE((function(){XE.sort(null)})),qE=UE("sort"),tw=!HE((function(){if(jE)return jE<70;if(!(VE&&VE>3)){if(WE)return!0;if(YE)return YE<603;var t,e,i,o,n="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(o=0;o<47;o++)XE.push({k:e+o,v:i})}for(XE.sort((function(t,e){return e.v-t.v})),o=0;o<XE.length;o++)e=XE[o].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}}));NE({target:"Array",proto:!0,forced:QE||!JE||!qE||!tw},{sort:function(t){void 0!==t&&PE(t);var e=$E(this);if(tw)return void 0===t?ZE(e):ZE(e,t);var i,o,n=[],r=BE(e);for(o=0;o<r;o++)o in e&&KE(n,e[o]);for(GE(n,function(t){return function(e,i){return void 0===i?-1:void 0===e?1:void 0!==t?+t(e,i)||0:zE(e)>zE(i)?1:-1}}(t)),i=BE(n),o=0;o<i;)e[o]=n[o++];for(;o<r;)FE(e,o++);return e}});var ew=Mo("Array").sort,iw=lt,ow=ew,nw=Array.prototype,rw=n((function(t){var e=t.sort;return t===nw||iw(nw,t)&&e===nw.sort?ow:e})),sw=Mt,aw=Kt,gw=j,lw=Fi,hw=TypeError,cw=function(t){return function(e,i,o,n){sw(i);var r=aw(e),s=gw(r),a=lw(r),g=t?a-1:0,l=t?-1:1;if(o<2)for(;;){if(g in s){n=s[g],g+=l;break}if(g+=l,t?g<0:a<=g)throw new hw("Reduce of empty array with no initial value")}for(;t?g>=0:a>g;g+=l)g in s&&(n=i(n,s[g],g,r));return n}},uw={left:cw(!1),right:cw(!0)},dw="process"===y(s.process),Aw=uw.left;Oi({target:"Array",proto:!0,forced:!dw&&pt>79&&pt<83||!_d("reduce")},{reduce:function(t){var e=arguments.length;return Aw(this,t,e,e>1?arguments[1]:void 0)}});var Iw=Mo("Array").reduce,Cw=lt,pw=Iw,fw=Array.prototype,vw=n((function(t){var e=t.reduce;return t===fw||Cw(fw,t)&&e===fw.reduce?pw:e}));function mw(t){var e=function(){if("undefined"==typeof Reflect||!Iy)return!1;if(Iy.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Iy(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=_y(t);if(e){var n=_y(this).constructor;i=Iy(o,arguments,n)}else i=o.apply(this,arguments);return by(this,i)}}var bw=function(){function t(){ng(this,t)}return au(t,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(t,e,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,e){this.fake_use(t,e),this.abstract()}},{key:"shift",value:function(t,e){this.fake_use(t,e),this.abstract()}}]),t}(),yw=function(t){my(i,t);var e=mw(i);function i(t){var o;return ng(this,i),(o=e.call(this)).layout=t,o}return au(i,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(t){return t.x}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.x=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_x,max:e.max_x}}},{key:"sort",value:function(t){rw(t).call(t,(function(t,e){return t.x-e.x}))}},{key:"fix",value:function(t,e){t.y=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.y=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].x+=e}}]),i}(bw),_w=function(t){my(i,t);var e=mw(i);function i(t){var o;return ng(this,i),(o=e.call(this)).layout=t,o}return au(i,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(t){return t.y}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.y=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_y,max:e.max_y}}},{key:"sort",value:function(t){rw(t).call(t,(function(t,e){return t.y-e.y}))}},{key:"fix",value:function(t,e){t.x=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.x=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].y+=e}}]),i}(bw),Tw=_l.every;Oi({target:"Array",proto:!0,forced:!_d("every")},{every:function(t){return Tw(this,t,arguments.length>1?arguments[1]:void 0)}});var Ew=Mo("Array").every,ww=lt,kw=Ew,Ow=Array.prototype,Sw=n((function(t){var e=t.every;return t===Ow||ww(Ow,t)&&e===Ow.every?kw:e}));function Rw(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function xw(t,e){var i=new uT;return Md(t).call(t,(function(t){var e;Md(e=t.edges).call(e,(function(t){t.connected&&i.add(t)}))})),Md(i).call(i,(function(t){var i=t.from.id,o=t.to.id;null==e[i]&&(e[i]=0),(null==e[o]||e[i]>=e[o])&&(e[o]=e[i]+1)})),e}function Dw(t,e,i,o){var n,r,s=mI(null),a=vw(n=Xu(Wb(o).call(o))).call(n,(function(t,e){return t+1+e.edges.length}),0),g=i+"Id",l="to"===i?1:-1,h=function(t,e){var i=void 0!==Zu&&og(t)||t["@@iterator"];if(!i){if(gd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Rw(t,e);var o=ed(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?$a(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Rw(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}(o);try{var c,u=function(){var n=Yu(r.value,2),h=n[0],c=n[1];if(!o.has(h)||!t(c))return 0;s[h]=0;for(var u,d,A=[c],I=0,C=function(){var t,n;if(!o.has(h))return 0;var r=s[u.id]+l;if(Md(t=FA(n=u.edges).call(n,(function(t){return t.connected&&t.to!==t.from&&t[i]!==u&&o.has(t.toId)&&o.has(t.fromId)}))).call(t,(function(t){var o=t[g],n=s[o];(null==n||e(r,n))&&(s[o]=r,A.push(t[i]))})),I>a)return{v:{v:xw(o,s)}};++I};u=A.pop();)if(0!==(d=C())&&d)return d.v};for(h.s();!(r=h.n()).done;)if(0!==(c=u())&&c)return c.v}catch(t){h.e(t)}finally{h.f()}return s}var Mw=function(){function t(){ng(this,t),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return au(t,[{key:"addRelation",value:function(t,e){void 0===this.childrenReference[t]&&(this.childrenReference[t]=[]),this.childrenReference[t].push(e),void 0===this.parentReference[e]&&(this.parentReference[e]=[]),this.parentReference[e].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,e){void 0!==e&&void 0===this.trees[t.id]&&(this.trees[t.id]=e,this.treeIndex=Math.max(e,this.treeIndex))}},{key:"ensureLevel",value:function(t){void 0===this.levels[t]&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var e=this,i={};return function t(o){if(void 0!==i[o])return i[o];var n=e.levels[o];if(e.childrenReference[o]){var r=e.childrenReference[o];if(r.length>0)for(var s=0;s<r.length;s++)n=Math.max(n,t(r[s]))}return i[o]=n,n}(t)}},{key:"levelDownstream",value:function(t,e){void 0===this.levels[e.id]&&(void 0===this.levels[t.id]&&(this.levels[t.id]=0),this.levels[e.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var e=1e9;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&void 0!==this.levels[i]&&(e=Math.min(this.levels[i],e));for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&void 0!==this.levels[o]&&(this.levels[o]-=e)}},{key:"getTreeSize",value:function(t,e){var i=1e9,o=-1e9,n=1e9,r=-1e9;for(var s in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,s)&&this.trees[s]===e){var a=t[s];i=Math.min(a.x,i),o=Math.max(a.x,o),n=Math.min(a.y,n),r=Math.max(a.y,r)}return{min_x:i,max_x:o,min_y:n,max_y:r}}},{key:"hasSameParent",value:function(t,e){var i=this.parentReference[t.id],o=this.parentReference[e.id];if(void 0===i||void 0===o)return!1;for(var n=0;n<i.length;n++)for(var r=0;r<o.length;r++)if(i[n]==o[r])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,e){return this.trees[t.id]===this.trees[e.id]}},{key:"getLevels",value:function(){return pd(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,e){void 0===this.distributionOrdering[e]&&(this.distributionOrdering[e]=[]);var i=!1,o=this.distributionOrdering[e];for(var n in o)if(o[n]===t){i=!0;break}i||(this.distributionOrdering[e].push(t),this.distributionIndex[t.id]=this.distributionOrdering[e].length-1)}}]),t}(),Nw=function(){function t(e){ng(this,t),this.body=e,this._resetRNG(Math.random()+":"+bd()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},fo(this.options,this.defaultOptions),this.bindEventListeners()}return au(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",(function(){t.setupHierarchicalLayout()})),this.body.emitter.on("_dataLoaded",(function(){t.layoutNetwork()})),this.body.emitter.on("_resetHierarchicalLayout",(function(){t.setupHierarchicalLayout()})),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",(function(){if(!0===t.options.hierarchical.enabled){var e=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",e,!1)}}))}},{key:"setOptions",value:function(t,e){if(void 0!==t){var i=this.options.hierarchical,o=i.enabled;if(Xp(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),cf(this.options,t,"hierarchical"),void 0!==t.randomSeed&&this._resetRNG(t.randomSeed),!0===i.enabled)return!0===o&&this.body.emitter.emit("refresh",!0),"RL"===i.direction||"DU"===i.direction?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(!0===o)return this.body.emitter.emit("refresh"),Kp(e,this.optionsBackup)}return e}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=Pp(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(!0===this.options.hierarchical.enabled){var e=this.optionsBackup.physics;void 0===t.physics||!0===t.physics?(t.physics={enabled:void 0===e.enabled||e.enabled,solver:"hierarchicalRepulsion"},e.enabled=void 0===e.enabled||e.enabled,e.solver=e.solver||"barnesHut"):"object"===ou(t.physics)?(e.enabled=void 0===t.physics.enabled||t.physics.enabled,e.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):!1!==t.physics&&(e.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(void 0===t.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(void 0===t.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if("boolean"==typeof t.edges.smooth)this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var o=t.edges.smooth;void 0!==o.type&&"dynamic"!==o.type&&(i=o.type),this.optionsBackup.edges={smooth:{enabled:void 0===o.enabled||o.enabled,type:void 0===o.type?"dynamic":o.type,roundness:void 0===o.roundness?.5:o.roundness,forceDirection:void 0!==o.forceDirection&&o.forceDirection}},t.edges.smooth={enabled:void 0===o.enabled||o.enabled,type:i,roundness:void 0===o.roundness?.5:o.roundness,forceDirection:void 0!==o.forceDirection&&o.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"positionInitially",value:function(t){if(!0!==this.options.hierarchical.enabled){this._resetRNG(this.initialRandomSeed);for(var e=t.length+50,i=0;i<t.length;i++){var o=t[i],n=2*Math.PI*this._rng();void 0===o.x&&(o.x=e*Math.cos(n)),void 0===o.y&&(o.y=e*Math.sin(n))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var t=this.body.nodeIndices,e=0,i=0;i<t.length;i++)!0===this.body.nodes[t[i]].predefinedPosition&&(e+=1);if(e<.5*t.length){var o=0,n=this.options.clusterThreshold,r={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>n){for(var s=t.length;t.length>n&&o<=10;){o+=1;var a=t.length;if(o%3==0?this.body.modules.clustering.clusterBridges(r):this.body.modules.clustering.clusterOutliers(r),a==t.length&&o%3!=0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*s)})}o>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var g=0;g<t.length;g++){var l=this.body.nodes[t[g]];!1===l.predefinedPosition&&(l.x+=70*(.5-this._rng()),l.y+=70*(.5-this._rng()))}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=q_.getRangeCore(this.body.nodes,this.body.nodeIndices),e=q_.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var o=this.body.nodes[this.body.nodeIndices[i]];o.x-=e.x,o.y-=e.y}}},{key:"_declusterAll",value:function(){for(var t=!0;!0===t;){t=!1;for(var e=0;e<this.body.nodeIndices.length;e++)!0===this.body.nodes[this.body.nodeIndices[e]].isCluster&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));!0===t&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&this.body.nodeIndices.length>0){var t,e,i=!1,o=!1;for(e in this.lastNodeOnLevel={},this.hierarchical=new Mw,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&(void 0!==(t=this.body.nodes[e]).options.level?(i=!0,this.hierarchical.levels[e]=t.options.level):o=!0);if(!0===o&&!0===i)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===o){var n=this.options.hierarchical.sortMethod;"hubsize"===n?this._determineLevelsByHubsize():"directed"===n?this._determineLevelsDirected():"custom"===n&&this._determineLevelsCustomCallback()}for(var r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.hierarchical.ensureLevel(r);var s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,e=!1,i={},o=function(e,i){var o=t.hierarchical.trees;for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&o[n]===e&&t.direction.shift(n,i)},n=function e(i,o){if(!o[i.id]&&(o[i.id]=!0,t.hierarchical.childrenReference[i.id])){var n=t.hierarchical.childrenReference[i.id];if(n.length>0)for(var r=0;r<n.length;r++)e(t.body.nodes[n[r]],o)}},r=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e9,o=1e9,n=1e9,r=1e9,s=-1e9;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var g=t.body.nodes[a],l=t.hierarchical.levels[g.id],h=t.direction.getPosition(g),c=Yu(t._getSpaceAroundNode(g,e),2),u=c[0],d=c[1];o=Math.min(u,o),n=Math.min(d,n),l<=i&&(r=Math.min(h,r),s=Math.max(h,s))}return[r,s,o,n]},s=function(e,i,o){for(var n=t.hierarchical,r=0;r<i.length;r++){var s=i[r],a=n.distributionOrdering[s];if(a.length>1)for(var g=0;g<a.length-1;g++){var l=a[g],h=a[g+1];n.hasSameParent(l,h)&&n.inSameSubNetwork(l,h)&&e(l,h,o)}}},a=function(i,o){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.direction.getPosition(i),g=t.direction.getPosition(o),l=Math.abs(g-a),h=t.options.hierarchical.nodeSpacing;if(l>h){var c={},u={};n(i,c),n(o,u);var d=function(e,i){var o=t.hierarchical.getMaxLevel(e.id),n=t.hierarchical.getMaxLevel(i.id);return Math.min(o,n)}(i,o),A=r(c,d),I=r(u,d),C=A[1],p=I[0],f=I[2];if(Math.abs(C-p)>h){var v=C-p+h;v<-f+h&&(v=-f+h),v<0&&(t._shiftBlock(o.id,v),e=!0,!0===s&&t._centerParent(o))}}},g=function(o,s){for(var a=s.id,g=s.edges,l=t.hierarchical.levels[s.id],h=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,c={},u=[],d=0;d<g.length;d++){var A=g[d];if(A.toId!=A.fromId){var I=A.toId==a?A.from:A.to;c[g[d].id]=I,t.hierarchical.levels[I.id]<l&&u.push(A)}}var C=function(e,i){for(var o=0,n=0;n<i.length;n++)if(void 0!==c[i[n].id]){var r=t.direction.getPosition(c[i[n].id])-e;o+=r/Math.sqrt(r*r+h)}return o},p=function(e,i){for(var o=0,n=0;n<i.length;n++)if(void 0!==c[i[n].id]){var r=t.direction.getPosition(c[i[n].id])-e;o-=h*Math.pow(r*r+h,-1.5)}return o},f=function(e,i){for(var o=t.direction.getPosition(s),n={},r=0;r<e;r++){var a=C(o,i),g=p(o,i);if(void 0!==n[o-=Math.max(-40,Math.min(40,Math.round(a/g)))])break;n[o]=r}return o},v=f(o,u);!function(o){var a=t.direction.getPosition(s);if(void 0===i[s.id]){var g={};n(s,g),i[s.id]=g}var l=r(i[s.id]),h=l[2],c=l[3],u=o-a,d=0;u>0?d=Math.min(u,c-t.options.hierarchical.nodeSpacing):u<0&&(d=-Math.min(-u,h-t.options.hierarchical.nodeSpacing)),0!=d&&(t._shiftBlock(s.id,d),e=!0)}(v),function(i){var o=t.direction.getPosition(s),n=Yu(t._getSpaceAroundNode(s),2),r=n[0],a=n[1],g=i-o,l=o;g>0?l=Math.min(o+(a-t.options.hierarchical.nodeSpacing),i):g<0&&(l=Math.max(o-(r-t.options.hierarchical.nodeSpacing),i)),l!==o&&(t.direction.setPosition(s,l),e=!0)}(v=f(o,g))};!0===this.options.hierarchical.blockShifting&&(function(){var i=t.hierarchical.getLevels();i=Gd(i).call(i);for(var o=0;o<5&&(e=!1,s(a,i,!0),!0===e);o++);}(),function(){for(var e in t.body.nodes)Object.prototype.hasOwnProperty.call(t.body.nodes,e)&&t._centerParent(t.body.nodes[e])}()),!0===this.options.hierarchical.edgeMinimization&&function(){var i=t.hierarchical.getLevels();i=Gd(i).call(i);for(var o=0;o<20;o++){e=!1;for(var n=0;n<i.length;n++)for(var r=i[n],s=t.hierarchical.distributionOrdering[r],a=0;a<s.length;a++)g(1e3,s[a]);if(!0!==e)break}}(),!0===this.options.hierarchical.parentCentralization&&function(){var e=t.hierarchical.getLevels();e=Gd(e).call(e);for(var i=0;i<e.length;i++)for(var o=e[i],n=t.hierarchical.distributionOrdering[o],r=0;r<n.length;r++)t._centerParent(n[r])}(),function(){for(var e=function(){for(var e=[],i=0;i<t.hierarchical.numTrees();i++)e.push(t.direction.getTreeSize(i));return e}(),i=0,n=0;n<e.length-1;n++)i+=e[n].max-e[n+1].min+t.options.hierarchical.treeSpacing,o(n+1,i)}()}},{key:"_getSpaceAroundNode",value:function(t,e){var i=!0;void 0===e&&(i=!1);var o=this.hierarchical.levels[t.id];if(void 0!==o){var n=this.hierarchical.distributionIndex[t.id],r=this.direction.getPosition(t),s=this.hierarchical.distributionOrdering[o],a=1e9,g=1e9;if(0!==n){var l=s[n-1];(!0===i&&void 0===e[l.id]||!1===i)&&(a=r-this.direction.getPosition(l))}if(n!=s.length-1){var h=s[n+1];if(!0===i&&void 0===e[h.id]||!1===i){var c=this.direction.getPosition(h);g=Math.min(g,c-r)}}return[a,g]}return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var e=this.hierarchical.parentReference[t.id],i=0;i<e.length;i++){var o=e[i],n=this.body.nodes[o],r=this.hierarchical.childrenReference[o];if(void 0!==r){var s=this._getCenterPosition(r),a=this.direction.getPosition(n),g=Yu(this._getSpaceAroundNode(n),2),l=g[0],h=g[1],c=a-s;(c<0&&Math.abs(c)<h-this.options.hierarchical.nodeSpacing||c>0&&Math.abs(c)<l-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(n,s)}}}},{key:"_placeNodesByHierarchy",value:function(t){for(var e in this.positionedNodes={},t)if(Object.prototype.hasOwnProperty.call(t,e)){var i,o=pd(t[e]);o=this._indexArrayToNodes(o),rw(i=this.direction).call(i,o);for(var n=0,r=0;r<o.length;r++){var s=o[r];if(void 0===this.positionedNodes[s.id]){var a=this.options.hierarchical.nodeSpacing,g=a*n;n>0&&(g=this.direction.getPosition(o[r-1])+a),this.direction.setPosition(s,g,e),this._validatePositionAndContinue(s,e,g),n++}}}}},{key:"_placeBranchNodes",value:function(t,e){var i,o=this.hierarchical.childrenReference[t];if(void 0!==o){for(var n=[],r=0;r<o.length;r++)n.push(this.body.nodes[o[r]]);rw(i=this.direction).call(i,n);for(var s=0;s<n.length;s++){var a=n[s],g=this.hierarchical.levels[a.id];if(!(g>e&&void 0===this.positionedNodes[a.id]))return;var l,h=this.options.hierarchical.nodeSpacing;l=0===s?this.direction.getPosition(this.body.nodes[t]):this.direction.getPosition(n[s-1])+h,this.direction.setPosition(a,l,g),this._validatePositionAndContinue(a,g,l)}var c=this._getCenterPosition(n);this.direction.setPosition(this.body.nodes[t],c,e)}}},{key:"_validatePositionAndContinue",value:function(t,e,i){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[e]){var o=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);if(i-o<this.options.hierarchical.nodeSpacing){var n=o+this.options.hierarchical.nodeSpacing-i,r=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(r.withChild,n)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}}},{key:"_indexArrayToNodes",value:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.body.nodes[t[i]]);return e}},{key:"_getDistribution",value:function(){var t,e,i={};for(t in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,t)){e=this.body.nodes[t];var o=void 0===this.hierarchical.levels[t]?0:this.hierarchical.levels[t];this.direction.fix(e,o),void 0===i[o]&&(i[o]={}),i[o][t]=e}return i}},{key:"_getActiveEdges",value:function(t){var e=this,i=[];return qp(t.edges,(function(t){var o;-1!==pI(o=e.body.edgeIndices).call(o,t.id)&&i.push(t)})),i}},{key:"_getHubSizes",value:function(){var t=this,e={};qp(this.body.nodeIndices,(function(i){var o=t.body.nodes[i],n=t._getActiveEdges(o).length;e[n]=!0}));var i=[];return qp(e,(function(t){i.push(Number(t))})),rw(i).call(i,(function(t,e){return e-t})),i}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,e=function(e,i){t.hierarchical.levelDownstream(e,i)},i=this._getHubSizes(),o=function(){var o=i[n];if(0===o)return 1;qp(t.body.nodeIndices,(function(i){var n=t.body.nodes[i];o===t._getActiveEdges(n).length&&t._crawlNetwork(e,i)}))},n=0;n<i.length&&!o();++n);}},{key:"_determineLevelsCustomCallback",value:function(){var t=this;this._crawlNetwork((function(e,i,o){var n=t.hierarchical.levels[e.id];void 0===n&&(n=t.hierarchical.levels[e.id]=1e5);var r=(q_.cloneOptions(e,"node"),q_.cloneOptions(i,"node"),void q_.cloneOptions(o,"edge"));t.hierarchical.levels[i.id]=n+r})),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,e=this,i=vw(t=this.body.nodeIndices).call(t,(function(t,i){return t.set(i,e.body.nodes[i]),t}),new Lm);"roots"===this.options.hierarchical.shakeTowards?this.hierarchical.levels=function(t){return Dw((function(e){var i,o;return Sw(i=FA(o=e.edges).call(o,(function(e){return t.has(e.toId)}))).call(i,(function(t){return t.from===e}))}),(function(t,e){return e<t}),"to",t)}(i):this.hierarchical.levels=function(t){return Dw((function(e){var i,o;return Sw(i=FA(o=e.edges).call(o,(function(e){return t.has(e.toId)}))).call(i,(function(t){return t.to===e}))}),(function(t,e){return e>t}),"from",t)}(i),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this;this._crawlNetwork((function(e,i){t.hierarchical.levels[i.id]>t.hierarchical.levels[e.id]&&t.hierarchical.addRelation(e.id,i.id)})),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},i=arguments.length>1?arguments[1]:void 0,o={},n=function i(n,r){if(void 0===o[n.id]){var s;t.hierarchical.setTreeIndex(n,r),o[n.id]=!0;for(var a=t._getActiveEdges(n),g=0;g<a.length;g++){var l=a[g];!0===l.connected&&(s=l.toId==n.id?l.from:l.to,n.id!=s.id&&(e(n,s,l),i(s,r)))}}};if(void 0===i)for(var r=0,s=0;s<this.body.nodeIndices.length;s++){var a=this.body.nodeIndices[s];void 0===o[a]&&(n(this.body.nodes[a],r),r+=1)}else{var g=this.body.nodes[i];if(void 0===g)return void console.error("Node not found:",i);n(g)}}},{key:"_shiftBlock",value:function(t,e){var i=this,o={};!function t(n){if(!o[n]){o[n]=!0,i.direction.shift(n,e);var r=i.hierarchical.childrenReference[n];if(void 0!==r)for(var s=0;s<r.length;s++)t(r[s])}}(t)}},{key:"_findCommonParent",value:function(t,e){var i=this,o={};return function t(e,o){var n=i.hierarchical.parentReference[o];if(void 0!==n)for(var r=0;r<n.length;r++){var s=n[r];e[s]=!0,t(e,s)}}(o,t),function t(e,o){var n=i.hierarchical.parentReference[o];if(void 0!==n)for(var r=0;r<n.length;r++){var s=n[r];if(void 0!==e[s])return{foundParent:s,withChild:o};var a=t(e,s);if(null!==a.foundParent)return a}return{foundParent:null,withChild:o}}(o,e)}},{key:"setDirectionStrategy",value:function(){var t="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=t?new yw(this):new _w(this)}},{key:"_getCenterPosition",value:function(t){for(var e=1e9,i=-1e9,o=0;o<t.length;o++){var n=void 0;if(void 0!==t[o].id)n=t[o];else{var r=t[o];n=this.body.nodes[r]}var s=this.direction.getPosition(n);e=Math.min(e,s),i=Math.max(i,s)}return.5*(e+i)}}]),t}();function Lw(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var Pw=function(){function t(e,i,o,n){var r,s,a=this;ng(this,t),this.body=e,this.canvas=i,this.selectionHandler=o,this.interactionHandler=n,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},fo(this.options,this.defaultOptions),this.body.emitter.on("destroy",(function(){a._clean()})),this.body.emitter.on("_dataChanged",Fo(r=this._restore).call(r,this)),this.body.emitter.on("_resetData",Fo(s=this._restore).call(s,this))}return au(t,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,e,i){void 0!==e&&(void 0!==e.locale?this.options.locale=e.locale:this.options.locale=i.locale,void 0!==e.locales?this.options.locales=e.locales:this.options.locales=i.locales),void 0!==t&&("boolean"==typeof t?this.options.enabled=t:(this.options.enabled=!0,Kp(this.options,t)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){var t,e;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var i=this.selectionHandler.getSelectedNodeCount(),o=this.selectionHandler.getSelectedEdgeCount(),n=i+o,r=this.options.locales[this.options.locale],s=!1;!1!==this.options.addNode&&(this._createAddNodeButton(r),s=!0),!1!==this.options.addEdge&&(!0===s?this._createSeperator(1):s=!0,this._createAddEdgeButton(r)),1===i&&"function"==typeof this.options.editNode?(!0===s?this._createSeperator(2):s=!0,this._createEditNodeButton(r)):1===o&&0===i&&!1!==this.options.editEdge&&(!0===s?this._createSeperator(3):s=!0,this._createEditEdgeButton(r)),0!==n&&(i>0&&!1!==this.options.deleteNode||0===i&&!1!==this.options.deleteEdge)&&(!0===s&&this._createSeperator(4),this._createDeleteButton(r)),this._bindElementEvents(this.closeDiv,Fo(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",Fo(e=this.showManipulatorToolbar).call(e,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var e,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,Fo(e=this.toggleEditMode).call(e,this))}this._temporaryBindEvent("click",Fo(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var e=this.selectionHandler.getSelectedNodes()[0];if(void 0!==e){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==e.isCluster){var i=Kp({},e.options,!1);if(i.x=e.x,i.y=e.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(i,(function(e){null!=e&&"editNode"===t.inMode&&t.body.data.nodes.getDataSet().update(e),t.showManipulatorToolbar()}))}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,e,i,o,n;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var r,s=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(s),this._createSeperator(),this._createDescription(s.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,Fo(r=this.toggleEditMode).call(r,this))}this._temporaryBindUI("onTouch",Fo(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",Fo(e=this._finishConnect).call(e,this)),this._temporaryBindUI("onDrag",Fo(i=this._dragControlNode).call(i,this)),this._temporaryBindUI("onRelease",Fo(o=this._finishConnect).call(o,this)),this._temporaryBindUI("onDragStart",Fo(n=this._dragStartEdge).call(n,this)),this._temporaryBindUI("onHold",(function(){}))}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"!==ou(this.options.editEdge)||"function"!=typeof this.options.editEdge.editWithoutDrag||(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0===this.edgeBeingEditedId)){if(!0===this.guiEnabled){var t,e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,Fo(t=this.toggleEditMode).call(t,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0!==this.edgeBeingEditedId){var i,o,n,r,s=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(s.from.x,s.from.y),g=this._getNewTargetNode(s.to.x,s.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(g.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[g.id]=g,this.body.nodeIndices.push(g.id),this._temporaryBindUI("onTouch",Fo(i=this._controlNodeTouch).call(i,this)),this._temporaryBindUI("onTap",(function(){})),this._temporaryBindUI("onHold",(function(){})),this._temporaryBindUI("onDragStart",Fo(o=this._controlNodeDragStart).call(o,this)),this._temporaryBindUI("onDrag",Fo(n=this._controlNodeDrag).call(n,this)),this._temporaryBindUI("onDragEnd",Fo(r=this._controlNodeDragEnd).call(r,this)),this._temporaryBindUI("onMouseMove",(function(){})),this._temporaryBindEvent("beforeDrawing",(function(t){var e=s.edgeType.findBorderPositions(t);!1===a.selected&&(a.x=e.from.x,a.y=e.from.y),!1===g.selected&&(g.x=e.to.x,g.y=e.to.y)})),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}else{var l=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(l.from.id,l.to.id)}}},{key:"deleteSelected",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var e=this.selectionHandler.getSelectedNodeIds(),i=this.selectionHandler.getSelectedEdgeIds(),o=void 0;if(e.length>0){for(var n=0;n<e.length;n++)if(!0===this.body.nodes[e[n]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(o=this.options.deleteNode)}else i.length>0&&"function"==typeof this.options.deleteEdge&&(o=this.options.deleteEdge);if("function"==typeof o){var r={nodes:e,edges:i};if(2!==o.length)throw new Error("The function for delete does not support two arguments (data, callback)");o(r,(function(e){null!=e&&"delete"===t.inMode?(t.body.data.edges.getDataSet().remove(e.edges),t.body.data.nodes.getDataSet().remove(e.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){var t,e;void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",null!==(t=null===(e=this.options.locales[this.options.locale])||void 0===e?void 0:e.close)&&void 0!==t?t:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(t,e){var i=Kp({},this.options.controlNodeStyle);i.id="targetNode"+J_(),i.hidden=!1,i.physics=!1,i.x=t,i.y=e;var o=this.body.functions.createNode(i);return o.shape.boundingBox={left:t,right:t,top:e,bottom:e},o}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},Up(this.editModeDiv);var e=this.options.locales[this.options.locale],i=this._createButton("editMode","vis-edit vis-edit-mode",e.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(i),this._bindElementEvents(i,Fo(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){this.inMode=!1,!0===this.guiEnabled&&(Up(this.editModeDiv),Up(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var t,e,i=function(t,e){var i=void 0!==Zu&&og(t)||t["@@iterator"];if(!i){if(gd(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return Lw(t,e);var o=ed(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?$a(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Lw(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}(lA(t=this._domEventListenerCleanupQueue).call(t,0));try{for(i.s();!(e=i.n()).done;)(0,e.value)()}catch(t){i.e(t)}finally{i.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),Up(this.manipulationDiv),Up(this.editModeDiv),Up(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var e,i=this._createButton("addNode","vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,Fo(e=this.addNodeMode).call(e,this))}},{key:"_createAddEdgeButton",value:function(t){var e,i=this._createButton("addEdge","vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,Fo(e=this.addEdgeMode).call(e,this))}},{key:"_createEditNodeButton",value:function(t){var e,i=this._createButton("editNode","vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,Fo(e=this.editNode).call(e,this))}},{key:"_createEditEdgeButton",value:function(t){var e,i=this._createButton("editEdge","vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,Fo(e=this.editEdgeMode).call(e,this))}},{key:"_createDeleteButton",value:function(t){var e,i;i=this.options.rtl?"vis-delete-rtl":"vis-delete";var o=this._createButton("delete",i,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(o),this._bindElementEvents(o,Fo(e=this.deleteSelected).call(e,this))}},{key:"_createBackButton",value:function(t){var e,i=this._createButton("back","vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,Fo(e=this.showManipulatorToolbar).call(e,this))}},{key:"_createButton",value:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("button"),this.manipulationDOM[t+"Div"].className="vis-button "+e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=o,this.manipulationDOM[t+"Label"].innerText=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=t,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}},{key:"_temporaryBindUI",value:function(t,e){if(void 0===this.body.eventListeners[t])throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+_I(pd(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var e=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,i)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(t,e){var i=new Ef(t,{});nT(i,e),this._domEventListenerCleanupQueue.push((function(){i.destroy()}));var o=function(t){var i=t.keyCode,o=t.key;"Enter"!==o&&" "!==o&&13!==i&&32!==i||e()};t.addEventListener("keyup",o,!1),this._domEventListenerCleanupQueue.push((function(){t.removeEventListener("keyup",o,!1)}))}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var e;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var i,o=pI(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[t]);-1!==o&&lA(i=this.body.edgeIndices).call(i,o,1)}for(var n=0;n<this.temporaryIds.nodes.length;n++){var r;delete this.body.nodes[this.temporaryIds.nodes[n]];var s,a=pI(r=this.body.nodeIndices).call(r,this.temporaryIds.nodes[n]);-1!==a&&lA(s=this.body.nodeIndices).call(s,a,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=fo({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,e=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],o=this.body.nodes[this.temporaryIds.nodes[1]],n=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var r=i.isOverlappingWith(e),s=o.isOverlappingWith(e);!0===r?(this.selectedControlNode=i,n.edgeType.from=i):!0===s&&(this.selectedControlNode=o,n.edgeType.to=o),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(e);void 0!==this.selectedControlNode?(this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),o=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),r=void 0,s=n.length-1;s>=0;s--)if(n[s]!==this.selectedControlNode.id){r=this.body.nodes[n[s]];break}if(void 0!==r&&void 0!==this.selectedControlNode)if(!0===r.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(r.id,o.to.id):this._performEditEdge(o.from.id,r.id)}else o.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=fo({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var e=this.lastTouch,i=this.selectionHandler.getNodeAt(e);if(void 0!==i)if(!0===i.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var o=this._getNewTargetNode(i.x,i.y);this.body.nodes[o.id]=o,this.body.nodeIndices.push(o.id);var n=this.body.functions.createEdge({id:"connectionEdge"+J_(),from:i.id,to:o.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[n.id]=n,this.body.edgeIndices.push(n.id),this.temporaryIds.nodes.push(o.id),this.temporaryIds.edges.push(n.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),o=void 0;void 0!==this.temporaryIds.edges[0]&&(o=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),r=void 0,s=n.length-1;s>=0;s--){var a;if(-1===pI(a=this.temporaryIds.nodes).call(a,n[s])){r=this.body.nodes[n[s]];break}}if(t.controlEdge={from:o,to:r?r.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,e),void 0!==this.temporaryIds.nodes[0]){var g=this.body.nodes[this.temporaryIds.nodes[0]];g.x=this.canvas._XconvertDOMtoCanvas(e.x),g.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),o=void 0;void 0!==this.temporaryIds.edges[0]&&(o=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),r=void 0,s=n.length-1;s>=0;s--){var a;if(-1===pI(a=this.temporaryIds.nodes).call(a,n[s])){r=this.body.nodes[n[s]];break}}this._cleanupTemporaryNodesAndEdges(),void 0!==r&&(!0===r.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[o]&&void 0!==this.body.nodes[r.id]&&this._performAddEdge(o,r.id)),t.controlEdge={from:o,to:r?r.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,e),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var e=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,e,void 0,!0)}},{key:"_performAddNode",value:function(t){var e=this,i={id:J_(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(i,(function(t){null!=t&&"addNode"===e.inMode&&e.body.data.nodes.getDataSet().add(t),e.showManipulatorToolbar()}))}else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,e){var i=this,o={from:t,to:e};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(o,(function(t){null!=t&&"addEdge"===i.inMode&&(i.body.data.edges.getDataSet().add(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().add(o),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,e){var i=this,o={id:this.edgeBeingEditedId,from:t,to:e,label:this.body.data.edges.get(this.edgeBeingEditedId).label},n=this.options.editEdge;if("object"===ou(n)&&(n=n.editWithoutDrag),"function"==typeof n){if(2!==n.length)throw new Error("The function for edit does not support two arguments (data, callback)");n(o,(function(t){null==t||"editEdge"!==i.inMode?(i.body.edges[o.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().update(o),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),t}(),$w="string",Bw="boolean",Fw="number",zw="array",Hw="object",Gw=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],Uw={borderWidth:{number:Fw},borderWidthSelected:{number:Fw,undefined:"undefined"},brokenImage:{string:$w,undefined:"undefined"},chosen:{label:{boolean:Bw,function:"function"},node:{boolean:Bw,function:"function"},__type__:{object:Hw,boolean:Bw}},color:{border:{string:$w},background:{string:$w},highlight:{border:{string:$w},background:{string:$w},__type__:{object:Hw,string:$w}},hover:{border:{string:$w},background:{string:$w},__type__:{object:Hw,string:$w}},__type__:{object:Hw,string:$w}},opacity:{number:Fw,undefined:"undefined"},fixed:{x:{boolean:Bw},y:{boolean:Bw},__type__:{object:Hw,boolean:Bw}},font:{align:{string:$w},color:{string:$w},size:{number:Fw},face:{string:$w},background:{string:$w},strokeWidth:{number:Fw},strokeColor:{string:$w},vadjust:{number:Fw},multi:{boolean:Bw,string:$w},bold:{color:{string:$w},size:{number:Fw},face:{string:$w},mod:{string:$w},vadjust:{number:Fw},__type__:{object:Hw,string:$w}},boldital:{color:{string:$w},size:{number:Fw},face:{string:$w},mod:{string:$w},vadjust:{number:Fw},__type__:{object:Hw,string:$w}},ital:{color:{string:$w},size:{number:Fw},face:{string:$w},mod:{string:$w},vadjust:{number:Fw},__type__:{object:Hw,string:$w}},mono:{color:{string:$w},size:{number:Fw},face:{string:$w},mod:{string:$w},vadjust:{number:Fw},__type__:{object:Hw,string:$w}},__type__:{object:Hw,string:$w}},group:{string:$w,number:Fw,undefined:"undefined"},heightConstraint:{minimum:{number:Fw},valign:{string:$w},__type__:{object:Hw,boolean:Bw,number:Fw}},hidden:{boolean:Bw},icon:{face:{string:$w},code:{string:$w},size:{number:Fw},color:{string:$w},weight:{string:$w,number:Fw},__type__:{object:Hw}},id:{string:$w,number:Fw},image:{selected:{string:$w,undefined:"undefined"},unselected:{string:$w,undefined:"undefined"},__type__:{object:Hw,string:$w}},imagePadding:{top:{number:Fw},right:{number:Fw},bottom:{number:Fw},left:{number:Fw},__type__:{object:Hw,number:Fw}},label:{string:$w,undefined:"undefined"},labelHighlightBold:{boolean:Bw},level:{number:Fw,undefined:"undefined"},margin:{top:{number:Fw},right:{number:Fw},bottom:{number:Fw},left:{number:Fw},__type__:{object:Hw,number:Fw}},mass:{number:Fw},physics:{boolean:Bw},scaling:{min:{number:Fw},max:{number:Fw},label:{enabled:{boolean:Bw},min:{number:Fw},max:{number:Fw},maxVisible:{number:Fw},drawThreshold:{number:Fw},__type__:{object:Hw,boolean:Bw}},customScalingFunction:{function:"function"},__type__:{object:Hw}},shadow:{enabled:{boolean:Bw},color:{string:$w},size:{number:Fw},x:{number:Fw},y:{number:Fw},__type__:{object:Hw,boolean:Bw}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:Bw,array:zw},borderRadius:{number:Fw},interpolation:{boolean:Bw},useImageSize:{boolean:Bw},useBorderWithImage:{boolean:Bw},coordinateOrigin:{string:["center","top-left"]},__type__:{object:Hw}},size:{number:Fw},title:{string:$w,dom:"dom",undefined:"undefined"},value:{number:Fw,undefined:"undefined"},widthConstraint:{minimum:{number:Fw},maximum:{number:Fw},__type__:{object:Hw,boolean:Bw,number:Fw}},x:{number:Fw},y:{number:Fw},__type__:{object:Hw}},Vw={configure:{enabled:{boolean:Bw},filter:{boolean:Bw,string:$w,array:zw,function:"function"},container:{dom:"dom"},showButton:{boolean:Bw},__type__:{object:Hw,boolean:Bw,string:$w,array:zw,function:"function"}},edges:{arrows:{to:{enabled:{boolean:Bw},scaleFactor:{number:Fw},type:{string:Gw},imageHeight:{number:Fw},imageWidth:{number:Fw},src:{string:$w},__type__:{object:Hw,boolean:Bw}},middle:{enabled:{boolean:Bw},scaleFactor:{number:Fw},type:{string:Gw},imageWidth:{number:Fw},imageHeight:{number:Fw},src:{string:$w},__type__:{object:Hw,boolean:Bw}},from:{enabled:{boolean:Bw},scaleFactor:{number:Fw},type:{string:Gw},imageWidth:{number:Fw},imageHeight:{number:Fw},src:{string:$w},__type__:{object:Hw,boolean:Bw}},__type__:{string:["from","to","middle"],object:Hw}},endPointOffset:{from:{number:Fw},to:{number:Fw},__type__:{object:Hw,number:Fw}},arrowStrikethrough:{boolean:Bw},background:{enabled:{boolean:Bw},color:{string:$w},size:{number:Fw},dashes:{boolean:Bw,array:zw},__type__:{object:Hw,boolean:Bw}},chosen:{label:{boolean:Bw,function:"function"},edge:{boolean:Bw,function:"function"},__type__:{object:Hw,boolean:Bw}},color:{color:{string:$w},highlight:{string:$w},hover:{string:$w},inherit:{string:["from","to","both"],boolean:Bw},opacity:{number:Fw},__type__:{object:Hw,string:$w}},dashes:{boolean:Bw,array:zw},font:{color:{string:$w},size:{number:Fw},face:{string:$w},background:{string:$w},strokeWidth:{number:Fw},strokeColor:{string:$w},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:Fw},multi:{boolean:Bw,string:$w},bold:{color:{string:$w},size:{number:Fw},face:{string:$w},mod:{string:$w},vadjust:{number:Fw},__type__:{object:Hw,string:$w}},boldital:{color:{string:$w},size:{number:Fw},face:{string:$w},mod:{string:$w},vadjust:{number:Fw},__type__:{object:Hw,string:$w}},ital:{color:{string:$w},size:{number:Fw},face:{string:$w},mod:{string:$w},vadjust:{number:Fw},__type__:{object:Hw,string:$w}},mono:{color:{string:$w},size:{number:Fw},face:{string:$w},mod:{string:$w},vadjust:{number:Fw},__type__:{object:Hw,string:$w}},__type__:{object:Hw,string:$w}},hidden:{boolean:Bw},hoverWidth:{function:"function",number:Fw},label:{string:$w,undefined:"undefined"},labelHighlightBold:{boolean:Bw},length:{number:Fw,undefined:"undefined"},physics:{boolean:Bw},scaling:{min:{number:Fw},max:{number:Fw},label:{enabled:{boolean:Bw},min:{number:Fw},max:{number:Fw},maxVisible:{number:Fw},drawThreshold:{number:Fw},__type__:{object:Hw,boolean:Bw}},customScalingFunction:{function:"function"},__type__:{object:Hw}},selectionWidth:{function:"function",number:Fw},selfReferenceSize:{number:Fw},selfReference:{size:{number:Fw},angle:{number:Fw},renderBehindTheNode:{boolean:Bw},__type__:{object:Hw}},shadow:{enabled:{boolean:Bw},color:{string:$w},size:{number:Fw},x:{number:Fw},y:{number:Fw},__type__:{object:Hw,boolean:Bw}},smooth:{enabled:{boolean:Bw},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:Fw},forceDirection:{string:["horizontal","vertical","none"],boolean:Bw},__type__:{object:Hw,boolean:Bw}},title:{string:$w,undefined:"undefined"},width:{number:Fw},widthConstraint:{maximum:{number:Fw},__type__:{object:Hw,boolean:Bw,number:Fw}},value:{number:Fw,undefined:"undefined"},__type__:{object:Hw}},groups:{useDefaultGroups:{boolean:Bw},__any__:Uw,__type__:{object:Hw}},interaction:{dragNodes:{boolean:Bw},dragView:{boolean:Bw},hideEdgesOnDrag:{boolean:Bw},hideEdgesOnZoom:{boolean:Bw},hideNodesOnDrag:{boolean:Bw},hover:{boolean:Bw},keyboard:{enabled:{boolean:Bw},speed:{x:{number:Fw},y:{number:Fw},zoom:{number:Fw},__type__:{object:Hw}},bindToWindow:{boolean:Bw},autoFocus:{boolean:Bw},__type__:{object:Hw,boolean:Bw}},multiselect:{boolean:Bw},navigationButtons:{boolean:Bw},selectable:{boolean:Bw},selectConnectedEdges:{boolean:Bw},hoverConnectedEdges:{boolean:Bw},tooltipDelay:{number:Fw},zoomView:{boolean:Bw},zoomSpeed:{number:Fw},__type__:{object:Hw}},layout:{randomSeed:{undefined:"undefined",number:Fw,string:$w},improvedLayout:{boolean:Bw},clusterThreshold:{number:Fw},hierarchical:{enabled:{boolean:Bw},levelSeparation:{number:Fw},nodeSpacing:{number:Fw},treeSpacing:{number:Fw},blockShifting:{boolean:Bw},edgeMinimization:{boolean:Bw},parentCentralization:{boolean:Bw},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:Hw,boolean:Bw}},__type__:{object:Hw}},manipulation:{enabled:{boolean:Bw},initiallyActive:{boolean:Bw},addNode:{boolean:Bw,function:"function"},addEdge:{boolean:Bw,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:Hw,boolean:Bw,function:"function"}},deleteNode:{boolean:Bw,function:"function"},deleteEdge:{boolean:Bw,function:"function"},controlNodeStyle:Uw,__type__:{object:Hw,boolean:Bw}},nodes:Uw,physics:{enabled:{boolean:Bw},barnesHut:{theta:{number:Fw},gravitationalConstant:{number:Fw},centralGravity:{number:Fw},springLength:{number:Fw},springConstant:{number:Fw},damping:{number:Fw},avoidOverlap:{number:Fw},__type__:{object:Hw}},forceAtlas2Based:{theta:{number:Fw},gravitationalConstant:{number:Fw},centralGravity:{number:Fw},springLength:{number:Fw},springConstant:{number:Fw},damping:{number:Fw},avoidOverlap:{number:Fw},__type__:{object:Hw}},repulsion:{centralGravity:{number:Fw},springLength:{number:Fw},springConstant:{number:Fw},nodeDistance:{number:Fw},damping:{number:Fw},__type__:{object:Hw}},hierarchicalRepulsion:{centralGravity:{number:Fw},springLength:{number:Fw},springConstant:{number:Fw},nodeDistance:{number:Fw},damping:{number:Fw},avoidOverlap:{number:Fw},__type__:{object:Hw}},maxVelocity:{number:Fw},minVelocity:{number:Fw},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:Bw},iterations:{number:Fw},updateInterval:{number:Fw},onlyDynamicEdges:{boolean:Bw},fit:{boolean:Bw},__type__:{object:Hw,boolean:Bw}},timestep:{number:Fw},adaptiveTimestep:{boolean:Bw},wind:{x:{number:Fw},y:{number:Fw},__type__:{object:Hw}},__type__:{object:Hw,boolean:Bw}},autoResize:{boolean:Bw},clickToUse:{boolean:Bw},locale:{string:$w},locales:{__any__:{any:"any"},__type__:{object:Hw}},height:{string:$w},width:{string:$w},__type__:{object:Hw}},Ww={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},jw=function(t,e,i){var o;return!(!OA(t).call(t,"physics")||!OA(o=Ww.physics.solver).call(o,e)||i.physics.solver===e||"wind"===e)},Yw=Object.freeze({__proto__:null,allOptions:Vw,configuratorHideOption:jw,configureOptions:Ww}),Xw=function(){function t(){ng(this,t)}return au(t,[{key:"getDistances",value:function(t,e,i){for(var o={},n=t.edges,r=0;r<e.length;r++){var s={};o[e[r]]=s;for(var a=0;a<e.length;a++)s[e[a]]=r==a?0:1e9}for(var g=0;g<i.length;g++){var l=n[i[g]];!0===l.connected&&void 0!==o[l.fromId]&&void 0!==o[l.toId]&&(o[l.fromId][l.toId]=1,o[l.toId][l.fromId]=1)}for(var h=e.length,c=0;c<h;c++)for(var u=e[c],d=o[u],A=0;A<h-1;A++)for(var I=e[A],C=o[I],p=A+1;p<h;p++){var f=e[p],v=o[f],m=Math.min(C[f],C[u]+d[f]);C[f]=m,v[I]=m}return o}}]),t}(),Zw=function(){function t(e,i,o){ng(this,t),this.body=e,this.springLength=i,this.springConstant=o,this.distanceSolver=new Xw}return au(t,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(o),this._createK_matrix(o),this._createE_matrix();for(var n=0,r=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),s=1e9,a=0,g=0,l=0,h=0,c=0;s>.01&&n<r;){n+=1;var u=Yu(this._getHighestEnergyNode(i),4);for(a=u[0],s=u[1],g=u[2],l=u[3],h=s,c=0;h>1&&c<5;){c+=1,this._moveNode(a,g,l);var d=Yu(this._getEnergy(a),3);h=d[0],g=d[1],l=d[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,o=0,n=e[0],r=0,s=0,a=0;a<e.length;a++){var g=e[a];if(!0!==i[g].predefinedPosition||!0===i[g].isCluster&&!0===t||!0!==i[g].options.fixed.x||!0!==i[g].options.fixed.y){var l=Yu(this._getEnergy(g),3),h=l[0],c=l[1],u=l[2];o<h&&(o=h,n=g,r=c,s=u)}}return[n,o,r,s]}},{key:"_getEnergy",value:function(t){var e=Yu(this.E_sums[t],2),i=e[0],o=e[1];return[Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),i,o]}},{key:"_moveNode",value:function(t,e,i){for(var o=this.body.nodeIndices,n=this.body.nodes,r=0,s=0,a=0,g=n[t].x,l=n[t].y,h=this.K_matrix[t],c=this.L_matrix[t],u=0;u<o.length;u++){var d=o[u];if(d!==t){var A=n[d].x,I=n[d].y,C=h[d],p=c[d],f=1/Math.pow(Math.pow(g-A,2)+Math.pow(l-I,2),1.5);r+=C*(1-p*Math.pow(l-I,2)*f),s+=C*(p*(g-A)*(l-I)*f),a+=C*(1-p*Math.pow(g-A,2)*f)}}var v=(e/r+i/s)/(s/r-a/s),m=-(s*v+e)/r;n[t].x+=m,n[t].y+=v,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var o=0;o<e.length;o++){this.L_matrix[e[o]]={};for(var n=0;n<e.length;n++)this.L_matrix[e[o]][e[n]]=i*t[e[o]][e[n]]}}},{key:"_createK_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var o=0;o<e.length;o++){this.K_matrix[e[o]]={};for(var n=0;n<e.length;n++)this.K_matrix[e[o]][e[n]]=i*Math.pow(t[e[o]][e[n]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,e=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var o=0;o<t.length;o++){for(var n=t[o],r=e[n].x,s=e[n].y,a=0,g=0,l=o;l<t.length;l++){var h=t[l];if(h!==n){var c=e[h].x,u=e[h].y,d=1/Math.sqrt(Math.pow(r-c,2)+Math.pow(s-u,2));this.E_matrix[n][l]=[this.K_matrix[n][h]*(r-c-this.L_matrix[n][h]*(r-c)*d),this.K_matrix[n][h]*(s-u-this.L_matrix[n][h]*(s-u)*d)],this.E_matrix[h][o]=this.E_matrix[n][l],a+=this.E_matrix[n][l][0],g+=this.E_matrix[n][l][1]}}this.E_sums[n]=[a,g]}}},{key:"_updateE_matrix",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,o=this.E_matrix[t],n=this.K_matrix[t],r=this.L_matrix[t],s=i[t].x,a=i[t].y,g=0,l=0,h=0;h<e.length;h++){var c=e[h];if(c!==t){var u=o[h],d=u[0],A=u[1],I=i[c].x,C=i[c].y,p=1/Math.sqrt(Math.pow(s-I,2)+Math.pow(a-C,2)),f=n[c]*(s-I-r[c]*(s-I)*p),v=n[c]*(a-C-r[c]*(a-C)*p);o[h]=[f,v],g+=f,l+=v;var m=this.E_sums[c];m[0]+=f-d,m[1]+=v-A}}this.E_sums[t]=[g,l]}}]),t}();function Kw(t,e,i){var o,n,r,s,a=this;if(!(this instanceof Kw))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:av,clickToUse:!1},fo(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:Fo(o=this.on).call(o,this),off:Fo(n=this.off).call(n,this),emit:Fo(r=this.emit).call(r,this),once:Fo(s=this.once).call(s,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new lv((function(){return a.body.emitter.emit("_requestRedraw")})),this.groups=new Pm,this.canvas=new sT(this.body),this.selectionHandler=new yE(this.body,this.canvas),this.interactionHandler=new cT(this.body,this.canvas,this.selectionHandler),this.view=new aT(this.body,this.canvas),this.renderer=new iT(this.body,this.canvas),this.physics=new j_(this.body),this.layoutEngine=new Nw(this.body),this.clustering=new eT(this.body),this.manipulation=new Pw(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new Zy(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new $_(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new Zw(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(e)}Yo(Kw.prototype),Kw.prototype.setOptions=function(t){var e=this;if(null===t&&(t=void 0),void 0!==t){if(!0===Of.validate(t,Vw)&&console.error("%cErrors have been found in the supplied options object.",kf),Xp(["locale","locales","clickToUse"],this.options,t),void 0!==t.locale&&(t.locale=function(t,e){try{var i=Yu(e.split(/[-_ /]/,2),2),o=i[0],n=i[1],r=null!=o?o.toLowerCase():null,s=null!=n?n.toUpperCase():null;if(r&&s){var a,g=r+"-"+s;if(Object.prototype.hasOwnProperty.call(t,g))return g;console.warn(td(a="Unknown variant ".concat(s," of language ")).call(a,r,"."))}if(r){var l=r;if(Object.prototype.hasOwnProperty.call(t,l))return l;console.warn("Unknown language ".concat(r))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(t){return console.error(t),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),void 0!==t.groups&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new Tf(this,this.body.container,Ww,this.canvas.pixelRatio,jw)),this.configurator.setOptions(t.configure)),this.configurator&&!0===this.configurator.options.enabled){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};Kp(i.nodes,this.nodesHandler.options),Kp(i.edges,this.edgesHandler.options),Kp(i.layout,this.layoutEngine.options),Kp(i.interaction,this.selectionHandler.options),Kp(i.interaction,this.renderer.options),Kp(i.interaction,this.interactionHandler.options),Kp(i.manipulation,this.manipulation.options),Kp(i.physics,this.physics.options),Kp(i.global,this.canvas.options),Kp(i.global,this.options),this.configurator.setModuleOptions(i)}void 0!==t.clickToUse?!0===t.clickToUse?void 0===this.activator&&(this.activator=new _f(this.canvas.frame),this.activator.on("change",(function(){e.body.emitter.emit("activate")}))):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},Kw.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;for(var i in this.body.nodeIndices=[],this.body.edgeIndices=[],t)Object.prototype.hasOwnProperty.call(t,i)&&(this.clustering._isClusteredNode(i)||!1!==t[i].options.hidden||this.body.nodeIndices.push(t[i].id));for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=e[o],r=t[n.fromId],s=t[n.toId],a=void 0!==r&&void 0!==s;!this.clustering._isClusteredEdge(o)&&!1===n.options.hidden&&a&&!1===r.options.hidden&&!1===s.options.hidden&&this.body.edgeIndices.push(n.id)}},Kw.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",(function(){t.edgesHandler._updateState(),t.body.emitter.emit("_dataUpdated")})),this.body.emitter.on("_dataUpdated",(function(){t.clustering._updateState(),t._updateVisibleIndices(),t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")}))},Kw.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=ov(t.dot);this.setData(e)}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=rv(t.gephi);this.setData(i)}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},Kw.prototype.destroy=function(){for(var t in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(var e in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,e)&&delete this.body.edges[e];Up(this.body.container)},Kw.prototype._updateValueRange=function(t){var e,i=void 0,o=void 0,n=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=t[e].getValue();void 0!==r&&(i=void 0===i?r:Math.min(r,i),o=void 0===o?r:Math.max(r,o),n+=r)}if(void 0!==i&&void 0!==o)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(i,o,n)},Kw.prototype.isActive=function(){return!this.activator||this.activator.active},Kw.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},Kw.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},Kw.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},Kw.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},Kw.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},Kw.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},Kw.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},Kw.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},Kw.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},Kw.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},Kw.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)},Kw.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)},Kw.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)},Kw.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)},Kw.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)},Kw.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},Kw.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},Kw.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},Kw.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},Kw.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},Kw.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},Kw.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},Kw.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},Kw.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},Kw.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},Kw.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},Kw.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)},Kw.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},Kw.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},Kw.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},Kw.prototype.getConnectedNodes=function(t){return void 0!==this.body.nodes[t]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},Kw.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},Kw.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},Kw.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},Kw.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},Kw.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},Kw.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},Kw.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)},Kw.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)},Kw.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},Kw.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},Kw.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},Kw.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},Kw.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()},Kw.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},Kw.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},Kw.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},Kw.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},Kw.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},Kw.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},Kw.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},Kw.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};var Qw=ov;t.Network=Kw,t.NetworkImages=lv,t.networkDOTParser=nv,t.networkGephiParser=sv,t.networkOptions=Yw,t.parseDOTNetwork=Qw,t.parseGephiNetwork=rv}(e,i(107))},500:function(t,e,i){var o,n;void 0===(n="function"==typeof(o=function(){var t,e,o,n,r,s,a,g,l,h,c,u,d,A,I,C,p,f,v,m,b,y,_,T,E,w,k,O,S,R,x,D,M,N,L,P,$,B,F,z,H,G,U,V,W,j,Y,X,Z,K,Q,J,q,tt,et,it,ot,nt,rt,st,at,gt,lt,ht,ct,ut,dt,At,It,Ct,pt,ft,vt,mt,bt,yt,_t,Tt,Et,wt,kt,Ot,St,Rt,xt,Dt,Mt,Nt,Lt,Pt,$t,Bt,Ft,zt,Ht,Gt,Ut,Vt,Wt,jt,Yt,Xt,Zt,Kt,Qt,Jt,qt,te,ee,ie,oe,ne,re,se,ae,ge,le,he,ce,ue,de,Ae,Ie,Ce,pe,fe,ve,me,be,ye,_e,Te,Ee,we,ke,Oe,Se,Re,xe,De,Me,Ne,Le,Pe,$e,Be,Fe,ze,He,Ge,Ue,Ve,We,je,Ye,Xe,Ze,Ke,Qe,Je,qe,ti,ei,ii,oi,ni,ri,si,ai,gi,li,hi,ci,ui,di,Ai,Ii,Ci,pi,fi,vi,mi,bi,yi,_i,Ti,Ei,wi,ki,Oi,Si,Ri,xi,Di,Mi,Ni,Li,Pi,$i,Bi,Fi,zi,Hi,Gi,Ui,Vi,Wi,ji,Yi,Xi,Zi,Ki,Qi,Ji,qi,to,eo,io,oo,no,ro,so,ao,go,lo,ho,co,uo,Ao,Io,Co,po,fo,vo,mo,bo,yo,_o,To,Eo,wo,ko,Oo,So,Ro,xo,Do,Mo,No,Lo,Po,$o,Bo,Fo,zo,Ho,Go,Uo,Vo,Wo,jo,Yo,Xo,Zo,Ko,Qo,Jo,qo,tn,en,on,nn,rn,sn,an,gn,ln,hn,cn,un,dn,An,In,Cn,pn,fn,vn,mn,bn,yn,_n,Tn,En,wn,kn,On,Sn,Rn,xn,Dn,Mn,Nn,Ln,Pn,$n,Bn,Fn,zn,Hn,Gn,Un,Vn,Wn,jn,Yn,Xn,Zn,Kn,Qn,Jn,qn,tr,er,ir,or,nr,rr,sr,ar,gr,lr,hr,cr,ur,dr,Ar,Ir,Cr,pr,fr,vr,mr,br,yr,_r,Tr,Er,wr,kr,Or,Sr,Rr,xr,Dr,Mr,Nr,Lr,Pr,$r,Br,Fr,zr,Hr,Gr,Ur,Vr,Wr,jr,Yr,Xr,Zr,Kr,Qr,Jr,qr,ts,es,is,os,ns,rs,ss,as,gs,ls,hs,cs,us,ds,As,Is,Cs,ps,fs,vs,ms,bs,ys,_s,Ts,Es,ws,ks,Os,Ss,Rs,xs,Ds,Ms,Ns,Ls,Ps,$s,Bs,Fs,zs,Hs={};t=function(t,i,o,n){if(!(t instanceof js)&&"string"!=typeof t||""===`${t}`.trim())throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=`${t}`.toLowerCase(),"string"!=typeof i||""===i.trim())throw Error('Invalid name "'+i+'". The name must be a non-empty string.');const r=i.toLowerCase();if(!o)throw Error("Can not register a null value");let s=Gs[t],a=Vs[t];if(s||(s=Gs[t]=Object.create(null),a=Vs[t]=Object.create(null)),e(t,o),!n&&s[r]&&s[r]!==o)throw Error('Name "'+r+'" with type "'+t+'" already registered.');s[r]=o,a[r]=i},e=function(t,e){if(t===String(js.FIELD)&&"function"!=typeof e.fromJson)throw Error('Type "'+t+'" must have a fromJson function')},o=function(t,e){t=`${t}`.toLowerCase(),e=e.toLowerCase();const i=Gs[t];i&&i[e]?(delete Gs[t][e],delete Vs[t][e]):console.warn("Unable to unregister ["+e+"]["+t+"] from the registry.")},n=function(t,e,i){t=`${t}`.toLowerCase(),e=e.toLowerCase();const o=Gs[t];if(!o||!o[e]){if(e="Unable to find ["+e+"]["+t+"] in the registry.",i)throw Error(e+" You must require or register a "+t+" plugin.");return console.warn(e),null}return o[e]},r=function(t,e){return t=`${t}`.toLowerCase(),e=e.toLowerCase(),!!(t=Gs[t])&&!!t[e]},s=function(t,e,i){return n(t,e,i)},a=function(t,e,i){return n(t,e,i)},g=function(t,e,i){t=`${t}`.toLowerCase();var o=Gs[t];if(!o){if(o=`Unable to find [${t}] in the registry.`,i)throw Error(`${o} You must require or register a ${t} plugin.`);return console.warn(o),null}if(!e)return o;t=Vs[t],i=Object.create(null);for(const e of Object.keys(o))i[t[e]]=o[e];return i},l=function(t,e,i){return"function"==typeof(e=e.plugins[String(t)]||Ws)?e:s(t,e,i)},h=function(){return"blockly-"+(Ea++).toString(36)},c=function(){return Ta.genUid()},Hs.setRecordUndo$$module$build$src$core$events$utils=function(t){Zs=t},u=function(){return Zs},d=function(t){ma.fireInternal(t)},A=function(t){if(f()){if(!va.length)try{requestAnimationFrame((()=>{setTimeout(I,0)}))}catch(t){setTimeout(I,0)}va.push(t)}},I=function(){var t=C(va,!0);va.length=0;for(let i,o=0;i=t[o];o++)if(i.workspaceId){var e=T(i.workspaceId);e&&e.fireChangeListener(i)}t=new Set(t.map((t=>t.workspaceId)));for(const i of t){if(!i)continue;if(!(t=T(i)))continue;let o;for(e=(t=t.getUndoStack()).length;0<e;e--){const i=t[e-1];if(""===i.group)break;if(void 0===o)o=i.group;else if(i.group!==o)break}o&&e!=t.length-1&&(e=t.splice(e,t.length-e),e=C(e,!0),t.push(...e))}},C=function(t,e){t=t.slice(),e||t.reverse();const i=[],o=Object.create(null);for(let e,s=0;e=t[s];s++)if(!e.isNull()){var n=[e.isUiEvent?ea:e.type,e.blockId,e.workspaceId].join(" "),r=o[n];const t=r?r.event:null;r?e.type===Hs.MOVE$$module$build$src$core$events$utils&&r.index===s-1?(n=e,t.newParentId=n.newParentId,t.newInputName=n.newInputName,t.newCoordinate=n.newCoordinate,n.reason&&(t.reason?(n=new Set(n.reason.concat(t.reason)),t.reason=Array.from(n)):t.reason=n.reason),r.index=s):e.type===Hs.CHANGE$$module$build$src$core$events$utils&&e.element===t.element&&e.name===t.name?t.newValue=e.newValue:e.type===ha?(r=e,t.viewTop=r.viewTop,t.viewLeft=r.viewLeft,t.scale=r.scale,t.oldScale=r.oldScale):e.type===na&&t.type===sa||(o[n]={event:e,index:s},i.push(e)):(o[n]={event:e,index:s},i.push(e))}t=i.filter((function(t){return!t.isNull()})),e||t.reverse();for(let e,i=1;e=t[i];i++)e.type===Hs.CHANGE$$module$build$src$core$events$utils&&"mutation"===e.element&&t.unshift(t.splice(i,1)[0]);return t},p=function(){for(let t,e=0;t=va[e];e++)t.recordUndo=!1},Hs.disable$$module$build$src$core$events$utils=function(){Ks++},Hs.enable$$module$build$src$core$events$utils=function(){Ks--},f=function(){return 0===Ks},Hs.getGroup$$module$build$src$core$events$utils=function(){return Xs},Hs.setGroup$$module$build$src$core$events$utils=function(t){ma.setGroupInternal(t)},v=function(t){Xs="boolean"==typeof t?t?c():"":t},m=function(t){const e=[];t=t.getDescendants(!1);for(let i,o=0;i=t[o];o++)e[o]=i.id;return e},b=function(t,e){const i=y(t.type);if(!i)throw Error("Unknown event type.");return i.fromJson(t,e)},y=function(t){const e=s(js.EVENT,t);if(!e)throw Error(`Event type ${t} not found in registry.`);return e},_=function(t){if((t.type===Hs.MOVE$$module$build$src$core$events$utils||t.type===Hs.CREATE$$module$build$src$core$events$utils)&&t.workspaceId){var e=T(t.workspaceId);if(!t.blockId)throw Error("Encountered a blockEvent without a proper blockId");if(t=e.getBlockById(t.blockId)){const i=Zs;try{Zs=!1;const i=t.getParent();if(i&&!i.hasDisabledReason(pa)){const e=t.getDescendants(!1);for(let t,i=0;t=e[i];i++)t.setDisabledReason(!1,pa)}else if((t.outputConnection||t.previousConnection)&&!e.isDragging())do{t.setDisabledReason(!0,pa),t=t.getNextBlock()}while(t)}finally{Zs=i}}}},T=function(t){return Sa[t]||null},E=function(){const t=[];for(const e in Sa)t.push(Sa[e]);return t},w=function(t){Sa[t.id]=t},k=function(t){delete Sa[t.id]},O=function(){return ka},S=function(t){ka=t},R=function(){return Ra},Hs.setSelected$$module$build$src$core$common=function(t){if(Ra!==t){var e,i,o,n,r,s,a,g,l=new(y(oa))(null!=(o=null==(e=Ra)?void 0:e.id)?o:null,null!=(n=null==t?void 0:t.id)?n:null,null!=(s=null!=(r=null==t?void 0:t.workspace.id)?r:null==(i=Ra)?void 0:i.workspace.id)?s:"");d(l),null==(a=Ra)||a.unselect(),null==(g=Ra=t)||g.select()}},x=function(){return Oa},D=function(t){Oa=t},M=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;const e=t.getParentSvg(),i=t.getCachedParentSvgSize();var o=e.parentElement;if(o instanceof HTMLElement){var n=o.offsetWidth;o=o.offsetHeight,i.width!==n&&(e.setAttribute("width",n+"px"),t.setCachedParentSvgSize(n,null)),i.height!==o&&(e.setAttribute("height",o+"px"),t.setCachedParentSvgSize(null,o)),t.resize()}},N=function(t,e){const i=Object.create(null),o=t.getDescendants(!0);e&&(t=t.getNextBlock())&&(t=o.indexOf(t),o.splice(t,o.length-t));for(let t,e=0;t=o[e];e++)i[t.type]?i[t.type]++:i[t.type]=1;return i},L=function(t){return function(){this.jsonInit(t)}},P=function(t){Da.defineBlocksWithJsonArrayInternal(t)},$=function(t){Hs.defineBlocks$$module$build$src$core$common(Hs.createBlockDefinitionsFromJsonArray$$module$build$src$core$common(t))},Hs.createBlockDefinitionsFromJsonArray$$module$build$src$core$common=function(t){const e={};for(let i=0;i<t.length;i++){const o=t[i];if(!o){console.warn(`Block definition #${i} in JSON array is ${o}. Skipping`);continue}const n=o.type;n?e[n]={init:L(o)}:console.warn(`Block definition #${i} in JSON array is missing a type attribute. Skipping.`)}return e},Hs.defineBlocks$$module$build$src$core$common=function(t){for(const e of Object.keys(t)){const i=t[e];e in ya&&console.warn(`Block definition "${e}" overwrites previous definition.`),ya[e]=i}},B=function(t,e){F(),tg=setTimeout((function(){e&&e.handleRightClick(t)}),Ka)},F=function(){tg&&(clearTimeout(tg),tg=0)},z=function(){Ja=null},H=function(t){return!t.type.startsWith("pointer")||t instanceof PointerEvent&&U(t)},G=function(t){return`${t.pointerId}`},U=function(t){const e=G(t);return Ja?Ja===e:"pointerdown"===t.type&&(Ja=e,!0)},V=function(t,e,i,o,n){function r(t){(n||H(t))&&(i?o.call(i,t):o(t))}const s=[];if(e in qa)for(let i=0;i<qa[e].length;i++){const o=qa[e][i];t.addEventListener(o,r,!1),s.push([t,o,r])}else t.addEventListener(e,r,!1),s.push([t,e,r]);return s},W=function(t,e,i,o){function n(t){i?o.call(i,t):o(t)}const r=[];if(e in qa)for(let i=0;i<qa[e].length;i++){const o=qa[e][i];t.addEventListener(o,n,!1),r.push([t,o,n])}else t.addEventListener(e,n,!1),r.push([t,e,n]);return r},j=function(t){const e=t[t.length-1][2];for(;t.length;){const[e,i,o]=t.pop();e.removeEventListener(i,o,!1)}return e},Y=function(t){if(t.target instanceof HTMLElement){if(t.target.isContentEditable||"true"===t.target.getAttribute("data-is-text-input"))return!0;if(t.target instanceof HTMLInputElement)return"text"===(t=t.target).type||"number"===t.type||"email"===t.type||"password"===t.type||"search"===t.type||"tel"===t.type||"url"===t.type;if(t.target instanceof HTMLTextAreaElement)return!0}return!1},X=function(t){return!(!t.ctrlKey||!ag)||2===t.button},Z=function(t,e,i){const o=e.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,i||(i=e.getScreenCTM().inverse()),o.matrixTransform(i)},K=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*hg,y:t.deltaY*hg};case 2:return{x:t.deltaX*cg,y:t.deltaY*cg}}},Q=function(t,e){return-1!==(e=t.indexOf(e))&&(t.splice(e,1),!0)},J=function(t){if(Cg)throw Error("CSS already injected");pg+="\n"+t},q=function(t,e){Cg||(Cg=!0,t&&(t=e.replace(/[\\/]$/,""),e=pg.replace(/<<<PATH>>>/g,t),pg="",(t=document.createElement("style")).id="blockly-common-style",e=document.createTextNode(e),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild)))},tt=function(t,e,i){t=document.createElementNS(bg,`${t}`);for(const i in e)t.setAttribute(i,`${e[i]}`);return i&&i.appendChild(t),t},et=function(t,e){return!(e=e.split(" ")).every((e=>t.classList.contains(e)))&&(t.classList.add(...e),!0)},it=function(t,e){t.classList.remove(...e.split(" "))},ot=function(t,e){return!(e=e.split(" ")).every((e=>!t.classList.contains(e)))&&(t.classList.remove(...e),!0)},nt=function(t,e){return t.classList.contains(e)},rt=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},st=function(t,e){const i=e.nextSibling;if(!(e=e.parentNode))throw Error("Reference node has no parent.");i?e.insertBefore(t,i):e.appendChild(t)},at=function(t,e){t.style.transform=e,t.style["-webkit-transform"]=e},gt=function(){Eg++,Tg||(Tg=Object.create(null))},lt=function(){--Eg||(Tg=null)},ht=function(t){const e=t.textContent+"\n"+t.className.baseVal;let i;if(Tg&&(i=Tg[e]))return i;try{i=t.getComputedTextLength()}catch(e){return 8*t.textContent.length}return Tg&&(Tg[e]=i),i},ct=function(t,e,i,o){return ut(t,e+"pt",i,o)},ut=function(t,e,i,o){const n=t.textContent;var r;return t=n+"\n"+t.className.baseVal,Tg&&(r=Tg[t])||(wg||((r=document.createElement("canvas")).className="blocklyComputeCanvas",document.body.appendChild(r),wg=r.getContext("2d")),wg.font=i+" "+e+" "+o,r=n?wg.measureText(n).width:0,Tg&&(Tg[t]=r)),r},dt=function(t,e,i,o){const n=document.createElement("span");n.style.font=i+" "+e+" "+o,n.textContent=t,(t=document.createElement("div")).style.width="1px",t.style.height="0",(e=document.createElement("div")).style.display="flex",e.style.position="fixed",e.style.top="0",e.style.left="0",e.appendChild(n),e.appendChild(t),document.body.appendChild(e),i={height:0,baseline:0};try{e.style.alignItems="baseline",i.baseline=t.offsetTop-n.offsetTop,e.style.alignItems="flex-end",i.height=t.offsetTop-n.offsetTop}finally{document.body.removeChild(e)}return i},At=function(t){return xg.getSizeInternal(t)},It=function(t){if("none"!==pt(t,"display"))return Ct(t);const e=t.style,i=e.display,o=e.visibility,n=e.position;e.visibility="hidden",e.position="absolute",e.display="inline";const r=t.offsetWidth;return t=t.offsetHeight,e.display=i,e.position=n,e.visibility=o,new Rg(r,t)},Ct=function(t){return new Rg(t.offsetWidth,t.offsetHeight)},pt=function(t,e){return(t=window.getComputedStyle(t))[e]||t.getPropertyValue(e)},ft=function(t){const e=new mg(0,0);t=t.getBoundingClientRect();var i=document.documentElement;return i=new mg(window.pageXOffset||i.scrollLeft,window.pageYOffset||i.scrollTop),e.x=t.left+i.x,e.y=t.top+i.y,e},vt=function(){const t=document.body,e=document.documentElement;return new mg(t.scrollLeft||e.scrollLeft,t.scrollTop||e.scrollTop)},mt=function(t){const e=parseFloat(pt(t,"borderLeftWidth")),i=parseFloat(pt(t,"borderRightWidth")),o=parseFloat(pt(t,"borderTopWidth"));return t=parseFloat(pt(t,"borderBottomWidth")),new Sg(o,t,e,i)},bt=function(t,e,i){t=yt(t,e,i),e.scrollLeft=t.x,e.scrollTop=t.y},yt=function(t,e,i){var o=ft(t),n=ft(e),r=mt(e);const s=o.x-n.x-r.left;return o=o.y-n.y-r.top,n=Ct(t),t=e.clientWidth-n.width,n=e.clientHeight-n.height,r=e.scrollLeft,e=e.scrollTop,i?(r+=s-t/2,e+=o-n/2):(r+=Math.min(s,Math.max(s-t,0)),e+=Math.min(o,Math.max(o-n,0))),new mg(r,e)},_t=function(t){const e=new mg(0,0);var i=t.x&&t.getAttribute("x");const o=t.y&&t.getAttribute("y");return i&&(e.x=parseInt(i)),o&&(e.y=parseInt(o)),(i=(i=t.getAttribute("transform"))&&i.match(Mg))&&(e.x+=Number(i[1]),i[3]&&(e.y+=Number(i[3]))),(t=t.getAttribute("style"))&&t.includes("translate")&&(t=t.match(Ng))&&(e.x+=Number(t[1]),t[3]&&(e.y+=Number(t[3]))),e},Tt=function(t){let e=0,i=0;for(;t;){const o=_t(t);if(e+=o.x,i+=o.y,(" "+(t.getAttribute("class")||"")+" ").includes(" injectionDiv "))break;t=t.parentNode}return new mg(e,i)},Et=function(){const t=vt();return new Sg(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},wt=function(){const t=document.documentElement,e=window;return new mg(e.pageXOffset||t.scrollLeft,e.pageYOffset||t.scrollTop)},kt=function(t,e){var i=e.x;e=e.y;const o=t.getInjectionDiv().getBoundingClientRect();return i=new mg(i-o.left,e-o.top),e=t.getOriginOffsetInPixels(),mg.difference(i,e).scale(1/t.scale)},Ot=function(t,e){var i=e.scale(t.scale);e=i.x,i=i.y;const o=t.getInjectionDiv().getBoundingClientRect();return t=t.getOriginOffsetInPixels(),new mg(e+o.left+t.x,i+o.top+t.y)},St=function(t){({document:Fg=Fg,DOMParser:zg=zg,XMLSerializer:Hg=Hg}=t),$g=new zg,Bg=new Hg},Hs.createElement$$module$build$src$core$utils$xml=function(t){return Fg.createElementNS(Gg,t)},Hs.createTextNode$$module$build$src$core$utils$xml=function(t){return Fg.createTextNode(t)},Hs.textToDom$$module$build$src$core$utils$xml=function(t){let e=$g.parseFromString(t,"text/xml");if(e&&e.documentElement&&!e.getElementsByTagName("parsererror").length)return e.documentElement;if((e=$g.parseFromString(t,"text/html"))&&e.body.firstChild&&"xml"===e.body.firstChild.nodeName.toLowerCase())return e.body.firstChild;throw Error(`DOMParser was unable to parse: ${t}`)},Rt=function(t){return xt(Bg.serializeToString(t))},xt=function(t){return t.replace(Ug,(t=>`&#${t.charCodeAt(0)};`))},Dt=function(t){return t?((t instanceof Element||"string"==typeof t)&&(t=Ht(t),t=Bt(t)),Mt(t),t):null},Mt=function(t){const e=t.kind;if(t=t.contents,e&&e!==Yg&&e!==jg)throw Error("Invalid toolbox kind "+e+". Please supply either "+Yg+" or "+jg);if(!t)throw Error("Toolbox must have a contents attribute.")},Nt=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:Ft(t):[]},Lt=function(t){return Qg.hasCategoriesInternal(t)},Pt=function(t){if(!t)return!1;const e=t.kind;return e?e===jg:!!t.contents.filter((function(t){return"CATEGORY"===t.kind.toUpperCase()})).length},$t=function(t){return!(!t||!t.contents||!t.contents.filter((function(t){return"CATEGORY"===t.kind.toUpperCase()})).length)},Bt=function(t){const e={contents:Ft(t)};return t instanceof Node&&zt(t,e),e},Ft=function(t){const e=[];let i=t.childNodes;i||(i=t);for(let o,n=0;o=i[n];n++){if(!o.tagName)continue;t={};const i=o.tagName.toUpperCase();t.kind=i,"BLOCK"===i?t.blockxml=o:o.childNodes&&0<o.childNodes.length&&(t.contents=Ft(o)),zt(o,t),e.push(t)}return e},zt=function(t,e){for(let i=0;i<t.attributes.length;i++){const o=t.attributes[i];o.nodeName.includes("css-")?(e.cssconfig=e.cssconfig||{},e.cssconfig[o.nodeName.replace("css-","")]=o.value):e[o.nodeName]=o.value}},Ht=function(t){let e=null;if(t)if("string"==typeof t){if(e=Hs.textToDom$$module$build$src$core$utils$xml(t),"xml"!==e.nodeName.toLowerCase())throw TypeError("Toolbox should be an <xml> document.")}else t instanceof Element&&(e=t);return e},Gt=function(t,e,i,o,n,r){const s=r.scrollbar&&r.scrollbar.canScrollVertically();return t.horizontal===Zg.LEFT?(i=n.absoluteMetrics.left+i,s&&r.RTL&&(i+=Pg.scrollbarThickness)):(i=n.absoluteMetrics.left+n.viewMetrics.width-e.width-i,s&&!r.RTL&&(i-=Pg.scrollbarThickness)),t.vertical===Xg.TOP?t=n.absoluteMetrics.top+o:(t=n.absoluteMetrics.top+n.viewMetrics.height-e.height-o,r.scrollbar&&r.scrollbar.canScrollHorizontally()&&(t-=Pg.scrollbarThickness)),new Sg(t,t+e.height,i,i+e.width)},Ut=function(t,e){return{horizontal:e.toolboxMetrics.position===Wg.LEFT||t.horizontalLayout&&!t.RTL?Zg.RIGHT:Zg.LEFT,vertical:e.toolboxMetrics.position===Wg.BOTTOM?Xg.TOP:Xg.BOTTOM}},Vt=function(t,e,i,o){const n=t.left,r=t.right-t.left,s=t.bottom-t.top;for(let a=0;a<o.length;a++){const g=o[a];t.intersects(g)&&(t=i===Kg.UP?g.top-s-e:g.bottom+e,t=new Sg(t,t+s,n,n+r),a=-1)}return t},Wt=function(t,e){cl(t,e)},jt=function(t){cl=t},Yt=function(t,e){Al.confirmInternal(t,e)},Xt=function(t,e){ul(t,e)},Zt=function(t){ul=t},Kt=function(t,e,i){dl(t,e,i)},Qt=function(t){dl=t},Jt=function(t){return void 0!==t.getVariableModel},qt=function(t){return void 0!==t.getProcedureDef},te=function(t){return void 0!==t.getProcedureCall&&void 0!==t.renameProcedure},Hs.allUsedVarModels$$module$build$src$core$variables=function(t){t=t.getAllBlocks(!1);const e=new Set;for(let i=0;i<t.length;i++){const o=t[i].getVarModels();if(o)for(let t=0;t<o.length;t++){const i=o[t];i.getId()&&e.add(i)}}return Array.from(e.values())},Hs.allDeveloperVariables$$module$build$src$core$variables=function(t){t=t.getAllBlocks(!1);const e=new Set;for(let o,n=0;o=t[n];n++){var i=o.getDeveloperVariables;if(i){i=i();for(let t=0;t<i.length;t++)e.add(i[t])}}return Array.from(e.values())},ee=function(t){let e=[];const i=document.createElement("button");return i.setAttribute("text","%{BKY_NEW_VARIABLE}"),i.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",(function(t){se(t.getTargetWorkspace())})),e.push(i),t=ie(t),e.concat(t)},ie=function(t){const e=[];if(0<(t=t.getVariablesOfType("")).length){var i=t[t.length-1];if(ya.variables_set){var o=Hs.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","variables_set"),o.setAttribute("gap",ya.math_change?"8":"24"),o.appendChild(de(i)),e.push(o)}if(ya.math_change&&((o=Hs.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type","math_change"),o.setAttribute("gap",ya.variables_get?"20":"8"),o.appendChild(de(i)),i=Hs.textToDom$$module$build$src$core$utils$xml('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),o.appendChild(i),e.push(o)),ya.variables_get){t.sort(vl.compareByName);for(let o,n=0;o=t[n];n++)(i=Hs.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type","variables_get"),i.setAttribute("gap","8"),i.appendChild(de(o)),e.push(i)}}return e},oe=function(t){return yl.generateUniqueNameInternal(t)},ne=function(t){return re(bl.charAt(0),t.getAllVariableNames())},re=function(t,e){if(!e.length)return t;const i=bl;let o="",n=i.indexOf(t);for(;;){let r=!1;for(let i=0;i<e.length;i++)if(e[i].toLowerCase()===t){r=!0;break}if(!r)break;n++,n===i.length&&(n=0,o=`${Number(o)+1}`),t=i.charAt(n)+o}return t},se=function(t,e,i){const o=i||"";!function i(n){ae(Hs.Msg$$module$build$src$core$msg.NEW_VARIABLE_TITLE,n,(function(n){if(n){var r=le(n,t);if(r){if(r.type===o)var s=Hs.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS.replace("%1",r.name);else s=(s=Hs.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE).replace("%1",r.name).replace("%2",r.type);Wt(s,(function(){i(n)}))}else t.createVariable(n,o),e&&e(n)}else e&&e(null)}))}("")},Hs.renameVariable$$module$build$src$core$variables=function(t,e,i){!function o(n){const r=Hs.Msg$$module$build$src$core$msg.RENAME_VARIABLE_TITLE.replace("%1",e.name);ae(r,n,(function(n){if(n){var r=ge(n,e.type,t),s=he(e.name,n,t);if(r||s){var a="";r?a=Hs.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",r.name).replace("%2",r.type):s&&(a=Hs.Msg$$module$build$src$core$msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER.replace("%1",n).replace("%2",s)),Wt(a,(function(){o(n)}))}else t.renameVariableById(e.getId(),n),i&&i(n)}else i&&i(null)}))}("")},ae=function(t,e,i){Kt(t,e,(function(t){t&&((t=t.replace(/[\s\xa0]+/g," ").trim())===Hs.Msg$$module$build$src$core$msg.RENAME_VARIABLE||t===Hs.Msg$$module$build$src$core$msg.NEW_VARIABLE)&&(t=null),i(t)}))},ge=function(t,e,i){i=i.getVariableMap().getAllVariables(),t=t.toLowerCase();for(let o,n=0;o=i[n];n++)if(o.name.toLowerCase()===t&&o.type!==e)return o;return null},le=function(t,e){e=e.getVariableMap().getAllVariables(),t=t.toLowerCase();for(let i,o=0;i=e[o];o++)if(i.name.toLowerCase()===t)return i;return null},he=function(t,e,i){return i.getProcedureMap().getProcedures().length?ce(t,e,i):ue(t,e,i)},ce=function(t,e,i){t=t.toLowerCase(),e=e.toLowerCase(),i=i.getProcedureMap().getProcedures();for(const n of i){var o=n.getParameters().filter(Jt).map((t=>t.getVariableModel().name));if(o&&(i=o.some((e=>e.toLowerCase()===t)),o=o.some((t=>t.toLowerCase()===e)),i&&o))return n.getName()}return null},ue=function(t,e,i){t=t.toLowerCase(),e=e.toLowerCase(),i=i.getAllBlocks(!1);for(const n of i){if(!qt(n))continue;var o=(i=n.getProcedureDef())[1];const r=o.some((e=>e.toLowerCase()===t));if(o=o.some((t=>t.toLowerCase()===e)),r&&o)return i[0]}return null},de=function(t){const e=Hs.createElement$$module$build$src$core$utils$xml("field");return e.setAttribute("name","VAR"),e.setAttribute("id",t.getId()),e.setAttribute("variabletype",t.type),t=Hs.createTextNode$$module$build$src$core$utils$xml(t.name),e.appendChild(t),e},Hs.getOrCreateVariablePackage$$module$build$src$core$variables=function(t,e,i,o){let n=Hs.getVariable$$module$build$src$core$variables(t,e,i,o);return n||(n=Ae(t,e,i,o)),n},Hs.getVariable$$module$build$src$core$variables=function(t,e,i,o){const n=t.getPotentialVariableMap();let r=null;if(e&&(r=t.getVariableById(e),!r&&n&&(r=n.getVariableById(e)),r))return r;if(i){if(void 0===o)throw Error("Tried to look up a variable by name without a type");r=t.getVariable(i,o),!r&&n&&(r=n.getVariable(i,o))}return r},Ae=function(t,e,i,o){const n=t.getPotentialVariableMap();return i||(i=oe(t.isFlyout?t.targetWorkspace:t)),n?n.createVariable(i,o,e):t.createVariable(i,o,e)},Ie=function(t,e){t=t.getAllVariables();const i=[];if(e.length!==t.length)for(let o=0;o<t.length;o++){const n=t[o];e.includes(n)||i.push(n)}return i},Ce=function(t){return me(t),ve()?(be(),Promise.resolve()):(kl||(kl=new Promise((t=>{Ol=t,Sl=window.requestAnimationFrame((()=>{be(),t()}))}))),kl)},pe=function(){return kl||Promise.resolve()},fe=function(t){t||window.cancelAnimationFrame(Sl),be(t),!t&&Ol&&Ol()},ve=function(){return ig},me=function(t){El.add(t),wl.set(t,Hs.getGroup$$module$build$src$core$events$utils());const e=t.getParent();e?me(e):Tl.add(t)},be=function(t){const e=t?new Set([t]):new Set([...Tl].map((t=>t.workspace))),i=[...Tl].filter(_e).filter((t=>e.has(t.workspace)));for(var o of i)Te(o);for(const t of e)t.resizeContents();for(var n of i)o=n.getRelativeToSurfaceXY(),n.updateComponentLocations(o);for(const t of i)n=Hs.getGroup$$module$build$src$core$events$utils(),(o=wl.get(t))&&Hs.setGroup$$module$build$src$core$events$utils(o),t.bumpNeighbours(),Hs.setGroup$$module$build$src$core$events$utils(n);for(const t of i)ye(t);t||(kl=null)},ye=function(t){Tl.delete(t),El.delete(t),wl.delete(t);for(const e of t.getChildren(!1))ye(e)},_e=function(t){return!t.isDisposed()&&!t.getParent()},Te=function(t){if(El.has(t)&&t.initialized){for(const e of t.getChildren(!1))Te(e);t.renderEfficiently()}},Ee=function(e,i){t(js.SERIALIZER,e,i)},we=function(t){o(js.SERIALIZER,t)},ke=function(t,{addCoordinates:e=!1,saveIds:i=!0}={}){const o=t.workspace,n=Object.create(null);return n.height=t.getSize().height,n.width=t.getSize().width,i&&(n.id=t.id),e&&(e=t.getRelativeToSurfaceXY(),n.x=o.RTL?o.getWidth()-e.x:e.x,n.y=e.y),t.getText()&&(n.text=t.getText()),t.isCollapsed()&&(n.collapsed=!0),t.isOwnEditable()||(n.editable=!1),t.isOwnMovable()||(n.movable=!1),t.isOwnDeletable()||(n.deletable=!1),n},Oe=function(t,e,{recordUndo:i=!1}={}){const o=u();if(Hs.setRecordUndo$$module$build$src$core$events$utils(i),i=e.newComment(t.id),void 0!==t.text&&i.setText(t.text),void 0!==t.x||void 0!==t.y){const o=i.getRelativeToSurfaceXY();let r,s=null!=(r=t.x)?r:o.x;var n;s=e.RTL?e.getWidth()-s:s,e=null!=(n=t.y)?n:o.y,i.moveTo(new mg(s,e))}if(void 0!==t.width||t.height){let e,o;n=i.getSize(),i.setSize(new Rg(null!=(e=t.width)?e:n.width,null!=(o=t.height)?o:n.height))}return void 0!==t.collapsed&&i.setCollapsed(t.collapsed),void 0!==t.editable&&i.setEditable(t.editable),void 0!==t.movable&&i.setMovable(t.movable),void 0!==t.deletable&&i.setDeletable(t.deletable),Hs.setRecordUndo$$module$build$src$core$events$utils(o),i},Se=function(e,i){t(js.PASTER,e,i)},Re=function(t){o(js.PASTER,t)},xe=function(t){const e=t.workspace,i=t.getRelativeToSurfaceXY(),o=new mg(0,0),n=e.getTopComments(!1).filter((e=>e.id!==t.id)).map((t=>t.getRelativeToSurfaceXY()));for(;De(mg.sum(i,o),n);)o.translate(e.RTL?-30:30,30);t.moveTo(mg.sum(i,o))},De=function(t,e){return e.some((e=>1>=Math.abs(e.x-t.x)&&1>=Math.abs(e.y-t.y)))},Me=function(t,e){t.setAttribute(Vl,e)},Ne=function(t,e,i){Array.isArray(i)&&(i=i.join(" ")),t.setAttribute(Ul+e,`${i}`)},Le=function(t){return void 0!==t.saveState&&void 0!==t.loadState},Pe=function(t,{addCoordinates:e=!1,addInputBlocks:i=!0,addNextBlocks:o=!0,doFullSerialization:n=!0,saveIds:r=!0}={}){if(t.isInsertionMarker())return null;const s={type:t.type,id:r?t.id:void 0};return e&&Be(t,s),$e(t,s),Fe(t,s,n),ze(t,s,n),He(t,s,n),i&&Ge(t,s,n,r),o&&Ue(t,s,n,r),s},$e=function(t,e){t.isCollapsed()&&(e.collapsed=!0),t.isEnabled()||(e.disabledReasons=Array.from(t.getDisabledReasons())),t.isOwnDeletable()||(e.deletable=!1),t.isOwnMovable()||(e.movable=!1),t.isOwnEditable()||(e.editable=!1),void 0!==t.inputsInline&&t.inputsInline!==t.inputsInlineDefault&&(e.inline=t.inputsInline),t.data&&(e.data=t.data)},Be=function(t,e){const i=t.workspace;t=t.getRelativeToSurfaceXY(),e.x=Math.round(i.RTL?i.getWidth()-t.x:t.x),e.y=Math.round(t.y)},Fe=function(t,e,i){t.saveExtraState?null!==(t=t.saveExtraState(i))&&(e.extraState=t):t.mutationToDom&&null!==(t=t.mutationToDom())&&(e.extraState=Qo(t).replace(' xmlns="https://developers.google.com/blockly/xml"',""))},ze=function(t,e,i){const o=Object.create(null);for(const e of t.getIcons())Le(e)&&(t=e.saveState(i))&&(o[e.getType().toString()]=t);Object.keys(o).length&&(e.icons=o)},He=function(t,e,i){const o=Object.create(null);for(let e=0;e<t.inputList.length;e++){const n=t.inputList[e];for(let t=0;t<n.fieldRow.length;t++){const e=n.fieldRow[t];e.isSerializable()&&(o[e.name]=e.saveState(i))}}Object.keys(o).length&&(e.fields=o)},Ge=function(t,e,i,o){const n=Object.create(null);for(let e=0;e<t.inputList.length;e++){const r=t.inputList[e];if(!r.connection)continue;const s=Ve(r.connection,i,o);s&&(n[r.name]=s)}Object.keys(n).length&&(e.inputs=n)},Ue=function(t,e,i,o){t.nextConnection&&(t=Ve(t.nextConnection,i,o))&&(e.next=t)},Ve=function(t,e,i){const o=t.getShadowState(!0);if(t=t.targetBlock(),!o&&!t)return null;const n=Object.create(null);return o&&(n.shadow=o),t&&!t.isShadow()&&(n.block=Pe(t,{doFullSerialization:e,saveIds:i})),n},We=function(t,e,{recordUndo:i=!1}={}){return t=je(t,e,{recordUndo:i}),e.rendered&&fe(),t},je=function(t,e,{parentConnection:i,isShadow:o=!1,recordUndo:n=!1}={}){const r=u();Hs.setRecordUndo$$module$build$src$core$events$utils(n),(n=Hs.getGroup$$module$build$src$core$events$utils())||Hs.setGroup$$module$build$src$core$events$utils(!0),Hs.disable$$module$build$src$core$events$utils();const s=e.getAllVariables();let a;try{a=Ye(t,e,{parentConnection:i,isShadow:o})}finally{Hs.enable$$module$build$src$core$events$utils()}if(Xe(e,s),f()&&d(new(y(Hs.CREATE$$module$build$src$core$events$utils))(a)),Hs.setGroup$$module$build$src$core$events$utils(n),Hs.setRecordUndo$$module$build$src$core$events$utils(r),e.rendered){const t=a;setTimeout((()=>{t.disposed||t.setConnectionTracking(!0)}),1)}return a},Ye=function(t,e,{parentConnection:i,isShadow:o=!1}={}){if(!t.type)throw new Zl(t);const n=e.newBlock(t.type,t.id);return n.setShadow(o),Ze(n,t),Ke(n,t),Qe(n,t),Je(i,n,t),qe(n,t),ti(n,t),ei(n,t),ii(n,t),ni(n,e.rendered),n},Xe=function(t,e){if(f())for(t=Ie(t,e),e=0;e<t.length;e++){const i=t[e];d(new(y(Js))(i))}},Ze=function(t,e){let i=void 0===e.x?0:e.x;e=void 0===e.y?0:e.y;const o=t.workspace;i=o.RTL?o.getWidth()-i:i,t.moveBy(i,e)},Ke=function(t,e){if(e.collapsed&&t.setCollapsed(!0),!1===e.deletable&&t.setDeletable(!1),!1===e.movable&&t.setMovable(!1),!1===e.editable&&t.setEditable(!1),!1===e.enabled&&t.setDisabledReason(!0,sl),Array.isArray(e.disabledReasons))for(const i of e.disabledReasons)t.setDisabledReason(!0,i);void 0!==e.inline&&t.setInputsInline(e.inline),void 0!==e.data&&(t.data=e.data)},Qe=function(t,e){e.extraState&&(t.loadExtraState?t.loadExtraState(e.extraState):t.domToMutation&&t.domToMutation(Hs.textToDom$$module$build$src$core$utils$xml(e.extraState)))},Je=function(t,e,i){if(t){if(t.getSourceBlock().isShadow()&&!e.isShadow())throw new Jl(i);if(t.type===Hs.inputTypes$$module$build$src$core$inputs$input_types.VALUE){var o=e.outputConnection;if(!o)throw new Kl("output",e,i)}else if(!(o=e.previousConnection))throw new Kl("previous",e,i);if(!t.connect(o)){const n=e.workspace.connectionChecker;throw new Ql(n.getErrorMessage(n.canConnectWithReason(o,t,!1),o,t),t.type===Hs.inputTypes$$module$build$src$core$inputs$input_types.VALUE?"output connection":"previous connection",e,i)}}},qe=function(t,e){if(e.icons){var i=Object.keys(e.icons);for(const n of i){i=e.icons[n];var o=t.getIcon(n);if(!o){if(!(o=s(js.ICON,n,!1)))throw new ql(n,t,e);o=new o(t),t.addIcon(o)}Le(o)&&o.loadState(i)}}},ti=function(t,e){if(e.fields){var i=Object.keys(e.fields);for(let o=0;o<i.length;o++){const n=i[o],r=e.fields[n],s=t.getField(n);s?s.loadState(r):console.warn(`Ignoring non-existant field ${n} in block ${t.type}`)}}},ei=function(t,e){if(e.inputs){var i=Object.keys(e.inputs);for(let o=0;o<i.length;o++){const n=i[o],r=t.getInput(n);if(!r||!r.connection)throw new Kl(n,t,e);oi(r.connection,e.inputs[n])}}},ii=function(t,e){if(e.next){if(!t.nextConnection)throw new Kl("next",t,e);oi(t.nextConnection,e.next)}},oi=function(t,e){e.shadow&&t.setShadowState(e.shadow),e.block&&Ye(e.block,t.getSourceBlock().workspace,{parentConnection:t})},ni=function(t,e){if(e){t.setConnectionTracking(!1),t.initSvg(),t.queueRender();for(const e of t.getIcons())e.onLocationChange(t.getRelativeToSurfaceXY())}else t.initModel()},ri=function(t){return void 0!==t.bubbleIsVisible&&void 0!==t.setBubbleVisible},si=function(t){return t*Math.PI/180},ai=function(t){return 180*t/Math.PI},gi=function(t,e,i){if(i<t){const e=i;i=t,t=e}return Math.max(t,Math.min(e,i))},li=function(){document.querySelector(".blocklyDropDownDiv")||((sh=document.createElement("div")).className="blocklyDropDownDiv",(x()||document.body).appendChild(sh),(ah=document.createElement("div")).className="blocklyDropDownContent",sh.appendChild(ah),(gh=document.createElement("div")).className="blocklyDropDownArrow",sh.appendChild(gh),sh.style.opacity="0",sh.style.transition="transform "+dh+"s, opacity "+dh+"s",sh.addEventListener("focusin",(function(){et(sh,"blocklyFocused")})),sh.addEventListener("focusout",(function(){ot(sh,"blocklyFocused")})))},hi=function(t){fh=t},ci=function(){return vh},ui=function(){return ah},di=function(){ah.textContent="",ah.style.width=""},Ai=function(t,e){sh.style.backgroundColor=t,sh.style.borderColor=e},Ii=function(t,e,i,o){return vi(pi(e),t,i,o)},Ci=function(t,e,i){return mh=!0,vi(fi(t),t,e,i)},pi=function(t){var e=t.getSvgRoot();const i=t.workspace.scale,o=t.height*i;return t=t.width*i,e=ft(e),new Sg(e.y,e.y+o,e.x,e.x+t)},fi=function(t){return t=t.getScaledBBox(),new Sg(t.top,t.bottom,t.left,t.right)},vi=function(t,e,i,o){const n=t.left+(t.right-t.left)/2,r=t.bottom;t=t.top,o&&(t+=o);let s=(o=e.getSourceBlock()).workspace;for(;s.options.parentWorkspace;)s=s.options.parentWorkspace;return hi(s.getParentSvg().parentNode),mi(e,o.RTL,n,r,n,t,i)},mi=function(t,e,i,o,n,r,s){return vh=t,Ih=s||null,sh.style.direction=e?"rtl":"ltr",t=O(),Ch=t.getRenderer().getClassName(),ph=t.getTheme().getClassName(),Ch&&et(sh,Ch),ph&&et(sh,ph),Si(i,o,n,r)},bi=function(t,e,i,o){return{initialX:(t=Ti(t,i.left,i.right,o.width)).divX,initialY:e,finalX:t.divX,finalY:e+uh,arrowX:t.arrowX,arrowY:-(lh/2+hh),arrowAtTop:!0,arrowVisible:!0}},yi=function(t,e,i,o){return{initialX:(t=Ti(t,i.left,i.right,o.width)).divX,initialY:e-o.height,finalX:t.divX,finalY:e-o.height-uh,arrowX:t.arrowX,arrowY:o.height-2*hh-lh/2,arrowAtTop:!1,arrowVisible:!0}},_i=function(t,e,i){return{initialX:(t=Ti(t,e.left,e.right,i.width)).divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}},Ti=function(t,e,i,o){return e=gi(e,t-o/2,i-o),{arrowX:t=gi(i=ch,t=t-lh/2-e,o-i-lh),divX:e}},Ei=function(){return!!vh},wi=function(t,e){return vh===t&&(e?Oi():ki(),!0)},ki=function(){sh.style.transform="translate(0, 0)",sh.style.opacity="0",Ah=setTimeout((function(){Oi()}),1e3*dh),Ih&&(Ih(),Ih=null)},Oi=function(){Ei()&&(Ah&&clearTimeout(Ah),sh.style.transform="",sh.style.left="",sh.style.top="",sh.style.opacity="0",sh.style.display="none",sh.style.backgroundColor="",sh.style.borderColor="",Ih&&(Ih(),Ih=null),di(),vh=null,Ch&&(ot(sh,Ch),Ch=""),ph&&(ot(sh,ph),ph=""),O().markFocused())},Si=function(t,e,i,o){(t=bh.getPositionMetrics(t,e,i,o)).arrowVisible?(gh.style.display="",gh.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",gh.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):gh.style.display="none",e=Math.floor(t.initialX),i=Math.floor(t.initialY),o=Math.floor(t.finalX);const n=Math.floor(t.finalY);return sh.style.left=e+"px",sh.style.top=i+"px",sh.style.display="block",sh.style.opacity="1",sh.style.transform="translate("+(o-e)+"px,"+(n-i)+"px)",!!t.arrowAtTop},Ri=function(){if(vh){var t=vh.getSourceBlock();const e=(t=mh?fi(vh):pi(t)).left+(t.right-t.left)/2;Si(e,t.bottom,e,t.top)}else ki()},xi=function(t){return t.length?t.reduce((function(t,e){return t.length<e.length?t:e})).length:0},Di=function(t,e){if(!t.length)return 0;if(1===t.length)return t[0].length;let i,o=0;for(e=e||xi(t),i=0;i<e;i++){for(var n=t[0][i],r=1;r<t.length;r++)if(n!==t[r][i])return o;" "===n&&(o=i+1)}for(n=1;n<t.length;n++)if((r=t[n][i])&&" "!==r)return o;return e},Mi=function(t,e){if(!t.length)return 0;if(1===t.length)return t[0].length;let i,o=0;for(e=e||xi(t),i=0;i<e;i++){for(var n=t[0].substr(-i-1,1),r=1;r<t.length;r++)if(n!==t[r].substr(-i-1,1))return o;" "===n&&(o=i+1)}for(n=1;n<t.length;n++)if((r=t[n].charAt(t[n].length-i-1))&&" "!==r)return o;return e},Hs.wrap$$module$build$src$core$utils$string=function(t,e){t=t.split("\n");for(let i=0;i<t.length;i++)t[i]=Ni(t[i],e);return t.join("\n")},Ni=function(t,e){if(t.length<=e)return t;const i=t.trim().split(/\s+/);for(var o=0;o<i.length;o++)i[o].length>e&&(e=i[o].length);var n=-1/0;let r,s=1;do{o=n,r=t,t=[],n=i.length/s;let a=1;for(let e=0;e<i.length-1;e++)a<(e+1.5)/n?(a++,t[e]=!0):t[e]=!1;t=Pi(i,t,e),n=Li(i,t,e),t=$i(i,t),s++}while(n>o);return r},Li=function(t,e,i){const o=[0],n=[];for(var r=0;r<t.length;r++)o[o.length-1]+=t[r].length,!0===e[r]?(o.push(0),n.push(t[r].charAt(t[r].length-1))):!1===e[r]&&o[o.length-1]++;for(t=Math.max(...o),e=0,r=0;r<o.length;r++)e-=2*Math.pow(Math.abs(i-o[r]),1.5),e-=Math.pow(t-o[r],1.5),".?!".includes(n[r])?e+=i/3:",;)]}".includes(n[r])&&(e+=i/4);return 1<o.length&&o[o.length-1]<=o[o.length-2]&&(e+=.5),e},Pi=function(t,e,i){let o,n=Li(t,e,i);for(let r=0;r<e.length-1;r++){if(e[r]===e[r+1])continue;const s=[].concat(e);s[r]=!s[r],s[r+1]=!s[r+1];const a=Li(t,s,i);a>n&&(n=a,o=s)}return o?Pi(t,o,i):e},$i=function(t,e){const i=[];for(let o=0;o<t.length;o++)i.push(t[o]),void 0!==e[o]&&i.push(e[o]?"\n":" ");return i.join("")},Hs.isNumber$$module$build$src$core$utils$string=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},Bi=function(t){Eh=t},Fi=function(){return Eh},zi=function(){return wh},Hi=function(){return zh},Gi=function(t){if(t=Ui(t)){for(t=t.tooltip;"function"==typeof t;)t=t();if("string"!=typeof t)throw Error("Tooltip function must return a string.");return t}return""},Ui=function(t){for(;t&&t.tooltip;){if("string"==typeof t.tooltip||"function"==typeof t.tooltip)return t;t=t.tooltip}return null},Vi=function(){document.querySelector(".blocklyTooltipDiv")||((zh=document.createElement("div")).className="blocklyTooltipDiv",(x()||document.body).appendChild(zh))},Wi=function(t){t.mouseOverWrapper_=W(t,"pointerover",null,Yi),t.mouseOutWrapper_=W(t,"pointerout",null,Xi),t.addEventListener("pointermove",Zi,!1)},ji=function(t){t&&(j(t.mouseOverWrapper_),j(t.mouseOutWrapper_),t.removeEventListener("pointermove",Zi))},Yi=function(t){kh||(t=Ui(t.currentTarget),Mh!==t&&(Qi(),Nh=null,Mh=t),clearTimeout(Sh))},Xi=function(t){kh||(Sh=setTimeout((function(){Nh=Mh=null,Qi()}),1),clearTimeout(Rh),Rh=0)},Zi=function(t){if(Mh&&Mh.tooltip&&!kh)if(wh){const e=xh-t.pageX;t=Dh-t.pageY,Math.sqrt(e*e+t*t)>$h&&Qi()}else Nh!==Mh&&(clearTimeout(Rh),xh=t.pageX,Dh=t.pageY,Rh=setTimeout(oo,Bh))},Ki=function(){Nh=Mh=null,Qi()},Qi=function(){wh&&(wh=!1,zh&&(zh.style.display="none")),Rh&&(clearTimeout(Rh),Rh=0)},Ji=function(){Qi(),kh=!0},qi=function(){kh=!1},to=function(){zh&&Mh&&("function"==typeof Eh?Eh(zh,Mh):eo())},eo=function(){var t=Gi(Mh);t=(t=Hs.wrap$$module$build$src$core$utils$string(t,Oh)).split("\n");for(let e=0;e<t.length;e++){const i=document.createElement("div");i.appendChild(document.createTextNode(t[e])),zh.appendChild(i)}},io=function(t){const e=document.documentElement.clientWidth,i=document.documentElement.clientHeight;let o=xh;o=t?o-(Lh+zh.offsetWidth):o+Lh;let n=Dh+Ph;return n+zh.offsetHeight>i+window.scrollY&&(n-=zh.offsetHeight+2*Ph),t?o=Math.max(Fh-window.scrollX,o):o+zh.offsetWidth>e+window.scrollX-2*Fh&&(o=e-zh.offsetWidth-2*Fh),{x:o,y:n}},oo=function(){if(!kh&&(Nh=Mh,zh)){zh.textContent="",to();var t=Mh.RTL;zh.style.direction=t?"rtl":"ltr",zh.style.display="block",wh=!0;var{x:e,y:i}=io(t);zh.style.left=e+"px",zh.style.top=i+"px"}},no=function(){return Gh},ro=function(t){Gh=t},so=function(){return Uh},ao=function(t){Uh=t},go=function(t){t=`${t}`.toLowerCase().trim();var e=Vh[t];if(e)return e;if(e="#"===(e="0x"===t.substring(0,2)?"#"+t.substring(2):t)[0]?e:"#"+e,/^#[0-9a-f]{6}$/.test(e))return e;if(/^#[0-9a-f]{3}$/.test(e))return["#",e[1],e[1],e[2],e[2],e[3],e[3]].join("");var i=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return i&&(t=Number(i[1]),e=Number(i[2]),i=Number(i[3]),0<=t&&256>t&&0<=e&&256>e&&0<=i&&256>i)?lo(t,e,i):null},lo=function(t,e,i){return e=t<<16|e<<8|i,16>t?"#"+(16777216|e).toString(16).substr(1):"#"+e.toString(16)},ho=function(t){return(t=go(t))?[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t]:[0,0,0]},co=function(t,e,i){let o=0,n=0,r=0;if(0===e)r=n=o=i;else{const s=Math.floor(t/60),a=t/60-s;t=i*(1-e);const g=i*(1-e*a);switch(e=i*(1-e*(1-a)),s){case 1:o=g,n=i,r=t;break;case 2:o=t,n=i,r=e;break;case 3:o=t,n=g,r=i;break;case 4:o=e,n=t,r=i;break;case 5:o=i,n=t,r=g;break;case 6:case 0:o=i,n=e,r=t}}return lo(Math.floor(o),Math.floor(n),Math.floor(r))},uo=function(t,e,i){return(t=go(t))&&(e=go(e))?(t=ho(t),e=ho(e),lo(Math.round(e[0]+i*(t[0]-e[0])),Math.round(e[1]+i*(t[1]-e[1])),Math.round(e[2]+i*(t[2]-e[2])))):null},Ao=function(t){return co(t,Gh,255*Uh)},Io=function(t,e,i){const o=[];var n=t.split("");n.push("");var r=0;t=[];let s=null;for(let l=0;l<n.length;l++){var a=n[l];if(0===r)if("%"===a)(r=t.join(""))&&o.push(r),t.length=0,r=1;else if(i&&"\n"===a){const e=t.join("");e&&o.push(e),t.length=0,o.push(a)}else t.push(a);else if(1===r)"%"===a?(t.push(a),r=0):e&&"0"<=a&&"9">=a?(r=2,s=a,(a=t.join(""))&&o.push(a),t.length=0):"{"===a?r=3:(t.push("%",a),r=0);else if(2===r)if("0"<=a&&"9">=a)s+=a;else{var g=void 0;o.push(parseInt(null!=(g=s)?g:"",10)),l--,r=0}else 3===r&&(""===a?(t.splice(0,0,"%{"),l--,r=0):"}"!==a?t.push(a):(r=t.join(""),/[A-Z]\w*/i.test(r)&&(a=(a=r.toUpperCase()).startsWith("BKY_")?a.substring(4):null)&&a in Hs.Msg$$module$build$src$core$msg?"string"==typeof(r=Hs.Msg$$module$build$src$core$msg[a])?Array.prototype.push.apply(o,Io(r,e,i)):e?o.push(`${r}`):o.push(r):o.push("%{"+r+"}"),r=t.length=0))}for((e=t.join(""))&&o.push(e),g=[],t.length=0,n=0;n<o.length;n++)"string"!=typeof o[n]||i&&"\n"===o[n]?((e=t.join(""))&&g.push(e),t.length=0,g.push(o[n])):t.push(o[n]);return(e=t.join(""))&&g.push(e),t.length=0,g},Co=function(t){return Io(t,!0,!0)},po=function(t){return"string"!=typeof t?t:(t=Io(t,!1,!1)).length?String(t[0]):""},fo=function(t){let e=!0;const i=Hs.Msg$$module$build$src$core$msg,o=t.match(/%{BKY_[A-Z]\w*}/gi);if(o)for(let n=0;n<o.length;n++)void 0===i[o[n].toUpperCase().slice(6,-1)]&&(console.warn("No message string for "+o[n]+" in "+t),e=!1);return e},vo=function(t){const e="string"==typeof t?po(t):t;var i=Number(e);if(!isNaN(i)&&0<=i&&360>=i)return{hue:i,hex:co(i,no(),255*so())};if(i=go(e))return{hue:null,hex:i};throw i='Invalid colour: "'+e+'"',t!==e&&(i+=' (from "'+t+'")'),Error(i)},mo=function(){return Kh},bo=function(t){if(Kh=t,null===t){let t;null==(t=document.querySelector("."+tc))||t.remove()}},yo=function(){const t=x()||document.body;document.querySelector("."+tc)?Kh=document.querySelector("."+tc):(Kh=document.createElement("div")).className=tc,t.appendChild(Kh)},_o=function(t,e,i,o){if(To(),Qh=t,qh=i,i=Kh){if(i.style.direction=e?"rtl":"ltr",i.style.display="block",!o&&t instanceof Yh){let e;o=null==(e=t.getSourceBlock())?void 0:e.workspace}var n,r;Jh=null!=(n=o)?n:null,t=null!=(r=o)?r:O(),ec=t.getRenderer().getClassName(),ic=t.getTheme().getClassName(),ec&&et(i,ec),ic&&et(i,ic)}},To=function(){if(Eo()){Qh=null;var t=Kh;t&&(t.style.display="none",t.style.left="",t.style.top="",qh&&qh(),qh=null,t.textContent="",ec&&(ot(t,ec),ec=""),ic&&(ot(t,ic),ic=""),O().markFocused())}},Eo=function(){return!!Qh},wo=function(t){Qh===t&&To()},ko=function(t){null!==Jh&&Jh!==t||To()},Oo=function(t,e,i){Kh.style.left=t+"px",Kh.style.top=e+"px",Kh.style.height=i+"px"},So=function(t,e,i,o){const n=xo(t,e,i);t=Ro(t,e,i,o),0>n?Oo(t,0,i.height+n):Oo(t,n,i.height)},Ro=function(t,e,i,o){return o?Math.min(Math.max(e.right-i.width,t.left),t.right-i.width):Math.max(Math.min(e.left,t.right-i.width),t.left)},xo=function(t,e,i){return e.bottom+i.height>=t.bottom?e.top-i.height:e.bottom},Do=function(t){return!(null==t||!t.repositionForWindowResize)},Mo=function(){Do(Qh)&&Qh.repositionForWindowResize()||To()},No=function(){return nc},Lo=function(t){nc=t},Po=function(t,e,i,o){if(_o(rc,i,Go,o),e.length){var n=$o(e,i,t);sc=n,Bo(n,t,i),setTimeout((function(){n.focus()}),1),nc=null}else Ho()},$o=function(t,e,i){const o=new jl;o.setRole(Hl.MENU);for(let n=0;n<t.length;n++){const r=t[n],s=new Yl(r.text);s.setRightToLeft(e),s.setRole(Hl.MENUITEM),o.addChild(s),s.setEnabled(r.enabled),r.enabled&&s.onAction((function(){Ho(),requestAnimationFrame((()=>{setTimeout((()=>{r.callback(r.scope,i)}),0)}))}),{})}return o},Bo=function(t,e,i){const o=Et();e=new Sg(e.clientY+o.top,e.clientY+o.top,e.clientX+o.left,e.clientX+o.left),Fo(t);const n=t.getSize();i&&(e.left+=n.width,e.right+=n.width,o.left+=n.width,o.right+=n.width),So(o,e,n,i),t.focus()},Fo=function(t){var e=mo();if(!e)throw Error("Attempting to create a context menu when widget div is null");e=t.render(e),et(e,"blocklyContextMenu"),V(e,"contextmenu",null,zo),t.focus()},zo=function(t){t.preventDefault(),t.stopPropagation()},Ho=function(){wo(rc),nc=null},Go=function(){sc&&(sc.dispose(),sc=null)},Hs.callbackFactory$$module$build$src$core$contextmenu=function(t,e){return()=>{let i;Hs.disable$$module$build$src$core$events$utils();try{i=e instanceof Element?on(e,t.workspace):je(e,t.workspace);const o=t.getRelativeToSurfaceXY();o.x=t.RTL?o.x-Hs.config$$module$build$src$core$config.snapRadius:o.x+Hs.config$$module$build$src$core$config.snapRadius,o.y+=2*Hs.config$$module$build$src$core$config.snapRadius,i.moveBy(o.x,o.y)}finally{Hs.enable$$module$build$src$core$events$utils()}return f()&&!i.isShadow()&&d(new(y(Hs.CREATE$$module$build$src$core$events$utils))(i)),Hs.setSelected$$module$build$src$core$common(i),i}},Uo=function(t,e=!1){const i=Hs.createElement$$module$build$src$core$utils$xml("xml");var o=Wo(Hs.allUsedVarModels$$module$build$src$core$variables(t));o.hasChildNodes()&&i.appendChild(o);for(const o of t.getTopComments())i.appendChild(Vo(o,e));for(t=t.getTopBlocks(!0),o=0;o<t.length;o++)i.appendChild(jo(t[o],e));return i},Vo=function(t,e=!1){const i=Hs.createElement$$module$build$src$core$utils$xml("comment");e||i.setAttribute("id",t.id),e=t.workspace;const o=t.getRelativeToSurfaceXY();return o.x=e.RTL?e.getWidth()-o.x:o.x,i.setAttribute("x",`${o.x}`),i.setAttribute("y",`${o.y}`),i.setAttribute("w",`${t.getSize().width}`),i.setAttribute("h",`${t.getSize().height}`),t.getText()&&(i.textContent=t.getText()),t.isCollapsed()&&i.setAttribute("collapsed","true"),t.isOwnEditable()||i.setAttribute("editable","false"),t.isOwnMovable()||i.setAttribute("movable","false"),t.isOwnDeletable()||i.setAttribute("deletable","false"),i},Wo=function(t){const e=Hs.createElement$$module$build$src$core$utils$xml("variables");for(let i=0;i<t.length;i++){const o=t[i],n=Hs.createElement$$module$build$src$core$utils$xml("variable");n.appendChild(Hs.createTextNode$$module$build$src$core$utils$xml(o.name)),o.type&&n.setAttribute("type",o.type),n.id=o.getId(),e.appendChild(n)}return e},jo=function(t,e){if(t.isInsertionMarker()&&!(t=t.getChildren(!1)[0]))return new DocumentFragment;let i=0;if(t.workspace.RTL&&(i=t.workspace.getWidth()),e=Zo(t,e),Cn(e)){const o=t.getRelativeToSurfaceXY();e.setAttribute("x",String(Math.round(t.workspace.RTL?i-o.x:o.x))),e.setAttribute("y",String(Math.round(o.y)))}return e},Yo=function(t){if(t.isSerializable()){const e=Hs.createElement$$module$build$src$core$utils$xml("field");return e.setAttribute("name",t.name||""),t.toXml(e)}return null},Xo=function(t,e){for(let i=0;i<t.inputList.length;i++){const o=t.inputList[i];for(let t=0;t<o.fieldRow.length;t++){const i=Yo(o.fieldRow[t]);i&&e.appendChild(i)}}},Zo=function(t,e){if(t.isInsertionMarker())return(e=t.getChildren(!1)[0])?Zo(e):new DocumentFragment;const i=Hs.createElement$$module$build$src$core$utils$xml(t.isShadow()?"shadow":"block");if(i.setAttribute("type",t.type),e||(i.id=t.id),t.mutationToDom){var o=t.mutationToDom();o&&(o.hasChildNodes()||o.hasAttributes())&&i.appendChild(o)}if(Xo(t,i),o=t.getCommentText()){var n=t.getIcon(gl.COMMENT),r=n.getBubbleSize();n=n.bubbleIsVisible();var s=Hs.createElement$$module$build$src$core$utils$xml("comment");s.appendChild(Hs.createTextNode$$module$build$src$core$utils$xml(o)),s.setAttribute("pinned",`${n}`),s.setAttribute("h",String(r.height)),s.setAttribute("w",String(r.width)),i.appendChild(s)}for(t.data&&((o=Hs.createElement$$module$build$src$core$utils$xml("data")).appendChild(Hs.createTextNode$$module$build$src$core$utils$xml(t.data)),i.appendChild(o)),o=0;o<t.inputList.length;o++){var a=void 0;if(n=!0,(r=t.inputList[o]).type!==Hs.inputTypes$$module$build$src$core$inputs$input_types.DUMMY&&r.type!==Hs.inputTypes$$module$build$src$core$inputs$input_types.END_ROW){s=r.connection.targetBlock(),r.type===Hs.inputTypes$$module$build$src$core$inputs$input_types.VALUE?a=Hs.createElement$$module$build$src$core$utils$xml("value"):r.type===Hs.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT&&(a=Hs.createElement$$module$build$src$core$utils$xml("statement"));const t=r.connection.getShadowDom();!t||s&&s.isShadow()||a.appendChild(Ko(t,e)),s&&(s=Zo(s,e)).nodeType===vg.ELEMENT_NODE&&(a.appendChild(s),n=!1),a.setAttribute("name",r.name),n||i.appendChild(a)}}let g;return void 0!==t.inputsInline&&t.inputsInline!==t.inputsInlineDefault&&i.setAttribute("inline",String(t.inputsInline)),t.isCollapsed()&&i.setAttribute("collapsed","true"),t.isEnabled()||i.setAttribute("disabled-reasons",Array.from(t.getDisabledReasons()).map(encodeURIComponent).join(",")),t.isOwnDeletable()||i.setAttribute("deletable","false"),t.isOwnMovable()||i.setAttribute("movable","false"),t.isOwnEditable()||i.setAttribute("editable","false"),(a=t.getNextBlock())&&(o=Zo(a,e)).nodeType===vg.ELEMENT_NODE&&(g=Hs.createElement$$module$build$src$core$utils$xml("next"),g.appendChild(o),i.appendChild(g)),!(t=t.nextConnection&&t.nextConnection.getShadowDom())||a&&a.isShadow()||g.appendChild(Ko(t,e)),i},Ko=function(t,e){let i,o=t=t.cloneNode(!0);for(;o;)if(e&&"shadow"===o.nodeName&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;){let t;i=o,o=o.parentNode,i.nodeType===vg.TEXT_NODE&&""===i.data.trim()&&(null==(t=o)?void 0:t.firstChild)!==i&&rt(i)}o&&(i=o,o=o.nextSibling,i.nodeType===vg.TEXT_NODE&&""===i.data.trim()&&rt(i))}return t},Qo=function(t){return Rt(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},Jo=function(t){t=Qo(t).split("<");let e="";for(let i=1;i<t.length;i++){const o=t[i];"/"===o[0]&&(e=e.substring(2)),t[i]=e+"<"+o,"/"!==o[0]&&"/>"!==o.slice(-2)&&(e+="  ")}return(t=(t=t.join("\n")).replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>")).replace(/^\n/,"")},qo=function(t,e){return e.setResizesEnabled(!1),e.clear(),t=Hs.domToWorkspace$$module$build$src$core$xml(t,e),e.setResizesEnabled(!0),t},Hs.domToWorkspace$$module$build$src$core$xml=function(t,e){let i=0;e.RTL&&(i=e.getWidth());const o=[];gt();const n=Hs.getGroup$$module$build$src$core$events$utils();n||Hs.setGroup$$module$build$src$core$events$utils(!0),e.setResizesEnabled&&e.setResizesEnabled(!1);let r=!0;try{for(let n,s=0;n=t.childNodes[s];s++){const t=n.nodeName.toLowerCase(),s=n;if("block"===t||"shadow"===t&&!u()){const t=on(s,e);let n;o.push(t.id);const a=parseInt(null!=(n=s.getAttribute("x"))?n:"10",10);let g;const l=parseInt(null!=(g=s.getAttribute("y"))?g:"10",10);isNaN(a)||isNaN(l)||t.moveBy(e.RTL?i-a:a,l,["create"]),r=!1}else{if("shadow"===t)throw TypeError("Shadow block cannot be a top-level block.");if("comment"===t)tn(s,e);else if("variables"===t){if(!r)throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");nn(s,e),r=!1}}}}finally{Hs.setGroup$$module$build$src$core$events$utils(n),e.setResizesEnabled&&e.setResizesEnabled(!0),e.rendered&&fe(),lt()}return d(new(y(Ca))(e)),o},tn=function(t,e){var i;const o=null!=(i=t.getAttribute("id"))?i:void 0;var n,r;let s;var a;let g;return(i=e.rendered?new cc(e,o):new xl(e,o)).setText(null!=(n=t.textContent)?n:""),n=parseInt(null!=(r=t.getAttribute("x"))?r:"",10),r=parseInt(null!=(s=t.getAttribute("y"))?s:"",10),isNaN(n)||isNaN(r)||(n=e.RTL?e.getWidth()-n:n,i.moveTo(new mg(n,r))),e=parseInt(null!=(a=t.getAttribute("w"))?a:"",10),a=parseInt(null!=(g=t.getAttribute("h"))?g:"",10),isNaN(e)||isNaN(a)||i.setSize(new Rg(e,a)),"true"===t.getAttribute("collapsed")&&i.setCollapsed(!0),"false"===t.getAttribute("editable")&&i.setEditable(!1),"false"===t.getAttribute("movable")&&i.setMovable(!1),"false"===t.getAttribute("deletable")&&i.setDeletable(!1),i},en=function(t,e){if(!e.getBlocksBoundingBox)return Hs.domToWorkspace$$module$build$src$core$xml(t,e);var i=e.getBlocksBoundingBox();if(t=Hs.domToWorkspace$$module$build$src$core$xml(t,e),i&&i.top!==i.bottom){var o=i.bottom;i=e.RTL?i.right:i.left;var n=1/0;let r=-1/0,s=1/0;for(let i=0;i<t.length;i++){const o=e.getBlockById(t[i]).getRelativeToSurfaceXY();o.y<s&&(s=o.y),o.x<n&&(n=o.x),o.x>r&&(r=o.x)}for(o=o-s+10,i=e.RTL?i-r:i-n,n=0;n<t.length;n++)e.getBlockById(t[n]).moveBy(i,o,["create"])}return t},Hs.domToBlock$$module$build$src$core$xml=function(t,e){return t=on(t,e),e.rendered&&fe(),t},on=function(t,e){Hs.disable$$module$build$src$core$events$utils();var i=e.getAllVariables();let o;try{if(o=dn(t,e),e.rendered){const t=o,i=o.getDescendants(!1);t.setConnectionTracking(!1);for(let t=i.length-1;0<=t;t--)i[t].initSvg();for(let t=i.length-1;0<=t;t--)i[t].queueRender();setTimeout((function(){t.disposed||t.setConnectionTracking(!0)}),1),e.resizeContents()}else{const t=o.getDescendants(!1);for(let e=t.length-1;0<=e;e--)t[e].initModel()}}finally{Hs.enable$$module$build$src$core$events$utils()}if(f()){for(t=Ie(e,i),e=0;e<t.length;e++)i=t[e],d(new(y(Js))(i));d(new(y(Hs.CREATE$$module$build$src$core$events$utils))(o))}return o},nn=function(t,e){for(let o=0;o<t.children.length;o++){var i=t.children[o];const n=i.getAttribute("type"),r=i.getAttribute("id");if(!(i=i.textContent))break;e.createVariable(i,n,r)}},rn=function(t){const e={mutation:[],comment:[],data:[],field:[],input:[],next:[]};for(let i=0;i<t.children.length;i++){const o=t.children[i];if(o.nodeType!==vg.TEXT_NODE)switch(o.nodeName.toLowerCase()){case"mutation":e.mutation.push(o);break;case"comment":e.comment.push(o);break;case"data":e.data.push(o);break;case"title":case"field":e.field.push(o);break;case"value":case"statement":e.input.push(o);break;case"next":e.next.push(o);break;default:console.warn("Ignoring unknown tag: "+o.nodeName)}}return e},sn=function(t,e){let i=!1;for(let o=0;o<t.length;o++){const n=t[o];e.domToMutation&&(e.domToMutation(n),e.initSvg&&(i=!0))}return i},an=function(t,e){for(let o=0;o<t.length;o++){var i=t[o];const n=i.textContent,r="true"===i.getAttribute("pinned");let s;const a=parseInt(null!=(s=i.getAttribute("w"))?s:"50",10);let g;i=parseInt(null!=(g=i.getAttribute("h"))?g:"50",10),e.setCommentText(n);const l=e.getIcon(gl.COMMENT);isNaN(a)||isNaN(i)||l.setBubbleSize(new Rg(a,i)),l.setBubbleVisible(r),setTimeout((()=>l.setBubbleVisible(r)),1)}},gn=function(t,e){for(let i=0;i<t.length;i++)e.data=t[i].textContent},ln=function(t,e){for(let i=0;i<t.length;i++){const o=t[i],n=o.getAttribute("name");n?An(e,n,o):console.warn(`Ignoring unnamed field in block ${e.type}`)}},hn=function(t){let e=null,i=null;for(let o=0;o<t.childNodes.length;o++){const n=t.childNodes[o];Cn(n)&&("block"===n.nodeName.toLowerCase()?e=n:"shadow"===n.nodeName.toLowerCase()&&(i=n))}return{childBlockElement:e,childShadowElement:i}},cn=function(t,e,i,o){for(let r=0;r<t.length;r++){var n=t[r];const s=n.getAttribute("name"),a=s?i.getInput(s):null;if(!a){console.warn("Ignoring non-existent input "+s+" in block "+o);break}if((n=hn(n)).childBlockElement){if(!a.connection)throw TypeError("Input connection does not exist.");dn(n.childBlockElement,e,a.connection,!1)}if(n.childShadowElement){let t;null==(t=a.connection)||t.setShadowDom(n.childShadowElement)}}},un=function(t,e,i){for(let o=0;o<t.length;o++){const n=hn(t[o]);if(n.childBlockElement){if(!i.nextConnection)throw TypeError("Next statement does not exist.");if(i.nextConnection.isConnected())throw TypeError("Next statement is already connected.");dn(n.childBlockElement,e,i.nextConnection,!0)}n.childShadowElement&&i.nextConnection&&i.nextConnection.setShadowDom(n.childShadowElement)}},dn=function(t,e,i,o){var n;const r=t.getAttribute("type");if(!r)throw TypeError("Block type unspecified: "+t.outerHTML);var s=null!=(n=t.getAttribute("id"))?n:void 0;n=e.newBlock(r,s),s=rn(t);const a=sn(s.mutation,n);if(an(s.comment,n),gn(s.data,n),i)if(o){if(!n.previousConnection)throw TypeError("Next block does not have previous statement.");i.connect(n.previousConnection)}else if(n.outputConnection)i.connect(n.outputConnection);else{if(!n.previousConnection)throw TypeError("Child block does not have output or previous statement.");i.connect(n.previousConnection)}if(ln(s.field,n),cn(s.input,e,n,r),un(s.next,e,n),a&&n.initSvg(),(e=t.getAttribute("inline"))&&n.setInputsInline("true"===e),(e=t.getAttribute("disabled"))&&n.setDisabledReason("true"===e||"disabled"===e,sl),null!==(e=t.getAttribute("disabled-reasons")))for(var g of e.split(","))n.setDisabledReason(!0,decodeURIComponent(g));if((g=t.getAttribute("deletable"))&&n.setDeletable("true"===g),(g=t.getAttribute("movable"))&&n.setMovable("true"===g),(g=t.getAttribute("editable"))&&n.setEditable("true"===g),(g=t.getAttribute("collapsed"))&&n.setCollapsed("true"===g),"shadow"===t.nodeName.toLowerCase()){for(t=n.getChildren(!1),g=0;g<t.length;g++)if(!t[g].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");n.setShadow(!0)}return n},An=function(t,e,i){const o=t.getField(e);o?o.fromXml(i):console.warn("Ignoring non-existent field "+e+" in block "+t.type)},In=function(t){for(let e=0;e<t.childNodes.length;e++){const i=t.childNodes[e];if("next"===i.nodeName.toLowerCase()){t.removeChild(i);break}}},Cn=function(t){return t.nodeType===vg.ELEMENT_NODE},pn=function(t){if(!(100<t.getDescendants(!1).length)){var e=t.workspace,i=t.getSvgRoot();e.getAudioManager().play("delete");var o,n=t.getRelativeToSurfaceXY(),r=i.cloneNode(!0);r.setAttribute("transform","translate("+n.x+","+n.y+")"),null==(o=e.getLayerManager())||o.appendToAnimationLayer({getSvgRoot:()=>r}),fn(r,{x:n.x,y:n.y,width:t.width,height:t.height},e.RTL,new Date)}},fn=function(t,e,i,o){const n=((new Date).getTime()-o.getTime())/150;1<n?rt(t):(t.setAttribute("transform","translate("+(e.x+(i?-1:1)*e.width/2*n)+","+(e.y+e.height/2*n)+") scale("+(1-n)+")"),setTimeout(fn,10,t,e,i,o))},vn=function(t){var e=t.workspace;const i=e.scale;if(e.getAudioManager().play("click"),!(1>i)){var o=e.getSvgXY(t.getSvgRoot());t.outputConnection?(o.x+=(t.RTL?3:-3)*i,o.y+=13*i):t.previousConnection&&(o.x+=(t.RTL?-23:23)*i,o.y+=3*i);var n=tt(Og.CIRCLE,{cx:o.x,cy:o.y,r:0,fill:"none",stroke:"#888","stroke-width":10},e.getParentSvg());t=tt(Og.ANIMATE,{id:"animationCircle",begin:"indefinite",attributeName:"r",dur:"150ms",from:0,to:25*i},n),e=tt(Og.ANIMATE,{id:"animationOpacity",begin:"indefinite",attributeName:"opacity",dur:"150ms",from:1,to:0},n),t.beginElement(),e.beginElement(),setTimeout((()=>{rt(n)}),150)}},mn=function(t){if(yn(),t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var e=t.getHeightWidth().height;e=Math.atan(10/e)/Math.PI*180,t.RTL||(e*=-1),mc=t,bn(t,e,new Date)}},bn=function(t,e,i){const o=((new Date).getTime()-i.getTime())/200;let n="";1>=o&&(n=`skewX(${Math.round(Math.sin(o*Math.PI*3)*(1-o)*e)})`,vc=setTimeout(bn,10,t,e,i)),t.getSvgRoot().setAttribute("transform",`${t.getTranslation()} ${n}`)},yn=function(){mc&&(vc&&(clearTimeout(vc),vc=null),mc.getSvgRoot().setAttribute("transform",mc.getTranslation()),mc=null)},_n=function(t){return void 0!==t.getRelativeToSurfaceXY&&void 0!==t.isMovable&&void 0!==t.startDrag&&void 0!==t.drag&&void 0!==t.endDrag&&void 0!==t.revertDrag},Tn=function(t,e){for(const i in e)t[i]=null!==e[i]&&"object"==typeof e[i]?Tn(t[i]||Object.create(null),e[i]):e[i];return t},En=function(t){return void 0!==t.getProcedureModel&&void 0!==t.doProcedureUpdate&&void 0!==t.isProcedureDef},wn=function(t){return void 0!==t.startPublishing&&void 0!==t.stopPublishing},kn=function(e,i){t(js.FIELD,e,i)},On=function(t){o(js.FIELD,t)},Hs.fromJson$$module$build$src$core$field_registry=function(t){return xc.fromJsonInternal(t)},Sn=function(t){const e=a(js.FIELD,t.type);return e?e.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)},Rn=function(t){let e=!1;const i=t.map((([t,i])=>"string"==typeof t?[po(t),i]:(e=!0,[null!==t.alt?Object.assign({},t,{alt:po(t.alt)}):Object.assign({},t),i])));if(e||2>t.length)return{options:i};var o=i.map((([t])=>t)),n=xi(o);t=Di(o,n);const r=Mi(o,n);return!t&&!r||n<=t+r?{options:i}:(n=t?o[0].substring(0,t-1):void 0,o=r?o[0].substr(1-r):void 0,{options:xn(i,t,r),prefix:n,suffix:o})},xn=function(t,e,i){return t.map((([t,o])=>[t.substring(e,t.length-i),o]))},Dn=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");let e=!1;for(let i=0;i<t.length;i++){const o=t[i];Array.isArray(o)?"string"!=typeof o[1]?(e=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option id must be a string. Found "+o[1]+" in: ",o)):o[0]&&"string"!=typeof o[0]&&"string"!=typeof o[0].src&&(e=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option must have a string label or image description. Found"+o[0]+" in: ",o)):(e=!0,console.error("Invalid option["+i+"]: Each FieldDropdown option must be an array. Found: ",o))}if(e)throw TypeError("Found invalid FieldDropdown options.")},Hs.register$$module$build$src$core$extensions=function(t,e){if("string"!=typeof t||""===t.trim())throw Error('Error: Invalid extension name "'+t+'"');if(Fc[t])throw Error('Error: Extension "'+t+'" is already registered.');if("function"!=typeof e)throw Error('Error: Extension "'+t+'" must be a function');Fc[t]=e},Hs.registerMixin$$module$build$src$core$extensions=function(t,e){if(!e||"object"!=typeof e)throw Error('Error: Mixin "'+t+'" must be a object');Hs.register$$module$build$src$core$extensions(t,(function(){this.mixin(e)}))},Hs.registerMutator$$module$build$src$core$extensions=function(t,e,i,o){const n='Error when registering mutator "'+t+'": ';Hn(n,e);const r=Fn(e,n);if(i&&"function"!=typeof i)throw Error(n+'Extension "'+t+'" is not a function');Hs.register$$module$build$src$core$extensions(t,(function(){r&&this.setMutator(new Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon(o||[],this)),this.mixin(e),i&&i.apply(this)}))},Mn=function(t){Nn(t)?delete Fc[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},Nn=function(t){return!!Fc[t]},Ln=function(t,e,i){const o=Fc[t];if("function"!=typeof o)throw Error('Error: Extension "'+t+'" not found.');let n;if(i?Pn(t,e):n=Gn(e),o.apply(e),i)Hn('Error after applying mutator "'+t+'": ',e);else if(!Un(n,e))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')},Pn=function(t,e){if(Gn(e).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+e.id)},$n=function(t,e){return zn(t.mutationToDom,t.domToMutation,e+" mutationToDom/domToMutation")},Bn=function(t,e){return zn(t.saveExtraState,t.loadExtraState,e+" saveExtraState/loadExtraState")},Fn=function(t,e){return zn(t.compose,t.decompose,e+" compose/decompose")},zn=function(t,e,i){if(t&&e){if("function"!=typeof t||"function"!=typeof e)throw Error(i+" must be a function");return!0}if(!t&&!e)return!1;throw Error(i+"Must have both or neither functions")},Hn=function(t,e){const i=$n(e,t),o=Bn(e,t);if(!i&&!o)throw Error(t+"Mutations must contain either XML hooks, or JSON hooks, or both");Fn(e,t)},Gn=function(t){const e=[];return void 0!==t.domToMutation&&e.push(t.domToMutation),void 0!==t.mutationToDom&&e.push(t.mutationToDom),void 0!==t.saveExtraState&&e.push(t.saveExtraState),void 0!==t.loadExtraState&&e.push(t.loadExtraState),void 0!==t.compose&&e.push(t.compose),void 0!==t.decompose&&e.push(t.decompose),e},Un=function(t,e){if((e=Gn(e)).length!==t.length)return!1;for(let i=0;i<e.length;i++)if(t[i]!==e[i])return!1;return!0},Vn=function(t){if("object"!=typeof document)throw Error("runAfterPageLoad() requires browser document.");if("complete"===document.readyState)t();else{const e=setInterval((function(){"complete"===document.readyState&&(clearInterval(e),t())}),10)}},Hs.buildTooltipForDropdown$$module$build$src$core$extensions=function(t,e){const i=[];return function(){i.includes(this.type)||(Wn(this,t,e),i.push(this.type)),this.setTooltip(function(){const i=String(this.getFieldValue(t));return po(e[i])}.bind(this))}},Wn=function(t,e,i){var o=t.getField(e);if(o instanceof Mc&&!o.isOptionListDynamic()){o=o.getOptions();for(const[,n]of o)void 0===i[n]&&console.warn(`No tooltip mapping for value ${n} of field ${e} of block type ${t.type}.`)}},Hs.buildTooltipWithFieldText$$module$build$src$core$extensions=function(t,e){return function(){this.setTooltip(function(){const i=this.getField(e);return po(t).replace("%1",i?i.getText():"")}.bind(this))}},jn=function(){const t=this.tooltip;this.setTooltip(function(){const e=this.getParent();return e&&e.getInputsInline()&&e.tooltip||t}.bind(this))},Yn=function(t,e,i,o){t=t+" was deprecated in "+e+" and will be deleted in "+i+".",o&&(t+="\nUse "+o+" instead."),Uc.has(t)||(Uc.add(t),console.warn(t))},Xn=function(t,e){return" "+t+","+e+" "},Zn=function(t,e){return" "+t+e.join("")},Kn=function(t,e){return" M "+t+","+e+" "},Qn=function(t,e){return" m "+t+","+e+" "},Jn=function(t,e){return" l "+t+","+e+" "},qn=function(t){return" l"+t.join("")},tr=function(t,e){return" "+t+" "+e+" "},er=function(t,e,i,o){return t+" "+i+" "+i+" "+e+o},ir=function(e,i){t(js.ICON,e.toString(),i)},or=function(t){o(js.ICON,t)},nr=function(t){const e=t.getProcedureMap().getProcedures().filter((t=>!t.getReturnTypes())).map((t=>[t.getName(),t.getParameters().map((t=>t.getName())),!1]));t.getBlocksByType("procedures_defnoreturn",!1).forEach((t=>{!En(t)&&qt(t)&&e.push(t.getProcedureDef())}));const i=t.getProcedureMap().getProcedures().filter((t=>!!t.getReturnTypes())).map((t=>[t.getName(),t.getParameters().map((t=>t.getName())),!0]));return t.getBlocksByType("procedures_defreturn",!1).forEach((t=>{!En(t)&&qt(t)&&i.push(t.getProcedureDef())})),e.sort(rr),i.sort(rr),[e,i]},rr=function(t,e){return t[0].localeCompare(e[0],void 0,{sensitivity:"base"})},Hs.findLegalName$$module$build$src$core$procedures=function(t,e){if(e.isInFlyout)return t;for(t=t||Hs.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed";!sr(t,e.workspace,e);){const e=t.match(/^(.*?)(\d+)$/);t=e?e[1]+(parseInt(e[2])+1):t+"2"}return t},sr=function(t,e,i){return!ar(t,e,i)},ar=function(t,e,i){for(const o of e.getAllBlocks(!1))if(o!==i&&qt(o)&&Hs.Names$$module$build$src$core$names.equals(o.getProcedureDef()[0],t))return!0;i=i&&En(i)?null==i?void 0:i.getProcedureModel():void 0;for(const o of e.getProcedureMap().getProcedures())if(o!==i&&Hs.Names$$module$build$src$core$names.equals(o.getName(),t))return!0;return!1},Hs.rename$$module$build$src$core$procedures=function(t){var e=this.getSourceBlock();if(!e)throw new Xh;t=t.trim();const i=Hs.findLegalName$$module$build$src$core$procedures(t,e);En(e)&&!e.isInsertionMarker()&&e.getProcedureModel().setName(i);const o=this.getValue();if(o!==t&&o!==i)for(t=e.workspace.getAllBlocks(!1),e=0;e<t.length;e++){const n=t[e];n.renameProcedure&&n.renameProcedure(o,i)}return i},gr=function(t){function e(t,e){for(let n=0;n<t.length;n++){var o=t[n][0];const r=t[n][1],s=Hs.createElement$$module$build$src$core$utils$xml("block");s.setAttribute("type",e),s.setAttribute("gap","16");const a=Hs.createElement$$module$build$src$core$utils$xml("mutation");for(a.setAttribute("name",o),s.appendChild(a),o=0;o<r.length;o++){const t=Hs.createElement$$module$build$src$core$utils$xml("arg");t.setAttribute("name",r[o]),a.appendChild(t)}i.push(s)}}const i=[];if(ya.procedures_defnoreturn){var o=Hs.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","procedures_defnoreturn"),o.setAttribute("gap","16");var n=Hs.createElement$$module$build$src$core$utils$xml("field");n.setAttribute("name","NAME"),n.appendChild(Hs.createTextNode$$module$build$src$core$utils$xml(Hs.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_PROCEDURE)),o.appendChild(n),i.push(o)}return ya.procedures_defreturn&&((o=Hs.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type","procedures_defreturn"),o.setAttribute("gap","16"),(n=Hs.createElement$$module$build$src$core$utils$xml("field")).setAttribute("name","NAME"),n.appendChild(Hs.createTextNode$$module$build$src$core$utils$xml(Hs.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_PROCEDURE)),o.appendChild(n),i.push(o)),ya.procedures_ifreturn&&((o=Hs.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type","procedures_ifreturn"),o.setAttribute("gap","16"),i.push(o)),i.length&&i[i.length-1].setAttribute("gap","24"),e((t=nr(t))[0],"procedures_callnoreturn"),e(t[1],"procedures_callreturn"),i},lr=function(t){var e=[],i=t.getBlocksByType("procedures_mutatorarg",!1);for(let t,o=0;t=i[o];o++)e.push(t.getFieldValue("NAME"));i=Hs.createElement$$module$build$src$core$utils$xml("xml");const o=Hs.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","procedures_mutatorarg");const n=Hs.createElement$$module$build$src$core$utils$xml("field");n.setAttribute("name","NAME"),e=re(Hs.DEFAULT_ARG$$module$build$src$core$procedures,e),e=Hs.createTextNode$$module$build$src$core$utils$xml(e),n.appendChild(e),o.appendChild(n),i.appendChild(o),t.updateToolbox(i)},hr=function(t){if(t.type===sa&&"mutator"===t.bubbleType&&t.isOpen&&t.blockId){var e=(t=T(t.workspaceId).getBlockById(t.blockId)).type;"procedures_defnoreturn"!==e&&"procedures_defreturn"!==e||(t=t.getIcon(Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE).getWorkspace(),lr(t),t.addChangeListener(cr))}},cr=function(t){t.type!==Hs.CREATE$$module$build$src$core$events$utils&&t.type!==Hs.DELETE$$module$build$src$core$events$utils&&t.type!==Hs.CHANGE$$module$build$src$core$events$utils&&t.type!==Qs||(t=T(t.workspaceId),lr(t))},ur=function(t,e){return e.getAllBlocks(!1).filter((e=>dr(e,t)||te(e)&&Hs.Names$$module$build$src$core$names.equals(e.getProcedureCall(),t)))},dr=function(t,e){return En(t)&&!t.isProcedureDef()&&t.getProcedureModel()&&Hs.Names$$module$build$src$core$names.equals(t.getProcedureModel().getName(),e)},Hs.mutateCallers$$module$build$src$core$procedures=function(t){const e=u();var i=t.getProcedureDef()[0];const o=t.mutationToDom(!0);t=ur(i,t.workspace);for(let r,s=0;r=t[s];s++){i=(i=r.mutationToDom())&&Rt(i),r.domToMutation&&r.domToMutation(o);var n=r.mutationToDom();i!==(n=n&&Rt(n))&&(Hs.setRecordUndo$$module$build$src$core$events$utils(!1),d(new(y(Hs.CHANGE$$module$build$src$core$events$utils))(r,"mutation",null,i,n)),Hs.setRecordUndo$$module$build$src$core$events$utils(e))}},Hs.getDefinition$$module$build$src$core$procedures=function(t,e){for(const i of e.getAllBlocks(!1))if(En(i)&&i.isProcedureDef()&&Hs.Names$$module$build$src$core$names.equals(i.getProcedureModel().getName(),t)||qt(i)&&Hs.Names$$module$build$src$core$names.equals(i.getProcedureDef()[0],t))return i;return null},Ar=function(t){return t.isDynamic},Ir=function(t){return void 0!==t.pathDown&&void 0!==t.pathUp},Cr=function(t){return void 0!==t.pathLeft&&void 0!==t.pathRight},pr=function(t,e){if(!t||!e)throw Error("Cannot connect null connections.");t.targetConnection=e,e.targetConnection=t},fr=function(t,e){let i=null;const o=null==(e=e.outputConnection)?void 0:e.getConnectionChecker();for(let n,r=0;n=t.inputList[r];r++){const t=n.connection;let r;if(t&&null!=(r=o)&&r.canConnect(e,t,!1)){if(i)return null;i=t}}return i},vr=function(t,e){let i;for(;i=fr(t,e);)if(!(t=i.targetBlock())||t.isShadow())return i;return null},mr=function(t){return void 0!==t.getType&&void 0!==t.initView&&void 0!==t.dispose&&void 0!==t.getWeight&&void 0!==t.getSize&&void 0!==t.applyColour&&void 0!==t.hideForInsertionMarker&&void 0!==t.updateEditable&&void 0!==t.updateCollapsed&&void 0!==t.isShownWhenCollapsed&&void 0!==t.setOffsetInBlock&&void 0!==t.onLocationChange&&void 0!==t.onClick},br=function(t){return mr(t)&&ri(t)&&Le(t)&&void 0!==t.setText&&void 0!==t.getText&&void 0!==t.setBubbleSize&&void 0!==t.getBubbleSize&&t.getType()===gl.COMMENT},yr=function(t){let e=t.outputConnection;return(!e||t.previousConnection&&t.previousConnection.isConnected())&&(e=t.previousConnection),e},_r=function(e,i){t(js.RENDERER,e,i)},Tr=function(t){o(js.RENDERER,t)},Er=function(t,e,i){return(t=new(s(js.RENDERER,t))(t)).init(e,i),t},wr=function(t){se(t.getTargetWorkspace(),void 0,"String")},kr=function(t){se(t.getTargetWorkspace(),void 0,"Number")},Or=function(t){se(t.getTargetWorkspace(),void 0,"Colour")},Sr=function(t){let e=[],i=document.createElement("button");return i.setAttribute("text",Hs.Msg$$module$build$src$core$msg.NEW_STRING_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),e.push(i),i=document.createElement("button"),i.setAttribute("text",Hs.Msg$$module$build$src$core$msg.NEW_NUMBER_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),e.push(i),i=document.createElement("button"),i.setAttribute("text",Hs.Msg$$module$build$src$core$msg.NEW_COLOUR_VARIABLE),i.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),e.push(i),t.registerButtonCallback("CREATE_VARIABLE_STRING",wr),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",kr),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",Or),t=Rr(t),e.concat(t)},Rr=function(t){const e=[];if(0<(t=t.getAllVariables()).length){if(ya.variables_set_dynamic){var i=t[t.length-1];const o=Hs.createElement$$module$build$src$core$utils$xml("block");o.setAttribute("type","variables_set_dynamic"),o.setAttribute("gap","24"),o.appendChild(de(i)),e.push(o)}if(ya.variables_get_dynamic){t.sort(vl.compareByName);for(let o,n=0;o=t[n];n++)(i=Hs.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type","variables_get_dynamic"),i.setAttribute("gap","8"),i.appendChild(de(o)),e.push(i)}}return e},xr=function(t){t.resizeContents()},Dr=function(t,e){const i=t.workspace,o=Hs.config$$module$build$src$core$config.snapRadius,n=mg.difference(e,t.getRelativeToSurfaceXY()),r=new mg(0,0),s=i.getAllBlocks(!1).filter((e=>e.id!=t.id)).map((t=>t.getRelativeToSurfaceXY()));for(;Mr(mg.sum(e,r),s)||Nr(t,mg.sum(n,r),o);)i.RTL?r.translate(-o,2*o):r.translate(o,2*o);t.moveTo(mg.sum(e,r))},Mr=function(t,e){return e.some((e=>1>=Math.abs(e.x-t.x)&&1>=Math.abs(e.y-t.y)))},Nr=function(t,e,i){return t.getConnections_(!1).some((t=>!!t.closest(i,e).connection))},Lr=function(t,e,i){const o=i.getBoundingRectangle(),n=o.right-o.left,r=gi(e.top,o.top,e.top+e.height-(o.bottom-o.top))-o.top;let s=e.left;return e=e.left+e.width-n,t.RTL?s=Math.min(e,s):e=Math.max(s,e),!(!(t=gi(s,o.left,e)-o.left)&&!r||(i.moveBy(t,r,["inbounds"]),0))},Pr=function(t){return e=>{var i,o=t.getMetricsManager();if(o.hasFixedEdges()&&!t.isDragging())if(fa.includes(null!=(i=e.type)?i:"")){i=o.getScrollMetrics(!0);const n=$r(t,e);n&&(o=Hs.getGroup$$module$build$src$core$events$utils()||!1,Hs.setGroup$$module$build$src$core$events$utils(e.group),Lr(t,i,n)&&!e.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),Hs.setGroup$$module$build$src$core$events$utils(o))}else e.type===ha&&e.scale&&e.oldScale&&e.scale>e.oldScale&&Br(t)}},$r=function(t,e){let i=null;switch(e.type){case Hs.CREATE$$module$build$src$core$events$utils:case Hs.MOVE$$module$build$src$core$events$utils:(i=t.getBlockById(e.blockId))&&(i=i.getRootBlock());break;case ca:case Aa:i=t.getCommentById(e.commentId)}return i},Br=function(t){var e=t.getMetricsManager();if(e.hasFixedEdges()&&!t.isDragging()){e=e.getScrollMetrics(!0);var i=t.getTopBoundedElements();for(let o,n=0;o=i[n];n++)Lr(t,e,o)}},Fr=function(t){return void 0!==t.isDeletable&&void 0!==t.dispose&&void 0!==t.setDeleteStyle},zr=function(t){const e=t.toCopyData();let i;return Hd=e,Gd=null!=(i=t.workspace)?i:null,e},Hr=function(t,e,i){return t&&e?Gr(t,e,i):Hd&&Gd?Gr(Hd,Gd):null},Gr=function(t,e,i){let o,n,r;return e=null!=(o=e.getRootWorkspace())?o:e,null!=(r=null==(n=a(js.PASTER,t.paster,!1))?void 0:n.paste(t,e,i))?r:null},Ur=function(t){const e=t.toCopyData();return e?Hr(e,t.workspace):null},Vr=function(t){return void 0!==t.toCopyData},Wr=function(){Fd.registry.register({name:zd.ESCAPE,preconditionFn:t=>!t.options.readOnly,callback:t=>(t.hideChaff(),!0),keyCodes:[Gc.ESC]})},jr=function(){Fd.registry.register({name:zd.DELETE,preconditionFn(t){const e=R();return!t.options.readOnly&&null!=e&&Fr(e)&&e.isDeletable()&&!_c.inProgress()},callback:(t,e)=>(e.preventDefault(),(t=R())instanceof bd?t.checkAndDelete():Fr(t)&&t.isDeletable()&&(Hs.setGroup$$module$build$src$core$events$utils(!0),t.dispose(),Hs.setGroup$$module$build$src$core$events$utils(!1)),!0),keyCodes:[Gc.DELETE,Gc.BACKSPACE]})},Yr=function(){const t=Fd.registry.createSerializedKey(Gc.C,[Gc.CTRL]),e=Fd.registry.createSerializedKey(Gc.C,[Gc.ALT]),i=Fd.registry.createSerializedKey(Gc.C,[Gc.META]);Fd.registry.register({name:zd.COPY,preconditionFn(t){const e=R();return!t.options.readOnly&&!_c.inProgress()&&null!=e&&Fr(e)&&e.isDeletable()&&_n(e)&&e.isMovable()&&Vr(e)},callback:(t,e)=>(e.preventDefault(),t.hideChaff(),!(!(e=R())||!Vr(e)||(Wd=e.toCopyData(),jd=t,Yd=_n(e)?e.getRelativeToSurfaceXY():null,!Wd))),keyCodes:[t,e,i]})},Xr=function(){const t=Fd.registry.createSerializedKey(Gc.X,[Gc.CTRL]),e=Fd.registry.createSerializedKey(Gc.X,[Gc.ALT]),i=Fd.registry.createSerializedKey(Gc.X,[Gc.META]);Fd.registry.register({name:zd.CUT,preconditionFn(t){const e=R();return!t.options.readOnly&&!_c.inProgress()&&null!=e&&Fr(e)&&e.isDeletable()&&_n(e)&&e.isMovable()&&!e.workspace.isFlyout},callback(t){const e=R();return e instanceof bd?(Wd=e.toCopyData(),jd=t,Yd=e.getRelativeToSurfaceXY(),e.checkAndDelete(),!0):!!(Fr(e)&&e.isDeletable()&&Vr(e))&&(Wd=e.toCopyData(),jd=t,Yd=_n(e)?e.getRelativeToSurfaceXY():null,e.dispose(),!0)},keyCodes:[t,e,i]})},Zr=function(){const t=Fd.registry.createSerializedKey(Gc.V,[Gc.CTRL]),e=Fd.registry.createSerializedKey(Gc.V,[Gc.ALT]),i=Fd.registry.createSerializedKey(Gc.V,[Gc.META]);Fd.registry.register({name:zd.PASTE,preconditionFn:t=>!t.options.readOnly&&!_c.inProgress(),callback(){if(!Wd||!jd)return!1;if(!Yd)return!!Hr(Wd,jd);const{left:t,top:e,width:i,height:o}=jd.getMetricsManager().getViewMetrics(!0);if(new Sg(e,e+o,t,t+i).contains(Yd.x,Yd.y))return!!Hr(Wd,jd);const n=new mg(t+i/2,e+o/2);return!!Hr(Wd,jd,n)},keyCodes:[t,e,i]})},Kr=function(){const t=Fd.registry.createSerializedKey(Gc.Z,[Gc.CTRL]),e=Fd.registry.createSerializedKey(Gc.Z,[Gc.ALT]),i=Fd.registry.createSerializedKey(Gc.Z,[Gc.META]);Fd.registry.register({name:zd.UNDO,preconditionFn:t=>!t.options.readOnly&&!_c.inProgress(),callback:(t,e)=>(t.hideChaff(),t.undo(!1),e.preventDefault(),!0),keyCodes:[t,e,i]})},Qr=function(){const t=Fd.registry.createSerializedKey(Gc.Z,[Gc.SHIFT,Gc.CTRL]),e=Fd.registry.createSerializedKey(Gc.Z,[Gc.SHIFT,Gc.ALT]),i=Fd.registry.createSerializedKey(Gc.Z,[Gc.SHIFT,Gc.META]),o=Fd.registry.createSerializedKey(Gc.Y,[Gc.CTRL]);Fd.registry.register({name:zd.REDO,preconditionFn:t=>!_c.inProgress()&&!t.options.readOnly,callback:(t,e)=>(t.hideChaff(),t.undo(!0),e.preventDefault(),!0),keyCodes:[t,e,i,o]})},Jr=function(){Wr(),jr(),Yr(),Xr(),Zr(),Kr(),Qr()},qr=function(t){const e=t.saveState();return t.getParameters().length?(e.parameters=t.getParameters().map((t=>t.saveState())),e):e},ts=function(t,e,i,o){if(t=t.loadState(i,o),!i.parameters)return t;for(const[n,r]of i.parameters.entries())t.insertParameter(e.loadState(r,o),n);return t},es=function(t){const e=Object.create(null),i=g(js.SERIALIZER,!0);for(const o in i){let n;const r=null==(n=i[o])?void 0:n.save(t);r&&(e[o]=r)}return e},is=function(t,e,{recordUndo:i=!1}={}){var o=g(js.SERIALIZER,!0);if(o){o=Object.entries(o).sort(((t,e)=>e[1].priority-t[1].priority));var n=u();Hs.setRecordUndo$$module$build$src$core$events$utils(i),(i=Hs.getGroup$$module$build$src$core$events$utils())||Hs.setGroup$$module$build$src$core$events$utils(!0),gt(),e instanceof sd&&e.setResizesEnabled(!1);for(const[,t]of o.reverse()){let i;null==(i=t)||i.clear(e)}for(const[i,n]of o.reverse())if(t[i]){let o;null==(o=n)||o.load(t[i],e)}e instanceof sd&&e.setResizesEnabled(!0),lt(),d(new(y(Ca))(e)),Hs.setGroup$$module$build$src$core$events$utils(i),Hs.setRecordUndo$$module$build$src$core$events$utils(n)}},os=function(t,e){let i=null;var o;if(i="string"==typeof t?document.getElementById(t)||document.querySelector(t):t,!document.contains(i)&&document!==(null==(o=i)?void 0:o.ownerDocument))throw Error("Error: container is not in current document");t=new Oc(e||{}),o=document.createElement("div"),et(o,"injectionDiv"),null!=e&&e.rtl&&et(o,"blocklyRTL"),o.tabIndex=0,Ne(o,Gl.LABEL,Hs.Msg$$module$build$src$core$msg.WORKSPACE_ARIA_LABEL),i.appendChild(o),e=ns(o,t);const n=rs(o,e,t);return ss(n),S(n),M(n),o.addEventListener("focusin",(function(){S(n)})),n},ns=function(t,e){t.setAttribute("dir","LTR"),q(e.hasCss,e.pathToMedia),t=tt(Og.SVG,{xmlns:bg,"xmlns:html":yg,"xmlns:xlink":_g,version:"1.1",class:"blocklySvg",tabindex:"0"},t);const i=tt(Og.DEFS,{},t),o=String(Math.random()).substring(2);return e.gridPattern=Tc.createDom(o,e.gridOptions,i),t},rs=function(t,e,i){i.parentWorkspace=null;const o=(i=new sd(i)).options;i.scale=o.zoomOptions.startScale,e.appendChild(i.createDom("blocklyMainBackground",t));var n=i.getRenderer().getClassName();return n&&et(t,n),(n=i.getTheme().getClassName())&&et(t,n),!o.hasCategories&&o.languageTree&&(t=i.addFlyout(Og.SVG),st(t,e)),o.hasTrashcan&&i.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&i.addZoomControls(),i.getThemeManager().subscribe(e,"workspaceBackgroundColour","background-color"),i.translate(0,0),i.addChangeListener(Pr(i)),M(i),yo(),li(),Vi(),i},ss=function(t){const e=t.options;var i=t.getParentSvg();if(V(i.parentNode,"contextmenu",null,(function(t){Y(t)||t.preventDefault()})),i=V(window,"resize",null,(function(){Qi(),t.hideComponents(!0),Ri(),Mo(),M(t),Br(t)})),t.setResizeHandlerWrapper(i),gs(),e.languageTree){i=t.getToolbox();const o=t.getFlyout(!0);i?i.init():o&&(o.init(t),o.show(e.languageTree),"function"==typeof o.scrollToStart&&o.scrollToStart())}e.hasTrashcan&&t.trashcan.init(),e.zoomOptions&&e.zoomOptions.controls&&t.zoomControls_.init(),e.moveOptions&&e.moveOptions.scrollbars?(t.scrollbar=new tA(t,!0===e.moveOptions.scrollbars||!!e.moveOptions.scrollbars.horizontal,!0===e.moveOptions.scrollbars||!!e.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),e.hasSounds&&ls(e.pathToMedia,t)},as=function(t){const e=O();e&&!(Y(t)||e.rendered&&!e.isVisible())&&Fd.registry.onKeyDown(e,t)},gs=function(){pA||(V(document,"scroll",null,(function(){const t=E();for(let e,i=0;e=t[i];i++)e instanceof sd&&e.updateInverseScreenCTM()})),V(document,"keydown",null,as),W(document,"touchend",null,F),W(document,"touchcancel",null,F),rg&&V(window,"orientationchange",document,(function(){M(O())}))),pA=!0},ls=function(t,e){function i(){for(;n.length;){const t=n.pop();t&&j(t)}o.preload()}const o=e.getAudioManager();o.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),o.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),o.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");const n=[];n.push(V(document,"pointermove",null,i,!0)),n.push(V(document,"touchstart",null,i,!0))},hs=function(){gc.registry.register({displayText:()=>Hs.Msg$$module$build$src$core$msg.UNDO,preconditionFn:t=>0<t.workspace.getUndoStack().length?"enabled":"disabled",callback(t){t.workspace.undo(!1)},scopeType:gc.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},cs=function(){gc.registry.register({displayText:()=>Hs.Msg$$module$build$src$core$msg.REDO,preconditionFn:t=>0<t.workspace.getRedoStack().length?"enabled":"disabled",callback(t){t.workspace.undo(!0)},scopeType:gc.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},us=function(){gc.registry.register({displayText:()=>Hs.Msg$$module$build$src$core$msg.CLEAN_UP,preconditionFn:t=>t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden",callback(t){t.workspace.cleanUp()},scopeType:gc.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})},ds=function(t,e){function i(e){n--,e.setCollapsed(t),0===n&&Hs.setGroup$$module$build$src$core$events$utils(!1)}let o=0,n=0;Hs.setGroup$$module$build$src$core$events$utils(!0);for(let t=0;t<e.length;t++){let r=e[t];for(;r;)n++,setTimeout(i.bind(null,r),o),r=r.getNextBlock(),o+=10}},As=function(){gc.registry.register({displayText:()=>Hs.Msg$$module$build$src$core$msg.COLLAPSE_ALL,preconditionFn(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(let e=0;e<t.length;e++){let i=t[e];for(;i;){if(!i.isCollapsed())return"enabled";i=i.getNextBlock()}}return"disabled"}return"hidden"},callback(t){ds(!0,t.workspace.getTopBlocks(!0))},scopeType:gc.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Is=function(){gc.registry.register({displayText:()=>Hs.Msg$$module$build$src$core$msg.EXPAND_ALL,preconditionFn(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(let e=0;e<t.length;e++){let i=t[e];for(;i;){if(i.isCollapsed())return"enabled";i=i.getNextBlock()}}return"disabled"}return"hidden"},callback(t){ds(!1,t.workspace.getTopBlocks(!0))},scopeType:gc.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})},Cs=function(t,e){if(t.isDeletable())Array.prototype.push.apply(e,t.getDescendants(!1));else{t=t.getChildren(!1);for(let i=0;i<t.length;i++)Cs(t[i],e)}},ps=function(t){const e=[];t=t.getTopBlocks(!0);for(let i=0;i<t.length;i++)Cs(t[i],e);return e},fs=function(t,e){e?Hs.setGroup$$module$build$src$core$events$utils(e):(Hs.setGroup$$module$build$src$core$events$utils(!0),e=Hs.getGroup$$module$build$src$core$events$utils());const i=t.shift();i&&(i.isDeadOrDying()?fs(t,e):(i.dispose(!1,!0),setTimeout(fs,10,t,e))),Hs.setGroup$$module$build$src$core$events$utils(!1)},vs=function(){gc.registry.register({displayText:t=>t.workspace?1===(t=ps(t.workspace).length)?Hs.Msg$$module$build$src$core$msg.DELETE_BLOCK:Hs.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${t}`):"",preconditionFn:t=>t.workspace&&0<ps(t.workspace).length?"enabled":"disabled",callback(t){if(t.workspace){t.workspace.cancelCurrentGesture();var e=ps(t.workspace);2>e.length?fs(e):Yt(Hs.Msg$$module$build$src$core$msg.DELETE_ALL_BLOCKS.replace("%1",String(e.length)),(function(t){t&&fs(e)}))}},scopeType:gc.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})},ms=function(){hs(),cs(),us(),As(),Is(),vs()},bs=function(){gc.registry.register({displayText:()=>Hs.Msg$$module$build$src$core$msg.DUPLICATE_BLOCK,preconditionFn:t=>!(t=t.block).isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden",callback(t){if(t.block){var e=t.block.toCopyData();e&&Hr(e,t.block.workspace)}},scopeType:gc.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},ys=function(){gc.registry.register({displayText:t=>t.block.hasIcon(Kc.TYPE)?Hs.Msg$$module$build$src$core$msg.REMOVE_COMMENT:Hs.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:t=>!(t=t.block).isInFlyout&&t.workspace.options.comments&&!t.isCollapsed()&&t.isEditable()?"enabled":"hidden",callback(t){(t=t.block).hasIcon(Kc.TYPE)?t.setCommentText(null):t.setCommentText("")},scopeType:gc.ScopeType.BLOCK,id:"blockComment",weight:2})},_s=function(){gc.registry.register({displayText:t=>t.block.getInputsInline()?Hs.Msg$$module$build$src$core$msg.EXTERNAL_INPUTS:Hs.Msg$$module$build$src$core$msg.INLINE_INPUTS,preconditionFn(t){if(!(t=t.block).isInFlyout&&t.isMovable()&&!t.isCollapsed())for(let e=1;e<t.inputList.length;e++)if(!(t.inputList[e-1]instanceof gA||t.inputList[e]instanceof gA))return"enabled";return"hidden"},callback(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:gc.ScopeType.BLOCK,id:"blockInline",weight:3})},Ts=function(){gc.registry.register({displayText:t=>t.block.isCollapsed()?Hs.Msg$$module$build$src$core$msg.EXPAND_BLOCK:Hs.Msg$$module$build$src$core$msg.COLLAPSE_BLOCK,preconditionFn:t=>!(t=t.block).isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden",callback(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:gc.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Es=function(){gc.registry.register({displayText:t=>t.block.hasDisabledReason(sl)?Hs.Msg$$module$build$src$core$msg.ENABLE_BLOCK:Hs.Msg$$module$build$src$core$msg.DISABLE_BLOCK,preconditionFn(t){if(!(t=t.block).isInFlyout&&t.workspace.options.disable&&t.isEditable()){var e=t.getDisabledReasons();return e=e.size>(e.has(sl)?1:0),t.getInheritedDisabled()||e?"disabled":"enabled"}return"hidden"},callback(t){t=t.block;const e=Hs.getGroup$$module$build$src$core$events$utils();e||Hs.setGroup$$module$build$src$core$events$utils(!0),t.setDisabledReason(!t.hasDisabledReason(sl),sl),Hs.setGroup$$module$build$src$core$events$utils(e)},scopeType:gc.ScopeType.BLOCK,id:"blockDisable",weight:5})},ws=function(){gc.registry.register({displayText(t){var e=t.block;return t=e.getDescendants(!1).length,(e=e.getNextBlock())&&(t-=e.getDescendants(!1).length),1===t?Hs.Msg$$module$build$src$core$msg.DELETE_BLOCK:Hs.Msg$$module$build$src$core$msg.DELETE_X_BLOCKS.replace("%1",`${t}`)},preconditionFn:t=>!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden",callback(t){t.block&&t.block.checkAndDelete()},scopeType:gc.ScopeType.BLOCK,id:"blockDelete",weight:6})},ks=function(){gc.registry.register({displayText:()=>Hs.Msg$$module$build$src$core$msg.HELP,preconditionFn:t=>("function"==typeof(t=t.block).helpUrl?t.helpUrl():t.helpUrl)?"enabled":"hidden",callback(t){t.block.showHelp()},scopeType:gc.ScopeType.BLOCK,id:"blockHelp",weight:7})},Os=function(){gc.registry.register({displayText:()=>Hs.Msg$$module$build$src$core$msg.REMOVE_COMMENT,preconditionFn(t){let e;return null!=(e=t.comment)&&e.isDeletable()?"enabled":"hidden"},callback(t){let e;Hs.setGroup$$module$build$src$core$events$utils(!0),null==(e=t.comment)||e.dispose(),Hs.setGroup$$module$build$src$core$events$utils(!1)},scopeType:gc.ScopeType.COMMENT,id:"commentDelete",weight:6})},Ss=function(){gc.registry.register({displayText:()=>Hs.Msg$$module$build$src$core$msg.DUPLICATE_COMMENT,preconditionFn(t){let e;return null!=(e=t.comment)&&e.isMovable()?"enabled":"hidden"},callback(t){if(t.comment){var e=t.comment.toCopyData();e&&Hr(e,t.comment.workspace)}},scopeType:gc.ScopeType.COMMENT,id:"commentDuplicate",weight:1})},Rs=function(){gc.registry.register({displayText:()=>Hs.Msg$$module$build$src$core$msg.ADD_COMMENT,preconditionFn:()=>"enabled",callback:(t,e)=>{if(t=t.workspace){Hs.setGroup$$module$build$src$core$events$utils(!0);var i=new cc(t);i.setText(Hs.Msg$$module$build$src$core$msg.WORKSPACE_COMMENT_DEFAULT_TEXT),i.moveTo(xs(new mg(e.clientX,e.clientY),t)),Hs.setSelected$$module$build$src$core$common(i),Hs.setGroup$$module$build$src$core$events$utils(!1)}},scopeType:gc.ScopeType.WORKSPACE,id:"commentCreate",weight:8})},xs=function(t,e){var i=e.getInjectionDiv().getBoundingClientRect();return t=new mg(t.x-i.left,t.y-i.top),i=e.getOriginOffsetInPixels(),(t=mg.difference(t,i)).scale(1/e.scale),t},Ds=function(){bs(),ys(),_s(),Ts(),Es(),ws(),ks()},Ms=function(){Ss(),Os(),Rs()},Ns=function(){ms(),Ds()},Ls=function(t){return void 0!==t.paste},Ps=function(t){return void 0!==t.getSvgRoot},$s=function(t){return"string"==typeof t.id&&void 0!==t.workspace&&void 0!==t.select&&void 0!==t.unselect},Bs=function(t){return t.isSelectable()},Fs=function(t){O().hideChaff(t)},(zs=zs||{}).scope={},zs.ASSUME_ES5=!1,zs.ASSUME_NO_NATIVE_MAP=!1,zs.ASSUME_NO_NATIVE_SET=!1,zs.SIMPLE_FROUND_POLYFILL=!1,zs.ISOLATE_POLYFILLS=!1,zs.FORCE_POLYFILL_PROMISE=!1,zs.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,zs.defineProperty=zs.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,i){return t==Array.prototype||t==Object.prototype||(t[e]=i.value),t},zs.getGlobal=function(t){t=["object"==typeof globalThis&&globalThis,t,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof i.g&&i.g];for(var e=0;e<t.length;++e){var o=t[e];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")},zs.global=zs.getGlobal(this),zs.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),zs.TRUST_ES6_POLYFILLS=!zs.ISOLATE_POLYFILLS||zs.IS_SYMBOL_NATIVE,zs.polyfills={},zs.propertyToPolyfillSymbol={},zs.POLYFILL_PREFIX="$jscp$",zs.polyfill=function(t,e,i,o){e&&(zs.ISOLATE_POLYFILLS?zs.polyfillIsolated(t,e,i,o):zs.polyfillUnisolated(t,e,i,o))},zs.polyfillUnisolated=function(t,e,i,o){for(i=zs.global,t=t.split("."),o=0;o<t.length-1;o++){var n=t[o];if(!(n in i))return;i=i[n]}(e=e(o=i[t=t[t.length-1]]))!=o&&null!=e&&zs.defineProperty(i,t,{configurable:!0,writable:!0,value:e})},zs.polyfillIsolated=function(t,e,i,o){var n=t.split(".");t=1===n.length,o=n[0],o=!t&&o in zs.polyfills?zs.polyfills:zs.global;for(var r=0;r<n.length-1;r++){var s=n[r];if(!(s in o))return;o=o[s]}n=n[n.length-1],null!=(e=e(i=zs.IS_SYMBOL_NATIVE&&"es6"===i?o[n]:null))&&(t?zs.defineProperty(zs.polyfills,n,{configurable:!0,writable:!0,value:e}):e!==i&&(void 0===zs.propertyToPolyfillSymbol[n]&&(i=1e9*Math.random()>>>0,zs.propertyToPolyfillSymbol[n]=zs.IS_SYMBOL_NATIVE?zs.global.Symbol(n):zs.POLYFILL_PREFIX+i+"$"+n),zs.defineProperty(o,zs.propertyToPolyfillSymbol[n],{configurable:!0,writable:!0,value:e})))},zs.underscoreProtoCanBeSet=function(){var t={};try{return t.__proto__={a:!0},t.a}catch(t){}return!1},zs.setPrototypeOf=zs.TRUST_ES6_POLYFILLS&&"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:zs.underscoreProtoCanBeSet()?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null,zs.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},zs.arrayIterator=function(t){return{next:zs.arrayIteratorImpl(t)}},zs.makeIterator=function(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];if(e)return e.call(t);if("number"==typeof t.length)return zs.arrayIterator(t);throw Error(String(t)+" is not an iterable or ArrayLike")},zs.generator={},zs.generator.ensureIteratorResultIsObject_=function(t){if(!(t instanceof Object))throw new TypeError("Iterator result "+t+" is not an object")},zs.generator.Context=function(){this.isRunning_=!1,this.yieldAllIterator_=null,this.yieldResult=void 0,this.nextAddress=1,this.finallyAddress_=this.catchAddress_=0,this.finallyContexts_=this.abruptCompletion_=null},zs.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0},zs.generator.Context.prototype.stop_=function(){this.isRunning_=!1},zs.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_},zs.generator.Context.prototype.next_=function(t){this.yieldResult=t},zs.generator.Context.prototype.throw_=function(t){this.abruptCompletion_={exception:t,isException:!0},this.jumpToErrorHandler_()},zs.generator.Context.prototype.return=function(t){this.abruptCompletion_={return:t},this.nextAddress=this.finallyAddress_},zs.generator.Context.prototype.jumpThroughFinallyBlocks=function(t){this.abruptCompletion_={jumpTo:t},this.nextAddress=this.finallyAddress_},zs.generator.Context.prototype.yield=function(t,e){return this.nextAddress=e,{value:t}},zs.generator.Context.prototype.yieldAll=function(t,e){var i=(t=zs.makeIterator(t)).next();if(zs.generator.ensureIteratorResultIsObject_(i),!i.done)return this.yieldAllIterator_=t,this.yield(i.value,e);this.yieldResult=i.value,this.nextAddress=e},zs.generator.Context.prototype.jumpTo=function(t){this.nextAddress=t},zs.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0},zs.generator.Context.prototype.setCatchFinallyBlocks=function(t,e){this.catchAddress_=t,null!=e&&(this.finallyAddress_=e)},zs.generator.Context.prototype.setFinallyBlock=function(t){this.catchAddress_=0,this.finallyAddress_=t||0},zs.generator.Context.prototype.leaveTryBlock=function(t,e){this.nextAddress=t,this.catchAddress_=e||0},zs.generator.Context.prototype.enterCatchBlock=function(t){return this.catchAddress_=t||0,t=this.abruptCompletion_.exception,this.abruptCompletion_=null,t},zs.generator.Context.prototype.enterFinallyBlock=function(t,e,i){i?this.finallyContexts_[i]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_],this.catchAddress_=t||0,this.finallyAddress_=e||0},zs.generator.Context.prototype.leaveFinallyBlock=function(t,e){if(e=this.finallyContexts_.splice(e||0)[0],e=this.abruptCompletion_=this.abruptCompletion_||e){if(e.isException)return this.jumpToErrorHandler_();null!=e.jumpTo&&this.finallyAddress_<e.jumpTo?(this.nextAddress=e.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=t},zs.generator.Context.prototype.forIn=function(t){return new zs.generator.Context.PropertyIterator(t)},zs.generator.Context.PropertyIterator=function(t){for(var e in this.object_=t,this.properties_=[],t)this.properties_.push(e);this.properties_.reverse()},zs.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var t=this.properties_.pop();if(t in this.object_)return t}return null},zs.generator.Engine_=function(t){this.context_=new zs.generator.Context,this.program_=t},zs.generator.Engine_.prototype.next_=function(t){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.next,t,this.context_.next_):(this.context_.next_(t),this.nextStep_())},zs.generator.Engine_.prototype.return_=function(t){this.context_.start_();var e=this.context_.yieldAllIterator_;return e?this.yieldAllStep_("return"in e?e.return:function(t){return{value:t,done:!0}},t,this.context_.return):(this.context_.return(t),this.nextStep_())},zs.generator.Engine_.prototype.throw_=function(t){return this.context_.start_(),this.context_.yieldAllIterator_?this.yieldAllStep_(this.context_.yieldAllIterator_.throw,t,this.context_.next_):(this.context_.throw_(t),this.nextStep_())},zs.generator.Engine_.prototype.yieldAllStep_=function(t,e,i){try{var o=t.call(this.context_.yieldAllIterator_,e);if(zs.generator.ensureIteratorResultIsObject_(o),!o.done)return this.context_.stop_(),o;var n=o.value}catch(t){return this.context_.yieldAllIterator_=null,this.context_.throw_(t),this.nextStep_()}return this.context_.yieldAllIterator_=null,i.call(this.context_,n),this.nextStep_()},zs.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var t=this.program_(this.context_);if(t)return this.context_.stop_(),{value:t.value,done:!1}}catch(t){this.context_.yieldResult=void 0,this.context_.throw_(t)}if(this.context_.stop_(),this.context_.abruptCompletion_){if(t=this.context_.abruptCompletion_,this.context_.abruptCompletion_=null,t.isException)throw t.exception;return{value:t.return,done:!0}}return{value:void 0,done:!0}},zs.generator.Generator_=function(t){this.next=function(e){return t.next_(e)},this.throw=function(e){return t.throw_(e)},this.return=function(e){return t.return_(e)},this[Symbol.iterator]=function(){return this}},zs.generator.createGenerator=function(t,e){return e=new zs.generator.Generator_(new zs.generator.Engine_(e)),zs.setPrototypeOf&&t.prototype&&zs.setPrototypeOf(e,t.prototype),e},zs.asyncExecutePromiseGenerator=function(t){function e(e){return t.next(e)}function i(e){return t.throw(e)}return new Promise((function(o,n){!function t(r){r.done?o(r.value):Promise.resolve(r.value).then(e,i).then(t,n)}(t.next())}))},zs.asyncExecutePromiseGeneratorFunction=function(t){return zs.asyncExecutePromiseGenerator(t())},zs.asyncExecutePromiseGeneratorProgram=function(t){return zs.asyncExecutePromiseGenerator(new zs.generator.Generator_(new zs.generator.Engine_(t)))},zs.polyfill("globalThis",(function(t){return t||zs.global}),"es_2020","es3"),zs.polyfill("Array.prototype.includes",(function(t){return t||function(t,e){var i=this;i instanceof String&&(i=String(i));var o=i.length;for(0>(e=e||0)&&(e=Math.max(e+o,0));e<o;e++){var n=i[e];if(n===t||Object.is(n,t))return!0}return!1}}),"es7","es3"),zs.initSymbol=function(){},zs.iteratorPrototype=function(t){return(t={next:t})[Symbol.iterator]=function(){return this},t},zs.iteratorFromArray=function(t,e){t instanceof String&&(t+="");var i=0,o=!1,n={next:function(){if(!o&&i<t.length){var n=i++;return{value:e(n,t[n]),done:!1}}return o=!0,{done:!0,value:void 0}}};return n[Symbol.iterator]=function(){return n},n},zs.polyfill("Array.prototype.values",(function(t){return t||function(){return zs.iteratorFromArray(this,(function(t,e){return e}))}}),"es8","es3"),zs.polyfill("Array.prototype.flat",(function(t){return t||function(t){t=void 0===t?1:t;var e=[];return Array.prototype.forEach.call(this,(function(i){Array.isArray(i)&&0<t?(i=Array.prototype.flat.call(i,t-1),e.push.apply(e,i)):e.push(i)})),e}}),"es9","es5"),zs.polyfill("Array.prototype.flatMap",(function(t){return t||function(t,e){var i=[];return Array.prototype.forEach.call(this,(function(o,n){o=t.call(e,o,n,this),Array.isArray(o)?i.push.apply(i,o):i.push(o)})),i}}),"es9","es5"),zs.owns=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},zs.polyfill("Object.entries",(function(t){return t||function(t){var e,i=[];for(e in t)zs.owns(t,e)&&i.push([e,t[e]]);return i}}),"es8","es3"),zs.polyfill("Object.values",(function(t){return t||function(t){var e,i=[];for(e in t)zs.owns(t,e)&&i.push(t[e]);return i}}),"es8","es3");var Gs=Object.create(null),Us={typeMap:Gs},Vs=Object.create(null),Ws="default",js=class{constructor(t){this.name=t}toString(){return this.name}};js.CONNECTION_CHECKER=new js("connectionChecker"),js.CONNECTION_PREVIEWER=new js("connectionPreviewer"),js.CURSOR=new js("cursor"),js.EVENT=new js("event"),js.FIELD=new js("field"),js.INPUT=new js("input"),js.RENDERER=new js("renderer"),js.TOOLBOX=new js("toolbox"),js.THEME=new js("theme"),js.TOOLBOX_ITEM=new js("toolboxItem"),js.FLYOUTS_VERTICAL_TOOLBOX=new js("flyoutsVerticalToolbox"),js.FLYOUTS_HORIZONTAL_TOOLBOX=new js("flyoutsHorizontalToolbox"),js.METRICS_MANAGER=new js("metricsManager"),js.BLOCK_DRAGGER=new js("blockDragger"),js.SERIALIZER=new js("serializer"),js.ICON=new js("icon"),js.PASTER=new js("paster");var Ys={DEFAULT:Ws,TEST_ONLY:Us};Ys.Type=js,Ys.getAllItems=g,Ys.getClass=s,Ys.getClassFromOptions=l,Ys.getObject=a,Ys.hasItem=r,Ys.register=t,Ys.unregister=o;var Xs,Zs,Ks,Qs,Js,qs,ta,ea,ia,oa,na,ra,sa,aa,ga,la,ha,ca,ua,da,Aa,Ia,Ca,pa,fa,va,ma,ba,ya=Object.create(null),_a="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",Ta={genUid:()=>{const t=[];for(let e=0;20>e;e++)t[e]=_a.charAt(88*Math.random());return t.join("")}},Ea=0,wa={TEST_ONLY:Ta};wa.genUid=c,wa.getNextUniqueId=h,Xs="",Zs=!0,Ks=0,Hs.CREATE$$module$build$src$core$events$utils="create",Hs.CREATE$$module$build$src$core$events$utils,Hs.DELETE$$module$build$src$core$events$utils="delete",Hs.DELETE$$module$build$src$core$events$utils,Hs.CHANGE$$module$build$src$core$events$utils="change",Hs.CHANGE$$module$build$src$core$events$utils,Qs="block_field_intermediate_change",Hs.MOVE$$module$build$src$core$events$utils="move",Hs.MOVE$$module$build$src$core$events$utils,Js="var_create",qs="var_delete",ta="var_rename",ea="ui",ia="drag",oa="selected",na="click",ra="marker_move",sa="bubble_open",aa="trashcan_open",ga="toolbox_item_select",la="theme_change",ha="viewport_change",ca="comment_create",ua="comment_delete",da="comment_change",Aa="comment_move",Ia="comment_collapse",Ca="finished_loading",pa="ORPHANED_BLOCK",fa=[Hs.CREATE$$module$build$src$core$events$utils,Hs.MOVE$$module$build$src$core$events$utils,ca,Aa],ma={FIRE_QUEUE:va=[],fireNow:I,fireInternal:A,setGroupInternal:v},(ba={BLOCK_CHANGE:Hs.CHANGE$$module$build$src$core$events$utils,BLOCK_CREATE:Hs.CREATE$$module$build$src$core$events$utils,BLOCK_DELETE:Hs.DELETE$$module$build$src$core$events$utils,BLOCK_DRAG:ia,BLOCK_FIELD_INTERMEDIATE_CHANGE:Qs,BLOCK_MOVE:Hs.MOVE$$module$build$src$core$events$utils,BUBBLE_OPEN:sa,BUMP_EVENTS:fa,CHANGE:Hs.CHANGE$$module$build$src$core$events$utils,CLICK:na,COMMENT_CHANGE:da,COMMENT_COLLAPSE:Ia,COMMENT_CREATE:ca,COMMENT_DELETE:ua,COMMENT_MOVE:Aa,CREATE:Hs.CREATE$$module$build$src$core$events$utils,DELETE:Hs.DELETE$$module$build$src$core$events$utils,FINISHED_LOADING:Ca,MARKER_MOVE:ra,MOVE:Hs.MOVE$$module$build$src$core$events$utils,SELECTED:oa,TEST_ONLY:ma,THEME_CHANGE:la,TOOLBOX_ITEM_SELECT:ga,TRASHCAN_OPEN:aa,UI:ea,VAR_CREATE:Js,VAR_DELETE:qs,VAR_RENAME:ta,VIEWPORT_CHANGE:ha}).clearPendingUndo=p,ba.disable=Hs.disable$$module$build$src$core$events$utils,ba.disableOrphans=_,ba.enable=Hs.enable$$module$build$src$core$events$utils,ba.filter=C,ba.fire=d,ba.fromJson=b,ba.get=y,ba.getDescendantIds=m,ba.getGroup=Hs.getGroup$$module$build$src$core$events$utils,ba.getRecordUndo=u,ba.isEnabled=f,ba.setGroup=Hs.setGroup$$module$build$src$core$events$utils,ba.setRecordUndo=Hs.setRecordUndo$$module$build$src$core$events$utils;var ka,Oa,Sa=Object.create(null),Ra=null,xa=[],Da={defineBlocksWithJsonArrayInternal:$},Ma={TEST_ONLY:Da};Ma.createBlockDefinitionsFromJsonArray=Hs.createBlockDefinitionsFromJsonArray$$module$build$src$core$common,Ma.defineBlocks=Hs.defineBlocks$$module$build$src$core$common,Ma.defineBlocksWithJsonArray=P,Ma.draggingConnections=xa,Ma.getAllWorkspaces=E,Ma.getBlockTypeCounts=N,Ma.getMainWorkspace=O,Ma.getParentContainer=x,Ma.getSelected=R,Ma.getWorkspaceById=T,Ma.registerWorkspace=w,Ma.setMainWorkspace=S,Ma.setParentContainer=D,Ma.setSelected=Hs.setSelected$$module$build$src$core$common,Ma.svgResize=M,Ma.unregisterWorkpace=k;var Na,La,Pa=class{constructor(){this.workspaceId=void 0,this.isUiEvent=!1,this.type="",this.group=Hs.getGroup$$module$build$src$core$events$utils(),this.recordUndo=u()}toJson(){return{type:this.type,group:this.group}}static fromJson(t,e,i){return i.isBlank=!1,i.group=t.group||"",i.workspaceId=e.id,i}isNull(){return!1}run(t){}getEventWorkspace_(){let t;if(this.workspaceId&&(t=T(this.workspaceId)),!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t}},$a=class extends Pa{constructor(t){super(),this.recordUndo=!1,this.isUiEvent=!0,this.isBlank=void 0===t,this.workspaceId=t||""}},Ba=class extends $a{constructor(t,e,i){null===(e=t?t.workspace.id:e)&&(e=void 0),super(e),this.type=na,this.blockId=t?t.id:void 0,this.targetType=i}toJson(){const t=super.toJson();if(!this.targetType)throw Error("The click target type is undefined. Either pass a block to the constructor, or call fromJson");return t.targetType=this.targetType,t.blockId=this.blockId,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new Ba)).targetType=t.targetType,e.blockId=t.blockId,e}};(La=Na||(Na={})).BLOCK="block",La.WORKSPACE="workspace",La.ZOOM_CONTROLS="zoom_controls",t(js.EVENT,na,Ba);var Fa={};Fa.Click=Ba,Fa.ClickTarget=Na;var za,Ha,Ga,Ua,Va,Wa,ja,Ya,Xa,Za,Ka=750,Qa="ontouchstart"in globalThis||!!(globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!globalThis.navigator||!globalThis.navigator.maxTouchPoints&&!globalThis.navigator.msMaxTouchPoints),Ja=null,qa={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]},tg=0,eg={TOUCH_ENABLED:Qa,TOUCH_MAP:qa};eg.checkTouchIdentifier=U,eg.clearTouchIdentifier=z,eg.getTouchIdentifierFromEvent=G,eg.longStart=B,eg.longStop=F,eg.shouldHandleEvent=H,function(t){function e(t){return i.includes(t.toUpperCase())}const i=(za=t).toUpperCase();Ha=e("JavaFX"),Ga=e("WebKit"),Ua=e("Gecko")&&!Ga,Va=e("Android"),t=globalThis.navigator&&globalThis.navigator.maxTouchPoints,Wa=e("iPad")||e("Macintosh")&&0<t,ja=e("iPhone")&&!Wa,Ya=e("Macintosh"),Xa=Wa||Va&&!e("Mobile")||e("Silk"),Za=!Xa&&(ja||Va)}(globalThis.navigator&&globalThis.navigator.userAgent||"");var ig=Ha,og=Ua,ng=Va,rg=Wa,sg=ja,ag=Ya,gg=Za,lg={ANDROID:ng,GECKO:og,IPAD:rg,IPHONE:sg,JavaFx:ig,MAC:ag,MOBILE:gg,raw:za},hg=40,cg=125,ug={};ug.bind=W,ug.conditionalBind=V,ug.getScrollDeltaPixels=K,ug.isRightButton=X,ug.isTargetInput=Y,ug.mouseToSvg=Z,ug.unbind=j;var dg={};dg.removeElem=Q;var Ag=class{constructor(t){this.name_=t}toString(){return this.name_}};Ag.POSITIONABLE=new Ag("positionable"),Ag.DRAG_TARGET=new Ag("drag_target"),Ag.DELETE_AREA=new Ag("delete_area"),Ag.AUTOHIDEABLE=new Ag("autohideable");var Ig=class{constructor(){this.componentData=new Map,this.capabilityToComponentIds=new Map}addComponent(t,e){const i=t.component.id;var o;if(!e&&this.componentData.has(i))throw Error('Plugin "'+i+'" with capabilities "'+(null==(o=this.componentData.get(i))?void 0:o.capabilities)+'" already added.');for(this.componentData.set(i,t),e=[],o=0;o<t.capabilities.length;o++){const n=String(t.capabilities[o]).toLowerCase();if(e.push(n),this.capabilityToComponentIds.has(n)){let t;null==(t=this.capabilityToComponentIds.get(n))||t.push(i)}else this.capabilityToComponentIds.set(n,[i])}this.componentData.get(i).capabilities=e}removeComponent(t){const e=this.componentData.get(t);if(e){for(let i=0;i<e.capabilities.length;i++){const o=String(e.capabilities[i]).toLowerCase();Q(this.capabilityToComponentIds.get(o),t)}this.componentData.delete(t)}}addCapability(t,e){if(!this.getComponent(t))throw Error('Cannot add capability, "'+e+'". Plugin "'+t+'" has not been added to the ComponentManager');var i,o;this.hasCapability(t,e)?console.warn('Plugin "'+t+'already has capability "'+e+'"'):(e=`${e}`.toLowerCase(),null==(i=this.componentData.get(t))||i.capabilities.push(e),null==(o=this.capabilityToComponentIds.get(e))||o.push(t))}removeCapability(t,e){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+e+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,e)?(e=`${e}`.toLowerCase(),Q(this.componentData.get(t).capabilities,e),Q(this.capabilityToComponentIds.get(e),t)):console.warn('Plugin "'+t+"doesn't have capability \""+e+'" to remove')}hasCapability(t,e){return e=`${e}`.toLowerCase(),this.componentData.has(t)&&this.componentData.get(t).capabilities.includes(e)}getComponent(t){let e;return null==(e=this.componentData.get(t))?void 0:e.component}getComponents(t,e){if(t=`${t}`.toLowerCase(),!(t=this.capabilityToComponentIds.get(t)))return[];const i=[];if(e){const e=[];t.forEach((t=>{e.push(this.componentData.get(t))})),e.sort((function(t,e){return t.weight-e.weight})),e.forEach((function(t){i.push(t.component)}))}else t.forEach((t=>{i.push(this.componentData.get(t).component)}));return i}};Ig.Capability=Ag;var Cg=!1,pg='\n.blocklySvg {\n  background-color: #fff;\n  outline: none;\n  overflow: hidden;  /* IE overflows by default. */\n  position: absolute;\n  display: block;\n}\n\n.blocklyWidgetDiv {\n  display: none;\n  position: absolute;\n  z-index: 99999;  /* big value for bootstrap3 compatibility */\n}\n\n.injectionDiv {\n  height: 100%;\n  position: relative;\n  overflow: hidden;  /* So blocks in drag surface disappear at edges */\n  touch-action: none;\n}\n\n.blocklyNonSelectable {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n}\n\n.blocklyBlockCanvas.blocklyCanvasTransitioning,\n.blocklyBubbleCanvas.blocklyCanvasTransitioning {\n  transition: transform .5s;\n}\n\n.blocklyTooltipDiv {\n  background-color: #ffffc7;\n  border: 1px solid #ddc;\n  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);\n  color: #000;\n  display: none;\n  font: 9pt sans-serif;\n  opacity: .9;\n  padding: 2px;\n  position: absolute;\n  z-index: 100000;  /* big value for bootstrap3 compatibility */\n}\n\n.blocklyDropDownDiv {\n  position: absolute;\n  left: 0;\n  top: 0;\n  z-index: 1000;\n  display: none;\n  border: 1px solid;\n  border-color: #dadce0;\n  background-color: #fff;\n  border-radius: 2px;\n  padding: 4px;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownContent {\n  max-height: 300px;  /* @todo: spec for maximum height. */\n  overflow: auto;\n  overflow-x: hidden;\n  position: relative;\n}\n\n.blocklyDropDownArrow {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 16px;\n  height: 16px;\n  z-index: -1;\n  background-color: inherit;\n  border-color: inherit;\n}\n\n.blocklyDropDownButton {\n  display: inline-block;\n  float: left;\n  padding: 0;\n  margin: 4px;\n  border-radius: 4px;\n  outline: none;\n  border: 1px solid;\n  transition: box-shadow .1s;\n  cursor: pointer;\n}\n\n.blocklyArrowTop {\n  border-top: 1px solid;\n  border-left: 1px solid;\n  border-top-left-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyArrowBottom {\n  border-bottom: 1px solid;\n  border-right: 1px solid;\n  border-bottom-right-radius: 4px;\n  border-color: inherit;\n}\n\n.blocklyResizeSE {\n  cursor: se-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeSW {\n  cursor: sw-resize;\n  fill: #aaa;\n}\n\n.blocklyResizeLine {\n  stroke: #515A5A;\n  stroke-width: 1;\n}\n\n.blocklyHighlightedConnectionPath {\n  fill: none;\n  stroke: #fc3;\n  stroke-width: 4px;\n}\n\n.blocklyPathLight {\n  fill: none;\n  stroke-linecap: round;\n  stroke-width: 1;\n}\n\n.blocklySelected>.blocklyPathLight {\n  display: none;\n}\n\n.blocklyDraggable {\n  cursor: grab;\n  cursor: -webkit-grab;\n}\n\n.blocklyDragging {\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n  /* Drag surface disables events to not block the toolbox, so we have to\n   * reenable them here for the cursor values to work. */\n  pointer-events: auto;\n}\n\n  /* Changes cursor on mouse down. Not effective in Firefox because of\n     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */\n.blocklyDraggable:active {\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n.blocklyDragging.blocklyDraggingDelete {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyDragging>.blocklyPath,\n.blocklyDragging>.blocklyPathLight {\n  fill-opacity: .8;\n  stroke-opacity: .8;\n}\n\n.blocklyDragging>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyDisabled>.blocklyPath {\n  fill-opacity: .5;\n  stroke-opacity: .5;\n}\n\n.blocklyDisabled>.blocklyPathLight,\n.blocklyDisabled>.blocklyPathDark {\n  display: none;\n}\n\n.blocklyInsertionMarker>.blocklyPath,\n.blocklyInsertionMarker>.blocklyPathLight,\n.blocklyInsertionMarker>.blocklyPathDark {\n  fill-opacity: .2;\n  stroke: none;\n}\n\n.blocklyMultilineText {\n  font-family: monospace;\n}\n\n.blocklyNonEditableText>text {\n  pointer-events: none;\n}\n\n.blocklyFlyout {\n  position: absolute;\n  z-index: 20;\n}\n\n.blocklyText text {\n  cursor: default;\n}\n\n/*\n  Don\'t allow users to select text.  It gets annoying when trying to\n  drag a block and selected text moves instead.\n*/\n.blocklySvg text {\n  user-select: none;\n  -ms-user-select: none;\n  -webkit-user-select: none;\n  cursor: inherit;\n}\n\n.blocklyHidden {\n  display: none;\n}\n\n.blocklyFieldDropdown:not(.blocklyHidden) {\n  display: block;\n}\n\n.blocklyIconGroup {\n  cursor: default;\n}\n\n.blocklyIconGroup:not(:hover),\n.blocklyIconGroupReadonly {\n  opacity: .6;\n}\n\n.blocklyIconShape {\n  fill: #00f;\n  stroke: #fff;\n  stroke-width: 1px;\n}\n\n.blocklyIconSymbol {\n  fill: #fff;\n}\n\n.blocklyMinimalBody {\n  margin: 0;\n  padding: 0;\n  height: 100%;\n}\n\n.blocklyHtmlInput {\n  border: none;\n  border-radius: 4px;\n  height: 100%;\n  margin: 0;\n  outline: none;\n  padding: 0;\n  width: 100%;\n  text-align: center;\n  display: block;\n  box-sizing: border-box;\n}\n\n/* Remove the increase and decrease arrows on the field number editor */\ninput.blocklyHtmlInput[type=number]::-webkit-inner-spin-button,\ninput.blocklyHtmlInput[type=number]::-webkit-outer-spin-button {\n  -webkit-appearance: none;\n  margin: 0;\n}\n\ninput[type=number] {\n  -moz-appearance: textfield;\n}\n\n.blocklyMainBackground {\n  stroke-width: 1;\n  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */\n}\n\n.blocklyMutatorBackground {\n  fill: #fff;\n  stroke: #ddd;\n  stroke-width: 1;\n}\n\n.blocklyFlyoutBackground {\n  fill: #ddd;\n  fill-opacity: .8;\n}\n\n.blocklyMainWorkspaceScrollbar {\n  z-index: 20;\n}\n\n.blocklyFlyoutScrollbar {\n  z-index: 30;\n}\n\n.blocklyScrollbarHorizontal,\n.blocklyScrollbarVertical {\n  position: absolute;\n  outline: none;\n}\n\n.blocklyScrollbarBackground {\n  opacity: 0;\n}\n\n.blocklyScrollbarHandle {\n  fill: #ccc;\n}\n\n.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyScrollbarHandle:hover {\n  fill: #bbb;\n}\n\n/* Darken flyout scrollbars due to being on a grey background. */\n/* By contrast, workspace scrollbars are on a white background. */\n.blocklyFlyout .blocklyScrollbarHandle {\n  fill: #bbb;\n}\n\n.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,\n.blocklyFlyout .blocklyScrollbarHandle:hover {\n  fill: #aaa;\n}\n\n.blocklyInvalidInput {\n  background: #faa;\n}\n\n.blocklyVerticalMarker {\n  stroke-width: 3px;\n  fill: rgba(255,255,255,.5);\n  pointer-events: none;\n}\n\n.blocklyComputeCanvas {\n  position: absolute;\n  width: 0;\n  height: 0;\n}\n\n.blocklyNoPointerEvents {\n  pointer-events: none;\n}\n\n.blocklyContextMenu {\n  border-radius: 4px;\n  max-height: 100%;\n}\n\n.blocklyDropdownMenu {\n  border-radius: 2px;\n  padding: 0 !important;\n}\n\n.blocklyDropdownMenu .blocklyMenuItem {\n  /* 28px on the left for icon or checkbox. */\n  padding-left: 28px;\n}\n\n/* BiDi override for the resting state. */\n.blocklyDropdownMenu .blocklyMenuItemRtl {\n  /* Flip left/right padding for BiDi. */\n  padding-left: 5px;\n  padding-right: 28px;\n}\n\n.blocklyWidgetDiv .blocklyMenu {\n  background: #fff;\n  border: 1px solid transparent;\n  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);\n  font: normal 13px Arial, sans-serif;\n  margin: 0;\n  outline: none;\n  padding: 4px 0;\n  position: absolute;\n  overflow-y: auto;\n  overflow-x: hidden;\n  max-height: 100%;\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n.blocklyWidgetDiv .blocklyMenu.blocklyFocused {\n  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);\n}\n\n.blocklyDropDownDiv .blocklyMenu {\n  background: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  border: inherit;  /* Compatibility with gapi, reset from goog-menu */\n  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;\n  outline: none;\n  position: relative;  /* Compatibility with gapi, reset from goog-menu */\n  z-index: 20000;  /* Arbitrary, but some apps depend on it... */\n}\n\n/* State: resting. */\n.blocklyMenuItem {\n  border: none;\n  color: #000;\n  cursor: pointer;\n  list-style: none;\n  margin: 0;\n  /* 7em on the right for shortcut. */\n  min-width: 7em;\n  padding: 6px 15px;\n  white-space: nowrap;\n}\n\n/* State: disabled. */\n.blocklyMenuItemDisabled {\n  color: #ccc;\n  cursor: inherit;\n}\n\n/* State: hover. */\n.blocklyMenuItemHighlight {\n  background-color: rgba(0,0,0,.1);\n}\n\n/* State: selected/checked. */\n.blocklyMenuItemCheckbox {\n  height: 16px;\n  position: absolute;\n  width: 16px;\n}\n\n.blocklyMenuItemSelected .blocklyMenuItemCheckbox {\n  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;\n  float: left;\n  margin-left: -24px;\n  position: static;  /* Scroll with the menu. */\n}\n\n.blocklyMenuItemRtl .blocklyMenuItemCheckbox {\n  float: right;\n  margin-right: -24px;\n}\n\n.blocklyBlockDragSurface, .blocklyAnimationLayer {\n  position: absolute;\n  top: 0;\n  left: 0;\n  right: 0;\n  bottom: 0;\n  overflow: visible !important;\n  z-index: 80;\n  pointer-events: none;\n}\n',fg={};fg.inject=q,fg.register=J;var vg,mg=class{constructor(t,e){this.x=t,this.y=e}clone(){return new mg(this.x,this.y)}scale(t){return this.x*=t,this.y*=t,this}translate(t,e){return this.x+=t,this.y+=e,this}static equals(t,e){return t===e||!(!t||!e)&&t.x===e.x&&t.y===e.y}static distance(t,e){const i=t.x-e.x;return t=t.y-e.y,Math.sqrt(i*i+t*t)}static magnitude(t){return Math.sqrt(t.x*t.x+t.y*t.y)}static difference(t,e){return new mg(t.x-e.x,t.y-e.y)}static sum(t,e){return new mg(t.x+e.x,t.y+e.y)}},bg="http://www.w3.org/2000/svg",yg="http://www.w3.org/1999/xhtml",_g="http://www.w3.org/1999/xlink";!function(t){t[t.ELEMENT_NODE=1]="ELEMENT_NODE",t[t.TEXT_NODE=3]="TEXT_NODE",t[t.COMMENT_NODE=8]="COMMENT_NODE"}(vg||(vg={}));var Tg=null,Eg=0,wg=null,kg={HTML_NS:yg};kg.NodeType=vg,kg.SVG_NS=bg,kg.XLINK_NS=_g,kg.addClass=et,kg.createSvgElement=tt,kg.getFastTextWidth=ct,kg.getFastTextWidthWithSizeString=ut,kg.getTextWidth=ht,kg.hasClass=nt,kg.insertAfter=st,kg.measureFontMetrics=dt,kg.removeClass=ot,kg.removeClasses=it,kg.removeNode=rt,kg.setCssTransform=at,kg.startTextWidthCache=gt,kg.stopTextWidthCache=lt;var Og=class{constructor(t){this.tagName=t}toString(){return this.tagName}};Og.ANIMATE=new Og("animate"),Og.CIRCLE=new Og("circle"),Og.CLIPPATH=new Og("clipPath"),Og.DEFS=new Og("defs"),Og.FECOMPOSITE=new Og("feComposite"),Og.FECOMPONENTTRANSFER=new Og("feComponentTransfer"),Og.FEFLOOD=new Og("feFlood"),Og.FEFUNCA=new Og("feFuncA"),Og.FEGAUSSIANBLUR=new Og("feGaussianBlur"),Og.FEPOINTLIGHT=new Og("fePointLight"),Og.FESPECULARLIGHTING=new Og("feSpecularLighting"),Og.FILTER=new Og("filter"),Og.FOREIGNOBJECT=new Og("foreignObject"),Og.G=new Og("g"),Og.IMAGE=new Og("image"),Og.LINE=new Og("line"),Og.PATH=new Og("path"),Og.PATTERN=new Og("pattern"),Og.POLYGON=new Og("polygon"),Og.RECT=new Og("rect"),Og.SVG=new Og("svg"),Og.TEXT=new Og("text"),Og.TSPAN=new Og("tspan");var Sg=class{constructor(t,e,i,o){this.top=t,this.bottom=e,this.left=i,this.right=o}getHeight(){return this.bottom-this.top}getWidth(){return this.right-this.left}contains(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom}intersects(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)}},Rg=class{constructor(t,e){this.width=t,this.height=e}static equals(t,e){return t===e||!(!t||!e)&&t.width===e.width&&t.height===e.height}static max(t,e){return new Rg(Math.max(t.width,e.width),Math.max(t.height,e.height))}static min(t,e){return new Rg(Math.min(t.width,e.width),Math.min(t.height,e.height))}},xg={getSizeInternal:It},Dg={TEST_ONLY:xg};Dg.getBorderBox=mt,Dg.getComputedStyle=pt,Dg.getContainerOffsetToScrollInto=yt,Dg.getPageOffset=ft,Dg.getSize=At,Dg.getViewportPageOffset=vt,Dg.scrollIntoContainerView=bt;var Mg=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,Ng=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/,Lg={TEST_ONLY:{XY_REGEX:Mg,XY_STYLE_REGEX:Ng}};Lg.getDocumentScroll=wt,Lg.getInjectionDivXY=Tt,Lg.getRelativeXY=_t,Lg.getViewportBBox=Et,Lg.screenToWsCoordinates=kt,Lg.wsToScreenCoordinates=Ot;var Pg=class{constructor(t,e,i,o,n){this.workspace=t,this.horizontal=e,this.oldHostMetrics=null,this.ratio=1,this.origin=new mg(0,0),this.startDragHandle=this.handlePosition=this.handleLength=this.scrollbarLength=this.startDragMouse=0,this.containerVisible=this.isHandleVisible=!0,this.position=new mg(0,0),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.pair=i||!1,this.margin=void 0!==n?n:Pg.DEFAULT_SCROLLBAR_MARGIN,t="blocklyScrollbar"+(this.horizontal?"Horizontal":"Vertical"),o&&(t+=" "+o),this.outerSvg=tt(Og.SVG,{class:t}),o=tt(Og.G,{},this.outerSvg),this.svgBackground=tt(Og.RECT,{class:"blocklyScrollbarBackground"},o),t=Math.floor((Pg.scrollbarThickness-5)/2),this.svgHandle=tt(Og.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},o),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarColour","fill"),this.workspace.getThemeManager().subscribe(this.svgHandle,"scrollbarOpacity","fill-opacity"),st(this.outerSvg,this.workspace.getParentSvg()),this.setInitialThickness(),e?(this.lengthAttribute_="width",this.positionAttribute_="x"):(this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=V(this.svgBackground,"pointerdown",this,this.onMouseDownBar),this.onMouseDownHandleWrapper_=V(this.svgHandle,"pointerdown",this,this.onMouseDownHandle)}setInitialThickness(){const t=Pg.scrollbarThickness;this.horizontal?(this.svgBackground.setAttribute("height",String(t)),this.outerSvg.setAttribute("height",String(t)),this.svgHandle.setAttribute("height",String(t-5)),this.svgHandle.setAttribute("y","2.5")):(this.svgBackground.setAttribute("width",String(t)),this.outerSvg.setAttribute("width",String(t)),this.svgHandle.setAttribute("width",String(t-5)),this.svgHandle.setAttribute("x","2.5"))}dispose(){this.cleanUp(),j(this.onMouseDownBarWrapper_),j(this.onMouseDownHandleWrapper_),rt(this.outerSvg),this.workspace.getThemeManager().unsubscribe(this.svgHandle)}constrainHandleLength(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength)}setHandleLength(t){this.handleLength=t,this.svgHandle.setAttribute(this.lengthAttribute_,String(this.handleLength))}constrainHandlePosition(t){return 0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength-this.handleLength)}setHandlePosition(t){this.handlePosition=t,this.svgHandle.setAttribute(this.positionAttribute_,String(this.handlePosition))}setScrollbarLength(t){this.scrollbarLength=t,this.outerSvg.setAttribute(this.lengthAttribute_,String(this.scrollbarLength)),this.svgBackground.setAttribute(this.lengthAttribute_,String(this.scrollbarLength))}setPosition(t,e){this.position.x=t,this.position.y=e,at(this.outerSvg,"translate("+(this.position.x+this.origin.x)+"px,"+(this.position.y+this.origin.y)+"px)")}resize(t){(t||(t=this.workspace.getMetrics()))&&(this.oldHostMetrics&&Pg.metricsAreEquivalent(t,this.oldHostMetrics)||(this.horizontal?this.resizeHorizontal(t):this.resizeVertical(t),this.oldHostMetrics=t,this.updateMetrics()))}requiresViewResize(t){return!this.oldHostMetrics||this.oldHostMetrics.viewWidth!==t.viewWidth||this.oldHostMetrics.viewHeight!==t.viewHeight||this.oldHostMetrics.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics.absoluteTop!==t.absoluteTop}resizeHorizontal(t){this.requiresViewResize(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)}resizeViewHorizontal(t){var e=t.viewWidth-2*this.margin;this.pair&&(e-=Pg.scrollbarThickness),this.setScrollbarLength(Math.max(0,e)),e=t.absoluteLeft+this.margin,this.pair&&this.workspace.RTL&&(e+=Pg.scrollbarThickness),this.setPosition(e,t.absoluteTop+t.viewHeight-Pg.scrollbarThickness-this.margin),this.resizeContentHorizontal(t)}resizeContentHorizontal(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var e=this.scrollbarLength*t.viewWidth/t.scrollWidth;e=this.constrainHandleLength(e),this.setHandleLength(e),e=t.scrollWidth-t.viewWidth;var i=this.scrollbarLength-this.handleLength;t=(t.viewLeft-t.scrollLeft)/e*i,t=this.constrainHandlePosition(t),this.setHandlePosition(t),this.ratio=i/e}}resizeVertical(t){this.requiresViewResize(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)}resizeViewVertical(t){let e=t.viewHeight-2*this.margin;this.pair&&(e-=Pg.scrollbarThickness),this.setScrollbarLength(Math.max(0,e)),this.setPosition(this.workspace.RTL?t.absoluteLeft+this.margin:t.absoluteLeft+t.viewWidth-Pg.scrollbarThickness-this.margin,t.absoluteTop+this.margin),this.resizeContentVertical(t)}resizeContentVertical(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength(this.scrollbarLength),this.setHandlePosition(0),this.pair||this.setVisible(!1);else{this.pair||this.setVisible(!0);var e=this.scrollbarLength*t.viewHeight/t.scrollHeight;e=this.constrainHandleLength(e),this.setHandleLength(e),e=t.scrollHeight-t.viewHeight;var i=this.scrollbarLength-this.handleLength;t=(t.viewTop-t.scrollTop)/e*i,t=this.constrainHandlePosition(t),this.setHandlePosition(t),this.ratio=i/e}}isVisible(){return this.isHandleVisible}setContainerVisible(t){const e=t!==this.containerVisible;this.containerVisible=t,e&&this.updateDisplay_()}setVisible(t){if(this.pair)throw Error("Unable to toggle visibility of paired scrollbars.");this.setVisibleInternal(t)}setVisibleInternal(t){const e=t!==this.isVisible();this.isHandleVisible=t,e&&this.updateDisplay_()}updateDisplay_(){this.containerVisible&&this.isVisible()?this.outerSvg.setAttribute("display","block"):this.outerSvg.setAttribute("display","none")}onMouseDownBar(t){if(this.workspace.markFocused(),z(),this.cleanUp(),X(t))t.stopPropagation();else{var e=Z(t,this.workspace.getParentSvg(),this.workspace.getInverseScreenCTM());e=this.horizontal?e.x:e.y;var i=Tt(this.svgHandle);i=this.horizontal?i.x:i.y;var o=this.handlePosition,n=.95*this.handleLength;e<=i?o-=n:e>=i+this.handleLength&&(o+=n),this.setHandlePosition(this.constrainHandlePosition(o)),this.updateMetrics(),t.stopPropagation(),t.preventDefault()}}onMouseDownHandle(t){this.workspace.markFocused(),this.cleanUp(),X(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition,this.startDragMouse=this.horizontal?t.clientX:t.clientY,this.onMouseUpWrapper_=V(document,"pointerup",this,this.onMouseUpHandle),this.onMouseMoveWrapper_=V(document,"pointermove",this,this.onMouseMoveHandle),t.stopPropagation(),t.preventDefault())}onMouseMoveHandle(t){this.setHandlePosition(this.constrainHandlePosition(this.startDragHandle+((this.horizontal?t.clientX:t.clientY)-this.startDragMouse))),this.updateMetrics()}onMouseUpHandle(){z(),this.cleanUp()}cleanUp(){this.workspace.hideChaff(!0),this.onMouseUpWrapper_&&(j(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&(j(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)}getRatio_(){let t=this.handlePosition/(this.scrollbarLength-this.handleLength);return isNaN(t)&&(t=0),t}updateMetrics(){const t=this.getRatio_();this.horizontal?this.workspace.setMetrics({x:t}):this.workspace.setMetrics({y:t})}set(t,e){this.setHandlePosition(this.constrainHandlePosition(t*this.ratio)),(e||void 0===e)&&this.updateMetrics()}setOrigin(t,e){this.origin=new mg(t,e)}static metricsAreEquivalent(t,e){return t.viewWidth===e.viewWidth&&t.viewHeight===e.viewHeight&&t.viewLeft===e.viewLeft&&t.viewTop===e.viewTop&&t.absoluteTop===e.absoluteTop&&t.absoluteLeft===e.absoluteLeft&&t.scrollWidth===e.scrollWidth&&t.scrollHeight===e.scrollHeight&&t.scrollLeft===e.scrollLeft&&t.scrollTop===e.scrollTop}};Pg.scrollbarThickness=Qa?25:15,Pg.DEFAULT_SCROLLBAR_MARGIN=.5;var $g={parseFromString:function(){throw Error("DOMParser was not found in the global scope and was not properly injected using injectDependencies")}},Bg={serializeToString:function(){throw Error("XMLSerializer was not foundin the global scope and was not properly injected using injectDependencies")}},{document:Fg,DOMParser:zg,XMLSerializer:Hg}=globalThis;zg&&($g=new zg),Hg&&(Bg=new Hg);var Gg="https://developers.google.com/blockly/xml",Ug=/[\x00-\x09\x0B\x0C\x0E-\x1F]/g,Vg={NAME_SPACE:Gg};Vg.createElement=Hs.createElement$$module$build$src$core$utils$xml,Vg.createTextNode=Hs.createTextNode$$module$build$src$core$utils$xml,Vg.domToText=Rt,Vg.injectDependencies=St,Vg.textToDom=Hs.textToDom$$module$build$src$core$utils$xml;var Wg,jg="categoryToolbox",Yg="flyoutToolbox";!function(t){t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM",t[t.LEFT=2]="LEFT",t[t.RIGHT=3]="RIGHT"}(Wg||(Wg={}));var Xg,Zg,Kg,Qg={hasCategoriesInternal:Pt},Jg={};Jg.Position=Wg,Jg.TEST_ONLY=Qg,Jg.convertFlyoutDefToJsonArray=Nt,Jg.convertToolboxDefToJson=Dt,Jg.hasCategories=Lt,Jg.isCategoryCollapsible=$t,Jg.parseToolboxTree=Ht,function(t){t[t.TOP=0]="TOP",t[t.BOTTOM=1]="BOTTOM"}(Xg||(Xg={})),function(t){t[t.LEFT=0]="LEFT",t[t.RIGHT=1]="RIGHT"}(Zg||(Zg={})),function(t){t[t.UP=0]="UP",t[t.DOWN=1]="DOWN"}(Kg||(Kg={}));var qg={};qg.bumpDirection=Kg,qg.bumpPositionRect=Vt,qg.getCornerOppositeToolbox=Ut,qg.getStartPositionRect=Gt,qg.horizontalPosition=Zg,qg.verticalPosition=Xg;var tl=96,el=124,il="sprites.png",ol=class{constructor(t){this.workspace=t,this.id="zoomControls",this.boundEvents=[],this.zoomResetGroup=this.zoomOutGroup=this.zoomInGroup=null,this.HEIGHT=this.WIDTH=32,this.SMALL_SPACING=2,this.LARGE_SPACING=11,this.MARGIN_HORIZONTAL=this.MARGIN_VERTICAL=20,this.svgGroup=null,this.top=this.left=0,this.initialized=!1}createDom(){this.svgGroup=tt(Og.G,{});const t=String(Math.random()).substring(2);return this.createZoomOutSvg(t),this.createZoomInSvg(t),this.workspace.isMovable()&&this.createZoomResetSvg(t),this.svgGroup}init(){this.workspace.getComponentManager().addComponent({component:this,weight:2,capabilities:[Ig.Capability.POSITIONABLE]}),this.initialized=!0}dispose(){this.workspace.getComponentManager().removeComponent("zoomControls"),this.svgGroup&&rt(this.svgGroup);for(const t of this.boundEvents)j(t);this.boundEvents.length=0}getBoundingRectangle(){let t=this.SMALL_SPACING+2*this.HEIGHT;return this.zoomResetGroup&&(t+=this.LARGE_SPACING+this.HEIGHT),new Sg(this.top,this.top+t,this.left,this.left+this.WIDTH)}position(t,e){if(this.initialized){var i,o=Ut(this.workspace,t),n=this.SMALL_SPACING+2*this.HEIGHT;if(this.zoomResetGroup&&(n+=this.LARGE_SPACING+this.HEIGHT),t=Gt(o,new Rg(this.WIDTH,n),this.MARGIN_HORIZONTAL,this.MARGIN_VERTICAL,t,this.workspace),o=o.vertical,e=Vt(t,this.MARGIN_VERTICAL,o===Xg.TOP?Kg.DOWN:Kg.UP,e),o===Xg.TOP){var r,s=this.SMALL_SPACING+this.HEIGHT;null==(r=this.zoomInGroup)||r.setAttribute("transform","translate(0, "+s+")"),this.zoomResetGroup&&this.zoomResetGroup.setAttribute("transform","translate(0, "+(s+this.LARGE_SPACING+this.HEIGHT)+")")}else{let t;r=this.zoomResetGroup?this.LARGE_SPACING+this.HEIGHT:0,null==(t=this.zoomInGroup)||t.setAttribute("transform","translate(0, "+r+")"),r=r+this.SMALL_SPACING+this.HEIGHT,null==(s=this.zoomOutGroup)||s.setAttribute("transform","translate(0, "+r+")")}this.top=e.top,this.left=e.left,null==(i=this.svgGroup)||i.setAttribute("transform","translate("+this.left+","+this.top+")")}}createZoomOutSvg(t){this.zoomOutGroup=tt(Og.G,{class:"blocklyZoom blocklyZoomOut"},this.svgGroup);const e=tt(Og.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup);tt(Og.RECT,{width:32,height:32},e),tt(Og.IMAGE,{width:tl,height:el,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup).setAttributeNS(_g,"xlink:href",this.workspace.options.pathToMedia+il),this.boundEvents.push(V(this.zoomOutGroup,"pointerdown",null,this.zoom.bind(this,-1)))}createZoomInSvg(t){this.zoomInGroup=tt(Og.G,{class:"blocklyZoom blocklyZoomIn"},this.svgGroup);const e=tt(Og.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup);tt(Og.RECT,{width:32,height:32},e),tt(Og.IMAGE,{width:tl,height:el,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup).setAttributeNS(_g,"xlink:href",this.workspace.options.pathToMedia+il),this.boundEvents.push(V(this.zoomInGroup,"pointerdown",null,this.zoom.bind(this,1)))}zoom(t,e){this.workspace.markFocused(),this.workspace.zoomCenter(t),this.fireZoomEvent(),z(),e.stopPropagation(),e.preventDefault()}createZoomResetSvg(t){this.zoomResetGroup=tt(Og.G,{class:"blocklyZoom blocklyZoomReset"},this.svgGroup);const e=tt(Og.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup);tt(Og.RECT,{width:32,height:32},e),tt(Og.IMAGE,{width:tl,height:el,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup).setAttributeNS(_g,"xlink:href",this.workspace.options.pathToMedia+il),this.boundEvents.push(V(this.zoomResetGroup,"pointerdown",null,this.resetZoom.bind(this)))}resetZoom(t){this.workspace.markFocused();const e=Math.log(this.workspace.options.zoomOptions.startScale/this.workspace.scale)/Math.log(this.workspace.options.zoomOptions.scaleSpeed);this.workspace.beginCanvasTransition(),this.workspace.zoomCenter(e),this.workspace.scrollCenter(),setTimeout(this.workspace.endCanvasTransition.bind(this.workspace),500),this.fireZoomEvent(),z(),t.stopPropagation(),t.preventDefault()}fireZoomEvent(){const t=new(y(na))(null,this.workspace.id,"zoom_controls");d(t)}};J("\n.blocklyZoom>image, .blocklyZoom>svg>image {\n  opacity: .4;\n}\n\n.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {\n  opacity: .6;\n}\n\n.blocklyZoom>image:active, .blocklyZoom>svg>image:active {\n  opacity: .8;\n}\n");var nl="_TEMP_COLLAPSED_INPUT",rl="_TEMP_COLLAPSED_FIELD",sl="MANUALLY_DISABLED",al={COLLAPSED_FIELD_NAME:rl,COLLAPSED_INPUT_NAME:nl,MANUALLY_DISABLED:sl},gl=class{constructor(t){this.name=t}toString(){return this.name}equals(t){return this.name===t.toString()}};gl.MUTATOR=new gl("mutator"),gl.WARNING=new gl("warning"),gl.COMMENT=new gl("comment"),function(t){t[t.VALUE=1]="VALUE",t[t.STATEMENT=3]="STATEMENT",t[t.DUMMY=5]="DUMMY",t[t.CUSTOM=6]="CUSTOM",t[t.END_ROW=7]="END_ROW"}(Hs.inputTypes$$module$build$src$core$inputs$input_types||(Hs.inputTypes$$module$build$src$core$inputs$input_types={})),Hs.inputTypes$$module$build$src$core$inputs$input_types;var ll,hl,cl=function(t,e){window.alert(t),e&&e()},ul=function(t,e){e(window.confirm(t))},dl=function(t,e,i){i(window.prompt(t,e))},Al={confirmInternal:Xt},Il={TEST_ONLY:Al};Il.alert=Wt,Il.confirm=Yt,Il.prompt=Kt,Il.setAlert=jt,Il.setConfirm=Zt,Il.setPrompt=Qt,Hs.Msg$$module$build$src$core$msg=Object.create(null),ll=function(t){Object.keys(t).forEach((function(e){Hs.Msg$$module$build$src$core$msg[e]=t[e]}))},hl={Msg:Hs.Msg$$module$build$src$core$msg,setLocale:ll};var Cl={};Cl.isLegacyProcedureCallBlock=te,Cl.isLegacyProcedureDefBlock=qt;var pl=class extends Pa{constructor(t){super(),this.isBlank=void 0===t,t&&(this.varId=t.getId(),this.workspaceId=t.workspace.id)}toJson(){const t=super.toJson();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");return t.varId=this.varId,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new pl)).varId=t.varId,e}},fl=class extends pl{constructor(t){super(t),this.type=Js,t&&(this.varType=t.type,this.varName=t.name)}toJson(){const t=super.toJson();if(void 0===this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return t.varType=this.varType,t.varName=this.varName,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new fl)).varType=t.varType,e.varName=t.varName,e}run(t){const e=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");t?e.createVariable(this.varName,this.varType,this.varId):e.deleteVariableById(this.varId)}};t(js.EVENT,Js,fl);var vl=class{constructor(t,e,i,o){this.workspace=t,this.name=e,this.type=i||"",this.id_=o||c()}getId(){return this.id_}static compareByName(t,e){return t.name.localeCompare(e.name,void 0,{sensitivity:"base"})}},ml="VARIABLE",bl="ijkmnopqrstuvwxyzabcdefgh",yl={generateUniqueNameInternal:ne},_l={CATEGORY_NAME:ml,TEST_ONLY:yl,VAR_LETTER_OPTIONS:bl};_l.allDeveloperVariables=Hs.allDeveloperVariables$$module$build$src$core$variables,_l.allUsedVarModels=Hs.allUsedVarModels$$module$build$src$core$variables,_l.createVariableButtonHandler=se,_l.flyoutCategory=ee,_l.flyoutCategoryBlocks=ie,_l.generateUniqueName=oe,_l.generateUniqueNameFromOptions=re,_l.generateVariableFieldDom=de,_l.getAddedVariables=Ie,_l.getOrCreateVariablePackage=Hs.getOrCreateVariablePackage$$module$build$src$core$variables,_l.getVariable=Hs.getVariable$$module$build$src$core$variables,_l.nameUsedWithAnyType=le,_l.nameUsedWithConflictingParam=he,_l.promptName=ae,_l.renameVariable=Hs.renameVariable$$module$build$src$core$variables;var Tl=new Set,El=new WeakSet,wl=new WeakMap,kl=null,Ol=null,Sl=0,Rl={};Rl.finishQueuedRenders=pe,Rl.queueRender=Ce,Rl.triggerQueuedRenders=fe;var xl=class{constructor(t,e){this.workspace=t,this.text="",this.size=new Rg(120,100),this.collapsed=!1,this.deletable=this.movable=this.editable=!0,this.location=new mg(0,0),this.disposing=this.disposed=!1,this.id=e&&!t.getCommentById(e)?e:c(),t.addTopComment(this),this.fireCreateEvent()}fireCreateEvent(){f()&&d(new(y(ca))(this))}fireDeleteEvent(){f()&&d(new(y(ua))(this))}fireChangeEvent(t,e){f()&&d(new(y(da))(this,t,e))}fireCollapseEvent(t){f()&&d(new(y(Ia))(this,t))}setText(t){const e=this.text;this.text=t,this.fireChangeEvent(e,t)}getText(){return this.text}setSize(t){this.size=t}getSize(){return this.size}setCollapsed(t){this.collapsed=t,this.fireCollapseEvent(t)}isCollapsed(){return this.collapsed}setEditable(t){this.editable=t}isEditable(){return this.isOwnEditable()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable}setMovable(t){this.movable=t}isMovable(){return this.isOwnMovable()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable}setDeletable(t){this.deletable=t}isDeletable(){return this.isOwnDeletable()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable}moveTo(t,e){const i=new(y(Aa))(this);e&&i.setReason(e),this.location=t,i.recordNew(),f()&&d(i)}getRelativeToSurfaceXY(){return this.location}dispose(){this.disposing=!0,this.fireDeleteEvent(),this.workspace.removeTopComment(this),this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}},Dl=50,Ml=class{constructor(t){let e;this.workspace=t,this.size=new Rg(120,100),this.collapsed=!1,this.editable=!0,this.location=new mg(0,0),this.text="",this.textChangeListeners=[],this.sizeChangeListeners=[],this.disposeListeners=[],this.collapseChangeListeners=[],this.resizePointerMoveListener=this.resizePointerUpListener=null,this.disposed=this.disposing=!1,this.svgRoot=tt(Og.G,{class:"blocklyComment blocklyEditable"}),this.highlightRect=this.createHighlightRect(this.svgRoot),({topBarGroup:this.topBarGroup,topBarBackground:this.topBarBackground,deleteIcon:this.deleteIcon,foldoutIcon:this.foldoutIcon,textPreview:this.textPreview,textPreviewNode:this.textPreviewNode}=this.createTopBar(this.svgRoot,t)),({foreignObject:this.foreignObject,textArea:this.textArea}=this.createTextArea(this.svgRoot)),this.resizeHandle=this.createResizeHandle(this.svgRoot,t),null==(e=t.getLayerManager())||e.append(this,Dl),this.setSize(this.size),this.moveTo(new mg(0,0))}createHighlightRect(t){return tt(Og.RECT,{class:"blocklyCommentHighlight"},t)}createTopBar(t,e){t=tt(Og.G,{class:"blocklyCommentTopbar"},t);const i=tt(Og.RECT,{class:"blocklyCommentTopbarBackground"},t),o=tt(Og.IMAGE,{class:"blocklyDeleteIcon",href:`${e.options.pathToMedia}delete-icon.svg`},t);e=tt(Og.IMAGE,{class:"blocklyFoldoutIcon",href:`${e.options.pathToMedia}foldout-icon.svg`},t);const n=tt(Og.TEXT,{class:"blocklyCommentPreview blocklyCommentText blocklyText"},t),r=document.createTextNode("");return n.appendChild(r),V(e,"pointerdown",this,this.onFoldoutDown),V(o,"pointerdown",this,this.onDeleteDown),{topBarGroup:t,topBarBackground:i,deleteIcon:o,foldoutIcon:e,textPreview:n,textPreviewNode:r}}createTextArea(t){t=tt(Og.FOREIGNOBJECT,{class:"blocklyCommentForeignObject"},t);const e=document.createElementNS(yg,"body");e.setAttribute("xmlns",yg),e.className="blocklyMinimalBody";const i=document.createElementNS(yg,"textarea");return et(i,"blocklyCommentText"),et(i,"blocklyTextarea"),et(i,"blocklyText"),e.appendChild(i),t.appendChild(e),V(i,"change",this,this.onTextChange),{foreignObject:t,textArea:i}}createResizeHandle(t,e){return t=tt(Og.IMAGE,{class:"blocklyResizeHandle",href:`${e.options.pathToMedia}resize-handle.svg`},t),V(t,"pointerdown",this,this.onResizePointerDown),t}getSvgRoot(){return this.svgRoot}getSize(){return this.collapsed?this.topBarBackground.getBBox():this.size}setSize(t){const e=this.topBarBackground.getBBox(),i=this.deleteIcon.getBBox(),o=this.foldoutIcon.getBBox(),n=this.textPreview.getBBox(),r=this.resizeHandle.getBBox();t=Rg.max(t,this.calcMinSize(e,o,i));const s=this.size;this.size=t,this.svgRoot.setAttribute("height",`${t.height}`),this.svgRoot.setAttribute("width",`${t.width}`),this.updateHighlightRect(t),this.updateTopBarSize(t),this.updateTextAreaSize(t,e),this.updateDeleteIconPosition(t,e,i),this.updateFoldoutIconPosition(e,o),this.updateTextPreviewSize(t,e,n,i,r),this.updateResizeHandlePosition(t,r),this.onSizeChange(s,this.size)}calcMinSize(t,e,i){var o;this.updateTextPreview(null!=(o=this.textArea.value)?o:""),o=ht(this.textPreview);const n=this.calcFoldoutMargin(t,e),r=this.calcDeleteMargin(t,i);let s=o;return this.foldoutIcon.checkVisibility()?s+=e.width+2*n:o&&(s+=4),this.deleteIcon.checkVisibility()?s+=i.width+2*r:o&&(s+=4),new Rg(s,t.height+20)}calcDeleteMargin(t,e){return(t.height-e.height)/2}calcFoldoutMargin(t,e){return(t.height-e.height)/2}updateHighlightRect(t){this.highlightRect.setAttribute("height",`${t.height}`),this.highlightRect.setAttribute("width",`${t.width}`),this.workspace.RTL&&this.highlightRect.setAttribute("x",""+-t.width)}updateTopBarSize(t){this.topBarBackground.setAttribute("width",`${t.width}`)}updateTextAreaSize(t,e){this.foreignObject.setAttribute("height",""+(t.height-e.height)),this.foreignObject.setAttribute("width",`${t.width}`),this.foreignObject.setAttribute("y",`${e.height}`),this.workspace.RTL&&this.foreignObject.setAttribute("x",""+-t.width)}updateDeleteIconPosition(t,e,i){e=this.calcDeleteMargin(e,i),this.deleteIcon.setAttribute("y",`${e}`),this.deleteIcon.setAttribute("x",""+(t.width-i.width-e))}updateFoldoutIconPosition(t,e){t=this.calcFoldoutMargin(t,e),this.foldoutIcon.setAttribute("y",`${t}`),this.foldoutIcon.setAttribute("x",`${t}`)}updateTextPreviewSize(t,e,i,o,n){const r=(e.height-i.height)/2,s=this.calcDeleteMargin(e,o);e=this.calcFoldoutMargin(e,n),t=t.width-n.width-2*e-o.width-2*s,this.textPreview.setAttribute("x",`${n.width+2*e*(this.workspace.RTL?-1:1)}`),this.textPreview.setAttribute("y",`${r+i.height/2}`),this.textPreview.setAttribute("width",`${t}`)}updateResizeHandlePosition(t,e){this.resizeHandle.setAttribute("y",""+(t.height-e.height)),this.resizeHandle.setAttribute("x",""+(t.width-e.width))}onSizeChange(t,e){for(let i=this.sizeChangeListeners.length-1;0<=i;i--)this.sizeChangeListeners[i](t,e)}addSizeChangeListener(t){this.sizeChangeListeners.push(t)}removeSizeChangeListener(t){this.sizeChangeListeners.splice(this.sizeChangeListeners.indexOf(t),1)}onResizePointerDown(t){this.isEditable()&&(this.bringToFront(),X(t)||(this.workspace.startDrag(t,new mg(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=V(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=V(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),t.stopPropagation())}onResizePointerUp(t){z(),this.resizePointerUpListener&&(j(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(j(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(t){t=this.workspace.moveDrag(t),this.setSize(new Rg(this.workspace.RTL?-t.x:t.x,t.y))}isCollapsed(){return this.collapsed}setCollapsed(t){(this.collapsed=t)?et(this.svgRoot,"blocklyCollapsed"):ot(this.svgRoot,"blocklyCollapsed"),this.setSize(this.size),this.onCollapse()}onCollapse(){for(let t=this.collapseChangeListeners.length-1;0<=t;t--)this.collapseChangeListeners[t](this.collapsed)}addOnCollapseListener(t){this.collapseChangeListeners.push(t)}removeOnCollapseListener(t){this.collapseChangeListeners.splice(this.collapseChangeListeners.indexOf(t),1)}onFoldoutDown(t){this.bringToFront(),X(t)||(this.setCollapsed(!this.collapsed),this.workspace.hideChaff()),t.stopPropagation()}isEditable(){return this.editable}setEditable(t){(this.editable=t)?(et(this.svgRoot,"blocklyEditable"),ot(this.svgRoot,"blocklyReadonly"),this.textArea.removeAttribute("readonly")):(ot(this.svgRoot,"blocklyEditable"),et(this.svgRoot,"blocklyReadonly"),this.textArea.setAttribute("readonly","true"))}getRelativeToSurfaceXY(){return this.location}moveTo(t){this.location=t,this.svgRoot.setAttribute("transform",`translate(${t.x}, ${t.y})`)}getText(){return this.text}setText(t){this.textArea.value=t,this.onTextChange()}addTextChangeListener(t){this.textChangeListeners.push(t)}removeTextChangeListener(t){this.textChangeListeners.splice(this.textChangeListeners.indexOf(t),1)}onTextChange(){const t=this.text;this.text=this.textArea.value,this.updateTextPreview(this.text),this.setSize(this.size);for(let e=this.textChangeListeners.length-1;0<=e;e--)this.textChangeListeners[e](t,this.text)}updateTextPreview(t){this.textPreviewNode.textContent=this.truncateText(t)}truncateText(t){return 12<=t.length?`${t.substring(0,9)}...`:t}bringToFront(){const t=this.svgRoot.parentNode,e=t.childNodes;e[e.length-1]!==this.svgRoot&&t.appendChild(this.svgRoot)}onDeleteDown(t){X(t)||this.dispose(),t.stopPropagation()}dispose(){this.disposing=!0,rt(this.svgRoot);for(let t=this.disposeListeners.length-1;0<=t;t--)this.disposeListeners[t]();this.disposed=!0}isDisposed(){return this.disposed}isDeadOrDying(){return this.disposing||this.disposed}addDisposeListener(t){this.disposeListeners.push(t)}removeDisposeListener(t){this.disposeListeners.splice(this.disposeListeners.indexOf(t),1)}};J("\n.injectionDiv {\n  --commentFillColour: #FFFCC7;\n  --commentBorderColour: #F2E49B;\n}\n\n.blocklyComment .blocklyTextarea {\n  background-color: var(--commentFillColour);\n  border: 1px solid var(--commentBorderColour);\n  box-sizing: border-box;\n  display: block;\n  outline: 0;\n  padding: 5px;\n  resize: none;\n  width: 100%;\n  height: 100%;\n}\n\n.blocklyReadonly.blocklyComment .blocklyTextarea {\n  cursor: inherit;\n}\n\n.blocklyDeleteIcon {\n  width: 20px;\n  height: 20px;\n  display: none;\n  cursor: pointer;\n}\n\n.blocklyFoldoutIcon {\n  width: 20px;\n  height: 20px;\n  transform-origin: 12px 12px;\n  cursor: pointer;\n}\n.blocklyResizeHandle {\n  width: 12px;\n  height: 12px;\n  cursor: se-resize;\n}\n.blocklyReadonly.blocklyComment .blocklyResizeHandle {\n  cursor: inherit;\n}\n\n.blocklyCommentTopbarBackground {\n  cursor: grab;\n  fill: var(--commentBorderColour);\n  height: 24px;\n}\n\n.blocklyComment .blocklyCommentPreview.blocklyText {\n  fill: #000;\n  dominant-baseline: middle;\n  visibility: hidden;\n}\n\n.blocklyCollapsed.blocklyComment .blocklyCommentPreview {\n  visibility: visible;\n}\n\n.blocklyCollapsed.blocklyComment .blocklyCommentForeignObject,\n.blocklyCollapsed.blocklyComment .blocklyResizeHandle {\n  display: none;\n}\n\n.blocklyCollapsed.blocklyComment .blocklyFoldoutIcon {\n  transform: rotate(-90deg);\n}\n\n.blocklyRTL .blocklyCommentTopbar {\n  transform: scale(-1, 1);\n}\n\n.blocklyRTL .blocklyCommentForeignObject {\n  direction: rtl;\n}\n\n.blocklyRTL .blocklyCommentPreview {\n  /* Revert the scale and control RTL using direction instead. */\n  transform: scale(-1, 1);\n  direction: rtl;\n}\n\n.blocklyRTL .blocklyResizeHandle {\n  transform: scale(-1, 1);\n  cursor: sw-resize;\n}\n\n.blocklyCommentHighlight {\n  fill: none;\n}\n\n.blocklySelected .blocklyCommentHighlight {\n  stroke: #fc3;\n  stroke-width: 3px;\n}\n\n.blocklyCollapsed.blocklySelected .blocklyCommentHighlight {\n  stroke: none;\n}\n\n.blocklyCollapsed.blocklySelected .blocklyCommentTopbarBackground {\n  stroke: #fc3;\n  stroke-width: 3px;\n}\n");var Nl=class{constructor(t){this.comment=t,this.startLoc=null,this.workspace=t.workspace}isMovable(){return this.comment.isOwnMovable()&&!this.workspace.options.readOnly}startDrag(){let t;Hs.getGroup$$module$build$src$core$events$utils()||Hs.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.comment.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1),null==(t=this.workspace.getLayerManager())||t.moveToDragLayer(this.comment),this.comment.setDragging(!0)}drag(t){this.comment.moveDuringDrag(t)}endDrag(){let t;this.fireMoveEvent(),null==(t=this.workspace.getLayerManager())||t.moveOffDragLayer(this.comment,Dl),this.comment.setDragging(!1),this.comment.snapToGrid(),this.workspace.setResizesEnabled(!0),Hs.setGroup$$module$build$src$core$events$utils(!1)}fireMoveEvent(){if(!this.comment.isDeadOrDying()){var t=new(y(Aa))(this.comment);t.setReason(["drag"]),t.oldCoordinate_=this.startLoc,t.recordNew(),d(t)}}revertDrag(){this.startLoc&&this.comment.moveDuringDrag(this.startLoc)}},Ll={BLOCKS:50,PROCEDURES:75,VARIABLES:100,WORKSPACE_COMMENTS:25},Pl={};Pl.register=Ee,Pl.unregister=we;var $l=class{constructor(){this.priority=25}save(t){const e=[];for(const i of t.getTopComments())(t=ke(i,{addCoordinates:!0,saveIds:!0}))&&e.push(t);return e.length?e:null}load(t,e){for(const i of t)Oe(i,e,{recordUndo:u()})}clear(t){for(const e of t.getTopComments())e.dispose()}};Ee("workspaceComments",new $l);var Bl={};Bl.WorkspaceCommentSerializer=$l,Bl.append=Oe,Bl.save=ke;var Fl={};Fl.register=Se,Fl.unregister=Re;var zl=class{paste(t,e,i){let o;t=t.commentState,i&&(t.x=i.x,t.y=i.y),Hs.disable$$module$build$src$core$events$utils();try{o=Oe(t,e),xe(o)}finally{Hs.enable$$module$build$src$core$events$utils()}return o?(f()&&d(new(y(ca))(o)),Hs.setSelected$$module$build$src$core$common(o),o):null}};zl.TYPE="workspace-comment",Se(zl.TYPE,new zl),Hs.config$$module$build$src$core$config={dragRadius:5,flyoutDragRadius:10,snapRadius:28,connectingSnapRadius:28,currentConnectionPreference:8,bumpDelay:250},Hs.config$$module$build$src$core$config;var Hl,Gl,Ul="aria-",Vl="role";(function(t){t.GRID="grid",t.GRIDCELL="gridcell",t.GROUP="group",t.LISTBOX="listbox",t.MENU="menu",t.MENUITEM="menuitem",t.MENUITEMCHECKBOX="menuitemcheckbox",t.OPTION="option",t.PRESENTATION="presentation",t.ROW="row",t.TREE="tree",t.TREEITEM="treeitem"})(Hl||(Hl={})),function(t){t.ACTIVEDESCENDANT="activedescendant",t.COLCOUNT="colcount",t.DISABLED="disabled",t.EXPANDED="expanded",t.INVALID="invalid",t.LABEL="label",t.LABELLEDBY="labelledby",t.LEVEL="level",t.ORIENTATION="orientation",t.POSINSET="posinset",t.ROWCOUNT="rowcount",t.SELECTED="selected",t.SETSIZE="setsize",t.VALUEMAX="valuemax",t.VALUEMIN="valuemin"}(Gl||(Gl={}));var Wl={};Wl.Role=Hl,Wl.State=Gl,Wl.setRole=Me,Wl.setState=Ne;var jl=class{constructor(){this.menuItems=[],this.roleName=this.element=this.onKeyDownHandler=this.mouseLeaveHandler=this.mouseEnterHandler=this.clickHandler=this.mouseOverHandler=this.highlightedItem=this.openingCoords=null}addChild(t){this.menuItems.push(t)}render(t){const e=document.createElement("div");e.className="blocklyMenu goog-menu blocklyNonSelectable",e.tabIndex=0,this.roleName&&Me(e,this.roleName),this.element=e;for(let t,i=0;t=this.menuItems[i];i++)e.appendChild(t.createDom());return this.mouseOverHandler=V(e,"pointerover",this,this.handleMouseOver,!0),this.clickHandler=V(e,"pointerup",this,this.handleClick,!0),this.mouseEnterHandler=V(e,"pointerenter",this,this.handleMouseEnter,!0),this.mouseLeaveHandler=V(e,"pointerleave",this,this.handleMouseLeave,!0),this.onKeyDownHandler=V(e,"keydown",this,this.handleKeyEvent),t.appendChild(e),e}getElement(){return this.element}focus(){const t=this.getElement();t&&(t.focus({preventScroll:!0}),et(t,"blocklyFocused"))}blur(){const t=this.getElement();t&&(t.blur(),ot(t,"blocklyFocused"))}setRole(t){this.roleName=t}dispose(){this.mouseOverHandler&&(j(this.mouseOverHandler),this.mouseOverHandler=null),this.clickHandler&&(j(this.clickHandler),this.clickHandler=null),this.mouseEnterHandler&&(j(this.mouseEnterHandler),this.mouseEnterHandler=null),this.mouseLeaveHandler&&(j(this.mouseLeaveHandler),this.mouseLeaveHandler=null),this.onKeyDownHandler&&(j(this.onKeyDownHandler),this.onKeyDownHandler=null);for(let t,e=0;t=this.menuItems[e];e++)t.dispose();this.element=null}getMenuItem(t){const e=this.getElement();for(;t&&t!==e;){if(t.classList.contains("blocklyMenuItem"))for(let e,i=0;e=this.menuItems[i];i++)if(e.getElement()===t)return e;t=t.parentElement}return null}setHighlighted(t){var e=this.highlightedItem;e&&(e.setHighlighted(!1),this.highlightedItem=null),t&&(t.setHighlighted(!0),this.highlightedItem=t,e=this.getElement(),bt(t.getElement(),e),Ne(e,Gl.ACTIVEDESCENDANT,t.getId()))}highlightNext(){const t=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(t,1)}highlightPrevious(){const t=this.highlightedItem?this.menuItems.indexOf(this.highlightedItem):-1;this.highlightHelper(0>t?this.menuItems.length:t,-1)}highlightFirst(){this.highlightHelper(-1,1)}highlightLast(){this.highlightHelper(this.menuItems.length,-1)}highlightHelper(t,e){let i;for(t+=e;i=this.menuItems[t];){if(i.isEnabled()){this.setHighlighted(i);break}t+=e}}handleMouseOver(t){(t=this.getMenuItem(t.target))&&(t.isEnabled()?this.highlightedItem!==t&&this.setHighlighted(t):this.setHighlighted(null))}handleClick(t){const e=this.openingCoords;if(this.openingCoords=null,e&&"number"==typeof t.clientX){const i=new mg(t.clientX,t.clientY);if(1>mg.distance(e,i))return}(t=this.getMenuItem(t.target))&&t.performAction()}handleMouseEnter(t){this.focus()}handleMouseLeave(t){this.getElement()&&(this.blur(),this.setHighlighted(null))}handleKeyEvent(t){if(this.menuItems.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var e=this.highlightedItem;switch(t.key){case"Enter":case" ":e&&e.performAction();break;case"ArrowUp":this.highlightPrevious();break;case"ArrowDown":this.highlightNext();break;case"PageUp":case"Home":this.highlightFirst();break;case"PageDown":case"End":this.highlightLast();break;default:return}t.preventDefault(),t.stopPropagation()}}getSize(){const t=this.getElement(),e=At(t);return e.height=t.scrollHeight,e}},Yl=class{constructor(t,e){this.content=t,this.opt_value=e,this.enabled=!0,this.element=null,this.rightToLeft=!1,this.roleName=null,this.highlight=this.checked=this.checkable=!1,this.actionHandler=null}createDom(){const t=document.createElement("div");t.id=h(),this.element=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft?"blocklyMenuItemRtl goog-menuitem-rtl ":"");const e=document.createElement("div");if(e.className="blocklyMenuItemContent goog-menuitem-content",this.checkable){var i=document.createElement("div");i.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",e.appendChild(i)}return i=this.content,"string"==typeof this.content&&(i=document.createTextNode(this.content)),e.appendChild(i),t.appendChild(e),this.roleName&&Me(t,this.roleName),Ne(t,Gl.SELECTED,this.checkable&&this.checked||!1),Ne(t,Gl.DISABLED,!this.enabled),t}dispose(){this.element=null}getElement(){return this.element}getId(){return this.element.id}getValue(){let t;return null!=(t=this.opt_value)?t:null}setRightToLeft(t){this.rightToLeft=t}setRole(t){this.roleName=t}setCheckable(t){this.checkable=t}setChecked(t){this.checked=t}setHighlighted(t){this.highlight=t;const e=this.getElement();e&&this.isEnabled()&&(t?(et(e,"blocklyMenuItemHighlight"),et(e,"goog-menuitem-highlight")):(ot(e,"blocklyMenuItemHighlight"),ot(e,"goog-menuitem-highlight")))}isEnabled(){return this.enabled}setEnabled(t){this.enabled=t}performAction(){this.isEnabled()&&this.actionHandler&&this.actionHandler(this)}onAction(t,e){this.actionHandler=t.bind(e)}},Xl=class extends Error{},Zl=class extends Xl{constructor(t){super("Expected to find a 'type' property, defining the block type"),this.state=t}},Kl=class extends Xl{constructor(t,e,i){super(`The block ${e.toDevString()} is missing a(n) ${t}\nconnection`),this.block=e,this.state=i}},Ql=class extends Xl{constructor(t,e,i,o){super(`The block ${i.toDevString()} could not connect its\n${e} to its parent, because: ${t}`),this.childBlock=i,this.childState=o}},Jl=class extends Xl{constructor(t){super("Encountered a real block which is defined as a child of a shadow\nblock. It is an invariant of Blockly that shadow blocks only have shadow\nchildren"),this.state=t}},ql=class extends Xl{constructor(t,e,i){super(`Cannot add an icon of type '${t}' to the block ${e.toDevString()}, because there is no icon registered with type '${t}'. Make sure that all of your icons have been registered.`),this.block=e,this.state=i}},th={};th.BadConnectionCheck=Ql,th.DeserializationError=Xl,th.MissingBlockType=Zl,th.MissingConnection=Kl,th.RealChildOfShadow=Jl,th.UnregisteredIcon=ql;var eh=class{constructor(){this.priority=50}save(t){const e=[];for(const i of t.getTopBlocks(!1))(t=Pe(i,{addCoordinates:!0,doFullSerialization:!1}))&&e.push(t);return e.length?{languageVersion:0,blocks:e}:null}load(t,e){t=t.blocks;for(const i of t)We(i,e,{recordUndo:u()})}clear(t){for(const e of t.getTopBlocks(!1))e.dispose(!1)}};Ee("blocks",new eh);var ih={};ih.BlockSerializer=eh,ih.append=We,ih.appendInternal=je,ih.save=Pe;var oh=class extends Pa{constructor(t){super(),this.isBlank=!t,t&&(this.blockId=t.id,this.workspaceId=t.workspace.id)}toJson(){const t=super.toJson();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return t.blockId=this.blockId,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new oh)).blockId=t.blockId,e}},nh=class extends oh{constructor(t,e,i,o,n){super(t),this.type=Hs.CHANGE$$module$build$src$core$events$utils,t&&(this.element=e,this.name=i||void 0,this.oldValue=o,this.newValue=n)}toJson(){const t=super.toJson();if(!this.element)throw Error("The changed element is undefined. Either pass an element to the constructor, or call fromJson");return t.element=this.element,t.name=this.name,t.oldValue=this.oldValue,t.newValue=this.newValue,this.disabledReason&&(t.disabledReason=this.disabledReason),t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new nh)).element=t.element,e.name=t.name,e.oldValue=t.oldValue,e.newValue=t.newValue,void 0!==t.disabledReason&&(e.disabledReason=t.disabledReason),e}setDisabledReason(t){if("disabled"!==this.element)throw Error('Cannot set the disabled reason for a BlockChange event if the element is not "disabled".');this.disabledReason=t}isNull(){return this.oldValue===this.newValue}run(t){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(!(e=e.getBlockById(this.blockId)))throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");const i=e.getIcon(gl.MUTATOR);switch(i&&ri(i)&&i.bubbleIsVisible()&&i.setBubbleVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(e=e.getField(this.name))?e.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":e.setCommentText(t||null);break;case"collapsed":e.setCollapsed(!!t);break;case"disabled":var o;e.setDisabledReason(!!t,null!=(o=this.disabledReason)?o:sl);break;case"inline":e.setInputsInline(!!t);break;case"mutation":o=nh.getExtraBlockState_(e),e.loadExtraState?e.loadExtraState(JSON.parse(t||"{}")):e.domToMutation&&e.domToMutation(Hs.textToDom$$module$build$src$core$utils$xml(t||"<mutation/>")),d(new nh(e,"mutation",null,o,t));break;default:console.warn("Unknown change type: "+this.element)}}static getExtraBlockState_(t){return t.saveExtraState?(t=t.saveExtraState(!0))?JSON.stringify(t):"":t.mutationToDom&&(t=t.mutationToDom())?Qo(t):""}};t(js.EVENT,Hs.CHANGE$$module$build$src$core$events$utils,nh);var rh={};rh.clamp=gi,rh.toDegrees=ai,rh.toRadians=si;var sh,ah,gh,lh=16,hh=1,ch=12,uh=16,dh=.25,Ah=null,Ih=null,Ch="",ph="",fh=null,vh=null,mh=null,bh={getBoundsInfo:function(){const t=ft(fh),e=At(fh);return{left:t.x,right:t.x+e.width,top:t.y,bottom:t.y+e.height,width:e.width,height:e.height}},getPositionMetrics:function(t,e,i,o){const n=bh.getBoundsInfo(),r=At(sh);return e+r.height<n.bottom?bi(t,e,n,r):o-r.height>n.top?yi(i,o,n,r):e+r.height<document.documentElement.clientHeight?bi(t,e,n,r):o-r.height>document.documentElement.clientTop?yi(i,o,n,r):_i(t,n,r)}},yh={ANIMATION_TIME:dh,ARROW_HORIZONTAL_PADDING:ch,ARROW_SIZE:lh,BORDER_SIZE:hh,PADDING_Y:uh,TEST_ONLY:bh};yh.clearContent=di,yh.createDom=li,yh.getContentDiv=ui,yh.getOwner=ci,yh.getPositionX=Ti,yh.hide=ki,yh.hideIfOwner=wi,yh.hideWithoutAnimation=Oi,yh.isVisible=Ei,yh.repositionForWindowResize=Ri,yh.setBoundsElement=hi,yh.setColour=Ai,yh.show=mi,yh.showPositionedByBlock=Ii,yh.showPositionedByField=Ci;var _h=class{constructor(t){this.workspace=t,this.cursorSvg_=this.cursor_=null,this.markers=new Map,this.markerSvg_=null}registerMarker(t,e){this.markers.has(t)&&this.unregisterMarker(t),e.setDrawer(this.workspace.getRenderer().makeMarkerDrawer(this.workspace,e)),this.setMarkerSvg(e.getDrawer().createDom()),this.markers.set(t,e)}unregisterMarker(t){const e=this.markers.get(t);if(!e)throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.");e.dispose(),this.markers.delete(t)}getCursor(){return this.cursor_}getMarker(t){return this.markers.get(t)||null}setCursor(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace.getRenderer().makeMarkerDrawer(this.workspace,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))}setCursorSvg(t){t?(this.workspace.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null}setMarkerSvg(t){t?this.workspace.getBlockCanvas()&&(this.cursorSvg_?this.workspace.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace.getBlockCanvas().appendChild(t)):this.markerSvg_=null}updateMarkers(){this.workspace.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace.getCursor().draw()}dispose(){const t=Object.keys(this.markers);for(let e,i=0;e=t[i];i++)this.unregisterMarker(e);this.markers.clear(),this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)}};_h.LOCAL_MARKER="local_marker_1";var Th={};Th.commonWordPrefix=Di,Th.commonWordSuffix=Mi,Th.isNumber=Hs.isNumber$$module$build$src$core$utils$string,Th.shortestStringLength=xi,Th.wrap=Hs.wrap$$module$build$src$core$utils$string;var Eh=void 0,wh=!1,kh=!1,Oh=50,Sh=0,Rh=0,xh=0,Dh=0,Mh=null,Nh=null,Lh=0,Ph=10,$h=10,Bh=750,Fh=5,zh=null,Hh={HOVER_MS:Bh,LIMIT:Oh,MARGINS:Fh,OFFSET_X:Lh,OFFSET_Y:Ph,RADIUS_OK:$h};Hh.bindMouseEvents=Wi,Hh.block=Ji,Hh.createDom=Vi,Hh.dispose=Ki,Hh.getCustomTooltip=Fi,Hh.getDiv=Hi,Hh.getTooltipOfObject=Gi,Hh.hide=Qi,Hh.isVisible=zi,Hh.setCustomTooltip=Bi,Hh.unbindMouseEvents=ji,Hh.unblock=qi;var Gh=.45,Uh=.65,Vh={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},Wh={};Wh.blend=uo,Wh.getHsvSaturation=no,Wh.getHsvValue=so,Wh.hexToRgb=ho,Wh.hsvToHex=co,Wh.hueToHex=Ao,Wh.names=Vh,Wh.parse=go,Wh.rgbToHex=lo,Wh.setHsvSaturation=ro,Wh.setHsvValue=ao;var jh={};jh.checkMessageReferences=fo,jh.parseBlockColour=vo,jh.replaceMessageReferences=po,jh.tokenizeInterpolation=Co;var Yh=class{constructor(t,e,i){this.DEFAULT_VALUE=null,this.name=void 0,this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=this.tooltip_=this.validator_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",this.value_="DEFAULT_VALUE"in new.target.prototype?new.target.prototype.DEFAULT_VALUE:this.DEFAULT_VALUE,this.size_=new Rg(0,0),t!==Yh.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(t),e&&this.setValidator(e))}configure_(t){t.tooltip&&this.setTooltip(po(t.tooltip))}setSourceBlock(t){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=t}getConstants(){return!this.constants_&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_}getSourceBlock(){return this.sourceBlock_}init(){this.fieldGroup_||(this.fieldGroup_=tt(Og.G,{}),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel(),this.applyColour())}initView(){this.createBorderRect_(),this.createTextElement_()}initModel(){}isFullBlockField(){return!this.borderRect_}createBorderRect_(){this.borderRect_=tt(Og.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)}createTextElement_(){this.textElement_=tt(Og.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)}bindEvents_(){const t=this.getClickTarget_();if(!t)throw Error("A click target has not been set.");Wi(t),this.mouseDownWrapper_=V(t,"pointerdown",this,this.onMouseDown_)}fromXml(t){this.setValue(t.textContent)}toXml(t){return t.textContent=this.getValue(),t}saveState(t){return null!==(t=this.saveLegacyState(Yh))?t:this.getValue()}loadState(t){this.loadLegacyState(Yh,t)||this.setValue(t)}saveLegacyState(t){return t.prototype.saveState===this.saveState&&t.prototype.toXml!==this.toXml?((t=Hs.createElement$$module$build$src$core$utils$xml("field")).setAttribute("name",this.name||""),Rt(this.toXml(t)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null}loadLegacyState(t,e){return t.prototype.loadState===this.loadState&&t.prototype.fromXml!==this.fromXml&&(this.fromXml(Hs.textToDom$$module$build$src$core$utils$xml(e)),!0)}dispose(){let t;wi(this),wo(this),null!=(t=this.getSourceBlock())&&t.isDeadOrDying()||rt(this.fieldGroup_),this.disposed=!0}updateEditable(){const t=this.fieldGroup_,e=this.getSourceBlock();this.EDITABLE&&t&&e&&(this.enabled_&&e.isEditable()?(et(t,"blocklyEditableText"),ot(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):(et(t,"blocklyNonEditableText"),ot(t,"blocklyEditableText"),t.style.cursor=""))}setEnabled(t){this.enabled_=t,this.updateEditable()}isEnabled(){return this.enabled_}isClickable(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==Yh.prototype.showEditor_}isClickableInFlyout(t){return!t}isCurrentlyEditable(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()}isSerializable(){let t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t}isVisible(){return this.visible_}setVisible(t){if(this.visible_!==t){this.visible_=t;var e=this.fieldGroup_;e&&(e.style.display=t?"block":"none")}}setValidator(t){this.validator_=t}getValidator(){return this.validator_}getSvgRoot(){return this.fieldGroup_}getBorderRect(){if(!this.borderRect_)throw Error(`The border rectangle is ${this.borderRect_}.`);return this.borderRect_}getTextElement(){if(!this.textElement_)throw Error(`The text element is ${this.textElement_}.`);return this.textElement_}getTextContent(){if(!this.textContent_)throw Error(`The text content is ${this.textContent_}.`);return this.textContent_}applyColour(){}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()}showEditor(t){this.isClickable()&&this.showEditor_(t)}showEditor_(t){}repositionForWindowResize(){return!1}updateSize_(t){const e=this.getConstants();let i=2*(t=void 0!==t?t:this.isFullBlockField()?0:this.getConstants().FIELD_BORDER_RECT_X_PADDING),o=e.FIELD_TEXT_HEIGHT,n=0;this.textElement_&&(n=ct(this.textElement_,e.FIELD_TEXT_FONTSIZE,e.FIELD_TEXT_FONTWEIGHT,e.FIELD_TEXT_FONTFAMILY),i+=n),this.isFullBlockField()||(o=Math.max(o,e.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=o,this.size_.width=i,this.positionTextElement_(t,n),this.positionBorderRect_()}positionTextElement_(t,e){if(this.textElement_){var i,o=this.getConstants(),n=this.size_.height/2;this.textElement_.setAttribute("x",String(null!=(i=this.getSourceBlock())&&i.RTL?this.size_.width-e-t:t)),this.textElement_.setAttribute("y",String(o.FIELD_TEXT_BASELINE_CENTER?n:n-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE))}}positionBorderRect_(){this.borderRect_&&(this.borderRect_.setAttribute("width",String(this.size_.width)),this.borderRect_.setAttribute("height",String(this.size_.height)),this.borderRect_.setAttribute("rx",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)),this.borderRect_.setAttribute("ry",String(this.getConstants().FIELD_BORDER_RECT_RADIUS)))}getSize(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&0===this.size_.width&&(this.render_(),0!==this.size_.width&&console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead.")),this.size_):new Rg(0,0)}getScaledBBox(){let t;var e=this.getSourceBlock();if(!e)throw new Xh;if(this.isFullBlockField()){var i=this.sourceBlock_.getHeightWidth();const o=e.workspace.scale;t=this.getAbsoluteXY_(),e=(i.width+1)*o,i=(i.height+1)*o,og?(t.x+=1.5*o,t.y+=1.5*o):(t.x-=.5*o,t.y-=.5*o)}else i=this.borderRect_.getBoundingClientRect(),t=ft(this.borderRect_),e=i.width,i=i.height;return new Sg(t.y,t.y+i,t.x,t.x+e)}onLocationChange(t){}getDisplayText_(){let t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"â¦"),t=t.replace(/\s/g,Yh.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="â"),t):Yh.NBSP}getText(){const t=this.getText_();return String(null!==t?t:this.getValue())}getText_(){return null}markDirty(){this.isDirty_=!0,this.constants_=null}forceRerender(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&this.sourceBlock_.queueRender()}setValue(t,e=!0){if(null!==t){var i,o=this.doClassValidation_(t);(t=this.processValidation_(t,o,e))instanceof Error||(o=null==(i=this.getValidator())?void 0:i.call(this,t),(i=this.processValidation_(t,o,e))instanceof Error||(t=this.sourceBlock_)&&t.disposed||((o=this.getValue())===i?this.doValueUpdate_(i):(this.doValueUpdate_(i),e&&t&&f()&&d(new(y(Hs.CHANGE$$module$build$src$core$events$utils))(t,"field",this.name||null,o,i)),this.isDirty_&&this.forceRerender())))}}processValidation_(t,e,i){return null===e?(this.doValueInvalid_(t,i),this.isDirty_&&this.forceRerender(),Error()):void 0===e?t:e}getValue(){return this.value_}doClassValidation_(t){return null==t?null:t}doValueUpdate_(t){this.value_=t,this.isDirty_=!0}doValueInvalid_(t,e){}onMouseDown_(t){this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)}setTooltip(t){t||""===t||(t=this.sourceBlock_);const e=this.getClickTarget_();e?e.tooltip=t:this.tooltip_=t}getTooltip(){const t=this.getClickTarget_();return Gi(t||{tooltip:this.tooltip_})}getClickTarget_(){return this.clickTarget_||this.getSvgRoot()}getAbsoluteXY_(){return ft(this.getClickTarget_())}referencesVariables(){return!1}refreshVariableName(){}getParentInput(){let t=null;const e=this.getSourceBlock();if(!e)throw new Xh;const i=e.inputList;for(let o=0;o<e.inputList.length;o++){const e=i[o],n=e.fieldRow;for(let i=0;i<n.length;i++)if(n[i]===this){t=e;break}}return t}getFlipRtl(){return!1}isTabNavigable(){return!1}onShortcut(t){return!1}setCursorSvg(t){if(t){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(t),this.cursorSvg_=t}else this.cursorSvg_=null}setMarkerSvg(t){if(t){if(!this.fieldGroup_)throw Error(`The field group is ${this.fieldGroup_}.`);this.fieldGroup_.appendChild(t),this.markerSvg_=t}else this.markerSvg_=null}updateMarkers_(){var t=this.getSourceBlock();if(!t)throw new Xh;(t=t.workspace).keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(_h.LOCAL_MARKER).draw()}static fromJson(t){throw Error("Attempted to instantiate a field from the registry that hasn't defined a 'fromJson' method.")}};Yh.NBSP="Â ",Yh.SKIP_SETUP=Symbol("SKIP_SETUP");var Xh=class extends Error{constructor(){super("The field has not yet been attached to its input. Call appendField to attach it.")}},Zh={};Zh.Field=Yh,Zh.UnattachedFieldError=Xh;var Kh,Qh=null,Jh=null,qh=null,tc="blocklyWidgetDiv",ec="",ic="",oc={};oc.createDom=yo,oc.getDiv=mo,oc.hide=To,oc.hideIfOwner=wo,oc.hideIfOwnerIsInWorkspace=ko,oc.isVisible=Eo,oc.positionWithAnchor=So,oc.repositionForWindowResize=Mo,oc.show=_o,oc.testOnly_setDiv=bo;var nc=null,rc={},sc=null,ac={};ac.callbackFactory=Hs.callbackFactory$$module$build$src$core$contextmenu,ac.dispose=Go,ac.getCurrentBlock=No,ac.hide=Ho,ac.setCurrentBlock=Lo,ac.show=Po;var gc=class{constructor(){this.registry_=new Map,this.reset()}reset(){this.registry_.clear()}register(t){if(this.registry_.has(t.id))throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_.set(t.id,t)}unregister(t){if(!this.registry_.has(t))throw Error('Menu item with ID "'+t+'" not found.');this.registry_.delete(t)}getItem(t){let e;return null!=(e=this.registry_.get(t))?e:null}getContextMenuOptions(t,e){const i=[];for(const n of this.registry_.values())if(t===n.scopeType){var o=n.preconditionFn(e);"hidden"!==o&&(o={text:"function"==typeof n.displayText?n.displayText(e):n.displayText,enabled:"enabled"===o,callback:n.callback,scope:e,weight:n.weight},i.push(o))}return i.sort((function(t,e){return t.weight-e.weight})),i}};!function(t){var e=t.ScopeType||(t.ScopeType={});e.BLOCK="block",e.WORKSPACE="workspace",e.COMMENT="comment",t.registry=new t}(gc||(gc={}));var lc=gc.ScopeType,hc={};hc.ContextMenuRegistry=gc,hc.ScopeType=lc;var cc=class extends xl{constructor(t,e){super(t,e),this.dragStrategy=new Nl(this),this.workspace=t,this.view=new Ml(t),this.view.setSize(this.getSize()),this.view.setEditable(this.isEditable()),this.addModelUpdateBindings(),V(this.view.getSvgRoot(),"pointerdown",this,this.startGesture),V(this.view.getSvgRoot(),"wheel",this,(t=>{t.stopPropagation()}))}addModelUpdateBindings(){this.view.addTextChangeListener(((t,e)=>{super.setText(e)})),this.view.addSizeChangeListener(((t,e)=>{super.setSize(e)})),this.view.addOnCollapseListener((()=>{super.setCollapsed(this.view.isCollapsed())})),this.view.addDisposeListener((()=>{this.isDeadOrDying()||this.dispose()}))}setText(t){this.view.setText(t)}setSize(t){this.view.setSize(t)}setCollapsed(t){this.view.setCollapsed(t)}setEditable(t){super.setEditable(t),this.view.setEditable(this.isEditable())}getSvgRoot(){return this.view.getSvgRoot()}getSize(){return super.getSize()}getBoundingRectangle(){const t=this.getRelativeToSurfaceXY();var e,i;const o=null!=(i=null==(e=this.view)?void 0:e.getSize())?i:this.getSize();return this.workspace.RTL?(e=t.x-o.width,i=t.x):(e=t.x,i=t.x+o.width),new Sg(t.y,t.y+o.height,e,i)}moveBy(t,e,i){const o=this.getRelativeToSurfaceXY();t=new mg(o.x+t,o.y+e),this.moveTo(t,i)}moveTo(t,e){super.moveTo(t,e),this.view.moveTo(t)}moveDuringDrag(t){this.location=t,this.view.moveTo(t)}setDragging(t){t?et(this.getSvgRoot(),"blocklyDragging"):ot(this.getSvgRoot(),"blocklyDragging")}dispose(){this.disposing=!0,this.view.isDeadOrDying()||this.view.dispose(),super.dispose()}startGesture(t){const e=this.workspace.getGesture(t);e&&(e.handleCommentStart(t,this),Hs.setSelected$$module$build$src$core$common(this))}setDeleteStyle(t){t?et(this.getSvgRoot(),"blocklyDraggingDelete"):ot(this.getSvgRoot(),"blocklyDraggingDelete")}isMovable(){return this.dragStrategy.isMovable()}startDrag(){this.dragStrategy.startDrag()}drag(t){this.dragStrategy.drag(t)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){et(this.getSvgRoot(),"blocklySelected")}unselect(){ot(this.getSvgRoot(),"blocklySelected")}toCopyData(){return{paster:zl.TYPE,commentState:ke(this,{addCoordinates:!0})}}showContextMenu(t){const e=gc.registry.getContextMenuOptions(gc.ScopeType.COMMENT,{comment:this});Po(t,e,this.workspace.RTL,this.workspace)}snapToGrid(){if(!this.isDeadOrDying()){var t=this.workspace.getGrid();if(null!=t&&t.shouldSnap()){var e=this.getRelativeToSurfaceXY();(t=t.alignXY(e))!==e&&this.moveTo(t,["snap"])}}}},uc={};uc.appendDomToWorkspace=en,uc.blockToDom=Zo,uc.blockToDomWithXY=jo,uc.clearWorkspaceAndLoadFromXml=qo,uc.deleteNext=In,uc.domToBlock=Hs.domToBlock$$module$build$src$core$xml,uc.domToBlockInternal=on,uc.domToPrettyText=Jo,uc.domToText=Qo,uc.domToVariables=nn,uc.domToWorkspace=Hs.domToWorkspace$$module$build$src$core$xml,uc.loadWorkspaceComment=tn,uc.saveWorkspaceComment=Vo,uc.variablesToDom=Wo,uc.workspaceToDom=Uo;var dc=class extends oh{constructor(t){super(t),this.type=Hs.CREATE$$module$build$src$core$events$utils,t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=jo(t),this.ids=m(t),this.json=Pe(t,{addCoordinates:!0}))}toJson(){const t=super.toJson();if(!this.xml)throw Error("The block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");return t.xml=Qo(this.xml),t.ids=this.ids,t.json=this.json,this.recordUndo||(t.recordUndo=this.recordUndo),t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new dc)).xml=Hs.textToDom$$module$build$src$core$utils$xml(t.xml),e.ids=t.ids,e.json=t.json,void 0!==t.recordUndo&&(e.recordUndo=t.recordUndo),e}run(t){const e=this.getEventWorkspace_();if(!this.json)throw Error("The block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!Ac(e,this.ids))if(t)We(this.json,e);else for(t=0;t<this.ids.length;t++){const i=this.ids[t],o=e.getBlockById(i);o?o.dispose(!1):i===this.blockId&&console.warn("Can't uncreate non-existent block: "+i)}}},Ac=function(t,e){return e.map((e=>t.getBlockById(e))).filter((t=>t&&t.isShadow())).length===e.length};t(js.EVENT,Hs.CREATE$$module$build$src$core$events$utils,dc);var Ic=class extends $a{constructor(t,e){super(e),this.type=la,this.themeName=t}toJson(){const t=super.toJson();if(!this.themeName)throw Error("The theme name is undefined. Either pass a theme name to the constructor, or call fromJson");return t.themeName=this.themeName,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new Ic)).themeName=t.themeName,e}};t(js.EVENT,la,Ic);var Cc,pc=class extends $a{constructor(t,e,i,o,n){super(o),this.type=ha,this.viewTop=t,this.viewLeft=e,this.scale=i,this.oldScale=n}toJson(){const t=super.toJson();if(void 0===this.viewTop)throw Error("The view top is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.viewLeft)throw Error("The view left is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.scale)throw Error("The scale is undefined. Either pass a value to the constructor, or call fromJson");if(void 0===this.oldScale)throw Error("The old scale is undefined. Either pass a value to the constructor, or call fromJson");return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new pc)).viewTop=t.viewTop,e.viewLeft=t.viewLeft,e.scale=t.scale,e.oldScale=t.oldScale,e}};t(js.EVENT,ha,pc),function(t){t[t.INPUT_VALUE=1]="INPUT_VALUE",t[t.OUTPUT_VALUE=2]="OUTPUT_VALUE",t[t.NEXT_STATEMENT=3]="NEXT_STATEMENT",t[t.PREVIOUS_STATEMENT=4]="PREVIOUS_STATEMENT"}(Cc||(Cc={}));var fc=class{constructor(t){this.connectionChecker=t,this.connections=[]}addConnection(t,e){e=this.calculateIndexForYPos(e),this.connections.splice(e,0,t)}findIndexOfConnection(t,e){if(!this.connections.length)return-1;const i=this.calculateIndexForYPos(e);if(i>=this.connections.length)return-1;e=t.y;let o=i;for(;0<=o&&this.connections[o].y===e;){if(this.connections[o]===t)return o;o--}for(o=i;o<this.connections.length&&this.connections[o].y===e;){if(this.connections[o]===t)return o;o++}return-1}calculateIndexForYPos(t){if(!this.connections.length)return 0;let e=0,i=this.connections.length;for(;e<i;){const o=Math.floor((e+i)/2);if(this.connections[o].y<t)e=o+1;else{if(!(this.connections[o].y>t)){e=o;break}i=o}}return e}removeConnection(t,e){if(-1===(t=this.findIndexOfConnection(t,e)))throw Error("Unable to find connection in connectionDB.");this.connections.splice(t,1)}getNeighbours(t,e){function i(t){const i=n-o[t].x,s=r-o[t].y;return Math.sqrt(i*i+s*s)<=e&&g.push(o[t]),s<e}const o=this.connections,n=t.x,r=t.y;t=0;let s=o.length-2,a=s;for(;t<a;)o[a].y<r?t=a:s=a,a=Math.floor((t+s)/2);const g=[];if(s=t=a,o.length){for(;0<=t&&i(t);)t--;do{s++}while(s<o.length&&i(s))}return g}isInYRange(t,e,i){return Math.abs(this.connections[t].y-e)<=i}searchForClosest(t,e,i){if(!this.connections.length)return{connection:null,radius:e};const o=t.y,n=t.x;t.x=n+i.x,t.y=o+i.y;var r=this.calculateIndexForYPos(t.y);i=null;let s,a=e,g=r-1;for(;0<=g&&this.isInYRange(g,t.y,e);)s=this.connections[g],this.connectionChecker.canConnect(t,s,!0,a)&&(i=s,a=s.distanceFrom(t)),g--;for(;r<this.connections.length&&this.isInYRange(r,t.y,e);)s=this.connections[r],this.connectionChecker.canConnect(t,s,!0,a)&&(i=s,a=s.distanceFrom(t)),r++;return t.x=n,t.y=o,{connection:i,radius:a}}static init(t){const e=[];return e[Cc.INPUT_VALUE]=new fc(t),e[Cc.OUTPUT_VALUE]=new fc(t),e[Cc.NEXT_STATEMENT]=new fc(t),e[Cc.PREVIOUS_STATEMENT]=new fc(t),e}},vc=null,mc=null,bc={};bc.connectionUiEffect=vn,bc.disconnectUiEffect=mn,bc.disconnectUiStop=yn,bc.disposeUiEffect=pn;var yc=class{constructor(t){this.workspace=t,this.horizontalScrollEnabled_=this.workspace.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace.isMovableVertically(),this.startScrollXY_=new mg(t.scrollX,t.scrollY)}dispose(){this.workspace=null}startDrag(){R()&&R().unselect()}endDrag(t){this.drag(t)}drag(t){if(t=mg.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace.scroll(t.x,this.workspace.scrollY);else{if(!this.verticalScrollEnabled_)throw new TypeError("Invalid state.");this.workspace.scroll(this.workspace.scrollX,t.y)}}},_c=class{constructor(t,e){this.creatorWorkspace=e,this.mouseDownXY=new mg(0,0),this.startWorkspace_=this.targetBlock=this.startComment=this.startBlock=this.startIcon=this.startField=this.startBubble=null,this.hasExceededDragRadius=!1,this.boundEvents=[],this.workspaceDragger=this.dragger=null,this.dragging=!1,this.flyout=null,this.isMultiTouch_=this.isEnding_=this.gestureHasStarted=this.calledUpdateIsDragging=!1,this.cachedPoints=new Map,this.startDistance=this.previousScale=0,this.currentDropdownOwner=this.isPinchZoomEnabled=null,this.mostRecentEvent=t,this.currentDragDeltaXY=new mg(0,0)}dispose(){z(),qi(),this.creatorWorkspace.clearGesture();for(const t of this.boundEvents)j(t);this.boundEvents.length=0,this.workspaceDragger&&this.workspaceDragger.dispose()}updateFromEvent(t){const e=new mg(t.clientX,t.clientY);this.updateDragDelta(e)&&(this.updateIsDragging(t),F()),this.mostRecentEvent=t}updateDragDelta(t){return this.currentDragDeltaXY=mg.difference(t,this.mouseDownXY),!this.hasExceededDragRadius&&(this.hasExceededDragRadius=mg.magnitude(this.currentDragDeltaXY)>(this.flyout?Hs.config$$module$build$src$core$config.flyoutDragRadius:Hs.config$$module$build$src$core$config.dragRadius))}updateIsDraggingFromFlyout(){let t;if(!this.targetBlock||null==(t=this.flyout)||!t.isBlockCreatable(this.targetBlock))return!1;if(!this.flyout.targetWorkspace)throw Error("Cannot update dragging from the flyout because the ' +\n          'flyout's target workspace is undefined");return!(this.flyout.isScrollable()&&!this.flyout.isDragTowardWorkspace(this.currentDragDeltaXY)||(this.startWorkspace_=this.flyout.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),Hs.getGroup$$module$build$src$core$events$utils()||Hs.setGroup$$module$build$src$core$events$utils(!0),this.startBlock=null,this.targetBlock=this.flyout.createBlock(this.targetBlock),Hs.setSelected$$module$build$src$core$common(this.targetBlock),0))}updateIsDraggingWorkspace(){if(!this.startWorkspace_)throw Error("Cannot update dragging the workspace because the start workspace is undefined");(this.flyout?this.flyout.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.dragging=!0,this.workspaceDragger=new yc(this.startWorkspace_),this.workspaceDragger.startDrag())}updateIsDragging(t){if(!this.startWorkspace_)throw Error("Cannot update dragging because the start workspace is undefined");if(this.calledUpdateIsDragging)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging=!0,this.flyout&&this.updateIsDraggingFromFlyout();const e=R();e&&_n(e)&&e.isMovable()?(this.dragging=!0,this.dragger=this.createDragger(e,this.startWorkspace_),this.dragger.onDragStart(t),this.dragger.onDrag(t,this.currentDragDeltaXY)):this.updateIsDraggingWorkspace()}createDragger(t,e){return new(l(js.BLOCK_DRAGGER,this.creatorWorkspace.options,!0))(t,e)}doStart(t){if(!this.startWorkspace_)throw Error("Cannot start the touch gesture becauase the start workspace is undefined");this.isPinchZoomEnabled=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,Y(t)?this.cancel():(this.gestureHasStarted=!0,yn(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.currentDropdownOwner=ci(),this.startWorkspace_.hideChaff(!!this.flyout),this.startWorkspace_.markFocused(),this.mostRecentEvent=t,Ji(),X(t)?this.handleRightClick(t):("pointerdown"===t.type.toLowerCase()&&"mouse"!==t.pointerType&&B(t,this),this.mouseDownXY=new mg(t.clientX,t.clientY),this.bindMouseEvents(t),this.isEnding_||this.handleTouchStart(t)))}bindMouseEvents(t){this.boundEvents.push(V(document,"pointerdown",null,this.handleStart.bind(this),!0)),this.boundEvents.push(V(document,"pointermove",null,this.handleMove.bind(this),!0)),this.boundEvents.push(V(document,"pointerup",null,this.handleUp.bind(this),!0)),t.preventDefault(),t.stopPropagation()}handleStart(t){this.isDragging()||(this.handleTouchStart(t),this.isMultiTouch()&&F())}handleMove(t){this.isDragging()&&H(t)||!this.isMultiTouch()?(this.updateFromEvent(t),this.workspaceDragger?this.workspaceDragger.drag(this.currentDragDeltaXY):this.dragger&&this.dragger.onDrag(this.mostRecentEvent,this.currentDragDeltaXY),t.preventDefault(),t.stopPropagation()):this.isMultiTouch()&&(this.handleTouchMove(t),F())}handleUp(t){if(this.isDragging()||this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()){if(!H(t))return;if(this.updateFromEvent(t),F(),this.isEnding_)return void console.log("Trying to end a gesture recursively.");this.isEnding_=!0,this.dragger?this.dragger.onDragEnd(t,this.currentDragDeltaXY):this.workspaceDragger?this.workspaceDragger.endDrag(this.currentDragDeltaXY):this.isBubbleClick()||this.isCommentClick()||(this.isFieldClick()?this.doFieldClick():this.isIconClick()?this.doIconClick():this.isBlockClick()?this.doBlockClick():this.isWorkspaceClick()&&this.doWorkspaceClick(t))}t.preventDefault(),t.stopPropagation(),this.dispose()}handleTouchStart(t){var e=G(t);this.cachedPoints.set(e,this.getTouchPoint(t));var i=Array.from(this.cachedPoints.keys());2===i.length&&(e=this.cachedPoints.get(i[0]),i=this.cachedPoints.get(i[1]),this.startDistance=mg.distance(e,i),this.isMultiTouch_=!0,t.preventDefault())}handleTouchMove(t){const e=G(t);this.cachedPoints.set(e,this.getTouchPoint(t)),this.isPinchZoomEnabled&&2===this.cachedPoints.size?this.handlePinch(t):this.handleMove(t)}handlePinch(t){var e=Array.from(this.cachedPoints.keys()),i=this.cachedPoints.get(e[0]);if(e=this.cachedPoints.get(e[1]),i=mg.distance(i,e)/this.startDistance,0<this.previousScale&&1/0>this.previousScale){if(e=0<(e=i-this.previousScale)?5*e:6*e,!this.startWorkspace_)throw Error("Cannot handle a pinch because the start workspace is undefined");const o=this.startWorkspace_,n=Z(t,o.getParentSvg(),o.getInverseScreenCTM());o.zoom(n.x,n.y,e)}this.previousScale=i,t.preventDefault()}handleTouchEnd(t){t=G(t),this.cachedPoints.has(t)&&this.cachedPoints.delete(t),2>this.cachedPoints.size&&(this.cachedPoints.clear(),this.previousScale=0)}getTouchPoint(t){return this.startWorkspace_?new mg(t.pageX,t.pageY):null}isMultiTouch(){return this.isMultiTouch_}cancel(){this.isEnding_||(F(),this.dragger?this.dragger.onDragEnd(this.mostRecentEvent,this.currentDragDeltaXY):this.workspaceDragger&&this.workspaceDragger.endDrag(this.currentDragDeltaXY),this.dispose())}handleRightClick(t){this.targetBlock?(this.bringBlockToFront(),this.targetBlock.workspace.hideChaff(!!this.flyout),this.targetBlock.showContextMenu(t)):this.startBubble?this.startBubble.showContextMenu(t):this.startComment?(this.startComment.workspace.hideChaff(),this.startComment.showContextMenu(t)):this.startWorkspace_&&!this.flyout&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()}handleWsStart(t,e){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace(e),this.mostRecentEvent=t,this.startBlock||this.startBubble||this.startComment||Hs.setSelected$$module$build$src$core$common(null),this.doStart(t)}fireWorkspaceClick(t){d(new(y(na))(null,t.id,"workspace"))}handleFlyoutStart(t,e){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout(e),this.handleWsStart(t,e.getWorkspace())}handleBlockStart(t,e){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(e),this.mostRecentEvent=t}handleBubbleStart(t,e){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(e),this.mostRecentEvent=t}handleCommentStart(t,e){if(this.gestureHasStarted)throw Error("Tried to call gesture.handleCommentStart, but the gesture had already been started.");this.setStartComment(e),this.mostRecentEvent=t}doFieldClick(){if(!this.startField)throw Error("Cannot do a field click because the start field is undefined");this.currentDropdownOwner!==this.startField&&this.startField.showEditor(this.mostRecentEvent),this.bringBlockToFront()}doIconClick(){if(!this.startIcon)throw Error("Cannot do an icon click because the start icon is undefined");this.bringBlockToFront(),this.startIcon.onClick()}doBlockClick(){if(this.flyout&&this.flyout.autoClose){if(!this.targetBlock)throw Error("Cannot do a block click because the target block is undefined");if(this.targetBlock.isEnabled()){Hs.getGroup$$module$build$src$core$events$utils()||Hs.setGroup$$module$build$src$core$events$utils(!0);var t=this.flyout.createBlock(this.targetBlock);t.snapToGrid(),t.bumpNeighbours()}}else{if(!this.startWorkspace_)throw Error("Cannot do a block click because the start workspace is undefined");t=new(y(na))(this.startBlock,this.startWorkspace_.id,"block"),d(t)}this.bringBlockToFront(),Hs.setGroup$$module$build$src$core$events$utils(!1)}doWorkspaceClick(t){t=this.creatorWorkspace,R()&&R().unselect(),this.fireWorkspaceClick(this.startWorkspace_||t)}bringBlockToFront(){this.targetBlock&&!this.flyout&&this.targetBlock.bringToFront()}setStartField(t){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField||(this.startField=t)}setStartIcon(t){if(this.gestureHasStarted)throw Error("Tried to call gesture.setStartIcon, but the gesture had already been started.");this.startIcon||(this.startIcon=t)}setStartBubble(t){this.startBubble||(this.startBubble=t)}setStartComment(t){this.startComment||(this.startComment=t)}setStartBlock(t){this.startBlock||this.startBubble||(this.startBlock=t,Hs.setSelected$$module$build$src$core$common(this.startBlock),t.isInFlyout&&t!==t.getRootBlock()?this.setTargetBlock(t.getRootBlock()):this.setTargetBlock(t))}setTargetBlock(t){t.isShadow()?this.setTargetBlock(t.getParent()):this.targetBlock=t}setStartWorkspace(t){this.startWorkspace_||(this.startWorkspace_=t)}setStartFlyout(t){this.flyout||(this.flyout=t)}isBubbleClick(){return!!this.startBubble&&!this.hasExceededDragRadius}isCommentClick(){return!!this.startComment&&!this.hasExceededDragRadius}isBlockClick(){return!(!this.startBlock||this.hasExceededDragRadius||this.isFieldClick()||this.isIconClick())}isFieldClick(){return!!this.startField&&this.startField.isClickable()&&!this.hasExceededDragRadius&&(!this.flyout||this.startField.isClickableInFlyout(this.flyout.autoClose))}isIconClick(){if(!this.startIcon)return!1;const t=!this.flyout||!this.startIcon.isClickableInFlyout||this.startIcon.isClickableInFlyout(this.flyout.autoClose);return!this.hasExceededDragRadius&&t}isWorkspaceClick(){return!(this.startBlock||this.startBubble||this.startField||this.hasExceededDragRadius)}getCurrentDragger(){let t,e;return null!=(e=null!=(t=this.workspaceDragger)?t:this.dragger)?e:null}isDragging(){return this.dragging}hasStarted(){return this.gestureHasStarted}static inProgress(){const t=E();for(let e,i=0;e=t[i];i++)if(e.currentGesture_)return!0;return!1}},Tc=class{constructor(t,e){let i,o,n;this.pattern=t,this.scale=1,this.spacing=null!=(i=e.spacing)?i:0,this.length=null!=(o=e.length)?o:1,this.line2=(this.line1=t.firstChild)&&this.line1.nextSibling,this.snapToGrid=null!=(n=e.snap)&&n}setSpacing(t){this.spacing=t,this.update(this.scale)}getSpacing(){return this.spacing}setLength(t){this.length=t,this.update(this.scale)}getLength(){return this.length}setSnapToGrid(t){this.snapToGrid=t}shouldSnap(){return this.snapToGrid}getPatternId(){return this.pattern.id}update(t){this.scale=t;var e=this.spacing*t;this.pattern.setAttribute("width",`${e}`),this.pattern.setAttribute("height",`${e}`);let i=(e=Math.floor(this.spacing/2)+.5)-this.length/2,o=e+this.length/2;e*=t,i*=t,o*=t,this.setLineAttributes(this.line1,t,i,o,e,e),this.setLineAttributes(this.line2,t,e,e,i,o)}setLineAttributes(t,e,i,o,n,r){t&&(t.setAttribute("stroke-width",`${e}`),t.setAttribute("x1",`${i}`),t.setAttribute("y1",`${n}`),t.setAttribute("x2",`${o}`),t.setAttribute("y2",`${r}`))}moveTo(t,e){this.pattern.setAttribute("x",`${t}`),this.pattern.setAttribute("y",`${e}`)}alignXY(t){var e=this.getSpacing();const i=e/2,o=Math.round(Math.round((t.x-i)/e)*e+i);return e=Math.round(Math.round((t.y-i)/e)*e+i),o===t.x&&e===t.y?t:new mg(o,e)}static createDom(t,e,i){let o,n;if(t=tt(Og.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},i),0<(null!=(o=e.length)?o:1)&&0<(null!=(n=e.spacing)?n:0)){let i;tt(Og.LINE,{stroke:e.colour},t),null!=(i=e.length)&&i&&tt(Og.LINE,{stroke:e.colour},t)}else tt(Og.LINE,{},t);return t}},Ec={};Ec.deepMerge=Tn;var wc=class{constructor(e,i,o,n){this.name=e,this.startHats=!1,this.blockStyles=i||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=n||Object.create(null),this.fontStyle=Object.create(null),t(js.THEME,e,this,!0)}getClassName(){return this.name+"-theme"}setBlockStyle(t,e){this.blockStyles[t]=e}setCategoryStyle(t,e){this.categoryStyles[t]=e}getComponentStyle(t){if(!(t=this.componentStyles[t]))return null;if("string"==typeof t){const e=this.getComponentStyle(t);if(e)return e}return`${t}`}setComponentStyle(t,e){this.componentStyles[t]=e}setFontStyle(t){this.fontStyle=t}setStartHats(t){this.startHats=t}static defineTheme(t,e){t=t.toLowerCase();const i=new wc(t);let o=e.base;if(o){if("string"==typeof o){let t;o=null!=(t=a(js.THEME,o))?t:void 0}o instanceof wc&&(Tn(i,o),i.name=t)}return Tn(i.blockStyles,e.blockStyles),Tn(i.categoryStyles,e.categoryStyles),Tn(i.componentStyles,e.componentStyles),Tn(i.fontStyle,e.fontStyle),null!==e.startHats&&(i.startHats=e.startHats),i}},kc=new wc("classic",{colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},{colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}}),Oc=class{constructor(t){this.gridPattern=null,this.getMetrics=this.setMetrics=void 0;let e=null,i=!1;var o=!1,n=!1,r=!1,s=!1,a=!1;const g=!!t.readOnly;var l;g||(e=Dt(null!=(l=t.toolbox)?l:null),i=Lt(e),o=void 0===(o=t.trashcan)?i:o,n=void 0===(n=t.collapse)?i:n,r=void 0===(r=t.comments)?i:r,s=void 0===(s=t.disable)?i:s,a=void 0===(a=t.sounds)||a),l=t.maxTrashcanContents,o?void 0===l&&(l=32):l=0;const h=!!t.rtl;let c=t.horizontalLayout;void 0===c&&(c=!1);var u="end"!==t.toolboxPosition;u=c?u?Wg.TOP:Wg.BOTTOM:u===h?Wg.RIGHT:Wg.LEFT;let d=t.css;void 0===d&&(d=!0);let A="https://blockly-demo.appspot.com/static/media/";t.media&&(A=t.media.endsWith("/")?t.media:t.media+"/");const I=t.oneBasedIndex,C=t.renderer||"geras",p=t.plugins||{};let f,v,m,b=t.modalInputs;void 0===b&&(b=!0),this.RTL=h,this.oneBasedIndex=void 0===I||I,this.collapse=n,this.comments=r,this.disable=s,this.readOnly=g,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=null!=(f=t.maxInstances)?f:null,this.modalInputs=b,this.pathToMedia=A,this.hasCategories=i,this.moveOptions=Oc.parseMoveOptions_(t,i),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=o,this.maxTrashcanContents=l,this.hasSounds=a,this.hasCss=d,this.horizontalLayout=c,this.languageTree=e,this.gridOptions=Oc.parseGridOptions_(t),this.zoomOptions=Oc.parseZoomOptions_(t),this.toolboxPosition=u,this.theme=Oc.parseThemeOptions_(t),this.renderer=C,this.rendererOverrides=null!=(v=t.rendererOverrides)?v:null,this.parentWorkspace=null!=(m=t.parentWorkspace)?m:null,this.plugins=p}static parseMoveOptions_(t,e){const i=t.move||{},o={};return void 0===i.scrollbars&&void 0===t.scrollbars?o.scrollbars=e:"object"==typeof i.scrollbars?(o.scrollbars={horizontal:!!i.scrollbars.horizontal,vertical:!!i.scrollbars.vertical},o.scrollbars.horizontal&&o.scrollbars.vertical?o.scrollbars=!0:o.scrollbars.horizontal||o.scrollbars.vertical||(o.scrollbars=!1)):o.scrollbars=!!i.scrollbars||!!t.scrollbars,o.wheel=o.scrollbars&&void 0!==i.wheel?!!i.wheel:"object"==typeof o.scrollbars,o.drag=!(!o.scrollbars||void 0!==i.drag&&!i.drag),o}static parseZoomOptions_(t){t=t.zoom||{};const e={};return e.controls=void 0!==t.controls&&!!t.controls,e.wheel=void 0!==t.wheel&&!!t.wheel,e.startScale=void 0===t.startScale?1:Number(t.startScale),e.maxScale=void 0===t.maxScale?3:Number(t.maxScale),e.minScale=void 0===t.minScale?.3:Number(t.minScale),e.scaleSpeed=void 0===t.scaleSpeed?1.2:Number(t.scaleSpeed),e.pinch=void 0===t.pinch?e.wheel||e.controls:!!t.pinch,e}static parseGridOptions_(t){t=t.grid||{};const e={};return e.spacing=Number(t.spacing)||0,e.colour=t.colour||"#888",e.length=void 0===t.length?1:Number(t.length),e.snap=0<e.spacing&&!!t.snap,e}static parseThemeOptions_(t){return"string"==typeof(t=t.theme||kc)?a(js.THEME,t):t instanceof wc?t:wc.defineTheme(t.name||"builtin"+h(),t)}};Hs.Names$$module$build$src$core$names=class{constructor(t,e){this.db=new Map,this.dbReverse=new Set,this.variableMap=null,this.variablePrefix=e||"",this.reservedWords=new Set(t?t.split(","):[])}reset(){this.db.clear(),this.dbReverse.clear(),this.variableMap=null}setVariableMap(t){this.variableMap=t}getNameForUserVariable(t){return this.variableMap?(t=this.variableMap.getVariableById(t))?t.name:null:(console.warn("Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:\nBlockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());"),null)}populateVariables(t){t=Hs.allUsedVarModels$$module$build$src$core$variables(t);for(let e=0;e<t.length;e++)this.getName(t[e].getId(),Hs.NameType$$module$build$src$core$names.VARIABLE)}populateProcedures(t){throw Error("The implementation of populateProcedures should be monkey-patched in by blockly.ts")}getName(t,e){let i=t;e===Hs.NameType$$module$build$src$core$names.VARIABLE&&(t=this.getNameForUserVariable(t))&&(i=t),t=i.toLowerCase();const o=e===Hs.NameType$$module$build$src$core$names.VARIABLE||e===Hs.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"";this.db.has(e)||this.db.set(e,new Map);const n=this.db.get(e);return n.has(t)?o+n.get(t):(e=this.getDistinctName(i,e),n.set(t,e.substr(o.length)),e)}getUserNames(t){let e;return(t=null==(e=this.db.get(t))?void 0:e.keys())?Array.from(t):[]}getDistinctName(t,e){t=this.safeName(t);let i,o,n,r=null;for(;this.dbReverse.has(t+(null!=(i=r)?i:""))||this.reservedWords.has(t+(null!=(o=r)?o:""));)r=r?r+1:2;return t+=null!=(n=r)?n:"",this.dbReverse.add(t),(e===Hs.NameType$$module$build$src$core$names.VARIABLE||e===Hs.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE?this.variablePrefix:"")+t}safeName(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".includes(t[0])&&(t="my_"+t)):t=Hs.Msg$$module$build$src$core$msg.UNNAMED_KEY||"unnamed",t}static equals(t,e){return t.toLowerCase()===e.toLowerCase()}},function(t){(t=t.NameType||(t.NameType={})).DEVELOPER_VARIABLE="DEVELOPER_VARIABLE",t.VARIABLE="VARIABLE",t.PROCEDURE="PROCEDURE"}(Hs.Names$$module$build$src$core$names||(Hs.Names$$module$build$src$core$names={})),Hs.NameType$$module$build$src$core$names=Hs.Names$$module$build$src$core$names.NameType,Hs.Names$$module$build$src$core$names.DEVELOPER_VARIABLE_TYPE=Hs.NameType$$module$build$src$core$names.DEVELOPER_VARIABLE,{NameType:Hs.NameType$$module$build$src$core$names}.Names=Hs.Names$$module$build$src$core$names;var Sc=class extends Map{constructor(){super()}set(t,e){return this.get(t)===e||(super.set(t,e),wn(e)&&e.startPublishing()),this}delete(t){const e=this.get(t);return(t=super.delete(t))?(wn(e)&&e.stopPublishing(),t):t}clear(){if(this.size)for(const t of this.keys())this.delete(t)}add(t){return this.set(t.getId(),t)}getProcedures(){return[...this.values()]}},Rc=class{constructor(t){this.sourceBlock=t,this.offsetInBlock=new mg(0,0),this.workspaceLocation=new mg(0,0),this.svgRoot=null,this.tooltip=t}getType(){throw Error("Icons must implement getType")}initView(t){if(!this.svgRoot){var e=this.sourceBlock;this.svgRoot=tt(Og.G,{class:"blocklyIconGroup"}),e.getSvgRoot().appendChild(this.svgRoot),this.updateSvgRootOffset(),V(this.svgRoot,"pointerdown",this,t),this.svgRoot.tooltip=this,Wi(this.svgRoot)}}dispose(){ji(this.svgRoot),rt(this.svgRoot)}getWeight(){return-1}getSize(){return new Rg(0,0)}setTooltip(t){this.tooltip=null!=t?t:this.sourceBlock}getTooltip(){return this.tooltip}applyColour(){}updateEditable(){}updateCollapsed(){this.svgRoot&&(this.sourceBlock.isCollapsed()?this.svgRoot.style.display="none":this.svgRoot.style.display="block",ri(this)&&this.setBubbleVisible(!1))}hideForInsertionMarker(){this.svgRoot&&(this.svgRoot.style.display="none")}isShownWhenCollapsed(){return!1}setOffsetInBlock(t){this.offsetInBlock=t,this.updateSvgRootOffset()}updateSvgRootOffset(){let t;null==(t=this.svgRoot)||t.setAttribute("transform",`translate(${this.offsetInBlock.x}, ${this.offsetInBlock.y})`)}onLocationChange(t){this.workspaceLocation=mg.sum(t,this.offsetInBlock)}onClick(){}isClickableInFlyout(t){return!0}},xc={fromJsonInternal:Sn},Dc={TEST_ONLY:xc};Dc.fromJson=Hs.fromJson$$module$build$src$core$field_registry,Dc.register=kn,Dc.unregister=On;var Mc=class extends Yh{constructor(t,e,i){super(Yh.SKIP_SETUP),this.svgArrow=this.arrow=this.imageElement=this.menu_=this.selectedMenuItem=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.clickTarget_=this.suffixField=this.prefixField=this.generatedOptions=null,t!==Yh.SKIP_SETUP&&(Array.isArray(t)?(Dn(t),t=Rn(t),this.menuGenerator_=t.options,this.prefixField=t.prefix||null,this.suffixField=t.suffix||null):this.menuGenerator_=t,this.selectedOption=this.getOptions(!1)[0],i&&this.configure_(i),this.setValue(this.selectedOption[1]),e&&this.setValidator(e))}fromXml(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)}loadState(t){this.loadLegacyState(Mc,t)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t))}initView(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement=tt(Og.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&et(this.borderRect_,"blocklyDropdownRect")}shouldAddBorderRect_(){let t;return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!(null!=(t=this.getSourceBlock())&&t.isShadow())}createTextArrow_(){let t,e;this.arrow=tt(Og.TSPAN,{},this.textElement_),this.arrow.appendChild(document.createTextNode(null!=(t=this.getSourceBlock())&&t.RTL?Mc.ARROW_CHAR+" ":" "+Mc.ARROW_CHAR)),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.arrow.setAttribute("dominant-baseline","central"),null!=(e=this.getSourceBlock())&&e.RTL?this.getTextElement().insertBefore(this.arrow,this.textContent_):this.getTextElement().appendChild(this.arrow)}createSVGArrow_(){this.svgArrow=tt(Og.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow.setAttributeNS(_g,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)}showEditor_(t){var e=this.getSourceBlock();if(!e)throw new Xh;this.dropdownCreate(),this.menu_.openingCoords=t&&"number"==typeof t.clientX?new mg(t.clientX,t.clientY):null,di(),t=this.menu_.render(ui()),et(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV&&(e=e.getColour(),Ai(e,this.sourceBlock_.style.colourTertiary)),Ci(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem&&(this.menu_.setHighlighted(this.selectedMenuItem),bt(this.selectedMenuItem.getElement(),ui(),!0)),this.applyColour()}dropdownCreate(){const t=this.getSourceBlock();if(!t)throw new Xh;const e=new jl;e.setRole(Hl.LISTBOX),this.menu_=e;const i=this.getOptions(!1);this.selectedMenuItem=null;for(let n=0;n<i.length;n++){const[r,s]=i[n];if("object"==typeof r){var o=new Image(r.width,r.height);o.src=r.src,o.alt=r.alt||""}else o=r;(o=new Yl(o,s)).setRole(Hl.OPTION),o.setRightToLeft(t.RTL),o.setCheckable(!0),e.addChild(o),o.setChecked(s===this.value_),s===this.value_&&(this.selectedMenuItem=o),o.onAction(this.handleMenuActionEvent,this)}}dropdownDispose_(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem=this.menu_=null,this.applyColour()}handleMenuActionEvent(t){wi(this,!0),this.onItemSelected_(this.menu_,t)}onItemSelected_(t,e){this.setValue(e.getValue())}isOptionListDynamic(){return"function"==typeof this.menuGenerator_}getOptions(t){if(!this.menuGenerator_)throw TypeError("A menu generator was never defined.");return Array.isArray(this.menuGenerator_)?this.menuGenerator_:(t&&this.generatedOptions||(this.generatedOptions=this.menuGenerator_(),Dn(this.generatedOptions)),this.generatedOptions)}doClassValidation_(t){return this.getOptions(!0).some((e=>e[1]===t))?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)}doValueUpdate_(t){super.doValueUpdate_(t),t=this.getOptions(!0);for(let e,i=0;e=t[i];i++)e[1]===this.value_&&(this.selectedOption=e)}applyColour(){const t=this.sourceBlock_.style;this.borderRect_&&(this.borderRect_.setAttribute("stroke",t.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",t.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow&&(this.sourceBlock_.isShadow()?this.arrow.style.fill=t.colourSecondary:this.arrow.style.fill=t.colourPrimary)}render_(){this.getTextContent().nodeValue="",this.imageElement.style.display="none";const t=this.selectedOption&&this.selectedOption[0];t&&"object"==typeof t?this.renderSelectedImage(t):this.renderSelectedText(),this.positionBorderRect_()}renderSelectedImage(t){const e=this.getSourceBlock();if(!e)throw new Xh;this.imageElement.style.display="",this.imageElement.setAttributeNS(_g,"xlink:href",t.src),this.imageElement.setAttribute("height",String(t.height)),this.imageElement.setAttribute("width",String(t.width));const i=Number(t.height);t=Number(t.width);var o=!!this.borderRect_;const n=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,i+Nc);let r;o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,r=this.svgArrow?this.positionSVGArrow(t+o,n/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):ct(this.arrow,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY),this.size_.width=t+r+2*o,this.size_.height=n;let s=0;e.RTL?this.imageElement.setAttribute("x",`${o+r}`):(s=t+r,this.getTextElement().setAttribute("text-anchor","end"),this.imageElement.setAttribute("x",`${o}`)),this.imageElement.setAttribute("y",String(n/2-i/2)),this.positionTextElement_(s+o,t+r)}renderSelectedText(){this.getTextContent().nodeValue=this.getDisplayText_();var t=this.getTextElement();et(t,"blocklyDropdownText"),t.setAttribute("text-anchor","start");var e=!!this.borderRect_;t=Math.max(e?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT);const i=ct(this.getTextElement(),this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);e=e?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;let o=0;this.svgArrow&&(o=this.positionSVGArrow(i+e,t/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=i+o+2*e,this.size_.height=t,this.positionTextElement_(e,i)}positionSVGArrow(t,e){if(!this.svgArrow)return 0;const i=this.getSourceBlock();if(!i)throw new Xh;const o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,n=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,r=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow.setAttribute("transform","translate("+(i.RTL?o:t+n)+","+e+")"),r+n}getText_(){if(!this.selectedOption)return null;const t=this.selectedOption[0];return"object"==typeof t?t.alt:t}static fromJson(t){if(!t.options)throw Error("options are required for the dropdown field. The options property must be assigned an array of [humanReadableValue, languageNeutralValue] tuples.");return new this(t.options,void 0,t)}};Mc.CHECKMARK_OVERHANG=25,Mc.MAX_MENU_HEIGHT_VH=.45,Mc.ARROW_CHAR="â¾";var Nc=10;kn("field_dropdown",Mc);var Lc,Pc=class{constructor(t,e){this.bubble=t,this.workspace=e,this.startLoc=null}isMovable(){return!0}startDrag(){let t;Hs.getGroup$$module$build$src$core$events$utils()||Hs.setGroup$$module$build$src$core$events$utils(!0),this.startLoc=this.bubble.getRelativeToSurfaceXY(),this.workspace.setResizesEnabled(!1),null==(t=this.workspace.getLayerManager())||t.moveToDragLayer(this.bubble),this.bubble.setDragging&&this.bubble.setDragging(!0)}drag(t){this.bubble.moveDuringDrag(t)}endDrag(){let t;this.workspace.setResizesEnabled(!0),Hs.setGroup$$module$build$src$core$events$utils(!1),null==(t=this.workspace.getLayerManager())||t.moveOffDragLayer(this.bubble,100),this.bubble.setDragging(!1)}revertDrag(){this.startLoc&&this.bubble.moveDuringDrag(this.startLoc)}},$c=class{constructor(t,e,i){this.workspace=t,this.anchor=e,this.ownerRect=i,this.size=new Rg(0,0),this.colour="#ffffff",this.disposed=!1,this.relativeLeft=this.relativeTop=0,this.dragStrategy=new Pc(this,this.workspace),this.id=h(),this.svgRoot=tt(Og.G,{class:"blocklyBubble"},t.getBubbleCanvas()),t=tt(Og.G,{filter:`url(#${this.workspace.getRenderer().getConstants().embossFilterId})`},this.svgRoot),this.tail=tt(Og.PATH,{class:"blocklyBubbleTail"},t),this.background=tt(Og.RECT,{class:"blocklyDraggable",x:0,y:0,rx:Lc.BORDER_WIDTH,ry:Lc.BORDER_WIDTH},t),this.contentContainer=tt(Og.G,{},this.svgRoot),V(this.background,"pointerdown",this,this.onMouseDown)}dispose(){rt(this.svgRoot),this.disposed=!0}setAnchorLocation(t,e=!1){this.anchor=t,e?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}setPositionRelativeToAnchor(t,e){this.relativeLeft=t,this.relativeTop=e,this.positionRelativeToAnchor(),this.renderTail()}getSize(){return this.size}setSize(t,e=!1){t.width=Math.max(t.width,Lc.MIN_SIZE),t.height=Math.max(t.height,Lc.MIN_SIZE),this.size=t,this.background.setAttribute("width",`${t.width}`),this.background.setAttribute("height",`${t.height}`),e?this.positionByRect(this.ownerRect):this.positionRelativeToAnchor(),this.renderTail()}getColour(){return this.colour}setColour(t){this.colour=t,this.tail.setAttribute("fill",t),this.background.setAttribute("fill",t)}onMouseDown(t){let e;null==(e=this.workspace.getGesture(t))||e.handleBubbleStart(t,this),Hs.setSelected$$module$build$src$core$common(this)}positionRelativeToAnchor(){let t=this.anchor.x;t=this.workspace.RTL?t-(this.relativeLeft+this.size.width):t+this.relativeLeft,this.moveTo(t,this.relativeTop+this.anchor.y)}moveTo(t,e){this.svgRoot.setAttribute("transform",`translate(${t}, ${e})`)}positionByRect(t=new Sg(0,0,0,0)){var e=this.workspace.getMetricsManager().getViewMetrics(!0),i=this.getOptimalRelativeLeft(e),o=this.getOptimalRelativeTop(e);const n={x:i,y:-this.size.height-this.workspace.getRenderer().getConstants().MIN_BLOCK_HEIGHT},r={x:-this.size.width-30,y:o};o={x:t.getWidth(),y:o};var s={x:i,y:t.getHeight()};i=t.getWidth()<t.getHeight()?o:s,t=t.getWidth()<t.getHeight()?s:o,o=this.getOverlap(n,e),s=this.getOverlap(r,e);const a=this.getOverlap(i,e);e=this.getOverlap(t,e),o===(e=Math.max(o,s,a,e))?(this.relativeLeft=n.x,this.relativeTop=n.y):s===e?(this.relativeLeft=r.x,this.relativeTop=r.y):a===e?(this.relativeLeft=i.x,this.relativeTop=i.y):(this.relativeLeft=t.x,this.relativeTop=t.y),this.positionRelativeToAnchor()}getOverlap(t,e){var i=this.workspace.RTL?this.anchor.x-t.x-this.size.width:t.x+this.anchor.x;return t=t.y+this.anchor.y,Math.max(0,Math.min(1,(Math.min(i+this.size.width,e.left+e.width)-Math.max(i,e.left))*(Math.min(t+this.size.height,e.top+e.height)-Math.max(t,e.top))/(this.size.width*this.size.height)))}getOptimalRelativeLeft(t){let e=-this.size.width/4;if(this.size.width>t.width)return e;if(t=this.getWorkspaceViewRect(t),this.workspace.RTL){var i=this.anchor.x-e;i-this.size.width<t.left?e=-(t.left-this.anchor.x+this.size.width):i>t.right&&(e=-(t.right-this.anchor.x))}else{const o=(i=e+this.anchor.x)+this.size.width;i<t.left?e=t.left-this.anchor.x:o>t.right&&(e=t.right-this.anchor.x-this.size.width)}return e}getOptimalRelativeTop(t){let e=-this.size.height/4;if(this.size.height>t.height)return e;const i=this.anchor.y+e,o=i+this.size.height;return i<(t=this.getWorkspaceViewRect(t)).top?e=t.top-this.anchor.y:o>t.bottom&&(e=t.bottom-this.anchor.y-this.size.height),e}getWorkspaceViewRect(t){const e=t.top;let i=t.top+t.height,o=t.left;return t=t.left+t.width,i-=this.getScrollbarThickness(),this.workspace.RTL?o-=this.getScrollbarThickness():t-=this.getScrollbarThickness(),new Sg(e,i,o,t)}getScrollbarThickness(){return Pg.scrollbarThickness/this.workspace.scale}renderTail(){const t=[];var e=this.size.width/2,i=this.size.height/2,o=-this.relativeLeft,n=-this.relativeTop;if(e===o&&i===n)t.push("M "+e+","+i);else{n-=i,o-=e,this.workspace.RTL&&(o*=-1);var r=Math.sqrt(n*n+o*o),s=Math.acos(o/r);0>n&&(s=2*Math.PI-s);var a=s+Math.PI/2;a>2*Math.PI&&(a-=2*Math.PI);var g=Math.sin(a);const l=Math.cos(a);let h=(this.size.width+this.size.height)/Lc.TAIL_THICKNESS;h=Math.min(h,this.size.width,this.size.height)/4,o=e+(a=1-Lc.ANCHOR_RADIUS/r)*o,n=i+a*n,a=e+h*l;const c=i+h*g;e-=h*l,i-=h*g,(g=s+(g=si(this.workspace.RTL?-Lc.TAIL_ANGLE:Lc.TAIL_ANGLE)))>2*Math.PI&&(g-=2*Math.PI),s=Math.sin(g)*r/Lc.TAIL_BEND,r=Math.cos(g)*r/Lc.TAIL_BEND,t.push("M"+a+","+c),t.push("C"+(a+r)+","+(c+s)+" "+o+","+n+" "+o+","+n),t.push("C"+o+","+n+" "+(e+r)+","+(i+s)+" "+e+","+i)}let l;t.push("z"),null==(l=this.tail)||l.setAttribute("d",t.join(" "))}bringToFront(){let t;const e=null==(t=this.svgRoot)?void 0:t.parentNode;return!(!this.svgRoot||(null==e?void 0:e.lastChild)===this.svgRoot||(null==e||e.appendChild(this.svgRoot),0))}getRelativeToSurfaceXY(){return new mg(this.workspace.RTL?-this.relativeLeft+this.anchor.x-this.size.width:this.anchor.x+this.relativeLeft,this.anchor.y+this.relativeTop)}getSvgRoot(){return this.svgRoot}moveDuringDrag(t){this.moveTo(t.x,t.y),this.relativeLeft=this.workspace.RTL?this.anchor.x-t.x-this.size.width:t.x-this.anchor.x,this.relativeTop=t.y-this.anchor.y,this.renderTail()}setDragging(t){}setDeleteStyle(t){}isDeletable(){return!1}showContextMenu(t){}isMovable(){return!0}startDrag(){this.dragStrategy.startDrag()}drag(t){this.dragStrategy.drag(t)}endDrag(){this.dragStrategy.endDrag()}revertDrag(){this.dragStrategy.revertDrag()}select(){}unselect(){}};Lc=$c,$c.BORDER_WIDTH=6,$c.DOUBLE_BORDER=2*Lc.BORDER_WIDTH,$c.MIN_SIZE=Lc.DOUBLE_BORDER,$c.TAIL_THICKNESS=1,$c.TAIL_ANGLE=20,$c.TAIL_BEND=4,$c.ANCHOR_RADIUS=8;var Bc=class extends $c{constructor(t,e,i,o){let n,r;super(e,i,o),this.workspace=e,this.anchor=i,this.ownerRect=o,this.autoLayout=!0,e=new Oc(t),this.validateWorkspaceOptions(e),this.svgDialog=tt(Og.SVG,{x:$c.BORDER_WIDTH,y:$c.BORDER_WIDTH},this.contentContainer),t.parentWorkspace=this.workspace,this.miniWorkspace=this.newWorkspaceSvg(new Oc(t)),this.miniWorkspace.internalIsMutator=!0,t=this.miniWorkspace.createDom("blocklyMutatorBackground"),this.svgDialog.appendChild(t),e.languageTree&&(t.insertBefore(this.miniWorkspace.addFlyout(Og.G),this.miniWorkspace.getCanvas()),null==(t=this.miniWorkspace.getFlyout())||t.init(this.miniWorkspace),null==t||t.show(e.languageTree)),this.miniWorkspace.addChangeListener(this.onWorkspaceChange.bind(this)),null==(n=this.miniWorkspace.getFlyout())||null==(r=n.getWorkspace())||r.addChangeListener(this.onWorkspaceChange.bind(this)),this.updateBubbleSize()}dispose(){this.miniWorkspace.dispose(),super.dispose()}getWorkspace(){return this.miniWorkspace}addWorkspaceChangeListener(t){this.miniWorkspace.addChangeListener(t)}validateWorkspaceOptions(t){if(t.hasCategories)throw Error("The miniworkspace bubble does not support toolboxes with categories");if(t.hasTrashcan)throw Error("The miniworkspace bubble does not support trashcans");if(t.zoomOptions.controls||t.zoomOptions.wheel||t.zoomOptions.pinch)throw Error("The miniworkspace bubble does not support zooming");if(t.moveOptions.scrollbars||t.moveOptions.wheel||t.moveOptions.drag)throw Error("The miniworkspace bubble does not scrolling/moving the workspace");if(t.horizontalLayout)throw Error("The miniworkspace bubble does not support horizontal layouts")}onWorkspaceChange(){this.bumpBlocksIntoBounds(),this.updateBubbleSize()}bumpBlocksIntoBounds(){if(!this.miniWorkspace.isDragging())for(const t of this.miniWorkspace.getTopBlocks(!1)){const e=t.getRelativeToSurfaceXY();if(20>e.y&&t.moveBy(0,20-e.y),t.RTL){let i=-20;const o=this.miniWorkspace.getFlyout();o&&(i-=o.getWidth()),e.x>i&&t.moveBy(i-e.x,0)}else 20>e.x&&t.moveBy(20-e.x,0)}}updateBubbleSize(){if(!this.miniWorkspace.isDragging()){var t=this.getSize(),e=this.calculateWorkspaceSize();Math.abs(t.width-e.width)<Bc.MINIMUM_VIEW_CHANGE&&Math.abs(t.height-e.height)<Bc.MINIMUM_VIEW_CHANGE||(this.svgDialog.setAttribute("width",`${e.width}px`),this.svgDialog.setAttribute("height",`${e.height}px`),this.miniWorkspace.setCachedParentSvgSize(e.width,e.height),this.miniWorkspace.RTL&&this.miniWorkspace.getCanvas().setAttribute("transform",`translate(${e.width}, 0)`),this.setSize(new Rg(e.width+$c.DOUBLE_BORDER,e.height+$c.DOUBLE_BORDER),this.autoLayout),this.miniWorkspace.resize(),this.miniWorkspace.recordDragTargets())}}calculateWorkspaceSize(){var t=this.miniWorkspace.getCanvas().getBBox();let e=t.width+Bc.MARGIN;t=t.height+Bc.MARGIN;const i=this.miniWorkspace.getFlyout();if(i){const o=i.getWorkspace().getMetricsManager().getScrollMetrics();t=Math.max(t,o.height+20),e+=i.getWidth()}return new Rg(e,t)}updateBlockStyles(){for(var t of this.miniWorkspace.getAllBlocks(!1))t.setStyle(t.getStyleName());let e;if(t=null==(e=this.miniWorkspace.getFlyout())?void 0:e.getWorkspace())for(const e of t.getAllBlocks(!1))e.setStyle(e.getStyleName())}moveDuringDrag(t){super.moveDuringDrag(t),this.autoLayout=!1}moveTo(t,e){super.moveTo(t,e),this.miniWorkspace.recordDragTargets()}newWorkspaceSvg(t){throw Error("The implementation of newWorkspaceSvg should be monkey-patched in by blockly.ts")}};Bc.MINIMUM_VIEW_CHANGE=10,Bc.MARGIN=3*$c.DOUBLE_BORDER,Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon=class extends Rc{constructor(t,e){super(e),this.flyoutBlockTypes=t,this.sourceBlock=e,this.saveConnectionsListener=this.updateWorkspacePid=this.rootBlock=this.miniWorkspaceBubble=null}getType(){return Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE}initView(t){this.svgRoot||(super.initView(t),tt(Og.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},this.svgRoot),tt(Og.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},this.svgRoot),tt(Og.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},this.svgRoot),et(this.svgRoot,"blockly-icon-mutator"))}dispose(){let t;super.dispose(),null==(t=this.miniWorkspaceBubble)||t.dispose()}getWeight(){return Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT}getSize(){return new Rg(17,17)}applyColour(){let t,e;super.applyColour(),null==(t=this.miniWorkspaceBubble)||t.setColour(this.sourceBlock.style.colourPrimary),null==(e=this.miniWorkspaceBubble)||e.updateBlockStyles()}updateCollapsed(){super.updateCollapsed(),this.sourceBlock.isCollapsed()&&this.setBubbleVisible(!1)}onLocationChange(t){let e;super.onLocationChange(t),null==(e=this.miniWorkspaceBubble)||e.setAnchorLocation(this.getAnchorLocation())}onClick(){super.onClick(),this.sourceBlock.isEditable()&&this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.miniWorkspaceBubble}setBubbleVisible(t){const e=this;return zs.asyncExecutePromiseGeneratorFunction((function*(){if(e.bubbleIsVisible()!==t){if(yield pe(),t){let t;e.miniWorkspaceBubble=new Bc(e.getMiniWorkspaceConfig(),e.sourceBlock.workspace,e.getAnchorLocation(),e.getBubbleOwnerRect()),e.applyColour(),e.createRootBlock(),e.addSaveConnectionsListener(),null==(t=e.miniWorkspaceBubble)||t.addWorkspaceChangeListener(e.createMiniWorkspaceChangeListener())}else{let t;null==(t=e.miniWorkspaceBubble)||t.dispose(),e.miniWorkspaceBubble=null,e.saveConnectionsListener&&e.sourceBlock.workspace.removeChangeListener(e.saveConnectionsListener),e.saveConnectionsListener=null}d(new(y(sa))(e.sourceBlock,t,"mutator"))}}))}getMiniWorkspaceConfig(){let t;const e={disable:!1,media:this.sourceBlock.workspace.options.pathToMedia,rtl:this.sourceBlock.RTL,renderer:this.sourceBlock.workspace.options.renderer,rendererOverrides:null!=(t=this.sourceBlock.workspace.options.rendererOverrides)?t:void 0};return this.flyoutBlockTypes.length&&(e.toolbox={kind:"flyoutToolbox",contents:this.flyoutBlockTypes.map((t=>({kind:"block",type:t})))}),e}getAnchorLocation(){return mg.sum(this.workspaceLocation,new mg(8.5,8.5))}getBubbleOwnerRect(){const t=this.sourceBlock.getSvgRoot().getBBox();return new Sg(t.y,t.y+t.height,t.x,t.x+t.width)}createRootBlock(){if(!this.sourceBlock.decompose)throw Error("Blocks with mutator icons must include a decompose method");for(var t of(this.rootBlock=this.sourceBlock.decompose(this.miniWorkspaceBubble.getWorkspace()),this.rootBlock.getDescendants(!1)))t.queueRender();let e,i,o,n;this.rootBlock.setMovable(!1),this.rootBlock.setDeletable(!1),t=null!=(n=null==(e=this.miniWorkspaceBubble)||null==(i=e.getWorkspace())||null==(o=i.getFlyout())?void 0:o.getWidth())?n:0,this.rootBlock.moveBy(this.rootBlock.RTL?-(t+16):16,16)}addSaveConnectionsListener(){this.sourceBlock.saveConnections&&this.rootBlock&&(this.saveConnectionsListener=()=>{this.sourceBlock.saveConnections&&this.rootBlock&&this.sourceBlock.saveConnections(this.rootBlock)},this.saveConnectionsListener(),this.sourceBlock.workspace.addChangeListener(this.saveConnectionsListener))}createMiniWorkspaceChangeListener(){return t=>{Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon.isIgnorableMutatorEvent(t)||this.updateWorkspacePid||(this.updateWorkspacePid=setTimeout((()=>{this.updateWorkspacePid=null,this.recomposeSourceBlock()}),0))}}static isIgnorableMutatorEvent(t){return t.isUiEvent||t.type===Hs.CREATE$$module$build$src$core$events$utils||t.type===Hs.CHANGE$$module$build$src$core$events$utils&&"disabled"===t.element}recomposeSourceBlock(){if(this.rootBlock){if(!this.sourceBlock.compose)throw Error("Blocks with mutator icons must include a compose method");var t=Hs.getGroup$$module$build$src$core$events$utils();t||Hs.setGroup$$module$build$src$core$events$utils(!0);var e=nh.getExtraBlockState_(this.sourceBlock);this.sourceBlock.compose(this.rootBlock);var i=nh.getExtraBlockState_(this.sourceBlock);e!==i&&d(new(y(Hs.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"mutation",null,e,i)),Hs.setGroup$$module$build$src$core$events$utils(t)}}getWorkspace(){let t;return null==(t=this.miniWorkspaceBubble)?void 0:t.getWorkspace()}},Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE=gl.MUTATOR,Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon.WEIGHT=1,Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon;var Fc=Object.create(null),zc={allExtensions:Fc};Hs.register$$module$build$src$core$extensions("parent_tooltip_when_inline",jn);var Hc={TEST_ONLY:zc};Hc.apply=Ln,Hc.buildTooltipForDropdown=Hs.buildTooltipForDropdown$$module$build$src$core$extensions,Hc.buildTooltipWithFieldText=Hs.buildTooltipWithFieldText$$module$build$src$core$extensions,Hc.isRegistered=Nn,Hc.register=Hs.register$$module$build$src$core$extensions,Hc.registerMixin=Hs.registerMixin$$module$build$src$core$extensions,Hc.registerMutator=Hs.registerMutator$$module$build$src$core$extensions,Hc.runAfterPageLoad=Vn,Hc.unregister=Mn;var Gc,Uc=new Set,Vc={};Vc.warn=Yn,function(t){t[t.WIN_KEY_FF_LINUX=0]="WIN_KEY_FF_LINUX",t[t.MAC_ENTER=3]="MAC_ENTER",t[t.BACKSPACE=8]="BACKSPACE",t[t.TAB=9]="TAB",t[t.NUM_CENTER=12]="NUM_CENTER",t[t.ENTER=13]="ENTER",t[t.SHIFT=16]="SHIFT",t[t.CTRL=17]="CTRL",t[t.ALT=18]="ALT",t[t.PAUSE=19]="PAUSE",t[t.CAPS_LOCK=20]="CAPS_LOCK",t[t.ESC=27]="ESC",t[t.SPACE=32]="SPACE",t[t.PAGE_UP=33]="PAGE_UP",t[t.PAGE_DOWN=34]="PAGE_DOWN",t[t.END=35]="END",t[t.HOME=36]="HOME",t[t.LEFT=37]="LEFT",t[t.UP=38]="UP",t[t.RIGHT=39]="RIGHT",t[t.DOWN=40]="DOWN",t[t.PLUS_SIGN=43]="PLUS_SIGN",t[t.PRINT_SCREEN=44]="PRINT_SCREEN",t[t.INSERT=45]="INSERT",t[t.DELETE=46]="DELETE",t[t.ZERO=48]="ZERO",t[t.ONE=49]="ONE",t[t.TWO=50]="TWO",t[t.THREE=51]="THREE",t[t.FOUR=52]="FOUR",t[t.FIVE=53]="FIVE",t[t.SIX=54]="SIX",t[t.SEVEN=55]="SEVEN",t[t.EIGHT=56]="EIGHT",t[t.NINE=57]="NINE",t[t.FF_SEMICOLON=59]="FF_SEMICOLON",t[t.FF_EQUALS=61]="FF_EQUALS",t[t.FF_DASH=173]="FF_DASH",t[t.FF_HASH=163]="FF_HASH",t[t.QUESTION_MARK=63]="QUESTION_MARK",t[t.AT_SIGN=64]="AT_SIGN",t[t.A=65]="A",t[t.B=66]="B",t[t.C=67]="C",t[t.D=68]="D",t[t.E=69]="E",t[t.F=70]="F",t[t.G=71]="G",t[t.H=72]="H",t[t.I=73]="I",t[t.J=74]="J",t[t.K=75]="K",t[t.L=76]="L",t[t.M=77]="M",t[t.N=78]="N",t[t.O=79]="O",t[t.P=80]="P",t[t.Q=81]="Q",t[t.R=82]="R",t[t.S=83]="S",t[t.T=84]="T",t[t.U=85]="U",t[t.V=86]="V",t[t.W=87]="W",t[t.X=88]="X",t[t.Y=89]="Y",t[t.Z=90]="Z",t[t.META=91]="META",t[t.WIN_KEY_RIGHT=92]="WIN_KEY_RIGHT",t[t.CONTEXT_MENU=93]="CONTEXT_MENU",t[t.NUM_ZERO=96]="NUM_ZERO",t[t.NUM_ONE=97]="NUM_ONE",t[t.NUM_TWO=98]="NUM_TWO",t[t.NUM_THREE=99]="NUM_THREE",t[t.NUM_FOUR=100]="NUM_FOUR",t[t.NUM_FIVE=101]="NUM_FIVE",t[t.NUM_SIX=102]="NUM_SIX",t[t.NUM_SEVEN=103]="NUM_SEVEN",t[t.NUM_EIGHT=104]="NUM_EIGHT",t[t.NUM_NINE=105]="NUM_NINE",t[t.NUM_MULTIPLY=106]="NUM_MULTIPLY",t[t.NUM_PLUS=107]="NUM_PLUS",t[t.NUM_MINUS=109]="NUM_MINUS",t[t.NUM_PERIOD=110]="NUM_PERIOD",t[t.NUM_DIVISION=111]="NUM_DIVISION",t[t.F1=112]="F1",t[t.F2=113]="F2",t[t.F3=114]="F3",t[t.F4=115]="F4",t[t.F5=116]="F5",t[t.F6=117]="F6",t[t.F7=118]="F7",t[t.F8=119]="F8",t[t.F9=120]="F9",t[t.F10=121]="F10",t[t.F11=122]="F11",t[t.F12=123]="F12",t[t.NUMLOCK=144]="NUMLOCK",t[t.SCROLL_LOCK=145]="SCROLL_LOCK",t[t.FIRST_MEDIA_KEY=166]="FIRST_MEDIA_KEY",t[t.LAST_MEDIA_KEY=183]="LAST_MEDIA_KEY",t[t.SEMICOLON=186]="SEMICOLON",t[t.DASH=189]="DASH",t[t.EQUALS=187]="EQUALS",t[t.COMMA=188]="COMMA",t[t.PERIOD=190]="PERIOD",t[t.SLASH=191]="SLASH",t[t.APOSTROPHE=192]="APOSTROPHE",t[t.TILDE=192]="TILDE",t[t.SINGLE_QUOTE=222]="SINGLE_QUOTE",t[t.OPEN_SQUARE_BRACKET=219]="OPEN_SQUARE_BRACKET",t[t.BACKSLASH=220]="BACKSLASH",t[t.CLOSE_SQUARE_BRACKET=221]="CLOSE_SQUARE_BRACKET",t[t.WIN_KEY=224]="WIN_KEY",t[t.MAC_FF_META=224]="MAC_FF_META",t[t.MAC_WK_CMD_LEFT=91]="MAC_WK_CMD_LEFT",t[t.MAC_WK_CMD_RIGHT=93]="MAC_WK_CMD_RIGHT",t[t.WIN_IME=229]="WIN_IME",t[t.VK_NONAME=252]="VK_NONAME",t[t.PHANTOM=255]="PHANTOM"}(Gc||(Gc={}));var Wc={};Wc.arc=er,Wc.curve=Zn,Wc.line=qn,Wc.lineOnAxis=tr,Wc.lineTo=Jn,Wc.moveBy=Qn,Wc.moveTo=Kn,Wc.point=Xn;var jc={};jc.Coordinate=mg,jc.KeyCodes=Gc,jc.Rect=Sg,jc.Size=Rg,jc.Svg=Og,jc.aria=Wl,jc.array=dg,jc.browserEvents=ug,jc.colour=Wh,jc.deprecation=Vc,jc.dom=kg,jc.extensions=Hc,jc.idGenerator=wa,jc.math=rh,jc.object=Ec,jc.parsing=jh,jc.string=Th,jc.style=Dg,jc.svgMath=Lg,jc.svgPaths=Wc,jc.toolbox=Jg,jc.userAgent=lg,jc.xml=Vg;var Yc={};Yc.register=ir,Yc.unregister=or;var Xc=class extends $c{constructor(t,e,i,o){super(e,i,o),this.text=t,this.workspace=e,this.anchor=i,this.ownerRect=o,this.paragraph=this.stringToSvg(t,this.contentContainer),this.updateBubbleSize()}getText(){return this.text}setText(t){this.text=t,rt(this.paragraph),this.paragraph=this.stringToSvg(t,this.contentContainer),this.updateBubbleSize()}stringToSvg(t,e){return e=this.createParagraph(e),t=this.createSpans(e,t),this.workspace.RTL&&this.rightAlignSpans(e.getBBox().width,t),e}createParagraph(t){return tt(Og.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:$c.BORDER_WIDTH},t)}createSpans(t,e){return e.split("\n").map((e=>{const i=tt(Og.TSPAN,{dy:"1em",x:$c.BORDER_WIDTH},t);return e=document.createTextNode(e),i.appendChild(e),i}))}rightAlignSpans(t,e){for(const i of e)i.setAttribute("text-anchor","end"),i.setAttribute("x",`${t+$c.BORDER_WIDTH}`)}updateBubbleSize(){const t=this.paragraph.getBBox();this.setSize(new Rg(t.width+2*$c.BORDER_WIDTH,t.height+2*$c.BORDER_WIDTH),!0)}},Zc=class extends $c{constructor(t,e,i){super(t,e,i),this.workspace=t,this.anchor=e,this.ownerRect=i,this.resizePointerMoveListener=this.resizePointerUpListener=null,this.textChangeListeners=[],this.sizeChangeListeners=[],this.text="",this.DEFAULT_SIZE=new Rg(160+$c.DOUBLE_BORDER,80+$c.DOUBLE_BORDER),this.MIN_SIZE=new Rg(45+$c.DOUBLE_BORDER,20+$c.DOUBLE_BORDER),et(this.svgRoot,"blocklyTextInputBubble"),({inputRoot:this.inputRoot,textArea:this.textArea}=this.createEditor(this.contentContainer)),this.resizeGroup=this.createResizeHandle(this.svgRoot,t),this.setSize(this.DEFAULT_SIZE,!0)}getText(){return this.text}setText(t){this.text=t,this.textArea.value=t,this.onTextChange()}addTextChangeListener(t){this.textChangeListeners.push(t)}addSizeChangeListener(t){this.sizeChangeListeners.push(t)}createEditor(t){t=tt(Og.FOREIGNOBJECT,{x:$c.BORDER_WIDTH,y:$c.BORDER_WIDTH},t);const e=document.createElementNS(yg,"body");e.setAttribute("xmlns",yg),e.className="blocklyMinimalBody";const i=document.createElementNS(yg,"textarea");return i.className="blocklyTextarea blocklyText",i.setAttribute("dir",this.workspace.RTL?"RTL":"LTR"),e.appendChild(i),t.appendChild(e),this.bindTextAreaEvents(i),setTimeout((()=>{i.focus()}),0),{inputRoot:t,textArea:i}}bindTextAreaEvents(t){V(t,"wheel",this,(t=>{t.stopPropagation()})),V(t,"focus",this,this.onStartEdit,!0),V(t,"change",this,this.onTextChange)}createResizeHandle(t,e){return t=tt(Og.IMAGE,{class:"blocklyResizeHandle",href:`${e.options.pathToMedia}resize-handle.svg`},t),V(t,"pointerdown",this,this.onResizePointerDown),t}setSize(t,e=!1){t.width=Math.max(t.width,this.MIN_SIZE.width),t.height=Math.max(t.height,this.MIN_SIZE.height);const i=t.width-$c.DOUBLE_BORDER,o=t.height-$c.DOUBLE_BORDER;this.inputRoot.setAttribute("width",`${i}`),this.inputRoot.setAttribute("height",`${o}`),this.resizeGroup.setAttribute("y",`${o}`),this.workspace.RTL?this.resizeGroup.setAttribute("x",""+-$c.DOUBLE_BORDER):this.resizeGroup.setAttribute("x",`${i}`),super.setSize(t,e),this.onSizeChange()}getSize(){return super.getSize()}onResizePointerDown(t){this.bringToFront(),X(t)||(this.workspace.startDrag(t,new mg(this.workspace.RTL?-this.getSize().width:this.getSize().width,this.getSize().height)),this.resizePointerUpListener=V(document,"pointerup",this,this.onResizePointerUp),this.resizePointerMoveListener=V(document,"pointermove",this,this.onResizePointerMove),this.workspace.hideChaff()),t.stopPropagation()}onResizePointerUp(t){z(),this.resizePointerUpListener&&(j(this.resizePointerUpListener),this.resizePointerUpListener=null),this.resizePointerMoveListener&&(j(this.resizePointerMoveListener),this.resizePointerMoveListener=null)}onResizePointerMove(t){t=this.workspace.moveDrag(t),this.setSize(new Rg(this.workspace.RTL?-t.x:t.x,t.y),!1),this.onSizeChange()}onStartEdit(){this.bringToFront()&&this.textArea.focus()}onTextChange(){this.text=this.textArea.value;for(const t of this.textChangeListeners)t()}onSizeChange(){for(const t of this.sizeChangeListeners)t()}};J("\n.blocklyTextInputBubble .blocklyTextarea {\n  background-color: var(--commentFillColour);\n  border: 0;\n  box-sizing: border-box;\n  display: block;\n  outline: 0;\n  padding: 5px;\n  resize: none;\n  width: 100%;\n  height: 100%;\n}\n");var Kc=class extends Rc{constructor(t){super(t),this.sourceBlock=t,this.textBubble=this.textInputBubble=null,this.text="",this.bubbleSize=new Rg(160,80),this.bubbleVisiblity=!1}getType(){return Kc.TYPE}initView(t){this.svgRoot||(super.initView(t),tt(Og.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},this.svgRoot),tt(Og.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},this.svgRoot),tt(Og.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},this.svgRoot),et(this.svgRoot,"blockly-icon-comment"))}dispose(){let t,e;super.dispose(),null==(t=this.textInputBubble)||t.dispose(),null==(e=this.textBubble)||e.dispose()}getWeight(){return Kc.WEIGHT}getSize(){return new Rg(17,17)}applyColour(){super.applyColour();const t=this.sourceBlock.style.colourPrimary;let e,i;null==(e=this.textInputBubble)||e.setColour(t),null==(i=this.textBubble)||i.setColour(t)}updateEditable(){const t=this,e=()=>super.updateEditable;return zs.asyncExecutePromiseGeneratorFunction((function*(){e().call(t),t.bubbleIsVisible()&&(yield t.setBubbleVisible(!1),yield t.setBubbleVisible(!0))}))}onLocationChange(t){let e,i;super.onLocationChange(t),t=this.getAnchorLocation(),null==(e=this.textInputBubble)||e.setAnchorLocation(t),null==(i=this.textBubble)||i.setAnchorLocation(t)}setText(t){const e=this.text;let i,o;d(new(y(Hs.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,e,t)),this.text=t,null==(i=this.textInputBubble)||i.setText(this.text),null==(o=this.textBubble)||o.setText(this.text)}getText(){return this.text}setBubbleSize(t){let e;this.bubbleSize=t,null==(e=this.textInputBubble)||e.setSize(this.bubbleSize,!0)}getBubbleSize(){return this.bubbleSize}saveState(){return this.text?{text:this.text,pinned:this.bubbleIsVisible(),height:this.bubbleSize.height,width:this.bubbleSize.width}:null}loadState(t){let e,i,o,n;this.text=null!=(e=t.text)?e:"",this.bubbleSize=new Rg(null!=(i=t.width)?i:160,null!=(o=t.height)?o:80),this.bubbleVisiblity=null!=(n=t.pinned)&&n,this.setBubbleVisible(this.bubbleVisiblity)}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}onTextChange(){if(this.textInputBubble){var t=this.textInputBubble.getText();this.text!==t&&(d(new(y(Hs.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock,"comment",null,this.text,t)),this.text=t)}}onSizeChange(){this.textInputBubble&&(this.bubbleSize=this.textInputBubble.getSize())}bubbleIsVisible(){return this.bubbleVisiblity}setBubbleVisible(t){const e=this;return zs.asyncExecutePromiseGeneratorFunction((function*(){e.bubbleVisiblity!==t&&(e.bubbleVisiblity=t,yield pe(),!e.sourceBlock.rendered||e.sourceBlock.isInFlyout||e.sourceBlock.isInsertionMarker()||(t?(e.sourceBlock.isEditable()?e.showEditableBubble():e.showNonEditableBubble(),e.applyColour()):e.hideBubble(),d(new(y(sa))(e.sourceBlock,t,"comment"))))}))}showEditableBubble(){this.textInputBubble=new Zc(this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect()),this.textInputBubble.setText(this.getText()),this.textInputBubble.setSize(this.bubbleSize,!0),this.textInputBubble.addTextChangeListener((()=>this.onTextChange())),this.textInputBubble.addSizeChangeListener((()=>this.onSizeChange()))}showNonEditableBubble(){this.textBubble=new Xc(this.getText(),this.sourceBlock.workspace,this.getAnchorLocation(),this.getBubbleOwnerRect())}hideBubble(){let t,e;null==(t=this.textInputBubble)||t.dispose(),this.textInputBubble=null,null==(e=this.textBubble)||e.dispose(),this.textBubble=null}getAnchorLocation(){return mg.sum(this.workspaceLocation,new mg(8.5,8.5))}getBubbleOwnerRect(){const t=this.sourceBlock.getSvgRoot().getBBox();return new Sg(t.y,t.y+t.height,t.x,t.x+t.width)}};Kc.TYPE=gl.COMMENT,Kc.WEIGHT=3,ir(Kc.TYPE,Kc);var Qc=class extends Rc{constructor(t){super(t),this.sourceBlock=t,this.textMap=new Map,this.textBubble=null}getType(){return Qc.TYPE}initView(t){this.svgRoot||(super.initView(t),tt(Og.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},this.svgRoot),tt(Og.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},this.svgRoot),tt(Og.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},this.svgRoot),et(this.svgRoot,"blockly-icon-warning"))}dispose(){let t;super.dispose(),null==(t=this.textBubble)||t.dispose()}getWeight(){return Qc.WEIGHT}getSize(){return new Rg(17,17)}applyColour(){let t;super.applyColour(),null==(t=this.textBubble)||t.setColour(this.sourceBlock.style.colourPrimary)}updateCollapsed(){}isShownWhenCollapsed(){return!0}onLocationChange(t){let e;super.onLocationChange(t),null==(e=this.textBubble)||e.setAnchorLocation(this.getAnchorLocation())}addMessage(t,e){if(this.textMap.get(e)===t)return this;let i;return t?this.textMap.set(e,t):this.textMap.delete(e),null==(i=this.textBubble)||i.setText(this.getText()),this}getText(){return[...this.textMap.values()].join("\n")}onClick(){super.onClick(),this.setBubbleVisible(!this.bubbleIsVisible())}isClickableInFlyout(){return!1}bubbleIsVisible(){return!!this.textBubble}setBubbleVisible(t){const e=this;return zs.asyncExecutePromiseGeneratorFunction((function*(){if(e.bubbleIsVisible()!==t){if(yield pe(),t)e.textBubble=new Xc(e.getText(),e.sourceBlock.workspace,e.getAnchorLocation(),e.getBubbleOwnerRect()),e.applyColour();else{let t;null==(t=e.textBubble)||t.dispose(),e.textBubble=null}d(new(y(sa))(e.sourceBlock,t,"warning"))}}))}getAnchorLocation(){return mg.sum(this.workspaceLocation,new mg(8.5,8.5))}getBubbleOwnerRect(){const t=this.sourceBlock.getSvgRoot().getBBox();return new Sg(t.y,t.y+t.height,t.x,t.x+t.width)}};Qc.TYPE=gl.WARNING,Qc.WEIGHT=2;var Jc=class extends Error{constructor(t){super(`Tried to append an icon of type ${t.getType()} when an icon of that type already exists on the block. Use getIcon to access the existing icon.`),this.icon=t}},qc={};qc.DuplicateIconType=Jc;var tu,eu,iu={};iu.CommentIcon=Kc,iu.Icon=Rc,iu.IconType=gl,iu.MutatorIcon=Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon,iu.WarningIcon=Qc,iu.exceptions=qc,iu.registry=Yc,tu="PROCEDURE",Hs.DEFAULT_ARG$$module$build$src$core$procedures="x",(eu={CATEGORY_NAME:tu,DEFAULT_ARG:Hs.DEFAULT_ARG$$module$build$src$core$procedures}).ObservableProcedureMap=Sc,eu.allProcedures=nr,eu.findLegalName=Hs.findLegalName$$module$build$src$core$procedures,eu.flyoutCategory=gr,eu.getCallers=ur,eu.getDefinition=Hs.getDefinition$$module$build$src$core$procedures,eu.isNameUsed=ar,eu.isProcedureBlock=En,eu.mutateCallers=Hs.mutateCallers$$module$build$src$core$procedures,eu.mutatorOpenListener=hr,eu.rename=Hs.rename$$module$build$src$core$procedures;var ou=new class{constructor(){this.NONE=0,this.FIELD=1,this.HAT=2,this.ICON=4,this.SPACER=8,this.BETWEEN_ROW_SPACER=16,this.IN_ROW_SPACER=32,this.EXTERNAL_VALUE_INPUT=64,this.INPUT=128,this.INLINE_INPUT=256,this.STATEMENT_INPUT=512,this.CONNECTION=1024,this.PREVIOUS_CONNECTION=2048,this.NEXT_CONNECTION=4096,this.OUTPUT_CONNECTION=8192,this.CORNER=16384,this.LEFT_SQUARE_CORNER=32768,this.LEFT_ROUND_CORNER=65536,this.RIGHT_SQUARE_CORNER=131072,this.RIGHT_ROUND_CORNER=262144,this.JAGGED_EDGE=524288,this.ROW=1048576,this.TOP_ROW=2097152,this.BOTTOM_ROW=4194304,this.INPUT_ROW=8388608,this.LEFT_CORNER=this.LEFT_SQUARE_CORNER|this.LEFT_ROUND_CORNER,this.RIGHT_CORNER=this.RIGHT_SQUARE_CORNER|this.RIGHT_ROUND_CORNER,this.nextTypeValue_=16777216}getType(t){return Object.prototype.hasOwnProperty.call(this,t)||(this[t]=this.nextTypeValue_,this.nextTypeValue_<<=1),this[t]}isField(t){return t.type&this.FIELD}isHat(t){return t.type&this.HAT}isIcon(t){return t.type&this.ICON}isSpacer(t){return t.type&this.SPACER}isInRowSpacer(t){return t.type&this.IN_ROW_SPACER}isInput(t){return t.type&this.INPUT}isExternalInput(t){return t.type&this.EXTERNAL_VALUE_INPUT}isInlineInput(t){return t.type&this.INLINE_INPUT}isStatementInput(t){return t.type&this.STATEMENT_INPUT}isPreviousConnection(t){return t.type&this.PREVIOUS_CONNECTION}isNextConnection(t){return t.type&this.NEXT_CONNECTION}isPreviousOrNextConnection(t){return t.type&(this.PREVIOUS_CONNECTION|this.NEXT_CONNECTION)}isLeftRoundedCorner(t){return t.type&this.LEFT_ROUND_CORNER}isRightRoundedCorner(t){return t.type&this.RIGHT_ROUND_CORNER}isLeftSquareCorner(t){return t.type&this.LEFT_SQUARE_CORNER}isRightSquareCorner(t){return t.type&this.RIGHT_SQUARE_CORNER}isCorner(t){return t.type&this.CORNER}isJaggedEdge(t){return t.type&this.JAGGED_EDGE}isRow(t){return t.type&this.ROW}isBetweenRowSpacer(t){return t.type&this.BETWEEN_ROW_SPACER}isTopRow(t){return t.type&this.TOP_ROW}isBottomRow(t){return t.type&this.BOTTOM_ROW}isTopOrBottomRow(t){return t.type&(this.TOP_ROW|this.BOTTOM_ROW)}isInputRow(t){return t.type&this.INPUT_ROW}},nu=class{constructor(t){this.centerline=this.xPos=this.height=this.width=0,this.constants_=t,this.type=ou.NONE,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},ru=class{constructor(t){this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.align=null,this.constants_=t,this.type=ou.ROW,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}getLastInput(){for(let t=this.elements.length-1;0<=t;t--){const e=this.elements[t];if(ou.isInput(e))return e}return null}measure(){throw Error("Unexpected attempt to measure a base Row.")}startsWithElemSpacer(){return!0}endsWithElemSpacer(){return!0}getFirstSpacer(){for(let t=0;t<this.elements.length;t++){const e=this.elements[t];if(ou.isSpacer(e))return e}return null}getLastSpacer(){for(let t=this.elements.length-1;0<=t;t--){const e=this.elements[t];if(ou.isSpacer(e))return e}return null}},su=class extends ru{constructor(t){super(t),this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0,this.type|=ou.BOTTOM_ROW}hasLeftSquareCorner(t){return!!t.outputConnection||!!t.getNextBlock()}hasRightSquareCorner(t){return!0}measure(){let t=0,e=0,i=0;for(let o=0;o<this.elements.length;o++){const n=this.elements[o];e+=n.width,ou.isSpacer(n)||(ou.isNextConnection(n)?i=Math.max(i,n.height):t=Math.max(t,n.height))}this.width=Math.max(this.minWidth,e),this.height=Math.max(this.minHeight,t)+i,this.descenderHeight=i,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},au=class extends nu{constructor(t,e){super(t),this.connectionModel=e,this.type|=ou.CONNECTION,this.shape=this.constants_.shapeFor(e),this.isDynamicShape="isDynamic"in this.shape&&this.shape.isDynamic,this.highlighted=e.isHighlighted()}},gu=class extends au{constructor(t,e){super(t,e.connection),this.input=e,this.connectionOffsetY=this.connectionOffsetX=0,this.type|=ou.INPUT,this.align=e.align,(this.connectedBlock=e.connection&&e.connection.targetBlock()?e.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0}},lu=class extends gu{constructor(t,e){super(t,e),this.height=0,this.type|=ou.EXTERNAL_VALUE_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}},hu=class extends nu{constructor(t,e,i){super(t),this.field=e,this.parentInput=i,this.isEditable=e.EDITABLE,this.flipRtl=e.getFlipRtl(),this.type|=ou.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width}},cu=class extends nu{constructor(t){super(t),this.type|=ou.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}},uu=class extends nu{constructor(t,e){super(t),this.icon=e,this.flipRtl=!1,this.type|=ou.ICON,t=e.getSize(),this.height=t.height,this.width=t.width}},du=class extends nu{constructor(t,e){super(t),this.type=this.type|ou.SPACER|ou.IN_ROW_SPACER,this.width=e,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}},Au=class extends gu{constructor(t,e){super(t,e),this.type|=ou.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY="connectionOffsetY"in this.shape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX="connectionOffsetX"in this.shape?this.shape.connectionOffsetX(this.connectionWidth):0}},Iu=class extends gu{constructor(t,e){super(t,e),this.type|=ou.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}},Cu=class extends ru{constructor(t){super(t),this.connectedBlockWidths=0,this.type|=ou.INPUT_ROW}measure(){this.width=this.minWidth,this.height=this.minHeight;let t=0;for(let e=0;e<this.elements.length;e++){const i=this.elements[e];this.width+=i.width,ou.isInput(i)&&i instanceof gu&&(ou.isStatementInput(i)&&i instanceof Iu?t+=i.connectedBlockWidth:ou.isExternalInput(i)&&i instanceof lu&&0!==i.connectedBlockWidth&&(t+=i.connectedBlockWidth-i.connectionWidth)),ou.isSpacer(i)||(this.height=Math.max(this.height,i.height))}this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t}endsWithElemSpacer(){return!this.hasExternalInput&&!this.hasStatement}},pu=class extends nu{constructor(t){super(t),this.type|=ou.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}},fu=class extends au{constructor(t,e){super(t,e),this.type|=ou.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},vu=class extends au{constructor(t,e){super(t,e),this.connectionOffsetX=0,this.type|=ou.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP}},mu=class extends au{constructor(t,e){super(t,e),this.type|=ou.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}},bu=class extends nu{constructor(t,e){super(t),this.type=(e&&"left"!==e?ou.RIGHT_ROUND_CORNER:ou.LEFT_ROUND_CORNER)|ou.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}},yu=class extends ru{constructor(t,e,i){super(t),this.height=e,this.width=i,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.type=this.type|ou.SPACER|ou.BETWEEN_ROW_SPACER,this.elements=[new du(this.constants_,i)]}measure(){}},_u=class extends nu{constructor(t,e){super(t),this.type=(e&&"left"!==e?ou.RIGHT_SQUARE_CORNER:ou.LEFT_SQUARE_CORNER)|ou.CORNER,this.width=this.height=this.constants_.NO_PADDING}},Tu=class extends ru{constructor(t){super(t),this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null,this.type|=ou.TOP_ROW}hasLeftSquareCorner(t){const e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,i=t.getPreviousBlock();return!!t.outputConnection||e||!!i&&i.getNextBlock()===t}hasRightSquareCorner(t){return!0}measure(){let t=0,e=0,i=0;for(let o=0;o<this.elements.length;o++){const n=this.elements[o];e+=n.width,ou.isSpacer(n)||(ou.isHat(n)&&n instanceof cu?i=Math.max(i,n.ascenderHeight):t=Math.max(t,n.height))}this.width=Math.max(this.minWidth,e),this.height=Math.max(this.minHeight,t)+i,this.capline=this.ascenderHeight=i,this.widthWithConnectedBlocks=this.width}startsWithElemSpacer(){return!1}endsWithElemSpacer(){return!1}},Eu=class{constructor(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.CORNER_RADIUS=8,this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.defs=null,this.embossFilterId="",this.embossFilter=null,this.disabledPatternId="",this.disabledPattern=null,this.debugFilterId="",this.cssNode=this.debugFilter=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2},this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=Qn(0,0),this.FIELD_TEXT_BASELINE_CENTER=!0,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2)}init(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()}setTheme(t){this.blockStyles=Object.create(null);const e=t.blockStyles;for(const t in e)this.blockStyles[t]=this.validatedBlockStyle_(e[t]);this.setDynamicProperties_(t)}setDynamicProperties_(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=void 0!==t.startHats?t.startHats:this.ADD_START_HATS}setFontConstants_(t){t.fontStyle&&t.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=t.fontStyle.family),t.fontStyle&&t.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=t.fontStyle.weight),t.fontStyle&&t.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=t.fontStyle.size),t=dt("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline}setComponentConstants_(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY}getBlockStyleForColour(t){const e="auto_"+t;return this.blockStyles[e]||(this.blockStyles[e]=this.createBlockStyle_(t)),{style:this.blockStyles[e],name:e}}getBlockStyle(t){return this.blockStyles[t||""]||(t&&t.startsWith("auto_")?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))}createBlockStyle_(t){return this.validatedBlockStyle_({colourPrimary:t})}validatedBlockStyle_(t){const e={};return t&&Object.assign(e,t),t=vo(e.colourPrimary||"#000"),e.colourPrimary=t.hex,e.colourSecondary=e.colourSecondary?vo(e.colourSecondary).hex:this.generateSecondaryColour_(e.colourPrimary),e.colourTertiary=e.colourTertiary?vo(e.colourTertiary).hex:this.generateTertiaryColour_(e.colourPrimary),e.hat=e.hat||"",e}generateSecondaryColour_(t){return uo("#fff",t,.6)||t}generateTertiaryColour_(t){return uo("#fff",t,.3)||t}dispose(){this.embossFilter&&rt(this.embossFilter),this.disabledPattern&&rt(this.disabledPattern),this.debugFilter&&rt(this.debugFilter),this.cssNode=null}makeJaggedTeeth(){const t=this.JAGGED_TEETH_HEIGHT,e=this.JAGGED_TEETH_WIDTH;return{height:t,width:e,path:qn([Xn(e,t/4),Xn(2*-e,t/2),Xn(e,t/4)])}}makeStartHat(){const t=this.START_HAT_HEIGHT,e=this.START_HAT_WIDTH;return{height:t,width:e,path:Zn("c",[Xn(30,-t),Xn(70,-t),Xn(e,0)])}}makePuzzleTab(){function t(t){const o=-(t=t?-1:1);var n=i/2;const r=n+2.5,s=n+.5,a=Xn(-e,t*n);return n=Xn(e,t*n),Zn("c",[Xn(0,t*r),Xn(-e,o*s),a])+Zn("s",[Xn(e,2.5*o),n])}const e=this.TAB_WIDTH,i=this.TAB_HEIGHT,o=t(!0),n=t(!1);return{type:this.SHAPES.PUZZLE,width:e,height:i,pathDown:n,pathUp:o}}makeNotch(){function t(t){return qn([Xn(t*o,i),Xn(3*t,0),Xn(t*o,-i)])}const e=this.NOTCH_WIDTH,i=this.NOTCH_HEIGHT,o=(e-3)/2,n=t(1),r=t(-1);return{type:this.SHAPES.NOTCH,width:e,height:i,pathLeft:n,pathRight:r}}makeInsideCorners(){const t=this.CORNER_RADIUS;return{width:t,height:t,pathTop:er("a","0 0,0",t,Xn(-t,t)),pathBottom:er("a","0 0,0",t,Xn(t,t))}}makeOutsideCorners(){const t=this.CORNER_RADIUS,e=Qn(0,t)+er("a","0 0,1",t,Xn(t,-t)),i=er("a","0 0,1",t,Xn(t,t)),o=er("a","0 0,1",t,Xn(-t,-t));return{topLeft:e,topRight:i,bottomRight:er("a","0 0,1",t,Xn(-t,t)),bottomLeft:o,rightHeight:t}}shapeFor(t){switch(t.type){case Cc.INPUT_VALUE:case Cc.OUTPUT_VALUE:return this.PUZZLE_TAB;case Cc.PREVIOUS_STATEMENT:case Cc.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}}createDom(t,e,i){this.injectCSS_(e,i),this.defs=tt(Og.DEFS,{},t),t=tt(Og.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs),tt(Og.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},t),e=tt(Og.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},t),tt(Og.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},e),tt(Og.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},t),tt(Og.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},t),this.embossFilterId=t.id,this.embossFilter=t,t=tt(Og.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs),tt(Og.RECT,{width:10,height:10,fill:"#aaa"},t),tt(Og.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},t),this.disabledPatternId=t.id,this.disabledPattern=t,this.createDebugFilter()}createDebugFilter(){if(!this.debugFilter){const t=tt(Og.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs),e=tt(Og.FECOMPONENTTRANSFER,{result:"outBlur"},t);tt(Og.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},e),tt(Og.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),tt(Og.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter=t}}injectCSS_(t,e){e=this.getCSS_(e),t="blockly-renderer-style-"+t,this.cssNode=document.getElementById(t);const i=e.join("\n");this.cssNode?this.cssNode.firstChild.textContent=i:((e=document.createElement("style")).id=t,t=document.createTextNode(i),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild),this.cssNode=e)}getCSS_(t){return[`${t} .blocklyText, `,`${t} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${t} .blocklyText {`,"fill: #fff;","}",`${t} .blocklyNonEditableText>rect,`,`${t} .blocklyEditableText>rect {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"fill-opacity: .6;","stroke: none;","}",`${t} .blocklyNonEditableText>text,`,`${t} .blocklyEditableText>text {`,"fill: #000;","}",`${t} .blocklyFlyoutLabelText {`,"fill: #000;","}",`${t} .blocklyText.blocklyBubbleText {`,"fill: #000;","}",`${t} .blocklyEditableText:not(.editing):hover>rect {`,"stroke: #fff;","stroke-width: 2;","}",`${t} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"}",`${t} .blocklySelected>.blocklyPath {`,"stroke: #fc3;","stroke-width: 3px;","}",`${t} .blocklyHighlightedConnectionPath {`,"stroke: #fc3;","}",`${t} .blocklyReplaceable .blocklyPath {`,"fill-opacity: .5;","}",`${t} .blocklyReplaceable .blocklyPathLight,`,`${t} .blocklyReplaceable .blocklyPathDark {`,"display: none;","}",`${t} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},wu={};wu.ConstantProvider=Eu,wu.isDynamicShape=Ar,wu.isNotch=Cr,wu.isPuzzleTab=Ir;var ku=class{constructor(t,e){this.inlinePath_=this.outlinePath_="",this.block_=t,this.info_=e,this.topLeft_=t.getRelativeToSurfaceXY(),this.constants_=e.getRenderer().getConstants()}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),this.block_.pathObject.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),this.recordSizeOnBlock_()}recordSizeOnBlock_(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren}drawOutline_(){this.drawTop_();for(let t=1;t<this.info_.rows.length-1;t++){const e=this.info_.rows[t];e.hasJaggedEdge?this.drawJaggedEdge_(e):e.hasStatement?this.drawStatementInput_(e):e.hasExternalInput?this.drawValueInput_(e):this.drawRightSideRow_(e)}this.drawBottom_(),this.drawLeft_()}drawTop_(){const t=this.info_.topRow,e=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=Qn(t.xPos,this.info_.startY);for(let t,i=0;t=e[i];i++)ou.isLeftRoundedCorner(t)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:ou.isRightRoundedCorner(t)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:ou.isPreviousConnection(t)&&t instanceof au?this.outlinePath_+=t.shape.pathLeft:ou.isHat(t)?this.outlinePath_+=this.constants_.START_HAT.path:ou.isSpacer(t)&&(this.outlinePath_+=tr("h",t.width));this.outlinePath_+=tr("v",t.height)}drawJaggedEdge_(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+tr("v",t.height-this.constants_.JAGGED_TEETH.height)}drawValueInput_(t){const e=t.getLastInput();this.positionExternalValueConnection_(t);const i=Ar(e.shape)?e.shape.pathDown(e.height):e.shape.pathDown;this.outlinePath_+=tr("H",e.xPos+e.width)+i+tr("v",t.height-e.connectionHeight)}drawStatementInput_(t){var e=t.getLastInput();if(e){var i=e.xPos+e.notchOffset+e.shape.width;e=e.shape.pathRight+tr("h",-(e.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var o=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=tr("H",i)+e+tr("v",o)+this.constants_.INSIDE_CORNERS.pathBottom+tr("H",t.xPos+t.width),this.positionStatementInputConnection_(t)}}drawRightSideRow_(t){this.outlinePath_+=tr("V",t.yPos+t.height)}drawBottom_(){const t=this.info_.bottomRow,e=t.elements;this.positionNextConnection_();let i=0,o="";for(let n,r=e.length-1;n=e[r];r--)ou.isNextConnection(n)&&n instanceof au?o+=n.shape.pathRight:ou.isLeftSquareCorner(n)?o+=tr("H",t.xPos):ou.isLeftRoundedCorner(n)?o+=this.constants_.OUTSIDE_CORNERS.bottomLeft:ou.isRightRoundedCorner(n)?(o+=this.constants_.OUTSIDE_CORNERS.bottomRight,i=this.constants_.OUTSIDE_CORNERS.rightHeight):ou.isSpacer(n)&&(o+=tr("h",-1*n.width));this.outlinePath_+=tr("V",t.baseline-i),this.outlinePath_+=o}drawLeft_(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){const e=t.connectionOffsetY+t.height;t=Ar(t.shape)?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=tr("V",e)+t}this.outlinePath_+="z"}drawInternals_(){for(let t,e=0;t=this.info_.rows[e];e++)for(let e,i=0;e=t.elements[i];i++)ou.isInlineInput(e)?this.drawInlineInput_(e):(ou.isIcon(e)||ou.isField(e))&&this.layoutField_(e)}layoutField_(t){const e=t.centerline-t.height/2;let i=t.xPos;var o="";this.info_.RTL&&(i=-(i+t.width),t.flipRtl&&(i+=t.width,o="scale(-1 1)")),ou.isIcon(t)?((o=t.icon).setOffsetInBlock(new mg(i,e)),this.info_.isInsertionMarker&&o.hideForInsertionMarker()):((t=t.field.getSvgRoot()).setAttribute("transform","translate("+i+","+e+")"+o),this.info_.isInsertionMarker&&t.setAttribute("display","none"))}drawInlineInput_(t){const e=t.width,i=t.height,o=t.connectionOffsetY,n=t.connectionHeight+o;this.inlinePath_+=Kn(t.xPos+t.connectionWidth,t.centerline-i/2)+tr("v",o)+t.shape.pathDown+tr("v",i-n)+tr("h",e-t.connectionWidth)+tr("v",-i)+"z",this.positionInlineInputConnection_(t)}positionInlineInputConnection_(t){const e=t.centerline-t.height/2;if(t.connectionModel){let i=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(i*=-1),t.connectionModel.setOffsetInBlock(i,e+t.connectionOffsetY)}}positionStatementInputConnection_(t){const e=t.getLastInput();if(null!=e&&e.connectionModel){let i=t.xPos+t.statementEdge+e.notchOffset;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,t.yPos)}}positionExternalValueConnection_(t){const e=t.getLastInput();if(e&&e.connectionModel){let i=t.xPos+t.width;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,t.yPos)}}positionPreviousConnection_(){const t=this.info_.topRow;if(t.connection){const e=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-e:e,0)}}positionNextConnection_(){const t=this.info_.bottomRow;if(t.connection){const e=t.connection,i=e.xPos;e.connectionModel.setOffsetInBlock(this.info_.RTL?-i:i,t.baseline)}}positionOutputConnection_(){if(this.info_.outputConnection){const t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}}updateConnectionHighlights(){for(const t of this.info_.rows)for(const e of t.elements)if(e instanceof au)if(e.highlighted)this.drawConnectionHighlightPath(e);else{let t,i;null==(i=(t=this.block_.pathObject).removeConnectionHighlight)||i.call(t,e.connectionModel)}}drawConnectionHighlightPath(t){const e=t.connectionModel;t=e.type===Cc.INPUT_VALUE||e.type===Cc.OUTPUT_VALUE?this.getExpressionConnectionHighlightPath(t):this.getStatementConnectionHighlightPath(t);const i=e.getSourceBlock();let o,n;null==(n=(o=i.pathObject).addConnectionHighlight)||n.call(o,e,t,e.getOffsetInBlock(),i.RTL)}getExpressionConnectionHighlightPath(t){let e="";return Ar(t.shape)?e=t.shape.pathDown(t.height):Ir(t.shape)&&(e=t.shape.pathDown),t=this.constants_.TAB_OFFSET_FROM_TOP,Qn(0,-t)+tr("v",t)+e+tr("v",t)}getStatementConnectionHighlightPath(t){if(!Cr(t.shape))throw Error("Statement connections should have notch shapes");const e=this.constants_.NOTCH_OFFSET_LEFT-this.constants_.CORNER_RADIUS;return Qn(-e,0)+tr("h",e)+t.shape.pathLeft+tr("h",e)}};(function(t){t[t.LEFT=-1]="LEFT",t[t.CENTRE=0]="CENTRE",t[t.RIGHT=1]="RIGHT"})(Hs.Align$$module$build$src$core$inputs$align||(Hs.Align$$module$build$src$core$inputs$align={})),Hs.Align$$module$build$src$core$inputs$align;var Ou=class extends Yh{constructor(t,e,i){super(Yh.SKIP_SETUP),this.class=null,this.EDITABLE=!1,this.maxDisplayLength=1/0,t!==Yh.SKIP_SETUP&&(i?this.configure_(i):this.class=e||null,this.setValue(t))}configure_(t){super.configure_(t),t.class&&(this.class=t.class)}initView(){this.createTextElement_(),this.class&&et(this.getTextElement(),this.class)}doClassValidation_(t){return null==t?null:`${t}`}setClass(t){this.textElement_&&(this.class&&ot(this.textElement_,this.class),t&&et(this.textElement_,t)),this.class=t}static fromJson(t){return new this(po(t.text),void 0,t)}};kn("field_label",Ou),Ou.prototype.DEFAULT_VALUE="";var Su=class{constructor(t,e){this.name=t,this.sourceBlock=e,this.fieldRow=[],this.align=Hs.Align$$module$build$src$core$inputs$align.LEFT,this.visible=!0,this.type=Hs.inputTypes$$module$build$src$core$inputs$input_types.CUSTOM,this.connection=null}getSourceBlock(){return this.sourceBlock}appendField(t,e){return this.insertFieldAt(this.fieldRow.length,t,e),this}insertFieldAt(t,e,i){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return e||""===e&&i?("string"==typeof e&&(e=Hs.fromJson$$module$build$src$core$field_registry({type:"field_label",text:e})),e.setSourceBlock(this.sourceBlock),this.sourceBlock.initialized&&this.initField(e),e.name=i,e.setVisible(this.isVisible()),e.prefixField&&(t=this.insertFieldAt(t,e.prefixField)),this.fieldRow.splice(t,0,e),t++,e.suffixField&&(t=this.insertFieldAt(t,e.suffixField)),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),t):t}removeField(t,e){for(let e,i=0;e=this.fieldRow[i];i++)if(e.name===t)return e.dispose(),this.fieldRow.splice(i,1),this.sourceBlock.rendered&&this.sourceBlock.queueRender(),!0;if(e)return!1;throw Error('Field "'+t+'" not found.')}isVisible(){return this.visible}setVisible(t){let e=[];if(this.visible===t)return e;this.visible=t;for(let e,i=0;e=this.fieldRow[i];i++)e.setVisible(t);if(this.connection){var i=this.connection;t?e=i.startTrackingAll():i.stopTrackingAll(),(i=i.targetBlock())&&(i.getSvgRoot().style.display=t?"block":"none")}return e}markDirty(){for(let t,e=0;t=this.fieldRow[e];e++)t.markDirty()}setCheck(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this}setAlign(t){return this.align=t,this.sourceBlock.rendered&&this.sourceBlock.queueRender(),this}setShadowDom(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this}getShadowDom(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()}init(){for(const t of this.fieldRow)t.init()}initModel(){for(const t of this.fieldRow)t.initModel()}initField(t){this.sourceBlock.rendered?t.init():t.initModel()}dispose(){for(let t,e=0;t=this.fieldRow[e];e++)t.dispose();this.connection&&this.connection.dispose()}makeConnection(t){return this.sourceBlock.makeConnection_(t)}},Ru=class extends Su{constructor(t,e){super(t,e),this.name=t,this.type=Hs.inputTypes$$module$build$src$core$inputs$input_types.DUMMY}},xu=class extends Su{constructor(t,e){super(t,e),this.name=t,this.type=Hs.inputTypes$$module$build$src$core$inputs$input_types.END_ROW}},Du=class extends Su{constructor(t,e){if(!t)throw Error("Statement inputs must have a non-empty name");super(t,e),this.name=t,this.type=Hs.inputTypes$$module$build$src$core$inputs$input_types.STATEMENT,this.connection=this.makeConnection(Cc.NEXT_STATEMENT)}};Hs.ValueInput$$module$build$src$core$inputs$value_input=class extends Su{constructor(t,e){if(!t)throw Error("Value inputs must have a non-empty name");super(t,e),this.name=t,this.type=Hs.inputTypes$$module$build$src$core$inputs$input_types.VALUE,this.connection=this.makeConnection(Cc.INPUT_VALUE)}},Hs.ValueInput$$module$build$src$core$inputs$value_input;var Mu=class{constructor(t,e){this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.startY=this.startX=0,this.renderer_=t,this.block_=e,this.constants_=this.renderer_.getConstants(),this.outputConnection=e.outputConnection?new vu(this.constants_,e.outputConnection):null,this.isInline=e.getInputsInline()&&!e.isCollapsed(),this.isCollapsed=e.isCollapsed(),this.isInsertionMarker=e.isInsertionMarker(),this.RTL=e.RTL,this.topRow=new Tu(this.constants_),this.bottomRow=new su(this.constants_)}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}createRows_(){this.populateTopRow_(),this.rows.push(this.topRow);let t=new Cu(this.constants_);this.inputRows.push(t);var e=this.block_.getIcons();for(let i,o=0;i=e[o];o++){const e=new uu(this.constants_,i);this.isCollapsed&&!i.isShownWhenCollapsed()||t.elements.push(e)}e=void 0;for(let i,o=0;i=this.block_.inputList[o];o++)if(i.isVisible()){this.shouldStartNewRow_(i,e)&&(this.rows.push(t),t=new Cu(this.constants_),this.inputRows.push(t));for(let e,o=0;e=i.fieldRow[o];o++)t.elements.push(new hu(this.constants_,e,i));this.addInput_(i,t),e=i}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new pu(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)}populateTopRow_(){var t=!!this.block_.previousConnection;const e=(this.block_.hat?"cap"===this.block_.hat:this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t;let i=this.topRow.hasLeftSquareCorner(this.block_)?_u:bu;this.topRow.elements.push(new i(this.constants_)),e?(t=new cu(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new mu(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0]instanceof Du&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,i=this.topRow.hasRightSquareCorner(this.block_)?_u:bu,this.topRow.elements.push(new i(this.constants_,"right"))}populateBottomRow_(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Du?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new _u(this.constants_)):this.bottomRow.elements.push(new bu(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new fu(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new _u(this.constants_,"right")):this.bottomRow.elements.push(new bu(this.constants_,"right"))}addInput_(t,e){this.isInline&&t instanceof Hs.ValueInput$$module$build$src$core$inputs$value_input?(e.elements.push(new Au(this.constants_,t)),e.hasInlineInput=!0):t instanceof Du?(e.elements.push(new Iu(this.constants_,t)),e.hasStatement=!0):t instanceof Hs.ValueInput$$module$build$src$core$inputs$value_input?(e.elements.push(new lu(this.constants_,t)),e.hasExternalInput=!0):(t instanceof Ru||t instanceof xu)&&(e.minHeight=Math.max(e.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),e.hasDummyInput=!0),null===e.align&&(e.align=t.align)}shouldStartNewRow_(t,e){return!!e&&(e instanceof xu||t instanceof Du||e instanceof Du||(t instanceof Hs.ValueInput$$module$build$src$core$inputs$value_input||t instanceof Ru||e instanceof Hs.ValueInput$$module$build$src$core$inputs$value_input)&&!this.isInline)}addElemSpacing_(){for(let t,e=0;t=this.rows[e];e++){const e=t.elements;if(t.elements=[],t.startsWithElemSpacer()&&t.elements.push(new du(this.constants_,this.getInRowSpacing_(null,e[0]))),e.length){for(let i=0;i<e.length-1;i++){t.elements.push(e[i]);const o=this.getInRowSpacing_(e[i],e[i+1]);t.elements.push(new du(this.constants_,o))}t.elements.push(e[e.length-1]),t.endsWithElemSpacer()&&t.elements.push(new du(this.constants_,this.getInRowSpacing_(e[e.length-1],null)))}}}getInRowSpacing_(t,e){if(!t&&e&&ou.isStatementInput(e))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&ou.isInput(t)&&!e){if(ou.isExternalInput(t))return this.constants_.NO_PADDING;if(ou.isInlineInput(t))return this.constants_.LARGE_PADDING;if(ou.isStatementInput(t))return this.constants_.NO_PADDING}return t&&ou.isLeftSquareCorner(t)&&e&&(ou.isPreviousConnection(e)||ou.isNextConnection(e))?e.notchOffset:t&&ou.isLeftRoundedCorner(t)&&e&&(ou.isPreviousConnection(e)||ou.isNextConnection(e))?e.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}computeBounds_(){let t=0,e=0,i=0;for(let n,r=0;n=this.rows[r];r++){if(n.measure(),e=Math.max(e,n.width),n.hasStatement){var o=n.getLastInput();let e,i;o=n.width-(null!=(i=null==(e=o)?void 0:e.width)?i:0),t=Math.max(t,o)}i=Math.max(i,n.widthWithConnectedBlocks)}this.statementEdge=t,this.width=e;for(let t,e=0;t=this.rows[e];e++)t.hasStatement&&(t.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(e,i),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)}alignRowElements_(){for(let e,i=0;e=this.rows[i];i++)if(e.hasStatement)this.alignStatementRow_(e);else{var t=e.width;0<(t=this.getDesiredRowWidth_(e)-t)&&this.addAlignmentPadding_(e,t),ou.isTopOrBottomRow(e)&&(e.widthWithConnectedBlocks=e.width)}}getDesiredRowWidth_(t){return this.width-this.startX}addAlignmentPadding_(t,e){const i=t.getFirstSpacer(),o=t.getLastSpacer();if((t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=e),t.align===Hs.Align$$module$build$src$core$inputs$align.LEFT&&o)o.width+=e;else if(t.align===Hs.Align$$module$build$src$core$inputs$align.CENTRE&&i&&o)i.width+=e/2,o.width+=e/2;else if(t.align===Hs.Align$$module$build$src$core$inputs$align.RIGHT&&i)i.width+=e;else{if(!o)return;o.width+=e}t.width+=e}alignStatementRow_(t){const e=t.getLastInput();if(e){var i=t.width-e.width,o=this.statementEdge;0<(i=o-i)&&this.addAlignmentPadding_(t,i),i=t.width,o=this.getDesiredRowWidth_(t),e.width+=o-i,e.height=Math.max(e.height,t.height),t.width+=o-i,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)}}addRowSpacing_(){const t=this.rows;this.rows=[];for(let e=0;e<t.length;e++)this.rows.push(t[e]),e!==t.length-1&&this.rows.push(this.makeSpacerRow_(t[e],t[e+1]))}makeSpacerRow_(t,e){var i=this.getSpacerRowHeight_(t,e);const o=this.getSpacerRowWidth_(t,e);return i=new yu(this.constants_,i,o),t.hasStatement&&(i.followsStatement=!0),e.hasStatement&&(i.precedesStatement=!0),i}getSpacerRowWidth_(t,e){return this.width-this.startX}getSpacerRowHeight_(t,e){return this.constants_.MEDIUM_PADDING}getElemCenterline_(t,e){return ou.isSpacer(e)?t.yPos+e.height/2:ou.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,ou.isNextConnection(e)?t+e.height/2:t-e.height/2):ou.isTopRow(t)?ou.isHat(e)?t.capline-e.height/2:t.capline+e.height/2:t.yPos+t.height/2}recordElemPositions_(t){let e=t.xPos;for(let i,o=0;i=t.elements[o];o++)ou.isSpacer(i)&&(i.height=t.height),i.xPos=e,i.centerline=this.getElemCenterline_(t,i),e+=i.width}finalize_(){let t=0,e=0;for(let i,o=0;i=this.rows[o];o++)i.yPos=e,i.xPos=this.startX,e+=i.height,t=Math.max(t,i.widthWithConnectedBlocks),this.recordElemPositions_(i);if(this.outputConnection&&this.block_.nextConnection){const e=this.block_.nextConnection.targetBlock();e&&(t=Math.max(t,e.getHeightWidth().width))}this.widthWithChildren=t+this.startX,this.height=e,this.startY=this.topRow.capline,this.bottomRow.baseline=e-this.bottomRow.descenderHeight}getMeasureableForConnection(t){let e;if((null==(e=this.outputConnection)?void 0:e.connectionModel)===t)return this.outputConnection;for(const e of this.rows)for(const i of e.elements)if(i instanceof au&&i.connectionModel===t)return i;return null}},Nu=class extends oh{constructor(t){if(super(t),this.type=Hs.DELETE$$module$build$src$core$events$utils,t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=jo(t),this.ids=m(t),this.wasShadow=t.isShadow(),this.oldJson=Pe(t,{addCoordinates:!0})}}toJson(){const t=super.toJson();if(!this.oldXml)throw Error("The old block XML is undefined. Either pass a block to the constructor, or call fromJson");if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(void 0===this.wasShadow)throw Error("Whether the block was a shadow is undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");return t.oldXml=Qo(this.oldXml),t.ids=this.ids,t.wasShadow=this.wasShadow,t.oldJson=this.oldJson,this.recordUndo||(t.recordUndo=this.recordUndo),t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new Nu)).oldXml=Hs.textToDom$$module$build$src$core$utils$xml(t.oldXml),e.ids=t.ids,e.wasShadow=t.wasShadow||"shadow"===e.oldXml.tagName.toLowerCase(),e.oldJson=t.oldJson,void 0!==t.recordUndo&&(e.recordUndo=t.recordUndo),e}run(t){const e=this.getEventWorkspace_();if(!this.ids)throw Error("The block IDs are undefined. Either pass a block to the constructor, or call fromJson");if(!this.oldJson)throw Error("The old block JSON is undefined. Either pass a block to the constructor, or call fromJson");if(t)for(t=0;t<this.ids.length;t++){const i=this.ids[t],o=e.getBlockById(i);o?o.dispose(!1):i===this.blockId&&console.warn("Can't delete non-existent block: "+i)}else We(this.oldJson,e)}};t(js.EVENT,Hs.DELETE$$module$build$src$core$events$utils,Nu);var Lu=class{constructor(t,e){this.type=e,this.targetConnection=null,this.disposed=!1,this.shadowDom=this.check=null,this.y=this.x=0,this.shadowState=null,this.sourceBlock_=t}connect_(t){const e=Cc.INPUT_VALUE,i=this.getSourceBlock();var o=t.getSourceBlock();let n,r;if(t.isConnected()&&t.disconnectInternal(!1),this.isConnected()){const t=this.stashShadowState(),e=this.targetBlock();e.isShadow()?e.dispose(!1):(this.disconnectInternal(),n=e),this.applyShadowState(t)}f()&&(r=new(y(Hs.MOVE$$module$build$src$core$events$utils))(o),r.setReason(["connect"])),pr(this,t),o.setParent(i),r&&(r.recordNew(),d(r)),n&&(t=this.type===e?n.outputConnection:n.previousConnection)&&((o=Lu.getConnectionForOrphanedConnection(o,t))?t.connect(o):t.onFailedConnect(this))}dispose(){if(this.isConnected()){this.isSuperior()&&this.setShadowStateInternal();const t=this.targetBlock();t&&!t.isDeadOrDying()&&t.unplug()}this.disposed=!0}getSourceBlock(){return this.sourceBlock_}isSuperior(){return this.type===Cc.INPUT_VALUE||this.type===Cc.NEXT_STATEMENT}isConnected(){return!!this.targetConnection}getConnectionChecker(){return this.sourceBlock_.workspace.connectionChecker}onFailedConnect(t){}connect(t){if(this.targetConnection===t)return!0;if(this.getConnectionChecker().canConnect(this,t,!1)){const e=Hs.getGroup$$module$build$src$core$events$utils();e||Hs.setGroup$$module$build$src$core$events$utils(!0),this.isSuperior()?this.connect_(t):t.connect_(this),Hs.setGroup$$module$build$src$core$events$utils(e)}return this.isConnected()}disconnect(){this.disconnectInternal()}disconnectInternal(t=!0){const{parentConnection:e,childConnection:i}=this.getParentAndChildConnections();if(!e||!i)throw Error("Source connection not connected.");const o=Hs.getGroup$$module$build$src$core$events$utils();let n;o||Hs.setGroup$$module$build$src$core$events$utils(!0),f()&&(n=new(y(Hs.MOVE$$module$build$src$core$events$utils))(i.getSourceBlock()),n.setReason(["disconnect"]));const r=this.targetConnection;r&&(r.targetConnection=null),this.targetConnection=null,t&&i.getSourceBlock().setParent(null),n&&(n.recordNew(),d(n)),i.getSourceBlock().isShadow()||e.respawnShadow_(),Hs.setGroup$$module$build$src$core$events$utils(o)}getParentAndChildConnections(){return this.targetConnection?this.isSuperior()?{parentConnection:this,childConnection:this.targetConnection}:{parentConnection:this.targetConnection,childConnection:this}:{}}respawnShadow_(){this.createShadowBlock(!0)}reconnect(t,e){return!(this.getSourceBlock().isDeadOrDying()||(e=null==(i=t.getInput(e))?void 0:i.connection,(i=this.targetBlock())&&i!==t||!e||e.targetConnection===this||(e.isConnected()&&e.disconnect(),e.connect(this),0)));var i}targetBlock(){if(this.isConnected()){let t,e;return null!=(e=null==(t=this.targetConnection)?void 0:t.getSourceBlock())?e:null}return null}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(t){return t?(Array.isArray(t)||(t=[t]),this.check=t,this.onCheckChanged_()):this.check=null,this}getCheck(){return this.check}setShadowDom(t){this.setShadowStateInternal({shadowDom:t})}getShadowDom(t){return t&&this.targetBlock().isShadow()?Zo(this.targetBlock()):this.shadowDom}setShadowState(t){this.setShadowStateInternal({shadowState:t})}getShadowState(t){return t&&this.targetBlock()&&this.targetBlock().isShadow()?Pe(this.targetBlock()):this.shadowState}neighbours(t){return[]}getParentInput(){let t=null;const e=this.sourceBlock_.inputList;for(let i=0;i<e.length;i++)if(e[i].connection===this){t=e[i];break}return t}toString(){const t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection===this)var e="Output Connection of ";else if(t.previousConnection===this)e="Previous Connection of ";else if(t.nextConnection===this)e="Next Connection of ";else{e=null;for(let i,o=0;i=t.inputList[o];o++)if(i.connection===this){e=i;break}if(!e)return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection";e='Input "'+e.name+'" connection on '}return e+t.toDevString()}stashShadowState(){const t=this.getShadowDom(!0),e=this.getShadowState(!0);return this.shadowState=this.shadowDom=null,{shadowDom:t,shadowState:e}}applyShadowState({shadowDom:t,shadowState:e}){this.shadowDom=t,this.shadowState=e}setShadowStateInternal({shadowDom:t=null,shadowState:e=null}={}){this.shadowDom=t,this.shadowState=e,this.getSourceBlock().isDeadOrDying()||((t=this.targetBlock())?t.isShadow()?(t.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())):(t=this.createShadowBlock(!1),this.serializeShadow(t),t&&t.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow(this.targetBlock())))}createShadowBlock(t){var e=this.getSourceBlock();const i=this.getShadowState(),o=this.getShadowDom();if(e.isDeadOrDying()||!i&&!o)return null;if(i)return je(i,e.workspace,{parentConnection:t?this:void 0,isShadow:!0,recordUndo:!1});if(o){if(e=on(o,e.workspace),t)if(this.type===Cc.INPUT_VALUE){if(!e.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(e.outputConnection))throw Error("Could not connect shadow block to connection")}else{if(this.type!==Cc.NEXT_STATEMENT)throw Error("Cannot connect a shadow block to a previous/output connection");if(!e.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(e.previousConnection))throw Error("Could not connect shadow block to connection")}return e}return null}serializeShadow(t){t&&(this.shadowDom=Zo(t),this.shadowState=Pe(t))}static getConnectionForOrphanedConnection(t,e){if(e.type===Cc.OUTPUT_VALUE)return vr(t,e.getSourceBlock());t=t.lastConnectionInStack(!0);const i=e.getConnectionChecker();return t&&i.canConnect(e,t,!1)?t:null}};Lu.CAN_CONNECT=0,Lu.REASON_SELF_CONNECTION=1,Lu.REASON_WRONG_TYPE=2,Lu.REASON_TARGET_NULL=3,Lu.REASON_CHECKS_FAILED=4,Lu.REASON_DIFFERENT_WORKSPACES=5,Lu.REASON_SHADOW_PARENT=6,Lu.REASON_DRAG_CHECKS_FAILED=7,Lu.REASON_PREVIOUS_AND_OUTPUT=8;var Pu=class{constructor(t,e,i){if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.suppressPrefixSuffix=!1,this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.icons=[],this.disabledReasons=new Set,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.outputShape_=null,this.rendered=this.isInsertionMarker_=this.initialized=this.disposing=!1,this.onchangeWrapper_=this.helpUrl=null,this.statementInputCount=0,this.workspace=t,this.id=i&&!t.getBlockById(i)?i:c(),t.setBlockById(this.id,this),this.xy_=new mg(0,0),this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,e){if(this.type=e,!(i=ya[e])||"object"!=typeof i)throw TypeError("Invalid block definition for type: "+e);Object.assign(this,i)}t.addTopBlock(this),t.addTypedBlock(this),new.target===Pu&&this.doInit_()}doInit_(){const t=Hs.getGroup$$module$build$src$core$events$utils();t||Hs.setGroup$$module$build$src$core$events$utils(!0);const e=u();try{"function"==typeof this.init&&(Hs.setRecordUndo$$module$build$src$core$events$utils(!1),this.init(),Hs.setRecordUndo$$module$build$src$core$events$utils(e)),f()&&d(new(y(Hs.CREATE$$module$build$src$core$events$utils))(this))}finally{Hs.setGroup$$module$build$src$core$events$utils(t),Hs.setRecordUndo$$module$build$src$core$events$utils(e)}this.inputsInlineDefault=this.inputsInline,"function"==typeof this.onchange&&this.setOnChange(this.onchange)}dispose(t=!1){this.disposing=!0,this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),f()&&d(new(y(Hs.DELETE$$module$build$src$core$events$utils))(this)),this.workspace.removeTopBlock(this),this.disposeInternal()}disposeInternal(){this.disposing=!0,this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),"function"==typeof this.destroy&&this.destroy(),this.childBlocks_.forEach((t=>t.disposeInternal())),this.inputList.forEach((t=>t.dispose())),this.inputList.length=0,this.getConnections_(!0).forEach((t=>t.dispose())),this.disposed=!0}isDeadOrDying(){return this.disposing||this.disposed}initModel(){if(!this.initialized){for(const t of this.inputList)t.initModel();this.initialized=!0}}unplug(t){this.outputConnection&&this.unplugFromRow_(t),this.previousConnection&&this.unplugFromStack_(t)}unplugFromRow_(t){let e,i=null;null!=(e=this.outputConnection)&&e.isConnected()&&(i=this.outputConnection.targetConnection,this.outputConnection.disconnect()),i&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&(null==(t=t.targetConnection)||t.disconnect(),this.workspace.connectionChecker.canConnect(t,i,!1)?i.connect(t):null==t||t.onFailedConnect(i))}getOnlyValueConnection_(){let t=null;for(let e=0;e<this.inputList.length;e++){const i=this.inputList[e].connection;if(i&&i.type===Cc.INPUT_VALUE&&i.targetConnection){if(t)return null;t=i}}return t}unplugFromStack_(t){let e=null;var i;if(null!=(i=this.previousConnection)&&i.isConnected()&&(e=this.previousConnection.targetConnection,this.previousConnection.disconnect()),i=this.getNextBlock(),t&&i&&!i.isShadow()){let i,o;null==(t=null!=(o=null==(i=this.nextConnection)?void 0:i.targetConnection)?o:null)||t.disconnect(),e&&this.workspace.connectionChecker.canConnect(e,t,!1)&&e.connect(t)}}getConnections_(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(let e,i=0;e=this.inputList[i];i++)e.connection&&t.push(e.connection);return t}lastConnectionInStack(t){let e=this.nextConnection;for(;e;){const i=e.targetBlock();if(!i||t&&i.isShadow())return e;e=i.nextConnection}return null}bumpNeighbours(){}getParent(){return this.parentBlock_}getInputWithBlock(t){for(let e,i=0;e=this.inputList[i];i++)if(e.connection&&e.connection.targetBlock()===t)return e;return null}getSurroundParent(){let t,e=this;do{if(t=e,e=e.getParent(),!e)return null}while(e.getNextBlock()===t);return e}getNextBlock(){return this.nextConnection&&this.nextConnection.targetBlock()}getPreviousBlock(){return this.previousConnection&&this.previousConnection.targetBlock()}getRootBlock(){let t,e=this;do{t=e,e=t.parentBlock_}while(e);return t}getTopStackBlock(){let t,e=this;do{t=e.getPreviousBlock()}while(t&&t.getNextBlock()===e&&(e=t));return e}getChildren(t){if(!t)return this.childBlocks_;t=[];for(let i,o=0;i=this.inputList[o];o++)if(i.connection){var e=i.connection.targetBlock();e&&t.push(e)}return(e=this.getNextBlock())&&t.push(e),t}setParent(t){if(t!==this.parentBlock_){var e=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),i=!!e;if(i&&t&&e!==t)throw Error("Block connected to superior one that is not new parent.");if(!i&&t)throw Error("Block not connected to new parent.");if(i&&!t)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?Q(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}}getDescendants(t){const e=[this],i=this.getChildren(t);for(let o,n=0;o=i[n];n++)e.push(...o.getDescendants(t));return e}isDeletable(){return this.deletable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnDeletable(){return this.deletable_}setDeletable(t){this.deletable_=t}isMovable(){return this.movable_&&!this.isShadow_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnMovable(){return this.movable_}setMovable(t){this.movable_=t}isDuplicatable(){return!this.workspace.hasBlockLimits()||this.workspace.isCapacityAvailable(N(this,!0))}isShadow(){return this.isShadow_}setShadow(t){this.isShadow_=t}isInsertionMarker(){return this.isInsertionMarker_}setInsertionMarker(t){this.isInsertionMarker_=t}isEditable(){return this.editable_&&!this.isDeadOrDying()&&!this.workspace.options.readOnly}isOwnEditable(){return this.editable_}setEditable(t){this.editable_=t;for(let t,e=0;t=this.inputList[e];e++)for(let e,i=0;e=t.fieldRow[i];i++)e.updateEditable()}isDisposed(){return this.disposed}isSimpleReporter(){if(!this.outputConnection)return!1;for(const t of this.inputList)if(t.connection||1<t.fieldRow.length)return!1;return!0}getMatchingConnection(t,e){const i=this.getConnections_(!0);if(t=t.getConnections_(!0),i.length!==t.length)throw Error("Connection lists did not match in length.");for(let o=0;o<t.length;o++)if(t[o]===e)return i[o];return null}setHelpUrl(t){this.helpUrl=t}setTooltip(t){this.tooltip=t}getTooltip(){return Gi(this)}getColour(){return this.colour_}getStyleName(){return this.styleName_}getHue(){return this.hue_}setColour(t){t=vo(t),this.hue_=t.hue,this.colour_=t.hex}setStyle(t){this.styleName_=t}setOnChange(t){if(t&&"function"!=typeof t)throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.onchange=t,this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_)}getField(t){if("string"!=typeof t)throw TypeError("Block.prototype.getField expects a string with the field name but received "+(void 0===t?"nothing":t+" of type "+typeof t)+" instead");for(let e,i=0;e=this.inputList[i];i++)for(let i,o=0;i=e.fieldRow[o];o++)if(i.name===t)return i;return null}getVars(){const t=[];for(let e,i=0;e=this.inputList[i];i++)for(let i,o=0;i=e.fieldRow[o];o++)i.referencesVariables()&&t.push(i.getValue());return t}getVarModels(){const t=[];for(let e,i=0;e=this.inputList[i];i++)for(let i,o=0;i=e.fieldRow[o];o++)if(i.referencesVariables()){const e=this.workspace.getVariableById(i.getValue());e&&t.push(e)}return t}updateVarName(t){for(let e,i=0;e=this.inputList[i];i++)for(let i,o=0;i=e.fieldRow[o];o++)i.referencesVariables()&&t.getId()===i.getValue()&&i.refreshVariableName()}renameVarById(t,e){for(let i,o=0;i=this.inputList[o];o++)for(let o,n=0;o=i.fieldRow[n];n++)o.referencesVariables()&&t===o.getValue()&&o.setValue(e)}getFieldValue(t){return(t=this.getField(t))?t.getValue():null}setFieldValue(t,e){const i=this.getField(e);if(!i)throw Error('Field "'+e+'" not found.');i.setValue(t)}setPreviousStatement(t,e){if(t)void 0===e&&(e=null),this.previousConnection||(this.previousConnection=this.makeConnection_(Cc.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(e);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}}setNextStatement(t,e){if(t)void 0===e&&(e=null),this.nextConnection||(this.nextConnection=this.makeConnection_(Cc.NEXT_STATEMENT)),this.nextConnection.setCheck(e);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}}setOutput(t,e){if(t)void 0===e&&(e=null),this.outputConnection||(this.outputConnection=this.makeConnection_(Cc.OUTPUT_VALUE)),this.outputConnection.setCheck(e);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}}setInputsInline(t){this.inputsInline!==t&&(d(new(y(Hs.CHANGE$$module$build$src$core$events$utils))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)}getInputsInline(){if(void 0!==this.inputsInline)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1]instanceof Ru&&this.inputList[t]instanceof Ru)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1]instanceof Hs.ValueInput$$module$build$src$core$inputs$value_input&&this.inputList[t]instanceof Ru)return!0;for(t=0;t<this.inputList.length;t++)if(this.inputList[t]instanceof xu)return!0;return!1}setOutputShape(t){this.outputShape_=t}getOutputShape(){return this.outputShape_}isEnabled(){return 0===this.disabledReasons.size}get disabled(){return Yn("disabled","v11","v12","the isEnabled or hasDisabledReason methods of Block"),this.hasDisabledReason(sl)}set disabled(t){Yn("disabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(t,sl)}setEnabled(t){Yn("setEnabled","v11","v12","the setDisabledReason method of Block"),this.setDisabledReason(!t,sl)}setDisabledReason(t,e){this.disabledReasons.has(e)!==t&&(t?this.disabledReasons.add(e):this.disabledReasons.delete(e),(t=new(y(Hs.CHANGE$$module$build$src$core$events$utils))(this,"disabled",null,!t,t)).setDisabledReason(e),d(t))}getInheritedDisabled(){let t=this.getSurroundParent();for(;t;){if(!t.isEnabled())return!0;t=t.getSurroundParent()}return!1}hasDisabledReason(t){return this.disabledReasons.has(t)}getDisabledReasons(){return this.disabledReasons}isCollapsed(){return this.collapsed_}setCollapsed(t){this.collapsed_!==t&&(d(new(y(Hs.CHANGE$$module$build$src$core$events$utils))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)}toString(t,e){e=this.toTokens(e);for(let t=2;t<e.length;t++)"("===e[t-2]&&")"===e[t]&&(e[t-2]=e[t-1],e.splice(t-1,2));let i="";return e=(e=e.reduce(((t,e)=>(t=t+("("===i||")"===e?"":" ")+e,i=e[e.length-1],t)),"")).trim()||"???",t&&e.length>t&&(e=e.substring(0,t-3)+"..."),e}toTokens(t="?"){const e=[];for(const o of this.inputList)if(o.name!=nl){for(const t of o.fieldRow)e.push(t.getText());if(o.connection){const n=o.connection.targetBlock();if(n){var i=o.connection;let r=i.getCheck();!r&&i.targetConnection&&(r=i.targetConnection.getCheck()),(i=!!r&&(r.includes("Boolean")||r.includes("Number")))&&e.push("("),e.push(...n.toTokens(t)),i&&e.push(")")}else e.push(t)}}return e}appendValueInput(t){return this.appendInput(new Hs.ValueInput$$module$build$src$core$inputs$value_input(t,this))}appendStatementInput(t){return this.statementInputCount++,this.appendInput(new Du(t,this))}appendDummyInput(t=""){return this.appendInput(new Ru(t,this))}appendEndRowInput(t=""){return this.appendInput(new xu(t,this))}appendInput(t){return this.inputList.push(t),t}appendInputFromRegistry(t,e){return(t=s(js.INPUT,t,!1))?this.appendInput(new t(e,this)):null}jsonInit(t){var e=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(e+"Must not have both an output and a previousStatement.");for(var i=0;t["args"+i];){if(void 0===t["message"+i])throw Error(e+`args${i} must have a corresponding message (message${i}).`);i++}if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(e+"Must not have both a colour and a style.");for(t.style?this.jsonInitStyle_(t,e):this.jsonInitColour_(t,e),i=0;void 0!==t["message"+i];)this.interpolate_(t["message"+i],t["args"+i]||[],t["implicitAlign"+i]||t["lastDummyAlign"+i],e),i++;if(void 0!==t.inputsInline&&(Hs.disable$$module$build$src$core$events$utils(),this.setInputsInline(t.inputsInline),Hs.enable$$module$build$src$core$events$utils()),void 0!==t.output&&this.setOutput(!0,t.output),void 0!==t.outputShape&&this.setOutputShape(t.outputShape),void 0!==t.previousStatement&&this.setPreviousStatement(!0,t.previousStatement),void 0!==t.nextStatement&&this.setNextStatement(!0,t.nextStatement),void 0!==t.tooltip&&(i=po(t.tooltip),this.setTooltip(i)),void 0!==t.enableContextMenu&&(this.contextMenu=!!t.enableContextMenu),void 0!==t.suppressPrefixSuffix&&(this.suppressPrefixSuffix=!!t.suppressPrefixSuffix),void 0!==t.helpUrl&&(i=po(t.helpUrl),this.setHelpUrl(i)),"string"==typeof t.extensions&&(console.warn(e+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),void 0!==t.mutator&&Ln(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(e=0;e<t.length;e++)Ln(t[e],this,!1)}jsonInitColour_(t,e){if("colour"in t)if(void 0===t.colour)console.warn(e+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch(i){console.warn(e+"Illegal colour value: ",t)}}}jsonInitStyle_(t,e){t=t.style;try{this.setStyle(t)}catch(i){console.warn(e+"Style does not exist: ",t)}}mixin(t,e){if(void 0!==e&&"boolean"!=typeof e)throw Error("opt_disableCheck must be a boolean if provided");if(!e){e=[];for(const i in t)void 0!==this[i]&&e.push(i);if(e.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(e))}Object.assign(this,t)}interpolate_(t,e,i,o){t=Co(t),this.validateTokens_(t,e.length),e=this.interpolateArguments_(t,e,i),i=[];for(let n,r=0;n=e[r];r++)if(this.isInputKeyword_(n.type)){if(t=this.inputFromJson_(n,o)){for(let e,o=0;e=i[o];o++)t.appendField(e[0],e[1]);i.length=0}}else(t=this.fieldFromJson_(n))&&i.push([t,n.name])}validateTokens_(t,e){const i=[];let o=0;for(let n=0;n<t.length;n++){const r=t[n];if("number"==typeof r){if(1>r||r>e)throw Error('Block "'+this.type+'": Message index %'+r+" out of range.");if(i[r])throw Error('Block "'+this.type+'": Message index %'+r+" duplicated.");i[r]=!0,o++}}if(o!==e)throw Error('Block "'+this.type+'": Message does not reference all '+e+" arg(s).")}interpolateArguments_(t,e,i){const o=[];for(let r=0;r<t.length;r++){var n=t[r];if("number"==typeof n&&(n=e[n-1]),"string"==typeof n)if("\n"===n)n={type:"input_end_row"},i&&(n.align=i);else if(!(n=this.stringToFieldJson_(n)))continue;o.push(n)}return(t=o.length)&&!this.isInputKeyword_(o[t-1].type)&&(t={type:"input_dummy"},i&&(t.align=i),o.push(t)),o}fieldFromJson_(t){const e=Hs.fromJson$$module$build$src$core$field_registry(t);return!e&&t.alt?"string"==typeof t.alt?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):e}inputFromJson_(t,e){var i={LEFT:Hs.Align$$module$build$src$core$inputs$align.LEFT,RIGHT:Hs.Align$$module$build$src$core$inputs$align.RIGHT,CENTRE:Hs.Align$$module$build$src$core$inputs$align.CENTRE,CENTER:Hs.Align$$module$build$src$core$inputs$align.CENTRE};let o;switch(t.type){case"input_value":o=this.appendValueInput(t.name);break;case"input_statement":o=this.appendStatementInput(t.name);break;case"input_dummy":o=this.appendDummyInput(t.name);break;case"input_end_row":o=this.appendEndRowInput(t.name);break;default:o=this.appendInputFromRegistry(t.type,t.name)}return o?(t.check&&o.setCheck(t.check),t.align&&(void 0===(i=i[t.align.toUpperCase()])?console.warn(e+"Illegal align value: ",t.align):o.setAlign(i)),o):null}isInputKeyword_(t){return"input_value"===t||"input_statement"===t||"input_dummy"===t||"input_end_row"===t||r(js.INPUT,t)}stringToFieldJson_(t){return(t=t.trim())?{type:"field_label",text:t}:null}moveInputBefore(t,e){if(t!==e){var i=-1,o=e?-1:this.inputList.length;for(let n,r=0;n=this.inputList[r];r++)if(n.name===t){if(i=r,-1!==o)break}else if(e&&n.name===e&&(o=r,-1!==i))break;if(-1===i)throw Error('Named input "'+t+'" not found.');if(-1===o)throw Error('Reference input "'+e+'" not found.');this.moveNumberedInputBefore(i,o)}}moveNumberedInputBefore(t,e){if(t===e)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(e>this.inputList.length)throw RangeError("Reference input "+e+" out of bounds.");const i=this.inputList[t];this.inputList.splice(t,1),t<e&&e--,this.inputList.splice(e,0,i)}removeInput(t,e){for(let e,i=0;e=this.inputList[i];i++)if(e.name===t)return e instanceof Du&&this.statementInputCount--,e.dispose(),this.inputList.splice(i,1),!0;if(e)return!1;throw Error("Input not found: "+t)}getInput(t){for(let e,i=0;e=this.inputList[i];i++)if(e.name===t)return e;return null}getInputTargetBlock(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()}getCommentText(){let t,e;return null!=(e=null==(t=this.getIcon(gl.COMMENT))?void 0:t.getText())?e:null}setCommentText(t){var e;let i;const o=null!=(i=null==(e=this.getIcon(gl.COMMENT))?void 0:e.getText())?i:null;if(o!==t){if(null!==t){if(!(e=this.getIcon(gl.COMMENT))){if(!(e=s(js.ICON,gl.COMMENT.toString(),!1)))throw Error("No comment icon class is registered, so a comment cannot be set");if(e=new e(this),!br(e))throw Error("The class registered as a comment icon does not conform to the ICommentIcon interface");e=this.addIcon(e)}Hs.disable$$module$build$src$core$events$utils(),e.setText(t),Hs.enable$$module$build$src$core$events$utils()}else this.removeIcon(gl.COMMENT);d(new(y(Hs.CHANGE$$module$build$src$core$events$utils))(this,"comment",null,o,t))}}setWarningText(t,e){}setMutator(t){}addIcon(t){if(this.hasIcon(t.getType()))throw new Jc(t);return this.icons.push(t),this.icons.sort(((t,e)=>t.getWeight()-e.getWeight())),t}removeIcon(t){if(!this.hasIcon(t))return!1;let e;return null==(e=this.getIcon(t))||e.dispose(),this.icons=this.icons.filter((e=>!e.getType().equals(t))),!0}hasIcon(t){return this.icons.some((e=>e.getType().equals(t)))}getIcon(t){return t instanceof gl?this.icons.find((e=>e.getType().equals(t))):this.icons.find((e=>e.getType().toString()===t))}getIcons(){return[...this.icons]}getRelativeToSurfaceXY(){return this.xy_}moveBy(t,e,i){if(this.parentBlock_)throw Error("Block has parent");const o=new(y(Hs.MOVE$$module$build$src$core$events$utils))(this);i&&o.setReason(i),this.xy_.translate(t,e),o.recordNew(),d(o)}makeConnection_(t){return new Lu(this,t)}allInputsFilled(t){if(void 0===t&&(t=!0),!t&&this.isShadow())return!1;for(let i,o=0;i=this.inputList[o];o++)if(i.connection){var e=i.connection.targetBlock();if(!e||!e.allInputsFilled(t))return!1}return!(e=this.getNextBlock())||e.allInputsFilled(t)}toDevString(){let t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t}};Pu.COLLAPSED_INPUT_NAME=nl,Pu.COLLAPSED_FIELD_NAME=rl;var $u=class{constructor(t,e,i,o){this.workspace=t,this.targetWorkspace=e,this.isFlyoutLabel=o,this.onMouseUpWrapper=null,this.height=this.width=0,this.cursorSvg=this.svgText=this.svgGroup=null,this.text=i.text,this.position=new mg(0,0),this.callbackKey=i.callbackKey||i.callbackkey,this.cssClass=i["web-class"]||null,this.info=i}createDom(){var t=this.isFlyoutLabel?"blocklyFlyoutLabel":"blocklyFlyoutButton";let e;this.cssClass&&(t+=" "+this.cssClass),this.svgGroup=tt(Og.G,{class:t},this.workspace.getCanvas()),this.isFlyoutLabel||(e=tt(Og.RECT,{class:"blocklyFlyoutButtonShadow",rx:$u.BORDER_RADIUS,ry:$u.BORDER_RADIUS,x:1,y:1},this.svgGroup)),t=tt(Og.RECT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:$u.BORDER_RADIUS,ry:$u.BORDER_RADIUS},this.svgGroup);const i=tt(Og.TEXT,{class:this.isFlyoutLabel?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup);var o=po(this.text);this.workspace.RTL&&(o+="â"),i.textContent=o,this.isFlyoutLabel&&(this.svgText=i,this.workspace.getThemeManager().subscribe(this.svgText,"flyoutForegroundColour","fill"));const n=pt(i,"fontSize"),r=pt(i,"fontWeight"),s=pt(i,"fontFamily");if(this.width=ut(i,n,r,s),o=dt(o,n,r,s),this.height=o.height,!this.isFlyoutLabel){let t,i;this.width+=2*$u.TEXT_MARGIN_X,this.height+=2*$u.TEXT_MARGIN_Y,null==(t=e)||t.setAttribute("width",String(this.width)),null==(i=e)||i.setAttribute("height",String(this.height))}return t.setAttribute("width",String(this.width)),t.setAttribute("height",String(this.height)),i.setAttribute("x",String(this.width/2)),i.setAttribute("y",String(this.height/2-o.height/2+o.baseline)),this.updateTransform(),this.onMouseUpWrapper=V(this.svgGroup,"pointerup",this,this.onMouseUp),this.svgGroup}show(){this.updateTransform(),this.svgGroup.setAttribute("display","block")}updateTransform(){this.svgGroup.setAttribute("transform","translate("+this.position.x+","+this.position.y+")")}moveTo(t,e){this.position.x=t,this.position.y=e,this.updateTransform()}isLabel(){return this.isFlyoutLabel}getPosition(){return this.position}getButtonText(){return this.text}getTargetWorkspace(){return this.targetWorkspace}getWorkspace(){return this.workspace}dispose(){this.onMouseUpWrapper&&j(this.onMouseUpWrapper),this.svgGroup&&rt(this.svgGroup),this.svgText&&this.workspace.getThemeManager().unsubscribe(this.svgText)}setCursorSvg(t){t?this.svgGroup&&(this.svgGroup.appendChild(t),this.cursorSvg=t):this.cursorSvg=null}setMarkerSvg(){throw Error("Attempted to set a marker on a button.")}onMouseUp(t){(t=this.targetWorkspace.getGesture(t))&&t.cancel(),this.isFlyoutLabel&&this.callbackKey?console.warn("Labels should not have callbacks. Label text: "+this.text):this.isFlyoutLabel||this.callbackKey&&this.targetWorkspace.getButtonCallback(this.callbackKey)?this.isFlyoutLabel||(t=this.targetWorkspace.getButtonCallback(this.callbackKey))&&t(this):console.warn("Buttons should have callbacks. Button text: "+this.text)}};$u.TEXT_MARGIN_X=5,$u.TEXT_MARGIN_Y=2,$u.BORDER_RADIUS=4,J("\n.blocklyFlyoutButton {\n  fill: #888;\n  cursor: default;\n}\n\n.blocklyFlyoutButtonShadow {\n  fill: #666;\n}\n\n.blocklyFlyoutButton:hover {\n  fill: #aaa;\n}\n\n.blocklyFlyoutLabel {\n  cursor: default;\n}\n\n.blocklyFlyoutLabelBackground {\n  opacity: 0;\n}\n");var Bu=class{constructor(t,e,i){if(this.wsCoordinate=null,!e)throw Error("Cannot create a node without a location.");this.type=t,this.isConnectionLocation=Bu.isConnectionType(t),this.location=e,this.processParams(i||null)}processParams(t){t&&t.wsCoordinate&&(this.wsCoordinate=t.wsCoordinate)}getLocation(){return this.location}getType(){return this.type}getWsCoordinate(){return this.wsCoordinate}isConnection(){return this.isConnectionLocation}findNextForInput(){var t=this.location.getParentInput();const e=t.getSourceBlock();for(t=e.inputList.indexOf(t),t+=1;t<e.inputList.length;t++){const i=e.inputList[t],o=i.fieldRow;for(let t=0;t<o.length;t++){const e=o[t];if(e.isClickable()||Bu.NAVIGATE_ALL_FIELDS)return Bu.createFieldNode(e)}if(i.connection)return Bu.createInputNode(i)}return null}findNextForField(){var t=this.location,e=t.getParentInput();const i=t.getSourceBlock();if(!i)throw Error("The current AST location is not associated with a block");var o=i.inputList.indexOf(e);for(t=e.fieldRow.indexOf(t)+1;o<i.inputList.length;o++){const n=(e=i.inputList[o]).fieldRow;for(;t<n.length;){if(n[t].isClickable()||Bu.NAVIGATE_ALL_FIELDS)return Bu.createFieldNode(n[t]);t++}if(t=0,e.connection)return Bu.createInputNode(e)}return null}findPrevForInput(){const t=this.location.getParentInput(),e=t.getSourceBlock();for(var i=e.inputList.indexOf(t);0<=i;i--){var o=e.inputList[i];if(o.connection&&o!==t)return Bu.createInputNode(o);for(let t=(o=o.fieldRow).length-1;0<=t;t--){const e=o[t];if(e.isClickable()||Bu.NAVIGATE_ALL_FIELDS)return Bu.createFieldNode(e)}}return null}findPrevForField(){var t=this.location;const e=t.getParentInput(),i=t.getSourceBlock();if(!i)throw Error("The current AST location is not associated with a block");var o=i.inputList.indexOf(e);for(t=e.fieldRow.indexOf(t)-1;0<=o;o--){var n=i.inputList[o];if(n.connection&&n!==e)return Bu.createInputNode(n);for(n=n.fieldRow;-1<t;){if(n[t].isClickable()||Bu.NAVIGATE_ALL_FIELDS)return Bu.createFieldNode(n[t]);t--}0<=o-1&&(t=i.inputList[o-1].fieldRow.length-1)}return null}navigateBetweenStacks(t){var e=this.getLocation();if(e.getSourceBlock){var i=e.getSourceBlock();i&&(e=i)}if(!e||e.isDeadOrDying())return null;if(e.workspace.isFlyout)return this.navigateFlyoutContents(t);i=e.getRootBlock(),e=i.workspace.getTopBlocks(!0);for(let o=0;o<e.length;o++)if(i.id===e[o].id)return-1===(t=o+(t?1:-1))||t===e.length?null:Bu.createStackNode(e[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")}navigateFlyoutContents(t){let e;switch(this.getType()){case Bu.types.STACK:e=this.getLocation();var i=e.workspace.targetWorkspace;break;case Bu.types.BUTTON:e=this.getLocation(),i=e.getTargetWorkspace();break;default:return null}return(i=i.getFlyout())&&(t=this.findNextLocationInFlyout(i.getContents(),e,t))?"button"===t.type&&t.button?Bu.createButtonNode(t.button):"block"===t.type&&t.block?Bu.createStackNode(t.block):null:null}findNextLocationInFlyout(t,e,i){const o=t.findIndex((t=>e instanceof Pu&&t.block===e||e instanceof $u&&t.button===e));return 0>o||-1===(i=i?o+1:o-1)||i===t.length?null:t[i]}findTopASTNodeForBlock(t){const e=yr(t);return e?Bu.createConnectionNode(e):Bu.createBlockNode(t)}getOutAstNodeForBlock(t){if(!t)return null;t=t.getTopStackBlock();const e=yr(t);return e&&e.targetConnection&&e.targetConnection.getParentInput()?Bu.createInputNode(e.targetConnection.getParentInput()):Bu.createStackNode(t)}findFirstFieldOrInput(t){t=t.inputList;for(let e=0;e<t.length;e++){const i=t[e],o=i.fieldRow;for(let t=0;t<o.length;t++){const e=o[t];if(e.isClickable()||Bu.NAVIGATE_ALL_FIELDS)return Bu.createFieldNode(e)}if(i.connection)return Bu.createInputNode(i)}return null}getSourceBlock(){return this.getType()===Bu.types.BLOCK||this.getType()===Bu.types.STACK?this.getLocation():this.getType()===Bu.types.WORKSPACE||this.getType()===Bu.types.BUTTON?null:this.getLocation().getSourceBlock()}next(){switch(this.type){case Bu.types.STACK:return this.navigateBetweenStacks(!0);case Bu.types.OUTPUT:return Bu.createBlockNode(this.location.getSourceBlock());case Bu.types.FIELD:return this.findNextForField();case Bu.types.INPUT:return this.findNextForInput();case Bu.types.BLOCK:const t=this.location.nextConnection;if(!t)break;return Bu.createConnectionNode(t);case Bu.types.PREVIOUS:return Bu.createBlockNode(this.location.getSourceBlock());case Bu.types.NEXT:return Bu.createConnectionNode(this.location.targetConnection);case Bu.types.BUTTON:return this.navigateFlyoutContents(!0)}return null}in(){switch(this.type){case Bu.types.WORKSPACE:const t=this.location.getTopBlocks(!0);if(0<t.length)return Bu.createStackNode(t[0]);break;case Bu.types.STACK:return this.findTopASTNodeForBlock(this.location);case Bu.types.BLOCK:return this.findFirstFieldOrInput(this.location);case Bu.types.INPUT:return Bu.createConnectionNode(this.location.targetConnection)}return null}prev(){switch(this.type){case Bu.types.STACK:return this.navigateBetweenStacks(!1);case Bu.types.FIELD:return this.findPrevForField();case Bu.types.INPUT:return this.findPrevForInput();case Bu.types.BLOCK:var t=yr(this.location);if(!t)break;return Bu.createConnectionNode(t);case Bu.types.PREVIOUS:if((t=this.location.targetConnection)&&!t.getParentInput())return Bu.createConnectionNode(t);break;case Bu.types.NEXT:return Bu.createBlockNode(this.location.getSourceBlock());case Bu.types.BUTTON:return this.navigateFlyoutContents(!1)}return null}out(){switch(this.type){case Bu.types.STACK:var t=this.location,e=t.getRelativeToSurfaceXY();return e=new mg(e.x,e.y+Bu.DEFAULT_OFFSET_Y),Bu.createWorkspaceNode(t.workspace,e);case Bu.types.OUTPUT:return(e=(t=this.location).targetConnection)?Bu.createConnectionNode(e):Bu.createStackNode(t.getSourceBlock());case Bu.types.FIELD:if(!(t=this.location.getSourceBlock()))throw Error("The current AST location is not associated with a block");return Bu.createBlockNode(t);case Bu.types.INPUT:return Bu.createBlockNode(this.location.getSourceBlock());case Bu.types.BLOCK:return this.getOutAstNodeForBlock(this.location);case Bu.types.PREVIOUS:case Bu.types.NEXT:return this.getOutAstNodeForBlock(this.location.getSourceBlock())}return null}static isConnectionType(t){switch(t){case Bu.types.PREVIOUS:case Bu.types.NEXT:case Bu.types.INPUT:case Bu.types.OUTPUT:return!0}return!1}static createFieldNode(t){return t?new Bu(Bu.types.FIELD,t):null}static createConnectionNode(t){if(!t)return null;const e=t.type;return e===Cc.INPUT_VALUE||e===Cc.NEXT_STATEMENT&&t.getParentInput()?Bu.createInputNode(t.getParentInput()):e===Cc.NEXT_STATEMENT?new Bu(Bu.types.NEXT,t):e===Cc.OUTPUT_VALUE?new Bu(Bu.types.OUTPUT,t):e===Cc.PREVIOUS_STATEMENT?new Bu(Bu.types.PREVIOUS,t):null}static createInputNode(t){return t&&t.connection?new Bu(Bu.types.INPUT,t.connection):null}static createBlockNode(t){return t?new Bu(Bu.types.BLOCK,t):null}static createStackNode(t){return t?new Bu(Bu.types.STACK,t):null}static createButtonNode(t){return t?new Bu(Bu.types.BUTTON,t):null}static createWorkspaceNode(t,e){return e&&t?new Bu(Bu.types.WORKSPACE,t,{wsCoordinate:e}):null}static createTopNode(t){const e=yr(t);return e?Bu.createConnectionNode(e):Bu.createBlockNode(t)}};Bu.NAVIGATE_ALL_FIELDS=!1,Bu.DEFAULT_OFFSET_Y=-20,function(t){(t=t.types||(t.types={})).FIELD="field",t.BLOCK="block",t.INPUT="input",t.OUTPUT="output",t.NEXT="next",t.PREVIOUS="previous",t.STACK="stack",t.WORKSPACE="workspace",t.BUTTON="button"}(Bu||(Bu={}));var Fu=class extends $a{constructor(t,e,i,o){let n=t?t.workspace.id:void 0;o&&o.getType()===Bu.types.WORKSPACE&&(n=o.getLocation().id),super(n),this.type=ra,this.blockId=null==t?void 0:t.id,this.oldNode=i||void 0,this.newNode=o,this.isCursor=e}toJson(){const t=super.toJson();if(void 0===this.isCursor)throw Error("Whether this is a cursor event or not is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newNode)throw Error("The new node is undefined. Either pass a node to the constructor, or call fromJson");return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new Fu)).isCursor=t.isCursor,e.blockId=t.blockId,e.oldNode=t.oldNode,e.newNode=t.newNode,e}};t(js.EVENT,ra,Fu);var zu=class{constructor(t,e,i){this.workspace=t,this.marker=i,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=this.currentMarkerSvg=this.parent=null,this.constants_=e,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=i.colour||t}getSvgRoot(){return this.svgGroup_}getMarker(){return this.marker}isCursor(){return"cursor"===this.marker.type}createDom(){const t=this.isCursor()?"blocklyCursor":"blocklyMarker";return this.svgGroup_=tt(Og.G,{class:t}),this.createDomInternal_(),this.svgGroup_}setParent_(t){this.isCursor()?(this.parent&&this.parent.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent&&this.parent.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent=t}draw(t,e){if(e){this.constants_=this.workspace.getRenderer().getConstants();var i=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker.colour||i,this.applyColour_(e),this.showAtLocation_(e),this.fireMarkerEvent(t,e),void 0!==(t=this.currentMarkerSvg.childNodes[0])&&t.beginElement&&t.beginElement()}else this.hide()}showAtLocation_(t){const e=t.getLocation().type;t.getType()===Bu.types.BLOCK?this.showWithBlock_(t):t.getType()===Bu.types.OUTPUT?this.showWithOutput_(t):e===Cc.INPUT_VALUE?this.showWithInput_(t):e===Cc.NEXT_STATEMENT?this.showWithNext_(t):t.getType()===Bu.types.PREVIOUS?this.showWithPrevious_(t):t.getType()===Bu.types.FIELD?this.showWithField_(t):t.getType()===Bu.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()===Bu.types.STACK?this.showWithStack_(t):t.getType()===Bu.types.BUTTON&&this.showWithButton_(t)}showWithBlockPrevOutput(t){const e=(t=t.getSourceBlock()).width;var i=t.height,o=.75*i;const n=this.constants_.CURSOR_BLOCK_PADDING;t.previousConnection?(i=this.constants_.shapeFor(t.previousConnection),this.positionPrevious_(e,n,o,i)):t.outputConnection?(o=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(e,i,o)):this.positionBlock_(e,n,o),this.setParent_(t),this.showCurrent_()}showWithBlock_(t){this.showWithBlockPrevOutput(t)}showWithPrevious_(t){this.showWithBlockPrevOutput(t)}showWithOutput_(t){this.showWithBlockPrevOutput(t)}showWithCoordinates_(t){var e=t.getWsCoordinate();t=e.x,e=e.y,this.workspace.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,e,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace),this.showCurrent_()}showWithField_(t){const e=(t=t.getLocation()).getSize().width,i=t.getSize().height;this.positionRect_(0,0,e,i),this.setParent_(t),this.showCurrent_()}showWithInput_(t){const e=(t=t.getLocation()).getSourceBlock();this.positionInput_(t),this.setParent_(e),this.showCurrent_()}showWithNext_(t){var e=t.getLocation();t=e.getSourceBlock();let i=0;e=e.getOffsetInBlock().y;const o=t.getHeightWidth().width;this.workspace.RTL&&(i=-o),this.positionLine_(i,e,o),this.setParent_(t),this.showCurrent_()}showWithStack_(t){var e=(t=t.getLocation()).getHeightWidth();const i=e.width+this.constants_.CURSOR_STACK_PADDING;e=e.height+this.constants_.CURSOR_STACK_PADDING;const o=-this.constants_.CURSOR_STACK_PADDING/2,n=-this.constants_.CURSOR_STACK_PADDING/2;let r=o;this.workspace.RTL&&(r=-(i+o)),this.positionRect_(r,n,i,e),this.setParent_(t),this.showCurrent_()}showWithButton_(t){const e=(t=t.getLocation()).width+this.constants_.CURSOR_STACK_PADDING,i=t.height+this.constants_.CURSOR_STACK_PADDING,o=-this.constants_.CURSOR_STACK_PADDING/2,n=-this.constants_.CURSOR_STACK_PADDING/2;let r=o;this.workspace.RTL&&(r=-(e+o)),this.positionRect_(r,n,e,i),this.setParent_(t),this.showCurrent_()}showCurrent_(){this.hide(),this.currentMarkerSvg&&(this.currentMarkerSvg.style.display="")}positionBlock_(t,e,i){if(t=Qn(-e,i)+tr("V",-e)+tr("H",t+2*e)+tr("V",i),!this.markerBlock_)throw Error("createDom should be called before positioning the marker");this.markerBlock_.setAttribute("d",t),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionInput_(t){const e=t.getOffsetInBlock().x,i=t.getOffsetInBlock().y;t=Kn(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+e+","+i+")"+(this.workspace.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_}positionLine_(t,e,i){if(!this.markerSvgLine_)throw Error("createDom should be called before positioning the line");this.markerSvgLine_.setAttribute("x",`${t}`),this.markerSvgLine_.setAttribute("y",`${e}`),this.markerSvgLine_.setAttribute("width",`${i}`),this.currentMarkerSvg=this.markerSvgLine_}positionOutput_(t,e,i){if(!this.markerBlock_)throw Error("createDom should be called before positioning the output");t=Qn(t,0)+tr("h",-(t-i.width))+tr("v",this.constants_.TAB_OFFSET_FROM_TOP)+i.pathDown+tr("V",e)+tr("H",t),this.markerBlock_.setAttribute("d",t),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionPrevious_(t,e,i,o){if(!this.markerBlock_)throw Error("createDom should be called before positioning the previous connection marker");t=Qn(-e,i)+tr("V",-e)+tr("H",this.constants_.NOTCH_OFFSET_LEFT)+o.pathLeft+tr("H",t+2*e)+tr("V",i),this.markerBlock_.setAttribute("d",t),this.workspace.RTL&&this.flipRtl(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_}positionRect_(t,e,i,o){if(!this.markerSvgRect_)throw Error("createDom should be called before positioning the rect");this.markerSvgRect_.setAttribute("x",`${t}`),this.markerSvgRect_.setAttribute("y",`${e}`),this.markerSvgRect_.setAttribute("width",`${i}`),this.markerSvgRect_.setAttribute("height",`${o}`),this.currentMarkerSvg=this.markerSvgRect_}flipRtl(t){t.setAttribute("transform","scale(-1 1)")}hide(){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before hiding the marker");this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"}fireMarkerEvent(t,e){const i=e.getSourceBlock();t=new(y(ra))(i,this.isCursor(),t,e),d(t)}getBlinkProperties_(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}}createDomInternal_(){if(this.markerSvg_=tt(Og.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=tt(Og.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.markerSvg_),this.markerSvgRect_=tt(Og.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10},this.markerSvg_),this.markerInput_=tt(Og.PATH,{transform:""},this.markerSvg_),this.markerBlock_=tt(Og.PATH,{transform:"",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const t=this.getBlinkProperties_();tt(Og.ANIMATE,t,this.markerSvgLine_),tt(Og.ANIMATE,t,this.markerInput_),tt(Og.ANIMATE,Object.assign({},t,{attributeName:"stroke"}),this.markerBlock_)}return this.markerSvg_}applyColour_(t){if(!(this.markerSvgLine_&&this.markerSvgRect_&&this.markerInput_&&this.markerBlock_))throw Error("createDom should be called before applying color to the markerj");this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(t=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstElementChild.setAttribute("values",t),this.markerInput_.firstElementChild.setAttribute("values",t),this.markerBlock_.firstElementChild.setAttribute("values",t))}dispose(){this.svgGroup_&&rt(this.svgGroup_)}},Hu=class{constructor(t,e,i){this.markerSvg=this.cursorSvg=null,this.connectionHighlights=new WeakMap,this.highlightOffsets=new WeakMap,this.constants=i,this.style=e,this.svgRoot=t,this.svgPath=tt(Og.PATH,{class:"blocklyPath"},this.svgRoot)}setPath(t){this.svgPath.setAttribute("d",t)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)")}setCursorSvg(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null}setMarkerSvg(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null}applyColour(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())}setStyle(t){this.style=t}setClass_(t,e){t&&(e?et(this.svgRoot,t):ot(this.svgRoot,t))}updateHighlighted(t){t?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")}updateShadow_(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))}updateDisabled_(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")}updateSelected(t){this.setClass_("blocklySelected",t)}updateDraggingDelete(t){this.setClass_("blocklyDraggingDelete",t)}updateInsertionMarker(t){this.setClass_("blocklyInsertionMarker",t)}updateMovable(t){this.setClass_("blocklyDraggable",t)}updateReplacementFade(t){this.setClass_("blocklyReplaceable",t)}updateShapeForInputHighlight(t,e){}addConnectionHighlight(t,e,i,o){if(this.connectionHighlights.has(t)){if(this.currentHighlightMatchesNew(t,e,i))return;this.removeConnectionHighlight(t)}e=tt(Og.PATH,{class:"blocklyHighlightedConnectionPath",d:e,transform:`translate(${i.x}, ${i.y})`+(o?" scale(-1 1)":"")},this.svgRoot),this.connectionHighlights.set(t,e)}currentHighlightMatchesNew(t,e,i){let o;const n=null==(o=this.connectionHighlights.get(t))?void 0:o.getAttribute("d");return t=this.highlightOffsets.get(t),n===e&&mg.equals(t,i)}removeConnectionHighlight(t){const e=this.connectionHighlights.get(t);e&&(rt(e),this.connectionHighlights.delete(t))}},Gu=class{constructor(t){this.activeCandidate=this.lastMarker=this.lastOnStack=null,this.wouldDeleteBlock=!1,this.fadedBlock=this.highlightedBlock=this.markerConnection=null,Hs.setSelected$$module$build$src$core$common(t),this.topBlock=t,this.workspace=t.workspace,this.firstMarker=this.createMarkerBlock(this.topBlock),this.availableConnections=this.initAvailableConnections(),this.lastOnStack&&(this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock()))}dispose(){this.availableConnections.length=0,this.disposeInsertionMarker(this.firstMarker),this.disposeInsertionMarker(this.lastMarker)}updateAvailableConnections(){this.availableConnections=this.initAvailableConnections()}wouldConnectBlock(){return!!this.activeCandidate}applyConnections(){if(this.activeCandidate){Hs.disable$$module$build$src$core$events$utils(),this.hidePreview(),Hs.enable$$module$build$src$core$events$utils();var{local:t,closest:e}=this.activeCandidate;t.connect(e);var i=t.isSuperior()?e:t,o=this.topBlock.getRootBlock();pe().then((()=>{vn(i.getSourceBlock()),setTimeout((()=>{o.bringToFront()}),0)}))}}update(t,e){const i=this.getCandidate(t);((this.wouldDeleteBlock=this.shouldDelete(!!i,e))||this.shouldUpdatePreviews(i,t))&&(Hs.disable$$module$build$src$core$events$utils(),this.maybeHidePreview(i),this.maybeShowPreview(i),Hs.enable$$module$build$src$core$events$utils())}createMarkerBlock(t){let e;Hs.disable$$module$build$src$core$events$utils();try{const i=Pe(t,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!i)throw Error(`Failed to serialize source block. ${t.toDevString()}`);e=We(i,this.workspace);for(const t of e.getDescendants(!1))t.setInsertionMarker(!0);e.initSvg(),e.getSvgRoot().setAttribute("visibility","hidden")}finally{Hs.enable$$module$build$src$core$events$utils()}return e}initAvailableConnections(){const t=this.topBlock.getConnections_(!1),e=this.topBlock.lastConnectionInStack(!0);return e&&e!==this.topBlock.nextConnection&&(t.push(e),this.lastOnStack=e),t}shouldUpdatePreviews(t,e){if(!t)return!!this.activeCandidate;if(!this.activeCandidate)return!0;const{local:i,closest:o}=this.activeCandidate;if(o===t.closest&&i===t.local)return!1;const n=i.x+e.x-o.x;return e=i.y+e.y-o.y,t.radius<Math.sqrt(n*n+e*e)-Hs.config$$module$build$src$core$config.currentConnectionPreference}getCandidate(t){this.markerConnection&&this.markerConnection.isConnected()||this.updateAvailableConnections();let e=this.getStartRadius(),i=null;for(let o=0;o<this.availableConnections.length;o++){const n=this.availableConnections[o],r=n.closest(e,t);r.connection&&(i={closest:r.connection,local:n,radius:r.radius},e=r.radius)}return i}getStartRadius(){return this.activeCandidate?Hs.config$$module$build$src$core$config.connectingSnapRadius:Hs.config$$module$build$src$core$config.snapRadius}shouldDelete(t,e){return!(!e||!this.workspace.getComponentManager().hasCapability(e.id,Ig.Capability.DELETE_AREA))&&e.wouldDelete(this.topBlock)}maybeShowPreview(t){if(!this.wouldDeleteBlock&&t){var e,i=t.closest;i===(null==(e=this.activeCandidate)?void 0:e.closest)||i.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.activeCandidate=t,this.showPreview(this.activeCandidate))}}showPreview(t){const e=this.workspace.getRenderer();switch(e.getConnectionPreviewMethod(t.closest,t.local,this.topBlock)){case Gu.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline(t);break;case Gu.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker(t);break;case Gu.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade(t)}e.shouldHighlightConnection(t.closest)&&t.closest.highlight()}maybeHidePreview(t){if(t){if(this.activeCandidate){const e=this.activeCandidate.local!==t.local;(this.activeCandidate.closest!==t.closest||e||this.wouldDeleteBlock)&&this.hidePreview()}}else this.hidePreview();this.activeCandidate=this.markerConnection=null}hidePreview(){let t;const e=null==(t=this.activeCandidate)?void 0:t.closest;e&&e.targetBlock()&&this.workspace.getRenderer().shouldHighlightConnection(e)&&e.unhighlight(),this.hideReplacementFade(),this.hideInsertionInputOutline(),this.hideInsertionMarker()}showInsertionMarker(t){const{local:e,closest:i}=t;let o,n=(t=this.lastOnStack&&e===this.lastOnStack)?this.lastMarker:this.firstMarker;if(!n)throw Error("Cannot show the insertion marker because there is no insertion marker block");try{o=n.getMatchingConnection(e.getSourceBlock(),e)}catch(i){if(t&&this.lastOnStack?(this.disposeInsertionMarker(this.lastMarker),n=this.lastMarker=this.createMarkerBlock(this.lastOnStack.getSourceBlock())):(this.disposeInsertionMarker(this.firstMarker),n=this.firstMarker=this.createMarkerBlock(this.topBlock)),!n)throw Error("Cannot show the insertion marker because there is no insertion marker block");o=n.getMatchingConnection(e.getSourceBlock(),e)}if(!o)throw Error("Cannot show the insertion marker because there is no associated connection");if(o===this.markerConnection)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");n.queueRender(),fe(),o.connect(i);const r={x:i.x-o.x,y:i.y-o.y},s=o.getOffsetInBlock().clone(),a=o;pe().then((()=>{let t,e;null==(t=n)||t.positionNearConnection(a,r,s),null==(e=n)||e.getSvgRoot().setAttribute("visibility","visible")})),this.markerConnection=o}hideInsertionMarker(){if(this.markerConnection){var t,e=this.markerConnection,i=e.getSourceBlock(),o=i.outputConnection;if(null!=(t=i.previousConnection)&&t.targetConnection||null!=o&&o.targetConnection)i.unplug(!0);else{let t;null==(t=e.targetBlock())||t.unplug(!1)}if(e.targetConnection)throw Error("markerConnection still connected at the end of disconnectInsertionMarker");this.markerConnection=null,(e=i.getSvgRoot())&&e.setAttribute("visibility","hidden")}}showInsertionInputOutline(t){t=t.closest,this.highlightedBlock=t.getSourceBlock(),this.highlightedBlock.highlightShapeForInput(t,!0)}hideInsertionInputOutline(){if(this.highlightedBlock){if(!this.activeCandidate)throw Error("Cannot hide the insertion marker outline because there is no active candidate");this.highlightedBlock.highlightShapeForInput(this.activeCandidate.closest,!1),this.highlightedBlock=null}}showReplacementFade(t){if(this.fadedBlock=t.closest.targetBlock(),!this.fadedBlock)throw Error("Cannot show the replacement fade because the closest connection does not have a target block");this.fadedBlock.fadeForReplacement(!0)}hideReplacementFade(){this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null)}getInsertionMarkers(){const t=[];return this.firstMarker&&t.push(this.firstMarker),this.lastMarker&&t.push(this.lastMarker),t}disposeInsertionMarker(t){if(t){Hs.disable$$module$build$src$core$events$utils();try{t.dispose()}finally{Hs.enable$$module$build$src$core$events$utils()}}}};!function(t){(t=t.PREVIEW_TYPE||(t.PREVIEW_TYPE={}))[t.INSERTION_MARKER=0]="INSERTION_MARKER",t[t.INPUT_OUTLINE=1]="INPUT_OUTLINE",t[t.REPLACEMENT_FADE=2]="REPLACEMENT_FADE"}(Gu||(Gu={}));var Uu=Gu.PREVIEW_TYPE,Vu={};Vu.InsertionMarkerManager=Gu,Vu.PreviewType=Uu;var Wu=class{constructor(t){this.overrides=null,this.name=t}getClassName(){return this.name+"-renderer"}init(t,e){this.constants_=this.makeConstants_(),e&&(this.overrides=e,Object.assign(this.constants_,e)),this.constants_.setTheme(t),this.constants_.init()}createDom(t,e){this.constants_.createDom(t,this.name+"-"+e.name,"."+this.getClassName()+"."+e.getClassName())}refreshDom(t,e){const i=this.getConstants();i.dispose(),this.constants_=this.makeConstants_(),this.overrides&&Object.assign(this.constants_,this.overrides),this.constants_.randomIdentifier=i.randomIdentifier,this.constants_.setTheme(e),this.constants_.init(),this.createDom(t,e)}dispose(){this.constants_&&this.constants_.dispose()}makeConstants_(){return new Eu}makeRenderInfo_(t){return new Mu(this,t)}makeDrawer_(t,e){return new ku(t,e)}makeMarkerDrawer(t,e){return new zu(t,this.getConstants(),e)}makePathObject(t,e){return new Hu(t,e,this.constants_)}getConstants(){return this.constants_}shouldHighlightConnection(t){return!0}orphanCanConnectAtEnd(t,e,i){return!!Lu.getConnectionForOrphanedConnection(t,i===Cc.OUTPUT_VALUE?e.outputConnection:e.previousConnection)}getConnectionPreviewMethod(t,e,i){return Yn("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),e.type===Cc.OUTPUT_VALUE||e.type===Cc.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(i,t.targetBlock(),e.type)?Gu.PREVIEW_TYPE.INSERTION_MARKER:Gu.PREVIEW_TYPE.REPLACEMENT_FADE:Gu.PREVIEW_TYPE.INSERTION_MARKER}render(t){const e=this.makeRenderInfo_(t);e.measure(),this.makeDrawer_(t,e).draw()}},ju={};ju.BottomRow=su,ju.Connection=au,ju.ConstantProvider=Eu,ju.Drawer=ku,ju.ExternalValueInput=lu,ju.Field=hu,ju.Hat=cu,ju.Icon=uu,ju.InRowSpacer=du,ju.InlineInput=Au,ju.InputConnection=gu,ju.InputRow=Cu,ju.JaggedEdge=pu,ju.MarkerSvg=zu,ju.Measurable=nu,ju.NextConnection=fu,ju.OutputConnection=vu,ju.PathObject=Hu,ju.PreviousConnection=mu,ju.RenderInfo=Mu,ju.Renderer=Wu,ju.RoundCorner=bu,ju.Row=ru,ju.SpacerRow=yu,ju.SquareCorner=_u,ju.StatementInput=Iu,ju.TopRow=Tu,ju.Types=ou,ju.init=Er,ju.register=_r,ju.unregister=Tr;var Yu=class{constructor(t,e){this.workspace=t,this.theme=e,this.subscribedWorkspaces_=[],this.componentDB=new Map}getTheme(){return this.theme}setTheme(t){var e=this.theme;this.theme=t,(t=this.workspace.getInjectionDiv())&&(e&&(e=e.getClassName())&&ot(t,e),(e=this.theme.getClassName())&&et(t,e));for(let t,e=0;t=this.subscribedWorkspaces_[e];e++)t.refreshTheme();for(const[i,o]of this.componentDB)for(const n of o){t=n.element,e=n.propertyName;const o=this.theme&&this.theme.getComponentStyle(i);t.style.setProperty(e,o||"")}for(const t of this.subscribedWorkspaces_)t.hideChaff()}subscribeWorkspace(t){this.subscribedWorkspaces_.push(t)}unsubscribeWorkspace(t){if(!Q(this.subscribedWorkspaces_,t))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")}subscribe(t,e,i){this.componentDB.has(e)||this.componentDB.set(e,[]),this.componentDB.get(e).push({element:t,propertyName:i}),e=this.theme&&this.theme.getComponentStyle(e),t.style.setProperty(i,e||"")}unsubscribe(t){if(t)for(const[e,i]of this.componentDB){for(let e=i.length-1;0<=e;e--)i[e].element===t&&i.splice(e,1);i.length||this.componentDB.delete(e)}}dispose(){this.subscribedWorkspaces_.length=0,this.componentDB.clear()}},Xu="VARIABLE_DYNAMIC",Zu={CATEGORY_NAME:Xu};Zu.flyoutCategory=Sr,Zu.flyoutCategoryBlocks=Rr,Zu.onCreateVariableButtonClick_Colour=Or,Zu.onCreateVariableButtonClick_Number=kr,Zu.onCreateVariableButtonClick_String=wr;var Ku=[];Ku[Cc.INPUT_VALUE]=Cc.OUTPUT_VALUE,Ku[Cc.OUTPUT_VALUE]=Cc.INPUT_VALUE,Ku[Cc.NEXT_STATEMENT]=Cc.PREVIOUS_STATEMENT,Ku[Cc.PREVIOUS_STATEMENT]=Cc.NEXT_STATEMENT;var Qu="RENAME_VARIABLE_ID",Ju="DELETE_VARIABLE_ID",qu=class{canConnect(t,e,i,o){return this.canConnectWithReason(t,e,i,o)===Lu.CAN_CONNECT}canConnectWithReason(t,e,i,o){const n=this.doSafetyChecks(t,e);return n!==Lu.CAN_CONNECT?n:this.doTypeChecks(t,e)?i&&!this.doDragChecks(t,e,o||0)?Lu.REASON_DRAG_CHECKS_FAILED:Lu.CAN_CONNECT:Lu.REASON_CHECKS_FAILED}getErrorMessage(t,e,i){switch(t){case Lu.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case Lu.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case Lu.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case Lu.REASON_TARGET_NULL:return"Target connection is null.";case Lu.REASON_CHECKS_FAILED:return"Connection checks failed. "+e+" expected "+e.getCheck()+", found "+i.getCheck();case Lu.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case Lu.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case Lu.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}}doSafetyChecks(t,e){if(!t||!e)return Lu.REASON_TARGET_NULL;let i,o,n;return t.isSuperior()?(i=t.getSourceBlock(),o=e.getSourceBlock(),n=e):(o=t.getSourceBlock(),i=e.getSourceBlock(),n=t,t=e),i===o?Lu.REASON_SELF_CONNECTION:n.type!==Ku[t.type]?Lu.REASON_WRONG_TYPE:i.workspace!==o.workspace?Lu.REASON_DIFFERENT_WORKSPACES:i.isShadow()&&!o.isShadow()?Lu.REASON_SHADOW_PARENT:n.type===Cc.OUTPUT_VALUE&&o.previousConnection&&o.previousConnection.isConnected()||n.type===Cc.PREVIOUS_STATEMENT&&o.outputConnection&&o.outputConnection.isConnected()?Lu.REASON_PREVIOUS_AND_OUTPUT:Lu.CAN_CONNECT}doTypeChecks(t,e){if(t=t.getCheck(),e=e.getCheck(),!t||!e)return!0;for(let i=0;i<t.length;i++)if(e.includes(t[i]))return!0;return!1}doDragChecks(t,e,i){if(t.distanceFrom(e)>i||e.getSourceBlock().isInsertionMarker())return!1;switch(e.type){case Cc.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,e);case Cc.OUTPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case Cc.INPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isMovable()&&!e.targetBlock().isShadow())return!1;break;case Cc.NEXT_STATEMENT:if(e.isConnected()&&!t.getSourceBlock().nextConnection&&!e.targetBlock().isShadow()&&e.targetBlock().nextConnection||e.targetBlock()&&!e.targetBlock().isMovable()&&!e.targetBlock().isShadow())return!1;break;default:return!1}return!xa.includes(e)}canConnectToPrevious_(t,e){return!(t.targetConnection||xa.includes(e)||e.targetConnection&&(!(t=e.targetBlock()).isInsertionMarker()||t.getPreviousBlock()))}};t(js.CONNECTION_CHECKER,Ws,qu);var td=class extends pl{constructor(t){super(t),this.type=qs,t&&(this.varType=t.type,this.varName=t.name)}toJson(){const t=super.toJson();if(void 0===this.varType)throw Error("The var type is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");return t.varType=this.varType,t.varName=this.varName,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new td)).varType=t.varType,e.varName=t.varName,e}run(t){const e=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.varName)throw Error("The var name is undefined. Either pass a variable to the constructor, or call fromJson");t?e.deleteVariableById(this.varId):e.createVariable(this.varName,this.varType,this.varId)}};t(js.EVENT,qs,td);var ed=class extends pl{constructor(t,e){super(t),this.type=ta,t&&(this.oldName=t.name,this.newName=void 0===e?"":e)}toJson(){const t=super.toJson();if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");return t.oldName=this.oldName,t.newName=this.newName,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new ed)).oldName=t.oldName,e.newName=t.newName,e}run(t){const e=this.getEventWorkspace_();if(!this.varId)throw Error("The var ID is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.oldName)throw Error("The old var name is undefined. Either pass a variable to the constructor, or call fromJson");if(!this.newName)throw Error("The new var name is undefined. Either pass a value to the constructor, or call fromJson");t?e.renameVariableById(this.varId,this.newName):e.renameVariableById(this.varId,this.oldName)}};t(js.EVENT,ta,ed);var id=class{constructor(t){this.workspace=t,this.variableMap=new Map}clear(){for(const t of this.variableMap.values())for(;0<t.length;)this.deleteVariable(t[0]);if(0!==this.variableMap.size)throw Error("Non-empty variable map")}renameVariable(t,e){if(t.name!==e){var i=this.getVariable(e,t.type),o=this.workspace.getAllBlocks(!1),n=Hs.getGroup$$module$build$src$core$events$utils();n||Hs.setGroup$$module$build$src$core$events$utils(!0);try{i&&i.getId()!==t.getId()?this.renameVariableWithConflict_(t,e,i,o):this.renameVariableAndUses_(t,e,o)}finally{Hs.setGroup$$module$build$src$core$events$utils(n)}}}renameVariableById(t,e){const i=this.getVariableById(t);if(!i)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(i,e)}renameVariableAndUses_(t,e,i){for(d(new(y(ta))(t,e)),t.name=e,e=0;e<i.length;e++)i[e].updateVarName(t)}renameVariableWithConflict_(t,e,i,o){const n=t.type;for(e!==i.name&&this.renameVariableAndUses_(i,e,o),e=0;e<o.length;e++)o[e].renameVarById(t.getId(),i.getId());d(new(y(qs))(t)),Q(this.variableMap.get(n),t)}createVariable(t,e,i){var o=this.getVariable(t,e);if(o){if(i&&o.getId()!==i)throw Error('Variable "'+t+'" is already in use and its id is "'+o.getId()+'" which conflicts with the passed in id, "'+i+'".');return o}if(i&&this.getVariableById(i))throw Error('Variable id, "'+i+'", is already in use.');return o=i||c(),e=e||"",o=new vl(this.workspace,t,e,o),(t=this.variableMap.get(e)||[]).push(o),this.variableMap.delete(e),this.variableMap.set(e,t),d(new(y(Js))(o)),o}deleteVariable(t){const e=t.getId(),i=this.variableMap.get(t.type);if(i)for(let o=0;o<i.length;o++)if(i[o].getId()===e){i.splice(o,1),d(new(y(qs))(t)),0===i.length&&this.variableMap.delete(t.type);break}}deleteVariableById(t){const e=this.getVariableById(t);if(e){var i=e.name;const o=this.getVariableUsesById(t);for(let e,n=0;e=o[n];n++)if("procedures_defnoreturn"===e.type||"procedures_defreturn"===e.type)return t=String(e.getFieldValue("NAME")),i=Hs.Msg$$module$build$src$core$msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",i).replace("%2",t),void Wt(i);1<o.length?(i=Hs.Msg$$module$build$src$core$msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(o.length)).replace("%2",i),Yt(i,(t=>{t&&e&&this.deleteVariableInternal(e,o)}))):this.deleteVariableInternal(e,o)}else console.warn("Can't delete non-existent variable: "+t)}deleteVariableInternal(t,e){const i=Hs.getGroup$$module$build$src$core$events$utils();i||Hs.setGroup$$module$build$src$core$events$utils(!0);try{for(let t=0;t<e.length;t++)e[t].dispose(!0);this.deleteVariable(t)}finally{Hs.setGroup$$module$build$src$core$events$utils(i)}}getVariable(t,e){if(e=this.variableMap.get(e||""))for(let i,o=0;i=e[o];o++)if(Hs.Names$$module$build$src$core$names.equals(i.name,t))return i;return null}getVariableById(t){for(const e of this.variableMap.values())for(const i of e)if(i.getId()===t)return i;return null}getVariablesOfType(t){return(t=this.variableMap.get(t||""))?t.slice():[]}getVariableTypes(t){const e=new Set(this.variableMap.keys());if(t&&t.getPotentialVariableMap())for(const i of t.getPotentialVariableMap().variableMap.keys())e.add(i);return e.has("")||e.add(""),Array.from(e.values())}getAllVariables(){let t=[];for(const e of this.variableMap.values())t=t.concat(e);return t}getAllVariableNames(){return Array.from(this.variableMap.values()).flat().map((t=>t.name))}getVariableUsesById(t){const e=[],i=this.workspace.getAllBlocks(!1);for(let o=0;o<i.length;o++){const n=i[o].getVarModels();if(n)for(let r=0;r<n.length;r++)n[r].getId()===t&&e.push(i[o])}return e}},od=class{get isFlyout(){return this.internalIsFlyout}get isMutator(){return this.internalIsMutator}constructor(t){this.isClearing=this.internalIsMutator=this.internalIsFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=[],this.topBlocks=[],this.topComments=[],this.commentDB=new Map,this.listeners=[],this.undoStack_=[],this.redoStack_=[],this.blockDB=new Map,this.typedBlocksDB=new Map,this.procedureMap=new Sc,this.potentialVariableMap=null,this.id=c(),w(this),this.options=t||new Oc({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.connectionChecker=new(l(js.CONNECTION_CHECKER,this.options,!0))(this),this.variableMap=new id(this)}dispose(){this.listeners.length=0,this.clear(),k(this)}sortObjects_(t,e){const i=Math.sin(si(od.SCAN_ANGLE))*(this.RTL?-1:1);return t=t.getRelativeToSurfaceXY(),e=e.getRelativeToSurfaceXY(),t.y+i*t.x-(e.y+i*e.x)}addTopBlock(t){this.topBlocks.push(t)}removeTopBlock(t){if(!Q(this.topBlocks,t))throw Error("Block not present in workspace's list of top-most blocks.")}getTopBlocks(t=!1){const e=[].concat(this.topBlocks);return t&&1<e.length&&e.sort(this.sortObjects_.bind(this)),e}addTypedBlock(t){this.typedBlocksDB.has(t.type)||this.typedBlocksDB.set(t.type,[]),this.typedBlocksDB.get(t.type).push(t)}removeTypedBlock(t){Q(this.typedBlocksDB.get(t.type),t),this.typedBlocksDB.get(t.type).length||this.typedBlocksDB.delete(t.type)}getBlocksByType(t,e=!1){return this.typedBlocksDB.has(t)?(t=this.typedBlocksDB.get(t).slice(0),e&&t&&1<t.length&&t.sort(this.sortObjects_.bind(this)),t.filter((function(t){return!t.isInsertionMarker()}))):[]}addTopComment(t){this.topComments.push(t),this.commentDB.has(t.id)&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB.set(t.id,t)}removeTopComment(t){if(!Q(this.topComments,t))throw Error("Comment not present in workspace's list of top-most comments.");this.commentDB.delete(t.id)}getTopComments(t=!1){const e=[].concat(this.topComments);return t&&1<e.length&&e.sort(this.sortObjects_.bind(this)),e}getAllBlocks(t=!1){if(t){var e=this.getTopBlocks(!0);t=[];for(let i=0;i<e.length;i++)t.push(...e[i].getDescendants(!0))}else for(t=this.getTopBlocks(!1),e=0;e<t.length;e++)t.push(...t[e].getChildren(!1));return t.filter((function(t){return!t.isInsertionMarker()}))}clear(){this.isClearing=!0;try{const t=Hs.getGroup$$module$build$src$core$events$utils();for(t||Hs.setGroup$$module$build$src$core$events$utils(!0);this.topBlocks.length;)this.topBlocks[0].dispose(!1);for(;this.topComments.length;)this.topComments[this.topComments.length-1].dispose();Hs.setGroup$$module$build$src$core$events$utils(t),this.variableMap.clear(),this.potentialVariableMap&&this.potentialVariableMap.clear()}finally{this.isClearing=!1}}renameVariableById(t,e){this.variableMap.renameVariableById(t,e)}createVariable(t,e,i){return this.variableMap.createVariable(t,e,i)}getVariableUsesById(t){return this.variableMap.getVariableUsesById(t)}deleteVariableById(t){this.variableMap.deleteVariableById(t)}getVariable(t,e){return this.variableMap.getVariable(t,e)}getVariableById(t){return this.variableMap.getVariableById(t)}getVariablesOfType(t){return this.variableMap.getVariablesOfType(t)}getVariableTypes(){return this.variableMap.getVariableTypes(this)}getAllVariables(){return this.variableMap.getAllVariables()}getAllVariableNames(){return this.variableMap.getAllVariableNames()}getWidth(){return 0}newBlock(t,e){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(t){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}remainingCapacity(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length}remainingCapacityOfType(t){return this.options.maxInstances?(void 0!==this.options.maxInstances[t]?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0}isCapacityAvailable(t){if(!this.hasBlockLimits())return!0;let e=0;for(const i in t){if(t[i]>this.remainingCapacityOfType(i))return!1;e+=t[i]}return!(e>this.remainingCapacity())}hasBlockLimits(){return 1/0!==this.options.maxBlocks||!!this.options.maxInstances}getUndoStack(){return this.undoStack_}getRedoStack(){return this.redoStack_}undo(t){var e=t?this.redoStack_:this.undoStack_,i=t?this.undoStack_:this.redoStack_;const o=e.pop();if(o){for(var n=[o];e.length&&o.group&&o.group===e[e.length-1].group;){const t=e.pop();t&&n.push(t)}for(e=0;e<n.length;e++)i.push(n[e]);n=C(n,t),Hs.setRecordUndo$$module$build$src$core$events$utils(!1);try{for(i=0;i<n.length;i++)n[i].run(t)}finally{Hs.setRecordUndo$$module$build$src$core$events$utils(!0)}}}clearUndo(){this.undoStack_.length=0,this.redoStack_.length=0,p()}addChangeListener(t){return this.listeners.push(t),t}removeChangeListener(t){Q(this.listeners,t)}fireChangeListener(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(let e=0;e<this.listeners.length;e++)(0,this.listeners[e])(t)}getBlockById(t){return this.blockDB.get(t)||null}setBlockById(t,e){this.blockDB.set(t,e)}removeBlockById(t){this.blockDB.delete(t)}getCommentById(t){let e;return null!=(e=this.commentDB.get(t))?e:null}allInputsFilled(t){const e=this.getTopBlocks(!1);for(let i=0;i<e.length;i++)if(!e[i].allInputsFilled(t))return!1;return!0}getPotentialVariableMap(){return this.potentialVariableMap}createPotentialVariableMap(){this.potentialVariableMap=new id(this)}getVariableMap(){return this.variableMap}setVariableMap(t){this.variableMap=t}getProcedureMap(){return this.procedureMap}getRootWorkspace(){let t=null;const e=this.options.parentWorkspace;return this.isFlyout?e&&e.options&&(t=e.options.parentWorkspace):e&&(t=e),t}static getById(t){return T(t)}static getAll(){return E()}};od.SCAN_ANGLE=3;var nd=class{constructor(t){this.parentWorkspace=t,this.sounds=new Map,this.lastSound_=null,this.muted=!1}dispose(){this.sounds.clear()}load(t,e){if(t.length){try{var i=new globalThis.Audio}catch(t){return}for(let e=0;e<t.length;e++){const n=t[e],r=n.match(/\.(\w+)$/);if(r&&i.canPlayType("audio/"+r[1])){var o=new globalThis.Audio(n);break}}o&&this.sounds.set(e,o)}}preload(){for(const t of this.sounds.values()){t.volume=.01;const e=t.play();if(void 0!==e?e.then(t.pause).catch((function(){})):t.pause(),rg||sg)break}}play(t,e){if(!this.muted){var i=this.sounds.get(t);i?(t=new Date,null!==this.lastSound_&&t.getTime()-this.lastSound_.getTime()<100||(this.lastSound_=t,(i=rg||ng?i:i.cloneNode()).volume=void 0===e?1:e,i.play())):this.parentWorkspace&&this.parentWorkspace.getAudioManager().play(t,e)}}setMuted(t){this.muted=t}getMuted(){return this.muted}},rd=class{constructor(t){this.workspace=t,this.layers=new Map,(t=t.getInjectionDiv())&&(this.dragLayer=this.createDragLayer(t),this.animationLayer=this.createAnimationLayer(t)),t=this.createLayer(Dl),et(t,"blocklyBlockCanvas"),t=this.createLayer(100),et(t,"blocklyBubbleCanvas")}createDragLayer(t){const e=tt(Og.SVG,{class:"blocklyBlockDragSurface",xmlns:bg,"xmlns:html":yg,"xmlns:xlink":_g,version:"1.1"});return t.append(e),tt(Og.G,{},e)}createAnimationLayer(t){const e=tt(Og.SVG,{class:"blocklyAnimationLayer",xmlns:bg,"xmlns:html":yg,"xmlns:xlink":_g,version:"1.1"});return t.append(e),tt(Og.G,{},e)}appendToAnimationLayer(t){let e;const i=null==(e=this.dragLayer)?void 0:e.getAttribute("transform");if(i){let t;null==(t=this.animationLayer)||t.setAttribute("transform",i)}let o;null==(o=this.animationLayer)||o.appendChild(t.getSvgRoot())}translateLayers(t,e){let i;t=`translate(${t.x}, ${t.y}) scale(${e})`,null==(i=this.dragLayer)||i.setAttribute("transform",t);for(const[,e]of this.layers)e.setAttribute("transform",t)}moveToDragLayer(t){let e;null==(e=this.dragLayer)||e.appendChild(t.getSvgRoot())}moveOffDragLayer(t,e){this.append(t,e)}append(t,e){let i;this.layers.has(e)||this.createLayer(e),null==(i=this.layers.get(e))||i.appendChild(t.getSvgRoot())}createLayer(t){const e=this.workspace.getSvgGroup(),i=tt(Og.G,{});let o=!1;const n=[...this.layers].sort(((t,e)=>t[0]-e[0]));for(const[r,s]of n)if(t<r){e.insertBefore(i,s),o=!0;break}return o||e.appendChild(i),this.layers.set(t,i),i}hasLayer(t){return t===this.dragLayer||new Set(this.layers.values()).has(t)}getBlockLayer(){return this.layers.get(Dl)}getBubbleLayer(){return this.layers.get(100)}},sd=class extends od{constructor(t){let e;super(t),this.resizeHandlerWrapper=null,this.resizesEnabled=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY=null,this.oldScale=this.scale=1,this.oldLeft=this.oldTop=0,this.inverseScreenCTM=this.targetWorkspace=this.dummyWheelListener=this.configureContextMenu=this.lastRecordedPageScroll=this.injectionDiv=this.currentGesture_=this.toolbox_=this.flyout=this.scrollbar=this.trashcan=null,this.inverseScreenCTMDirty=!0,this.highlightedBlocks=[],this.toolboxCategoryCallbacks=new Map,this.flyoutButtonCallbacks=new Map,this.cachedParentSvg=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements=[],this.dragTargetAreas=[],this.zoomControls_=this.layerManager=null,this.metricsManager=new(l(js.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager.getMetrics.bind(this.metricsManager),this.setMetrics=t.setMetrics||sd.setTopLevelWorkspaceMetrics_,this.componentManager=new Ig,this.connectionDBList=fc.init(this.connectionChecker),this.audioManager=new nd(t.parentWorkspace),this.grid=this.options.gridPattern?new Tc(this.options.gridPattern,t.gridOptions):null,this.markerManager=new _h(this),_l&&ee&&this.registerToolboxCategoryCallback(ml,ee),Zu&&Sr&&this.registerToolboxCategoryCallback(Xu,Sr),eu&&gr&&(this.registerToolboxCategoryCallback(tu,gr),this.addChangeListener(hr)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new Yu(this,this.options.theme||kc),this.themeManager_.subscribeWorkspace(this),this.renderer=Er(this.options.renderer||"geras",this.getTheme(),null!=(e=this.options.rendererOverrides)?e:void 0),this.cachedParentSvgSize=new Rg(0,0)}getMarkerManager(){return this.markerManager}getMetricsManager(){return this.metricsManager}setMetricsManager(t){this.metricsManager=t,this.getMetrics=this.metricsManager.getMetrics.bind(this.metricsManager)}getComponentManager(){return this.componentManager}setCursorSvg(t){this.markerManager.setCursorSvg(t)}setMarkerSvg(t){this.markerManager.setMarkerSvg(t)}getMarker(t){return this.markerManager?this.markerManager.getMarker(t):null}getCursor(){return this.markerManager?this.markerManager.getCursor():null}getRenderer(){return this.renderer}getThemeManager(){return this.themeManager_}getTheme(){return this.themeManager_.getTheme()}setTheme(t){t||(t=kc),this.themeManager_.setTheme(t)}refreshTheme(){this.svgGroup_&&this.renderer.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter((function(t){return!!t.getStyleName()}))),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);const t=new(y(la))(this.getTheme().name,this.id);d(t)}updateBlockStyles_(t){for(let e,i=0;e=t[i];i++){const t=e.getStyleName();t&&e.setStyle(t)}}getInverseScreenCTM(){if(this.inverseScreenCTMDirty){const t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM=t.inverse(),this.inverseScreenCTMDirty=!1)}return this.inverseScreenCTM}updateInverseScreenCTM(){this.inverseScreenCTMDirty=!0}isVisible(){return this.isVisible_}getSvgXY(t){let e=0,i=0,o=1;(this.getCanvas().contains(t)||this.getBubbleCanvas().contains(t))&&(o=this.scale);do{const n=_t(t);t!==this.getCanvas()&&t!==this.getBubbleCanvas()||(o=1),e+=n.x*o,i+=n.y*o,t=t.parentNode}while(t&&t!==this.getParentSvg()&&t!==this.getInjectionDiv());return new mg(e,i)}getCachedParentSvgSize(){const t=this.cachedParentSvgSize;return new Rg(t.width,t.height)}getOriginOffsetInPixels(){return Tt(this.getCanvas())}getInjectionDiv(){if(!this.injectionDiv){let t=this.svgGroup_;for(;t;){if((" "+(t.getAttribute("class")||"")+" ").includes(" injectionDiv ")){this.injectionDiv=t;break}t=t.parentNode}}return this.injectionDiv}getSvgGroup(){return this.svgGroup_}getBlockCanvas(){return this.getCanvas()}setResizeHandlerWrapper(t){this.resizeHandlerWrapper=t}createDom(t,e){return this.injectionDiv||(this.injectionDiv=null!=e?e:null),this.svgGroup_=tt(Og.G,{class:"blocklyWorkspace"}),t&&(this.svgBackground_=tt(Og.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),"blocklyMainBackground"===t&&this.grid?this.svgBackground_.style.fill="url(#"+this.grid.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.layerManager=new rd(this),this.svgBlockCanvas_=this.layerManager.getBlockLayer(),this.svgBubbleCanvas_=this.layerManager.getBubbleLayer(),this.isFlyout||(V(this.svgGroup_,"pointerdown",this,this.onMouseDown_,!1),this.dummyWheelListener=()=>{},document.body.addEventListener("wheel",this.dummyWheelListener),V(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new(l(js.TOOLBOX,this.options,!0))(this)),this.grid&&this.grid.update(this.scale),this.recordDragTargets(),(t=l(js.CURSOR,this.options))&&this.markerManager.setCursor(new t),this.renderer.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_}dispose(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&rt(this.svgGroup_),this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout&&(this.flyout.dispose(),this.flyout=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&this.zoomControls_.dispose(),this.audioManager&&this.audioManager.dispose(),this.grid&&(this.grid=null),this.renderer.dispose(),this.markerManager&&this.markerManager.dispose(),super.dispose(),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||this.themeManager_.dispose()),this.connectionDBList.length=0,this.toolboxCategoryCallbacks.clear(),this.flyoutButtonCallbacks.clear(),!this.options.parentWorkspace){const t=this.getParentSvg();t&&t.parentNode&&rt(t.parentNode)}this.resizeHandlerWrapper&&(j(this.resizeHandlerWrapper),this.resizeHandlerWrapper=null),this.dummyWheelListener&&(document.body.removeEventListener("wheel",this.dummyWheelListener),this.dummyWheelListener=null)}addTrashcan(){this.trashcan=sd.newTrashcan(this);const t=this.trashcan.createDom();this.svgGroup_.insertBefore(t,this.getCanvas())}static newTrashcan(t){throw Error("The implementation of newTrashcan should be monkey-patched in by blockly.ts")}addZoomControls(){this.zoomControls_=new ol(this);const t=this.zoomControls_.createDom();this.svgGroup_.appendChild(t)}addFlyout(t){const e=new Oc({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return e.toolboxPosition=this.options.toolboxPosition,this.flyout=this.horizontalLayout?new(l(js.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(e):new(l(js.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(e),this.flyout.autoClose=!1,this.flyout.getWorkspace().setVisible(!0),this.flyout.createDom(t)}getFlyout(t){return this.flyout||t?this.flyout:this.toolbox_?this.toolbox_.getFlyout():null}getToolbox(){return this.toolbox_}updateScreenCalculations_(){this.updateInverseScreenCTM(),this.recordDragTargets()}resizeContents(){this.resizesEnabled&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())}resize(){this.toolbox_&&this.toolbox_.position(),this.flyout&&this.flyout.position();const t=this.componentManager.getComponents(Ig.Capability.POSITIONABLE,!0),e=this.getMetricsManager().getUiMetrics(),i=[];for(let o,n=0;o=t[n];n++){o.position(e,i);const t=o.getBoundingRectangle();t&&i.push(t)}this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()}updateScreenCalculationsIfScrolled(){const t=wt();mg.equals(this.lastRecordedPageScroll,t)||(this.lastRecordedPageScroll=t,this.updateScreenCalculations_())}getLayerManager(){return this.layerManager}getCanvas(){return this.layerManager.getBlockLayer()}setCachedParentSvgSize(t,e){const i=this.getParentSvg();null!=t&&(this.cachedParentSvgSize.width=t,i.setAttribute("data-cached-width",`${t}`)),null!=e&&(this.cachedParentSvgSize.height=e,i.setAttribute("data-cached-height",`${e}`))}getBubbleCanvas(){return this.layerManager.getBubbleLayer()}getParentSvg(){if(!this.cachedParentSvg){let t=this.svgGroup_;for(;t;){if("svg"===t.tagName){this.cachedParentSvg=t;break}t=t.parentNode}}return this.cachedParentSvg}maybeFireViewportChangeEvent(){if(f()){var t=this.scale,e=-this.scrollY,i=-this.scrollX;if(!(t===this.oldScale&&1>Math.abs(e-this.oldTop)&&1>Math.abs(i-this.oldLeft))){var o=new(y(ha))(e,i,t,this.id,this.oldScale);this.oldScale=t,this.oldTop=e,this.oldLeft=i,d(o)}}}translate(t,e){let i,o;null==(i=this.layerManager)||i.translateLayers(new mg(t,e),this.scale),null==(o=this.grid)||o.moveTo(t,e),this.maybeFireViewportChangeEvent()}getWidth(){const t=this.getMetrics();return t?t.viewWidth/this.scale:0}setVisible(t){this.isVisible_=t,this.svgGroup_&&(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t||this.hideChaff(!0))}render(){const t=this.getAllBlocks(!1);for(let e=t.length-1;0<=e;e--)t[e].queueRender();this.getTopBlocks().flatMap((t=>t.getDescendants(!1))).filter((t=>t.isInsertionMarker())).forEach((t=>t.queueRender())),pe().then((()=>{this.markerManager.updateMarkers()}))}highlightBlock(t,e){if(void 0===e){for(let t,e=0;t=this.highlightedBlocks[e];e++)t.setHighlighted(!1);this.highlightedBlocks.length=0}(t=t?this.getBlockById(t):null)&&((e=void 0===e||e)?this.highlightedBlocks.includes(t)||this.highlightedBlocks.push(t):Q(this.highlightedBlocks,t),t.setHighlighted(e))}refreshToolboxSelection(){const t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()}renameVariableById(t,e){super.renameVariableById(t,e),this.refreshToolboxSelection()}deleteVariableById(t){super.deleteVariableById(t),this.refreshToolboxSelection()}createVariable(t,e,i){return t=super.createVariable(t,e,i),this.refreshToolboxSelection(),t}recordDragTargets(){const t=this.componentManager.getComponents(Ig.Capability.DRAG_TARGET,!0);this.dragTargetAreas=[];for(let e,i=0;e=t[i];i++){const t=e.getClientRect();t&&this.dragTargetAreas.push({component:e,clientRect:t})}}newBlock(t,e){throw Error("The implementation of newBlock should be monkey-patched in by blockly.ts")}newComment(t){throw Error("The implementation of newComment should be monkey-patched in by blockly.ts")}getDragTarget(t){for(let e,i=0;e=this.dragTargetAreas[i];i++)if(e.clientRect.contains(t.clientX,t.clientY))return e.component;return null}onMouseDown_(t){const e=this.getGesture(t);e&&e.handleWsStart(t,this)}startDrag(t,e){(t=Z(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,this.dragDeltaXY=mg.difference(e,t)}moveDrag(t){return(t=Z(t,this.getParentSvg(),this.getInverseScreenCTM())).x/=this.scale,t.y/=this.scale,mg.sum(this.dragDeltaXY,t)}isDragging(){return null!==this.currentGesture_&&this.currentGesture_.isDragging()}isDraggable(){return this.options.moveOptions&&this.options.moveOptions.drag}isMovable(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch}isMovableHorizontally(){const t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())}isMovableVertically(){const t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())}onMouseWheel_(t){if(_c.inProgress())t.preventDefault(),t.stopPropagation();else{var e=this.options.zoomOptions&&this.options.zoomOptions.wheel,i=this.options.moveOptions&&this.options.moveOptions.wheel;if(e||i){var o=K(t);if(ag)var n=t.metaKey;e&&(t.ctrlKey||n||!i)?(o=-o.y/50,e=Z(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(e.x,e.y,o)):(e=this.scrollX-o.x,i=this.scrollY-o.y,t.shiftKey&&!o.x&&(e=this.scrollX-o.y,i=this.scrollY),this.scroll(e,i)),t.preventDefault()}}}getBlocksBoundingBox(){const t=this.getTopBoundedElements();if(!t.length)return new Sg(0,0,0,0);const e=t[0].getBoundingRectangle();for(let o=1;o<t.length;o++){var i=t[o];i.isInsertionMarker&&i.isInsertionMarker()||((i=i.getBoundingRectangle()).top<e.top&&(e.top=i.top),i.bottom>e.bottom&&(e.bottom=i.bottom),i.left<e.left&&(e.left=i.left),i.right>e.right&&(e.right=i.right))}return e}cleanUp(){this.setResizesEnabled(!1),Hs.setGroup$$module$build$src$core$events$utils(!0);const t=this.getTopBlocks(!0);let e=0;for(let i,o=0;i=t[o];o++){if(!i.isMovable())continue;const t=i.getRelativeToSurfaceXY();i.moveBy(-t.x,e-t.y,["cleanup"]),i.snapToGrid(),e=i.getRelativeToSurfaceXY().y+i.getHeightWidth().height+this.renderer.getConstants().MIN_BLOCK_HEIGHT}Hs.setGroup$$module$build$src$core$events$utils(!1),this.setResizesEnabled(!0)}showContextMenu(t){if(!this.options.readOnly&&!this.isFlyout){var e=gc.registry.getContextMenuOptions(gc.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(e,t),Po(t,e,this.RTL,this)}}updateToolbox(t){if(t=Dt(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if(Lt(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")}markFocused(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():(S(this),this.getParentSvg().focus({preventScroll:!0}))}zoom(t,e,i){i=Math.pow(this.options.zoomOptions.scaleSpeed,i);const o=this.scale*i;if(this.scale!==o){o>this.options.zoomOptions.maxScale?i=this.options.zoomOptions.maxScale/this.scale:o<this.options.zoomOptions.minScale&&(i=this.options.zoomOptions.minScale/this.scale);var n=this.getCanvas().getCTM(),r=this.getParentSvg().createSVGPoint();r.x=t,r.y=e,t=(r=r.matrixTransform(n.inverse())).x,e=r.y,n=n.translate(t*(1-i),e*(1-i)).scale(i),this.scrollX=n.e,this.scrollY=n.f,this.setScale(o)}}zoomCenter(t){var e=this.getMetrics();let i;this.flyout?(i=e.svgWidth?e.svgWidth/2:0,e=e.svgHeight?e.svgHeight/2:0):(i=e.viewWidth/2+e.absoluteLeft,e=e.viewHeight/2+e.absoluteTop),this.zoom(i,e,t)}zoomToFit(){if(this.isMovable()){var t=this.getMetrics(),e=t.viewWidth;t=t.viewHeight;var i=this.getBlocksBoundingBox(),o=i.right-i.left+40;if(i=i.bottom-i.top+40,o){this.flyout&&(this.horizontalLayout?(t+=this.flyout.getHeight(),i+=this.flyout.getHeight()/this.scale):(e+=this.flyout.getWidth(),o+=this.flyout.getWidth()/this.scale)),e/=o,t/=i,Hs.disable$$module$build$src$core$events$utils();try{this.setScale(Math.min(e,t)),this.scrollCenter()}finally{Hs.enable$$module$build$src$core$events$utils()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}beginCanvasTransition(){et(this.getCanvas(),"blocklyCanvasTransitioning"),et(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}endCanvasTransition(){ot(this.getCanvas(),"blocklyCanvasTransitioning"),ot(this.getBubbleCanvas(),"blocklyCanvasTransitioning")}scrollCenter(){if(this.isMovable()){var t=this.getMetrics(),e=(t.scrollWidth-t.viewWidth)/2,i=(t.scrollHeight-t.viewHeight)/2;e=-e-t.scrollLeft,i=-i-t.scrollTop,this.scroll(e,i)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}centerOnBlock(t,e){if(this.isMovable()){var i=t?this.getBlockById(t):null;if(i){t=i.getRelativeToSurfaceXY(),i=e?{height:i.height,width:i.width}:i.getHeightWidth();var o=this.scale;e=(t.x+(this.RTL?-1:1)*i.width/2)*o,t=(t.y+i.height/2)*o,i=this.getMetrics(),this.scroll(-(e-i.viewWidth/2),-(t-i.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")}setScale(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,this.hideChaff(!1),(t=this.getFlyout(!1))&&t.isVisible()&&(t.reflow(),this.recordDragTargets()),this.grid&&this.grid.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))}getScale(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale}scroll(t,e){this.hideChaff(!0);const i=this.getMetrics();t=Math.min(t,-i.scrollLeft),e=Math.min(e,-i.scrollTop);const o=i.scrollTop+Math.max(0,i.scrollHeight-i.viewHeight);t=Math.max(t,-(i.scrollLeft+Math.max(0,i.scrollWidth-i.viewWidth))),e=Math.max(e,-o),this.scrollX=t,this.scrollY=e,this.scrollbar&&this.scrollbar.set(-(t+i.scrollLeft),-(e+i.scrollTop),!1),t+=i.absoluteLeft,e+=i.absoluteTop,this.translate(t,e)}getBlockById(t){return super.getBlockById(t)}getAllBlocks(t=!1){return super.getAllBlocks(t)}getTopBlocks(t=!1){return super.getTopBlocks(t)}addTopBlock(t){this.addTopBoundedElement(t),super.addTopBlock(t)}removeTopBlock(t){this.removeTopBoundedElement(t),super.removeTopBlock(t)}addTopComment(t){this.addTopBoundedElement(t),super.addTopComment(t)}removeTopComment(t){this.removeTopBoundedElement(t),super.removeTopComment(t)}getRootWorkspace(){return super.getRootWorkspace()}addTopBoundedElement(t){this.topBoundedElements.push(t)}removeTopBoundedElement(t){Q(this.topBoundedElements,t)}getTopBoundedElements(){return[].concat(this.topBoundedElements)}setResizesEnabled(t){const e=!this.resizesEnabled&&t;this.resizesEnabled=t,e&&this.resizeContents()}clear(){this.setResizesEnabled(!1),super.clear(),this.topBoundedElements=[],this.setResizesEnabled(!0)}registerButtonCallback(t,e){if("function"!=typeof e)throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks.set(t,e)}getButtonCallback(t){let e;return null!=(e=this.flyoutButtonCallbacks.get(t))?e:null}removeButtonCallback(t){this.flyoutButtonCallbacks.delete(t)}registerToolboxCategoryCallback(t,e){if("function"!=typeof e)throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks.set(t,e)}getToolboxCategoryCallback(t){return this.toolboxCategoryCallbacks.get(t)||null}removeToolboxCategoryCallback(t){this.toolboxCategoryCallbacks.delete(t)}getGesture(t){const e="pointerdown"===t.type,i=this.currentGesture_;return i?e&&i.hasStarted()?(console.warn("Tried to start the same gesture twice."),i.cancel(),null):i:e?this.currentGesture_=new _c(t,this):null}clearGesture(){this.currentGesture_=null}cancelCurrentGesture(){this.currentGesture_&&this.currentGesture_.cancel()}getAudioManager(){return this.audioManager}getGrid(){return this.grid}hideChaff(t=!1){Qi(),ko(this),Oi(),this.hideComponents(t)}hideComponents(t=!1){this.getComponentManager().getComponents(Ig.Capability.AUTOHIDEABLE,!0).forEach((e=>e.autoHide(t)))}static setTopLevelWorkspaceMetrics_(t){const e=this.getMetrics();"number"==typeof t.x&&(this.scrollX=-(e.scrollLeft+(e.scrollWidth-e.viewWidth)*t.x)),"number"==typeof t.y&&(this.scrollY=-(e.scrollTop+(e.scrollHeight-e.viewHeight)*t.y)),this.translate(this.scrollX+e.absoluteLeft,this.scrollY+e.absoluteTop)}},ad={};ad.WorkspaceSvg=sd,ad.resizeSvgContents=xr;var gd=class extends $a{constructor(t,e){super(e),this.type=aa,this.isOpen=t}toJson(){const t=super.toJson();if(void 0===this.isOpen)throw Error("Whether this is already open or not is undefined. Either pass a value to the constructor, or call fromJson");return t.isOpen=this.isOpen,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new gd)).isOpen=t.isOpen,e}};t(js.EVENT,aa,gd);var ld=class extends $a{constructor(t,e,i){super(i),this.type=oa,this.oldElementId=null!=t?t:void 0,this.newElementId=null!=e?e:void 0}toJson(){const t=super.toJson();return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new ld)).oldElementId=t.oldElementId,e.newElementId=t.newElementId,e}};t(js.EVENT,oa,ld);var hd=class{constructor(){this.drawer=this.curNode=this.colour=null,this.type="marker"}setDrawer(t){this.drawer=t}getDrawer(){return this.drawer}getCurNode(){return this.curNode}setCurNode(t){const e=this.curNode;this.curNode=t,this.drawer&&this.drawer.draw(e,this.curNode)}draw(){this.drawer&&this.drawer.draw(this.curNode,this.curNode)}hide(){this.drawer&&this.drawer.hide()}dispose(){this.getDrawer()&&this.getDrawer().dispose()}},cd=class extends hd{constructor(){super(),this.type="cursor"}next(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()===Bu.types.NEXT||t.getType()===Bu.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t}in(){var t=this.getCurNode();if(!t)return null;let e,i;return t.getType()!==Bu.types.PREVIOUS&&t.getType()!==Bu.types.OUTPUT||(t=t.next()),(t=null!=(i=null==(e=t)?void 0:e.in())?i:null)&&this.setCurNode(t),t}prev(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()===Bu.types.NEXT||t.getType()===Bu.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t}out(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()===Bu.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null}};t(js.CURSOR,Ws,cd);var ud=class extends cd{constructor(){super()}next(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null}in(){return this.next()}prev(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null}out(){return this.prev()}getNextNode_(t,e){if(!t)return null;const i=t.in()||t.next();return e(i)?i:i?this.getNextNode_(i,e):e(t=this.findSiblingOrParent(t.out()))?t:t?this.getNextNode_(t,e):null}getPreviousNode_(t,e){if(!t)return null;let i=t.prev();return i=i?this.getRightMostChild(i):t.out(),e(i)?i:i?this.getPreviousNode_(i,e):null}validNode_(t){let e=!1;return(t=t&&t.getType())!==Bu.types.OUTPUT&&t!==Bu.types.INPUT&&t!==Bu.types.FIELD&&t!==Bu.types.NEXT&&t!==Bu.types.PREVIOUS&&t!==Bu.types.WORKSPACE||(e=!0),e}findSiblingOrParent(t){if(!t)return null;return t.next()||this.findSiblingOrParent(t.out())}getRightMostChild(t){if(!t.in())return t;for(t=t.in();t&&t.next();)t=t.next();return this.getRightMostChild(t)}};ud.registrationName="basicCursor",t(js.CURSOR,ud.registrationName,ud);var dd=class extends ud{validNode_(t){let e=!1;const i=t&&t.getType();return t&&(t=t.getLocation(),i===Bu.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(e=!0)),e}},Ad=class extends Lu{constructor(t,e){super(t,e),this.highlighted=!1,this.targetConnection=null,this.db=t.workspace.connectionDBList[e],this.dbOpposite=t.workspace.connectionDBList[Ku[e]],this.offsetInBlock=new mg(0,0),this.trackedState=Ad.TrackedState.WILL_TRACK}dispose(){let t,e;super.dispose(),this.trackedState===Ad.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),null==(e=(t=this.sourceBlock_.pathObject).removeConnectionHighlight)||e.call(t,this)}getSourceBlock(){return super.getSourceBlock()}targetBlock(){return super.targetBlock()}distanceFrom(t){const e=this.x-t.x;return t=this.y-t.y,Math.sqrt(e*e+t*t)}bumpAwayFrom(t){if(!this.sourceBlock_.workspace.isDragging()){var e=this.sourceBlock_.getRootBlock();if(!e.isInFlyout){var i=!1;if(!e.isMovable()){if(!(e=t.getSourceBlock().getRootBlock()).isMovable())return;t=this,i=!0}var o=R()==e;o||e.addSelect();var n=t.x+Hs.config$$module$build$src$core$config.snapRadius+Math.floor(10*Math.random())-this.x,r=t.y+Hs.config$$module$build$src$core$config.snapRadius+Math.floor(10*Math.random())-this.y;i&&(r=-r),e.RTL&&(n=t.x-Hs.config$$module$build$src$core$config.snapRadius-Math.floor(10*Math.random())-this.x),e.moveBy(n,r,["bump"]),o||e.removeSelect()}}}moveTo(t,e){let i=!1;return this.trackedState===Ad.TrackedState.WILL_TRACK?(this.db.addConnection(this,e),this.trackedState=Ad.TrackedState.TRACKED,i=!0):this.trackedState===Ad.TrackedState.TRACKED&&(this.db.removeConnection(this,this.y),this.db.addConnection(this,e),i=!0),this.x=t,this.y=e,i}moveBy(t,e){return this.moveTo(this.x+t,this.y+e)}moveToOffset(t){return this.moveTo(t.x+this.offsetInBlock.x,t.y+this.offsetInBlock.y)}setOffsetInBlock(t,e){this.offsetInBlock.x=t,this.offsetInBlock.y=e}getOffsetInBlock(){return this.offsetInBlock}tightenEfficiently(){var t=this.targetConnection;const e=this.targetBlock();t&&e&&(t=mg.difference(this.offsetInBlock,t.offsetInBlock),e.translate(t.x,t.y))}closest(t,e){return this.dbOpposite.searchForClosest(this,t,e)}highlight(){this.highlighted=!0,this.getSourceBlock().queueRender()}unhighlight(){this.highlighted=!1,this.getSourceBlock().queueRender()}isHighlighted(){return this.highlighted}setTracking(t){t&&this.trackedState===Ad.TrackedState.TRACKED||!t&&this.trackedState===Ad.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db.addConnection(this,this.y),this.trackedState=Ad.TrackedState.TRACKED):(this.trackedState===Ad.TrackedState.TRACKED&&this.db.removeConnection(this,this.y),this.trackedState=Ad.TrackedState.UNTRACKED))}stopTrackingAll(){if(this.setTracking(!1),this.targetConnection){const t=this.targetBlock().getDescendants(!1);for(let e=0;e<t.length;e++){const i=t[e],o=i.getConnections_(!0);for(let t=0;t<o.length;t++)o[t].setTracking(!1);for(const t of i.getIcons())ri(t)&&t.setBubbleVisible(!1)}}}startTrackingAll(){this.setTracking(!0);let t=[];if(this.type!==Cc.INPUT_VALUE&&this.type!==Cc.NEXT_STATEMENT)return t;const e=this.targetBlock();if(e){let i;e.isCollapsed()?(i=[],e.outputConnection&&i.push(e.outputConnection),e.nextConnection&&i.push(e.nextConnection),e.previousConnection&&i.push(e.previousConnection)):i=e.getConnections_(!0);for(let e=0;e<i.length;e++)t.push(...i[e].startTrackingAll());t.length||(t=[e])}return t}onFailedConnect(t){const e=this.getSourceBlock();if(u()){const i=Hs.getGroup$$module$build$src$core$events$utils();setTimeout(function(){e.isDisposed()||e.getParent()||(Hs.setGroup$$module$build$src$core$events$utils(i),this.bumpAwayFrom(t),Hs.setGroup$$module$build$src$core$events$utils(!1))}.bind(this),Hs.config$$module$build$src$core$config.bumpDelay)}}disconnectInternal(t=!0){const{parentConnection:e,childConnection:i}=this.getParentAndChildConnections();if(e&&i){var o=Hs.getGroup$$module$build$src$core$events$utils();o||Hs.setGroup$$module$build$src$core$events$utils(!0);var n=e.getSourceBlock(),r=i.getSourceBlock();super.disconnectInternal(t),n.queueRender(),r.updateDisabled(),r.queueRender(),r.getSvgRoot().style.display="block",Hs.setGroup$$module$build$src$core$events$utils(o)}}respawnShadow_(){super.respawnShadow_();const t=this.targetBlock();t&&(t.initSvg(),t.queueRender())}neighbours(t){return this.dbOpposite.getNeighbours(this,t)}connect_(t){super.connect_(t);var e=this.getSourceBlock();t=t.getSourceBlock(),e.updateDisabled(),t.updateDisabled(),t.queueRender(),(e=e.getInputWithBlock(t))&&(e=e.isVisible(),t.getSvgRoot().style.display=e?"block":"none")}onCheckChanged_(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()}setCheck(t){return super.setCheck(t),this.sourceBlock_.queueRender(),this}};!function(t){(t=t.TrackedState||(t.TrackedState={}))[t.WILL_TRACK=-1]="WILL_TRACK",t[t.UNTRACKED=0]="UNTRACKED",t[t.TRACKED=1]="TRACKED"}(Ad||(Ad={}));var Id=Ad.TrackedState,Cd={};Cd.RenderedConnection=Ad,Cd.TrackedState=Id;var pd=class{paste(t,e,i){if(!e.isCapacityAvailable(t.typeCounts))return null;let o;i&&(t.blockState.x=i.x,t.blockState.y=i.y),i=i||new mg(t.blockState.x||0,t.blockState.y||0),Hs.disable$$module$build$src$core$events$utils();try{o=We(t.blockState,e),Dr(o,i)}finally{Hs.enable$$module$build$src$core$events$utils()}return o?(f()&&!o.isShadow()&&d(new(y(Hs.CREATE$$module$build$src$core$events$utils))(o)),Hs.setSelected$$module$build$src$core$common(o),o):o}};pd.TYPE="block",Se(pd.TYPE,new pd);var fd={};fd.BlockPaster=pd,fd.moveBlockToNotConflict=Dr;var vd={};vd.bumpIntoBounds=Lr,vd.bumpIntoBoundsHandler=Pr,vd.bumpTopObjectsIntoBounds=Br;var md=class{constructor(t){this.block=t,this.connectionPreviewer=this.connectionCandidate=this.startLoc=this.startChildConn=this.startParentConn=null,this.dragging=!1,this.dragOffset=new mg(0,0),this.workspace=t.workspace}isMovable(){if(this.block.isShadow()){let t,e;return null!=(e=null==(t=this.block.getParent())?void 0:t.isMovable())&&e}return this.block.isOwnMovable()&&!this.block.isDeadOrDying()&&!this.workspace.options.readOnly&&!this.block.isInFlyout}startDrag(t){var e;this.block.isShadow()?this.startDraggingShadow(t):(this.dragging=!0,Hs.getGroup$$module$build$src$core$events$utils()||Hs.setGroup$$module$build$src$core$events$utils(!0),this.fireDragStartEvent(),this.startLoc=this.block.getRelativeToSurfaceXY(),this.connectionCandidate=null,this.connectionPreviewer=new(l(js.CONNECTION_PREVIEWER,this.workspace.options))(this.block),gt(),this.workspace.setResizesEnabled(!1),yn(),t=!!t&&(t.altKey||t.ctrlKey||t.metaKey),this.shouldDisconnect(t)&&this.disconnectBlock(t),this.block.setDragging(!0),null==(e=this.workspace.getLayerManager())||e.moveToDragLayer(this.block))}startDraggingShadow(t){const e=this.block.getParent();if(!e)throw Error("Tried to drag a shadow block with no parent. Shadow blocks should always have parents.");this.dragOffset=mg.difference(e.getRelativeToSurfaceXY(),this.block.getRelativeToSurfaceXY()),e.startDrag(t)}shouldDisconnect(t){return!!(this.block.getParent()||t&&this.block.nextConnection&&this.block.nextConnection.targetBlock())}disconnectBlock(t){let e,i,o;if(this.startParentConn=null!=(o=null==(e=this.block.outputConnection)?void 0:e.targetConnection)?o:null==(i=this.block.previousConnection)?void 0:i.targetConnection,t){let t;this.startChildConn=null==(t=this.block.nextConnection)?void 0:t.targetConnection}this.block.unplug(t),mn(this.block)}fireDragStartEvent(){const t=new(y(ia))(this.block,!0,this.block.getDescendants(!1));d(t)}fireDragEndEvent(){const t=new(y(ia))(this.block,!1,this.block.getDescendants(!1));d(t)}fireMoveEvent(){if(!this.block.isDeadOrDying()){var t=new(y(Hs.MOVE$$module$build$src$core$events$utils))(this.block);t.setReason(["drag"]),t.oldCoordinate=this.startLoc,t.recordNew(),d(t)}}drag(t){if(this.block.isShadow()){let e;null==(e=this.block.getParent())||e.drag(mg.sum(t,this.dragOffset))}else this.block.moveDuringDrag(t),this.updateConnectionPreview(this.block,mg.difference(t,this.startLoc))}updateConnectionPreview(t,e){var i=this.connectionCandidate;const o=this.getConnectionCandidate(t,e);if(o){this.connectionCandidate=e=i&&this.currCandidateIsBetter(i,e,o)?i:o;var{local:n,neighbour:r}=e;e=n.type===Cc.OUTPUT_VALUE||n.type===Cc.PREVIOUS_STATEMENT,i=r.isConnected()&&!r.targetBlock().isInsertionMarker(),e&&i&&!this.orphanCanConnectAtEnd(t,r.targetBlock(),n.type)?this.connectionPreviewer.previewReplacement(n,r,r.targetBlock()):this.connectionPreviewer.previewConnection(n,r)}else this.connectionPreviewer.hidePreview(),this.connectionCandidate=null}orphanCanConnectAtEnd(t,e,i){return!!Lu.getConnectionForOrphanedConnection(t,i===Cc.OUTPUT_VALUE?e.outputConnection:e.previousConnection)}currCandidateIsBetter(t,e,i){const{local:o,neighbour:n}=t;t=new mg(o.x,o.y);const r=new mg(n.x,n.y);return e=mg.distance(mg.sum(t,e),r),i.distance>e-Hs.config$$module$build$src$core$config.currentConnectionPreference}getConnectionCandidate(t,e){t=this.getLocalConnections(t);let i=this.connectionCandidate?Hs.config$$module$build$src$core$config.connectingSnapRadius:Hs.config$$module$build$src$core$config.snapRadius,o=null;for(const n of t){const{connection:t,radius:r}=n.closest(i,e);t&&(o={local:n,neighbour:t,distance:r},i=r)}return o}getLocalConnections(t){const e=t.getConnections_(!1),i=t.lastConnectionInStack(!0);return i&&i!==t.nextConnection&&e.push(i),e}endDrag(t){if(this.block.isShadow()){let e;null==(e=this.block.getParent())||e.endDrag(t)}else{if(this.fireDragEndEvent(),this.fireMoveEvent(),lt(),yn(),this.connectionPreviewer.hidePreview(),!this.block.isDeadOrDying()&&this.dragging){let t;null==(t=this.workspace.getLayerManager())||t.moveOffDragLayer(this.block,Dl),this.block.setDragging(!1)}this.connectionCandidate?this.applyConnections(this.connectionCandidate):this.block.queueRender(),this.block.snapToGrid(),this.connectionPreviewer.dispose(),this.workspace.setResizesEnabled(!0),Hs.setGroup$$module$build$src$core$events$utils(!1)}}applyConnections(t){const{local:e,neighbour:i}=t;e.connect(i);const o=e.isSuperior()?i:e,n=this.block.getRootBlock();pe().then((()=>{vn(o.getSourceBlock()),setTimeout((()=>{n.bringToFront()}),0)}))}revertDrag(){if(this.block.isShadow()){let t;null==(t=this.block.getParent())||t.revertDrag()}else{var t;if(null==(t=this.startChildConn)||t.connect(this.block.nextConnection),this.startParentConn)switch(this.startParentConn.type){case Cc.INPUT_VALUE:this.startParentConn.connect(this.block.outputConnection);break;case Cc.NEXT_STATEMENT:this.startParentConn.connect(this.block.previousConnection)}else{let t;this.block.moveTo(this.startLoc,["drag"]),null==(t=this.workspace.getLayerManager())||t.moveOffDragLayer(this.block,Dl),Lr(this.workspace,this.workspace.getMetricsManager().getScrollMetrics(!0),this.block)}this.startParentConn=this.startChildConn=null,this.connectionPreviewer.hidePreview(),this.connectionCandidate=null,this.block.setDragging(!1),this.dragging=!1}}},bd=class extends Pu{constructor(t,e,i){if(super(t,e,i),this.width=this.height=0,this.warningTextDb=new Map,this.mutator=null,this.rendered=!0,this.eventsInit_=this.renderIsInProgress_=this.visuallyDisabled=!1,this.translation="",this.dragging=!1,this.relativeCoords=new mg(0,0),this.dragStrategy=new md(this),!t.rendered)throw TypeError("Cannot create a rendered block in a headless workspace");this.workspace=t,this.svgGroup_=tt(Og.G,{}),this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),(t=this.pathObject.svgPath).tooltip=this,Wi(t),this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}initSvg(){if(!this.initialized){for(var t of this.inputList)t.init();for(const t of this.getIcons())t.initView(this.createIconPointerDownListener(t)),t.updateEditable();this.applyColour(),this.pathObject.updateMovable(this.isMovable()||this.isInFlyout),t=this.getSvgRoot(),!this.workspace.options.readOnly&&t&&V(t,"pointerdown",this,this.onMouseDown_),t.parentNode||this.workspace.getCanvas().appendChild(t),this.initialized=!0}}getColourSecondary(){return this.style.colourSecondary}getColourTertiary(){return this.style.colourTertiary}select(){if(this.isShadow()){let t;null==(t=this.getParent())||t.select()}else this.addSelect()}unselect(){if(this.isShadow()){let t;null==(t=this.getParent())||t.unselect()}else this.removeSelect()}setParent(t){const e=this.parentBlock_;if(t!==e){gt(),super.setParent(t),lt();var i=this.getSvgRoot();if(!this.workspace.isClearing&&i){var o=this.getRelativeToSurfaceXY();t?t.getSvgRoot().appendChild(i):e&&((t=this.workspace.getCanvas().querySelector(".blocklyDragging"))?this.workspace.getCanvas().insertBefore(i,t):this.workspace.getCanvas().appendChild(i),this.translate(o.x,o.y)),this.applyColour()}}}getRelativeToSurfaceXY(){const t=this.workspace.getLayerManager();if(!t)throw Error("Cannot calculate position because the workspace has not been appended");let e=0,i=0,o=this.getSvgRoot();if(o)do{const t=_t(o);e+=t.x,i+=t.y,o=o.parentNode}while(o&&!t.hasLayer(o));return new mg(e,i)}moveBy(t,e,i){if(this.parentBlock_)throw Error("Block has parent");const o=f();let n=null;o&&(n=new(y(Hs.MOVE$$module$build$src$core$events$utils))(this),i&&n.setReason(i)),t=new mg(t,e),e=this.getRelativeToSurfaceXY(),t=mg.sum(e,t),this.translate(t.x,t.y),this.updateComponentLocations(t),o&&n&&(n.recordNew(),d(n)),this.workspace.resizeContents()}translate(t,e){this.translation=`translate(${t}, ${e})`,this.relativeCoords=new mg(t,e),this.getSvgRoot().setAttribute("transform",this.getTranslation())}getTranslation(){return this.translation}moveTo(t,e){const i=this.getRelativeToSurfaceXY();this.moveBy(t.x-i.x,t.y-i.y,e)}moveDuringDrag(t){this.translate(t.x,t.y),this.getSvgRoot().setAttribute("transform",this.getTranslation()),this.updateComponentLocations(t)}snapToGrid(){if(!this.isDeadOrDying()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(null!=t&&t.shouldSnap()){var e=this.getRelativeToSurfaceXY();(t=t.alignXY(e))!==e&&this.moveTo(t,["snap"])}}}getBoundingRectangle(){const t=this.getRelativeToSurfaceXY(),e=this.getHeightWidth();let i,o;return this.RTL?(i=t.x-e.width,o=t.x):(i=t.x,o=t.x+e.width),new Sg(t.y,t.y+e.height,i,o)}markDirty(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(let t,e=0;t=this.inputList[e];e++)t.markDirty()}setCollapsed(t){this.collapsed_!==t&&(super.setCollapsed(t),this.updateCollapsed_())}updateCollapsed_(){var t=this.isCollapsed();const e=nl,i=rl;for(let i,o=0;i=this.inputList[o];o++)i.name!==e&&i.setVisible(!t);for(var o of this.getIcons())o.updateCollapsed();t?(t=this.toString(30),(o=this.getField(i))?o.setValue(t):(this.getInput(e)||this.appendDummyInput(e)).appendField(new Ou(t),i)):(this.updateDisabled(),this.removeInput(e))}tab(t,e){const i=new dd;i.setCurNode(Bu.createFieldNode(t)),t=i.getCurNode(),e?i.next():i.prev(),(e=i.getCurNode())&&e!==t&&(e.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(e))}onMouseDown_(t){const e=this.workspace.getGesture(t);e&&e.handleBlockStart(t,this)}showHelp(){const t="function"==typeof this.helpUrl?this.helpUrl():this.helpUrl;t&&window.open(t)}generateContextMenu(){if(this.workspace.options.readOnly||!this.contextMenu)return null;const t=gc.registry.getContextMenuOptions(gc.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t}showContextMenu(t){const e=this.generateContextMenu();e&&e.length&&(Po(t,e,this.RTL,this.workspace),Lo(this))}updateComponentLocations(t){this.dragging||this.updateConnectionLocations(t),this.updateIconLocations(t),this.updateFieldLocations(t);for(const e of this.getChildren(!1))e.updateComponentLocations(mg.sum(t,e.relativeCoords))}updateConnectionLocations(t){for(const e of this.getConnections_(!1))e.moveToOffset(t)}updateIconLocations(t){for(const e of this.getIcons())e.onLocationChange(t)}updateFieldLocations(t){for(const e of this.inputList)for(const i of e.fieldRow)i.onLocationChange(t)}setDragging(t){(this.dragging=t)?(this.translation="",xa.push(...this.getConnections_(!0)),et(this.svgGroup_,"blocklyDragging")):(xa.length=0,ot(this.svgGroup_,"blocklyDragging"));for(let e=0;e<this.childBlocks_.length;e++)this.childBlocks_[e].setDragging(t)}setMovable(t){super.setMovable(t),this.pathObject.updateMovable(t)}setEditable(t){super.setEditable(t),t=this.getIcons();for(let e=0;e<t.length;e++)t[e].updateEditable()}setShadow(t){super.setShadow(t),this.applyColour()}setInsertionMarker(t){this.isInsertionMarker_!==t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))}getSvgRoot(){return this.svgGroup_}dispose(t,e){this.disposing=!0,Ki(),Ho(),e&&(this.unplug(t),pn(this)),super.dispose(!!t),rt(this.svgGroup_)}disposeInternal(){this.disposing=!0,super.disposeInternal(),R()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),[...this.warningTextDb.values()].forEach((t=>clearTimeout(t))),this.warningTextDb.clear(),this.getIcons().forEach((t=>t.dispose()))}checkAndDelete(){this.workspace.isFlyout||(Hs.setGroup$$module$build$src$core$events$utils(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),Hs.setGroup$$module$build$src$core$events$utils(!1))}toCopyData(){return this.isInsertionMarker_?null:{paster:pd.TYPE,blockState:Pe(this,{addCoordinates:!0,addNextBlocks:!1}),typeCounts:N(this,!0)}}applyColour(){this.pathObject.applyColour(this);const t=this.getIcons();for(let e=0;e<t.length;e++)t[e].applyColour();for(let t,e=0;t=this.inputList[e];e++)for(let e,i=0;e=t.fieldRow[i];i++)e.applyColour()}updateDisabled(){const t=!this.isEnabled()||this.getInheritedDisabled();if(this.visuallyDisabled===t){let t;null==(t=this.getNextBlock())||t.updateDisabled()}else{this.applyColour(),this.visuallyDisabled=t;for(const t of this.getChildren(!1))t.updateDisabled()}}setWarningText(t,e=""){if(e)this.warningTextDb.has(e)&&(clearTimeout(this.warningTextDb.get(e)),this.warningTextDb.delete(e));else{for(var i of this.warningTextDb.values())clearTimeout(i);this.warningTextDb.clear()}if(this.workspace.isDragging())this.warningTextDb.set(e,setTimeout((()=>{this.isDeadOrDying()||(this.warningTextDb.delete(e),this.setWarningText(t,e))}),100));else if(this.isInFlyout&&(t=null),i=this.getIcon(Qc.TYPE),t){let o=this.getSurroundParent(),n=null;for(;o;)o.isCollapsed()&&(n=o),o=o.getSurroundParent();n&&n.setWarningText(Hs.Msg$$module$build$src$core$msg.COLLAPSED_WARNINGS_WARNING,bd.COLLAPSED_WARNING_ID),i?i.addMessage(t,e):this.addIcon(new Qc(this).addMessage(t,e))}else i&&(e?(i.addMessage("",e),i.getText()||this.removeIcon(Qc.TYPE)):this.removeIcon(Qc.TYPE))}setMutator(t){this.removeIcon(Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE),t&&this.addIcon(t)}addIcon(t){return super.addIcon(t),t instanceof Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon&&(this.mutator=t),t.initView(this.createIconPointerDownListener(t)),t.applyColour(),t.updateEditable(),this.queueRender(),t}createIconPointerDownListener(t){return e=>{this.isDeadOrDying()||(e=this.workspace.getGesture(e))&&e.setStartIcon(t)}}removeIcon(t){const e=super.removeIcon(t);return t.equals(Hs.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE)&&(this.mutator=null),this.queueRender(),e}setEnabled(t){Yn("setEnabled","v11","v12","the setDisabledReason method of BlockSvg");const e=this.isEnabled();super.setEnabled(t),this.isEnabled()===e||this.getInheritedDisabled()||this.updateDisabled()}setDisabledReason(t,e){const i=this.isEnabled();super.setDisabledReason(t,e),this.isEnabled()===i||this.getInheritedDisabled()||this.updateDisabled()}setHighlighted(t){this.pathObject.updateHighlighted(t)}addSelect(){this.pathObject.updateSelected(!0)}removeSelect(){this.pathObject.updateSelected(!1)}setDeleteStyle(t){this.pathObject.updateDraggingDelete(t)}getColour(){return this.style.colourPrimary}setColour(t){super.setColour(t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()}setStyle(t){const e=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,!e)throw Error("Invalid style name: "+t);this.hat=e.hat,this.pathObject.setStyle(e),this.colour_=e.colourPrimary,this.style=e,this.applyColour()}bringToFront(t=!1){let e=this;if(!e.isDeadOrDying())do{const i=e.getSvgRoot(),o=i.parentNode,n=o.childNodes;if(n[n.length-1]!==i&&o.appendChild(i),t)break;e=e.getParent()}while(e)}setPreviousStatement(t,e){super.setPreviousStatement(t,e),this.queueRender()}setNextStatement(t,e){super.setNextStatement(t,e),this.queueRender()}setOutput(t,e){super.setOutput(t,e),this.queueRender()}setInputsInline(t){super.setInputsInline(t),this.queueRender()}removeInput(t,e){return t=super.removeInput(t,e),this.queueRender(),t}moveNumberedInputBefore(t,e){super.moveNumberedInputBefore(t,e),this.queueRender()}appendInput(t){return super.appendInput(t),this.queueRender(),t}setConnectionTracking(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var e=this.nextConnection.targetBlock();e&&e.setConnectionTracking(t)}if(!this.collapsed_)for(e=0;e<this.inputList.length;e++){var i=this.inputList[e].connection;i&&(i.setTracking(t),(i=i.targetBlock())&&i.setConnectionTracking(t))}}getConnections_(t){const e=[];if(this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection),t||!this.collapsed_)for(let t,i=0;t=this.inputList[i];i++)t.connection&&e.push(t.connection);return e}lastConnectionInStack(t){return super.lastConnectionInStack(t)}getMatchingConnection(t,e){return super.getMatchingConnection(t,e)}makeConnection_(t){return new Ad(this,t)}getNextBlock(){return super.getNextBlock()}getPreviousBlock(){return super.getPreviousBlock()}bumpNeighbours(){const t=this.getRootBlock();if(!(this.isDeadOrDying()||this.workspace.isDragging()||t.isInFlyout))for(const e of this.getConnections_(!1)){if(e.isSuperior()){let t;null==(t=e.targetBlock())||t.bumpNeighbours()}for(const i of e.neighbours(Hs.config$$module$build$src$core$config.snapRadius))i.getSourceBlock().getRootBlock()!==t&&(e.isConnected()&&i.isConnected()||(e.isSuperior()?i.bumpAwayFrom(e):e.bumpAwayFrom(i)))}}scheduleSnapAndBump(){this.snapToGrid(),this.bumpNeighbours()}positionNearConnection(t,e,i){if(t.type===Cc.NEXT_STATEMENT||t.type===Cc.INPUT_VALUE){let o=e.x;e=e.y,o+=i.x-t.getOffsetInBlock().x,e+=i.y-t.getOffsetInBlock().y,this.moveBy(o,e)}}getChildren(t){return super.getChildren(t)}queueRender(){return Ce(this)}render(){this.queueRender(),fe()}renderEfficiently(){gt(),this.isCollapsed()&&this.updateCollapsed_(),this.isEnabled()||this.updateDisabled(),this.workspace.getRenderer().render(this),this.tightenChildrenEfficiently(),lt(),this.updateMarkers_()}tightenChildrenEfficiently(){for(const t of this.inputList){const e=t.connection;e&&e.tightenEfficiently()}this.nextConnection&&this.nextConnection.tightenEfficiently()}updateMarkers_(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(_h.LOCAL_MARKER).draw();for(const t of this.inputList)for(const e of t.fieldRow)e.updateMarkers_()}setCursorSvg(t){this.pathObject.setCursorSvg(t)}setMarkerSvg(t){this.pathObject.setMarkerSvg(t)}getHeightWidth(){let t=this.height,e=this.width;var i=this.getNextBlock();if(i){i=i.getHeightWidth();const o=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=i.height-o,e=Math.max(e,i.width)}return{height:t,width:e}}fadeForReplacement(t){this.pathObject.updateReplacementFade(t)}highlightShapeForInput(t,e){this.pathObject.updateShapeForInputHighlight(t,e)}setDragStrategy(t){this.dragStrategy=t}isMovable(){return this.dragStrategy.isMovable()}startDrag(t){this.dragStrategy.startDrag(t)}drag(t,e){this.dragStrategy.drag(t,e)}endDrag(t){this.dragStrategy.endDrag(t)}revertDrag(){this.dragStrategy.revertDrag()}toFlyoutInfo(){const t=Object.assign({},{kind:"BLOCK"},Pe(this)),e=new Set(["id","height","width","pinned","enabled"]),i=function(t){for(const o in t)e.has(o)?delete t[o]:"object"==typeof t[o]&&i(t[o])};return i(t),[t]}};bd.INLINE=-1,bd.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var yd=class{constructor(){}onDragEnter(t){}onDragOver(t){}onDragExit(t){}onDrop(t){}getClientRect(){return null}shouldPreventMove(t){return!1}},_d=class extends yd{constructor(){super(),this.wouldDelete_=!1}wouldDelete(t){return t instanceof bd?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t)):this.updateWouldDelete_(Fr(t)&&t.isDeletable()),this.wouldDelete_}updateWouldDelete_(t){this.wouldDelete_=t}},Td=class extends _d{constructor(t){super(),this.workspace=t,this.id="trashcan",this.contents=[],this.flyout=null,this.isLidOpen=!1,this.minOpenness=0,this.lidTask=this.svgLid=this.svgGroup=null,this.top=this.left=this.lidOpen=0,this.initialized=!1,0>=this.workspace.options.maxTrashcanContents||(t=new Oc({scrollbars:!0,parentWorkspace:this.workspace,rtl:this.workspace.RTL,oneBasedIndex:this.workspace.options.oneBasedIndex,renderer:this.workspace.options.renderer,rendererOverrides:this.workspace.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace.horizontalLayout?(t.toolboxPosition=this.workspace.toolboxPosition===Wg.TOP?Wg.BOTTOM:Wg.TOP,this.flyout=new(l(js.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace.options,!0))(t)):(t.toolboxPosition=this.workspace.toolboxPosition===Wg.RIGHT?Wg.LEFT:Wg.RIGHT,this.flyout=new(l(js.FLYOUTS_VERTICAL_TOOLBOX,this.workspace.options,!0))(t)),this.workspace.addChangeListener(this.onDelete.bind(this)))}createDom(){let t;this.svgGroup=tt(Og.G,{class:"blocklyTrash"});const e=String(Math.random()).substring(2);t=tt(Og.CLIPPATH,{id:"blocklyTrashBodyClipPath"+e},this.svgGroup),tt(Og.RECT,{width:Ed,height:wd,y:kd},t);const i=tt(Og.IMAGE,{width:tl,x:-xd,height:el,y:-Dd,"clip-path":"url(#blocklyTrashBodyClipPath"+e+")"},this.svgGroup);return i.setAttributeNS(_g,"xlink:href",this.workspace.options.pathToMedia+il),t=tt(Og.CLIPPATH,{id:"blocklyTrashLidClipPath"+e},this.svgGroup),tt(Og.RECT,{width:Ed,height:kd},t),this.svgLid=tt(Og.IMAGE,{width:tl,x:-xd,height:el,y:-Dd,"clip-path":"url(#blocklyTrashLidClipPath"+e+")"},this.svgGroup),this.svgLid.setAttributeNS(_g,"xlink:href",this.workspace.options.pathToMedia+il),W(this.svgGroup,"pointerdown",this,this.blockMouseDownWhenOpenable),W(this.svgGroup,"pointerup",this,this.click),W(i,"pointerover",this,this.mouseOver),W(i,"pointerout",this,this.mouseOut),this.animateLid(),this.svgGroup}init(){0<this.workspace.options.maxTrashcanContents&&(st(this.flyout.createDom(Og.SVG),this.workspace.getParentSvg()),this.flyout.init(this.workspace)),this.workspace.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ig.Capability.AUTOHIDEABLE,Ig.Capability.DELETE_AREA,Ig.Capability.DRAG_TARGET,Ig.Capability.POSITIONABLE]}),this.initialized=!0,this.setLidOpen(!1)}dispose(){this.workspace.getComponentManager().removeComponent("trashcan"),this.svgGroup&&rt(this.svgGroup),this.lidTask&&clearTimeout(this.lidTask)}hasContents(){return!!this.contents.length}contentsIsOpen(){return!!this.flyout&&this.flyout.isVisible()}openFlyout(){if(!this.contentsIsOpen()){var t=this.contents.map((function(t){return JSON.parse(t)})),e=this.workspace.getParentSvg().style;e.cursor="wait",setTimeout((()=>{let i,o;null==(i=this.flyout)||i.show(t),e.cursor="",null==(o=this.workspace.scrollbar)||o.setVisible(!1)}),10),this.fireUiEvent(!0)}}closeFlyout(){var t,e;this.contentsIsOpen()&&(null==(t=this.flyout)||t.hide(),null==(e=this.workspace.scrollbar)||e.setVisible(!0),this.fireUiEvent(!1),this.workspace.recordDragTargets())}autoHide(t){!t&&this.flyout&&this.closeFlyout()}emptyContents(){this.hasContents()&&(this.contents.length=0,this.setMinOpenness(0),this.closeFlyout())}position(t,e){if(this.initialized){var i,o=Ut(this.workspace,t);t=Gt(o,new Rg(Ed,wd+kd),Sd,Od,t,this.workspace),e=Vt(t,Od,o.vertical===Xg.TOP?Kg.DOWN:Kg.UP,e),this.top=e.top,this.left=e.left,null==(i=this.svgGroup)||i.setAttribute("transform","translate("+this.left+","+this.top+")")}}getBoundingRectangle(){return new Sg(this.top,this.top+wd+kd,this.left,this.left+Ed)}getClientRect(){if(!this.svgGroup)return null;var t=this.svgGroup.getBoundingClientRect();const e=t.top+Dd-Rd;return t=t.left+xd-Rd,new Sg(e,e+kd+wd+2*Rd,t,t+Ed+2*Rd)}onDragOver(t){this.setLidOpen(this.wouldDelete_)}onDragExit(t){this.setLidOpen(!1)}onDrop(t){setTimeout(this.setLidOpen.bind(this,!1),100)}setLidOpen(t){this.isLidOpen!==t&&(this.lidTask&&clearTimeout(this.lidTask),this.isLidOpen=t,this.animateLid())}animateLid(){const t=Ld;var e=1/(t+1);this.lidOpen+=this.isLidOpen?e:-e,this.lidOpen=Math.min(Math.max(this.lidOpen,this.minOpenness),1),this.setLidAngle(this.lidOpen*Bd),e=Pd+this.lidOpen*($d-Pd),this.svgGroup&&(this.svgGroup.style.opacity=`${e}`),this.lidOpen>this.minOpenness&&1>this.lidOpen&&(this.lidTask=setTimeout(this.animateLid.bind(this),Nd/t))}setLidAngle(t){const e=this.workspace.toolboxPosition===Wg.RIGHT||this.workspace.horizontalLayout&&this.workspace.RTL;let i;null==(i=this.svgLid)||i.setAttribute("transform","rotate("+(e?-t:t)+","+(e?4:Ed-4)+","+(kd-2)+")")}setMinOpenness(t){this.minOpenness=t,this.isLidOpen||this.setLidAngle(t*Bd)}closeLid(){this.setLidOpen(!1)}click(){this.hasContents()&&!this.workspace.isDragging()&&this.openFlyout()}fireUiEvent(t){t=new(y(aa))(t,this.workspace.id),d(t)}blockMouseDownWhenOpenable(t){!this.contentsIsOpen()&&this.hasContents()&&t.stopPropagation()}mouseOver(){this.hasContents()&&this.setLidOpen(!0)}mouseOut(){this.setLidOpen(!1)}onDelete(t){if(!(0>=this.workspace.options.maxTrashcanContents||t.type!==Hs.DELETE$$module$build$src$core$events$utils||t.type!==Hs.DELETE$$module$build$src$core$events$utils||t.wasShadow)){if(!t.oldJson)throw Error("Encountered a delete event without proper oldJson");if(t=JSON.stringify(this.cleanBlockJson(t.oldJson)),!this.contents.includes(t)){for(this.contents.unshift(t);this.contents.length>this.workspace.options.maxTrashcanContents;)this.contents.pop();this.setMinOpenness(Md)}}}cleanBlockJson(t){return function t(e){if(e){if(delete e.id,delete e.x,delete e.y,delete e.enabled,delete e.disabledReasons,e.icons&&e.icons.comment){var i=e.icons.comment;delete i.height,delete i.width,delete i.pinned}for(var o in i=e.inputs){var n=i[o];const e=n.block;n=n.shadow,e&&t(e),n&&t(n)}e.next&&(e=(o=e.next).block,o=o.shadow,e&&t(e),o&&t(o))}}(t=JSON.parse(JSON.stringify(t))),Object.assign({},{kind:"BLOCK"},t)}},Ed=47,wd=44,kd=16,Od=20,Sd=20,Rd=10,xd=0,Dd=32,Md=.1,Nd=80,Ld=4,Pd=.4,$d=.8,Bd=45,Fd=class{constructor(){this.shortcuts=new Map,this.keyMap=new Map,this.reset()}reset(){this.shortcuts.clear(),this.keyMap.clear()}register(t,e){if(this.shortcuts.get(t.name)&&!e)throw Error(`Shortcut named "${t.name}" already exists.`);if(this.shortcuts.set(t.name,t),(e=t.keyCodes)&&0<e.length)for(let i=0;i<e.length;i++)this.addKeyMapping(e[i],t.name,!!t.allowCollision)}unregister(t){return this.shortcuts.get(t)?(this.removeAllKeyMappings(t),this.shortcuts.delete(t),!0):(console.warn(`Keyboard shortcut named "${t}" not found.`),!1)}addKeyMapping(t,e,i){t=`${t}`;const o=this.keyMap.get(t);if(o&&!i)throw Error(`Shortcut named "${e}" collides with shortcuts "${o}"`);o&&i?o.unshift(e):this.keyMap.set(t,[e])}removeKeyMapping(t,e,i){const o=this.keyMap.get(t);if(!o)return i||console.warn(`No keyboard shortcut named "${e}" registered with key code "${t}"`),!1;const n=o.indexOf(e);return-1<n?(o.splice(n,1),0===o.length&&this.keyMap.delete(t),!0):(i||console.warn(`No keyboard shortcut named "${e}" registered with key code "${t}"`),!1)}removeAllKeyMappings(t){for(const e of this.keyMap.keys())this.removeKeyMapping(e,t,!0)}setKeyMap(t){this.keyMap.clear();for(const e in t)this.keyMap.set(e,t[e])}getKeyMap(){const t=Object.create(null);for(const[e,i]of this.keyMap)t[e]=i;return t}getRegistry(){const t=Object.create(null);for(const[e,i]of this.shortcuts)t[e]=i;return Tn(Object.create(null),t)}onKeyDown(t,e){var i=this.serializeKeyEvent_(e);if(!(i=this.getShortcutNamesByKeyCode(i)))return!1;for(let o,n=0;o=i[n];n++){const i=this.shortcuts.get(o);let n,r;if(null==(n=i)||!n.preconditionFn||null!=(r=i)&&r.preconditionFn(t)){let o,n;if(null!=(o=i)&&o.callback&&null!=(n=i)&&n.callback(t,e,i))return!0}}return!1}getShortcutNamesByKeyCode(t){return this.keyMap.get(t)||[]}getKeyCodesByShortcutName(t){const e=[];for(const[i,o]of this.keyMap)-1<o.indexOf(t)&&e.push(i);return e}serializeKeyEvent_(t){let e="";for(const i in Fd.modifierKeys)t.getModifierState(i)&&(""!==e&&(e+="+"),e+=i);return""!==e&&t.keyCode?e+="+"+t.keyCode:t.keyCode&&(e=String(t.keyCode)),e}checkModifiers_(t){for(let e,i=0;e=t[i];i++)if(!(e in Fd.modifierKeys))throw Error(e+" is not a valid modifier key.")}createSerializedKey(t,e){let i="";if(e){this.checkModifiers_(e);for(const t in Fd.modifierKeys)e.includes(Fd.modifierKeys[t])&&(""!==i&&(i+="+"),i+=t)}return""!==i&&t?i+="+"+t:t&&(i=`${t}`),i}};Fd.registry=new Fd,function(t){(t=t.modifierKeys||(t.modifierKeys={}))[t.Shift=16]="Shift",t[t.Control=17]="Control",t[t.Alt=18]="Alt",t[t.Meta=91]="Meta"}(Fd||(Fd={}));var zd,Hd=null,Gd=null,Ud={duplicateInternal:Ur,copyInternal:zr},Vd={};Vd.BlockPaster=pd,Vd.TEST_ONLY=Ud,Vd.paste=Hr,Vd.registry=Fl,function(t){t.ESCAPE="escape",t.DELETE="delete",t.COPY="copy",t.CUT="cut",t.PASTE="paste",t.UNDO="undo",t.REDO="redo"}(zd||(zd={}));var Wd=null,jd=null,Yd=null;Jr();var Xd={};Xd.names=zd,Xd.registerCopy=Yr,Xd.registerCut=Xr,Xd.registerDefaultShortcuts=Jr,Xd.registerDelete=jr,Xd.registerEscape=Wr,Xd.registerPaste=Zr,Xd.registerRedo=Qr,Xd.registerUndo=Kr;var Zd={ProcedureSerializer:class{constructor(t,e){this.procedureModelClass=t,this.parameterModelClass=e,this.priority=75}save(t){return(t=t.getProcedureMap().getProcedures().map((t=>qr(t)))).length?t:null}load(t,e){const i=e.getProcedureMap();for(const o of t)i.add(ts(this.procedureModelClass,this.parameterModelClass,o,e))}clear(t){t.getProcedureMap().clear()}}};Zd.loadProcedure=ts,Zd.saveProcedure=qr;var Kd=class{constructor(){this.priority=100}save(t){const e=[];for(const i of t.getAllVariables())t={name:i.name,id:i.getId()},i.type&&(t.type=i.type),e.push(t);return e.length?e:null}load(t,e){for(const i of t)e.createVariable(i.name,i.type,i.id)}clear(t){t.getVariableMap().clear()}};Ee("variables",new Kd);var Qd={};Qd.VariableSerializer=Kd;var Jd={};Jd.load=is,Jd.save=es;var qd={blocks:ih,exceptions:th,priorities:Ll,procedures:Zd,registry:Pl,variables:Qd,workspaceComments:Bl,workspaces:Jd},tA=class{constructor(t,e,i,o,n){this.workspace=t,this.oldHostMetrics_=this.corner_=this.vScroll=this.hScroll=null,i=void 0===i||i;const r=(e=void 0===e||e)&&i;e&&(this.hScroll=new Pg(t,!0,r,o,n)),i&&(this.vScroll=new Pg(t,!1,r,o,n)),r&&(this.corner_=tt(Og.RECT,{height:Pg.scrollbarThickness,width:Pg.scrollbarThickness,class:"blocklyScrollbarBackground"}),st(this.corner_,t.getBubbleCanvas()))}dispose(){rt(this.corner_),this.oldHostMetrics_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)}resize(){const t=this.workspace.getMetrics();if(t){var e=!1,i=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===t.viewWidth&&this.oldHostMetrics_.viewHeight===t.viewHeight&&this.oldHostMetrics_.absoluteTop===t.absoluteTop&&this.oldHostMetrics_.absoluteLeft===t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===t.scrollWidth&&this.oldHostMetrics_.viewLeft===t.viewLeft&&this.oldHostMetrics_.scrollLeft===t.scrollLeft||(e=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===t.scrollHeight&&this.oldHostMetrics_.viewTop===t.viewTop&&this.oldHostMetrics_.scrollTop===t.scrollTop||(i=!0)):i=e=!0,e||i){try{Hs.disable$$module$build$src$core$events$utils(),this.hScroll&&e&&this.hScroll.resize(t),this.vScroll&&i&&this.vScroll.resize(t)}finally{Hs.enable$$module$build$src$core$events$utils()}this.workspace.maybeFireViewportChangeEvent()}if(this.hScroll&&this.vScroll){if(!this.oldHostMetrics_||this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft){let t;null==(t=this.corner_)||t.setAttribute("x",String(this.vScroll.position.x))}if(!this.oldHostMetrics_||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteTop!==t.absoluteTop){let t;null==(t=this.corner_)||t.setAttribute("y",String(this.hScroll.position.y))}}this.oldHostMetrics_=t}}canScrollHorizontally(){return!!this.hScroll}canScrollVertically(){return!!this.vScroll}setOrigin(t,e){this.hScroll&&this.hScroll.setOrigin(t,e),this.vScroll&&this.vScroll.setOrigin(t,e)}set(t,e,i){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(e,!1),(i||void 0===i)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace.setMetrics(t))}setX(t){this.hScroll&&this.hScroll.set(t,!0)}setY(t){this.vScroll&&this.vScroll.set(t,!0)}setContainerVisible(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)}isVisible(){let t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t}setVisible(t){this.hScroll&&this.hScroll.setVisibleInternal(t),this.vScroll&&this.vScroll.setVisibleInternal(t)}resizeContent(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)}resizeView(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)}},eA=class{constructor(t){this.workspace_=t}getDimensionsPx_(t){let e=0,i=0;return t&&(e=t.getWidth(),i=t.getHeight()),new Rg(e,i)}getFlyoutMetrics(t){return{width:(t=this.getDimensionsPx_(this.workspace_.getFlyout(t))).width,height:t.height,position:this.workspace_.toolboxPosition}}getToolboxMetrics(){const t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}}getSvgMetrics(){return this.workspace_.getCachedParentSvgSize()}getAbsoluteMetrics(){let t=0,e=0;const i=this.getToolboxMetrics(),o=this.getFlyoutMetrics(),n=!!this.workspace_.getToolbox();var r;const s=!(null!=(r=this.workspace_.getFlyout())&&r.autoClose),a=(r=n?i.position:o.position)===Wg.TOP;return r===Wg.LEFT&&(n&&(t+=i.width),s&&(t+=o.width)),a&&(n&&(e+=i.height),s&&(e+=o.height)),{top:e,left:t}}getViewMetrics(t){t=t?this.workspace_.scale:1;const e=this.getSvgMetrics(),i=this.getToolboxMetrics(),o=this.getFlyoutMetrics(),n=!!this.workspace_.getToolbox();var r;const s=!(null!=(r=this.workspace_.getFlyout())&&r.autoClose),a=(r=n?i.position:o.position)===Wg.LEFT||r===Wg.RIGHT;return r!==Wg.TOP&&r!==Wg.BOTTOM||(n&&(e.height-=i.height),s&&(e.height-=o.height)),a&&(n&&(e.width-=i.width),s&&(e.width-=o.width)),{height:e.height/t,width:e.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}}getContentMetrics(t){t=t?1:this.workspace_.scale;const e=this.workspace_.getBlocksBoundingBox();return{height:(e.bottom-e.top)*t,width:(e.right-e.left)*t,top:e.top*t,left:e.left*t}}hasFixedEdges(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()}getComputedFixedEdges_(t){if(!this.hasFixedEdges())return{};const e=this.workspace_.isMovableHorizontally(),i=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);const o={};return i||(o.top=t.top,o.bottom=t.top+t.height),e||(o.left=t.left,o.right=t.left+t.width),o}getPaddedContent_(t,e){const i=e.top+e.height,o=e.left+e.width,n=t.width,r=n/2,s=(t=t.height)/2;return{top:Math.min(e.top-s,i-t),bottom:Math.max(i+s,e.top+t),left:Math.min(e.left-r,o-n),right:Math.max(o+r,e.left+n)}}getScrollMetrics(t,e,i){t=t?this.workspace_.scale:1,e=e||this.getViewMetrics(!1);var o=i||this.getContentMetrics();i=this.getComputedFixedEdges_(e),e=this.getPaddedContent_(e,o),o=void 0!==i.top?i.top:e.top;const n=void 0!==i.left?i.left:e.left;return{top:o/t,left:n/t,width:((void 0!==i.right?i.right:e.right)-n)/t,height:((void 0!==i.bottom?i.bottom:e.bottom)-o)/t}}getUiMetrics(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}}getMetrics(){const t=this.getToolboxMetrics(),e=this.getFlyoutMetrics(!0),i=this.getSvgMetrics(),o=this.getAbsoluteMetrics(),n=this.getViewMetrics(),r=this.getContentMetrics(),s=this.getScrollMetrics(!1,n,r);return{contentHeight:r.height,contentWidth:r.width,contentTop:r.top,contentLeft:r.left,scrollHeight:s.height,scrollWidth:s.width,scrollTop:s.top,scrollLeft:s.left,viewHeight:n.height,viewWidth:n.width,viewTop:n.top,viewLeft:n.left,absoluteTop:o.top,absoluteLeft:o.left,svgHeight:i.height,svgWidth:i.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:e.width,flyoutHeight:e.height}}};t(js.METRICS_MANAGER,Ws,eA),"Blockly"in globalThis||(globalThis.Blockly={Msg:hl});var iA=class extends Eu{constructor(){super(),this.GRID_UNIT=4,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter=null,this.SMALL_PADDING=this.GRID_UNIT,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_DEFAULT_WIDTH=6*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=8*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT}setFontConstants_(t){super.setFontConstants_(t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING}init(){super.init(),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth}setDynamicProperties_(t){super.setDynamicProperties_(t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;const e=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=e&&!isNaN(e)?e:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE}dispose(){super.dispose(),this.selectedGlowFilter&&rt(this.selectedGlowFilter),this.replacementGlowFilter&&rt(this.replacementGlowFilter)}makeStartHat(){const t=this.START_HAT_HEIGHT,e=this.START_HAT_WIDTH;return{height:t,width:e,path:Zn("c",[Xn(25,-t),Xn(71,-t),Xn(e,0)])}}makeHexagonal(){function t(t,i,o){var n=t/2;return Jn(-(o=o?-1:1)*(n=n>e?e:n),t=(i?-1:1)*t/2)+Jn(o*n,t)}const e=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:t=>(t/=2)>e?e:t,height:t=>t,connectionOffsetY:t=>t/2,connectionOffsetX:t=>-t,pathDown:e=>t(e,!1,!1),pathUp:e=>t(e,!0,!1),pathRightDown:e=>t(e,!1,!0),pathRightUp:e=>t(e,!1,!0)}}makeRounded(){function t(t,e,o){const n=t>i?t-i:0,r=o===e?"0":"1";return er("a","0 0,"+r,t=(t>i?i:t)/2,Xn((o?1:-1)*t,(e?-1:1)*t))+tr("v",(e?-1:1)*n)+er("a","0 0,"+r,t,Xn((o?-1:1)*t,(e?-1:1)*t))}const e=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,i=2*e;return{type:this.SHAPES.ROUND,isDynamic:!0,width:t=>(t/=2)>e?e:t,height:t=>t,connectionOffsetY:t=>t/2,connectionOffsetX:t=>-t,pathDown:e=>t(e,!1,!1),pathUp:e=>t(e,!0,!1),pathRightDown:e=>t(e,!1,!0),pathRightUp:e=>t(e,!1,!0)}}makeSquared(){function t(t,i,o){t-=2*e;const n=o===i?"0":"1";return er("a","0 0,"+n,e,Xn((o?1:-1)*e,(i?-1:1)*e))+tr("v",(i?-1:1)*t)+er("a","0 0,"+n,e,Xn((o?-1:1)*e,(i?-1:1)*e))}const e=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:t=>e,height:t=>t,connectionOffsetY:t=>t/2,connectionOffsetX:t=>-t,pathDown:e=>t(e,!1,!1),pathUp:e=>t(e,!0,!1),pathRightDown:e=>t(e,!1,!0),pathRightUp:e=>t(e,!1,!0)}}shapeFor(t){let e=t.getCheck();switch(!e&&t.targetConnection&&(e=t.targetConnection.getCheck()),t.type){case Cc.INPUT_VALUE:case Cc.OUTPUT_VALUE:if(null!==(t=t.getSourceBlock().getOutputShape()))switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return e&&e.includes("Boolean")?this.HEXAGONAL:(e&&e.includes("Number")||e&&e.includes("String"),this.ROUNDED);case Cc.PREVIOUS_STATEMENT:case Cc.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}}makeNotch(){function t(t){return Zn("c",[Xn(t*n/2,0),Xn(t*n*3/4,s/2),Xn(t*n,s)])+qn([Xn(t*n,r)])+Zn("c",[Xn(t*n/4,s/2),Xn(t*n/2,s),Xn(t*n,s)])+tr("h",t*o)+Zn("c",[Xn(t*n/2,0),Xn(t*n*3/4,-s/2),Xn(t*n,-s)])+qn([Xn(t*n,-r)])+Zn("c",[Xn(t*n/4,-s/2),Xn(t*n/2,-s),Xn(t*n,-s)])}const e=this.NOTCH_WIDTH,i=this.NOTCH_HEIGHT,o=e/3,n=o/3,r=i/2,s=r/2,a=t(1),g=t(-1);return{type:this.SHAPES.NOTCH,width:e,height:i,pathLeft:a,pathRight:g}}makeInsideCorners(){const t=this.CORNER_RADIUS,e=er("a","0 0,0",t,Xn(-t,t)),i=er("a","0 0,1",t,Xn(-t,t));return{width:t,height:t,pathTop:e,pathBottom:er("a","0 0,0",t,Xn(t,t)),rightWidth:t,rightHeight:t,pathTopRight:i,pathBottomRight:er("a","0 0,1",t,Xn(t,t))}}generateSecondaryColour_(t){return uo("#000",t,.15)||t}generateTertiaryColour_(t){return uo("#000",t,.25)||t}createDom(t,e,i){super.createDom(t,e,i),t=tt(Og.DEFS,{},t),e=tt(Og.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),tt(Og.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},e),i=tt(Og.FECOMPONENTTRANSFER,{result:"outBlur"},e),tt(Og.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},i),tt(Og.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),tt(Og.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.selectedGlowFilterId=e.id,this.selectedGlowFilter=e,t=tt(Og.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),tt(Og.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),e=tt(Og.FECOMPONENTTRANSFER,{result:"outBlur"},t),tt(Og.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},e),tt(Og.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),tt(Og.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),tt(Og.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter=t}getCSS_(t){return[`${t} .blocklyText,`,`${t} .blocklyFlyoutLabelText {`,`font: ${this.FIELD_TEXT_FONTWEIGHT} ${this.FIELD_TEXT_FONTSIZE}pt ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${t} .blocklyTextInputBubble textarea {`,"font-weight: normal;","}",`${t} .blocklyText {`,"fill: #fff;","}",`${t} .blocklyNonEditableText>rect:not(.blocklyDropdownRect),`,`${t} .blocklyEditableText>rect:not(.blocklyDropdownRect) {`,`fill: ${this.FIELD_BORDER_RECT_COLOUR};`,"}",`${t} .blocklyNonEditableText>text,`,`${t} .blocklyEditableText>text,`,`${t} .blocklyNonEditableText>g>text,`,`${t} .blocklyEditableText>g>text {`,"fill: #575E75;","}",`${t} .blocklyFlyoutLabelText {`,"fill: #575E75;","}",`${t} .blocklyText.blocklyBubbleText {`,"fill: #575E75;","}",`${t} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>rect,",`${t} .blocklyDraggable:not(.blocklyDisabled)`," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",`${t} .blocklyHtmlInput {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,`font-weight: ${this.FIELD_TEXT_FONTWEIGHT};`,"color: #575E75;","}",`${t} .blocklyDropdownText {`,"fill: #fff !important;","}",`${t}.blocklyWidgetDiv .goog-menuitem,`,`${t}.blocklyDropDownDiv .goog-menuitem {`,`font-family: ${this.FIELD_TEXT_FONTFAMILY};`,"}",`${t}.blocklyDropDownDiv .goog-menuitem-content {`,"color: #fff;","}",`${t} .blocklyHighlightedConnectionPath {`,`stroke: ${this.SELECTED_GLOW_COLOUR};`,"}",`${t} .blocklyDisabled > .blocklyOutlinePath {`,`fill: url(#blocklyDisabledPattern${this.randomIdentifier})`,"}",`${t} .blocklyInsertionMarker>.blocklyPath {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"]}},oA=class extends ku{constructor(t,e){super(t,e)}draw(){const t=this.block_.pathObject;t.beginDrawing(),this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights(),t.setPath(this.outlinePath_+"\n"+this.inlinePath_),this.info_.RTL&&t.flipRTL(),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()}drawOutline_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):super.drawOutline_()}drawLeft_(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():super.drawLeft_()}drawRightSideRow_(t){if(!(0>=t.height)){if(ou.isSpacer(t)){const o=t.precedesStatement;var e=t.followsStatement;if(o||e){const n=this.constants_.INSIDE_CORNERS;var i=n.rightHeight;return i=t.height-(o?i:0),e=e?n.pathBottomRight:"",t=0<i?tr("V",t.yPos+i):"",void(this.outlinePath_+=e+t+(o?n.pathTopRight:""))}}this.outlinePath_+=tr("V",t.yPos+t.height)}}drawRightDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)}drawLeftDynamicConnection_(){if(!this.info_.outputConnection)throw Error("Cannot draw the output connection of a block that doesn't have one");this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"}drawFlatTop_(){const t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=Qn(t.xPos,this.info_.startY),this.outlinePath_+=tr("h",t.width)}drawFlatBottom_(){const t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=tr("V",t.baseline),this.outlinePath_+=tr("h",-t.width)}drawInlineInput_(t){this.positionInlineInputConnection_(t);const e=t.input.name;t.connectedBlock||this.info_.isInsertionMarker||(t=Kn(t.xPos+t.connectionWidth,t.centerline-t.height/2)+this.getInlineInputPath(t),this.block_.pathObject.setOutlinePath(e,t))}getInlineInputPath(t){const e=t.width-2*t.connectionWidth,i=t.height;return tr("h",e)+t.shape.pathRightDown(i)+tr("h",-e)+t.shape.pathUp(i)+"z"}drawStatementInput_(t){var e=t.getLastInput();const i=e.xPos+e.notchOffset+e.shape.width,o=this.constants_.INSIDE_CORNERS,n=e.shape.pathRight+tr("h",-(e.notchOffset-o.width))+o.pathTop,r=t.height-2*o.height;e=o.pathBottom+tr("h",e.notchOffset-o.width)+(e.connectedBottomNextConnection?"":e.shape.pathLeft),this.outlinePath_+=tr("H",i)+n+tr("v",r)+e+tr("H",t.xPos+t.width),this.positionStatementInputConnection_(t)}drawConnectionHighlightPath(t){const e=t.connectionModel;if(e.type===Cc.NEXT_STATEMENT||e.type===Cc.PREVIOUS_STATEMENT||e.type===Cc.OUTPUT_VALUE&&!t.isDynamicShape)super.drawConnectionHighlightPath(t);else{t=e.type===Cc.INPUT_VALUE?Kn(t.connectionWidth,-t.height/2)+this.getInlineInputPath(t):Kn(t.width,-t.height/2)+t.shape.pathDown(t.height);var i,o,n=e.getSourceBlock();null==(o=(i=n.pathObject).addConnectionHighlight)||o.call(i,e,t,e.getOffsetInBlock(),n.RTL)}}},nA=class extends Yh{constructor(t,e,i,o,n,r,s){if(super(Yh.SKIP_SETUP),this.imageElement=this.clickHandler=null,this.flipRtl=this.isDirty_=this.EDITABLE=!1,this.altText="",i=Number(po(i)),e=Number(po(e)),isNaN(i)||isNaN(e))throw Error("Height and width values of an image field must cast to numbers.");if(0>=i||0>=e)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new Rg(e,i+nA.Y_PADDING),this.imageHeight=i,"function"==typeof n&&(this.clickHandler=n),t!==Yh.SKIP_SETUP&&(s?this.configure_(s):(this.flipRtl=!!r,this.altText=po(o)||""),this.setValue(po(t)))}configure_(t){super.configure_(t),t.flipRtl&&(this.flipRtl=t.flipRtl),t.alt&&(this.altText=po(t.alt))}initView(){this.imageElement=tt(Og.IMAGE,{height:this.imageHeight+"px",width:this.size_.width+"px",alt:this.altText},this.fieldGroup_),this.imageElement.setAttributeNS(_g,"xlink:href",this.value_),this.clickHandler&&(this.imageElement.style.cursor="pointer")}updateSize_(){}doClassValidation_(t){return"string"!=typeof t?null:t}doValueUpdate_(t){this.value_=t,this.imageElement&&this.imageElement.setAttributeNS(_g,"xlink:href",this.value_)}getFlipRtl(){return this.flipRtl}setAlt(t){t!==this.altText&&(this.altText=t||"",this.imageElement&&this.imageElement.setAttribute("alt",this.altText))}showEditor_(){this.clickHandler&&this.clickHandler(this)}setOnClickHandler(t){this.clickHandler=t}getText_(){return this.altText}static fromJson(t){if(!t.src||!t.width||!t.height)throw Error("src, width, and height values for an image field arerequired. The width and height must be non-zero.");return new this(t.src,t.width,t.height,void 0,void 0,void 0,t)}};nA.Y_PADDING=1,kn("field_image",nA),nA.prototype.DEFAULT_VALUE="";var rA=class extends Yh{constructor(t,e,i){super(Yh.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=this.valueWhenEditorWasOpened_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",t!==Yh.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(t),e&&this.setValidator(e))}configure_(t){super.configure_(t),void 0!==t.spellcheck&&(this.spellcheck_=t.spellcheck)}initView(){if(!this.getSourceBlock())throw new Xh;super.initView(),this.isFullBlockField()&&(this.clickTarget_=this.sourceBlock_.getSvgRoot())}isFullBlockField(){const t=this.getSourceBlock();if(!t)throw new Xh;let e;return this.fullBlockClickTarget_=!(null==(e=this.getConstants())||!e.FULL_BLOCK_FIELDS)&&t.isSimpleReporter()}doValueInvalid_(t,e=!0){this.isBeingEdited_&&(this.isDirty_=!0,this.isTextValid_=!1,t=this.value_,this.value_=this.valueWhenEditorWasOpened_,this.sourceBlock_&&f()&&this.value_!==t&&e&&d(new(y(Hs.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,t,this.value_)))}doValueUpdate_(t){this.isTextValid_=this.isDirty_=!0,this.value_=t}applyColour(){const t=this.getSourceBlock();if(!t)throw new Xh;this.getConstants().FULL_BLOCK_FIELDS&&this.fieldGroup_&&(!this.isFullBlockField()&&this.borderRect_?(this.borderRect_.style.display="block",this.borderRect_.setAttribute("stroke",t.style.colourTertiary)):(this.borderRect_.style.display="none",t.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR)))}getSize(){let t;return null!=(t=this.getConstants())&&t.FULL_BLOCK_FIELDS&&(this.render_(),this.isDirty_=!1),super.getSize()}onLocationChange(){this.isBeingEdited_&&this.resizeEditor_()}render_(){if(super.render_(),this.isBeingEdited_){var t=this.htmlInput_;this.isTextValid_?(ot(t,"blocklyInvalidInput"),Ne(t,Gl.INVALID,!1)):(et(t,"blocklyInvalidInput"),Ne(t,Gl.INVALID,!0))}if(!(t=this.getSourceBlock()))throw new Xh;this.getConstants().FULL_BLOCK_FIELDS&&t.applyColour()}setSpellcheck(t){t!==this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))}showEditor_(t,e=!1){this.workspace_=this.sourceBlock_.workspace,!e&&this.workspace_.options.modalInputs&&(gg||ng||rg)?this.showPromptEditor_():this.showInlineEditor_(e)}showPromptEditor_(){Kt(Hs.Msg$$module$build$src$core$msg.CHANGE_VALUE_TITLE,this.getText(),(t=>{null!==t&&this.setValue(this.getValueFromEditorText_(t)),this.onFinishEditing_(this.value_)}))}showInlineEditor_(t){const e=this.getSourceBlock();if(!e)throw new Xh;_o(this,e.RTL,this.widgetDispose_.bind(this),this.workspace_),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,this.valueWhenEditorWasOpened_=this.value_,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())}widgetCreate_(){var t=this.getSourceBlock();if(!t)throw new Xh;Hs.setGroup$$module$build$src$core$events$utils(!0);const e=mo();var i=this.getClickTarget_();if(!i)throw Error("A click target has not been set.");et(i,"editing"),(i=document.createElement("input")).className="blocklyHtmlInput",i.setAttribute("spellcheck",this.spellcheck_);const o=this.workspace_.getScale();var n=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";return e.style.fontSize=n,i.style.fontSize=n,n=rA.BORDERRADIUS*o+"px",this.isFullBlockField()&&(n=((n=this.getScaledBBox()).bottom-n.top)/2+"px",t=t.getParent()?t.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary,i.style.border=1*o+"px solid "+t,e.style.borderRadius=n,e.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(e.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*o+"px")),i.style.borderRadius=n,e.appendChild(i),i.value=i.defaultValue=this.getEditorText_(this.value_),i.setAttribute("data-untyped-default-value",String(this.value_)),this.resizeEditor_(),this.bindInputEvents_(i),i}widgetDispose_(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),this.sourceBlock_&&f()&&null!==this.valueWhenEditorWasOpened_&&this.valueWhenEditorWasOpened_!==this.value_&&(d(new(y(Hs.CHANGE$$module$build$src$core$events$utils))(this.sourceBlock_,"field",this.name||null,this.valueWhenEditorWasOpened_,this.value_)),this.valueWhenEditorWasOpened_=null),Hs.setGroup$$module$build$src$core$events$utils(!1),this.unbindInputEvents_();var t=mo().style;if(t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,!(t=this.getClickTarget_()))throw Error("A click target has not been set.");ot(t,"editing")}onFinishEditing_(t){}bindInputEvents_(t){this.onKeyDownWrapper_=V(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=V(t,"input",this,this.onHtmlInputChange_)}unbindInputEvents_(){this.onKeyDownWrapper_&&(j(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&(j(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)}onHtmlInputKeyDown_(t){"Enter"===t.key?(wo(this),Oi()):"Escape"===t.key?(this.setValue(this.htmlInput_.getAttribute("data-untyped-default-value"),!1),wo(this),Oi()):"Tab"===t.key&&(wo(this),Oi(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())}onHtmlInputChange_(t){t=this.value_,this.setValue(this.getValueFromEditorText_(this.htmlInput_.value),!1),this.sourceBlock_&&f()&&this.value_!==t&&d(new(y(Qs))(this.sourceBlock_,this.name||null,t,this.value_))}setEditorValue_(t,e=!0){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t,e)}resizeEditor_(){var t=this.getSourceBlock();if(!t)throw new Xh;const e=mo(),i=this.getScaledBBox();e.style.width=i.right-i.left+"px",e.style.height=i.bottom-i.top+"px",t=new mg(t.RTL?i.right-e.offsetWidth:i.left,i.top),e.style.left=t.x+"px",e.style.top=t.y+"px"}repositionForWindowResize(){const t=this.getSourceBlock();return t instanceof bd&&(Lr(this.workspace_,this.workspace_.getMetricsManager().getViewMetrics(!0),t)||this.resizeEditor_(),!0)}isTabNavigable(){return!0}getText_(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null}getEditorText_(t){return`${t}`}getValueFromEditorText_(t){return t}};rA.BORDERRADIUS=4;var sA=class extends rA{constructor(t,e,i){super(t,e,i)}doClassValidation_(t){return void 0===t?null:`${t}`}static fromJson(t){return new this(po(t.text),void 0,t)}};kn("field_input",sA),sA.prototype.DEFAULT_VALUE="";var aA=class extends su{constructor(t){super(t)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(t){return!!t.outputConnection}hasRightSquareCorner(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection}},gA=class extends Iu{constructor(t,e){if(super(t,e),this.connectedBottomNextConnection=!1,this.connectedBlock){for(t=this.connectedBlock;e=t.getNextBlock();)t=e;t.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}},lA=class extends nu{constructor(t){super(t),this.width=this.height=0,this.type|=ou.getType("RIGHT_CONNECTION")}},hA=class extends Tu{constructor(t){super(t)}endsWithElemSpacer(){return!1}hasLeftSquareCorner(t){const e=(t.hat?"cap"===t.hat:this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection;return!!t.outputConnection||e}hasRightSquareCorner(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection}},cA=class extends Mu{constructor(t,e){super(t,e),this.isInline=!0,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.topRow=new hA(this.constants_),this.bottomRow=new aA(this.constants_),this.isMultiRow=!e.getInputsInline()||e.isCollapsed(),this.hasStatementInput=0<e.statementInputCount,this.rightSide=this.outputConnection?new lA(this.constants_):null,this.rightAlignedDummyInputs=new WeakMap}getRenderer(){return this.renderer_}measure(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()}shouldStartNewRow_(t,e){return!!e&&(e instanceof xu||t instanceof Du||e instanceof Du||(t instanceof Hs.ValueInput$$module$build$src$core$inputs$value_input||t instanceof Ru||t instanceof xu)&&(!this.isInline||this.isMultiRow))}getDesiredRowWidth_(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):super.getDesiredRowWidth_(t)}getInRowSpacing_(t,e){return t&&e||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&e&&ou.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&ou.isLeftRoundedCorner(t)&&e&&(ou.isPreviousConnection(e)||ou.isNextConnection(e))?e.notchOffset-this.constants_.CORNER_RADIUS:t&&ou.isLeftSquareCorner(t)&&e&&ou.isHat(e)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING}getSpacerRowHeight_(t,e){if(ou.isTopRow(t)&&ou.isBottomRow(e))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;const i=ou.isInputRow(t)&&t.hasStatement,o=ou.isInputRow(e)&&e.hasStatement;return o||i?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),o&&i?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):ou.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):ou.isBottomRow(e)?this.outputConnection?!e.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING}getSpacerRowWidth_(t,e){const i=this.width-this.startX;return ou.isInputRow(t)&&t.hasStatement||ou.isInputRow(e)&&e.hasStatement?Math.max(i,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):i}getElemCenterline_(t,e){if(t.hasStatement&&!ou.isSpacer(e)&&!ou.isStatementInput(e))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(ou.isInlineInput(e)&&e instanceof gu){const i=e.connectedBlock;if(i&&i.outputConnection&&i.nextConnection)return t.yPos+i.height/2}return super.getElemCenterline_(t,e)}addInput_(t,e){if((t instanceof Ru||t instanceof xu)&&e.hasDummyInput&&e.align===Hs.Align$$module$build$src$core$inputs$align.LEFT&&t.align===Hs.Align$$module$build$src$core$inputs$align.RIGHT)this.rightAlignedDummyInputs.set(e,t);else if(t instanceof Du)return e.elements.push(new gA(this.constants_,t)),e.hasStatement=!0,void(null===e.align&&(e.align=t.align));super.addInput_(t,e)}addAlignmentPadding_(t,e){if(this.rightAlignedDummyInputs.get(t)){let i;for(let e=0;e<t.elements.length;e++){const o=t.elements[e];if(ou.isSpacer(o)&&(i=o),ou.isField(o)&&o instanceof hu&&o.parentInput===this.rightAlignedDummyInputs.get(t))break}if(i)return i.width+=e,void(t.width+=e)}super.addAlignmentPadding_(t,e)}adjustXPosition_(){const t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH;let e=t;for(let n=2;n<this.rows.length-1;n+=2){var i=this.rows[n-1];const r=this.rows[n];var o=this.rows[n+1];if(i=2===n?!!this.topRow.hasPreviousConnection:!!i.followsStatement,o=n+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!o.precedesStatement,ou.isInputRow(r)&&r.hasStatement){let i,o;r.measure(),e=r.width-(null!=(o=null==(i=r.getLastInput())?void 0:i.width)?o:0)+t}else if(i&&(2===n||o)&&ou.isInputRow(r)&&!r.hasStatement){o=r.xPos,i=null;for(let t=0;t<r.elements.length;t++){const n=r.elements[t];ou.isSpacer(n)&&(i=n),i&&(ou.isField(n)||ou.isInput(n))&&o<e&&!(ou.isField(n)&&n instanceof hu&&(n.field instanceof Ou||n.field instanceof nA))&&(i.width+=e-o),o+=n.width}}}}finalizeOutputConnection_(){if(this.outputConnection&&this.outputConnection.isDynamicShape){var t=this.outputConnection.shape;if("isDynamic"in t&&t.isDynamic){for(var e=0,i=0;i<this.rows.length;i++){const t=this.rows[i];t.yPos=e,e+=t.height}this.height=e,i=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,e=t.height(i),i=t.width(i),this.outputConnection.height=e,this.outputConnection.width=i,this.outputConnection.startX=i,this.outputConnection.connectionOffsetY=t.connectionOffsetY(e),this.outputConnection.connectionOffsetX=t.connectionOffsetX(i),t=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(t=i,this.rightSide.height=e,this.rightSide.width=t,this.rightSide.centerline=e/2,this.rightSide.xPos=this.width+t),this.startX=i,this.width+=i+t,this.widthWithChildren+=i+t}}}finalizeHorizontalAlignment_(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var t=0,e=0;e<this.rows.length;e++){var i=this.rows[e];if(!ou.isInputRow(i))continue;t=i.elements[i.elements.length-2];let o=this.getNegativeSpacing_(i.elements[1]),n=this.getNegativeSpacing_(t);t=o+n;const r=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-t<r&&(o=(t=this.width-r)/2,n=t/2),i.elements.unshift(new du(this.constants_,-o)),i.elements.push(new du(this.constants_,-n))}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,e=0;e<this.rows.length;e++)i=this.rows[e],ou.isTopOrBottomRow(i)&&(i.elements[1].width-=t),i.width-=t,i.widthWithConnectedBlocks-=t}}getNegativeSpacing_(t){if(!t||!this.outputConnection)return 0;const e=this.outputConnection.width;var i=this.outputConnection.shape.type;const o=this.constants_;if(1<this.inputRows.length)return i===o.SHAPES.ROUND?(i=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,e-(i=this.height/2>i?i:this.height/2)*(1-Math.sin(Math.acos((i-this.constants_.SMALL_PADDING)/i)))):0;if(ou.isInlineInput(t)&&t instanceof gu){const n=t.connectedBlock;return null==(t=n?n.pathObject.outputShapeType:t.shape.type)||n&&n.outputConnection&&(n.statementInputCount||n.nextConnection)||i===o.SHAPES.HEXAGONAL&&i!==t?0:e-this.constants_.SHAPE_IN_SHAPE_PADDING[i][t]}return ou.isField(t)&&t instanceof hu?i===o.SHAPES.ROUND&&t.field instanceof sA?e-2.75*o.GRID_UNIT:e-this.constants_.SHAPE_IN_SHAPE_PADDING[i][0]:ou.isIcon(t)?this.constants_.SMALL_PADDING:0}finalizeVerticalAlignment_(){if(!this.outputConnection)for(let o=2;o<this.rows.length-1;o+=2){const n=this.rows[o-1],r=this.rows[o],s=this.rows[o+1];var t=2===o,e=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!s.precedesStatement;if(t?this.topRow.hasPreviousConnection:n.followsStatement){var i=r.elements[1];if(i=3===r.elements.length&&i instanceof hu&&(i.field instanceof Ou||i.field instanceof nA),!t&&i)n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING,r.height-=this.constants_.MEDIUM_PADDING;else if(t||e){if(e){for(t=!1,e=0;e<r.elements.length;e++)if((i=r.elements[e])instanceof gu&&ou.isInlineInput(i)&&i.connectedBlock&&!i.connectedBlock.isShadow()&&40<=i.connectedBlock.getHeightWidth().height){t=!0;break}t&&(n.height-=this.constants_.SMALL_PADDING,s.height-=this.constants_.SMALL_PADDING)}}else n.height+=this.constants_.SMALL_PADDING}}}finalize_(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),super.finalize_(),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)}},uA=class extends zu{constructor(t,e,i){super(t,e,i),this.markerCircle=null}showWithInputOutput(t){const e=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle(t.x,t.y),this.setParent_(e),this.showCurrent_()}showWithOutput_(t){this.showWithInputOutput(t)}showWithInput_(t){this.showWithInputOutput(t)}showWithBlock_(t){const e=(t=t.getLocation()).getHeightWidth();this.positionRect_(0,0,e.width,e.height),this.setParent_(t),this.showCurrent_()}positionCircle(t,e){let i,o;null==(i=this.markerCircle)||i.setAttribute("cx",`${t}`),null==(o=this.markerCircle)||o.setAttribute("cy",`${e}`),this.currentMarkerSvg=this.markerCircle}hide(){super.hide(),this.markerCircle&&(this.markerCircle.style.display="none")}createDomInternal_(){if(super.createDomInternal_(),this.markerCircle=tt(Og.CIRCLE,{r:this.constants_.CURSOR_RADIUS,"stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.hide(),this.isCursor()){const t=this.getBlinkProperties_();tt(Og.ANIMATE,t,this.markerCircle)}return this.markerSvg_}applyColour_(t){let e,i;if(super.applyColour_(t),null==(e=this.markerCircle)||e.setAttribute("fill",this.colour_),null==(i=this.markerCircle)||i.setAttribute("stroke",this.colour_),this.isCursor()){let e;t=this.colour_+";transparent;transparent;",null==(e=this.markerCircle)||e.firstElementChild.setAttribute("values",t)}}},dA=class extends Hu{constructor(t,e,i){super(t,e,i),this.svgPathSelected=null,this.outlines=new Map,this.remainingOutlines=new Set,this.outputShapeType=null,this.constants=i}setPath(t){super.setPath(t),this.svgPathSelected&&this.svgPathSelected.setAttribute("d",t)}applyColour(t){super.applyColour(t);const e=t.getParent();t.isShadow()&&e&&this.svgPath.setAttribute("stroke",e.style.colourTertiary);for(const t of this.outlines.values())t.setAttribute("fill",this.style.colourTertiary)}flipRTL(){super.flipRTL();for(const t of this.outlines.values())t.setAttribute("transform","scale(-1 1)")}updateSelected(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected||(this.svgPathSelected=this.svgPath.cloneNode(!0),this.svgPathSelected.setAttribute("fill","none"),this.svgPathSelected.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected)):this.svgPathSelected&&(this.svgRoot.removeChild(this.svgPathSelected),this.svgPathSelected=null)}updateReplacementFade(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")}updateShapeForInputHighlight(t,e){t=t.getParentInput().name,(t=this.getOutlinePath(t))&&(e?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))}beginDrawing(){this.remainingOutlines.clear();for(const t of this.outlines.keys())this.remainingOutlines.add(t)}endDrawing(){if(this.remainingOutlines.size)for(const t of this.remainingOutlines)this.removeOutlinePath(t);this.remainingOutlines.clear()}setOutlinePath(t,e){(t=this.getOutlinePath(t)).setAttribute("d",e),t.setAttribute("fill",this.style.colourTertiary)}getOutlinePath(t){return this.outlines.has(t)||this.outlines.set(t,tt(Og.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines.delete(t),this.outlines.get(t)}removeOutlinePath(t){let e,i;null==(e=this.outlines.get(t))||null==(i=e.parentNode)||i.removeChild(this.outlines.get(t)),this.outlines.delete(t)}},AA=class extends Wu{constructor(t){super(t)}makeConstants_(){return new iA}makeRenderInfo_(t){return new cA(this,t)}makeDrawer_(t,e){return new oA(t,e)}makeMarkerDrawer(t,e){return new uA(t,this.getConstants(),e)}makePathObject(t,e){return new dA(t,e,this.getConstants())}getConstants(){return this.constants_}getConnectionPreviewMethod(t,e,i){return Yn("getConnectionPreviewMethod","v10","v12","an IConnectionPreviewer, if it fulfills your use case."),e.type===Cc.OUTPUT_VALUE?t.isConnected()?Gu.PREVIEW_TYPE.REPLACEMENT_FADE:Gu.PREVIEW_TYPE.INPUT_OUTLINE:super.getConnectionPreviewMethod(t,e,i)}};_r("zelos",AA);var IA=class{constructor(t){this.staticConn=this.draggedConn=this.markerConn=this.fadedBlock=null,this.workspace=t.workspace}previewReplacement(t,e,i){Hs.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.fadedBlock=i,i.fadeForReplacement(!0),this.workspace.getRenderer().shouldHighlightConnection(e)&&(e.highlight(),this.staticConn=e)}finally{Hs.enable$$module$build$src$core$events$utils()}}previewConnection(t,e){if(t!==this.draggedConn||e!==this.staticConn){Hs.disable$$module$build$src$core$events$utils();try{this.hidePreview(),this.shouldUseMarkerPreview(t,e)&&(this.markerConn=this.previewMarker(t,e)),this.workspace.getRenderer().shouldHighlightConnection(e)&&e.highlight(),this.draggedConn=t,this.staticConn=e}finally{Hs.enable$$module$build$src$core$events$utils()}}}shouldUseMarkerPreview(t,e){return e.type===Cc.PREVIOUS_STATEMENT||e.type===Cc.NEXT_STATEMENT||!(this.workspace.getRenderer()instanceof AA)}previewMarker(t,e){const i=t.getSourceBlock(),o=this.createInsertionMarker(i),n=this.getMatchingConnection(i,o,t);if(!n)return null;o.queueRender(),fe(),n.connect(e);const r={x:e.x-n.x,y:e.y-n.y},s=n.getOffsetInBlock().clone();return pe().then((()=>{if(!o.isDeadOrDying()){Hs.disable$$module$build$src$core$events$utils();try{null==o||o.positionNearConnection(n,r,s),null==o||o.getSvgRoot().setAttribute("visibility","visible")}finally{Hs.enable$$module$build$src$core$events$utils()}}})),n}createInsertionMarker(t){const e=Pe(t,{addCoordinates:!1,addInputBlocks:!1,addNextBlocks:!1,doFullSerialization:!1});if(!e)throw Error(`Failed to serialize source block. ${t.toDevString()}`);t=We(e,this.workspace);for(const e of t.getDescendants(!1))e.setInsertionMarker(!0);return t.initSvg(),t.getSvgRoot().setAttribute("visibility","hidden"),t}getMatchingConnection(t,e,i){if(t=t.getConnections_(!0),e=e.getConnections_(!0),t.length!==e.length)return null;for(let o=0;o<t.length;o++)if(t[o]===i)return e[o];return null}hidePreview(){Hs.disable$$module$build$src$core$events$utils();try{this.staticConn&&(this.staticConn.unhighlight(),this.staticConn=null),this.fadedBlock&&(this.fadedBlock.fadeForReplacement(!1),this.fadedBlock=null),this.markerConn&&(this.hideInsertionMarker(this.markerConn),this.draggedConn=this.markerConn=null)}finally{Hs.enable$$module$build$src$core$events$utils()}}hideInsertionMarker(t){const e=t.getSourceBlock(),i=e.outputConnection;let o;if(null!=(o=e.previousConnection)&&o.targetConnection||null!=i&&i.targetConnection)e.unplug(!0);else{let e;null==(e=t.targetBlock())||e.unplug(!1)}e.dispose()}dispose(){this.hidePreview()}};t(js.CONNECTION_PREVIEWER,Ws,IA);var CA={};CA.Align=Hs.Align$$module$build$src$core$inputs$align,CA.DummyInput=Ru,CA.EndRowInput=xu,CA.Input=Su,CA.StatementInput=Du,CA.ValueInput=Hs.ValueInput$$module$build$src$core$inputs$value_input,CA.inputTypes=Hs.inputTypes$$module$build$src$core$inputs$input_types;var pA=!1;Hs.CodeGenerator$$module$build$src$core$generator=class{constructor(t){this.forBlock=Object.create(null),this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.definitions_=Object.create(null),this.functionNames_=Object.create(null),this.nameDB_=void 0,this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g")}workspaceToCode(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=O());var e=[];this.init(t),t=t.getTopBlocks(!0);for(let i,o=0;i=t[o];o++){let t=this.blockToCode(i);Array.isArray(t)&&(t=t[0]),t&&(i.outputConnection&&(t=this.scrubNakedValue(t),this.STATEMENT_PREFIX&&!i.suppressPrefixSuffix&&(t=this.injectId(this.STATEMENT_PREFIX,i)+t),this.STATEMENT_SUFFIX&&!i.suppressPrefixSuffix&&(t+=this.injectId(this.STATEMENT_SUFFIX,i))),e.push(t))}return e=e.join("\n"),(e=(e=(e=this.finish(e)).replace(/^\s+\n/,"")).replace(/\n\s+$/,"\n")).replace(/[ \t]+\n/g,"\n")}prefixLines(t,e){return e+t.replace(/(?!\n$)\n/g,"\n"+e)}allNestedComments(t){const e=[];t=t.getDescendants(!0);for(let i=0;i<t.length;i++){const o=t[i].getCommentText();o&&e.push(o)}return e.length&&e.push(""),e.join("\n")}blockToCode(t,e){if(!1===this.isInitialized&&console.warn("CodeGenerator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return e?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return e?"":this.blockToCode(t.getChildren(!1)[0]);var i=this.forBlock[t.type];if("function"!=typeof i)throw Error(`${this.name_} generator does not know how to generate code for block type "${t.type}".`);if(i=i.call(t,t,this),Array.isArray(i)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,i[0],e),i[1]]}if("string"==typeof i)return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(i=this.injectId(this.STATEMENT_PREFIX,t)+i),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(i+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,i,e);if(null===i)return"";throw SyntaxError("Invalid code generated: "+i)}valueToCode(t,e,i){if(isNaN(i))throw TypeError("Expecting valid order from block: "+t.type);var o=t.getInputTargetBlock(e);if(!o&&!t.getInput(e))throw ReferenceError(`Input "${e}" doesn't exist on "${t.type}"`);if(!o)return"";if(""===(e=this.blockToCode(o)))return"";if(!Array.isArray(e))throw TypeError(`Expecting tuple from value block: ${o.type} See developers.google.com/blockly/guides/create-custom-blocks/generating-code for more information`);if(t=e[0],e=e[1],isNaN(e))throw TypeError("Expecting valid order from value block: "+o.type);if(!t)return"";o=!1;var n=Math.floor(i);const r=Math.floor(e);if(n<=r&&(n!==r||0!==n&&99!==n))for(o=!0,n=0;n<this.ORDER_OVERRIDES.length;n++)if(this.ORDER_OVERRIDES[n][0]===i&&this.ORDER_OVERRIDES[n][1]===e){o=!1;break}return o&&(t="("+t+")"),t}statementToCode(t,e){const i=t.getInputTargetBlock(e);if(!i&&!t.getInput(e))throw ReferenceError(`Input "${e}" doesn't exist on "${t.type}"`);if("string"!=typeof(t=this.blockToCode(i)))throw TypeError("Expecting code from statement block: "+(i&&i.type));return t&&(t=this.prefixLines(t,this.INDENT)),t}addLoopTrap(t,e){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,e),this.INDENT)+t),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,e),this.INDENT)+t),this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,e),this.INDENT)),t}injectId(t,e){return e=e.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+e+"'")}addReservedWords(t){this.RESERVED_WORDS_+=t+","}provideFunction_(t,e){if(!this.definitions_[t]){const i=this.nameDB_.getDistinctName(t,Hs.NameType$$module$build$src$core$names.PROCEDURE);let o;for(this.functionNames_[t]=i,Array.isArray(e)&&(e=e.join("\n")),e=e.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,i);o!==e;)o=e,e=e.replace(/^(( {2})*) {2}/gm,"$1\0");e=e.replace(/\0/g,this.INDENT),this.definitions_[t]=e}return this.functionNames_[t]}getVariableName(t){return this.getName(t,Hs.NameType$$module$build$src$core$names.VARIABLE)}getProcedureName(t){return this.getName(t,Hs.NameType$$module$build$src$core$names.PROCEDURE)}getName(t,e){if(!this.nameDB_)throw Error("Name database is not defined. You must initialize `nameDB_` in your generator class and call `init` first.");return this.nameDB_.getName(t,e)}init(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)}scrub_(t,e,i){return e}finish(t){return this.definitions_=Object.create(null),this.functionNames_=Object.create(null),t}scrubNakedValue(t){return t}},Hs.CodeGenerator$$module$build$src$core$generator;var fA,vA=class extends eA{constructor(t,e){super(t),this.flyout_=e}getBoundingBox_(){let t;try{t=this.workspace_.getCanvas().getBBox()}catch(e){t={height:0,y:0,width:0,x:0}}return t}getContentMetrics(t){const e=this.getBoundingBox_();return t=t?1:this.workspace_.scale,{height:e.height*t,width:e.width*t,top:e.y*t,left:e.x*t}}getScrollMetrics(t,e,i){return e=i||this.getContentMetrics(),i=this.flyout_.MARGIN*this.workspace_.scale,t=t?this.workspace_.scale:1,{height:(e.height+2*i)/t,width:(e.width+e.left+i)/t,top:0,left:0}}};!function(t){t.BLOCK="block",t.BUTTON="button"}(fA||(fA={}));var mA=class extends _d{constructor(t){super(),this.horizontalLayout=!1,this.boundEvents=[],this.filterWrapper=this.reflowWrapper=null,this.mats=[],this.buttons_=[],this.contents=[],this.listeners=[],this.permanentlyDisabled=[],this.recycledBlocks=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible=!0,this.CORNER_RADIUS=8,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null,t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new sd(t),this.workspace_.setMetricsManager(new vA(this.workspace_,this)),this.workspace_.internalIsFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=c(),this.RTL=!!t.RTL,this.toolboxPosition_=t.toolboxPosition,this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN}createDom(t){return this.svgGroup_=tt(t,{class:"blocklyFlyout"}),this.svgGroup_.style.display="none",this.svgBackground_=tt(Og.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_}init(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new tA(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),this.boundEvents.push(V(this.svgGroup_,"wheel",this,this.wheel_)),this.filterWrapper=this.filterForCapacity.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper),this.boundEvents.push(V(this.svgBackground_,"pointerdown",this,this.onMouseDown)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ig.Capability.AUTOHIDEABLE,Ig.Capability.DELETE_AREA,Ig.Capability.DRAG_TARGET]})}dispose(){this.hide(),this.targetWorkspace.getComponentManager().removeComponent(this.id);for(const t of this.boundEvents)j(t);this.boundEvents.length=0,this.filterWrapper&&this.targetWorkspace.removeChangeListener(this.filterWrapper),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.dispose()),this.svgGroup_&&rt(this.svgGroup_)}getWidth(){return this.width_}getHeight(){return this.height_}getFlyoutScale(){return this.targetWorkspace.scale}getWorkspace(){return this.workspace_}setAutoClose(t){this.autoClose=t,this.targetWorkspace.recordDragTargets(),this.targetWorkspace.resizeContents()}autoHide(t){!t&&this.targetWorkspace.getFlyout(!0)===this&&this.autoClose&&this.hide()}getTargetWorkspace(){return this.targetWorkspace}isVisible(){return this.isVisible_}setVisible(t){const e=t!==this.isVisible();this.isVisible_=t,e&&(this.autoClose||this.targetWorkspace.recordDragTargets(),this.updateDisplay())}setContainerVisible(t){const e=t!==this.containerVisible;this.containerVisible=t,e&&this.updateDisplay()}getContents(){return this.contents}setContents(t){this.contents=t}updateDisplay(){let t,e;t=!!this.containerVisible&&this.isVisible(),this.svgGroup_&&(this.svgGroup_.style.display=t?"block":"none"),null==(e=this.workspace_.scrollbar)||e.setContainerVisible(t)}positionAt_(t,e,i,o){let n,r;null==(n=this.svgGroup_)||n.setAttribute("width",`${t}`),null==(r=this.svgGroup_)||r.setAttribute("height",`${e}`),this.workspace_.setCachedParentSvgSize(t,e),this.svgGroup_&&at(this.svgGroup_,"translate("+i+"px,"+o+"px)"),(t=this.workspace_.scrollbar)&&(t.setOrigin(i,o),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))}hide(){if(this.isVisible()){this.setVisible(!1);for(const t of this.listeners)j(t);this.listeners.length=0,this.reflowWrapper&&(this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowWrapper=null)}}show(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks(),"string"==typeof t&&(t=this.getDynamicCategoryContents(t)),this.setVisible(!0),t=Nt(t),t=this.createFlyoutInfo(t),fe(this.workspace_),this.setContents(t.contents),this.layout_(t.contents,t.gaps),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity(),this.position(),this.reflowWrapper=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper),this.emptyRecycledBlocks()}createFlyoutInfo(t){const e=[],i=[];this.permanentlyDisabled.length=0;const o=this.horizontalLayout?this.GAP_X:this.GAP_Y;for(const n of t){if("custom"in n){t=this.getDynamicCategoryContents(n.custom),t=Nt(t);const{contents:o,gaps:r}=this.createFlyoutInfo(t);e.push(...o),i.push(...r)}switch(n.kind.toUpperCase()){case"BLOCK":t=n;const r=this.createFlyoutBlock(t);e.push({type:fA.BLOCK,block:r}),this.addBlockGap(t,i,o);break;case"SEP":this.addSeparatorGap(n,i,o);break;case"LABEL":t=this.createButton(n,!0),e.push({type:fA.BUTTON,button:t}),i.push(o);break;case"BUTTON":t=this.createButton(n,!1),e.push({type:fA.BUTTON,button:t}),i.push(o)}}return{contents:e,gaps:i}}getDynamicCategoryContents(t){if("function"!=typeof(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t)))throw TypeError("Couldn't find a callback function when opening a toolbox category.");return t(this.workspace_.targetWorkspace)}createButton(t,e){return new $u(this.workspace_,this.targetWorkspace,t,e)}createFlyoutBlock(t){let e;return t.blockxml?(t="string"==typeof t.blockxml?Hs.textToDom$$module$build$src$core$utils$xml(t.blockxml):t.blockxml,(e=this.getRecycledBlock(t.getAttribute("type")))||(e=on(t,this.workspace_))):(e=this.getRecycledBlock(t.type),e||(void 0===t.enabled&&(t.enabled="true"!==t.disabled&&!0!==t.disabled),void 0===t.disabledReasons&&!1===t.enabled&&(t.disabledReasons=[sl]),e=je(t,this.workspace_))),e.isEnabled()||this.permanentlyDisabled.push(e),e}getRecycledBlock(t){let e=-1;for(let i=0;i<this.recycledBlocks.length;i++)if(this.recycledBlocks[i].type===t){e=i;break}return-1===e?void 0:this.recycledBlocks.splice(e,1)[0]}addBlockGap(t,e,i){let o;t.gap?o=parseInt(String(t.gap)):t.blockxml&&(t="string"==typeof t.blockxml?Hs.textToDom$$module$build$src$core$utils$xml(t.blockxml):t.blockxml,o=parseInt(t.getAttribute("gap"))),e.push(!o||isNaN(o)?i:o)}addSeparatorGap(t,e,i){t=parseInt(String(t.gap)),!isNaN(t)&&0<e.length?e[e.length-1]=t:e.push(i)}clearOldBlocks(){var t=this.workspace_.getTopBlocks(!1);for(let e,i=0;e=t[i];i++)this.blockIsRecyclable_(e)?this.recycleBlock(e):e.dispose(!1,!1);for(t=0;t<this.mats.length;t++){const e=this.mats[t];e&&(ji(e),rt(e))}this.mats.length=0;for(let t,e=0;t=this.buttons_[e];e++)t.dispose();let e;this.buttons_.length=0,null==(e=this.workspace_.getPotentialVariableMap())||e.clear()}emptyRecycledBlocks(){for(let t=0;t<this.recycledBlocks.length;t++)this.recycledBlocks[t].dispose();this.recycledBlocks=[]}blockIsRecyclable_(t){return!1}recycleBlock(t){const e=t.getRelativeToSurfaceXY();t.moveBy(-e.x,-e.y),this.recycledBlocks.push(t)}addBlockListeners_(t,e,i){this.listeners.push(V(t,"pointerdown",null,this.blockMouseDown(e))),this.listeners.push(V(i,"pointerdown",null,this.blockMouseDown(e))),this.listeners.push(W(t,"pointerenter",e,(()=>{this.targetWorkspace.isDragging()||e.addSelect()}))),this.listeners.push(W(t,"pointerleave",e,(()=>{this.targetWorkspace.isDragging()||e.removeSelect()}))),this.listeners.push(W(i,"pointerenter",e,(()=>{this.targetWorkspace.isDragging()||e.addSelect()}))),this.listeners.push(W(i,"pointerleave",e,(()=>{this.targetWorkspace.isDragging()||e.removeSelect()})))}blockMouseDown(t){return e=>{const i=this.targetWorkspace.getGesture(e);i&&(i.setStartBlock(t),i.handleFlyoutStart(e,this))}}onMouseDown(t){const e=this.targetWorkspace.getGesture(t);e&&e.handleFlyoutStart(t,this)}isBlockCreatable(t){return t.isEnabled()}createBlock(t){let e=null;Hs.disable$$module$build$src$core$events$utils();var i=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{e=this.placeNewBlock(t)}finally{Hs.enable$$module$build$src$core$events$utils()}if(this.targetWorkspace.hideChaff(),t=Ie(this.targetWorkspace,i),f()){for(Hs.setGroup$$module$build$src$core$events$utils(!0),i=0;i<t.length;i++){const e=t[i];d(new(y(Js))(e))}d(new(y(Hs.CREATE$$module$build$src$core$events$utils))(e))}return this.autoClose?this.hide():this.filterForCapacity(),e}initFlyoutButton_(t,e,i){const o=t.createDom();t.moveTo(e,i),t.show(),this.listeners.push(V(o,"pointerdown",this,this.onMouseDown)),this.buttons_.push(t)}createRect_(t,e,i,o,n){return(e=tt(Og.RECT,{"fill-opacity":0,x:e,y:i,height:o.height,width:o.width})).tooltip=t,Wi(e),this.workspace_.getCanvas().insertBefore(e,t.getSvgRoot()),this.rectMap_.set(t,e),this.mats[n]=e}moveRectToBlock_(t,e){const i=e.getHeightWidth();t.setAttribute("width",String(i.width)),t.setAttribute("height",String(i.height)),e=e.getRelativeToSurfaceXY(),t.setAttribute("y",String(e.y)),t.setAttribute("x",String(this.RTL?e.x-i.width:e.x))}filterForCapacity(){const t=this.workspace_.getTopBlocks(!1);for(let e,i=0;e=t[i];i++)if(!this.permanentlyDisabled.includes(e)){const t=this.targetWorkspace.isCapacityAvailable(N(e));for(;e;)e.setDisabledReason(!t,"WORKSPACE_AT_BLOCK_CAPACITY"),e=e.getNextBlock()}}reflow(){this.reflowWrapper&&this.workspace_.removeChangeListener(this.reflowWrapper),this.reflowInternal_(),this.reflowWrapper&&this.workspace_.addChangeListener(this.reflowWrapper)}isScrollable(){return!!this.workspace_.scrollbar&&this.workspace_.scrollbar.isVisible()}placeNewBlock(t){var e=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered");const i=this.serializeBlock(t);return e.setResizesEnabled(!1),e=We(i,e),this.positionNewBlock(t,e),e}serializeBlock(t){return Pe(t)}positionNewBlock(t,e){const i=this.targetWorkspace;var o=i.getOriginOffsetInPixels(),n=this.workspace_.getOriginOffsetInPixels();(t=t.getRelativeToSurfaceXY()).scale(this.workspace_.scale),n=mg.sum(n,t),(o=mg.difference(n,o)).scale(1/i.scale),e.moveTo(new mg(o.x,o.y))}};mA.FlyoutItemType=fA;var bA=class extends mA{constructor(t){super(t)}setMetrics_(t){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),i=e.getScrollMetrics(),o=e.getViewMetrics();e=e.getAbsoluteMetrics(),"number"==typeof t.y&&(this.workspace_.scrollY=-(i.top+(i.height-o.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}}getX(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager();const e=t.getAbsoluteMetrics(),i=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===Wg.LEFT?t.width:i.width-this.width_:this.toolboxPosition_===Wg.LEFT?0:i.width:this.toolboxPosition_===Wg.LEFT?0:i.width+e.left-this.width_}getY(){return 0}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}}setBackgroundPath(t,e){const i=this.toolboxPosition_===Wg.RIGHT;var o=t+this.CORNER_RADIUS;(o=["M "+(i?o:0)+",0"]).push("h",i?-t:t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,i?0:1,i?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",Math.max(0,e)),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,i?0:1,i?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",i?t:-t),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))}scrollToStart(){let t;null==(t=this.workspace_.scrollbar)||t.setY(0)}wheel_(t){var e=K(t);if(e.y){const t=this.workspace_.getMetricsManager(),i=t.getScrollMetrics();let o;e=t.getViewMetrics().top-i.top+e.y,null==(o=this.workspace_.scrollbar)||o.setY(e),ko(this.workspace_),Oi()}t.preventDefault(),t.stopPropagation()}layout_(t,e){this.workspace_.scale=this.targetWorkspace.scale;var i=this.MARGIN;const o=this.RTL?i:i+this.tabWidth_;for(let a,g=0;a=t[g];g++)if("block"===a.type){var n=a.block;if(!n)continue;var r=n.getDescendants(!1);for(let t,e=0;t=r[e];e++)t.isInFlyout=!0;r=n.getSvgRoot();const t=n.getHeightWidth();var s=n.outputConnection?o-this.tabWidth_:o;n.moveBy(s,i),s=this.createRect_(n,this.RTL?s-t.width:s,i,t,g),this.addBlockListeners_(r,n,s),i+=t.height+e[g]}else"button"===a.type&&(n=a.button,this.initFlyoutButton_(n,o,i),i+=n.height+e[g])}isDragTowardWorkspace(t){t=Math.atan2(t.y,t.x)/Math.PI*180;const e=this.dragAngleRange_;return t<e&&t>-e||t<-180+e||t>180-e}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const t=this.svgGroup_.getBoundingClientRect(),e=t.left;return this.toolboxPosition_===Wg.LEFT?new Sg(-1e9,1e9,-1e9,e+t.width):new Sg(-1e9,1e9,e,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let t=0;var e=this.workspace_.getTopBlocks(!1);for(let o,n=0;o=e[n];n++){var i=o.getHeightWidth().width;o.outputConnection&&(i-=this.tabWidth_),t=Math.max(t,i)}for(let e,i=0;e=this.buttons_[i];i++)t=Math.max(t,e.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,t+=Pg.scrollbarThickness,this.width_!==t){for(let o,n=0;o=e[n];n++){if(this.RTL){i=o.getRelativeToSurfaceXY().x;let e=t/this.workspace_.scale-this.MARGIN;o.outputConnection||(e-=this.tabWidth_),o.moveBy(e-i,0)}this.rectMap_.has(o)&&this.moveRectToBlock_(this.rectMap_.get(o),o)}if(this.RTL)for(let i,o=0;i=this.buttons_[o];o++)e=i.getPosition().y,i.moveTo(t/this.workspace_.scale-i.width-this.MARGIN-this.tabWidth_,e);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Wg.LEFT||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};bA.registryName="verticalFlyout",t(js.FLYOUTS_VERTICAL_TOOLBOX,Ws,bA);var yA=class extends mA{constructor(t){super(t),this.horizontalLayout=!0}setMetrics_(t){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),i=e.getScrollMetrics(),o=e.getViewMetrics();e=e.getAbsoluteMetrics(),"number"==typeof t.x&&(this.workspace_.scrollX=-(i.left+(i.width-o.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}}getX(){return 0}getY(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager();const e=t.getAbsoluteMetrics(),i=t.getViewMetrics();t=t.getToolboxMetrics();const o=this.toolboxPosition_===Wg.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?o?t.height:i.height-this.height_:o?0:i.height:o?0:i.height+e.top-this.height_}position(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}}setBackgroundPath(t,e){const i=this.toolboxPosition_===Wg.TOP,o=["M 0,"+(i?0:this.CORNER_RADIUS)];i?(o.push("h",t+2*this.CORNER_RADIUS),o.push("v",e),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("h",-t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),o.push("h",t),o.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),o.push("v",e),o.push("h",-t-2*this.CORNER_RADIUS)),o.push("z"),this.svgBackground_.setAttribute("d",o.join(" "))}scrollToStart(){let t;null==(t=this.workspace_.scrollbar)||t.setX(this.RTL?1/0:0)}wheel_(t){var e=K(t);if(e=e.x||e.y){const t=this.workspace_.getMetricsManager(),i=t.getScrollMetrics();let o;e=t.getViewMetrics().left-i.left+e,null==(o=this.workspace_.scrollbar)||o.setX(e),ko(this.workspace_),Oi()}t.preventDefault(),t.stopPropagation()}layout_(t,e){this.workspace_.scale=this.targetWorkspace.scale;const i=this.MARGIN;let o=i+this.tabWidth_;this.RTL&&(t=t.reverse());for(let a,g=0;a=t[g];g++)if("block"===a.type){var n=a.block;if(null==n)continue;var r=n.getDescendants(!1);for(let t,e=0;t=r[e];e++)t.isInFlyout=!0;r=n.getSvgRoot();const t=n.getHeightWidth();var s=n.outputConnection?this.tabWidth_:0;s=this.RTL?o+t.width:o-s,n.moveBy(s,i),s=this.createRect_(n,s,i,t,g),o+=t.width+e[g],this.addBlockListeners_(r,n,s)}else"button"===a.type&&(n=a.button,this.initFlyoutButton_(n,o,i),o+=n.width+e[g])}isDragTowardWorkspace(t){t=Math.atan2(t.y,t.x)/Math.PI*180;const e=this.dragAngleRange_;return t<90+e&&t>90-e||t>-90-e&&t<-90+e}getClientRect(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;const t=this.svgGroup_.getBoundingClientRect(),e=t.top;return this.toolboxPosition_===Wg.TOP?new Sg(-1e9,e+t.height,-1e9,1e9):new Sg(e,1e9,-1e9,1e9)}reflowInternal_(){this.workspace_.scale=this.getFlyoutScale();let t=0;const e=this.workspace_.getTopBlocks(!1);for(let i,o=0;i=e[o];o++)t=Math.max(t,i.getHeightWidth().height);const i=this.buttons_;for(let e,o=0;e=i[o];o++)t=Math.max(t,e.height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,t+=Pg.scrollbarThickness,this.height_!==t){for(let t,i=0;t=e[i];i++)this.rectMap_.has(t)&&this.moveRectToBlock_(this.rectMap_.get(t),t);this.targetWorkspace.scrollbar||this.autoClose||this.targetWorkspace.getFlyout()!==this||this.toolboxPosition_!==Wg.TOP||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.resizeContents(),this.targetWorkspace.recordDragTargets()}}};t(js.FLYOUTS_HORIZONTAL_TOOLBOX,Ws,yA);var _A=class extends Mc{constructor(t,e,i,o,n){super(Yh.SKIP_SETUP),this.defaultType="",this.variableTypes=[],this.variable=null,this.SERIALIZABLE=!0,this.menuGenerator_=_A.dropdownCreate,this.defaultVariableName="string"==typeof t?t:"",this.size_=new Rg(0,0),t!==Yh.SKIP_SETUP&&(n?this.configure_(n):this.setTypes(i,o),e&&this.setValidator(e))}configure_(t){super.configure_(t),this.setTypes(t.variableTypes,t.defaultType)}initModel(){var t=this.getSourceBlock();if(!t)throw new Xh;this.variable||(t=Hs.getOrCreateVariablePackage$$module$build$src$core$variables(t.workspace,null,this.defaultVariableName,this.defaultType),this.doValueUpdate_(t.getId()))}shouldAddBorderRect_(){const t=this.getSourceBlock();if(!t)throw new Xh;return super.shouldAddBorderRect_()&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||"variables_get"!==t.type)}fromXml(t){var e=this.getSourceBlock();if(!e)throw new Xh;const i=t.getAttribute("id"),o=t.textContent,n=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(e=Hs.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,i,o,n),null!==n&&n!==e.type)throw Error("Serialized variable type with id '"+e.getId()+"' had type "+e.type+", and does not match variable field that references it: "+Qo(t)+".");this.setValue(e.getId())}toXml(t){return this.initModel(),t.id=this.variable.getId(),t.textContent=this.variable.name,this.variable.type&&t.setAttribute("variabletype",this.variable.type),t}saveState(t){var e=this.saveLegacyState(_A);return null!==e||(this.initModel(),e={id:this.variable.getId()},t&&(e.name=this.variable.name,e.type=this.variable.type)),e}loadState(t){const e=this.getSourceBlock();if(!e)throw new Xh;this.loadLegacyState(_A,t)||(t=Hs.getOrCreateVariablePackage$$module$build$src$core$variables(e.workspace,t.id||null,t.name,t.type||""),this.setValue(t.getId()))}setSourceBlock(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");super.setSourceBlock(t)}getValue(){return this.variable?this.variable.getId():null}getText(){return this.variable?this.variable.name:""}getVariable(){return this.variable}getValidator(){return this.variable?this.validator_:null}doClassValidation_(t){if(null===t)return null;var e=this.getSourceBlock();if(!e)throw new Xh;return(e=Hs.getVariable$$module$build$src$core$variables(e.workspace,t))?(e=e.type,this.typeIsAllowed(e)?t:(console.warn("Variable type doesn't match this field!  Type was "+e),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)}doValueUpdate_(t){const e=this.getSourceBlock();if(!e)throw new Xh;this.variable=Hs.getVariable$$module$build$src$core$variables(e.workspace,t),super.doValueUpdate_(t)}typeIsAllowed(t){const e=this.getVariableTypes();if(!e)return!0;for(let i=0;i<e.length;i++)if(t===e[i])return!0;return!1}getVariableTypes(){var t=this.variableTypes;if(null===t&&this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())return this.sourceBlock_.workspace.getVariableTypes();if(0===(t=t||[""]).length)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t}setTypes(t=null,e=""){if(Array.isArray(t)){let i=!1;for(let o=0;o<t.length;o++)t[o]===e&&(i=!0);if(!i)throw Error("Invalid default type '"+e+"' in the definition of a FieldVariable")}else if(null!==t)throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType=e,this.variableTypes=t}refreshVariableName(){this.forceRerender()}onItemSelected_(t,e){if(t=e.getValue(),this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying()){if(t===Qu)return void Hs.renameVariable$$module$build$src$core$variables(this.sourceBlock_.workspace,this.variable);if(t===Ju)return void this.sourceBlock_.workspace.deleteVariableById(this.variable.getId())}this.setValue(t)}referencesVariables(){return!0}static fromJson(t){return new this(po(t.variable),void 0,void 0,void 0,t)}static dropdownCreate(){if(!this.variable)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");const t=this.getText();let e=[];if(this.sourceBlock_&&!this.sourceBlock_.isDeadOrDying())for(var i=this.getVariableTypes(),o=0;o<i.length;o++){const t=this.sourceBlock_.workspace.getVariablesOfType(i[o]);e=e.concat(t)}for(e.sort(vl.compareByName),i=[],o=0;o<e.length;o++)i[o]=[e[o].name,e[o].getId()];return i.push([Hs.Msg$$module$build$src$core$msg.RENAME_VARIABLE,Qu]),Hs.Msg$$module$build$src$core$msg.DELETE_VARIABLE&&i.push([Hs.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",t),Ju]),i}};kn("field_variable",_A);var TA=class extends rA{constructor(t,e,i,o,n,r){super(Yh.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces=null,this.spellcheck_=!1,t!==Yh.SKIP_SETUP&&(r?this.configure_(r):this.setConstraints(e,i,o),this.setValue(t),n&&this.setValidator(n))}configure_(t){super.configure_(t),this.setMinInternal(t.min),this.setMaxInternal(t.max),this.setPrecisionInternal(t.precision)}setConstraints(t,e,i){this.setMinInternal(t),this.setMaxInternal(e),this.setPrecisionInternal(i),this.setValue(this.getValue())}setMin(t){this.setMinInternal(t),this.setValue(this.getValue())}setMinInternal(t){null==t?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))}getMin(){return this.min_}setMax(t){this.setMaxInternal(t),this.setValue(this.getValue())}setMaxInternal(t){null==t?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))}getMax(){return this.max_}setPrecision(t){this.setPrecisionInternal(t),this.setValue(this.getValue())}setPrecisionInternal(t){this.precision_=Number(t)||0;let e=String(this.precision_);e.includes("e")&&(e=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));const i=e.indexOf(".");this.decimalPlaces=-1===i?t?0:null:e.length-i-1}getPrecision(){return this.precision_}doClassValidation_(t){return null===t?null:(t=(t=(t=`${t}`.replace(/O/gi,"0")).replace(/,/g,"")).replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t)?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),null!==this.decimalPlaces&&(t=Number(t.toFixed(this.decimalPlaces))),t))}widgetCreate_(){const t=super.widgetCreate_();return-1/0<this.min_&&(t.min=`${this.min_}`,Ne(t,Gl.VALUEMIN,this.min_)),1/0>this.max_&&(t.max=`${this.max_}`,Ne(t,Gl.VALUEMAX,this.max_)),t}static fromJson(t){return new this(t.value,void 0,void 0,void 0,void 0,t)}};kn("field_number",TA),TA.prototype.DEFAULT_VALUE=0;var EA=class extends Ou{constructor(t,e,i){super(String(null!=t?t:""),e,i),this.EDITABLE=!1,this.SERIALIZABLE=!0}static fromJson(t){return new this(po(t.text),void 0,t)}};kn("field_label_serializable",EA);var wA=class extends Yh{constructor(t,e,i){super(Yh.SKIP_SETUP),this.SERIALIZABLE=!0,this.CURSOR="default",this.value_=this.value_,this.checkChar=wA.CHECK_CHAR,t!==Yh.SKIP_SETUP&&(i&&this.configure_(i),this.setValue(t),e&&this.setValidator(e))}configure_(t){super.configure_(t),t.checkCharacter&&(this.checkChar=t.checkCharacter)}saveState(){const t=this.saveLegacyState(wA);return null!==t?t:this.getValueBoolean()}initView(){super.initView();const t=this.getTextElement();et(t,"blocklyCheckbox"),t.style.display=this.value_?"block":"none"}render_(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)}getDisplayText_(){return this.checkChar}setCheckCharacter(t){this.checkChar=t||wA.CHECK_CHAR,this.forceRerender()}showEditor_(){this.setValue(!this.value_)}doClassValidation_(t){return!0===t||"TRUE"===t?"TRUE":!1===t||"FALSE"===t?"FALSE":null}doValueUpdate_(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")}getValue(){return this.value_?"TRUE":"FALSE"}getValueBoolean(){return this.value_}getText(){return String(this.convertValueToBool_(this.value_))}convertValueToBool_(t){return"string"==typeof t?"TRUE"===t:!!t}static fromJson(t){return new this(t.checked,void 0,t)}};wA.CHECK_CHAR="â",kn("field_checkbox",wA),wA.prototype.DEFAULT_VALUE=!1;var kA=class{constructor(t,e){this.draggable=t,this.workspace=e,this.dragTarget=null,this.startLoc=t.getRelativeToSurfaceXY()}onDragStart(t){this.draggable.startDrag(t)}onDrag(t,e){this.moveDraggable(t,e),e=this.getRoot(this.draggable),Fr(e)&&e.setDeleteStyle(this.wouldDeleteDraggable(t,e)),this.updateDragTarget(t)}updateDragTarget(t){t=this.workspace.getDragTarget(t);const e=this.getRoot(this.draggable);if(this.dragTarget!==t){let i;null==(i=this.dragTarget)||i.onDragExit(e),null==t||t.onDragEnter(e)}null==t||t.onDragOver(e),this.dragTarget=t}moveDraggable(t,e){e=this.pixelsToWorkspaceUnits(e),e=mg.sum(this.startLoc,e),this.draggable.drag(e,t)}wouldDeleteDraggable(t,e){return!(!(t=this.workspace.getDragTarget(t))||!this.workspace.getComponentManager().hasCapability(t.id,Ig.Capability.DELETE_AREA))&&t.wouldDelete(e)}onDragEnd(t){const e=Hs.getGroup$$module$build$src$core$events$utils();var i=this.workspace.getDragTarget(t);const o=this.getRoot(this.draggable);if(i){let t;null==(t=this.dragTarget)||t.onDrop(o)}this.shouldReturnToStart(t,o)&&this.draggable.revertDrag(),(i=Fr(o)&&this.wouldDeleteDraggable(t,o))&&this.draggable instanceof bd&&pn(this.draggable.getRootBlock()),this.draggable.endDrag(t),i&&Fr(o)&&(t=Hs.getGroup$$module$build$src$core$events$utils(),Hs.setGroup$$module$build$src$core$events$utils(e),o.dispose(),Hs.setGroup$$module$build$src$core$events$utils(t))}getRoot(t){return t instanceof bd?t.getRootBlock():t}shouldReturnToStart(t,e){return!!(t=this.workspace.getDragTarget(t))&&t.shouldPreventMove(e)}pixelsToWorkspaceUnits(t){return t=new mg(t.x/this.workspace.scale,t.y/this.workspace.scale),this.workspace.isMutator&&t.scale(1/this.workspace.options.parentWorkspace.scale),t}};t(js.BLOCK_DRAGGER,Ws,kA);var OA={};OA.BlockDragStrategy=md,OA.BubbleDragStrategy=Pc,OA.CommentDragStrategy=Nl,OA.Dragger=kA;var SA=class extends $a{constructor(t,e,i){super(t?t.workspace.id:void 0),this.type=ia,t&&(this.blockId=t.id,this.isStart=e,this.blocks=i)}toJson(){const t=super.toJson();if(void 0===this.isStart)throw Error("Whether this event is the start of a drag is undefined. Either pass the value to the constructor, or call fromJson");if(void 0===this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new SA)).isStart=t.isStart,e.blockId=t.blockId,e.blocks=t.blocks,e}};t(js.EVENT,ia,SA);var RA=class extends oh{constructor(t,e,i,o){super(t),this.type=Qs,this.recordUndo=!1,t&&(this.name=e,this.oldValue=i,this.newValue=o)}toJson(){const t=super.toJson();if(!this.name)throw Error("The changed field name is undefined. Either pass a name to the constructor, or call fromJson.");return t.name=this.name,t.oldValue=this.oldValue,t.newValue=this.newValue,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new RA)).name=t.name,e.oldValue=t.oldValue,e.newValue=t.newValue,e}isNull(){return this.oldValue===this.newValue}run(t){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");if(!(e=e.getBlockById(this.blockId)))throw Error("The associated block is undefined. Either pass a block to the constructor, or call fromJson");t=t?this.newValue:this.oldValue,(e=e.getField(this.name))?e.setValue(t):console.warn("Can't set non-existent field: "+this.name)}};t(js.EVENT,Qs,RA);var xA=class extends oh{constructor(t){super(t),this.type=Hs.MOVE$$module$build$src$core$events$utils,t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate)}toJson(){const t=super.toJson();return t.oldParentId=this.oldParentId,t.oldInputName=this.oldInputName,this.oldCoordinate&&(t.oldCoordinate=`${Math.round(this.oldCoordinate.x)}, ${Math.round(this.oldCoordinate.y)}`),t.newParentId=this.newParentId,t.newInputName=this.newInputName,this.newCoordinate&&(t.newCoordinate=`${Math.round(this.newCoordinate.x)}, ${Math.round(this.newCoordinate.y)}`),this.reason&&(t.reason=this.reason),this.recordUndo||(t.recordUndo=this.recordUndo),t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new xA)).oldParentId=t.oldParentId,e.oldInputName=t.oldInputName,t.oldCoordinate&&(i=t.oldCoordinate.split(","),e.oldCoordinate=new mg(Number(i[0]),Number(i[1]))),e.newParentId=t.newParentId,e.newInputName=t.newInputName,t.newCoordinate&&(i=t.newCoordinate.split(","),e.newCoordinate=new mg(Number(i[0]),Number(i[1]))),void 0!==t.reason&&(e.reason=t.reason),void 0!==t.recordUndo&&(e.recordUndo=t.recordUndo),e}recordNew(){const t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate}setReason(t){this.reason=t}currentLocation_(){var t=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var e=t.getBlockById(this.blockId);if(!e)throw Error("The block associated with the block move event could not be found");t={};const i=e.getParent();return i?(t.parentId=i.id,(e=i.getInputWithBlock(e))&&(t.inputName=e.name)):t.coordinate=e.getRelativeToSurfaceXY(),t}isNull(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&mg.equals(this.oldCoordinate,this.newCoordinate)}run(t){var e=this.getEventWorkspace_();if(!this.blockId)throw Error("The block ID is undefined. Either pass a block to the constructor, or call fromJson");var i=e.getBlockById(this.blockId);if(i){var o=t?this.newParentId:this.oldParentId,n=t?this.newInputName:this.oldInputName;if(t=t?this.newCoordinate:this.oldCoordinate,o){var r=e.getBlockById(o);if(!r)return void console.warn("Can't connect to non-existent block: "+o)}if(i.getParent()&&i.unplug(),t)n=i.getRelativeToSurfaceXY(),i.moveBy(t.x-n.x,t.y-n.y,this.reason);else{let t,o;(!(e=i.outputConnection)||i.previousConnection&&i.previousConnection.isConnected())&&(e=i.previousConnection),i=null==(o=e)?void 0:o.type,n?(i=r.getInput(n))&&(t=i.connection):i===Cc.PREVIOUS_STATEMENT&&(t=r.nextConnection),t&&e?e.connect(t):console.warn("Can't connect to non-existent input: "+n)}}else console.warn("Can't move non-existent block: "+this.blockId)}};t(js.EVENT,Hs.MOVE$$module$build$src$core$events$utils,xA);var DA,MA=class extends $a{constructor(t,e,i){super(t?t.workspace.id:void 0),this.type=sa,t&&(this.blockId=t.id,this.isOpen=e,this.bubbleType=i)}toJson(){const t=super.toJson();if(void 0===this.isOpen)throw Error("Whether this event is for opening the bubble is undefined. Either pass the value to the constructor, or call fromJson");if(!this.bubbleType)throw Error("The type of bubble is undefined. Either pass the value to the constructor, or call fromJson");return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId||"",t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new MA)).isOpen=t.isOpen,e.bubbleType=t.bubbleType,e.blockId=t.blockId,e}};(function(t){t.MUTATOR="mutator",t.COMMENT="comment",t.WARNING="warning"})(DA||(DA={})),t(js.EVENT,sa,MA);var NA={};NA.BubbleOpen=MA,NA.BubbleType=DA;var LA=class extends Pa{constructor(t){super(),this.isBlank=!t,t&&(this.commentId=t.id,this.workspaceId=t.workspace.id,this.group=Hs.getGroup$$module$build$src$core$events$utils(),this.recordUndo=u())}toJson(){const t=super.toJson();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");return t.commentId=this.commentId,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new LA)).commentId=t.commentId,e}static CommentCreateDeleteHelper(t,e){const i=t.getEventWorkspace_();if(e){if(!t.json)throw Error("Encountered a comment event without proper json");Oe(t.json,i)}else{if(!t.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(e=i.getCommentById(t.commentId))?e.dispose():console.warn("Can't delete non-existent comment: "+t.commentId)}}},PA=class extends LA{constructor(t,e,i){super(t),this.type=da,t&&(this.oldContents_=void 0===e?"":e,this.newContents_=void 0===i?"":i)}toJson(){const t=super.toJson();if(!this.oldContents_)throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson");if(!this.newContents_)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new PA)).oldContents_=t.oldContents,e.newContents_=t.newContents,e}isNull(){return this.oldContents_===this.newContents_}run(t){var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId)){var i=t?this.newContents_:this.oldContents_;if(void 0===i){if(t)throw Error("The new contents is undefined. Either pass a value to the constructor, or call fromJson");throw Error("The old contents is undefined. Either pass a value to the constructor, or call fromJson")}e.setText(i)}else console.warn("Can't change non-existent comment: "+this.commentId)}};t(js.EVENT,da,PA);var $A=class extends LA{constructor(t){super(t),this.type=ca,t&&(this.xml=Vo(t),this.json=ke(t,{addCoordinates:!0}))}toJson(){const t=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return t.xml=Qo(this.xml),t.json=this.json,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new $A)).xml=Hs.textToDom$$module$build$src$core$utils$xml(t.xml),e.json=t.json,e}run(t){LA.CommentCreateDeleteHelper(this,t)}};t(js.EVENT,ca,$A);var BA=class extends LA{constructor(t){super(t),this.type=ua,t&&(this.xml=Vo(t),this.json=ke(t,{addCoordinates:!0}))}run(t){LA.CommentCreateDeleteHelper(this,!t)}toJson(){const t=super.toJson();if(!this.xml)throw Error("The comment XML is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.json)throw Error("The comment JSON is undefined. Either pass a block to the constructor, or call fromJson");return t.xml=Qo(this.xml),t.json=this.json,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new BA)).xml=Hs.textToDom$$module$build$src$core$utils$xml(t.xml),e.json=t.json,e}};t(js.EVENT,ua,BA);var FA=class extends LA{constructor(t){super(t),this.type=Aa,t&&(this.comment_=t,this.oldCoordinate_=t.getRelativeToSurfaceXY())}recordNew(){if(this.newCoordinate_)throw Error("Tried to record the new position of a comment on the same event twice.");if(!this.comment_)throw Error("The comment is undefined. Pass a comment to the constructor if you want to use the record functionality");this.newCoordinate_=this.comment_.getRelativeToSurfaceXY()}setReason(t){this.reason=t}setOldCoordinate(t){this.oldCoordinate_=t}toJson(){const t=super.toJson();if(!this.oldCoordinate_)throw Error("The old comment position is undefined. Either pass a comment to the constructor, or call fromJson");if(!this.newCoordinate_)throw Error("The new comment position is undefined. Either call recordNew, or call fromJson");return t.oldCoordinate=`${Math.round(this.oldCoordinate_.x)}, ${Math.round(this.oldCoordinate_.y)}`,t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y),t}static fromJson(t,e,i){return e=super.fromJson(t,e,null!=i?i:new FA),i=t.oldCoordinate.split(","),e.oldCoordinate_=new mg(Number(i[0]),Number(i[1])),i=t.newCoordinate.split(","),e.newCoordinate_=new mg(Number(i[0]),Number(i[1])),e}isNull(){return mg.equals(this.oldCoordinate_,this.newCoordinate_)}run(t){var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");if(e=e.getCommentById(this.commentId)){if(!(t=t?this.newCoordinate_:this.oldCoordinate_))throw Error("Either oldCoordinate_ or newCoordinate_ is undefined. Either pass a comment to the constructor and call recordNew, or call fromJson");e.moveTo(t)}else console.warn("Can't move non-existent comment: "+this.commentId)}};t(js.EVENT,Aa,FA);var zA=class extends LA{constructor(t,e){super(t),this.newCollapsed=e,this.type=Ia}toJson(){const t=super.toJson();if(void 0===this.newCollapsed)throw Error("The new collapse value undefined. Either call recordNew, or call fromJson");return t.newCollapsed=this.newCollapsed,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new zA)).newCollapsed=t.newCollapsed,e}run(t){var e=this.getEventWorkspace_();if(!this.commentId)throw Error("The comment ID is undefined. Either pass a comment to the constructor, or call fromJson");(e=e.getCommentById(this.commentId))?e.setCollapsed(t?!!this.newCollapsed:!this.newCollapsed):console.warn("Can't collapse or uncollapse non-existent comment: "+this.commentId)}};t(js.EVENT,Ia,zA);var HA=class extends $a{constructor(t,e,i){super(i),this.type=ga,this.oldItem=null!=t?t:void 0,this.newItem=null!=e?e:void 0}toJson(){const t=super.toJson();return t.oldItem=this.oldItem,t.newItem=this.newItem,t}static fromJson(t,e,i){return(e=super.fromJson(t,e,null!=i?i:new HA)).oldItem=t.oldItem,e.newItem=t.newItem,e}};t(js.EVENT,ga,HA);var GA=class extends Pa{constructor(t){super(),this.isBlank=!0,this.recordUndo=!1,this.type=Ca,this.isBlank=!!t,t&&(this.workspaceId=t.id)}};t(js.EVENT,Ca,GA),Hs.CHANGE$$module$build$src$core$events$utils,Hs.CREATE$$module$build$src$core$events$utils,Hs.DELETE$$module$build$src$core$events$utils,Hs.MOVE$$module$build$src$core$events$utils,Hs.CHANGE$$module$build$src$core$events$utils,Hs.CREATE$$module$build$src$core$events$utils,Hs.DELETE$$module$build$src$core$events$utils,Hs.MOVE$$module$build$src$core$events$utils,Hs.disable$$module$build$src$core$events$utils,Hs.enable$$module$build$src$core$events$utils,Hs.getGroup$$module$build$src$core$events$utils,Hs.setGroup$$module$build$src$core$events$utils,Hs.setRecordUndo$$module$build$src$core$events$utils;var UA={};UA.Abstract=Pa,UA.BLOCK_CHANGE=Hs.CHANGE$$module$build$src$core$events$utils,UA.BLOCK_CREATE=Hs.CREATE$$module$build$src$core$events$utils,UA.BLOCK_DELETE=Hs.DELETE$$module$build$src$core$events$utils,UA.BLOCK_DRAG=ia,UA.BLOCK_FIELD_INTERMEDIATE_CHANGE=Qs,UA.BLOCK_MOVE=Hs.MOVE$$module$build$src$core$events$utils,UA.BUBBLE_OPEN=sa,UA.BUMP_EVENTS=fa,UA.BlockBase=oh,UA.BlockChange=nh,UA.BlockCreate=dc,UA.BlockDelete=Nu,UA.BlockDrag=SA,UA.BlockFieldIntermediateChange=RA,UA.BlockMove=xA,UA.BubbleOpen=MA,UA.BubbleType=DA,UA.CHANGE=Hs.CHANGE$$module$build$src$core$events$utils,UA.CLICK=na,UA.COMMENT_CHANGE=da,UA.COMMENT_CREATE=ca,UA.COMMENT_DELETE=ua,UA.COMMENT_MOVE=Aa,UA.CREATE=Hs.CREATE$$module$build$src$core$events$utils,UA.Click=Ba,UA.ClickTarget=Na,UA.CommentBase=LA,UA.CommentChange=PA,UA.CommentCollapse=zA,UA.CommentCreate=$A,UA.CommentDelete=BA,UA.CommentMove=FA,UA.DELETE=Hs.DELETE$$module$build$src$core$events$utils,UA.FINISHED_LOADING=Ca,UA.FinishedLoading=GA,UA.MARKER_MOVE=ra,UA.MOVE=Hs.MOVE$$module$build$src$core$events$utils,UA.MarkerMove=Fu,UA.SELECTED=oa,UA.Selected=ld,UA.THEME_CHANGE=la,UA.TOOLBOX_ITEM_SELECT=ga,UA.TRASHCAN_OPEN=aa,UA.ThemeChange=Ic,UA.ToolboxItemSelect=HA,UA.TrashcanOpen=gd,UA.UI=ea,UA.UiBase=$a,UA.VAR_CREATE=Js,UA.VAR_DELETE=qs,UA.VAR_RENAME=ta,UA.VIEWPORT_CHANGE=ha,UA.VarBase=pl,UA.VarCreate=fl,UA.VarDelete=td,UA.VarRename=ed,UA.ViewportChange=pc,UA.clearPendingUndo=p,UA.disable=Hs.disable$$module$build$src$core$events$utils,UA.disableOrphans=_,UA.enable=Hs.enable$$module$build$src$core$events$utils,UA.filter=C,UA.fire=d,UA.fromJson=b,UA.get=y,UA.getDescendantIds=m,UA.getGroup=Hs.getGroup$$module$build$src$core$events$utils,UA.getRecordUndo=u,UA.isEnabled=f,UA.setGroup=Hs.setGroup$$module$build$src$core$events$utils,UA.setRecordUndo=Hs.setRecordUndo$$module$build$src$core$events$utils;var VA={};VA.BottomRow=aA,VA.ConstantProvider=iA,VA.Drawer=oA,VA.MarkerSvg=uA,VA.PathObject=dA,VA.RenderInfo=cA,VA.Renderer=AA,VA.RightConnectionShape=lA,VA.StatementInput=gA,VA.TopRow=hA,Ns();var WA={};WA.registerCleanup=us,WA.registerCollapse=As,WA.registerCollapseExpandBlock=Ts,WA.registerComment=ys,WA.registerCommentCreate=Rs,WA.registerCommentDelete=Os,WA.registerCommentDuplicate=Ss,WA.registerCommentOptions=Ms,WA.registerDefaultOptions=Ns,WA.registerDelete=ws,WA.registerDeleteAll=vs,WA.registerDisable=Es,WA.registerDuplicate=bs,WA.registerExpand=Is,WA.registerHelp=ks,WA.registerInline=_s,WA.registerRedo=cs,WA.registerUndo=hs;var jA={};jA.CommentView=Ml,jA.RenderedWorkspaceComment=cc,jA.WorkspaceComment=xl;var YA={};YA.Bubble=$c,YA.MiniWorkspaceBubble=Bc,YA.TextBubble=Xc,YA.TextInputBubble=Zc;var XA=class extends Eu{constructor(){super(),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}getCSS_(t){return super.getCSS_(t).concat([`${t} .blocklyInsertionMarker>.blocklyPathLight,`,`${t} .blocklyInsertionMarker>.blocklyPathDark {`,`fill-opacity: ${this.INSERTION_MARKER_OPACITY};`,"stroke: none;","}"])}},ZA=class{constructor(t){this.inlineSteps_=this.steps_="",this.info_=t,this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}getPath(){return this.steps_+"\n"+this.inlineSteps_}drawTopCorner(t){this.steps_+=Qn(t.xPos,this.info_.startY);for(let e,i=0;e=t.elements[i];i++)ou.isLeftSquareCorner(e)?this.steps_+=this.highlightConstants_.START_POINT:ou.isLeftRoundedCorner(e)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):ou.isPreviousConnection(e)?this.steps_+=this.notchPaths_.pathLeft:ou.isHat(e)?this.steps_+=this.startPaths_.path(this.RTL_):ou.isSpacer(e)&&0!==e.width&&(this.steps_+=tr("H",e.xPos+e.width-this.highlightOffset));this.steps_+=tr("H",t.xPos+t.width-this.highlightOffset)}drawJaggedEdge_(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+tr("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset))}drawValueInput(t){const e=t.getLastInput();if(this.RTL_){const i=t.height-e.connectionHeight;this.steps_+=Kn(e.xPos+e.width-this.highlightOffset,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+tr("v",i)}else this.steps_+=Kn(e.xPos+e.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)}drawStatementInput(t){const e=t.getLastInput();if(e)if(this.RTL_){const i=t.height-2*this.insideCornerPaths_.height;this.steps_+=Kn(e.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+tr("v",i)+this.insideCornerPaths_.pathBottom(this.RTL_)+Jn(t.width-e.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=Kn(e.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+Jn(t.width-e.xPos-this.insideCornerPaths_.width,0)}drawRightSideRow(t){const e=t.xPos+t.width-this.highlightOffset;t instanceof yu&&t.followsStatement&&(this.steps_+=tr("H",e)),this.RTL_&&(this.steps_+=tr("H",e),t.height>this.highlightOffset&&(this.steps_+=tr("V",t.yPos+t.height-this.highlightOffset)))}drawBottomRow(t){if(this.RTL_)this.steps_+=tr("V",t.baseline-this.highlightOffset);else{const e=this.info_.bottomRow.elements[0];ou.isLeftSquareCorner(e)?this.steps_+=Kn(t.xPos+this.highlightOffset,t.baseline-this.highlightOffset):ou.isLeftRoundedCorner(e)&&(this.steps_+=Kn(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}}drawLeft(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=Kn(this.info_.startX,t):(this.steps_+=Kn(this.info_.startX+this.highlightOffset,this.info_.bottomRow.baseline-this.highlightOffset),this.steps_+=tr("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(t=this.info_.topRow,ou.isLeftRoundedCorner(t.elements[0])?this.steps_+=tr("V",this.outsideCornerPaths_.height):this.steps_+=tr("V",t.capline+this.highlightOffset))}drawInlineInput(t){const e=this.highlightOffset,i=t.xPos+t.connectionWidth;var o=t.centerline-t.height/2;const n=t.width-t.connectionWidth,r=o+e;this.RTL_?(o=t.connectionOffsetY-e,t=t.height-(t.connectionOffsetY+t.connectionHeight)+e,this.inlineSteps_+=Kn(i-e,r)+tr("v",o)+this.puzzleTabPaths_.pathDown(this.RTL_)+tr("v",t)+tr("h",n)):this.inlineSteps_+=Kn(t.xPos+t.width+e,r)+tr("v",t.height)+tr("h",-n)+Kn(i,o+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)}},KA=class extends ku{constructor(t,e){super(t,e),this.highlighter_=new ZA(e)}draw(){this.drawOutline_(),this.drawInternals_(),this.updateConnectionHighlights();const t=this.block_.pathObject;t.setPath(this.outlinePath_+"\n"+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),this.recordSizeOnBlock_()}drawTop_(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),super.drawTop_()}drawJaggedEdge_(t){this.highlighter_.drawJaggedEdge_(t),super.drawJaggedEdge_(t)}drawValueInput_(t){this.highlighter_.drawValueInput(t),super.drawValueInput_(t)}drawStatementInput_(t){this.highlighter_.drawStatementInput(t),super.drawStatementInput_(t)}drawRightSideRow_(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=tr("H",t.xPos+t.width)+tr("V",t.yPos+t.height)}drawBottom_(){this.highlighter_.drawBottomRow(this.info_.bottomRow),super.drawBottom_()}drawLeft_(){this.highlighter_.drawLeft(),super.drawLeft_()}drawInlineInput_(t){this.highlighter_.drawInlineInput(t),super.drawInlineInput_(t)}positionInlineInputConnection_(t){const e=t.centerline-t.height/2;if(t.connectionModel){let i=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),t.connectionModel.setOffsetInBlock(i,e+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}}positionStatementInputConnection_(t){const e=t.getLastInput();if(null!=e&&e.connectionModel){let i=t.xPos+t.statementEdge+e.notchOffset;i=this.info_.RTL?-1*i:i+this.constants_.DARK_PATH_OFFSET,e.connectionModel.setOffsetInBlock(i,t.yPos+this.constants_.DARK_PATH_OFFSET)}}positionExternalValueConnection_(t){const e=t.getLastInput();if(e&&e.connectionModel){let i=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(i*=-1),e.connectionModel.setOffsetInBlock(i,t.yPos)}}positionNextConnection_(){const t=this.info_.bottomRow;if(t.connection){const e=t.connection,i=e.xPos;e.connectionModel.setOffsetInBlock((this.info_.RTL?-i:i)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}}},QA=class{constructor(t){this.OFFSET=.5,this.constantProvider=t,this.START_POINT=Qn(this.OFFSET,this.OFFSET)}init(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()}makeInsideCorner(){const t=this.constantProvider.CORNER_RADIUS,e=this.OFFSET,i=(1-Math.SQRT1_2)*(t+e)-e,o=Qn(i,i)+er("a","0 0,0",t,Xn(-i-e,t-i)),n=er("a","0 0,0",t+e,Xn(t+e,t+e)),r=Qn(i,-i)+er("a","0 0,0",t+e,Xn(t-i,i+e));return{width:t+e,height:t,pathTop:t=>t?o:"",pathBottom:t=>t?n:r}}makeOutsideCorner(){const t=this.constantProvider.CORNER_RADIUS,e=this.OFFSET,i=(1-Math.SQRT1_2)*(t-e)+e,o=Qn(i,i)+er("a","0 0,1",t-e,Xn(t-i,-i+e)),n=Qn(e,t)+er("a","0 0,1",t-e,Xn(t,-t+e)),r=-i,s=Qn(i,r)+er("a","0 0,1",t-e,Xn(-i+e,-r-t));return{height:t,topLeft:t=>t?o:n,bottomLeft:()=>s}}makePuzzleTab(){const t=this.constantProvider.TAB_WIDTH,e=this.constantProvider.TAB_HEIGHT,i=Qn(-2,3.4-e)+Jn(-.45*t,-2.1),o=tr("v",2.5)+Qn(.97*-t,2.5)+Zn("q",[Xn(.05*-t,10),Xn(.3*t,9.5)])+Qn(.67*t,-1.9)+tr("v",2.5),n=tr("v",-1.5)+Qn(-.92*t,-.5)+Zn("q",[Xn(-.19*t,-5.5),Xn(0,-11)])+Qn(.92*t,1),r=Qn(-5,e-.7)+Jn(.46*t,-2.1);return{width:t,height:e,pathUp:t=>t?i:n,pathDown:t=>t?o:r}}makeNotch(){return{pathLeft:tr("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}}makeJaggedTeeth(){return{pathLeft:Jn(5.1,2.6)+Qn(-10.2,6.8)+Jn(5.1,2.6),height:12,width:10.2}}makeStartHat(){const t=this.constantProvider.START_HAT.height,e=Qn(25,-8.7)+Zn("c",[Xn(29.7,-6.2),Xn(57.2,-.5),Xn(75,8.7)]),i=Zn("c",[Xn(17.8,-9.2),Xn(45.3,-14.9),Xn(75,-8.7)])+Kn(100.5,t+.5);return{path:t=>t?e:i}}},JA=class extends Au{constructor(t,e){super(t,e),this.constants_=t,this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}},qA=class extends Iu{constructor(t,e){super(t,e),this.constants_=t,this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}},tI=class extends Mu{constructor(t,e){super(t,e),this.renderer_=t}getRenderer(){return this.renderer_}populateBottomRow_(){super.populateBottomRow_(),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1]instanceof Du||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)}addInput_(t,e){this.isInline&&t instanceof Hs.ValueInput$$module$build$src$core$inputs$value_input?(e.elements.push(new JA(this.constants_,t)),e.hasInlineInput=!0):t instanceof Du?(e.elements.push(new qA(this.constants_,t)),e.hasStatement=!0):t instanceof Hs.ValueInput$$module$build$src$core$inputs$value_input?(e.elements.push(new lu(this.constants_,t)),e.hasExternalInput=!0):(t instanceof Ru||t instanceof xu)&&(e.minHeight=Math.max(e.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),e.hasDummyInput=!0),this.isInline||null!==e.align||(e.align=t.align)}addElemSpacing_(){let t=!1;for(let e,i=0;e=this.rows[i];i++)e.hasExternalInput&&(t=!0);for(let i,o=0;i=this.rows[o];o++){var e=i.elements;if(i.elements=[],i.startsWithElemSpacer()&&i.elements.push(new du(this.constants_,this.getInRowSpacing_(null,e[0]))),e.length){for(let t=0;t<e.length-1;t++){i.elements.push(e[t]);const o=this.getInRowSpacing_(e[t],e[t+1]);i.elements.push(new du(this.constants_,o))}i.elements.push(e[e.length-1]),i.endsWithElemSpacer()&&(e=this.getInRowSpacing_(e[e.length-1],null),t&&i.hasDummyInput&&(e+=this.constants_.TAB_WIDTH),i.elements.push(new du(this.constants_,e)))}}}getInRowSpacing_(t,e){if(!t)return e&&ou.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:e&&ou.isInlineInput(e)?this.constants_.MEDIUM_LARGE_PADDING:e&&ou.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ou.isInput(t)&&(!e||ou.isStatementInput(e)))return ou.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:ou.isIcon(t)?2*this.constants_.LARGE_PADDING+1:ou.isHat(t)?this.constants_.NO_PADDING:ou.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:ou.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:ou.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ou.isInput(t)&&!e){if(ou.isExternalInput(t))return this.constants_.NO_PADDING;if(ou.isInlineInput(t))return this.constants_.LARGE_PADDING;if(ou.isStatementInput(t))return this.constants_.NO_PADDING}if(!ou.isInput(t)&&e&&ou.isInput(e)){if(ou.isField(t)&&t.isEditable){if(ou.isInlineInput(e)||ou.isExternalInput(e))return this.constants_.SMALL_PADDING}else{if(ou.isInlineInput(e)||ou.isExternalInput(e))return this.constants_.MEDIUM_LARGE_PADDING;if(ou.isStatementInput(e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ou.isIcon(t)&&e&&!ou.isInput(e))return this.constants_.LARGE_PADDING;if(ou.isInlineInput(t)&&e&&ou.isField(e))return e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ou.isLeftSquareCorner(t)&&e){if(ou.isHat(e))return this.constants_.NO_PADDING;if(ou.isPreviousConnection(e))return e.notchOffset;if(ou.isNextConnection(e))return e.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(ou.isLeftRoundedCorner(t)&&e){if(ou.isPreviousConnection(e))return e.notchOffset-this.constants_.CORNER_RADIUS;if(ou.isNextConnection(e))return e.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return ou.isField(t)&&e&&ou.isField(e)&&t.isEditable===e.isEditable||e&&ou.isJaggedEdge(e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(t,e){return ou.isTopRow(t)&&ou.isBottomRow(e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ou.isTopRow(t)||ou.isBottomRow(e)?this.constants_.NO_PADDING:t.hasExternalInput&&e.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&e.hasStatement||!t.hasStatement&&e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(t,e){if(ou.isSpacer(e))return t.yPos+e.height/2;if(ou.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,ou.isNextConnection(e)?t+e.height/2:t-e.height/2;if(ou.isTopRow(t))return ou.isHat(e)?t.capline-e.height/2:t.capline+e.height/2;let i=t.yPos;return ou.isField(e)||ou.isIcon(e)?(i+=e.height/2,(t.hasInlineInput||t.hasStatement)&&e.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(i+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):i=ou.isInlineInput(e)?i+e.height/2:i+t.height/2,i}alignRowElements_(){if(this.isInline){var t=0,e=new WeakMap,i=null;for(let o,n=this.rows.length-1;o=this.rows[n];n--)e.set(o,t),ou.isInputRow(o)&&(o.hasStatement&&this.alignStatementRow_(o),i&&i.hasStatement&&o.width<i.width?e.set(o,i.width):t=o.hasStatement?o.width:Math.max(t,o.width),i=o);t=0;for(let o,n=0;o=this.rows[n];n++)o.hasStatement?t=this.getDesiredRowWidth_(o):ou.isSpacer(o)?o.width=Math.max(t,e.get(o)):(i=o.width,0<(t=Math.max(t,e.get(o))-i)&&this.addAlignmentPadding_(o,t),t=o.width)}else super.alignRowElements_()}getDesiredRowWidth_(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:super.getDesiredRowWidth_(t)}finalize_(){let t=0,e=0;for(let o,n=0;o=this.rows[n];n++){o.yPos=e,o.xPos=this.startX,e+=o.height,t=Math.max(t,o.widthWithConnectedBlocks);var i=e-this.topRow.ascenderHeight;o===this.bottomRow&&i<this.constants_.MIN_BLOCK_HEIGHT&&(i=this.constants_.MIN_BLOCK_HEIGHT-i,this.bottomRow.height+=i,e+=i),this.recordElemPositions_(o)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(i=this.block_.nextConnection.targetBlock())&&(t=Math.max(t,i.getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=e-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=e+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline}},eI=class extends Hu{constructor(t,e,i){super(t,e,i),this.constants=i,this.colourDark="#000000",this.svgPathDark=tt(Og.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=tt(Og.PATH,{class:"blocklyPathLight"},this.svgRoot)}setPath(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)}setHighlightPath(t){this.svgPathLight.setAttribute("d",t)}flipRTL(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")}applyColour(t){if(this.svgPathLight.style.display="",this.svgPathDark.style.display="",!this.style.colourTertiary)throw Error("The renderer did not properly initialize the tertiary colour of the block style");this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),super.applyColour(t),this.svgPath.setAttribute("stroke","none")}setStyle(t){this.style=t,this.colourDark=uo("#000",this.style.colourPrimary,.2)||this.colourDark}updateHighlighted(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")}updateShadow_(t){if(t){if(this.svgPathLight.style.display="none",!this.style.colourSecondary)throw Error("The renderer did not properly initialize the secondary colour of the block style block style");this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary)}}updateDisabled_(t){super.updateDisabled_(t),t&&this.svgPath.setAttribute("stroke","none")}},iI=class extends Wu{constructor(t){super(t),this.highlightConstants=null}init(t,e){super.init(t,e),this.highlightConstants=this.makeHighlightConstants_(),this.highlightConstants.init()}refreshDom(t,e){super.refreshDom(t,e),this.getHighlightConstants().init()}makeConstants_(){return new XA}makeRenderInfo_(t){return new tI(this,t)}makeDrawer_(t,e){return new KA(t,e)}makePathObject(t,e){return new eI(t,e,this.getConstants())}makeHighlightConstants_(){return new QA(this.getConstants())}getHighlightConstants(){if(!this.highlightConstants)throw Error("Cannot access the highlight constants because init has not been called");return this.highlightConstants}};_r("geras",iI);var oI={};oI.ConstantProvider=XA,oI.Drawer=KA,oI.HighlightConstantProvider=QA,oI.Highlighter=ZA,oI.InlineInput=JA,oI.PathObject=eI,oI.RenderInfo=tI,oI.Renderer=iI,oI.StatementInput=qA;var nI=class extends Mu{constructor(t,e){super(t,e)}getRenderer(){return this.renderer_}addElemSpacing_(){let t=!1;for(var e=0;e<this.rows.length;e++)if(this.rows[e].hasExternalInput){t=!0;break}for(e=0;e<this.rows.length;e++){const o=this.rows[e];var i=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new du(this.constants_,this.getInRowSpacing_(null,i[0]))),i.length){for(let t=0;t<i.length-1;t++){o.elements.push(i[t]);const e=this.getInRowSpacing_(i[t],i[t+1]);o.elements.push(new du(this.constants_,e))}o.elements.push(i[i.length-1]),o.endsWithElemSpacer()&&(i=this.getInRowSpacing_(i[i.length-1],null),t&&o.hasDummyInput&&(i+=this.constants_.TAB_WIDTH),o.elements.push(new du(this.constants_,i)))}}}getInRowSpacing_(t,e){if(!t)return e&&ou.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:e&&ou.isInlineInput(e)?this.constants_.MEDIUM_LARGE_PADDING:e&&ou.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!ou.isInput(t)&&!e)return ou.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:ou.isIcon(t)?2*this.constants_.LARGE_PADDING+1:ou.isHat(t)?this.constants_.NO_PADDING:ou.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:ou.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:ou.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(ou.isInput(t)&&!e){if(ou.isExternalInput(t))return this.constants_.NO_PADDING;if(ou.isInlineInput(t))return this.constants_.LARGE_PADDING;if(ou.isStatementInput(t))return this.constants_.NO_PADDING}if(!ou.isInput(t)&&e&&ou.isInput(e)){if(ou.isField(t)&&t.isEditable){if(ou.isInlineInput(e)||ou.isExternalInput(e))return this.constants_.SMALL_PADDING}else{if(ou.isInlineInput(e)||ou.isExternalInput(e))return this.constants_.MEDIUM_LARGE_PADDING;if(ou.isStatementInput(e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(ou.isIcon(t)&&e&&!ou.isInput(e))return this.constants_.LARGE_PADDING;if(ou.isInlineInput(t)&&e&&ou.isField(e))return e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(ou.isLeftSquareCorner(t)&&e){if(ou.isHat(e))return this.constants_.NO_PADDING;if(ou.isPreviousConnection(e)||ou.isNextConnection(e))return e.notchOffset}return ou.isLeftRoundedCorner(t)&&e?e.notchOffset-this.constants_.CORNER_RADIUS:ou.isField(t)&&e&&ou.isField(e)&&t.isEditable===e.isEditable||e&&ou.isJaggedEdge(e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getSpacerRowHeight_(t,e){return ou.isTopRow(t)&&ou.isBottomRow(e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:ou.isTopRow(t)||ou.isBottomRow(e)?this.constants_.NO_PADDING:t.hasExternalInput&&e.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&e.hasStatement||t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING}getElemCenterline_(t,e){if(ou.isSpacer(e))return t.yPos+e.height/2;if(ou.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,ou.isNextConnection(e)?t+e.height/2:t-e.height/2;if(ou.isTopRow(t))return ou.isHat(e)?t.capline-e.height/2:t.capline+e.height/2;let i=t.yPos;return ou.isField(e)&&t.hasStatement?i+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+e.height/2):i+t.height/2}finalize_(){let t=0,e=0;for(var i=0;i<this.rows.length;i++){const n=this.rows[i];n.yPos=e,n.xPos=this.startX,e+=n.height,t=Math.max(t,n.widthWithConnectedBlocks);var o=e-this.topRow.ascenderHeight;n===this.bottomRow&&o<this.constants_.MIN_BLOCK_HEIGHT&&(o=this.constants_.MIN_BLOCK_HEIGHT-o,this.bottomRow.height+=o,e+=o),this.recordElemPositions_(n)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(i=this.block_.nextConnection.targetBlock())&&(t=Math.max(t,i.getHeightWidth().width)),this.bottomRow.baseline=e-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=e,this.startY=this.topRow.capline}},rI=class extends Wu{constructor(t){super(t)}makeRenderInfo_(t){return new nI(this,t)}};_r("thrasos",rI);var sI={};sI.RenderInfo=nI,sI.Renderer=rI;var aI=new wc("zelos",{colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},{colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}}),gI={Classic:kc,Zelos:aI},lI=class{constructor(t,e,i){this.id_=t.toolboxitemid||h(),this.level_=(this.parent_=i||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=e,this.workspace_=this.parentToolbox_.getWorkspace()}init(){}getDiv(){return null}getClickTarget(){return null}getId(){return this.id_}getParent(){return null}getLevel(){return this.level_}isSelectable(){return!1}isCollapsible(){return!1}dispose(){}setVisible_(t){}},hI=class extends lI{constructor(t,e,i){super(t,e,i),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[],this.cssConfig_=this.makeDefaultCssConfig_()}init(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),"true"===this.toolboxItemDef_.hidden&&this.hide()}makeDefaultCssConfig_(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}}parseContents_(t){if("custom"in t)this.flyoutItems_=t.custom;else if(t=t.contents)for(let e=0;e<t.length;e++){const i=t[e];Array.isArray(this.flyoutItems_)&&this.flyoutItems_.push(i)}}parseCategoryDef_(t){this.name_="name"in t?po(t.name):"",this.colour_=this.getColour_(t),Object.assign(this.cssConfig_,t.cssconfig||t.cssConfig)}createDom_(){this.htmlDiv_=this.createContainer_(),Me(this.htmlDiv_,Hl.TREEITEM),Ne(this.htmlDiv_,Gl.SELECTED,!1),Ne(this.htmlDiv_,Gl.LEVEL,this.level_+1),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),Me(this.iconDom_,Hl.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_);const t=this.labelDom_.getAttribute("id");return t&&Ne(this.htmlDiv_,Gl.LABELLEDBY,t),this.addColourBorder_(this.colour_),this.htmlDiv_}createContainer_(){const t=document.createElement("div"),e=this.cssConfig_.container;return e&&et(t,e),t}createRowContainer_(){const t=document.createElement("div");var e=this.cssConfig_.row;return e&&et(t,e),e=hI.nestedPadding*this.getLevel()+"px",this.workspace_.RTL?t.style.paddingRight=e:t.style.paddingLeft=e,t}createRowContentsContainer_(){const t=document.createElement("div"),e=this.cssConfig_.rowcontentcontainer;return e&&et(t,e),t}createIconDom_(){const t=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const e=this.cssConfig_.icon;e&&et(t,e)}return t.style.display="inline-block",t}createLabelDom_(t){const e=document.createElement("span");return e.setAttribute("id",this.getId()+".label"),e.textContent=t,(t=this.cssConfig_.label)&&et(e,t),e}refreshTheme(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)}addColourBorder_(t){t&&(t=hI.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)}getColour_(t){const e=t.categorystyle||t.categoryStyle;if((t=t.colour)&&e)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else{if(e)return this.getColourfromStyle_(e);if(t)return this.parseColour_(t)}return""}getColourfromStyle_(t){var e=this.workspace_.getTheme();if(t&&e){if((e=e.categoryStyles[t])&&e.colour)return this.parseColour_(e.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""}getClickTarget(){return this.rowDiv_}parseColour_(t){if(null==(t=po(t))||""===t)return"";var e=Number(t);return isNaN(e)?(e=go(t))?e:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):Ao(e)}openIcon_(t){if(t){var e=this.cssConfig_.closedicon;e&&it(t,e),(e=this.cssConfig_.openicon)&&et(t,e)}}closeIcon_(t){if(t){var e=this.cssConfig_.openicon;e&&it(t,e),(e=this.cssConfig_.closedicon)&&et(t,e)}}setVisible_(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}hide(){this.setVisible_(!1)}show(){this.setVisible_(!0)}isVisible(){return!this.isHidden_&&this.allAncestorsExpanded_()}allAncestorsExpanded_(){let t=this;for(;t.getParent();)if(t=t.getParent(),!t.isExpanded())return!1;return!0}isSelectable(){return this.isVisible()&&!this.isDisabled_}onClick(t){}setSelected(t){if(this.rowDiv_){var e=this.cssConfig_.selected;if(t){const t=this.parseColour_(hI.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||t,e&&et(this.rowDiv_,e)}else this.rowDiv_.style.backgroundColor="",e&&ot(this.rowDiv_,e);Ne(this.htmlDiv_,Gl.SELECTED,t)}}setDisabled(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",`${t}`),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")}getName(){return this.name_}getParent(){return this.parent_}getDiv(){return this.htmlDiv_}getContents(){return this.flyoutItems_}updateFlyoutContents(t){this.flyoutItems_=[],this.toolboxItemDef_="string"==typeof t?{kind:this.toolboxItemDef_.kind,custom:t,id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden}:{kind:this.toolboxItemDef_.kind,name:"name"in this.toolboxItemDef_?this.toolboxItemDef_.name:"",contents:Nt(t),id:this.toolboxItemDef_.id,categorystyle:this.toolboxItemDef_.categorystyle,colour:this.toolboxItemDef_.colour,cssconfig:this.toolboxItemDef_.cssconfig,hidden:this.toolboxItemDef_.hidden},this.parseContents_(this.toolboxItemDef_)}dispose(){rt(this.htmlDiv_)}};hI.registrationName="category",hI.nestedPadding=19,hI.borderWidth=8,hI.defaultBackgroundColour="#57e",J('\n.blocklyTreeRow:not(.blocklyTreeSelected):hover {\n  background-color: rgba(255, 255, 255, .2);\n}\n\n.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {\n  margin: 1px 5px 1px 0;\n}\n\n.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {\n  margin: 1px 0 1px 5px;\n}\n\n.blocklyTreeRow {\n  height: 22px;\n  line-height: 22px;\n  margin-bottom: 3px;\n  padding-right: 8px;\n  white-space: nowrap;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {\n  margin-left: 8px;\n  padding-right: 0;\n}\n\n.blocklyTreeIcon {\n  background-image: url(<<<PATH>>>/sprites.png);\n  height: 16px;\n  vertical-align: middle;\n  visibility: hidden;\n  width: 16px;\n}\n\n.blocklyTreeIconClosed {\n  background-position: -32px -1px;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {\n  background-position: 0 -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: -32px -17px;\n}\n\n.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {\n  background-position: 0 -17px;\n}\n\n.blocklyTreeIconOpen {\n  background-position: -16px -1px;\n}\n\n.blocklyTreeSelected>.blocklyTreeIconOpen {\n  background-position: -16px -17px;\n}\n\n.blocklyTreeLabel {\n  cursor: default;\n  font: 16px sans-serif;\n  padding: 0 3px;\n  vertical-align: middle;\n}\n\n.blocklyToolboxDelete .blocklyTreeLabel {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyTreeSelected .blocklyTreeLabel {\n  color: #fff;\n}\n'),t(js.TOOLBOX_ITEM,hI.registrationName,hI);var cI=class extends lI{constructor(t,e){super(t,e),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,Object.assign(this.cssConfig_,t.cssconfig||t.cssConfig)}init(){this.createDom_()}createDom_(){const t=document.createElement("div"),e=this.cssConfig_.container;return e&&et(t,e),this.htmlDiv_=t}getDiv(){return this.htmlDiv_}dispose(){rt(this.htmlDiv_)}};cI.registrationName="sep",J('\n.blocklyTreeSeparator {\n  border-bottom: solid #e5e5e5 1px;\n  height: 0;\n  margin: 5px 0;\n}\n\n.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {\n  border-right: solid #e5e5e5 1px;\n  border-bottom: none;\n  height: auto;\n  margin: 0 5px 0 5px;\n  padding: 5px 0;\n  width: 0;\n}\n'),t(js.TOOLBOX_ITEM,cI.registrationName,cI);var uI=class extends hI{constructor(t,e,i){super(t,e,i),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}makeDefaultCssConfig_(){const t=super.makeDefaultCssConfig_();return t.contents="blocklyToolboxContents",t}parseContents_(t){if("custom"in t)this.flyoutItems_=t.custom;else{const e=t.contents;if(e){this.flyoutItems_=[],t=!0;for(let i=0;i<e.length;i++){const o=e[i];!r(js.TOOLBOX_ITEM,o.kind)||o.kind.toLowerCase()===cI.registrationName&&t?(this.flyoutItems_.push(o),t=!0):(this.createToolboxItem_(o),t=!1)}}}}createToolboxItem_(t){let e=t.kind;"CATEGORY"===e.toUpperCase()&&$t(t)&&(e=uI.registrationName),t=new(s(js.TOOLBOX_ITEM,e))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)}init(){super.init(),this.setExpanded("true"===this.toolboxItemDef_.expanded||!0===this.toolboxItemDef_.expanded)}createDom_(){super.createDom_();const t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),Me(this.subcategoriesDiv_,Hl.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.closeIcon_(this.iconDom_),Ne(this.htmlDiv_,Gl.EXPANDED,!1),this.htmlDiv_}createIconDom_(){const t=document.createElement("span");if(!this.parentToolbox_.isHorizontal()){const e=this.cssConfig_.icon;e&&et(t,e),t.style.visibility="visible"}return t.style.display="inline-block",t}createSubCategoriesDom_(t){const e=document.createElement("div");e.style.display="none";var i=this.cssConfig_.contents;for(i&&et(e,i),i=0;i<t.length;i++){const o=t[i];o.init();const n=o.getDiv();if(e.appendChild(n),o.getClickTarget){let t;null==(t=o.getClickTarget())||t.setAttribute("id",o.getId())}}return e}setExpanded(t){if(this.expanded_!==t){if(this.expanded_=t)this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_);else{let t;null==(t=this.parentToolbox_.getFlyout())||t.setVisible(!1),this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)}Ne(this.htmlDiv_,Gl.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize()}}setVisible_(t){this.htmlDiv_.style.display=t?"block":"none";const e=this.getChildToolboxItems();for(let i=0;i<e.length;i++)e[i].setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()}isExpanded(){return this.expanded_}isCollapsible(){return!0}onClick(t){this.toggleExpanded()}toggleExpanded(){this.setExpanded(!this.expanded_)}getDiv(){return this.htmlDiv_}getChildToolboxItems(){return this.toolboxItems_}};uI.registrationName="collapsibleCategory",t(js.TOOLBOX_ITEM,uI.registrationName,uI);var dI=class extends _d{constructor(t){super(),this.id="toolbox",this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.previouslySelectedItem_=this.selectedItem_=this.flyout_=null,this.boundEvents_=[],this.workspace_=t,this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.RTL=t.options.RTL,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition}onShortcut(t){return!1}init(){var t=this.workspace_;const e=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),st(this.flyout_.createDom("svg"),e),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),(t=t.getThemeManager()).subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[Ig.Capability.AUTOHIDEABLE,Ig.Capability.DELETE_AREA,Ig.Capability.DRAG_TARGET]})}createDom_(t){t=t.getParentSvg();const e=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,Me(this.contentsDiv_,Hl.TREE),e.appendChild(this.contentsDiv_),t.parentNode.insertBefore(e,t),this.attachEvents_(e,this.contentsDiv_),e}createContainer_(){const t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),et(t,"blocklyToolboxDiv"),et(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t}createContentsContainer_(){const t=document.createElement("div");return et(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t}attachEvents_(t,e){t=V(t,"pointerdown",this,this.onClick_,!1),this.boundEvents_.push(t),e=V(e,"keydown",this,this.onKeyDown_,!1),this.boundEvents_.push(e)}onClick_(t){if(X(t)||t.target===this.HtmlDiv)O().hideChaff(!1);else{var e=t.target.getAttribute("id");e&&(e=this.getToolboxItemById(e)).isSelectable()&&(this.setSelectedItem(e),e.onClick(t)),O().hideChaff(!0)}z()}onKeyDown_(t){let e=!1;switch(t.key){case"ArrowDown":e=this.selectNext_();break;case"ArrowUp":e=this.selectPrevious_();break;case"ArrowLeft":e=this.selectParent_();break;case"ArrowRight":e=this.selectChild_();break;case"Enter":case" ":this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),e=!0);break;default:e=!1}!e&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(e=this.selectedItem_.onKeyDown(t)),e&&t.preventDefault()}createFlyout_(){const t=this.workspace_,e=new Oc({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return e.toolboxPosition=t.options.toolboxPosition,new(t.horizontalLayout?l(js.FLYOUTS_HORIZONTAL_TOOLBOX,t.options,!0):l(js.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(e)}render(t){this.toolboxDef_=t;for(let t=0;t<this.contents_.length;t++){const e=this.contents_[t];e&&e.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()}renderContents_(t){const e=document.createDocumentFragment();for(let i=0;i<t.length;i++)this.createToolboxItem_(t[i],e);this.contentsDiv_.appendChild(e)}createToolboxItem_(t,e){var i=t.kind;"CATEGORY"===i.toUpperCase()&&$t(t)&&(i=uI.registrationName),(i=s(js.TOOLBOX_ITEM,i.toLowerCase()))&&((t=new i(t,this)).init(),this.addToolboxItem_(t),(i=t.getDiv())&&e.appendChild(i),t.getClickTarget()&&t.getClickTarget().setAttribute("id",t.getId()))}addToolboxItem_(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible()){t=t.getChildToolboxItems();for(let e=0;e<t.length;e++)this.addToolboxItem_(t[e])}}getToolboxItems(){return this.contents_}addStyle(t){t&&this.HtmlDiv&&et(this.HtmlDiv,t)}removeStyle(t){t&&this.HtmlDiv&&ot(this.HtmlDiv,t)}getClientRect(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect();const e=t.top,i=e+t.height,o=t.left;return t=o+t.width,this.toolboxPosition===Wg.TOP?new Sg(-1e7,i,-1e7,1e7):this.toolboxPosition===Wg.BOTTOM?new Sg(e,1e7,-1e7,1e7):this.toolboxPosition===Wg.LEFT?new Sg(-1e7,1e7,-1e7,t):new Sg(-1e7,1e7,o,1e7)}wouldDelete(t){return t instanceof bd?this.updateWouldDelete_(!t.getParent()&&t.isDeletable()):this.updateWouldDelete_(Fr(t)&&t.isDeletable()),this.wouldDelete_}onDragEnter(t){this.updateCursorDeleteStyle_(!0)}onDragExit(t){this.updateCursorDeleteStyle_(!1)}onDrop(t){this.updateCursorDeleteStyle_(!1)}updateWouldDelete_(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))}updateCursorDeleteStyle_(t){const e=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(e):this.removeStyle(e)}getToolboxItemById(t){return this.contentMap_[t]||null}getWidth(){return this.width_}getHeight(){return this.height_}getFlyout(){return this.flyout_}getWorkspace(){return this.workspace_}getSelectedItem(){return this.selectedItem_}getPreviouslySelectedItem(){return this.previouslySelectedItem_}isHorizontal(){return this.horizontalLayout_}position(){const t=this.workspace_.getMetrics(),e=this.HtmlDiv;e&&(this.horizontalLayout_?(e.style.left="0",e.style.height="auto",e.style.width="100%",this.height_=e.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition===Wg.TOP?e.style.top="0":e.style.bottom="0"):(this.toolboxPosition===Wg.RIGHT?e.style.right="0":e.style.left="0",e.style.height="100%",this.width_=e.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())}handleToolboxItemResize(){const t=this.workspace_,e=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition===Wg.LEFT?t.scrollX+e.width:t.scrollX,this.toolboxPosition===Wg.TOP?t.scrollY+e.height:t.scrollY),M(t)}clearSelection(){this.setSelectedItem(null)}refreshTheme(){for(let t=0;t<this.contents_.length;t++){const e=this.contents_[t];e.refreshTheme&&e.refreshTheme()}}refreshSelection(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())}setVisible(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())}autoHide(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()}setSelectedItem(t){const e=this.selectedItem_;!t&&!e||t&&!Bs(t)||(this.shouldDeselectItem_(e,t)&&null!==e&&this.deselectItem_(e),this.shouldSelectItem_(e,t)&&null!==t&&this.selectItem_(e,t),this.updateFlyout_(e,t),this.fireSelectEvent_(e,t))}shouldDeselectItem_(t,e){return null!==t&&(!t.isCollapsible()||t!==e)}shouldSelectItem_(t,e){return null!==e&&e!==t}deselectItem_(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),Ne(this.contentsDiv_,Gl.ACTIVEDESCENDANT,"")}selectItem_(t,e){this.selectedItem_=e,this.previouslySelectedItem_=t,e.setSelected(!0),Ne(this.contentsDiv_,Gl.ACTIVEDESCENDANT,e.getId())}selectItemByPosition(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t]).isSelectable()&&this.setSelectedItem(t)}updateFlyout_(t,e){e&&(t!==e||e.isCollapsible())&&e.getContents().length?(this.flyout_.show(e.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()}fireSelectEvent_(t,e){const i=t&&t.getName();let o=e&&e.getName();t===e&&(o=null),t=new(y(ga))(i,o,this.workspace_.id),d(t)}selectParent_(){return!(!this.selectedItem_||(this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.toggleExpanded(),0):!this.selectedItem_.getParent()||!this.selectedItem_.getParent().isSelectable()||(this.setSelectedItem(this.selectedItem_.getParent()),0)))}selectChild_(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;const t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.toggleExpanded(),!0}selectNext_(){if(!this.selectedItem_)return!1;let t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){let e=this.contents_[t];for(;e&&!e.isSelectable();)e=this.contents_[++t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1}selectPrevious_(){if(!this.selectedItem_)return!1;let t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){let e=this.contents_[t];for(;e&&!e.isSelectable();)e=this.contents_[--t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1}dispose(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)j(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.HtmlDiv&&(this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),rt(this.HtmlDiv))}};J('\n.blocklyToolboxDelete {\n  cursor: url("<<<PATH>>>/handdelete.cur"), auto;\n}\n\n.blocklyToolboxGrab {\n  cursor: url("<<<PATH>>>/handclosed.cur"), auto;\n  cursor: grabbing;\n  cursor: -webkit-grabbing;\n}\n\n/* Category tree in Toolbox. */\n.blocklyToolboxDiv {\n  background-color: #ddd;\n  overflow-x: visible;\n  overflow-y: auto;\n  padding: 4px 0 4px 0;\n  position: absolute;\n  z-index: 70;  /* so blocks go under toolbox when dragging */\n  -webkit-tap-highlight-color: transparent;  /* issue #1345 */\n}\n\n.blocklyToolboxContents {\n  display: flex;\n  flex-wrap: wrap;\n  flex-direction: column;\n}\n\n.blocklyToolboxContents:focus {\n  outline: none;\n}\n'),t(js.TOOLBOX,Ws,dI);var AI=Cc.INPUT_VALUE,II=Cc.OUTPUT_VALUE,CI=Cc.NEXT_STATEMENT,pI=Cc.PREVIOUS_STATEMENT,fI=Wg.TOP,vI=Wg.BOTTOM,mI=Wg.LEFT,bI=Wg.RIGHT;od.prototype.newBlock=function(t,e){return new Pu(this,t,e)},sd.prototype.newBlock=function(t,e){return new bd(this,t,e)},od.prototype.newComment=function(t){return new xl(this,t)},sd.prototype.newComment=function(t){return new cc(this,t)},sd.newTrashcan=function(t){return new Td(t)},Bc.prototype.newWorkspaceSvg=function(t){return new sd(t)},Hs.Names$$module$build$src$core$names.prototype.populateProcedures=function(t){t=(t=nr(t))[0].concat(t[1]);for(let e=0;e<t.length;e++)this.getName(t[e][0],Hs.Names$$module$build$src$core$names.NameType.PROCEDURE)};var yI={};return yI.ASTNode=Bu,yI.BasicCursor=ud,yI.Block=Pu,yI.BlockSvg=bd,yI.Blocks=ya,yI.COLLAPSED_FIELD_NAME=rl,yI.COLLAPSED_INPUT_NAME=nl,yI.COLLAPSE_CHARS=30,yI.CodeGenerator=Hs.CodeGenerator$$module$build$src$core$generator,yI.CollapsibleToolboxCategory=uI,yI.ComponentManager=Ig,yI.Connection=Lu,yI.ConnectionChecker=qu,yI.ConnectionDB=fc,yI.ConnectionType=Cc,yI.ContextMenu=ac,yI.ContextMenuItems=WA,yI.ContextMenuRegistry=gc,yI.Css=fg,yI.Cursor=cd,yI.DELETE_VARIABLE_ID=Ju,yI.DeleteArea=_d,yI.DragTarget=yd,yI.DropDownDiv=yh,yI.Events=UA,yI.Extensions=Hc,yI.Field=Yh,yI.FieldCheckbox=wA,yI.FieldDropdown=Mc,yI.FieldImage=nA,yI.FieldLabel=Ou,yI.FieldLabelSerializable=EA,yI.FieldNumber=TA,yI.FieldTextInput=sA,yI.FieldVariable=_A,yI.Flyout=mA,yI.FlyoutButton=$u,yI.FlyoutMetricsManager=vA,yI.Generator=Hs.CodeGenerator$$module$build$src$core$generator,yI.Gesture=_c,yI.Grid=Tc,yI.HorizontalFlyout=yA,yI.INPUT_VALUE=AI,yI.Input=Su,yI.InsertionMarkerManager=Gu,yI.InsertionMarkerPreviewer=IA,yI.Marker=hd,yI.MarkerManager=_h,yI.Menu=jl,yI.MenuItem=Yl,yI.MetricsManager=eA,yI.Msg=Hs.Msg$$module$build$src$core$msg,yI.NEXT_STATEMENT=CI,yI.Names=Hs.Names$$module$build$src$core$names,yI.OPPOSITE_TYPE=Ku,yI.OUTPUT_VALUE=II,yI.Options=Oc,yI.PREVIOUS_STATEMENT=pI,yI.PROCEDURE_CATEGORY_NAME=tu,yI.Procedures=eu,yI.RENAME_VARIABLE_ID=Qu,yI.RenderedConnection=Ad,yI.Scrollbar=Pg,yI.ScrollbarPair=tA,yI.ShortcutItems=Xd,yI.ShortcutRegistry=Fd,yI.TOOLBOX_AT_BOTTOM=vI,yI.TOOLBOX_AT_LEFT=mI,yI.TOOLBOX_AT_RIGHT=bI,yI.TOOLBOX_AT_TOP=fI,yI.TabNavigateCursor=dd,yI.Theme=wc,yI.ThemeManager=Yu,yI.Themes=gI,yI.Toolbox=dI,yI.ToolboxCategory=hI,yI.ToolboxItem=lI,yI.ToolboxSeparator=cI,yI.Tooltip=Hh,yI.Touch=eg,yI.Trashcan=Td,yI.UnattachedFieldError=Xh,yI.VARIABLE_CATEGORY_NAME=ml,yI.VARIABLE_DYNAMIC_CATEGORY_NAME=Xu,yI.VERSION="11.1.1",yI.VariableMap=id,yI.VariableModel=vl,yI.Variables=_l,yI.VariablesDynamic=Zu,yI.VerticalFlyout=bA,yI.WidgetDiv=oc,yI.Workspace=od,yI.WorkspaceAudio=nd,yI.WorkspaceDragger=yc,yI.WorkspaceSvg=sd,yI.Xml=uc,yI.ZoomControls=ol,yI.blockAnimations=bc,yI.blockRendering=ju,yI.browserEvents=ug,yI.bubbles=YA,yI.bumpObjects=vd,yI.clipboard=Vd,yI.comments=jA,yI.common=Ma,yI.config=Hs.config$$module$build$src$core$config,yI.constants=al,yI.defineBlocksWithJsonArray=P,yI.dialog=Il,yI.dragging=OA,yI.fieldRegistry=Dc,yI.geras=oI,yI.getMainWorkspace=O,yI.getSelected=R,yI.hasBubble=ri,yI.hideChaff=Fs,yI.icons=iu,yI.inject=os,yI.inputs=CA,yI.isCopyable=Vr,yI.isDeletable=Fr,yI.isDraggable=_n,yI.isIcon=mr,yI.isObservable=wn,yI.isPaster=Ls,yI.isRenderedElement=Ps,yI.isSelectable=$s,yI.isSerializable=Le,yI.isVariableBackedParameterModel=Jt,yI.procedures=eu,yI.registry=Ys,yI.renderManagement=Rl,yI.serialization=qd,yI.setLocale=ll,yI.setParentContainer=D,yI.svgResize=M,yI.thrasos=sI,yI.uiPosition=qg,yI.utils=jc,yI.zelos=VA,yI.__namespace__=Hs,yI})?o.apply(e,[]):o)||(t.exports=n)},822:function(t,e,i){var o,n,r;n=[i(500)],void 0===(r="function"==typeof(o=function(t){var e=t.__namespace__,i=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]),o={customContextMenu:function(t){if(this.isInFlyout)"variables_get_dynamic"!==this.type&&"variables_get_reporter_dynamic"!==this.type||(o={text:e.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:n(this)},s=this.getField("VAR").getText(),s={text:e.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",s),enabled:!0,callback:r(this)},t.unshift(o),t.unshift(s));else{if("variables_get_dynamic"===this.type)var i="variables_set_dynamic",o=e.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else i="variables_get_dynamic",o=e.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var s=this.getField("VAR");i={type:i,fields:{VAR:s.saveState(!0)}},t.push({enabled:0<this.workspace.remainingCapacity(),text:o.replace("%1",s.getText()),callback:e.callbackFactory$$module$build$src$core$contextmenu(this,i)})}},onchange:function(t){t=this.getFieldValue("VAR"),t=e.getVariable$$module$build$src$core$variables(this.workspace,t),"variables_get_dynamic"===this.type?this.outputConnection.setCheck(t.type):this.getInput("VALUE").connection.setCheck(t.type)}},n=function(t){return function(){const i=t.workspace,o=t.getField("VAR").getVariable();e.renameVariable$$module$build$src$core$variables(i,o)}},r=function(t){return function(){const e=t.workspace,i=t.getField("VAR").getVariable();e.deleteVariableById(i.getId()),e.refreshToolboxSelection()}};e.registerMixin$$module$build$src$core$extensions("contextMenu_variableDynamicSetterGetter",o),e.defineBlocks$$module$build$src$core$common(i);var s={blocks:i},a=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]),g={customContextMenu:function(t){if(this.isInFlyout)"variables_get"!==this.type&&"variables_get_reporter"!==this.type||(o={text:e.Msg$$module$build$src$core$msg.RENAME_VARIABLE,enabled:!0,callback:l(this)},n=this.getField("VAR").getText(),n={text:e.Msg$$module$build$src$core$msg.DELETE_VARIABLE.replace("%1",n),enabled:!0,callback:h(this)},t.unshift(o),t.unshift(n));else{if("variables_get"===this.type)var i="variables_set",o=e.Msg$$module$build$src$core$msg.VARIABLES_GET_CREATE_SET;else i="variables_get",o=e.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET;var n=this.getField("VAR");i={type:i,fields:{VAR:n.saveState(!0)}},t.push({enabled:0<this.workspace.remainingCapacity(),text:o.replace("%1",n.getText()),callback:e.callbackFactory$$module$build$src$core$contextmenu(this,i)})}}},l=function(t){return function(){const i=t.workspace,o=t.getField("VAR").getVariable();e.renameVariable$$module$build$src$core$variables(i,o)}},h=function(t){return function(){const e=t.workspace,i=t.getField("VAR").getVariable();e.deleteVariableById(i.getId()),e.refreshToolboxSelection()}};e.registerMixin$$module$build$src$core$extensions("contextMenu_variableSetterGetter",g),e.defineBlocks$$module$build$src$core$common(a);var c={blocks:a},u=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),d={init:function(){this.WHERE_OPTIONS_1=[[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation");var i=this.getInput("AT1")instanceof e.ValueInput$$module$build$src$core$inputs$value_input;return t.setAttribute("at1",`${i}`),i=this.getInput("AT2")instanceof e.ValueInput$$module$build$src$core$inputs$value_input,t.setAttribute("at2",`${i}`),t},domToMutation:function(t){const e="true"===t.getAttribute("at1");t="true"===t.getAttribute("at2"),this.updateAt_(1,e),this.updateAt_(2,t)},updateAt_:function(t,i){this.removeInput("AT"+t),this.removeInput("ORDINAL"+t,!0),i?(this.appendValueInput("AT"+t).setCheck("Number"),e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+t).appendField(e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+t),2===t&&e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg$$module$build$src$core$msg.TEXT_GET_SUBSTRING_TAIL));const o=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+t]});o.setValidator((function(e){const o="FROM_START"===e||"FROM_END"===e;if(o!==i){const i=this.getSourceBlock();return i.updateAt_(t,o),i.setFieldValue(e,"WHERE"+t),null}})),this.getInput("AT"+t).appendField(o,"WHERE"+t),1===t&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}};u.text_getSubstring=d,u.text_changeCase={init:function(){const t=[[e.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[e.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[e.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(e.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:t}),"CASE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg$$module$build$src$core$msg.TEXT_CHANGECASE_TOOLTIP)}},u.text_trim={init:function(){const t=[[e.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[e.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[e.Msg$$module$build$src$core$msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(e.Msg$$module$build$src$core$msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:t}),"MODE"),this.setOutput(!0,"String"),this.setTooltip(e.Msg$$module$build$src$core$msg.TEXT_TRIM_TOOLTIP)}},u.text_print={init:function(){this.jsonInit({message0:e.Msg$$module$build$src$core$msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:e.Msg$$module$build$src$core$msg.TEXT_PRINT_TOOLTIP,helpUrl:e.Msg$$module$build$src$core$msg.TEXT_PRINT_HELPURL})}};var A={updateType_:function(t){this.outputConnection.setCheck("NUMBER"===t?"Number":"String")},mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation");return t.setAttribute("type",this.getFieldValue("TYPE")),t},domToMutation:function(t){this.updateType_(t.getAttribute("type"))}};u.text_prompt_ext=Object.assign({},A,{init:function(){var t=[[e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(e.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),(t=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:t})).setValidator((t=>{this.updateType_(t)})),this.appendValueInput("TEXT").appendField(t,"TYPE"),this.setOutput(!0,"String"),this.setTooltip((()=>"TEXT"===this.getFieldValue("TYPE")?e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER))}});var I=Object.assign({},A,{init:function(){this.mixin(C);var t=[[e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(e.Msg$$module$build$src$core$msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),(t=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:t})).setValidator((t=>{this.updateType_(t)})),this.appendDummyInput().appendField(t,"TYPE").appendField(this.newQuote_(!0)).appendField(e.fromJson$$module$build$src$core$field_registry({type:"field_input",text:""}),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip((()=>"TEXT"===this.getFieldValue("TYPE")?e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_TEXT:e.Msg$$module$build$src$core$msg.TEXT_PROMPT_TOOLTIP_NUMBER))}});u.text_prompt=I,u.text_count={init:function(){this.jsonInit({message0:e.Msg$$module$build$src$core$msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:e.Msg$$module$build$src$core$msg.TEXT_COUNT_TOOLTIP,helpUrl:e.Msg$$module$build$src$core$msg.TEXT_COUNT_HELPURL})}},u.text_replace={init:function(){this.jsonInit({message0:e.Msg$$module$build$src$core$msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg$$module$build$src$core$msg.TEXT_REPLACE_TOOLTIP,helpUrl:e.Msg$$module$build$src$core$msg.TEXT_REPLACE_HELPURL})}},u.text_reverse={init:function(){this.jsonInit({message0:e.Msg$$module$build$src$core$msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:e.Msg$$module$build$src$core$msg.TEXT_REVERSE_TOOLTIP,helpUrl:e.Msg$$module$build$src$core$msg.TEXT_REVERSE_HELPURL})}};var C={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(t){for(let e,i=0;e=this.inputList[i];i++)for(let i,o=0;i=e.fieldRow[o];o++)if(t===i.name)return e.insertFieldAt(o,this.newQuote_(!0)),void e.insertFieldAt(o+2,this.newQuote_(!1));console.warn('field named "'+t+'" not found in '+this.toDevString())},newQuote_:function(t){return t=this.RTL?!t:t,e.fromJson$$module$build$src$core$field_registry({type:"field_image",src:t?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,width:this.QUOTE_IMAGE_WIDTH,height:this.QUOTE_IMAGE_HEIGHT,alt:t?"â":"â"})}},p={itemCount_:0,mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation");return t.setAttribute("items",`${this.itemCount_}`),t},domToMutation:function(t){this.itemCount_=parseInt(t.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(t){this.itemCount_=t.itemCount,this.updateShape_()},decompose:function(t){const e=t.newBlock("text_create_join_container");e.initSvg();let i=e.getInput("STACK").connection;for(let e=0;e<this.itemCount_;e++){const e=t.newBlock("text_create_join_item");e.initSvg(),i.connect(e.previousConnection),i=e.nextConnection}return e},compose:function(t){var e=t.getInputTargetBlock("STACK");for(t=[];e;)e.isInsertionMarker()||t.push(e.valueConnection_),e=e.getNextBlock();for(e=0;e<this.itemCount_;e++){const i=this.getInput("ADD"+e).connection.targetConnection;i&&!t.includes(i)&&i.disconnect()}for(this.itemCount_=t.length,this.updateShape_(),e=0;e<this.itemCount_;e++){let i;null==(i=t[e])||i.reconnect(this,"ADD"+e)}},saveConnections:function(t){t=t.getInputTargetBlock("STACK");let e=0;for(;t;){if(t.isInsertionMarker()){t=t.getNextBlock();continue}const i=this.getInput("ADD"+e);t.valueConnection_=i&&i.connection.targetConnection,t=t.getNextBlock(),e++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var t=0;t<this.itemCount_;t++)if(!this.getInput("ADD"+t)){const i=this.appendValueInput("ADD"+t).setAlign(e.Align$$module$build$src$core$inputs$align.RIGHT);0===t&&i.appendField(e.Msg$$module$build$src$core$msg.TEXT_JOIN_TITLE_CREATEWITH)}for(t=this.itemCount_;this.getInput("ADD"+t);t++)this.removeInput("ADD"+t)}};e.register$$module$build$src$core$extensions("text_append_tooltip",e.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var f={isAt_:!1,mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation");return t.setAttribute("at",`${this.isAt_}`),t},domToMutation:function(t){t="false"!==t.getAttribute("at"),this.updateAt_(t)},updateAt_:function(t){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),t&&(this.appendValueInput("AT").setCheck("Number"),e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)),e.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(e.Msg$$module$build$src$core$msg.TEXT_CHARAT_TAIL)),this.isAt_=t}};e.register$$module$build$src$core$extensions("text_indexOf_tooltip",(function(){this.setTooltip((()=>e.Msg$$module$build$src$core$msg.TEXT_INDEXOF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1")))})),e.register$$module$build$src$core$extensions("text_quotes",(function(){this.mixin(C),this.quoteField_("TEXT")})),e.registerMixin$$module$build$src$core$extensions("quote_image_mixin",C),e.registerMutator$$module$build$src$core$extensions("text_join_mutator",p,(function(){this.mixin(C),this.itemCount_=2,this.updateShape_(),this.setMutator(new e.MutatorIcon$$module$build$src$core$icons$mutator_icon(["text_create_join_item"],this))})),e.registerMutator$$module$build$src$core$extensions("text_charAt_mutator",f,(function(){this.getField("WHERE").setValidator((function(t){t="FROM_START"===t||"FROM_END"===t;const e=this.getSourceBlock();t!==e.isAt_&&e.updateAt_(t)})),this.updateAt_(!0),this.setTooltip((()=>{var t=this.getFieldValue("WHERE");let i=e.Msg$$module$build$src$core$msg.TEXT_CHARAT_TOOLTIP;return("FROM_START"===t||"FROM_END"===t)&&(t="FROM_START"===t?e.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(i+="  "+t.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),i}))})),e.defineBlocks$$module$build$src$core$common(u);var v={blocks:u},m={},b={setStatements_:function(t){this.hasStatements_!==t&&(t?(this.appendStatementInput("STACK").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=t)},updateParams_:function(){let t="";this.arguments_.length&&(t=e.Msg$$module$build$src$core$msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),e.disable$$module$build$src$core$events$utils();try{this.setFieldValue(t,"PARAMS")}finally{e.enable$$module$build$src$core$events$utils()}},mutationToDom:function(t){const i=e.createElement$$module$build$src$core$utils$xml("mutation");t&&i.setAttribute("name",this.getFieldValue("NAME"));for(let o=0;o<this.argumentVarModels_.length;o++){const n=e.createElement$$module$build$src$core$utils$xml("arg"),r=this.argumentVarModels_[o];n.setAttribute("name",r.name),n.setAttribute("varid",r.getId()),t&&this.paramIds_&&n.setAttribute("paramId",this.paramIds_[o]),i.appendChild(n)}return this.hasStatements_||i.setAttribute("statements","false"),i},domToMutation:function(t){this.arguments_=[],this.argumentVarModels_=[];for(let o,n=0;o=t.childNodes[n];n++)if("arg"===o.nodeName.toLowerCase()){var i=o;const t=i.getAttribute("name");i=i.getAttribute("varid")||i.getAttribute("varId"),this.arguments_.push(t),null!==(i=e.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,i,t,""))?this.argumentVarModels_.push(i):console.log(`Failed to create a variable named "${t}", ignoring.`)}this.updateParams_(),e.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_("false"!==t.getAttribute("statements"))},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;const t=Object.create(null);if(this.argumentVarModels_.length){t.params=[];for(let e=0;e<this.argumentVarModels_.length;e++)t.params.push({name:this.argumentVarModels_[e].name,id:this.argumentVarModels_[e].getId()})}return this.hasStatements_||(t.hasStatements=!1),t},loadExtraState:function(t){if(this.arguments_=[],this.argumentVarModels_=[],t.params)for(let o=0;o<t.params.length;o++){var i=t.params[o];i=e.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,i.id,i.name,""),this.arguments_.push(i.name),this.argumentVarModels_.push(i)}this.updateParams_(),e.mutateCallers$$module$build$src$core$procedures(this),this.setStatements_(!1!==t.hasStatements)},decompose:function(t){const i=e.createElement$$module$build$src$core$utils$xml("block");i.setAttribute("type","procedures_mutatorcontainer");var o=e.createElement$$module$build$src$core$utils$xml("statement");o.setAttribute("name","STACK"),i.appendChild(o);for(let t=0;t<this.arguments_.length;t++){const i=e.createElement$$module$build$src$core$utils$xml("block");i.setAttribute("type","procedures_mutatorarg");var n=e.createElement$$module$build$src$core$utils$xml("field");n.setAttribute("name","NAME");const r=e.createTextNode$$module$build$src$core$utils$xml(this.arguments_[t]);n.appendChild(r),i.appendChild(n),n=e.createElement$$module$build$src$core$utils$xml("next"),i.appendChild(n),o.appendChild(i),o=n}return t=e.domToBlock$$module$build$src$core$xml(i,t),"procedures_defreturn"===this.type?t.setFieldValue(this.hasStatements_,"STATEMENTS"):t.removeInput("STATEMENT_INPUT"),e.mutateCallers$$module$build$src$core$procedures(this),t},compose:function(t){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];let i=t.getInputTargetBlock("STACK");for(;i&&!i.isInsertionMarker();){var o=i.getFieldValue("NAME");this.arguments_.push(o),o=this.workspace.getVariable(o,""),this.argumentVarModels_.push(o),this.paramIds_.push(i.id),i=i.nextConnection&&i.nextConnection.targetBlock()}if(this.updateParams_(),e.mutateCallers$$module$build$src$core$procedures(this),null!==(t=t.getFieldValue("STATEMENTS"))&&(t="TRUE"===t,this.hasStatements_!==t))if(t){var n;this.setStatements_(!0),null==(n=this.statementConnection_)||n.reconnect(this,"STACK"),this.statementConnection_=null}else n=this.getInput("STACK").connection,(this.statementConnection_=n.targetConnection)&&((n=n.targetBlock()).unplug(),n.bumpNeighbours()),this.setStatements_(!1)},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(t,i){var o=this.workspace.getVariableById(t);if(""===o.type){o=o.name,i=this.workspace.getVariableById(i);var n=!1;for(let e=0;e<this.argumentVarModels_.length;e++)this.argumentVarModels_[e].getId()===t&&(this.arguments_[e]=i.name,this.argumentVarModels_[e]=i,n=!0);n&&(this.displayRenamedVar_(o,i.name),e.mutateCallers$$module$build$src$core$procedures(this))}},updateVarName:function(t){const i=t.name;let o,n=!1;for(let e=0;e<this.argumentVarModels_.length;e++)this.argumentVarModels_[e].getId()===t.getId()&&(o=this.arguments_[e],this.arguments_[e]=i,n=!0);n&&(this.displayRenamedVar_(o,i),e.mutateCallers$$module$build$src$core$procedures(this))},displayRenamedVar_:function(t,i){this.updateParams_();var o=this.getIcon(e.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE);if(o&&o.bubbleIsVisible()){o=o.getWorkspace().getAllBlocks(!1);for(let n,r=0;n=o[r];r++)"procedures_mutatorarg"===n.type&&e.Names$$module$build$src$core$names.equals(t,n.getFieldValue("NAME"))&&n.setFieldValue(i,"NAME")}},customContextMenu:function(t){if(!this.isInFlyout){var i=this.getFieldValue("NAME"),o={type:this.callType_,extraState:{name:i,params:this.arguments_}};if(t.push({enabled:!0,text:e.Msg$$module$build$src$core$msg.PROCEDURES_CREATE_DO.replace("%1",i),callback:e.callbackFactory$$module$build$src$core$contextmenu(this,o)}),!this.isCollapsed())for(i=0;i<this.argumentVarModels_.length;i++){const n={type:"variables_get",fields:{VAR:{name:(o=this.argumentVarModels_[i]).name,id:o.getId(),type:o.type}}};t.push({enabled:!0,text:e.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",o.name),callback:e.callbackFactory$$module$build$src$core$contextmenu(this,n)})}}}};m.procedures_defnoreturn=Object.assign({},b,{init:function(){var t=e.findLegalName$$module$build$src$core$procedures("",this);(t=e.fromJson$$module$build$src$core$field_registry({type:"field_input",text:t})).setValidator(e.rename$$module$build$src$core$procedures),t.setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TITLE).appendField(t,"NAME").appendField("","PARAMS"),this.setMutator(new e.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),m.procedures_defreturn=Object.assign({},b,{init:function(){var t=e.findLegalName$$module$build$src$core$procedures("",this);(t=e.fromJson$$module$build$src$core$field_registry({type:"field_input",text:t})).setValidator(e.rename$$module$build$src$core$procedures),t.setSpellcheck(!1),this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TITLE).appendField(t,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(e.Align$$module$build$src$core$inputs$align.RIGHT).appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new e.MutatorIcon$$module$build$src$core$icons$mutator_icon(["procedures_mutatorarg"],this)),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"});var y={init:function(){this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_ALLOW_STATEMENTS).appendField(e.fromJson$$module$build$src$core$field_registry({type:"field_checkbox",checked:!0}),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}};m.procedures_mutatorcontainer=y;var _={init:function(){const t=e.fromJson$$module$build$src$core$field_registry({type:"field_input",text:e.DEFAULT_ARG$$module$build$src$core$procedures});t.setValidator(this.validator_),t.oldShowEditorFn_=t.showEditor_,t.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TITLE).appendField(t,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg$$module$build$src$core$msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,t.onFinishEditing_=this.deleteIntermediateVars_,t.createdVariables_=[],t.onFinishEditing_("x")},validator_:function(t){var e=this.getSourceBlock();const i=e.workspace.getRootWorkspace();if(!(t=t.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,"")))return null;const o=(e.workspace.targetWorkspace||e.workspace).getAllBlocks(!1),n=t.toLowerCase();for(let t=0;t<o.length;t++){if(o[t].id===this.getSourceBlock().id)continue;const e=o[t].getFieldValue("NAME");if(e&&e.toLowerCase()===n)return null}return e.isInFlyout||((e=i.getVariable(t,""))&&e.name!==t&&i.renameVariableById(e.getId(),t),e||(e=i.createVariable(t,""))&&this.createdVariables_&&this.createdVariables_.push(e)),t},deleteIntermediateVars_:function(t){const e=this.getSourceBlock().workspace.getRootWorkspace();if(e)for(let i=0;i<this.createdVariables_.length;i++){const o=this.createdVariables_[i];o.name!==t&&e.deleteVariableById(o.getId())}}};m.procedures_mutatorarg=_;var T={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(t,i){e.Names$$module$build$src$core$names.equals(t,this.getProcedureCall())&&(this.setFieldValue(i,"NAME"),this.setTooltip((this.outputConnection?e.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_TOOLTIP:e.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",i)))},setProcedureParameters_:function(t,i){var o=e.getDefinition$$module$build$src$core$procedures(this.getProcedureCall(),this.workspace);if((o=(o=o&&o.getIcon(e.MutatorIcon$$module$build$src$core$icons$mutator_icon.TYPE))&&o.bubbleIsVisible())?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),t.join("\n")===this.arguments_.join("\n"))this.quarkIds_=i;else{if(i.length!==t.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]);for(let t=0;t<this.arguments_.length;t++){var n=this.getInput("ARG"+t);n&&(n=n.connection.targetConnection,this.quarkConnections_[this.quarkIds_[t]]=n,o&&n&&!i.includes(this.quarkIds_[t])&&(n.disconnect(),n.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(t),this.argumentVarModels_=[],t=0;t<this.arguments_.length;t++)o=e.getOrCreateVariablePackage$$module$build$src$core$variables(this.workspace,null,this.arguments_[t],""),this.argumentVarModels_.push(o);if(this.updateShape_(),this.quarkIds_=i)for(i=0;i<this.arguments_.length;i++)if((t=this.quarkIds_[i])in this.quarkConnections_){let e;null!=(e=this.quarkConnections_[t])&&e.reconnect(this,"ARG"+i)||delete this.quarkConnections_[t]}}},updateShape_:function(){for(var t=0;t<this.arguments_.length;t++){var i=this.getField("ARGNAME"+t);if(i){e.disable$$module$build$src$core$events$utils();try{i.setValue(this.arguments_[t])}finally{e.enable$$module$build$src$core$events$utils()}}else i=e.fromJson$$module$build$src$core$field_registry({type:"field_label",text:this.arguments_[t]}),this.appendValueInput("ARG"+t).setAlign(e.Align$$module$build$src$core$inputs$align.RIGHT).appendField(i,"ARGNAME"+t)}for(t=this.arguments_.length;this.getInput("ARG"+t);t++)this.removeInput("ARG"+t);(t=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||t.appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"):this.getField("WITH")&&t.removeField("WITH"))},mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation");t.setAttribute("name",this.getProcedureCall());for(let i=0;i<this.arguments_.length;i++){const o=e.createElement$$module$build$src$core$utils$xml("arg");o.setAttribute("name",this.arguments_[i]),t.appendChild(o)}return t},domToMutation:function(t){var e=t.getAttribute("name");this.renameProcedure(this.getProcedureCall(),e),e=[];const i=[];for(let o,n=0;o=t.childNodes[n];n++)"arg"===o.nodeName.toLowerCase()&&(e.push(o.getAttribute("name")),i.push(o.getAttribute("paramId")));this.setProcedureParameters_(e,i)},saveExtraState:function(){const t=Object.create(null);return t.name=this.getProcedureCall(),this.arguments_.length&&(t.params=this.arguments_),t},loadExtraState:function(t){if(this.renameProcedure(this.getProcedureCall(),t.name),t=t.params){const e=[];e.length=t.length,e.fill(null),this.setProcedureParameters_(t,e)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(t){if(this.workspace&&!this.workspace.isFlyout&&t.recordUndo)if(t.type===e.CREATE$$module$build$src$core$events$utils&&t.ids.includes(this.id)){var i=this.getProcedureCall();if(!(i=e.getDefinition$$module$build$src$core$procedures(i,this.workspace))||i.type===this.defType_&&JSON.stringify(i.getVars())===JSON.stringify(this.arguments_)||(i=null),!i){e.setGroup$$module$build$src$core$events$utils(t.group),t=e.createElement$$module$build$src$core$utils$xml("xml"),(i=e.createElement$$module$build$src$core$utils$xml("block")).setAttribute("type",this.defType_);var o=this.getRelativeToSurfaceXY(),n=o.y+2*e.config$$module$build$src$core$config.snapRadius;i.setAttribute("x",`${o.x+e.config$$module$build$src$core$config.snapRadius*(this.RTL?-1:1)}`),i.setAttribute("y",`${n}`),o=this.mutationToDom(),i.appendChild(o),(o=e.createElement$$module$build$src$core$utils$xml("field")).setAttribute("name","NAME"),n=this.getProcedureCall();const r=e.findLegalName$$module$build$src$core$procedures(n,this);n!==r&&this.renameProcedure(n,r),o.appendChild(e.createTextNode$$module$build$src$core$utils$xml(n)),i.appendChild(o),t.appendChild(i),e.domToWorkspace$$module$build$src$core$xml(t,this.workspace),e.setGroup$$module$build$src$core$events$utils(!1)}}else t.type===e.DELETE$$module$build$src$core$events$utils?(i=this.getProcedureCall(),e.getDefinition$$module$build$src$core$procedures(i,this.workspace)||(e.setGroup$$module$build$src$core$events$utils(t.group),this.dispose(!0),e.setGroup$$module$build$src$core$events$utils(!1))):t.type===e.CHANGE$$module$build$src$core$events$utils&&"disabled"===t.element&&(i=this.getProcedureCall(),(n=e.getDefinition$$module$build$src$core$procedures(i,this.workspace))&&n.id===t.blockId&&((o=e.getGroup$$module$build$src$core$events$utils())&&console.log("Saw an existing group while responding to a definition change"),e.setGroup$$module$build$src$core$events$utils(t.group),t=n.isEnabled(),this.setDisabledReason(!t,"DISABLED_PROCEDURE_DEFINITION"),this.setWarningText(t?null:e.Msg$$module$build$src$core$msg.PROCEDURES_CALL_DISABLED_DEF_WARNING.replace("%1",i)),e.setGroup$$module$build$src$core$events$utils(o)))},customContextMenu:function(t){if(this.workspace.isMovable()){var i=this.getProcedureCall(),o=this.workspace;t.push({enabled:!0,text:e.Msg$$module$build$src$core$msg.PROCEDURES_HIGHLIGHT_DEF,callback:function(){const t=e.getDefinition$$module$build$src$core$procedures(i,o);t&&(o.centerOnBlock(t.id),e.setSelected$$module$build$src$core$common(t))}})}}};m.procedures_callnoreturn=Object.assign({},T,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg$$module$build$src$core$msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defnoreturn"}),m.procedures_callreturn=Object.assign({},T,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(e.Msg$$module$build$src$core$msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null},defType_:"procedures_defreturn"});var E={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(e.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(e.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(e.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation");return t.setAttribute("value",String(Number(this.hasReturnValue_))),t},domToMutation:function(t){this.hasReturnValue_="1"===t.getAttribute("value"),this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(t){if(!(this.workspace.isDragging&&this.workspace.isDragging()||t.type!==e.MOVE$$module$build$src$core$events$utils&&t.type!==e.CREATE$$module$build$src$core$events$utils)){t=!1;var i=this;do{if(this.FUNCTION_TYPES.includes(i.type)){t=!0;break}i=i.getSurroundParent()}while(i);if(t?("procedures_defnoreturn"===i.type&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):"procedures_defreturn"!==i.type||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(e.Msg$$module$build$src$core$msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(e.Msg$$module$build$src$core$msg.PROCEDURES_IFRETURN_WARNING),!this.isInFlyout)try{e.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!t,"UNPARENTED_IFRETURN")}finally{e.setRecordUndo$$module$build$src$core$events$utils(!0)}}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]};m.procedures_ifreturn=E,e.defineBlocks$$module$build$src$core$common(m);var w={blocks:m},k=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["Ï","PI"],["e","E"],["Ï","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(Â½)","SQRT1_2"],["â","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);e.register$$module$build$src$core$extensions("math_op_tooltip",e.buildTooltipForDropdown$$module$build$src$core$extensions("OP",{ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"}));var O={mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation"),i="DIVISIBLE_BY"===this.getFieldValue("PROPERTY");return t.setAttribute("divisor_input",String(i)),t},domToMutation:function(t){t="true"===t.getAttribute("divisor_input"),this.updateShape_(t)},updateShape_:function(t){const e=this.getInput("DIVISOR");t?e||this.appendValueInput("DIVISOR").setCheck("Number"):e&&this.removeInput("DIVISOR")}};e.registerMutator$$module$build$src$core$extensions("math_is_divisibleby_mutator",O,(function(){this.getField("PROPERTY").setValidator((function(t){t="DIVISIBLE_BY"===t,this.getSourceBlock().updateShape_(t)}))})),e.register$$module$build$src$core$extensions("math_change_tooltip",e.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var S={updateType_:function(t){"MODE"===t?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation");return t.setAttribute("op",this.getFieldValue("OP")),t},domToMutation:function(t){if(null===(t=t.getAttribute("op")))throw new TypeError("xmlElement had no op attribute");this.updateType_(t)}};e.registerMutator$$module$build$src$core$extensions("math_modes_of_list_mutator",S,(function(){this.getField("OP").setValidator(function(t){this.updateType_(t)}.bind(this))})),e.defineBlocks$$module$build$src$core$common(k);var R={blocks:k},x=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);e.register$$module$build$src$core$extensions("controls_whileUntil_tooltip",e.buildTooltipForDropdown$$module$build$src$core$extensions("MODE",{WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"}));e.register$$module$build$src$core$extensions("controls_flow_tooltip",e.buildTooltipForDropdown$$module$build$src$core$extensions("FLOW",{BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"}));var D={customContextMenu:function(t){if(!this.isInFlyout){var i=this.getField("VAR"),o=i.getVariable().name;this.isCollapsed()||null===o||(i={type:"variables_get",fields:{VAR:i.saveState(!0)}},t.push({enabled:!0,text:e.Msg$$module$build$src$core$msg.VARIABLES_SET_CREATE_GET.replace("%1",o),callback:e.callbackFactory$$module$build$src$core$contextmenu(this,i)}))}}};e.registerMixin$$module$build$src$core$extensions("contextMenu_newGetVariableBlock",D),e.register$$module$build$src$core$extensions("controls_for_tooltip",e.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),e.register$$module$build$src$core$extensions("controls_forEach_tooltip",e.buildTooltipWithFieldText$$module$build$src$core$extensions("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR"));var M=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]),N={getSurroundLoop:function(){let t=this;do{if(M.has(t.type))return t;t=t.getSurroundParent()}while(t);return null},onchange:function(t){const i=this.workspace;if(i.isDragging&&!i.isDragging()&&(t.type===e.MOVE$$module$build$src$core$events$utils||t.type===e.CREATE$$module$build$src$core$events$utils)&&(t=!!this.getSurroundLoop(),this.setWarningText(t?null:e.Msg$$module$build$src$core$msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout))try{e.setRecordUndo$$module$build$src$core$events$utils(!1),this.setDisabledReason(!t,"CONTROL_FLOW_NOT_IN_LOOP")}finally{e.setRecordUndo$$module$build$src$core$events$utils(!0)}}};e.registerMixin$$module$build$src$core$extensions("controls_flow_in_loop_check",N),e.defineBlocks$$module$build$src$core$common(x);var L={blocks:x,loopTypes:M},P=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["â ","NEQ"],["â<","LT"],["ââ¤","LTE"],["â>","GT"],["ââ¥","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);e.register$$module$build$src$core$extensions("logic_op_tooltip",e.buildTooltipForDropdown$$module$build$src$core$extensions("OP",{EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"}));var $={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const t=e.createElement$$module$build$src$core$utils$xml("mutation");return this.elseifCount_&&t.setAttribute("elseif",String(this.elseifCount_)),this.elseCount_&&t.setAttribute("else","1"),t},domToMutation:function(t){this.elseifCount_=parseInt(t.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(t.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;const t=Object.create(null);return this.elseifCount_&&(t.elseIfCount=this.elseifCount_),this.elseCount_&&(t.hasElse=!0),t},loadExtraState:function(t){this.elseifCount_=t.elseIfCount||0,this.elseCount_=t.hasElse?1:0,this.updateShape_()},decompose:function(t){const e=t.newBlock("controls_if_if");e.initSvg();let i=e.nextConnection;for(let e=1;e<=this.elseifCount_;e++){const e=t.newBlock("controls_if_elseif");e.initSvg(),i.connect(e.previousConnection),i=e.nextConnection}return this.elseCount_&&((t=t.newBlock("controls_if_else")).initSvg(),i.connect(t.previousConnection)),e},compose:function(t){t=t.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;const e=[null],i=[null];let o=null;for(;t;){if(!t.isInsertionMarker())switch(t.type){case"controls_if_elseif":this.elseifCount_++,e.push(t.valueConnection_),i.push(t.statementConnection_);break;case"controls_if_else":this.elseCount_++,o=t.statementConnection_;break;default:throw TypeError("Unknown block type: "+t.type)}t=t.getNextBlock()}this.updateShape_(),this.reconnectChildBlocks_(e,i,o)},saveConnections:function(t){t=t.nextConnection.targetBlock();let e=1;for(;t;){if(!t.isInsertionMarker())switch(t.type){case"controls_if_elseif":var i=this.getInput("IF"+e);const o=this.getInput("DO"+e);t.valueConnection_=i&&i.connection.targetConnection,t.statementConnection_=o&&o.connection.targetConnection,e++;break;case"controls_if_else":i=this.getInput("ELSE"),t.statementConnection_=i&&i.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+t.type)}t=t.getNextBlock()}},rebuildShape_:function(){const t=[null],e=[null];let i=null;this.getInput("ELSE")&&(i=this.getInput("ELSE").connection.targetConnection);for(let i=1;this.getInput("IF"+i);i++){const o=this.getInput("IF"+i),n=this.getInput("DO"+i);t.push(o.connection.targetConnection),e.push(n.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(t,e,i)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var t=1;this.getInput("IF"+t);t++)this.removeInput("IF"+t),this.removeInput("DO"+t);for(t=1;t<=this.elseifCount_;t++)this.appendValueInput("IF"+t).setCheck("Boolean").appendField(e.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+t).appendField(e.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(e.Msg$$module$build$src$core$msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(t,e,i){for(let i=1;i<=this.elseifCount_;i++){let o,n;null==(o=t[i])||o.reconnect(this,"IF"+i),null==(n=e[i])||n.reconnect(this,"DO"+i)}null==i||i.reconnect(this,"ELSE")}};e.registerMutator$$module$build$src$core$extensions("controls_if_mutator",$,null,["controls_if_elseif","controls_if_else"]);e.register$$module$build$src$core$extensions("controls_if_tooltip",(function(){this.setTooltip(function(){return this.elseifCount_||this.elseCount_?!this.elseifCount_&&this.elseCount_?e.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_2:this.elseifCount_&&!this.elseCount_?e.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_3:this.elseifCount_&&this.elseCount_?e.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_4:"":e.Msg$$module$build$src$core$msg.CONTROLS_IF_TOOLTIP_1}.bind(this))}));var B={onchange:function(t){this.prevBlocks_||(this.prevBlocks_=[null,null]);var i=this.getInputTargetBlock("A");const o=this.getInputTargetBlock("B");i&&o&&!this.workspace.connectionChecker.doTypeChecks(i.outputConnection,o.outputConnection)&&(e.setGroup$$module$build$src$core$events$utils(t.group),(t=this.prevBlocks_[0])!==i&&(i.unplug(),!t||t.isDisposed()||t.isShadow()||this.getInput("A").connection.connect(t.outputConnection)),(i=this.prevBlocks_[1])!==o&&(o.unplug(),!i||i.isDisposed()||i.isShadow()||this.getInput("B").connection.connect(i.outputConnection)),this.bumpNeighbours(),e.setGroup$$module$build$src$core$events$utils(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}};e.register$$module$build$src$core$extensions("logic_compare",(function(){this.mixin(B)}));var F={prevParentConnection_:null,onchange:function(t){const i=this.getInputTargetBlock("THEN"),o=this.getInputTargetBlock("ELSE"),n=this.outputConnection.targetConnection;if((i||o)&&n)for(let r=0;2>r;r++){const s=1===r?i:o;s&&!s.workspace.connectionChecker.doTypeChecks(s.outputConnection,n)&&(e.setGroup$$module$build$src$core$events$utils(t.group),n===this.prevParentConnection_?(this.unplug(),n.getSourceBlock().bumpNeighbours()):(s.unplug(),s.bumpNeighbours()),e.setGroup$$module$build$src$core$events$utils(!1))}this.prevParentConnection_=n}};e.registerMixin$$module$build$src$core$extensions("logic_ternary",F),e.defineBlocks$$module$build$src$core$common(P);var z={blocks:P},H=e.createBlockDefinitionsFromJsonArray$$module$build$src$core$common([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),G={init:function(){this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new e.MutatorIcon$$module$build$src$core$icons$mutator_icon(["lists_create_with_item"],this)),this.setTooltip(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation");return t.setAttribute("items",String(this.itemCount_)),t},domToMutation:function(t){if(!(t=t.getAttribute("items")))throw new TypeError("element did not have items");this.itemCount_=parseInt(t,10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(t){this.itemCount_=t.itemCount,this.updateShape_()},decompose:function(t){const e=t.newBlock("lists_create_with_container");e.initSvg();let i=e.getInput("STACK").connection;for(let e=0;e<this.itemCount_;e++){const e=t.newBlock("lists_create_with_item");if(e.initSvg(),!e.previousConnection)throw Error("itemBlock has no previousConnection");i.connect(e.previousConnection),i=e.nextConnection}return e},compose:function(t){var e=t.getInputTargetBlock("STACK");for(t=[];e;)e.isInsertionMarker()||t.push(e.valueConnection_),e=e.getNextBlock();for(e=0;e<this.itemCount_;e++){const i=this.getInput("ADD"+e).connection.targetConnection;i&&!t.includes(i)&&i.disconnect()}for(this.itemCount_=t.length,this.updateShape_(),e=0;e<this.itemCount_;e++){let i;null==(i=t[e])||i.reconnect(this,"ADD"+e)}},saveConnections:function(t){t=t.getInputTargetBlock("STACK");let e=0;for(;t;){if(t.isInsertionMarker()){t=t.getNextBlock();continue}const i=this.getInput("ADD"+e);let o;t.valueConnection_=null==(o=i)?void 0:o.connection.targetConnection,t=t.getNextBlock(),e++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(e.Msg$$module$build$src$core$msg.LISTS_CREATE_EMPTY_TITLE);for(var t=0;t<this.itemCount_;t++)if(!this.getInput("ADD"+t)){const i=this.appendValueInput("ADD"+t).setAlign(e.Align$$module$build$src$core$inputs$align.RIGHT);0===t&&i.appendField(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_INPUT_WITH)}for(t=this.itemCount_;this.getInput("ADD"+t);t++)this.removeInput("ADD"+t)}};H.lists_create_with=G;var U={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}};H.lists_create_with_container=U;var V={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg$$module$build$src$core$msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}};H.lists_create_with_item=V;var W={init:function(){var t=[[e.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_FIRST,"FIRST"],[e.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_LAST,"LAST"]];if(this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_INPUT_IN_LIST),!(t=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:t})))throw Error("field_dropdown not found");this.appendValueInput("FIND").appendField(t,"END"),this.setInputsInline(!0),this.setTooltip((()=>e.Msg$$module$build$src$core$msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"0":"-1")))}};H.lists_indexOf=W;var j={init:function(){var t=[[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET,"GET"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),(t=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:t})).setValidator((function(t){t="REMOVE"===t,this.getSourceBlock().updateStatement_(t)})),this.appendValueInput("VALUE").setCheck("Array").appendField(e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(t,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0),this.setTooltip((()=>{const t=this.getFieldValue("MODE"),i=this.getFieldValue("WHERE");let o="";switch(t+" "+i){case"GET FROM_START":case"GET FROM_END":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":o=e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return"FROM_START"!==i&&"FROM_END"!==i||(o+="  "+("FROM_START"===i?e.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP:e.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),o}))},mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation");t.setAttribute("statement",String(!this.outputConnection));const i=this.getInput("AT")instanceof e.ValueInput$$module$build$src$core$inputs$value_input;return t.setAttribute("at",String(i)),t},domToMutation:function(t){const e="true"===t.getAttribute("statement");this.updateStatement_(e),t="false"!==t.getAttribute("at"),this.updateAt_(t)},saveExtraState:function(){return this.outputConnection?null:{isStatement:!0}},loadExtraState:function(t){t.isStatement?this.updateStatement_(!0):"string"==typeof t&&this.domToMutation(e.textToDom$$module$build$src$core$utils$xml(t))},updateStatement_:function(t){t!==!this.outputConnection&&(this.unplug(!0,!0),t?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(t){this.removeInput("AT"),this.removeInput("ORDINAL",!0),t?(this.appendValueInput("AT").setCheck("Number"),e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const i=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});i.setValidator((function(e){const i="FROM_START"===e||"FROM_END"===e;if(i!==t){const t=this.getSourceBlock();return t.updateAt_(i),t.setFieldValue(e,"WHERE"),null}})),this.getInput("AT").appendField(i,"WHERE"),e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}};H.lists_getIndex=j;var Y={init:function(){var t=[[e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_SET,"SET"],[e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_FIRST,"FIRST"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_LAST,"LAST"],[e.Msg$$module$build$src$core$msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_IN_LIST),t=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:t}),this.appendDummyInput().appendField(t,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0),this.setTooltip((()=>{const t=this.getFieldValue("MODE"),i=this.getFieldValue("WHERE");let o="";switch(t+" "+i){case"SET FROM_START":case"SET FROM_END":o=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":o=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":o=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":o=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":o=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":o=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":o=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":o=e.Msg$$module$build$src$core$msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return"FROM_START"!==i&&"FROM_END"!==i||(o+="  "+e.Msg$$module$build$src$core$msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",this.workspace.options.oneBasedIndex?"#1":"#0")),o}))},mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation"),i=this.getInput("AT")instanceof e.ValueInput$$module$build$src$core$inputs$value_input;return t.setAttribute("at",String(i)),t},domToMutation:function(t){t="false"!==t.getAttribute("at"),this.updateAt_(t)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(t){this.removeInput("AT"),this.removeInput("ORDINAL",!0),t?(this.appendValueInput("AT").setCheck("Number"),e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");const i=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this.WHERE_OPTIONS});i.setValidator((function(e){const i="FROM_START"===e||"FROM_END"===e;if(i!==t){const t=this.getSourceBlock();return t.updateAt_(i),t.setFieldValue(e,"WHERE"),null}})),this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(i,"WHERE")}};H.lists_setIndex=Y;var X={init:function(){this.WHERE_OPTIONS_1=[[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation");var i=this.getInput("AT1")instanceof e.ValueInput$$module$build$src$core$inputs$value_input;return t.setAttribute("at1",String(i)),i=this.getInput("AT2")instanceof e.ValueInput$$module$build$src$core$inputs$value_input,t.setAttribute("at2",String(i)),t},domToMutation:function(t){const e="true"===t.getAttribute("at1");t="true"===t.getAttribute("at2"),this.updateAt_(1,e),this.updateAt_(2,t)},saveExtraState:function(){return null},loadExtraState:function(){},updateAt_:function(t,i){this.removeInput("AT"+t),this.removeInput("ORDINAL"+t,!0),i?(this.appendValueInput("AT"+t).setCheck("Number"),e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+t).appendField(e.Msg$$module$build$src$core$msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+t);const o=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:this["WHERE_OPTIONS_"+t]});o.setValidator((function(e){const o="FROM_START"===e||"FROM_END"===e;if(o!==i){const i=this.getSourceBlock();return i.updateAt_(t,o),i.setFieldValue(e,"WHERE"+t),null}})),this.getInput("AT"+t).appendField(o,"WHERE"+t),1===t&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),e.Msg$$module$build$src$core$msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}};H.lists_getSublist=X,H.lists_sort={init:function(){this.jsonInit({message0:"%{BKY_LISTS_SORT_TITLE}",args0:[{type:"field_dropdown",name:"TYPE",options:[["%{BKY_LISTS_SORT_TYPE_NUMERIC}","NUMERIC"],["%{BKY_LISTS_SORT_TYPE_TEXT}","TEXT"],["%{BKY_LISTS_SORT_TYPE_IGNORECASE}","IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[["%{BKY_LISTS_SORT_ORDER_ASCENDING}","1"],["%{BKY_LISTS_SORT_ORDER_DESCENDING}","-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_SORT_TOOLTIP}",helpUrl:"%{BKY_LISTS_SORT_HELPURL}"})}},H.lists_split={init:function(){const t=e.fromJson$$module$build$src$core$field_registry({type:"field_dropdown",options:[[e.Msg$$module$build$src$core$msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[e.Msg$$module$build$src$core$msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]]});if(!t)throw Error("field_dropdown not found");t.setValidator((t=>{this.updateType_(t)})),this.setHelpUrl(e.Msg$$module$build$src$core$msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(t,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(e.Msg$$module$build$src$core$msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip((()=>{const t=this.getFieldValue("MODE");if("SPLIT"===t)return e.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_SPLIT;if("JOIN"===t)return e.Msg$$module$build$src$core$msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+t)}))},updateType_:function(t){if(this.getFieldValue("MODE")!==t){const t=this.getInput("INPUT").connection;t.setShadowDom(null);const e=t.targetBlock();e&&(t.disconnect(),e.isShadow()?e.dispose(!1):this.bumpNeighbours())}"SPLIT"===t?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){const t=e.createElement$$module$build$src$core$utils$xml("mutation");return t.setAttribute("mode",this.getFieldValue("MODE")),t},domToMutation:function(t){this.updateType_(t.getAttribute("mode"))},saveExtraState:function(){return null},loadExtraState:function(){}},e.defineBlocks$$module$build$src$core$common(H);var Z={blocks:H},K={blocks:Object.assign({},H,P,x,k,m,u,a,i),lists:Z,logic:z,loops:L,math:R,procedures:w,texts:v,variables:c,variablesDynamic:s};return K.__namespace__=e,K})?o.apply(e,n):o)||(t.exports=r)},548:function(t,e,i){var o,n,r;n=[i(500),i(955),i(822)],void 0===(r="function"==typeof(o=function(t,e,i){"use strict";return t.setLocale(e),t})?o.apply(e,n):o)||(t.exports=r)},955:function(t,e){var i,o;void 0===(o="function"==typeof(i=function(){"use strict";var t=t||{Msg:Object.create(null)};return t.Msg.ADD_COMMENT="Add Comment",t.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",t.Msg.CHANGE_VALUE_TITLE="Change value:",t.Msg.CLEAN_UP="Clean up Blocks",t.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",t.Msg.COLLAPSE_ALL="Collapse Blocks",t.Msg.COLLAPSE_BLOCK="Collapse Block",t.Msg.COLOUR_BLEND_COLOUR1="colour 1",t.Msg.COLOUR_BLEND_COLOUR2="colour 2",t.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",t.Msg.COLOUR_BLEND_RATIO="ratio",t.Msg.COLOUR_BLEND_TITLE="blend",t.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",t.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",t.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",t.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",t.Msg.COLOUR_RANDOM_TITLE="random colour",t.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",t.Msg.COLOUR_RGB_BLUE="blue",t.Msg.COLOUR_RGB_GREEN="green",t.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",t.Msg.COLOUR_RGB_RED="red",t.Msg.COLOUR_RGB_TITLE="colour with",t.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",t.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",t.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",t.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",t.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",t.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",t.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",t.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",t.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",t.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",t.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",t.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",t.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",t.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",t.Msg.CONTROLS_IF_MSG_ELSE="else",t.Msg.CONTROLS_IF_MSG_ELSEIF="else if",t.Msg.CONTROLS_IF_MSG_IF="if",t.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",t.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",t.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",t.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",t.Msg.CONTROLS_REPEAT_INPUT_DO="do",t.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",t.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",t.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",t.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",t.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",t.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",t.Msg.DELETE_BLOCK="Delete Block",t.Msg.DELETE_VARIABLE="Delete the '%1' variable",t.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",t.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",t.Msg.DIALOG_CANCEL="Cancel",t.Msg.DIALOG_OK="OK",t.Msg.DISABLE_BLOCK="Disable Block",t.Msg.DUPLICATE_BLOCK="Duplicate",t.Msg.DUPLICATE_COMMENT="Duplicate Comment",t.Msg.ENABLE_BLOCK="Enable Block",t.Msg.EXPAND_ALL="Expand Blocks",t.Msg.EXPAND_BLOCK="Expand Block",t.Msg.EXTERNAL_INPUTS="External Inputs",t.Msg.HELP="Help",t.Msg.INLINE_INPUTS="Inline Inputs",t.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",t.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",t.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",t.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",t.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",t.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",t.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",t.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",t.Msg.LISTS_GET_INDEX_FIRST="first",t.Msg.LISTS_GET_INDEX_FROM_END="# from end",t.Msg.LISTS_GET_INDEX_FROM_START="#",t.Msg.LISTS_GET_INDEX_GET="get",t.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",t.Msg.LISTS_GET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",t.Msg.LISTS_GET_INDEX_LAST="last",t.Msg.LISTS_GET_INDEX_RANDOM="random",t.Msg.LISTS_GET_INDEX_REMOVE="remove",t.Msg.LISTS_GET_INDEX_TAIL="",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",t.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",t.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",t.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",t.Msg.LISTS_GET_SUBLIST_END_LAST="to last",t.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",t.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",t.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",t.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",t.Msg.LISTS_GET_SUBLIST_TAIL="",t.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",t.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",t.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",t.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",t.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#finding-items-in-a-list",t.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",t.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",t.Msg.LISTS_INLIST="in list",t.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",t.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",t.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",t.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",t.Msg.LISTS_LENGTH_TITLE="length of %1",t.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",t.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",t.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",t.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",t.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",t.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",t.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",t.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",t.Msg.LISTS_SET_INDEX_INPUT_TO="as",t.Msg.LISTS_SET_INDEX_INSERT="insert at",t.Msg.LISTS_SET_INDEX_SET="set",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",t.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",t.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",t.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",t.Msg.LISTS_SORT_ORDER_DESCENDING="descending",t.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",t.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",t.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",t.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",t.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",t.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",t.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",t.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",t.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",t.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",t.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",t.Msg.LOGIC_BOOLEAN_FALSE="false",t.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",t.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",t.Msg.LOGIC_BOOLEAN_TRUE="true",t.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",t.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",t.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",t.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",t.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",t.Msg.LOGIC_NEGATE_TITLE="not %1",t.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",t.Msg.LOGIC_NULL="null",t.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",t.Msg.LOGIC_NULL_TOOLTIP="Returns null.",t.Msg.LOGIC_OPERATION_AND="and",t.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",t.Msg.LOGIC_OPERATION_OR="or",t.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",t.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",t.Msg.LOGIC_TERNARY_CONDITION="test",t.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",t.Msg.LOGIC_TERNARY_IF_FALSE="if false",t.Msg.LOGIC_TERNARY_IF_TRUE="if true",t.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",t.Msg.MATH_ADDITION_SYMBOL="+",t.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",t.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",t.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",t.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",t.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",t.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",t.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",t.Msg.MATH_CHANGE_TITLE="change %1 by %2",t.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",t.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",t.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: Ï (3.141â¦), e (2.718â¦), Ï (1.618â¦), sqrt(2) (1.414â¦), sqrt(Â½) (0.707â¦), or â (infinity).",t.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",t.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",t.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",t.Msg.MATH_DIVISION_SYMBOL="Ã·",t.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",t.Msg.MATH_IS_EVEN="is even",t.Msg.MATH_IS_NEGATIVE="is negative",t.Msg.MATH_IS_ODD="is odd",t.Msg.MATH_IS_POSITIVE="is positive",t.Msg.MATH_IS_PRIME="is prime",t.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",t.Msg.MATH_IS_WHOLE="is whole",t.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",t.Msg.MATH_MODULO_TITLE="remainder of %1 Ã· %2",t.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",t.Msg.MATH_MULTIPLICATION_SYMBOL="Ã",t.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",t.Msg.MATH_NUMBER_TOOLTIP="A number.",t.Msg.MATH_ONLIST_HELPURL="",t.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",t.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",t.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",t.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",t.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",t.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",t.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",t.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",t.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",t.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",t.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",t.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",t.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",t.Msg.MATH_POWER_SYMBOL="^",t.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",t.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",t.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",t.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",t.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",t.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",t.Msg.MATH_ROUND_OPERATOR_ROUND="round",t.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",t.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",t.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",t.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",t.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",t.Msg.MATH_SINGLE_OP_ROOT="square root",t.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",t.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",t.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",t.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",t.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",t.Msg.MATH_SUBTRACTION_SYMBOL="-",t.Msg.MATH_TRIG_ACOS="acos",t.Msg.MATH_TRIG_ASIN="asin",t.Msg.MATH_TRIG_ATAN="atan",t.Msg.MATH_TRIG_COS="cos",t.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",t.Msg.MATH_TRIG_SIN="sin",t.Msg.MATH_TRIG_TAN="tan",t.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",t.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",t.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",t.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",t.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",t.Msg.NEW_NUMBER_VARIABLE="Create number variable...",t.Msg.NEW_STRING_VARIABLE="Create string variable...",t.Msg.NEW_VARIABLE="Create variable...",t.Msg.NEW_VARIABLE_TITLE="New variable name:",t.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",t.Msg.ORDINAL_NUMBER_SUFFIX="",t.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",t.Msg.PROCEDURES_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",t.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",t.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",t.Msg.PROCEDURES_CALL_DISABLED_DEF_WARNING="Can't run the user-defined function '%1' because the definition block is disabled.",t.Msg.PROCEDURES_CREATE_DO="Create '%1'",t.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",t.Msg.PROCEDURES_DEFNORETURN_DO="",t.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",t.Msg.PROCEDURES_DEFNORETURN_TITLE="to",t.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",t.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",t.Msg.PROCEDURES_DEFRETURN_RETURN="return",t.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",t.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",t.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",t.Msg.PROCEDURES_IFRETURN_HELPURL="https://c2.com/cgi/wiki?GuardClause",t.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",t.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",t.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",t.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",t.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",t.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",t.Msg.REDO="Redo",t.Msg.REMOVE_COMMENT="Remove Comment",t.Msg.RENAME_VARIABLE="Rename variable...",t.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",t.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_APPEND_TITLE="to %1 append text %2",t.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",t.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",t.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",t.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",t.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",t.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",t.Msg.TEXT_CHARAT_FIRST="get first letter",t.Msg.TEXT_CHARAT_FROM_END="get letter # from end",t.Msg.TEXT_CHARAT_FROM_START="get letter #",t.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",t.Msg.TEXT_CHARAT_LAST="get last letter",t.Msg.TEXT_CHARAT_RANDOM="get random letter",t.Msg.TEXT_CHARAT_TAIL="",t.Msg.TEXT_CHARAT_TITLE="in text %1 %2",t.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",t.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",t.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",t.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",t.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",t.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",t.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",t.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",t.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",t.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",t.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",t.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",t.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",t.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",t.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",t.Msg.TEXT_GET_SUBSTRING_TAIL="",t.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",t.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",t.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",t.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",t.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",t.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",t.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",t.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",t.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",t.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",t.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",t.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",t.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",t.Msg.TEXT_LENGTH_TITLE="length of %1",t.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",t.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",t.Msg.TEXT_PRINT_TITLE="print %1",t.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",t.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",t.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",t.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",t.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",t.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",t.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",t.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",t.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",t.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",t.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",t.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",t.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",t.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",t.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",t.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",t.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",t.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",t.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",t.Msg.TODAY="Today",t.Msg.UNDO="Undo",t.Msg.UNNAMED_KEY="unnamed",t.Msg.VARIABLES_DEFAULT_NAME="item",t.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",t.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",t.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",t.Msg.VARIABLES_SET="set %1 to %2",t.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",t.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",t.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",t.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",t.Msg.VARIABLE_ALREADY_EXISTS_FOR_A_PARAMETER="A variable named '%1' already exists as a parameter in the procedure '%2'.",t.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",t.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",t.Msg.CONTROLS_FOREACH_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_FOR_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=t.Msg.CONTROLS_IF_MSG_ELSEIF,t.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=t.Msg.CONTROLS_IF_MSG_ELSE,t.Msg.CONTROLS_IF_IF_TITLE_IF=t.Msg.CONTROLS_IF_MSG_IF,t.Msg.CONTROLS_IF_MSG_THEN=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=t.Msg.CONTROLS_REPEAT_INPUT_DO,t.Msg.LISTS_CREATE_WITH_ITEM_TITLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=t.Msg.LISTS_INLIST,t.Msg.MATH_CHANGE_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.PROCEDURES_DEFRETURN_COMMENT=t.Msg.PROCEDURES_DEFNORETURN_COMMENT,t.Msg.PROCEDURES_DEFRETURN_DO=t.Msg.PROCEDURES_DEFNORETURN_DO,t.Msg.PROCEDURES_DEFRETURN_PROCEDURE=t.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,t.Msg.PROCEDURES_DEFRETURN_TITLE=t.Msg.PROCEDURES_DEFNORETURN_TITLE,t.Msg.TEXT_APPEND_VARIABLE=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=t.Msg.VARIABLES_DEFAULT_NAME,t.Msg.COLOUR_HUE="20",t.Msg.LISTS_HUE="260",t.Msg.LOGIC_HUE="210",t.Msg.LOOPS_HUE="120",t.Msg.MATH_HUE="230",t.Msg.PROCEDURES_HUE="290",t.Msg.TEXTS_HUE="160",t.Msg.VARIABLES_DYNAMIC_HUE="310",t.Msg.VARIABLES_HUE="330",t.Msg})?i.apply(e,[]):i)||(t.exports=o)}},e={};function i(o){var n=e[o];if(void 0!==n)return n.exports;var r=e[o]={id:o,exports:{}};return t[o].call(r.exports,r,r.exports,i),r.exports}i.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return i.d(e,{a:e}),e},i.d=(t,e)=>{for(var o in e)i.o(e,o)&&!i.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),i.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),i.nc=void 0,(()=>{"use strict";var t=i(548);const{ASTNode:e,BasicCursor:o,Block:n,BlockSvg:r,Blocks:s,COLLAPSED_FIELD_NAME:a,COLLAPSED_INPUT_NAME:g,COLLAPSE_CHARS:l,CodeGenerator:h,CollapsibleToolboxCategory:c,ComponentManager:u,Connection:d,ConnectionChecker:A,ConnectionDB:I,ConnectionType:C,ContextMenu:p,ContextMenuItems:f,ContextMenuRegistry:v,Css:m,Cursor:b,DELETE_VARIABLE_ID:y,DeleteArea:_,DragTarget:T,DropDownDiv:E,Events:w,Extensions:k,Field:O,FieldCheckbox:S,FieldDropdown:R,FieldImage:x,FieldLabel:D,FieldLabelSerializable:M,FieldNumber:N,FieldTextInput:L,FieldVariable:P,Flyout:$,FlyoutButton:B,FlyoutMetricsManager:F,Generator:z,Gesture:H,Grid:G,HorizontalFlyout:U,INPUT_VALUE:V,Input:W,InsertionMarkerManager:j,InsertionMarkerPreviewer:Y,Marker:X,MarkerManager:Z,Menu:K,MenuItem:Q,MetricsManager:J,Msg:q,NEXT_STATEMENT:tt,Names:et,OPPOSITE_TYPE:it,OUTPUT_VALUE:ot,Options:nt,PREVIOUS_STATEMENT:rt,PROCEDURE_CATEGORY_NAME:st,Procedures:at,RENAME_VARIABLE_ID:gt,RenderedConnection:lt,Scrollbar:ht,ScrollbarPair:ct,ShortcutItems:ut,ShortcutRegistry:dt,TOOLBOX_AT_BOTTOM:At,TOOLBOX_AT_LEFT:It,TOOLBOX_AT_RIGHT:Ct,TOOLBOX_AT_TOP:pt,TabNavigateCursor:ft,Theme:vt,ThemeManager:mt,Themes:bt,Toolbox:yt,ToolboxCategory:_t,ToolboxItem:Tt,ToolboxSeparator:Et,Tooltip:wt,Touch:kt,Trashcan:Ot,UnattachedFieldError:St,VARIABLE_CATEGORY_NAME:Rt,VARIABLE_DYNAMIC_CATEGORY_NAME:xt,VERSION:Dt,VariableMap:Mt,VariableModel:Nt,Variables:Lt,VariablesDynamic:Pt,VerticalFlyout:$t,WidgetDiv:Bt,Workspace:Ft,WorkspaceAudio:zt,WorkspaceDragger:Ht,WorkspaceSvg:Gt,Xml:Ut,ZoomControls:Vt,blockAnimations:Wt,blockRendering:jt,browserEvents:Yt,bubbles:Xt,bumpObjects:Zt,clipboard:Kt,comments:Qt,common:Jt,config:qt,constants:te,defineBlocksWithJsonArray:ee,dialog:ie,dragging:oe,fieldRegistry:ne,geras:re,getMainWorkspace:se,getSelected:ae,hasBubble:ge,hideChaff:le,icons:he,inject:ce,inputs:ue,isCopyable:de,isDeletable:Ae,isDraggable:Ie,isIcon:Ce,isObservable:pe,isPaster:fe,isRenderedElement:ve,isSelectable:me,isSerializable:be,isVariableBackedParameterModel:ye,procedures:_e,registry:Te,renderManagement:Ee,serialization:we,setLocale:ke,setParentContainer:Oe,svgResize:Se,thrasos:Re,uiPosition:xe,utils:De,zelos:Me}=t;i(993);const Ne=Jt.createBlockDefinitionsFromJsonArray([{type:"binary_op",message0:"%1 %2 %3",args0:[{type:"field_dropdown",name:"OPERATION",options:[["and","AND"],["or","OR"]]},{type:"input_value",name:"OPERAND1",check:"bool"},{type:"input_value",name:"OPERAND2",check:"bool"}],output:"bool",colour:230},{type:"not",message0:"not %1",args0:[{type:"input_value",name:"OPERAND",check:"bool"}],output:"bool",colour:230},{type:"node",message0:"âªï¸ %1",args0:[{type:"field_dropdown",name:"VARNAME",options:[["a","a"],["b","b"],["c","c"],["d","d"],["e","e"],["f","f"],["g","g"]]}],output:["expr","variable"],colour:230},{type:"target_node",message0:"ð¢",args0:[],output:"expr",colour:230},{type:"eq",message0:"%1 = %2",args0:[{type:"input_value",name:"LHS",check:"expr"},{type:"input_value",name:"RHS",check:"expr"}],output:"bool",colour:230,inputsInline:!0},{type:"points_to",message0:"%1âª%2",args0:[{type:"input_value",name:"SOURCE",check:"expr"},{type:"input_value",name:"TARGET",check:"expr"}],output:"bool",colour:230,inputsInline:!1},{type:"quantifier",message0:"%1 %2 %3",args0:[{type:"field_dropdown",name:"QUANTIFIER",options:[["â","FORALL"],["â","EXISTS"]]},{type:"input_value",name:"FREEVAR",check:"variable"},{type:"input_value",name:"PREDICATE",check:"bool"}],output:"bool",colour:230,inputsInline:!1}]),Le=new z("fol");Le.forBlock.target_node=function(t,e){return["y",0]},Le.forBlock.node=function(t,e){return["x"+(t.getFieldValue("VARNAME").charCodeAt(0)-97),0]},Le.forBlock.points_to=function(t,e){return[`R(${e.valueToCode(t,"SOURCE",0)},${e.valueToCode(t,"TARGET",0)})`,0]},Le.forBlock.eq=function(t,e){return[`eq(${e.valueToCode(t,"SOURCE",0)},${e.valueToCode(t,"TARGET",0)})`,0]},Le.forBlock.binary_op=function(t,e){var i="AND"===t.getFieldValue("OPERATION")?"&":"|";return[`(${e.valueToCode(t,"OPERAND1",0)}${i}${e.valueToCode(t,"OPERAND2",0)})`,0]},Le.forBlock.not=function(t,e){return[`~(${e.valueToCode(t,"OPERAND",0)})`,0]},Le.forBlock.quantifier=function(t,e){return[`${"FORALL"===t.getFieldValue("QUANTIFIER")?"A":"E"}${e.valueToCode(t,"FREEVAR",0)}(${e.valueToCode(t,"PREDICATE",0)})`,0]};var Pe=i(500);const{ASTNode:$e,BasicCursor:Be,Block:Fe,BlockSvg:ze,Blocks:He,COLLAPSED_FIELD_NAME:Ge,COLLAPSED_INPUT_NAME:Ue,COLLAPSE_CHARS:Ve,CodeGenerator:We,CollapsibleToolboxCategory:je,ComponentManager:Ye,Connection:Xe,ConnectionChecker:Ze,ConnectionDB:Ke,ConnectionType:Qe,ContextMenu:Je,ContextMenuItems:qe,ContextMenuRegistry:ti,Css:ei,Cursor:ii,DELETE_VARIABLE_ID:oi,DeleteArea:ni,DragTarget:ri,DropDownDiv:si,Events:ai,Extensions:gi,Field:li,FieldCheckbox:hi,FieldDropdown:ci,FieldImage:ui,FieldLabel:di,FieldLabelSerializable:Ai,FieldNumber:Ii,FieldTextInput:Ci,FieldVariable:pi,Flyout:fi,FlyoutButton:vi,FlyoutMetricsManager:mi,Generator:bi,Gesture:yi,Grid:_i,HorizontalFlyout:Ti,INPUT_VALUE:Ei,Input:wi,InsertionMarkerManager:ki,InsertionMarkerPreviewer:Oi,Marker:Si,MarkerManager:Ri,Menu:xi,MenuItem:Di,MetricsManager:Mi,Msg:Ni,NEXT_STATEMENT:Li,Names:Pi,OPPOSITE_TYPE:$i,OUTPUT_VALUE:Bi,Options:Fi,PREVIOUS_STATEMENT:zi,PROCEDURE_CATEGORY_NAME:Hi,Procedures:Gi,RENAME_VARIABLE_ID:Ui,RenderedConnection:Vi,Scrollbar:Wi,ScrollbarPair:ji,ShortcutItems:Yi,ShortcutRegistry:Xi,TOOLBOX_AT_BOTTOM:Zi,TOOLBOX_AT_LEFT:Ki,TOOLBOX_AT_RIGHT:Qi,TOOLBOX_AT_TOP:Ji,TabNavigateCursor:qi,Theme:to,ThemeManager:eo,Themes:io,Toolbox:oo,ToolboxCategory:no,ToolboxItem:ro,ToolboxSeparator:so,Tooltip:ao,Touch:go,Trashcan:lo,UnattachedFieldError:ho,VARIABLE_CATEGORY_NAME:co,VARIABLE_DYNAMIC_CATEGORY_NAME:uo,VERSION:Ao,VariableMap:Io,VariableModel:Co,Variables:po,VariablesDynamic:fo,VerticalFlyout:vo,WidgetDiv:mo,Workspace:bo,WorkspaceAudio:yo,WorkspaceDragger:_o,WorkspaceSvg:To,Xml:Eo,ZoomControls:wo,blockAnimations:ko,blockRendering:Oo,browserEvents:So,bubbles:Ro,bumpObjects:xo,clipboard:Do,comments:Mo,common:No,config:Lo,constants:Po,defineBlocksWithJsonArray:$o,dialog:Bo,dragging:Fo,fieldRegistry:zo,geras:Ho,getMainWorkspace:Go,getSelected:Uo,hasBubble:Vo,hideChaff:Wo,icons:jo,inject:Yo,inputs:Xo,isCopyable:Zo,isDeletable:Ko,isDraggable:Qo,isIcon:Jo,isObservable:qo,isPaster:tn,isRenderedElement:en,isSelectable:on,isSerializable:nn,isVariableBackedParameterModel:rn,procedures:sn,registry:an,renderManagement:gn,serialization:ln,setLocale:hn,setParentContainer:cn,svgResize:un,thrasos:dn,uiPosition:An,utils:In,zelos:Cn}=Pe,pn="folGeneratorWorkspace";class fn{constructor(t,e){this.token=t,this.children=e}}class vn{constructor(t,e,i,o){this.varTokens=t,this.fxnTokens=e,this.relTokens=i,this.cstTokens=o,this.qfrTokens=["A","E"],this.binConTokens=["&","|"],this.unConTokens=["~"],this.unconsumed=""}tryParseToken(t){for(;this.unconsumed.startsWith(" ");)this.unconsumed=this.unconsumed.slice(1);if(this.unconsumed.startsWith(t))return this.unconsumed=this.unconsumed.slice(t.length),new fn(t,[])}tryParseAnyToken(t){for(let e=0;e<t.length;e++){let i=this.tryParseToken(t.at(e));if(null!=i)return i}}tryParseVar(){return this.tryParseAnyToken(this.varTokens)}tryParseCst(){return this.tryParseAnyToken(this.cstTokens)}mustParseFxn(){let t=this.tryParseAnyToken(this.fxnTokens);if(null==t)return;if(null==this.tryParseToken("("))throw new SyntaxError("Expected open paren following function name "+t.token);let e=[];for(e.push(this.mustParseExpr());null!=this.tryParseToken(",");)e.push(this.mustParseExpr());if(null==this.tryParseToken(")"))throw new SyntaxError("Expected close paren following args of function "+t.token);return t.children=e,t}mustParseExpr(){let t=this.tryParseCst();if(null!=t)return t;if(t=this.tryParseVar(),null!=t)return t;if(t=this.mustParseFxn(),null!=t)return t;throw new SyntaxError("Expected expression, but instead found "+this.unconsumed)}mustParseFormula(t=!0){let e,i=this.tryParseToken("(");if(null!=i&&(e=this.mustParseFormula(),null==this.tryParseToken(")")))throw new SyntaxError("Expected close paren closing parenthesized formula");if(null==e&&(i=this.tryParseAnyToken(this.unConTokens),null!=i&&(e=i,e.children.push(this.mustParseFormula(!1)),t&&(i=this.tryParseAnyToken(this.binConTokens),null!=i)))){let t=i;t.children=[e,this.mustParseFormula()],e=t}if(null==e&&(i=this.tryParseAnyToken(this.qfrTokens),null!=i)){if(e=i,i=this.tryParseAnyToken(this.varTokens),null==i)throw new SyntaxError("Expected variable name after quantifier "+e.token);e.children=[i,this.mustParseFormula(!1)]}if(null==e&&(i=this.tryParseAnyToken(this.relTokens),null!=i)){if(e=i,null==this.tryParseToken("("))throw new SyntaxError("Expected open paren for call to relation "+e.token);for(e.children.push(this.mustParseExpr());null!=this.tryParseToken(",");)e.children.push(this.mustParseExpr());if(null==this.tryParseToken(")"))throw new SyntaxError("Expected close paren for call to relation "+e.token)}if(null==e)throw new SyntaxError("Expected string starting with formula, but found "+this.unconsumed);if(t&&(i=this.tryParseAnyToken(this.binConTokens),null!=i)){let t=i;t.children=[e,this.mustParseFormula()],e=t}return e}mustParseEntireFormula(){let t=this.mustParseFormula();if(this.unconsumed.replace(/\s/g,"").length>0)throw new SyntaxError("Unexpected tokens at end of string: "+this.unconsumed);return t}}class mn{constructor(t,e,i,o){this.universe=t,this.cmap=e,this.fmap=i,this.rmap=o;let n=[...Array(99).keys()].map((t=>"x"+t));this.parser=new vn(n,Object.keys(i),Object.keys(o),Object.keys(e))}evaluateExprNodeInContext(t,e){if(Object.keys(this.fmap).indexOf(t.token)>-1){let i=this.fmap[t.token];if(t.children.length!=i.length)throw new Error("Function "+t.token+" expected "+i.length+" arguments, got "+t.children.length);return i(...t.children.map((t=>this.evaluateExprNodeInContext(t,e))))}if(Object.keys(this.cmap).indexOf(t.token)>-1)return this.cmap[t.token];if(Object.keys(e).indexOf(t.token)>-1)return e[t.token];throw new Error("Literal '"+t.token+"' unrecognized")}evaluateExpr(t){this.parser.unconsumed=t;let e=this.parser.mustParseExpr();return this.evaluateNodeInContext(e,{})}evaluateFormulaNodeInContext(t,e){if(this.parser.unConTokens.indexOf(t.token)>-1&&"~"==t.token)return!this.evaluateFormulaNodeInContext(t.children[0],e);if(this.parser.binConTokens.indexOf(t.token)>-1){if("&"===t.token)return this.evaluateFormulaNodeInContext(t.children[0],e)&&this.evaluateFormulaNodeInContext(t.children[1],e);if("|"===t.token)return this.evaluateFormulaNodeInContext(t.children[0],e)||this.evaluateFormulaNodeInContext(t.children[1],e)}if(this.parser.relTokens.indexOf(t.token)>-1)return(0,this.rmap[t.token])(...t.children.map((t=>this.evaluateExprNodeInContext(t,e))));if(this.parser.qfrTokens.indexOf(t.token)>-1){if("A"===t.token){for(let i=0;i<this.universe.length;i++){let o={...e};if(o[t.children[0].token]=this.universe[i],!this.evaluateFormulaNodeInContext(t.children[1],o))return!1}return!0}if("E"===t.token){for(let i=0;i<this.universe.length;i++){let o={...e};if(o[t.children[0].token]=this.universe[i],this.evaluateFormulaNodeInContext(t.children[1],o))return!0}return!1}}throw new SyntaxError("Unrecognized token "+t.token)}evaluateFormulaInContext(t,e){this.parser.unconsumed=t;let i=this.parser.mustParseEntireFormula();return this.evaluateFormulaNodeInContext(i,e)}}var bn=["y"].concat(Array.from(Array(99).keys()).map((t=>`x${t}`))),yn=(new vn(bn,[],["eq","R"],[]),"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==i.g?i.g:"undefined"!=typeof self?self:{});function _n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Tn=function(t){return t&&t.Math===Math&&t},En=Tn("object"==typeof globalThis&&globalThis)||Tn("object"==typeof window&&window)||Tn("object"==typeof self&&self)||Tn("object"==typeof yn&&yn)||function(){return this}()||yn||Function("return this")(),wn=function(t){try{return!!t()}catch(t){return!0}},kn=!wn((function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})),On=kn,Sn=Function.prototype,Rn=Sn.apply,xn=Sn.call,Dn="object"==typeof Reflect&&Reflect.apply||(On?xn.bind(Rn):function(){return xn.apply(Rn,arguments)}),Mn=kn,Nn=Function.prototype,Ln=Nn.call,Pn=Mn&&Nn.bind.bind(Ln,Ln),$n=Mn?Pn:function(t){return function(){return Ln.apply(t,arguments)}},Bn=$n,Fn=Bn({}.toString),zn=Bn("".slice),Hn=function(t){return zn(Fn(t),8,-1)},Gn=Hn,Un=$n,Vn=function(t){if("Function"===Gn(t))return Un(t)},Wn="object"==typeof document&&document.all,jn={all:Wn,IS_HTMLDDA:void 0===Wn&&void 0!==Wn},Yn=jn.all,Xn=jn.IS_HTMLDDA?function(t){return"function"==typeof t||t===Yn}:function(t){return"function"==typeof t},Zn={},Kn=!wn((function(){return 7!==Object.defineProperty({},1,{get:function(){return 7}})[1]})),Qn=kn,Jn=Function.prototype.call,qn=Qn?Jn.bind(Jn):function(){return Jn.apply(Jn,arguments)},tr={},er={}.propertyIsEnumerable,ir=Object.getOwnPropertyDescriptor,or=ir&&!er.call({1:2},1);tr.f=or?function(t){var e=ir(this,t);return!!e&&e.enumerable}:er;var nr,rr,sr=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},ar=wn,gr=Hn,lr=Object,hr=$n("".split),cr=ar((function(){return!lr("z").propertyIsEnumerable(0)}))?function(t){return"String"===gr(t)?hr(t,""):lr(t)}:lr,ur=function(t){return null==t},dr=ur,Ar=TypeError,Ir=function(t){if(dr(t))throw new Ar("Can't call method on "+t);return t},Cr=cr,pr=Ir,fr=function(t){return Cr(pr(t))},vr=Xn,mr=jn.all,br=jn.IS_HTMLDDA?function(t){return"object"==typeof t?null!==t:vr(t)||t===mr}:function(t){return"object"==typeof t?null!==t:vr(t)},yr={},_r=yr,Tr=En,Er=Xn,wr=function(t){return Er(t)?t:void 0},kr=function(t,e){return arguments.length<2?wr(_r[t])||wr(Tr[t]):_r[t]&&_r[t][e]||Tr[t]&&Tr[t][e]},Or=$n({}.isPrototypeOf),Sr="undefined"!=typeof navigator&&String(navigator.userAgent)||"",Rr=En,xr=Sr,Dr=Rr.process,Mr=Rr.Deno,Nr=Dr&&Dr.versions||Mr&&Mr.version,Lr=Nr&&Nr.v8;Lr&&(rr=(nr=Lr.split("."))[0]>0&&nr[0]<4?1:+(nr[0]+nr[1])),!rr&&xr&&(!(nr=xr.match(/Edge\/(\d+)/))||nr[1]>=74)&&(nr=xr.match(/Chrome\/(\d+)/))&&(rr=+nr[1]);var Pr=rr,$r=Pr,Br=wn,Fr=En.String,zr=!!Object.getOwnPropertySymbols&&!Br((function(){var t=Symbol("symbol detection");return!Fr(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&$r&&$r<41})),Hr=zr&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Gr=kr,Ur=Xn,Vr=Or,Wr=Object,jr=Hr?function(t){return"symbol"==typeof t}:function(t){var e=Gr("Symbol");return Ur(e)&&Vr(e.prototype,Wr(t))},Yr=String,Xr=function(t){try{return Yr(t)}catch(t){return"Object"}},Zr=Xn,Kr=Xr,Qr=TypeError,Jr=function(t){if(Zr(t))return t;throw new Qr(Kr(t)+" is not a function")},qr=Jr,ts=ur,es=function(t,e){var i=t[e];return ts(i)?void 0:qr(i)},is=qn,os=Xn,ns=br,rs=TypeError,ss={exports:{}},as=En,gs=Object.defineProperty,ls="__core-js_shared__",hs=En[ls]||function(t,e){try{gs(as,t,{value:e,configurable:!0,writable:!0})}catch(i){as[t]=e}return e}(ls,{}),cs=hs;(ss.exports=function(t,e){return cs[t]||(cs[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.33.0",mode:"pure",copyright:"Â© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.0/LICENSE",source:"https://github.com/zloirock/core-js"});var us=ss.exports,ds=Ir,As=Object,Is=function(t){return As(ds(t))},Cs=Is,ps=$n({}.hasOwnProperty),fs=Object.hasOwn||function(t,e){return ps(Cs(t),e)},vs=$n,ms=0,bs=Math.random(),ys=vs(1..toString),_s=function(t){return"Symbol("+(void 0===t?"":t)+")_"+ys(++ms+bs,36)},Ts=us,Es=fs,ws=_s,ks=zr,Os=Hr,Ss=En.Symbol,Rs=Ts("wks"),xs=Os?Ss.for||Ss:Ss&&Ss.withoutSetter||ws,Ds=function(t){return Es(Rs,t)||(Rs[t]=ks&&Es(Ss,t)?Ss[t]:xs("Symbol."+t)),Rs[t]},Ms=qn,Ns=br,Ls=jr,Ps=es,$s=TypeError,Bs=Ds("toPrimitive"),Fs=function(t,e){if(!Ns(t)||Ls(t))return t;var i,o=Ps(t,Bs);if(o){if(void 0===e&&(e="default"),i=Ms(o,t,e),!Ns(i)||Ls(i))return i;throw new $s("Can't convert object to primitive value")}return void 0===e&&(e="number"),function(t,e){var i,o;if("string"===e&&os(i=t.toString)&&!ns(o=is(i,t)))return o;if(os(i=t.valueOf)&&!ns(o=is(i,t)))return o;if("string"!==e&&os(i=t.toString)&&!ns(o=is(i,t)))return o;throw new rs("Can't convert object to primitive value")}(t,e)},zs=jr,Hs=function(t){var e=Fs(t,"string");return zs(e)?e:e+""},Gs=br,Us=En.document,Vs=Gs(Us)&&Gs(Us.createElement),Ws=function(t){return Vs?Us.createElement(t):{}},js=Ws,Ys=!Kn&&!wn((function(){return 7!==Object.defineProperty(js("div"),"a",{get:function(){return 7}}).a})),Xs=Kn,Zs=qn,Ks=tr,Qs=sr,Js=fr,qs=Hs,ta=fs,ea=Ys,ia=Object.getOwnPropertyDescriptor;Zn.f=Xs?ia:function(t,e){if(t=Js(t),e=qs(e),ea)try{return ia(t,e)}catch(t){}if(ta(t,e))return Qs(!Zs(Ks.f,t,e),t[e])};var oa=wn,na=Xn,ra=/#|\.prototype\./,sa=function(t,e){var i=ga[aa(t)];return i===ha||i!==la&&(na(e)?oa(e):!!e)},aa=sa.normalize=function(t){return String(t).replace(ra,".").toLowerCase()},ga=sa.data={},la=sa.NATIVE="N",ha=sa.POLYFILL="P",ca=sa,ua=Jr,da=kn,Aa=Vn(Vn.bind),Ia=function(t,e){return ua(t),void 0===e?t:da?Aa(t,e):function(){return t.apply(e,arguments)}},Ca={},pa=Kn&&wn((function(){return 42!==Object.defineProperty((function(){}),"prototype",{value:42,writable:!1}).prototype})),fa=br,va=String,ma=TypeError,ba=function(t){if(fa(t))return t;throw new ma(va(t)+" is not an object")},ya=Kn,_a=Ys,Ta=pa,Ea=ba,wa=Hs,ka=TypeError,Oa=Object.defineProperty,Sa=Object.getOwnPropertyDescriptor,Ra="enumerable",xa="configurable",Da="writable";Ca.f=ya?Ta?function(t,e,i){if(Ea(t),e=wa(e),Ea(i),"function"==typeof t&&"prototype"===e&&"value"in i&&Da in i&&!i[Da]){var o=Sa(t,e);o&&o[Da]&&(t[e]=i.value,i={configurable:xa in i?i[xa]:o[xa],enumerable:Ra in i?i[Ra]:o[Ra],writable:!1})}return Oa(t,e,i)}:Oa:function(t,e,i){if(Ea(t),e=wa(e),Ea(i),_a)try{return Oa(t,e,i)}catch(t){}if("get"in i||"set"in i)throw new ka("Accessors not supported");return"value"in i&&(t[e]=i.value),t};var Ma=Ca,Na=sr,La=Kn?function(t,e,i){return Ma.f(t,e,Na(1,i))}:function(t,e,i){return t[e]=i,t},Pa=En,$a=Dn,Ba=Vn,Fa=Xn,za=Zn.f,Ha=ca,Ga=yr,Ua=Ia,Va=La,Wa=fs,ja=function(t){var e=function(i,o,n){if(this instanceof e){switch(arguments.length){case 0:return new t;case 1:return new t(i);case 2:return new t(i,o)}return new t(i,o,n)}return $a(t,this,arguments)};return e.prototype=t.prototype,e},Ya=function(t,e){var i,o,n,r,s,a,g,l,h,c=t.target,u=t.global,d=t.stat,A=t.proto,I=u?Pa:d?Pa[c]:(Pa[c]||{}).prototype,C=u?Ga:Ga[c]||Va(Ga,c,{})[c],p=C.prototype;for(r in e)o=!(i=Ha(u?r:c+(d?".":"#")+r,t.forced))&&I&&Wa(I,r),a=C[r],o&&(g=t.dontCallGetSet?(h=za(I,r))&&h.value:I[r]),s=o&&g?g:e[r],o&&typeof a==typeof s||(l=t.bind&&o?Ua(s,Pa):t.wrap&&o?ja(s):A&&Fa(s)?Ba(s):s,(t.sham||s&&s.sham||a&&a.sham)&&Va(l,"sham",!0),Va(C,r,l),A&&(Wa(Ga,n=c+"Prototype")||Va(Ga,n,{}),Va(Ga[n],r,s),t.real&&p&&(i||!p[r])&&Va(p,r,s)))},Xa=Math.ceil,Za=Math.floor,Ka=Math.trunc||function(t){var e=+t;return(e>0?Za:Xa)(e)},Qa=function(t){var e=+t;return e!=e||0===e?0:Ka(e)},Ja=Qa,qa=Math.max,tg=Math.min,eg=function(t,e){var i=Ja(t);return i<0?qa(i+e,0):tg(i,e)},ig=Qa,og=Math.min,ng=function(t){return(e=t.length)>0?og(ig(e),9007199254740991):0;var e},rg=fr,sg=eg,ag=ng,gg=function(t){return function(e,i,o){var n,r=rg(e),s=ag(r),a=sg(o,s);if(t&&i!=i){for(;s>a;)if((n=r[a++])!=n)return!0}else for(;s>a;a++)if((t||a in r)&&r[a]===i)return t||a||0;return!t&&-1}},lg={includes:gg(!0),indexOf:gg(!1)},hg={},cg=fs,ug=fr,dg=lg.indexOf,Ag=hg,Ig=$n([].push),Cg=function(t,e){var i,o=ug(t),n=0,r=[];for(i in o)!cg(Ag,i)&&cg(o,i)&&Ig(r,i);for(;e.length>n;)cg(o,i=e[n++])&&(~dg(r,i)||Ig(r,i));return r},pg=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],fg=Cg,vg=pg,mg=Object.keys||function(t){return fg(t,vg)},bg={};bg.f=Object.getOwnPropertySymbols;var yg=Kn,_g=$n,Tg=qn,Eg=wn,wg=mg,kg=bg,Og=tr,Sg=Is,Rg=cr,xg=Object.assign,Dg=Object.defineProperty,Mg=_g([].concat),Ng=!xg||Eg((function(){if(yg&&1!==xg({b:1},xg(Dg({},"a",{enumerable:!0,get:function(){Dg(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},i=Symbol("assign detection"),o="abcdefghijklmnopqrst";return t[i]=7,o.split("").forEach((function(t){e[t]=t})),7!==xg({},t)[i]||wg(xg({},e)).join("")!==o}))?function(t,e){for(var i=Sg(t),o=arguments.length,n=1,r=kg.f,s=Og.f;o>n;)for(var a,g=Rg(arguments[n++]),l=r?Mg(wg(g),r(g)):wg(g),h=l.length,c=0;h>c;)a=l[c++],yg&&!Tg(s,g,a)||(i[a]=g[a]);return i}:xg;Ya({target:"Object",stat:!0,arity:2,forced:Object.assign!==Ng},{assign:Ng});var Lg=_n(yr.Object.assign),Pg=$n([].slice),$g=$n,Bg=Jr,Fg=br,zg=fs,Hg=Pg,Gg=kn,Ug=Function,Vg=$g([].concat),Wg=$g([].join),jg={},Yg=Gg?Ug.bind:function(t){var e=Bg(this),i=e.prototype,o=Hg(arguments,1),n=function(){var i=Vg(o,Hg(arguments));return this instanceof n?function(t,e,i){if(!zg(jg,e)){for(var o=[],n=0;n<e;n++)o[n]="a["+n+"]";jg[e]=Ug("C,a","return new C("+Wg(o,",")+")")}return jg[e](t,i)}(e,i.length,i):e.apply(t,i)};return Fg(i)&&(n.prototype=i),n},Xg=Yg;Ya({target:"Function",proto:!0,forced:Function.bind!==Xg},{bind:Xg});var Zg=yr,Kg=function(t){return Zg[t+"Prototype"]},Qg=Kg("Function").bind,Jg=Or,qg=Qg,tl=Function.prototype,el=function(t){var e=t.bind;return t===tl||Jg(tl,t)&&e===tl.bind?qg:e},il=_n(el);function ol(t,e,i,o){t.beginPath(),t.arc(e,i,o,0,2*Math.PI,!1),t.closePath()}function nl(t,e,i,o,n,r){var s=Math.PI/180;o-2*r<0&&(r=o/2),n-2*r<0&&(r=n/2),t.beginPath(),t.moveTo(e+r,i),t.lineTo(e+o-r,i),t.arc(e+o-r,i+r,r,270*s,360*s,!1),t.lineTo(e+o,i+n-r),t.arc(e+o-r,i+n-r,r,0,90*s,!1),t.lineTo(e+r,i+n),t.arc(e+r,i+n-r,r,90*s,180*s,!1),t.lineTo(e,i+r),t.arc(e+r,i+r,r,180*s,270*s,!1),t.closePath()}function rl(t,e,i,o,n){var r=.5522848,s=o/2*r,a=n/2*r,g=e+o,l=i+n,h=e+o/2,c=i+n/2;t.beginPath(),t.moveTo(e,c),t.bezierCurveTo(e,c-a,h-s,i,h,i),t.bezierCurveTo(h+s,i,g,c-a,g,c),t.bezierCurveTo(g,c+a,h+s,l,h,l),t.bezierCurveTo(h-s,l,e,c+a,e,c),t.closePath()}function sl(t,e,i,o,n){var r=n*(1/3),s=.5522848,a=o/2*s,g=r/2*s,l=e+o,h=i+r,c=e+o/2,u=i+r/2,d=i+(n-r/2),A=i+n;t.beginPath(),t.moveTo(l,u),t.bezierCurveTo(l,u+g,c+a,h,c,h),t.bezierCurveTo(c-a,h,e,u+g,e,u),t.bezierCurveTo(e,u-g,c-a,i,c,i),t.bezierCurveTo(c+a,i,l,u-g,l,u),t.lineTo(l,d),t.bezierCurveTo(l,d+g,c+a,A,c,A),t.bezierCurveTo(c-a,A,e,d+g,e,d),t.lineTo(e,u)}function al(t,e,i,o,n,r){t.beginPath(),t.moveTo(e,i);for(var s=r.length,a=o-e,g=n-i,l=g/a,h=Math.sqrt(a*a+g*g),c=0,u=!0,d=0,A=+r[0];h>=.1;)(A=+r[c++%s])>h&&(A=h),d=Math.sqrt(A*A/(1+l*l)),e+=d=a<0?-d:d,i+=l*d,!0===u?t.lineTo(e,i):t.moveTo(e,i),h-=A,u=!u}var gl={circle:ol,dashedLine:al,database:sl,diamond:function(t,e,i,o){t.beginPath(),t.lineTo(e,i+o),t.lineTo(e+o,i),t.lineTo(e,i-o),t.lineTo(e-o,i),t.closePath()},ellipse:rl,ellipse_vis:rl,hexagon:function(t,e,i,o){t.beginPath();var n=2*Math.PI/6;t.moveTo(e+o,i);for(var r=1;r<6;r++)t.lineTo(e+o*Math.cos(n*r),i+o*Math.sin(n*r));t.closePath()},roundRect:nl,square:function(t,e,i,o){t.beginPath(),t.rect(e-o,i-o,2*o,2*o),t.closePath()},star:function(t,e,i,o){t.beginPath(),i+=.1*(o*=.82);for(var n=0;n<10;n++){var r=n%2==0?1.3*o:.5*o;t.lineTo(e+r*Math.sin(2*n*Math.PI/10),i-r*Math.cos(2*n*Math.PI/10))}t.closePath()},triangle:function(t,e,i,o){t.beginPath(),i+=.275*(o*=1.15);var n=2*o,r=n/2,s=Math.sqrt(3)/6*n,a=Math.sqrt(n*n-r*r);t.moveTo(e,i-(a-s)),t.lineTo(e+r,i+s),t.lineTo(e-r,i+s),t.lineTo(e,i-(a-s)),t.closePath()},triangleDown:function(t,e,i,o){t.beginPath(),i-=.275*(o*=1.15);var n=2*o,r=n/2,s=Math.sqrt(3)/6*n,a=Math.sqrt(n*n-r*r);t.moveTo(e,i+(a-s)),t.lineTo(e+r,i-s),t.lineTo(e-r,i-s),t.lineTo(e,i+(a-s)),t.closePath()}};function ll(t,e){void 0===e&&(e={});var i=e.insertAt;if(t&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css","top"===i&&o.firstChild?o.insertBefore(n,o.firstChild):o.appendChild(n),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}}ll(".vis-overlay {\n  position: absolute;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n\n  /* Must be displayed above for example selected Timeline items */\n  z-index: 10;\n}\n\n.vis-active {\n  box-shadow: 0 0 10px #86d5f8;\n}\n"),ll('/* override some bootstrap styles screwing up the timelines css */\n\n.vis [class*="span"] {\n  min-height: 0;\n  width: auto;\n}\n'),ll("div.vis-color-picker {\n  position: absolute;\n  top: 0px;\n  left: 30px;\n  margin-top: -140px;\n  margin-left: 30px;\n  width: 310px;\n  height: 444px;\n  z-index: 1;\n  padding: 10px;\n  border-radius: 15px;\n  background-color: #ffffff;\n  display: none;\n  box-shadow: rgba(0, 0, 0, 0.5) 0px 0px 10px 0px;\n}\n\ndiv.vis-color-picker div.vis-arrow {\n  position: absolute;\n  top: 147px;\n  left: 5px;\n}\n\ndiv.vis-color-picker div.vis-arrow::after,\ndiv.vis-color-picker div.vis-arrow::before {\n  right: 100%;\n  top: 50%;\n  border: solid transparent;\n  content: \" \";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\ndiv.vis-color-picker div.vis-arrow:after {\n  border-color: rgba(255, 255, 255, 0);\n  border-right-color: #ffffff;\n  border-width: 30px;\n  margin-top: -30px;\n}\n\ndiv.vis-color-picker div.vis-color {\n  position: absolute;\n  width: 289px;\n  height: 289px;\n  cursor: pointer;\n}\n\ndiv.vis-color-picker div.vis-brightness {\n  position: absolute;\n  top: 313px;\n}\n\ndiv.vis-color-picker div.vis-opacity {\n  position: absolute;\n  top: 350px;\n}\n\ndiv.vis-color-picker div.vis-selector {\n  position: absolute;\n  top: 137px;\n  left: 137px;\n  width: 15px;\n  height: 15px;\n  border-radius: 15px;\n  border: 1px solid #ffffff;\n  background: #4c4c4c; /* Old browsers */\n  background: -moz-linear-gradient(\n    top,\n    #4c4c4c 0%,\n    #595959 12%,\n    #666666 25%,\n    #474747 39%,\n    #2c2c2c 50%,\n    #000000 51%,\n    #111111 60%,\n    #2b2b2b 76%,\n    #1c1c1c 91%,\n    #131313 100%\n  ); /* FF3.6+ */\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0%, #4c4c4c),\n    color-stop(12%, #595959),\n    color-stop(25%, #666666),\n    color-stop(39%, #474747),\n    color-stop(50%, #2c2c2c),\n    color-stop(51%, #000000),\n    color-stop(60%, #111111),\n    color-stop(76%, #2b2b2b),\n    color-stop(91%, #1c1c1c),\n    color-stop(100%, #131313)\n  ); /* Chrome,Safari4+ */\n  background: -webkit-linear-gradient(\n    top,\n    #4c4c4c 0%,\n    #595959 12%,\n    #666666 25%,\n    #474747 39%,\n    #2c2c2c 50%,\n    #000000 51%,\n    #111111 60%,\n    #2b2b2b 76%,\n    #1c1c1c 91%,\n    #131313 100%\n  ); /* Chrome10+,Safari5.1+ */\n  background: -o-linear-gradient(\n    top,\n    #4c4c4c 0%,\n    #595959 12%,\n    #666666 25%,\n    #474747 39%,\n    #2c2c2c 50%,\n    #000000 51%,\n    #111111 60%,\n    #2b2b2b 76%,\n    #1c1c1c 91%,\n    #131313 100%\n  ); /* Opera 11.10+ */\n  background: -ms-linear-gradient(\n    top,\n    #4c4c4c 0%,\n    #595959 12%,\n    #666666 25%,\n    #474747 39%,\n    #2c2c2c 50%,\n    #000000 51%,\n    #111111 60%,\n    #2b2b2b 76%,\n    #1c1c1c 91%,\n    #131313 100%\n  ); /* IE10+ */\n  background: linear-gradient(\n    to bottom,\n    #4c4c4c 0%,\n    #595959 12%,\n    #666666 25%,\n    #474747 39%,\n    #2c2c2c 50%,\n    #000000 51%,\n    #111111 60%,\n    #2b2b2b 76%,\n    #1c1c1c 91%,\n    #131313 100%\n  ); /* W3C */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#4c4c4c', endColorstr='#131313',GradientType=0 ); /* IE6-9 */\n}\n\ndiv.vis-color-picker div.vis-new-color {\n  position: absolute;\n  width: 140px;\n  height: 20px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  top: 380px;\n  left: 159px;\n  text-align: right;\n  padding-right: 2px;\n  font-size: 10px;\n  color: rgba(0, 0, 0, 0.4);\n  vertical-align: middle;\n  line-height: 20px;\n}\n\ndiv.vis-color-picker div.vis-initial-color {\n  position: absolute;\n  width: 140px;\n  height: 20px;\n  border: 1px solid rgba(0, 0, 0, 0.1);\n  border-radius: 5px;\n  top: 380px;\n  left: 10px;\n  text-align: left;\n  padding-left: 2px;\n  font-size: 10px;\n  color: rgba(0, 0, 0, 0.4);\n  vertical-align: middle;\n  line-height: 20px;\n}\n\ndiv.vis-color-picker div.vis-label {\n  position: absolute;\n  width: 300px;\n  left: 10px;\n}\n\ndiv.vis-color-picker div.vis-label.vis-brightness {\n  top: 300px;\n}\n\ndiv.vis-color-picker div.vis-label.vis-opacity {\n  top: 338px;\n}\n\ndiv.vis-color-picker div.vis-button {\n  position: absolute;\n  width: 68px;\n  height: 25px;\n  border-radius: 10px;\n  vertical-align: middle;\n  text-align: center;\n  line-height: 25px;\n  top: 410px;\n  border: 2px solid #d9d9d9;\n  background-color: #f7f7f7;\n  cursor: pointer;\n}\n\ndiv.vis-color-picker div.vis-button.vis-cancel {\n  /*border:2px solid #ff4e33;*/\n  /*background-color: #ff7761;*/\n  left: 5px;\n}\ndiv.vis-color-picker div.vis-button.vis-load {\n  /*border:2px solid #a153e6;*/\n  /*background-color: #cb8dff;*/\n  left: 82px;\n}\ndiv.vis-color-picker div.vis-button.vis-apply {\n  /*border:2px solid #4588e6;*/\n  /*background-color: #82b6ff;*/\n  left: 159px;\n}\ndiv.vis-color-picker div.vis-button.vis-save {\n  /*border:2px solid #45e655;*/\n  /*background-color: #6dff7c;*/\n  left: 236px;\n}\n\ndiv.vis-color-picker input.vis-range {\n  width: 290px;\n  height: 20px;\n}\n\n/* TODO: is this redundant?\ndiv.vis-color-picker input.vis-range-brightness {\n  width: 289px !important;\n}\n\n\ndiv.vis-color-picker input.vis-saturation-range {\n  width: 289px !important;\n}*/\n"),ll("div.vis-configuration {\n  position: relative;\n  display: block;\n  float: left;\n  font-size: 12px;\n}\n\ndiv.vis-configuration-wrapper {\n  display: block;\n  width: 700px;\n}\n\ndiv.vis-configuration-wrapper::after {\n  clear: both;\n  content: \"\";\n  display: block;\n}\n\ndiv.vis-configuration.vis-config-option-container {\n  display: block;\n  width: 495px;\n  background-color: #ffffff;\n  border: 2px solid #f7f8fa;\n  border-radius: 4px;\n  margin-top: 20px;\n  left: 10px;\n  padding-left: 5px;\n}\n\ndiv.vis-configuration.vis-config-button {\n  display: block;\n  width: 495px;\n  height: 25px;\n  vertical-align: middle;\n  line-height: 25px;\n  background-color: #f7f8fa;\n  border: 2px solid #ceced0;\n  border-radius: 4px;\n  margin-top: 20px;\n  left: 10px;\n  padding-left: 5px;\n  cursor: pointer;\n  margin-bottom: 30px;\n}\n\ndiv.vis-configuration.vis-config-button.hover {\n  background-color: #4588e6;\n  border: 2px solid #214373;\n  color: #ffffff;\n}\n\ndiv.vis-configuration.vis-config-item {\n  display: block;\n  float: left;\n  width: 495px;\n  height: 25px;\n  vertical-align: middle;\n  line-height: 25px;\n}\n\ndiv.vis-configuration.vis-config-item.vis-config-s2 {\n  left: 10px;\n  background-color: #f7f8fa;\n  padding-left: 5px;\n  border-radius: 3px;\n}\ndiv.vis-configuration.vis-config-item.vis-config-s3 {\n  left: 20px;\n  background-color: #e4e9f0;\n  padding-left: 5px;\n  border-radius: 3px;\n}\ndiv.vis-configuration.vis-config-item.vis-config-s4 {\n  left: 30px;\n  background-color: #cfd8e6;\n  padding-left: 5px;\n  border-radius: 3px;\n}\n\ndiv.vis-configuration.vis-config-header {\n  font-size: 18px;\n  font-weight: bold;\n}\n\ndiv.vis-configuration.vis-config-label {\n  width: 120px;\n  height: 25px;\n  line-height: 25px;\n}\n\ndiv.vis-configuration.vis-config-label.vis-config-s3 {\n  width: 110px;\n}\ndiv.vis-configuration.vis-config-label.vis-config-s4 {\n  width: 100px;\n}\n\ndiv.vis-configuration.vis-config-colorBlock {\n  top: 1px;\n  width: 30px;\n  height: 19px;\n  border: 1px solid #444444;\n  border-radius: 2px;\n  padding: 0px;\n  margin: 0px;\n  cursor: pointer;\n}\n\ninput.vis-configuration.vis-config-checkbox {\n  left: -5px;\n}\n\ninput.vis-configuration.vis-config-rangeinput {\n  position: relative;\n  top: -5px;\n  width: 60px;\n  /*height:13px;*/\n  padding: 1px;\n  margin: 0;\n  pointer-events: none;\n}\n\ninput.vis-configuration.vis-config-range {\n  /*removes default webkit styles*/\n  -webkit-appearance: none;\n\n  /*fix for FF unable to apply focus style bug */\n  border: 0px solid white;\n  background-color: rgba(0, 0, 0, 0);\n\n  /*required for proper track sizing in FF*/\n  width: 300px;\n  height: 20px;\n}\ninput.vis-configuration.vis-config-range::-webkit-slider-runnable-track {\n  width: 300px;\n  height: 5px;\n  background: #dedede; /* Old browsers */\n  background: -moz-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* FF3.6+ */\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0%, #dedede),\n    color-stop(99%, #c8c8c8)\n  ); /* Chrome,Safari4+ */\n  background: -webkit-linear-gradient(\n    top,\n    #dedede 0%,\n    #c8c8c8 99%\n  ); /* Chrome10+,Safari5.1+ */\n  background: -o-linear-gradient(\n    top,\n    #dedede 0%,\n    #c8c8c8 99%\n  ); /* Opera 11.10+ */\n  background: -ms-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* IE10+ */\n  background: linear-gradient(to bottom, #dedede 0%, #c8c8c8 99%); /* W3C */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */\n\n  border: 1px solid #999999;\n  box-shadow: #aaaaaa 0px 0px 3px 0px;\n  border-radius: 3px;\n}\ninput.vis-configuration.vis-config-range::-webkit-slider-thumb {\n  -webkit-appearance: none;\n  border: 1px solid #14334b;\n  height: 17px;\n  width: 17px;\n  border-radius: 50%;\n  background: #3876c2; /* Old browsers */\n  background: -moz-linear-gradient(top, #3876c2 0%, #385380 100%); /* FF3.6+ */\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0%, #3876c2),\n    color-stop(100%, #385380)\n  ); /* Chrome,Safari4+ */\n  background: -webkit-linear-gradient(\n    top,\n    #3876c2 0%,\n    #385380 100%\n  ); /* Chrome10+,Safari5.1+ */\n  background: -o-linear-gradient(\n    top,\n    #3876c2 0%,\n    #385380 100%\n  ); /* Opera 11.10+ */\n  background: -ms-linear-gradient(top, #3876c2 0%, #385380 100%); /* IE10+ */\n  background: linear-gradient(to bottom, #3876c2 0%, #385380 100%); /* W3C */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#3876c2', endColorstr='#385380',GradientType=0 ); /* IE6-9 */\n  box-shadow: #111927 0px 0px 1px 0px;\n  margin-top: -7px;\n}\ninput.vis-configuration.vis-config-range:focus {\n  outline: none;\n}\ninput.vis-configuration.vis-config-range:focus::-webkit-slider-runnable-track {\n  background: #9d9d9d; /* Old browsers */\n  background: -moz-linear-gradient(top, #9d9d9d 0%, #c8c8c8 99%); /* FF3.6+ */\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0%, #9d9d9d),\n    color-stop(99%, #c8c8c8)\n  ); /* Chrome,Safari4+ */\n  background: -webkit-linear-gradient(\n    top,\n    #9d9d9d 0%,\n    #c8c8c8 99%\n  ); /* Chrome10+,Safari5.1+ */\n  background: -o-linear-gradient(\n    top,\n    #9d9d9d 0%,\n    #c8c8c8 99%\n  ); /* Opera 11.10+ */\n  background: -ms-linear-gradient(top, #9d9d9d 0%, #c8c8c8 99%); /* IE10+ */\n  background: linear-gradient(to bottom, #9d9d9d 0%, #c8c8c8 99%); /* W3C */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#9d9d9d', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */\n}\n\ninput.vis-configuration.vis-config-range::-moz-range-track {\n  width: 300px;\n  height: 10px;\n  background: #dedede; /* Old browsers */\n  background: -moz-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* FF3.6+ */\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0%, #dedede),\n    color-stop(99%, #c8c8c8)\n  ); /* Chrome,Safari4+ */\n  background: -webkit-linear-gradient(\n    top,\n    #dedede 0%,\n    #c8c8c8 99%\n  ); /* Chrome10+,Safari5.1+ */\n  background: -o-linear-gradient(\n    top,\n    #dedede 0%,\n    #c8c8c8 99%\n  ); /* Opera 11.10+ */\n  background: -ms-linear-gradient(top, #dedede 0%, #c8c8c8 99%); /* IE10+ */\n  background: linear-gradient(to bottom, #dedede 0%, #c8c8c8 99%); /* W3C */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#dedede', endColorstr='#c8c8c8',GradientType=0 ); /* IE6-9 */\n\n  border: 1px solid #999999;\n  box-shadow: #aaaaaa 0px 0px 3px 0px;\n  border-radius: 3px;\n}\ninput.vis-configuration.vis-config-range::-moz-range-thumb {\n  border: none;\n  height: 16px;\n  width: 16px;\n\n  border-radius: 50%;\n  background: #385380;\n}\n\n/*hide the outline behind the border*/\ninput.vis-configuration.vis-config-range:-moz-focusring {\n  outline: 1px solid white;\n  outline-offset: -1px;\n}\n\ninput.vis-configuration.vis-config-range::-ms-track {\n  width: 300px;\n  height: 5px;\n\n  /*remove bg colour from the track, we'll use ms-fill-lower and ms-fill-upper instead */\n  background: transparent;\n\n  /*leave room for the larger thumb to overflow with a transparent border */\n  border-color: transparent;\n  border-width: 6px 0;\n\n  /*remove default tick marks*/\n  color: transparent;\n}\ninput.vis-configuration.vis-config-range::-ms-fill-lower {\n  background: #777;\n  border-radius: 10px;\n}\ninput.vis-configuration.vis-config-range::-ms-fill-upper {\n  background: #ddd;\n  border-radius: 10px;\n}\ninput.vis-configuration.vis-config-range::-ms-thumb {\n  border: none;\n  height: 16px;\n  width: 16px;\n  border-radius: 50%;\n  background: #385380;\n}\ninput.vis-configuration.vis-config-range:focus::-ms-fill-lower {\n  background: #888;\n}\ninput.vis-configuration.vis-config-range:focus::-ms-fill-upper {\n  background: #ccc;\n}\n\n.vis-configuration-popup {\n  position: absolute;\n  background: rgba(57, 76, 89, 0.85);\n  border: 2px solid #f2faff;\n  line-height: 30px;\n  height: 30px;\n  width: 150px;\n  text-align: center;\n  color: #ffffff;\n  font-size: 14px;\n  border-radius: 4px;\n  -webkit-transition: opacity 0.3s ease-in-out;\n  -moz-transition: opacity 0.3s ease-in-out;\n  transition: opacity 0.3s ease-in-out;\n}\n.vis-configuration-popup:after,\n.vis-configuration-popup:before {\n  left: 100%;\n  top: 50%;\n  border: solid transparent;\n  content: \" \";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.vis-configuration-popup:after {\n  border-color: rgba(136, 183, 213, 0);\n  border-left-color: rgba(57, 76, 89, 0.85);\n  border-width: 8px;\n  margin-top: -8px;\n}\n.vis-configuration-popup:before {\n  border-color: rgba(194, 225, 245, 0);\n  border-left-color: #f2faff;\n  border-width: 12px;\n  margin-top: -12px;\n}\n"),ll("div.vis-tooltip {\n  position: absolute;\n  visibility: hidden;\n  padding: 5px;\n  white-space: nowrap;\n\n  font-family: verdana;\n  font-size: 14px;\n  color: #000000;\n  background-color: #f5f4ed;\n\n  -moz-border-radius: 3px;\n  -webkit-border-radius: 3px;\n  border-radius: 3px;\n  border: 1px solid #808074;\n\n  box-shadow: 3px 3px 10px rgba(0, 0, 0, 0.2);\n  pointer-events: none;\n\n  z-index: 5;\n}\n");var hl={exports:{}};!function(t){function e(t){if(t)return function(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}(t)}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},e.prototype.once=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,o=this._callbacks["$"+t];if(!o)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<o.length;n++)if((i=o[n])===e||i.fn===e){o.splice(n,1);break}return 0===o.length&&delete this._callbacks["$"+t],this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),i=this._callbacks["$"+t],o=1;o<arguments.length;o++)e[o-1]=arguments[o];if(i){o=0;for(var n=(i=i.slice(0)).length;o<n;++o)i[o].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}}(hl);var cl=_n(hl.exports),ul={};ul[Ds("toStringTag")]="z";var dl,Al,Il,Cl="[object z]"===String(ul),pl=Cl,fl=Xn,vl=Hn,ml=Ds("toStringTag"),bl=Object,yl="Arguments"===vl(function(){return arguments}()),_l=pl?vl:function(t){var e,i,o;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(i=function(t,e){try{return t[e]}catch(t){}}(e=bl(t),ml))?i:yl?vl(e):"Object"===(o=vl(e))&&fl(e.callee)?"Arguments":o},Tl=_l,El=String,wl=function(t){if("Symbol"===Tl(t))throw new TypeError("Cannot convert a Symbol value to a string");return El(t)},kl=$n,Ol=Qa,Sl=wl,Rl=Ir,xl=kl("".charAt),Dl=kl("".charCodeAt),Ml=kl("".slice),Nl=function(t){return function(e,i){var o,n,r=Sl(Rl(e)),s=Ol(i),a=r.length;return s<0||s>=a?t?"":void 0:(o=Dl(r,s))<55296||o>56319||s+1===a||(n=Dl(r,s+1))<56320||n>57343?t?xl(r,s):o:t?Ml(r,s,s+2):n-56320+(o-55296<<10)+65536}},Ll={codeAt:Nl(!1),charAt:Nl(!0)},Pl=Xn,$l=En.WeakMap,Bl=Pl($l)&&/native code/.test(String($l)),Fl=_s,zl=us("keys"),Hl=function(t){return zl[t]||(zl[t]=Fl(t))},Gl=Bl,Ul=En,Vl=br,Wl=La,jl=fs,Yl=hs,Xl=Hl,Zl=hg,Kl="Object already initialized",Ql=Ul.TypeError,Jl=Ul.WeakMap;if(Gl||Yl.state){var ql=Yl.state||(Yl.state=new Jl);ql.get=ql.get,ql.has=ql.has,ql.set=ql.set,dl=function(t,e){if(ql.has(t))throw new Ql(Kl);return e.facade=t,ql.set(t,e),e},Al=function(t){return ql.get(t)||{}},Il=function(t){return ql.has(t)}}else{var th=Xl("state");Zl[th]=!0,dl=function(t,e){if(jl(t,th))throw new Ql(Kl);return e.facade=t,Wl(t,th,e),e},Al=function(t){return jl(t,th)?t[th]:{}},Il=function(t){return jl(t,th)}}var eh={set:dl,get:Al,has:Il,enforce:function(t){return Il(t)?Al(t):dl(t,{})},getterFor:function(t){return function(e){var i;if(!Vl(e)||(i=Al(e)).type!==t)throw new Ql("Incompatible receiver, "+t+" required");return i}}},ih=Kn,oh=fs,nh=Function.prototype,rh=ih&&Object.getOwnPropertyDescriptor,sh=oh(nh,"name"),ah={EXISTS:sh,PROPER:sh&&"something"===function(){}.name,CONFIGURABLE:sh&&(!ih||ih&&rh(nh,"name").configurable)},gh={},lh=Kn,hh=pa,ch=Ca,uh=ba,dh=fr,Ah=mg;gh.f=lh&&!hh?Object.defineProperties:function(t,e){uh(t);for(var i,o=dh(e),n=Ah(e),r=n.length,s=0;r>s;)ch.f(t,i=n[s++],o[i]);return t};var Ih,Ch=kr("document","documentElement"),ph=ba,fh=gh,vh=pg,mh=hg,bh=Ch,yh=Ws,_h="prototype",Th="script",Eh=Hl("IE_PROTO"),wh=function(){},kh=function(t){return"<"+Th+">"+t+"</"+Th+">"},Oh=function(t){t.write(kh("")),t.close();var e=t.parentWindow.Object;return t=null,e},Sh=function(){try{Ih=new ActiveXObject("htmlfile")}catch(t){}var t,e,i;Sh="undefined"!=typeof document?document.domain&&Ih?Oh(Ih):(e=yh("iframe"),i="java"+Th+":",e.style.display="none",bh.appendChild(e),e.src=String(i),(t=e.contentWindow.document).open(),t.write(kh("document.F=Object")),t.close(),t.F):Oh(Ih);for(var o=vh.length;o--;)delete Sh[_h][vh[o]];return Sh()};mh[Eh]=!0;var Rh,xh,Dh,Mh=Object.create||function(t,e){var i;return null!==t?(wh[_h]=ph(t),i=new wh,wh[_h]=null,i[Eh]=t):i=Sh(),void 0===e?i:fh.f(i,e)},Nh=!wn((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Lh=fs,Ph=Xn,$h=Is,Bh=Nh,Fh=Hl("IE_PROTO"),zh=Object,Hh=zh.prototype,Gh=Bh?zh.getPrototypeOf:function(t){var e=$h(t);if(Lh(e,Fh))return e[Fh];var i=e.constructor;return Ph(i)&&e instanceof i?i.prototype:e instanceof zh?Hh:null},Uh=La,Vh=function(t,e,i,o){return o&&o.enumerable?t[e]=i:Uh(t,e,i),t},Wh=wn,jh=Xn,Yh=br,Xh=Mh,Zh=Gh,Kh=Vh,Qh=Ds("iterator"),Jh=!1;[].keys&&("next"in(Dh=[].keys())?(xh=Zh(Zh(Dh)))!==Object.prototype&&(Rh=xh):Jh=!0);var qh=!Yh(Rh)||Wh((function(){var t={};return Rh[Qh].call(t)!==t}));jh((Rh=qh?{}:Xh(Rh))[Qh])||Kh(Rh,Qh,(function(){return this}));var tc={IteratorPrototype:Rh,BUGGY_SAFARI_ITERATORS:Jh},ec=_l,ic=Cl?{}.toString:function(){return"[object "+ec(this)+"]"},oc=Cl,nc=Ca.f,rc=La,sc=fs,ac=ic,gc=Ds("toStringTag"),lc=function(t,e,i,o){if(t){var n=i?t:t.prototype;sc(n,gc)||nc(n,gc,{configurable:!0,value:e}),o&&!oc&&rc(n,"toString",ac)}},hc={},cc=tc.IteratorPrototype,uc=Mh,dc=sr,Ac=lc,Ic=hc,Cc=function(){return this},pc=$n,fc=Jr,vc=Xn,mc=String,bc=TypeError,yc=ba,_c=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,i={};try{(t=function(t,e,i){try{return pc(fc(Object.getOwnPropertyDescriptor(t,e)[i]))}catch(t){}}(Object.prototype,"__proto__","set"))(i,[]),e=i instanceof Array}catch(t){}return function(i,o){return yc(i),function(t){if("object"==typeof t||vc(t))return t;throw new bc("Can't set "+mc(t)+" as a prototype")}(o),e?t(i,o):i.__proto__=o,i}}():void 0),Tc=Ya,Ec=qn,wc=Gh,kc=lc,Oc=Vh,Sc=hc,Rc=ah.PROPER,xc=tc.BUGGY_SAFARI_ITERATORS,Dc=Ds("iterator"),Mc="keys",Nc="values",Lc="entries",Pc=function(){return this},$c=function(t,e,i,o,n,r,s){!function(t,e,i,o){var n=e+" Iterator";t.prototype=uc(cc,{next:dc(+!o,i)}),Ac(t,n,!1,!0),Ic[n]=Cc}(i,e,o);var a,g,l,h=function(t){if(t===n&&I)return I;if(!xc&&t&&t in d)return d[t];switch(t){case Mc:case Nc:case Lc:return function(){return new i(this,t)}}return function(){return new i(this)}},c=e+" Iterator",u=!1,d=t.prototype,A=d[Dc]||d["@@iterator"]||n&&d[n],I=!xc&&A||h(n),C="Array"===e&&d.entries||A;if(C&&(a=wc(C.call(new t)))!==Object.prototype&&a.next&&(kc(a,c,!0,!0),Sc[c]=Pc),Rc&&n===Nc&&A&&A.name!==Nc&&(u=!0,I=function(){return Ec(A,this)}),n)if(g={values:h(Nc),keys:r?I:h(Mc),entries:h(Lc)},s)for(l in g)(xc||u||!(l in d))&&Oc(d,l,g[l]);else Tc({target:e,proto:!0,forced:xc||u},g);return s&&d[Dc]!==I&&Oc(d,Dc,I,{name:n}),Sc[e]=I,g},Bc=function(t,e){return{value:t,done:e}},Fc=Ll.charAt,zc=wl,Hc=eh,Gc=$c,Uc=Bc,Vc="String Iterator",Wc=Hc.set,jc=Hc.getterFor(Vc);Gc(String,"String",(function(t){Wc(this,{type:Vc,string:zc(t),index:0})}),(function(){var t,e=jc(this),i=e.string,o=e.index;return o>=i.length?Uc(void 0,!0):(t=Fc(i,o),e.index+=t.length,Uc(t,!1))}));var Yc=qn,Xc=ba,Zc=es,Kc=function(t,e,i){var o,n;Xc(t);try{if(!(o=Zc(t,"return"))){if("throw"===e)throw i;return i}o=Yc(o,t)}catch(t){n=!0,o=t}if("throw"===e)throw i;if(n)throw o;return Xc(o),i},Qc=ba,Jc=Kc,qc=hc,tu=Ds("iterator"),eu=Array.prototype,iu=function(t){return void 0!==t&&(qc.Array===t||eu[tu]===t)},ou=Xn,nu=hs,ru=$n(Function.toString);ou(nu.inspectSource)||(nu.inspectSource=function(t){return ru(t)});var su=nu.inspectSource,au=$n,gu=wn,lu=Xn,hu=_l,cu=su,uu=function(){},du=[],Au=kr("Reflect","construct"),Iu=/^\s*(?:class|function)\b/,Cu=au(Iu.exec),pu=!Iu.test(uu),fu=function(t){if(!lu(t))return!1;try{return Au(uu,du,t),!0}catch(t){return!1}},vu=function(t){if(!lu(t))return!1;switch(hu(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return pu||!!Cu(Iu,cu(t))}catch(t){return!0}};vu.sham=!0;var mu=!Au||gu((function(){var t;return fu(fu.call)||!fu(Object)||!fu((function(){t=!0}))||t}))?vu:fu,bu=Hs,yu=Ca,_u=sr,Tu=function(t,e,i){var o=bu(e);o in t?yu.f(t,o,_u(0,i)):t[o]=i},Eu=_l,wu=es,ku=ur,Ou=hc,Su=Ds("iterator"),Ru=function(t){if(!ku(t))return wu(t,Su)||wu(t,"@@iterator")||Ou[Eu(t)]},xu=qn,Du=Jr,Mu=ba,Nu=Xr,Lu=Ru,Pu=TypeError,$u=function(t,e){var i=arguments.length<2?Lu(t):e;if(Du(i))return Mu(xu(i,t));throw new Pu(Nu(t)+" is not iterable")},Bu=Ia,Fu=qn,zu=Is,Hu=function(t,e,i,o){try{return o?e(Qc(i)[0],i[1]):e(i)}catch(e){Jc(t,"throw",e)}},Gu=iu,Uu=mu,Vu=ng,Wu=Tu,ju=$u,Yu=Ru,Xu=Array,Zu=Ds("iterator"),Ku=!1;try{var Qu=0,Ju={next:function(){return{done:!!Qu++}},return:function(){Ku=!0}};Ju[Zu]=function(){return this},Array.from(Ju,(function(){throw 2}))}catch(t){}var qu=function(t,e){try{if(!e&&!Ku)return!1}catch(t){return!1}var i=!1;try{var o={};o[Zu]=function(){return{next:function(){return{done:i=!0}}}},t(o)}catch(t){}return i};Ya({target:"Array",stat:!0,forced:!qu((function(t){Array.from(t)}))},{from:function(t){var e=zu(t),i=Uu(this),o=arguments.length,n=o>1?arguments[1]:void 0,r=void 0!==n;r&&(n=Bu(n,o>2?arguments[2]:void 0));var s,a,g,l,h,c,u=Yu(e),d=0;if(!u||this===Xu&&Gu(u))for(s=Vu(e),a=i?new this(s):Xu(s);s>d;d++)c=r?n(e[d],d):e[d],Wu(a,d,c);else for(h=(l=ju(e,u)).next,a=i?new this:[];!(g=Fu(h,l)).done;d++)c=r?Hu(l,n,[g.value,d],!0):g.value,Wu(a,d,c);return a.length=d,a}});var td=yr.Array.from,ed=_n(td),id=fr,od=hc,nd=eh;Ca.f;var rd=$c,sd=Bc,ad="Array Iterator",gd=nd.set,ld=nd.getterFor(ad);rd(Array,"Array",(function(t,e){gd(this,{type:ad,target:id(t),index:0,kind:e})}),(function(){var t=ld(this),e=t.target,i=t.kind,o=t.index++;if(!e||o>=e.length)return t.target=void 0,sd(void 0,!0);switch(i){case"keys":return sd(o,!1);case"values":return sd(e[o],!1)}return sd([o,e[o]],!1)}),"values"),od.Arguments=od.Array;var hd=Ru,cd=En,ud=_l,dd=La,Ad=hc,Id=Ds("toStringTag");for(var Cd in{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var pd=cd[Cd],fd=pd&&pd.prototype;fd&&ud(fd)!==Id&&dd(fd,Id,Cd),Ad[Cd]=Ad.Array}var vd=hd,md=_n(vd),bd=_n(vd);function yd(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var _d={exports:{}},Td=Ya,Ed=Kn,wd=Ca.f;Td({target:"Object",stat:!0,forced:Object.defineProperty!==wd,sham:!Ed},{defineProperty:wd});var kd=yr.Object,Od=_d.exports=function(t,e,i){return kd.defineProperty(t,e,i)};kd.defineProperty.sham&&(Od.sham=!0);var Sd=_d.exports,Rd=Sd,xd=_n(Rd),Dd=Hn,Md=Array.isArray||function(t){return"Array"===Dd(t)},Nd=TypeError,Ld=function(t){if(t>9007199254740991)throw Nd("Maximum allowed index exceeded");return t},Pd=Md,$d=mu,Bd=br,Fd=Ds("species"),zd=Array,Hd=function(t,e){return new(function(t){var e;return Pd(t)&&(e=t.constructor,($d(e)&&(e===zd||Pd(e.prototype))||Bd(e)&&null===(e=e[Fd]))&&(e=void 0)),void 0===e?zd:e}(t))(0===e?0:e)},Gd=wn,Ud=Pr,Vd=Ds("species"),Wd=function(t){return Ud>=51||!Gd((function(){var e=[];return(e.constructor={})[Vd]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},jd=Ya,Yd=wn,Xd=Md,Zd=br,Kd=Is,Qd=ng,Jd=Ld,qd=Tu,tA=Hd,eA=Wd,iA=Pr,oA=Ds("isConcatSpreadable"),nA=iA>=51||!Yd((function(){var t=[];return t[oA]=!1,t.concat()[0]!==t})),rA=function(t){if(!Zd(t))return!1;var e=t[oA];return void 0!==e?!!e:Xd(t)};jd({target:"Array",proto:!0,arity:1,forced:!nA||!eA("concat")},{concat:function(t){var e,i,o,n,r,s=Kd(this),a=tA(s,0),g=0;for(e=-1,o=arguments.length;e<o;e++)if(rA(r=-1===e?s:arguments[e]))for(n=Qd(r),Jd(g+n),i=0;i<n;i++,g++)i in r&&qd(a,g,r[i]);else Jd(g+1),qd(a,g++,r);return a.length=g,a}});var sA={},aA=Cg,gA=pg.concat("length","prototype");sA.f=Object.getOwnPropertyNames||function(t){return aA(t,gA)};var lA={},hA=eg,cA=ng,uA=Tu,dA=Array,AA=Math.max,IA=function(t,e,i){for(var o=cA(t),n=hA(e,o),r=hA(void 0===i?o:i,o),s=dA(AA(r-n,0)),a=0;n<r;n++,a++)uA(s,a,t[n]);return s.length=a,s},CA=Hn,pA=fr,fA=sA.f,vA=IA,mA="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];lA.f=function(t){return mA&&"Window"===CA(t)?function(t){try{return fA(t)}catch(t){return vA(mA)}}(t):fA(pA(t))};var bA=Ca,yA=function(t,e,i){return bA.f(t,e,i)},_A={},TA=Ds;_A.f=TA;var EA=yr,wA=fs,kA=_A,OA=Ca.f,SA=function(t){var e=EA.Symbol||(EA.Symbol={});wA(e,t)||OA(e,t,{value:kA.f(t)})},RA=qn,xA=kr,DA=Ds,MA=Vh,NA=function(){var t=xA("Symbol"),e=t&&t.prototype,i=e&&e.valueOf,o=DA("toPrimitive");e&&!e[o]&&MA(e,o,(function(t){return RA(i,this)}),{arity:1})},LA=Ia,PA=cr,$A=Is,BA=ng,FA=Hd,zA=$n([].push),HA=function(t){var e=1===t,i=2===t,o=3===t,n=4===t,r=6===t,s=7===t,a=5===t||r;return function(g,l,h,c){for(var u,d,A=$A(g),I=PA(A),C=LA(l,h),p=BA(I),f=0,v=c||FA,m=e?v(g,p):i||s?v(g,0):void 0;p>f;f++)if((a||f in I)&&(d=C(u=I[f],f,A),t))if(e)m[f]=d;else if(d)switch(t){case 3:return!0;case 5:return u;case 6:return f;case 2:zA(m,u)}else switch(t){case 4:return!1;case 7:zA(m,u)}return r?-1:o||n?n:m}},GA={forEach:HA(0),map:HA(1),filter:HA(2),some:HA(3),every:HA(4),find:HA(5),findIndex:HA(6),filterReject:HA(7)},UA=Ya,VA=En,WA=qn,jA=$n,YA=Kn,XA=zr,ZA=wn,KA=fs,QA=Or,JA=ba,qA=fr,tI=Hs,eI=wl,iI=sr,oI=Mh,nI=mg,rI=sA,sI=lA,aI=bg,gI=Zn,lI=Ca,hI=gh,cI=tr,uI=Vh,dI=yA,AI=us,II=hg,CI=_s,pI=Ds,fI=_A,vI=SA,mI=NA,bI=lc,yI=eh,_I=GA.forEach,TI=Hl("hidden"),EI="Symbol",wI="prototype",kI=yI.set,OI=yI.getterFor(EI),SI=Object[wI],RI=VA.Symbol,xI=RI&&RI[wI],DI=VA.RangeError,MI=VA.TypeError,NI=VA.QObject,LI=gI.f,PI=lI.f,$I=sI.f,BI=cI.f,FI=jA([].push),zI=AI("symbols"),HI=AI("op-symbols"),GI=AI("wks"),UI=!NI||!NI[wI]||!NI[wI].findChild,VI=function(t,e,i){var o=LI(SI,e);o&&delete SI[e],PI(t,e,i),o&&t!==SI&&PI(SI,e,o)},WI=YA&&ZA((function(){return 7!==oI(PI({},"a",{get:function(){return PI(this,"a",{value:7}).a}})).a}))?VI:PI,jI=function(t,e){var i=zI[t]=oI(xI);return kI(i,{type:EI,tag:t,description:e}),YA||(i.description=e),i},YI=function(t,e,i){t===SI&&YI(HI,e,i),JA(t);var o=tI(e);return JA(i),KA(zI,o)?(i.enumerable?(KA(t,TI)&&t[TI][o]&&(t[TI][o]=!1),i=oI(i,{enumerable:iI(0,!1)})):(KA(t,TI)||PI(t,TI,iI(1,{})),t[TI][o]=!0),WI(t,o,i)):PI(t,o,i)},XI=function(t,e){JA(t);var i=qA(e),o=nI(i).concat(JI(i));return _I(o,(function(e){YA&&!WA(ZI,i,e)||YI(t,e,i[e])})),t},ZI=function(t){var e=tI(t),i=WA(BI,this,e);return!(this===SI&&KA(zI,e)&&!KA(HI,e))&&(!(i||!KA(this,e)||!KA(zI,e)||KA(this,TI)&&this[TI][e])||i)},KI=function(t,e){var i=qA(t),o=tI(e);if(i!==SI||!KA(zI,o)||KA(HI,o)){var n=LI(i,o);return!n||!KA(zI,o)||KA(i,TI)&&i[TI][o]||(n.enumerable=!0),n}},QI=function(t){var e=$I(qA(t)),i=[];return _I(e,(function(t){KA(zI,t)||KA(II,t)||FI(i,t)})),i},JI=function(t){var e=t===SI,i=$I(e?HI:qA(t)),o=[];return _I(i,(function(t){!KA(zI,t)||e&&!KA(SI,t)||FI(o,zI[t])})),o};XA||(uI(xI=(RI=function(){if(QA(xI,this))throw new MI("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?eI(arguments[0]):void 0,e=CI(t),i=function(t){this===SI&&WA(i,HI,t),KA(this,TI)&&KA(this[TI],e)&&(this[TI][e]=!1);var o=iI(1,t);try{WI(this,e,o)}catch(t){if(!(t instanceof DI))throw t;VI(this,e,o)}};return YA&&UI&&WI(SI,e,{configurable:!0,set:i}),jI(e,t)})[wI],"toString",(function(){return OI(this).tag})),uI(RI,"withoutSetter",(function(t){return jI(CI(t),t)})),cI.f=ZI,lI.f=YI,hI.f=XI,gI.f=KI,rI.f=sI.f=QI,aI.f=JI,fI.f=function(t){return jI(pI(t),t)},YA&&dI(xI,"description",{configurable:!0,get:function(){return OI(this).description}})),UA({global:!0,constructor:!0,wrap:!0,forced:!XA,sham:!XA},{Symbol:RI}),_I(nI(GI),(function(t){vI(t)})),UA({target:EI,stat:!0,forced:!XA},{useSetter:function(){UI=!0},useSimple:function(){UI=!1}}),UA({target:"Object",stat:!0,forced:!XA,sham:!YA},{create:function(t,e){return void 0===e?oI(t):XI(oI(t),e)},defineProperty:YI,defineProperties:XI,getOwnPropertyDescriptor:KI}),UA({target:"Object",stat:!0,forced:!XA},{getOwnPropertyNames:QI}),mI(),bI(RI,EI),II[TI]=!0;var qI=zr&&!!Symbol.for&&!!Symbol.keyFor,tC=Ya,eC=kr,iC=fs,oC=wl,nC=us,rC=qI,sC=nC("string-to-symbol-registry"),aC=nC("symbol-to-string-registry");tC({target:"Symbol",stat:!0,forced:!rC},{for:function(t){var e=oC(t);if(iC(sC,e))return sC[e];var i=eC("Symbol")(e);return sC[e]=i,aC[i]=e,i}});var gC=Ya,lC=fs,hC=jr,cC=Xr,uC=qI,dC=us("symbol-to-string-registry");gC({target:"Symbol",stat:!0,forced:!uC},{keyFor:function(t){if(!hC(t))throw new TypeError(cC(t)+" is not a symbol");if(lC(dC,t))return dC[t]}});var AC=Md,IC=Xn,CC=Hn,pC=wl,fC=$n([].push),vC=Ya,mC=kr,bC=Dn,yC=qn,_C=$n,TC=wn,EC=Xn,wC=jr,kC=Pg,OC=zr,SC=String,RC=mC("JSON","stringify"),xC=_C(/./.exec),DC=_C("".charAt),MC=_C("".charCodeAt),NC=_C("".replace),LC=_C(1..toString),PC=/[\uD800-\uDFFF]/g,$C=/^[\uD800-\uDBFF]$/,BC=/^[\uDC00-\uDFFF]$/,FC=!OC||TC((function(){var t=mC("Symbol")("stringify detection");return"[null]"!==RC([t])||"{}"!==RC({a:t})||"{}"!==RC(Object(t))})),zC=TC((function(){return'"\\udf06\\ud834"'!==RC("\udf06\ud834")||'"\\udead"'!==RC("\udead")})),HC=function(t,e){var i=kC(arguments),o=function(t){if(IC(t))return t;if(AC(t)){for(var e=t.length,i=[],o=0;o<e;o++){var n=t[o];"string"==typeof n?fC(i,n):"number"!=typeof n&&"Number"!==CC(n)&&"String"!==CC(n)||fC(i,pC(n))}var r=i.length,s=!0;return function(t,e){if(s)return s=!1,e;if(AC(this))return e;for(var o=0;o<r;o++)if(i[o]===t)return e}}}(e);if(EC(o)||void 0!==t&&!wC(t))return i[1]=function(t,e){if(EC(o)&&(e=yC(o,this,SC(t),e)),!wC(e))return e},bC(RC,null,i)},GC=function(t,e,i){var o=DC(i,e-1),n=DC(i,e+1);return xC($C,t)&&!xC(BC,n)||xC(BC,t)&&!xC($C,o)?"\\u"+LC(MC(t,0),16):t};RC&&vC({target:"JSON",stat:!0,arity:3,forced:FC||zC},{stringify:function(t,e,i){var o=kC(arguments),n=bC(FC?HC:RC,null,o);return zC&&"string"==typeof n?NC(n,PC,GC):n}});var UC=bg,VC=Is;Ya({target:"Object",stat:!0,forced:!zr||wn((function(){UC.f(1)}))},{getOwnPropertySymbols:function(t){var e=UC.f;return e?e(VC(t)):[]}}),SA("asyncIterator"),SA("hasInstance"),SA("isConcatSpreadable"),SA("iterator"),SA("match"),SA("matchAll"),SA("replace"),SA("search"),SA("species"),SA("split");var WC=NA;SA("toPrimitive"),WC();var jC=kr,YC=lc;SA("toStringTag"),YC(jC("Symbol"),"Symbol"),SA("unscopables"),lc(En.JSON,"JSON",!0);var XC=yr.Symbol,ZC=Ds,KC=Ca.f,QC=ZC("metadata"),JC=Function.prototype;void 0===JC[QC]&&KC(JC,QC,{value:null}),SA("asyncDispose"),SA("dispose"),SA("metadata");var qC=XC,tp=$n,ep=kr("Symbol"),ip=ep.keyFor,op=tp(ep.prototype.valueOf),np=ep.isRegisteredSymbol||function(t){try{return void 0!==ip(op(t))}catch(t){return!1}};Ya({target:"Symbol",stat:!0},{isRegisteredSymbol:np});for(var rp=us,sp=kr,ap=$n,gp=jr,lp=Ds,hp=sp("Symbol"),cp=hp.isWellKnownSymbol,up=sp("Object","getOwnPropertyNames"),dp=ap(hp.prototype.valueOf),Ap=rp("wks"),Ip=0,Cp=up(hp),pp=Cp.length;Ip<pp;Ip++)try{var fp=Cp[Ip];gp(hp[fp])&&lp(fp)}catch(t){}var vp=function(t){if(cp&&cp(t))return!0;try{for(var e=dp(t),i=0,o=up(Ap),n=o.length;i<n;i++)if(Ap[o[i]]==e)return!0}catch(t){}return!1};Ya({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:vp}),SA("matcher"),SA("observable"),Ya({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:np}),Ya({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:vp}),SA("metadataKey"),SA("patternMatch"),SA("replaceAll");var mp=qC,bp=_n(mp),yp=_A.f("iterator"),_p=yp,Tp=_n(_p);function Ep(t){return Ep="function"==typeof bp&&"symbol"==typeof Tp?function(t){return typeof t}:function(t){return t&&"function"==typeof bp&&t.constructor===bp&&t!==bp.prototype?"symbol":typeof t},Ep(t)}var wp=_n(_A.f("toPrimitive"));function kp(t){var e=function(t){if("object"!==Ep(t)||null===t)return t;var e=t[wp];if(void 0!==e){var i=e.call(t,"string");if("object"!==Ep(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===Ep(e)?e:String(e)}function Op(t,e){for(var i=0;i<e.length;i++){var o=e[i];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),xd(t,kp(o.key),o)}}function Sp(t,e,i){return e&&Op(t.prototype,e),i&&Op(t,i),xd(t,"prototype",{writable:!1}),t}Ya({target:"Array",stat:!0},{isArray:Md});var Rp=yr.Array.isArray,xp=_n(Rp),Dp=Kn,Mp=Md,Np=TypeError,Lp=Object.getOwnPropertyDescriptor,Pp=Dp&&!function(){if(void 0!==this)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(t){return t instanceof TypeError}}()?function(t,e){if(Mp(t)&&!Lp(t,"length").writable)throw new Np("Cannot set read only .length");return t.length=e}:function(t,e){return t.length=e},$p=Is,Bp=ng,Fp=Pp,zp=Ld;Ya({target:"Array",proto:!0,arity:1,forced:wn((function(){return 4294967297!==[].push.call({length:4294967296},1)}))||!function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(t){return t instanceof TypeError}}()},{push:function(t){var e=$p(this),i=Bp(e),o=arguments.length;zp(i+o);for(var n=0;n<o;n++)e[i]=arguments[n],i++;return Fp(e,i),i}});var Hp=Kg("Array").push,Gp=Or,Up=Hp,Vp=Array.prototype,Wp=function(t){var e=t.push;return t===Vp||Gp(Vp,t)&&e===Vp.push?Up:e},jp=_n(Wp),Yp=Ya,Xp=Md,Zp=mu,Kp=br,Qp=eg,Jp=ng,qp=fr,tf=Tu,ef=Ds,of=Pg,nf=Wd("slice"),rf=ef("species"),sf=Array,af=Math.max;Yp({target:"Array",proto:!0,forced:!nf},{slice:function(t,e){var i,o,n,r=qp(this),s=Jp(r),a=Qp(t,s),g=Qp(void 0===e?s:e,s);if(Xp(r)&&(i=r.constructor,(Zp(i)&&(i===sf||Xp(i.prototype))||Kp(i)&&null===(i=i[rf]))&&(i=void 0),i===sf||void 0===i))return of(r,a,g);for(o=new(void 0===i?sf:i)(af(g-a,0)),n=0;a<g;a++,n++)a in r&&tf(o,n,r[a]);return o.length=n,o}});var gf=Kg("Array").slice,lf=Or,hf=gf,cf=Array.prototype,uf=function(t){var e=t.slice;return t===cf||lf(cf,t)&&e===cf.slice?hf:e},df=uf,Af=_n(df),If=_n(td);function Cf(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function pf(t,e){var i;if(t){if("string"==typeof t)return Cf(t,e);var o=Af(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?If(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?Cf(t,e):void 0}}function ff(t,e){return function(t){if(xp(t))return t}(t)||function(t,e){var i=null==t?null:void 0!==bp&&md(t)||t["@@iterator"];if(null!=i){var o,n,r,s,a=[],g=!0,l=!1;try{if(r=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;g=!1}else for(;!(g=(o=r.call(i)).done)&&(jp(a).call(a,o.value),a.length!==e);g=!0);}catch(t){l=!0,n=t}finally{try{if(!g&&null!=i.return&&(s=i.return(),Object(s)!==s))return}finally{if(l)throw n}}return a}}(t,e)||pf(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vf(t){return function(t){if(xp(t))return Cf(t)}(t)||function(t){if(void 0!==bp&&null!=md(t)||null!=t["@@iterator"])return If(t)}(t)||pf(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var mf=_n(XC),bf=Kg("Array").concat,yf=Or,_f=bf,Tf=Array.prototype,Ef=_n((function(t){var e=t.concat;return t===Tf||yf(Tf,t)&&e===Tf.concat?_f:e})),wf=_n(uf),kf=kr,Of=sA,Sf=bg,Rf=ba,xf=$n([].concat),Df=kf("Reflect","ownKeys")||function(t){var e=Of.f(Rf(t)),i=Sf.f;return i?xf(e,i(t)):e};Ya({target:"Reflect",stat:!0},{ownKeys:Df});var Mf=_n(yr.Reflect.ownKeys),Nf=_n(Rp),Lf=GA.map;Ya({target:"Array",proto:!0,forced:!Wd("map")},{map:function(t){return Lf(this,t,arguments.length>1?arguments[1]:void 0)}});var Pf=Kg("Array").map,$f=Or,Bf=Pf,Ff=Array.prototype,zf=_n((function(t){var e=t.map;return t===Ff||$f(Ff,t)&&e===Ff.map?Bf:e})),Hf=Is,Gf=mg;Ya({target:"Object",stat:!0,forced:wn((function(){Gf(1)}))},{keys:function(t){return Gf(Hf(t))}});var Uf=_n(yr.Object.keys),Vf=Ya,Wf=Date,jf=$n(Wf.prototype.getTime);Vf({target:"Date",stat:!0},{now:function(){return jf(new Wf)}});var Yf=_n(yr.Date.now),Xf=wn,Zf=function(t,e){var i=[][t];return!!i&&Xf((function(){i.call(null,e||function(){return 1},1)}))},Kf=GA.forEach,Qf=Zf("forEach")?[].forEach:function(t){return Kf(this,t,arguments.length>1?arguments[1]:void 0)};Ya({target:"Array",proto:!0,forced:[].forEach!==Qf},{forEach:Qf});var Jf=Kg("Array").forEach,qf=_l,tv=fs,ev=Or,iv=Jf,ov=Array.prototype,nv={DOMTokenList:!0,NodeList:!0},rv=function(t){var e=t.forEach;return t===ov||ev(ov,t)&&e===ov.forEach||tv(nv,qf(t))?iv:e},sv=_n(rv),av=Ya,gv=Md,lv=$n([].reverse),hv=[1,2];av({target:"Array",proto:!0,forced:String(hv)===String(hv.reverse())},{reverse:function(){return gv(this)&&(this.length=this.length),lv(this)}});var cv=Kg("Array").reverse,uv=Or,dv=cv,Av=Array.prototype,Iv=function(t){var e=t.reverse;return t===Av||uv(Av,t)&&e===Av.reverse?dv:e},Cv=_n(Iv),pv=Xr,fv=TypeError,vv=function(t,e){if(!delete t[e])throw new fv("Cannot delete property "+pv(e)+" of "+pv(t))},mv=Ya,bv=Is,yv=eg,_v=Qa,Tv=ng,Ev=Pp,wv=Ld,kv=Hd,Ov=Tu,Sv=vv,Rv=Wd("splice"),xv=Math.max,Dv=Math.min;mv({target:"Array",proto:!0,forced:!Rv},{splice:function(t,e){var i,o,n,r,s,a,g=bv(this),l=Tv(g),h=yv(t,l),c=arguments.length;for(0===c?i=o=0:1===c?(i=0,o=l-h):(i=c-2,o=Dv(xv(_v(e),0),l-h)),wv(l+i-o),n=kv(g,o),r=0;r<o;r++)(s=h+r)in g&&Ov(n,r,g[s]);if(n.length=o,i<o){for(r=h;r<l-o;r++)a=r+i,(s=r+o)in g?g[a]=g[s]:Sv(g,a);for(r=l;r>l-o+i;r--)Sv(g,r-1)}else if(i>o)for(r=l-o;r>h;r--)a=r+i-1,(s=r+o-1)in g?g[a]=g[s]:Sv(g,a);for(r=0;r<i;r++)g[r+h]=arguments[r+2];return Ev(g,l-o+i),n}});var Mv=Kg("Array").splice,Nv=Or,Lv=Mv,Pv=Array.prototype,$v=_n((function(t){var e=t.splice;return t===Pv||Nv(Pv,t)&&e===Pv.splice?Lv:e})),Bv=lg.includes;Ya({target:"Array",proto:!0,forced:wn((function(){return!Array(1).includes()}))},{includes:function(t){return Bv(this,t,arguments.length>1?arguments[1]:void 0)}});var Fv=Kg("Array").includes,zv=br,Hv=Hn,Gv=Ds("match"),Uv=TypeError,Vv=Ds("match"),Wv=Ya,jv=function(t){if(function(t){var e;return zv(t)&&(void 0!==(e=t[Gv])?!!e:"RegExp"===Hv(t))}(t))throw new Uv("The method doesn't accept regular expressions");return t},Yv=Ir,Xv=wl,Zv=$n("".indexOf);Wv({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[Vv]=!1,"/./"[t](e)}catch(t){}}return!1}("includes")},{includes:function(t){return!!~Zv(Xv(Yv(this)),Xv(jv(t)),arguments.length>1?arguments[1]:void 0)}});var Kv=Kg("String").includes,Qv=Or,Jv=Fv,qv=Kv,tm=Array.prototype,em=String.prototype,im=_n((function(t){var e=t.includes;return t===tm||Qv(tm,t)&&e===tm.includes?Jv:"string"==typeof t||t===em||Qv(em,t)&&e===em.includes?qv:e})),om=Is,nm=Gh,rm=Nh;Ya({target:"Object",stat:!0,forced:wn((function(){nm(1)})),sham:!rm},{getPrototypeOf:function(t){return nm(om(t))}});var sm=yr.Object.getPrototypeOf,am=_n(sm),gm=GA.filter;Ya({target:"Array",proto:!0,forced:!Wd("filter")},{filter:function(t){return gm(this,t,arguments.length>1?arguments[1]:void 0)}});var lm=Kg("Array").filter,hm=Or,cm=lm,um=Array.prototype,dm=_n((function(t){var e=t.filter;return t===um||hm(um,t)&&e===um.filter?cm:e})),Am="\t\n\v\f\r Â áââââââââââââ¯âã\u2028\u2029\ufeff",Im=Ir,Cm=wl,pm=Am,fm=$n("".replace),vm=RegExp("^["+pm+"]+"),mm=RegExp("(^|[^"+pm+"])["+pm+"]+$"),bm=function(t){return function(e){var i=Cm(Im(e));return 1&t&&(i=fm(i,vm,"")),2&t&&(i=fm(i,mm,"$1")),i}},ym={start:bm(1),end:bm(2),trim:bm(3)},_m=En,Tm=wn,Em=$n,wm=wl,km=ym.trim,Om=Am,Sm=_m.parseInt,Rm=_m.Symbol,xm=Rm&&Rm.iterator,Dm=/^[+-]?0x/i,Mm=Em(Dm.exec),Nm=8!==Sm(Om+"08")||22!==Sm(Om+"0x16")||xm&&!Tm((function(){Sm(Object(xm))}))?function(t,e){var i=km(wm(t));return Sm(i,e>>>0||(Mm(Dm,i)?16:10))}:Sm;Ya({global:!0,forced:parseInt!==Nm},{parseInt:Nm});var Lm=_n(yr.parseInt),Pm=Ya,$m=lg.indexOf,Bm=Zf,Fm=Vn([].indexOf),zm=!!Fm&&1/Fm([1],1,-0)<0;Pm({target:"Array",proto:!0,forced:zm||!Bm("indexOf")},{indexOf:function(t){var e=arguments.length>1?arguments[1]:void 0;return zm?Fm(this,t,e)||0:$m(this,t,e)}});var Hm=Kg("Array").indexOf,Gm=Or,Um=Hm,Vm=Array.prototype,Wm=_n((function(t){var e=t.indexOf;return t===Vm||Gm(Vm,t)&&e===Vm.indexOf?Um:e}));Ya({target:"Object",stat:!0,sham:!Kn},{create:Mh});var jm=yr.Object,Ym=function(t,e){return jm.create(t,e)},Xm=_n(Ym),Zm=yr,Km=Dn;Zm.JSON||(Zm.JSON={stringify:JSON.stringify});var Qm,Jm=_n((function(t,e,i){return Km(Zm.JSON.stringify,null,arguments)})),qm="function"==typeof Bun&&Bun&&"string"==typeof Bun.version,tb=TypeError,eb=function(t,e){if(t<e)throw new tb("Not enough arguments");return t},ib=En,ob=Dn,nb=Xn,rb=qm,sb=Sr,ab=Pg,gb=eb,lb=ib.Function,hb=/MSIE .\./.test(sb)||rb&&((Qm=ib.Bun.version.split(".")).length<3||"0"===Qm[0]&&(Qm[1]<3||"3"===Qm[1]&&"0"===Qm[2])),cb=function(t,e){var i=e?2:1;return hb?function(o,n){var r=gb(arguments.length,1)>i,s=nb(o)?o:lb(o),a=r?ab(arguments,i):[],g=r?function(){ob(s,this,a)}:s;return e?t(g,n):t(g)}:t},ub=Ya,db=En,Ab=cb(db.setInterval,!0);ub({global:!0,bind:!0,forced:db.setInterval!==Ab},{setInterval:Ab});var Ib=Ya,Cb=En,pb=cb(Cb.setTimeout,!0);Ib({global:!0,bind:!0,forced:Cb.setTimeout!==pb},{setTimeout:pb});var fb=_n(yr.setTimeout),vb=Is,mb=eg,bb=ng;Ya({target:"Array",proto:!0},{fill:function(t){for(var e=vb(this),i=bb(e),o=arguments.length,n=mb(o>1?arguments[1]:void 0,i),r=o>2?arguments[2]:void 0,s=void 0===r?i:mb(r,i);s>n;)e[n++]=t;return e}});var yb=Kg("Array").fill,_b=Or,Tb=yb,Eb=Array.prototype,wb=_n((function(t){var e=t.fill;return t===Eb||_b(Eb,t)&&e===Eb.fill?Tb:e}));function kb(){return kb=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},kb.apply(this,arguments)}function Ob(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function Sb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Rb,xb="function"!=typeof Object.assign?function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),i=1;i<arguments.length;i++){var o=arguments[i];if(null!=o)for(var n in o)o.hasOwnProperty(n)&&(e[n]=o[n])}return e}:Object.assign,Db=["","webkit","Moz","MS","ms","o"],Mb="undefined"==typeof document?{style:{}}:document.createElement("div"),Nb=Math.round,Lb=Math.abs,Pb=Date.now;function $b(t,e){for(var i,o,n=e[0].toUpperCase()+e.slice(1),r=0;r<Db.length;){if((o=(i=Db[r])?i+n:e)in t)return o;r++}}Rb="undefined"==typeof window?{}:window;var Bb=$b(Mb.style,"touchAction"),Fb=void 0!==Bb,zb="compute",Hb="auto",Gb="manipulation",Ub="none",Vb="pan-x",Wb="pan-y",jb=function(){if(!Fb)return!1;var t={},e=Rb.CSS&&Rb.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach((function(i){return t[i]=!e||Rb.CSS.supports("touch-action",i)})),t}(),Yb="ontouchstart"in Rb,Xb=void 0!==$b(Rb,"PointerEvent"),Zb=Yb&&/mobile|tablet|ip(ad|hone|od)|android/i.test(navigator.userAgent),Kb="touch",Qb="mouse",Jb=["x","y"],qb=["clientX","clientY"];function ty(t,e,i){var o;if(t)if(t.forEach)t.forEach(e,i);else if(void 0!==t.length)for(o=0;o<t.length;)e.call(i,t[o],o,t),o++;else for(o in t)t.hasOwnProperty(o)&&e.call(i,t[o],o,t)}function ey(t,e){return"function"==typeof t?t.apply(e&&e[0]||void 0,e):t}function iy(t,e){return t.indexOf(e)>-1}var oy=function(){function t(t,e){this.manager=t,this.set(e)}var e=t.prototype;return e.set=function(t){t===zb&&(t=this.compute()),Fb&&this.manager.element.style&&jb[t]&&(this.manager.element.style[Bb]=t),this.actions=t.toLowerCase().trim()},e.update=function(){this.set(this.manager.options.touchAction)},e.compute=function(){var t=[];return ty(this.manager.recognizers,(function(e){ey(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))})),function(t){if(iy(t,Ub))return Ub;var e=iy(t,Vb),i=iy(t,Wb);return e&&i?Ub:e||i?e?Vb:Wb:iy(t,Gb)?Gb:Hb}(t.join(" "))},e.preventDefaults=function(t){var e=t.srcEvent,i=t.offsetDirection;if(this.manager.session.prevented)e.preventDefault();else{var o=this.actions,n=iy(o,Ub)&&!jb[Ub],r=iy(o,Wb)&&!jb[Wb],s=iy(o,Vb)&&!jb[Vb];if(n){var a=1===t.pointers.length,g=t.distance<2,l=t.deltaTime<250;if(a&&g&&l)return}if(!s||!r)return n||r&&6&i||s&&24&i?this.preventSrc(e):void 0}},e.preventSrc=function(t){this.manager.session.prevented=!0,t.preventDefault()},t}();function ny(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1}function ry(t){var e=t.length;if(1===e)return{x:Nb(t[0].clientX),y:Nb(t[0].clientY)};for(var i=0,o=0,n=0;n<e;)i+=t[n].clientX,o+=t[n].clientY,n++;return{x:Nb(i/e),y:Nb(o/e)}}function sy(t){for(var e=[],i=0;i<t.pointers.length;)e[i]={clientX:Nb(t.pointers[i].clientX),clientY:Nb(t.pointers[i].clientY)},i++;return{timeStamp:Pb(),pointers:e,center:ry(e),deltaX:t.deltaX,deltaY:t.deltaY}}function ay(t,e,i){i||(i=Jb);var o=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return Math.sqrt(o*o+n*n)}function gy(t,e,i){i||(i=Jb);var o=e[i[0]]-t[i[0]],n=e[i[1]]-t[i[1]];return 180*Math.atan2(n,o)/Math.PI}function ly(t,e){return t===e?1:Lb(t)>=Lb(e)?t<0?2:4:e<0?8:16}function hy(t,e,i){return{x:e/t||0,y:i/t||0}}function cy(t,e,i){var o=i.pointers.length,n=i.changedPointers.length,r=1&e&&o-n==0,s=12&e&&o-n==0;i.isFirst=!!r,i.isFinal=!!s,r&&(t.session={}),i.eventType=e,function(t,e){var i=t.session,o=e.pointers,n=o.length;i.firstInput||(i.firstInput=sy(e)),n>1&&!i.firstMultiple?i.firstMultiple=sy(e):1===n&&(i.firstMultiple=!1);var r=i.firstInput,s=i.firstMultiple,a=s?s.center:r.center,g=e.center=ry(o);e.timeStamp=Pb(),e.deltaTime=e.timeStamp-r.timeStamp,e.angle=gy(a,g),e.distance=ay(a,g),function(t,e){var i=e.center,o=t.offsetDelta||{},n=t.prevDelta||{},r=t.prevInput||{};1!==e.eventType&&4!==r.eventType||(n=t.prevDelta={x:r.deltaX||0,y:r.deltaY||0},o=t.offsetDelta={x:i.x,y:i.y}),e.deltaX=n.x+(i.x-o.x),e.deltaY=n.y+(i.y-o.y)}(i,e),e.offsetDirection=ly(e.deltaX,e.deltaY);var l,h,c=hy(e.deltaTime,e.deltaX,e.deltaY);e.overallVelocityX=c.x,e.overallVelocityY=c.y,e.overallVelocity=Lb(c.x)>Lb(c.y)?c.x:c.y,e.scale=s?(l=s.pointers,ay((h=o)[0],h[1],qb)/ay(l[0],l[1],qb)):1,e.rotation=s?function(t,e){return gy(e[1],e[0],qb)+gy(t[1],t[0],qb)}(s.pointers,o):0,e.maxPointers=i.prevInput?e.pointers.length>i.prevInput.maxPointers?e.pointers.length:i.prevInput.maxPointers:e.pointers.length,function(t,e){var i,o,n,r,s=t.lastInterval||e,a=e.timeStamp-s.timeStamp;if(8!==e.eventType&&(a>25||void 0===s.velocity)){var g=e.deltaX-s.deltaX,l=e.deltaY-s.deltaY,h=hy(a,g,l);o=h.x,n=h.y,i=Lb(h.x)>Lb(h.y)?h.x:h.y,r=ly(g,l),t.lastInterval=e}else i=s.velocity,o=s.velocityX,n=s.velocityY,r=s.direction;e.velocity=i,e.velocityX=o,e.velocityY=n,e.direction=r}(i,e);var u,d=t.element,A=e.srcEvent;ny(u=A.composedPath?A.composedPath()[0]:A.path?A.path[0]:A.target,d)&&(d=u),e.target=d}(t,i),t.emit("hammer.input",i),t.recognize(i),t.session.prevInput=i}function uy(t){return t.trim().split(/\s+/g)}function dy(t,e,i){ty(uy(e),(function(e){t.addEventListener(e,i,!1)}))}function Ay(t,e,i){ty(uy(e),(function(e){t.removeEventListener(e,i,!1)}))}function Iy(t){var e=t.ownerDocument||t;return e.defaultView||e.parentWindow||window}var Cy=function(){function t(t,e){var i=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){ey(t.options.enable,[t])&&i.handler(e)},this.init()}var e=t.prototype;return e.handler=function(){},e.init=function(){this.evEl&&dy(this.element,this.evEl,this.domHandler),this.evTarget&&dy(this.target,this.evTarget,this.domHandler),this.evWin&&dy(Iy(this.element),this.evWin,this.domHandler)},e.destroy=function(){this.evEl&&Ay(this.element,this.evEl,this.domHandler),this.evTarget&&Ay(this.target,this.evTarget,this.domHandler),this.evWin&&Ay(Iy(this.element),this.evWin,this.domHandler)},t}();function py(t,e,i){if(t.indexOf&&!i)return t.indexOf(e);for(var o=0;o<t.length;){if(i&&t[o][i]==e||!i&&t[o]===e)return o;o++}return-1}var fy={pointerdown:1,pointermove:2,pointerup:4,pointercancel:8,pointerout:8},vy={2:Kb,3:"pen",4:Qb,5:"kinect"},my="pointerdown",by="pointermove pointerup pointercancel";Rb.MSPointerEvent&&!Rb.PointerEvent&&(my="MSPointerDown",by="MSPointerMove MSPointerUp MSPointerCancel");var yy=function(t){function e(){var i,o=e.prototype;return o.evEl=my,o.evWin=by,(i=t.apply(this,arguments)||this).store=i.manager.session.pointerEvents=[],i}return Ob(e,t),e.prototype.handler=function(t){var e=this.store,i=!1,o=t.type.toLowerCase().replace("ms",""),n=fy[o],r=vy[t.pointerType]||t.pointerType,s=r===Kb,a=py(e,t.pointerId,"pointerId");1&n&&(0===t.button||s)?a<0&&(e.push(t),a=e.length-1):12&n&&(i=!0),a<0||(e[a]=t,this.callback(this.manager,n,{pointers:e,changedPointers:[t],pointerType:r,srcEvent:t}),i&&e.splice(a,1))},e}(Cy);function _y(t){return Array.prototype.slice.call(t,0)}function Ty(t,e,i){for(var o=[],n=[],r=0;r<t.length;){var s=e?t[r][e]:t[r];py(n,s)<0&&o.push(t[r]),n[r]=s,r++}return i&&(o=e?o.sort((function(t,i){return t[e]>i[e]})):o.sort()),o}var Ey={touchstart:1,touchmove:2,touchend:4,touchcancel:8},wy=function(t){function e(){var i;return e.prototype.evTarget="touchstart touchmove touchend touchcancel",(i=t.apply(this,arguments)||this).targetIds={},i}return Ob(e,t),e.prototype.handler=function(t){var e=Ey[t.type],i=ky.call(this,t,e);i&&this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Kb,srcEvent:t})},e}(Cy);function ky(t,e){var i,o,n=_y(t.touches),r=this.targetIds;if(3&e&&1===n.length)return r[n[0].identifier]=!0,[n,n];var s=_y(t.changedTouches),a=[],g=this.target;if(o=n.filter((function(t){return ny(t.target,g)})),1===e)for(i=0;i<o.length;)r[o[i].identifier]=!0,i++;for(i=0;i<s.length;)r[s[i].identifier]&&a.push(s[i]),12&e&&delete r[s[i].identifier],i++;return a.length?[Ty(o.concat(a),"identifier",!0),a]:void 0}var Oy={mousedown:1,mousemove:2,mouseup:4},Sy=function(t){function e(){var i,o=e.prototype;return o.evEl="mousedown",o.evWin="mousemove mouseup",(i=t.apply(this,arguments)||this).pressed=!1,i}return Ob(e,t),e.prototype.handler=function(t){var e=Oy[t.type];1&e&&0===t.button&&(this.pressed=!0),2&e&&1!==t.which&&(e=4),this.pressed&&(4&e&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:Qb,srcEvent:t}))},e}(Cy);function Ry(t){var e=t.changedPointers[0];if(e.identifier===this.primaryTouch){var i={x:e.clientX,y:e.clientY},o=this.lastTouches;this.lastTouches.push(i),setTimeout((function(){var t=o.indexOf(i);t>-1&&o.splice(t,1)}),2500)}}function xy(t,e){1&t?(this.primaryTouch=e.changedPointers[0].identifier,Ry.call(this,e)):12&t&&Ry.call(this,e)}function Dy(t){for(var e=t.srcEvent.clientX,i=t.srcEvent.clientY,o=0;o<this.lastTouches.length;o++){var n=this.lastTouches[o],r=Math.abs(e-n.x),s=Math.abs(i-n.y);if(r<=25&&s<=25)return!0}return!1}var My=function(){return function(t){function e(e,i){var o;return(o=t.call(this,e,i)||this).handler=function(t,e,i){var n=i.pointerType===Kb,r=i.pointerType===Qb;if(!(r&&i.sourceCapabilities&&i.sourceCapabilities.firesTouchEvents)){if(n)xy.call(Sb(Sb(o)),e,i);else if(r&&Dy.call(Sb(Sb(o)),i))return;o.callback(t,e,i)}},o.touch=new wy(o.manager,o.handler),o.mouse=new Sy(o.manager,o.handler),o.primaryTouch=null,o.lastTouches=[],o}return Ob(e,t),e.prototype.destroy=function(){this.touch.destroy(),this.mouse.destroy()},e}(Cy)}();function Ny(t,e,i){return!!Array.isArray(t)&&(ty(t,i[e],i),!0)}var Ly=32,Py=1;function $y(t,e){var i=e.manager;return i?i.get(t):t}function By(t){return 16&t?"cancel":8&t?"end":4&t?"move":2&t?"start":""}var Fy=function(){function t(t){void 0===t&&(t={}),this.options=kb({enable:!0},t),this.id=Py++,this.manager=null,this.state=1,this.simultaneous={},this.requireFail=[]}var e=t.prototype;return e.set=function(t){return xb(this.options,t),this.manager&&this.manager.touchAction.update(),this},e.recognizeWith=function(t){if(Ny(t,"recognizeWith",this))return this;var e=this.simultaneous;return e[(t=$y(t,this)).id]||(e[t.id]=t,t.recognizeWith(this)),this},e.dropRecognizeWith=function(t){return Ny(t,"dropRecognizeWith",this)||(t=$y(t,this),delete this.simultaneous[t.id]),this},e.requireFailure=function(t){if(Ny(t,"requireFailure",this))return this;var e=this.requireFail;return-1===py(e,t=$y(t,this))&&(e.push(t),t.requireFailure(this)),this},e.dropRequireFailure=function(t){if(Ny(t,"dropRequireFailure",this))return this;t=$y(t,this);var e=py(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},e.hasRequireFailures=function(){return this.requireFail.length>0},e.canRecognizeWith=function(t){return!!this.simultaneous[t.id]},e.emit=function(t){var e=this,i=this.state;function o(i){e.manager.emit(i,t)}i<8&&o(e.options.event+By(i)),o(e.options.event),t.additionalEvent&&o(t.additionalEvent),i>=8&&o(e.options.event+By(i))},e.tryEmit=function(t){if(this.canEmit())return this.emit(t);this.state=Ly},e.canEmit=function(){for(var t=0;t<this.requireFail.length;){if(!(33&this.requireFail[t].state))return!1;t++}return!0},e.recognize=function(t){var e=xb({},t);if(!ey(this.options.enable,[this,e]))return this.reset(),void(this.state=Ly);56&this.state&&(this.state=1),this.state=this.process(e),30&this.state&&this.tryEmit(e)},e.process=function(t){},e.getTouchAction=function(){},e.reset=function(){},t}(),zy=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,kb({event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},e))||this).pTime=!1,i.pCenter=!1,i._timer=null,i._input=null,i.count=0,i}Ob(e,t);var i=e.prototype;return i.getTouchAction=function(){return[Gb]},i.process=function(t){var e=this,i=this.options,o=t.pointers.length===i.pointers,n=t.distance<i.threshold,r=t.deltaTime<i.time;if(this.reset(),1&t.eventType&&0===this.count)return this.failTimeout();if(n&&r&&o){if(4!==t.eventType)return this.failTimeout();var s=!this.pTime||t.timeStamp-this.pTime<i.interval,a=!this.pCenter||ay(this.pCenter,t.center)<i.posThreshold;if(this.pTime=t.timeStamp,this.pCenter=t.center,a&&s?this.count+=1:this.count=1,this._input=t,0==this.count%i.taps)return this.hasRequireFailures()?(this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.interval),2):8}return Ly},i.failTimeout=function(){var t=this;return this._timer=setTimeout((function(){t.state=Ly}),this.options.interval),Ly},i.reset=function(){clearTimeout(this._timer)},i.emit=function(){8===this.state&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))},e}(Fy),Hy=function(t){function e(e){return void 0===e&&(e={}),t.call(this,kb({pointers:1},e))||this}Ob(e,t);var i=e.prototype;return i.attrTest=function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},i.process=function(t){var e=this.state,i=t.eventType,o=6&e,n=this.attrTest(t);return o&&(8&i||!n)?16|e:o||n?4&i?8|e:2&e?4|e:2:Ly},e}(Fy);function Gy(t){return 16===t?"down":8===t?"up":2===t?"left":4===t?"right":""}var Uy=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,kb({event:"pan",threshold:10,pointers:1,direction:30},e))||this).pX=null,i.pY=null,i}Ob(e,t);var i=e.prototype;return i.getTouchAction=function(){var t=this.options.direction,e=[];return 6&t&&e.push(Wb),24&t&&e.push(Vb),e},i.directionTest=function(t){var e=this.options,i=!0,o=t.distance,n=t.direction,r=t.deltaX,s=t.deltaY;return n&e.direction||(6&e.direction?(n=0===r?1:r<0?2:4,i=r!==this.pX,o=Math.abs(t.deltaX)):(n=0===s?1:s<0?8:16,i=s!==this.pY,o=Math.abs(t.deltaY))),t.direction=n,i&&o>e.threshold&&n&e.direction},i.attrTest=function(t){return Hy.prototype.attrTest.call(this,t)&&(2&this.state||!(2&this.state)&&this.directionTest(t))},i.emit=function(e){this.pX=e.deltaX,this.pY=e.deltaY;var i=Gy(e.direction);i&&(e.additionalEvent=this.options.event+i),t.prototype.emit.call(this,e)},e}(Hy),Vy=function(t){function e(e){return void 0===e&&(e={}),t.call(this,kb({event:"swipe",threshold:10,velocity:.3,direction:30,pointers:1},e))||this}Ob(e,t);var i=e.prototype;return i.getTouchAction=function(){return Uy.prototype.getTouchAction.call(this)},i.attrTest=function(e){var i,o=this.options.direction;return 30&o?i=e.overallVelocity:6&o?i=e.overallVelocityX:24&o&&(i=e.overallVelocityY),t.prototype.attrTest.call(this,e)&&o&e.offsetDirection&&e.distance>this.options.threshold&&e.maxPointers===this.options.pointers&&Lb(i)>this.options.velocity&&4&e.eventType},i.emit=function(t){var e=Gy(t.offsetDirection);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)},e}(Hy),Wy=function(t){function e(e){return void 0===e&&(e={}),t.call(this,kb({event:"pinch",threshold:0,pointers:2},e))||this}Ob(e,t);var i=e.prototype;return i.getTouchAction=function(){return[Ub]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.scale-1)>this.options.threshold||2&this.state)},i.emit=function(e){if(1!==e.scale){var i=e.scale<1?"in":"out";e.additionalEvent=this.options.event+i}t.prototype.emit.call(this,e)},e}(Hy),jy=function(t){function e(e){return void 0===e&&(e={}),t.call(this,kb({event:"rotate",threshold:0,pointers:2},e))||this}Ob(e,t);var i=e.prototype;return i.getTouchAction=function(){return[Ub]},i.attrTest=function(e){return t.prototype.attrTest.call(this,e)&&(Math.abs(e.rotation)>this.options.threshold||2&this.state)},e}(Hy),Yy=function(t){function e(e){var i;return void 0===e&&(e={}),(i=t.call(this,kb({event:"press",pointers:1,time:251,threshold:9},e))||this)._timer=null,i._input=null,i}Ob(e,t);var i=e.prototype;return i.getTouchAction=function(){return[Hb]},i.process=function(t){var e=this,i=this.options,o=t.pointers.length===i.pointers,n=t.distance<i.threshold,r=t.deltaTime>i.time;if(this._input=t,!n||!o||12&t.eventType&&!r)this.reset();else if(1&t.eventType)this.reset(),this._timer=setTimeout((function(){e.state=8,e.tryEmit()}),i.time);else if(4&t.eventType)return 8;return Ly},i.reset=function(){clearTimeout(this._timer)},i.emit=function(t){8===this.state&&(t&&4&t.eventType?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=Pb(),this.manager.emit(this.options.event,this._input)))},e}(Fy),Xy={domEvents:!1,touchAction:zb,enable:!0,inputTarget:null,inputClass:null,cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},Zy=[[jy,{enable:!1}],[Wy,{enable:!1},["rotate"]],[Vy,{direction:6}],[Uy,{direction:6},["swipe"]],[zy],[zy,{event:"doubletap",taps:2},["tap"]],[Yy]];function Ky(t,e){var i,o=t.element;o.style&&(ty(t.options.cssProps,(function(n,r){i=$b(o.style,r),e?(t.oldCssProps[i]=o.style[i],o.style[i]=n):o.style[i]=t.oldCssProps[i]||""})),e||(t.oldCssProps={}))}var Qy=function(){function t(t,e){var i=this;this.options=xb({},Xy,e||{}),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=t,this.input=new(this.options.inputClass||(Xb?yy:Zb?wy:Yb?My:Sy))(this,cy),this.touchAction=new oy(this,this.options.touchAction),Ky(this,!0),ty(this.options.recognizers,(function(t){var e=i.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])}),this)}var e=t.prototype;return e.set=function(t){return xb(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},e.stop=function(t){this.session.stopped=t?2:1},e.recognize=function(t){var e=this.session;if(!e.stopped){var i;this.touchAction.preventDefaults(t);var o=this.recognizers,n=e.curRecognizer;(!n||n&&8&n.state)&&(e.curRecognizer=null,n=null);for(var r=0;r<o.length;)i=o[r],2===e.stopped||n&&i!==n&&!i.canRecognizeWith(n)?i.reset():i.recognize(t),!n&&14&i.state&&(e.curRecognizer=i,n=i),r++}},e.get=function(t){if(t instanceof Fy)return t;for(var e=this.recognizers,i=0;i<e.length;i++)if(e[i].options.event===t)return e[i];return null},e.add=function(t){if(Ny(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},e.remove=function(t){if(Ny(t,"remove",this))return this;var e=this.get(t);if(t){var i=this.recognizers,o=py(i,e);-1!==o&&(i.splice(o,1),this.touchAction.update())}return this},e.on=function(t,e){if(void 0===t||void 0===e)return this;var i=this.handlers;return ty(uy(t),(function(t){i[t]=i[t]||[],i[t].push(e)})),this},e.off=function(t,e){if(void 0===t)return this;var i=this.handlers;return ty(uy(t),(function(t){e?i[t]&&i[t].splice(py(i[t],e),1):delete i[t]})),this},e.emit=function(t,e){this.options.domEvents&&function(t,e){var i=document.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e,e.target.dispatchEvent(i)}(t,e);var i=this.handlers[t]&&this.handlers[t].slice();if(i&&i.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var o=0;o<i.length;)i[o](e),o++}},e.destroy=function(){this.element&&Ky(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null},t}(),Jy={touchstart:1,touchmove:2,touchend:4,touchcancel:8},qy=function(t){function e(){var i,o=e.prototype;return o.evTarget="touchstart",o.evWin="touchstart touchmove touchend touchcancel",(i=t.apply(this,arguments)||this).started=!1,i}return Ob(e,t),e.prototype.handler=function(t){var e=Jy[t.type];if(1===e&&(this.started=!0),this.started){var i=t_.call(this,t,e);12&e&&i[0].length-i[1].length==0&&(this.started=!1),this.callback(this.manager,e,{pointers:i[0],changedPointers:i[1],pointerType:Kb,srcEvent:t})}},e}(Cy);function t_(t,e){var i=_y(t.touches),o=_y(t.changedTouches);return 12&e&&(i=Ty(i.concat(o),"identifier",!0)),[i,o]}function e_(t,e,i){var o="DEPRECATED METHOD: "+e+"\n"+i+" AT \n";return function(){var e=new Error("get-stack-trace"),i=e&&e.stack?e.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",n=window.console&&(window.console.warn||window.console.log);return n&&n.call(window.console,o,i),t.apply(this,arguments)}}var i_=e_((function(t,e,i){for(var o=Object.keys(e),n=0;n<o.length;)(!i||i&&void 0===t[o[n]])&&(t[o[n]]=e[o[n]]),n++;return t}),"extend","Use `assign`."),o_=e_((function(t,e){return i_(t,e,!0)}),"merge","Use `assign`.");function n_(t,e,i){var o,n=e.prototype;(o=t.prototype=Object.create(n)).constructor=t,o._super=n,i&&xb(o,i)}function r_(t,e){return function(){return t.apply(e,arguments)}}var s_=function(){var t=function(t,e){return void 0===e&&(e={}),new Qy(t,kb({recognizers:Zy.concat()},e))};return t.VERSION="2.0.17-rc",t.DIRECTION_ALL=30,t.DIRECTION_DOWN=16,t.DIRECTION_LEFT=2,t.DIRECTION_RIGHT=4,t.DIRECTION_UP=8,t.DIRECTION_HORIZONTAL=6,t.DIRECTION_VERTICAL=24,t.DIRECTION_NONE=1,t.DIRECTION_DOWN=16,t.INPUT_START=1,t.INPUT_MOVE=2,t.INPUT_END=4,t.INPUT_CANCEL=8,t.STATE_POSSIBLE=1,t.STATE_BEGAN=2,t.STATE_CHANGED=4,t.STATE_ENDED=8,t.STATE_RECOGNIZED=8,t.STATE_CANCELLED=16,t.STATE_FAILED=Ly,t.Manager=Qy,t.Input=Cy,t.TouchAction=oy,t.TouchInput=wy,t.MouseInput=Sy,t.PointerEventInput=yy,t.TouchMouseInput=My,t.SingleTouchInput=qy,t.Recognizer=Fy,t.AttrRecognizer=Hy,t.Tap=zy,t.Pan=Uy,t.Swipe=Vy,t.Pinch=Wy,t.Rotate=jy,t.Press=Yy,t.on=dy,t.off=Ay,t.each=ty,t.merge=o_,t.extend=i_,t.bindFn=r_,t.assign=xb,t.inherit=n_,t.bindFn=r_,t.prefixed=$b,t.toArray=_y,t.inArray=py,t.uniqueArray=Ty,t.splitStr=uy,t.boolOrFn=ey,t.hasParent=ny,t.addEventListeners=dy,t.removeEventListeners=Ay,t.defaults=xb({},Xy,{preset:Zy}),t}();s_.defaults;var a_=s_;function g_(t,e){var i=void 0!==mf&&bd(t)||t["@@iterator"];if(!i){if(Nf(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return l_(t,e);var o=wf(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?ed(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?l_(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function l_(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var h_=mf("DELETE");function c_(){var t=u_.apply(void 0,arguments);return A_(t),t}function u_(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e.length<2)return e[0];var o;if(e.length>2)return u_.apply(void 0,Ef(o=[c_(e[0],e[1])]).call(o,vf(wf(e).call(e,2))));var n=e[0],r=e[1];if(n instanceof Date&&r instanceof Date)return n.setTime(r.getTime()),n;var s,a=g_(Mf(r));try{for(a.s();!(s=a.n()).done;){var g=s.value;Object.prototype.propertyIsEnumerable.call(r,g)&&(r[g]===h_?delete n[g]:null===n[g]||null===r[g]||"object"!==Ep(n[g])||"object"!==Ep(r[g])||Nf(n[g])||Nf(r[g])?n[g]=d_(r[g]):n[g]=u_(n[g],r[g]))}}catch(t){a.e(t)}finally{a.f()}return n}function d_(t){return Nf(t)?zf(t).call(t,(function(t){return d_(t)})):"object"===Ep(t)&&null!==t?t instanceof Date?new Date(t.getTime()):u_({},t):t}function A_(t){for(var e=0,i=Uf(t);e<i.length;e++){var o=i[e];t[o]===h_?delete t[o]:"object"===Ep(t[o])&&null!==t[o]&&A_(t[o])}}function I_(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){var e=function(){for(var t=function(){var t=4022871197;return function(e){for(var i=e.toString(),o=0;o<i.length;o++){var n=.02519603282416938*(t+=i.charCodeAt(o));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)}}(),e=t(" "),i=t(" "),o=t(" "),n=0;n<arguments.length;n++)(e-=t(n<0||arguments.length<=n?void 0:arguments[n]))<0&&(e+=1),(i-=t(n<0||arguments.length<=n?void 0:arguments[n]))<0&&(i+=1),(o-=t(n<0||arguments.length<=n?void 0:arguments[n]))<0&&(o+=1);return[e,i,o]}(t),i=ff(e,3),o=i[0],n=i[1],r=i[2],s=1,a=function(){var t=2091639*o+2.3283064365386963e-10*s;return o=n,n=r,r=t-(s=0|t)};return a.uint32=function(){return 4294967296*a()},a.fract53=function(){return a()+11102230246251565e-32*(2097152*a()|0)},a.algorithm="Alea",a.seed=t,a.version="0.9",a}(e.length?e:[Yf()])}var C_="undefined"!=typeof window?window.Hammer||a_:function(){return{on:t=function(){},off:t,destroy:t,emit:t,get:function(){return{set:t}}};var t};function p_(t){var e,i=this;this._cleanupQueue=[],this.active=!1,this._dom={container:t,overlay:document.createElement("div")},this._dom.overlay.classList.add("vis-overlay"),this._dom.container.appendChild(this._dom.overlay),this._cleanupQueue.push((function(){i._dom.overlay.parentNode.removeChild(i._dom.overlay)}));var o=C_(this._dom.overlay);o.on("tap",il(e=this._onTapOverlay).call(e,this)),this._cleanupQueue.push((function(){o.destroy()}));var n=["tap","doubletap","press","pinch","pan","panstart","panmove","panend"];sv(n).call(n,(function(t){o.on(t,(function(t){t.srcEvent.stopPropagation()}))})),document&&document.body&&(this._onClick=function(e){(function(t,e){for(;t;){if(t===e)return!0;t=t.parentNode}return!1})(e.target,t)||i.deactivate()},document.body.addEventListener("click",this._onClick),this._cleanupQueue.push((function(){document.body.removeEventListener("click",i._onClick)}))),this._escListener=function(t){("key"in t?"Escape"===t.key:27===t.keyCode)&&i.deactivate()}}cl(p_.prototype),p_.current=null,p_.prototype.destroy=function(){var t,e;this.deactivate();var i,o=g_(Cv(t=$v(e=this._cleanupQueue).call(e,0)).call(t));try{for(o.s();!(i=o.n()).done;)(0,i.value)()}catch(t){o.e(t)}finally{o.f()}},p_.prototype.activate=function(){p_.current&&p_.current.deactivate(),p_.current=this,this.active=!0,this._dom.overlay.style.display="none",this._dom.container.classList.add("vis-active"),this.emit("change"),this.emit("activate"),document.body.addEventListener("keydown",this._escListener)},p_.prototype.deactivate=function(){this.active=!1,this._dom.overlay.style.display="block",this._dom.container.classList.remove("vis-active"),document.body.removeEventListener("keydown",this._escListener),this.emit("change"),this.emit("deactivate")},p_.prototype._onTapOverlay=function(t){this.activate(),t.srcEvent.stopPropagation()};var f_=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,v_=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,m_=/^rgb\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *\)$/i,b_=/^rgba\( *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *(1?\d{1,2}|2[0-4]\d|25[0-5]) *, *([01]|0?\.\d+) *\)$/i;function y_(t){if(t)for(;!0===t.hasChildNodes();){var e=t.firstChild;e&&(y_(e),t.removeChild(e))}}function __(t){return t instanceof String||"string"==typeof t}function T_(t){return"object"===Ep(t)&&null!==t}function E_(t,e,i,o){var n=!1;!0===o&&(n=null===e[i]&&void 0!==t[i]),n?delete t[i]:t[i]=e[i]}function w_(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var o in t)if(void 0!==e[o])if(null===e[o]||"object"!==Ep(e[o]))E_(t,e,o,i);else{var n=t[o],r=e[o];T_(n)&&T_(r)&&w_(n,r,i)}}function k_(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Nf(i))throw new TypeError("Arrays are not supported by deepExtend");for(var n=0;n<t.length;n++){var r=t[n];if(Object.prototype.hasOwnProperty.call(i,r))if(i[r]&&i[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r].constructor===Object?S_(e[r],i[r],!1,o):E_(e,i,r,o);else{if(Nf(i[r]))throw new TypeError("Arrays are not supported by deepExtend");E_(e,i,r,o)}}return e}function O_(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(Nf(i))throw new TypeError("Arrays are not supported by deepExtend");for(var n in i)if(Object.prototype.hasOwnProperty.call(i,n)&&!im(t).call(t,n))if(i[n]&&i[n].constructor===Object)void 0===e[n]&&(e[n]={}),e[n].constructor===Object?S_(e[n],i[n]):E_(e,i,n,o);else if(Nf(i[n])){e[n]=[];for(var r=0;r<i[n].length;r++)e[n].push(i[n][r])}else E_(e,i,n,o);return e}function S_(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)||!0===i)if("object"===Ep(e[n])&&null!==e[n]&&am(e[n])===Object.prototype)void 0===t[n]?t[n]=S_({},e[n],i):"object"===Ep(t[n])&&null!==t[n]&&am(t[n])===Object.prototype?S_(t[n],e[n],i):E_(t,e,n,o);else if(Nf(e[n])){var r;t[n]=wf(r=e[n]).call(r)}else E_(t,e,n,o);return t}function R_(t,e){var i;return Ef(i=[]).call(i,vf(t),[e])}function x_(t){return t.getBoundingClientRect().top}function D_(t,e){if(Nf(t))for(var i=t.length,o=0;o<i;o++)e(t[o],o,t);else for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(t[n],n,t)}function M_(t){var e;switch(t.length){case 3:case 4:return(e=v_.exec(t))?{r:Lm(e[1]+e[1],16),g:Lm(e[2]+e[2],16),b:Lm(e[3]+e[3],16)}:null;case 6:case 7:return(e=f_.exec(t))?{r:Lm(e[1],16),g:Lm(e[2],16),b:Lm(e[3],16)}:null;default:return null}}function N_(t,e){if(im(t).call(t,"rgba"))return t;if(im(t).call(t,"rgb")){var i=t.substr(Wm(t).call(t,"(")+1).replace(")","").split(",");return"rgba("+i[0]+","+i[1]+","+i[2]+","+e+")"}var o=M_(t);return null==o?t:"rgba("+o.r+","+o.g+","+o.b+","+e+")"}function L_(t,e,i){var o;return"#"+wf(o=((1<<24)+(t<<16)+(e<<8)+i).toString(16)).call(o,1)}function P_(t,e){if(__(t)){var i=t;if(H_(i)){var o,n=zf(o=i.substr(4).substr(0,i.length-5).split(",")).call(o,(function(t){return Lm(t)}));i=L_(n[0],n[1],n[2])}if(!0===z_(i)){var r=function(t){var e=M_(t);if(!e)throw new TypeError("'".concat(t,"' is not a valid color."));return $_(e.r,e.g,e.b)}(i),s={h:r.h,s:.8*r.s,v:Math.min(1,1.02*r.v)},a={h:r.h,s:Math.min(1,1.25*r.s),v:.8*r.v},g=F_(a.h,a.s,a.v),l=F_(s.h,s.s,s.v);return{background:i,border:g,highlight:{background:l,border:g},hover:{background:l,border:g}}}return{background:i,border:i,highlight:{background:i,border:i},hover:{background:i,border:i}}}return e?{background:t.background||e.background,border:t.border||e.border,highlight:__(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||e.highlight.background,border:t.highlight&&t.highlight.border||e.highlight.border},hover:__(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||e.hover.border,background:t.hover&&t.hover.background||e.hover.background}}:{background:t.background||void 0,border:t.border||void 0,highlight:__(t.highlight)?{border:t.highlight,background:t.highlight}:{background:t.highlight&&t.highlight.background||void 0,border:t.highlight&&t.highlight.border||void 0},hover:__(t.hover)?{border:t.hover,background:t.hover}:{border:t.hover&&t.hover.border||void 0,background:t.hover&&t.hover.background||void 0}}}function $_(t,e,i){t/=255,e/=255,i/=255;var o=Math.min(t,Math.min(e,i)),n=Math.max(t,Math.max(e,i));return o===n?{h:0,s:0,v:o}:{h:60*((t===o?3:i===o?1:5)-(t===o?e-i:i===o?t-e:i-t)/(n-o))/360,s:(n-o)/n,v:n}}function B_(t,e,i){var o,n,r,s=Math.floor(6*t),a=6*t-s,g=i*(1-e),l=i*(1-a*e),h=i*(1-(1-a)*e);switch(s%6){case 0:o=i,n=h,r=g;break;case 1:o=l,n=i,r=g;break;case 2:o=g,n=i,r=h;break;case 3:o=g,n=l,r=i;break;case 4:o=h,n=g,r=i;break;case 5:o=i,n=g,r=l}return{r:Math.floor(255*o),g:Math.floor(255*n),b:Math.floor(255*r)}}function F_(t,e,i){var o=B_(t,e,i);return L_(o.r,o.g,o.b)}function z_(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t)}function H_(t){return m_.test(t)}function G_(t){if(null===t||"object"!==Ep(t))return null;if(t instanceof Element)return t;var e=Xm(t);for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&"object"==Ep(t[i])&&(e[i]=G_(t[i]));return e}function U_(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=function(t){return null!=t},r=function(t){return null!==t&&"object"===Ep(t)};if(!r(t))throw new Error("Parameter mergeTarget must be an object");if(!r(e))throw new Error("Parameter options must be an object");if(!n(i))throw new Error("Parameter option must have a value");if(!r(o))throw new Error("Parameter globalOptions must be an object");var s=e[i],a=r(o)&&!function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}(o)?o[i]:void 0,g=a?a.enabled:void 0;if(void 0!==s){if("boolean"==typeof s)return r(t[i])||(t[i]={}),void(t[i].enabled=s);if(null===s&&!r(t[i])){if(!n(a))return;t[i]=Xm(a)}if(r(s)){var l=!0;void 0!==s.enabled?l=s.enabled:void 0!==g&&(l=a.enabled),function(t,e,i){r(t[i])||(t[i]={});var o=e[i],n=t[i];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(n[s]=o[s])}(t,e,i),t[i].enabled=l}}}var V_={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return t*(2-t)},easeInOutQuad:function(t){return t<.5?2*t*t:(4-2*t)*t-1},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return--t*t*t+1},easeInOutCubic:function(t){return t<.5?4*t*t*t:(t-1)*(2*t-2)*(2*t-2)+1},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return 1- --t*t*t*t},easeInOutQuart:function(t){return t<.5?8*t*t*t*t:1-8*--t*t*t*t},easeInQuint:function(t){return t*t*t*t*t},easeOutQuint:function(t){return 1+--t*t*t*t*t},easeInOutQuint:function(t){return t<.5?16*t*t*t*t*t:1+16*--t*t*t*t*t}};function W_(t,e){var i;Nf(e)||(e=[e]);var o,n=g_(t);try{for(n.s();!(o=n.n()).done;){var r=o.value;if(r){i=r[e[0]];for(var s=1;s<e.length;s++)i&&(i=i[e[s]]);if(void 0!==i)break}}}catch(t){n.e(t)}finally{n.f()}return i}var j_={black:"#000000",navy:"#000080",darkblue:"#00008B",mediumblue:"#0000CD",blue:"#0000FF",darkgreen:"#006400",green:"#008000",teal:"#008080",darkcyan:"#008B8B",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00FA9A",lime:"#00FF00",springgreen:"#00FF7F",aqua:"#00FFFF",cyan:"#00FFFF",midnightblue:"#191970",dodgerblue:"#1E90FF",lightseagreen:"#20B2AA",forestgreen:"#228B22",seagreen:"#2E8B57",darkslategray:"#2F4F4F",limegreen:"#32CD32",mediumseagreen:"#3CB371",turquoise:"#40E0D0",royalblue:"#4169E1",steelblue:"#4682B4",darkslateblue:"#483D8B",mediumturquoise:"#48D1CC",indigo:"#4B0082",darkolivegreen:"#556B2F",cadetblue:"#5F9EA0",cornflowerblue:"#6495ED",mediumaquamarine:"#66CDAA",dimgray:"#696969",slateblue:"#6A5ACD",olivedrab:"#6B8E23",slategray:"#708090",lightslategray:"#778899",mediumslateblue:"#7B68EE",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD4",maroon:"#800000",purple:"#800080",olive:"#808000",gray:"#808080",skyblue:"#87CEEB",lightskyblue:"#87CEFA",blueviolet:"#8A2BE2",darkred:"#8B0000",darkmagenta:"#8B008B",saddlebrown:"#8B4513",darkseagreen:"#8FBC8F",lightgreen:"#90EE90",mediumpurple:"#9370D8",darkviolet:"#9400D3",palegreen:"#98FB98",darkorchid:"#9932CC",yellowgreen:"#9ACD32",sienna:"#A0522D",brown:"#A52A2A",darkgray:"#A9A9A9",lightblue:"#ADD8E6",greenyellow:"#ADFF2F",paleturquoise:"#AFEEEE",lightsteelblue:"#B0C4DE",powderblue:"#B0E0E6",firebrick:"#B22222",darkgoldenrod:"#B8860B",mediumorchid:"#BA55D3",rosybrown:"#BC8F8F",darkkhaki:"#BDB76B",silver:"#C0C0C0",mediumvioletred:"#C71585",indianred:"#CD5C5C",peru:"#CD853F",chocolate:"#D2691E",tan:"#D2B48C",lightgrey:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#DA70D6",goldenrod:"#DAA520",crimson:"#DC143C",gainsboro:"#DCDCDC",plum:"#DDA0DD",burlywood:"#DEB887",lightcyan:"#E0FFFF",lavender:"#E6E6FA",darksalmon:"#E9967A",violet:"#EE82EE",palegoldenrod:"#EEE8AA",lightcoral:"#F08080",khaki:"#F0E68C",aliceblue:"#F0F8FF",honeydew:"#F0FFF0",azure:"#F0FFFF",sandybrown:"#F4A460",wheat:"#F5DEB3",beige:"#F5F5DC",whitesmoke:"#F5F5F5",mintcream:"#F5FFFA",ghostwhite:"#F8F8FF",salmon:"#FA8072",antiquewhite:"#FAEBD7",linen:"#FAF0E6",lightgoldenrodyellow:"#FAFAD2",oldlace:"#FDF5E6",red:"#FF0000",fuchsia:"#FF00FF",magenta:"#FF00FF",deeppink:"#FF1493",orangered:"#FF4500",tomato:"#FF6347",hotpink:"#FF69B4",coral:"#FF7F50",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB6C1",pink:"#FFC0CB",gold:"#FFD700",peachpuff:"#FFDAB9",navajowhite:"#FFDEAD",moccasin:"#FFE4B5",bisque:"#FFE4C4",mistyrose:"#FFE4E1",blanchedalmond:"#FFEBCD",papayawhip:"#FFEFD5",lavenderblush:"#FFF0F5",seashell:"#FFF5EE",cornsilk:"#FFF8DC",lemonchiffon:"#FFFACD",floralwhite:"#FFFAF0",snow:"#FFFAFA",yellow:"#FFFF00",lightyellow:"#FFFFE0",ivory:"#FFFFF0",white:"#FFFFFF"},Y_=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;yd(this,t),this.pixelRatio=e,this.generated=!1,this.centerCoordinates={x:144.5,y:144.5},this.r=289*.49,this.color={r:255,g:255,b:255,a:1},this.hueCircle=void 0,this.initialColor={r:255,g:255,b:255,a:1},this.previousColor=void 0,this.applied=!1,this.updateCallback=function(){},this.closeCallback=function(){},this._create()}return Sp(t,[{key:"insertTo",value:function(t){void 0!==this.hammer&&(this.hammer.destroy(),this.hammer=void 0),this.container=t,this.container.appendChild(this.frame),this._bindHammer(),this._setSize()}},{key:"setUpdateCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker update callback is not a function.");this.updateCallback=t}},{key:"setCloseCallback",value:function(t){if("function"!=typeof t)throw new Error("Function attempted to set as colorPicker closing callback is not a function.");this.closeCallback=t}},{key:"_isColorString",value:function(t){if("string"==typeof t)return j_[t]}},{key:"setColor",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if("none"!==t){var i,o=this._isColorString(t);if(void 0!==o&&(t=o),!0===__(t)){if(!0===H_(t)){var n=t.substr(4).substr(0,t.length-5).split(",");i={r:n[0],g:n[1],b:n[2],a:1}}else if(!0===function(t){return b_.test(t)}(t)){var r=t.substr(5).substr(0,t.length-6).split(",");i={r:r[0],g:r[1],b:r[2],a:r[3]}}else if(!0===z_(t)){var s=M_(t);i={r:s.r,g:s.g,b:s.b,a:1}}}else if(t instanceof Object&&void 0!==t.r&&void 0!==t.g&&void 0!==t.b){var a=void 0!==t.a?t.a:"1.0";i={r:t.r,g:t.g,b:t.b,a}}if(void 0===i)throw new Error("Unknown color passed to the colorPicker. Supported are strings: rgb, hex, rgba. Object: rgb ({r:r,g:g,b:b,[a:a]}). Supplied: "+Jm(t));this._setColor(i,e)}}},{key:"show",value:function(){void 0!==this.closeCallback&&(this.closeCallback(),this.closeCallback=void 0),this.applied=!1,this.frame.style.display="block",this._generateHueCircle()}},{key:"_hide",value:function(){var t=this;!0===(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&(this.previousColor=Lg({},this.color)),!0===this.applied&&this.updateCallback(this.initialColor),this.frame.style.display="none",fb((function(){void 0!==t.closeCallback&&(t.closeCallback(),t.closeCallback=void 0)}),0)}},{key:"_save",value:function(){this.updateCallback(this.color),this.applied=!1,this._hide()}},{key:"_apply",value:function(){this.applied=!0,this.updateCallback(this.color),this._updatePicker(this.color)}},{key:"_loadLast",value:function(){void 0!==this.previousColor?this.setColor(this.previousColor,!1):alert("There is no last color to load...")}},{key:"_setColor",value:function(t){!0===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&(this.initialColor=Lg({},t)),this.color=t;var e=$_(t.r,t.g,t.b),i=2*Math.PI,o=this.r*e.s,n=this.centerCoordinates.x+o*Math.sin(i*e.h),r=this.centerCoordinates.y+o*Math.cos(i*e.h);this.colorPickerSelector.style.left=n-.5*this.colorPickerSelector.clientWidth+"px",this.colorPickerSelector.style.top=r-.5*this.colorPickerSelector.clientHeight+"px",this._updatePicker(t)}},{key:"_setOpacity",value:function(t){this.color.a=t/100,this._updatePicker(this.color)}},{key:"_setBrightness",value:function(t){var e=$_(this.color.r,this.color.g,this.color.b);e.v=t/100;var i=B_(e.h,e.s,e.v);i.a=this.color.a,this.color=i,this._updatePicker()}},{key:"_updatePicker",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.color,e=$_(t.r,t.g,t.b),i=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(i.webkitBackingStorePixelRatio||i.mozBackingStorePixelRatio||i.msBackingStorePixelRatio||i.oBackingStorePixelRatio||i.backingStorePixelRatio||1)),i.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var o=this.colorPickerCanvas.clientWidth,n=this.colorPickerCanvas.clientHeight;i.clearRect(0,0,o,n),i.putImageData(this.hueCircle,0,0),i.fillStyle="rgba(0,0,0,"+(1-e.v)+")",i.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),wb(i).call(i),this.brightnessRange.value=100*e.v,this.opacityRange.value=100*t.a,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}},{key:"_setSize",value:function(){this.colorPickerCanvas.style.width="100%",this.colorPickerCanvas.style.height="100%",this.colorPickerCanvas.width=289*this.pixelRatio,this.colorPickerCanvas.height=289*this.pixelRatio}},{key:"_create",value:function(){var t,e,i,o;if(this.frame=document.createElement("div"),this.frame.className="vis-color-picker",this.colorPickerDiv=document.createElement("div"),this.colorPickerSelector=document.createElement("div"),this.colorPickerSelector.className="vis-selector",this.colorPickerDiv.appendChild(this.colorPickerSelector),this.colorPickerCanvas=document.createElement("canvas"),this.colorPickerDiv.appendChild(this.colorPickerCanvas),this.colorPickerCanvas.getContext){var n=this.colorPickerCanvas.getContext("2d");this.pixelRatio=(window.devicePixelRatio||1)/(n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1),this.colorPickerCanvas.getContext("2d").setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}else{var r=document.createElement("DIV");r.style.color="red",r.style.fontWeight="bold",r.style.padding="10px",r.innerText="Error: your browser does not support HTML canvas",this.colorPickerCanvas.appendChild(r)}this.colorPickerDiv.className="vis-color",this.opacityDiv=document.createElement("div"),this.opacityDiv.className="vis-opacity",this.brightnessDiv=document.createElement("div"),this.brightnessDiv.className="vis-brightness",this.arrowDiv=document.createElement("div"),this.arrowDiv.className="vis-arrow",this.opacityRange=document.createElement("input");try{this.opacityRange.type="range",this.opacityRange.min="0",this.opacityRange.max="100"}catch(t){}this.opacityRange.value="100",this.opacityRange.className="vis-range",this.brightnessRange=document.createElement("input");try{this.brightnessRange.type="range",this.brightnessRange.min="0",this.brightnessRange.max="100"}catch(t){}this.brightnessRange.value="100",this.brightnessRange.className="vis-range",this.opacityDiv.appendChild(this.opacityRange),this.brightnessDiv.appendChild(this.brightnessRange);var s=this;this.opacityRange.onchange=function(){s._setOpacity(this.value)},this.opacityRange.oninput=function(){s._setOpacity(this.value)},this.brightnessRange.onchange=function(){s._setBrightness(this.value)},this.brightnessRange.oninput=function(){s._setBrightness(this.value)},this.brightnessLabel=document.createElement("div"),this.brightnessLabel.className="vis-label vis-brightness",this.brightnessLabel.innerText="brightness:",this.opacityLabel=document.createElement("div"),this.opacityLabel.className="vis-label vis-opacity",this.opacityLabel.innerText="opacity:",this.newColorDiv=document.createElement("div"),this.newColorDiv.className="vis-new-color",this.newColorDiv.innerText="new",this.initialColorDiv=document.createElement("div"),this.initialColorDiv.className="vis-initial-color",this.initialColorDiv.innerText="initial",this.cancelButton=document.createElement("div"),this.cancelButton.className="vis-button vis-cancel",this.cancelButton.innerText="cancel",this.cancelButton.onclick=il(t=this._hide).call(t,this,!1),this.applyButton=document.createElement("div"),this.applyButton.className="vis-button vis-apply",this.applyButton.innerText="apply",this.applyButton.onclick=il(e=this._apply).call(e,this),this.saveButton=document.createElement("div"),this.saveButton.className="vis-button vis-save",this.saveButton.innerText="save",this.saveButton.onclick=il(i=this._save).call(i,this),this.loadButton=document.createElement("div"),this.loadButton.className="vis-button vis-load",this.loadButton.innerText="load last",this.loadButton.onclick=il(o=this._loadLast).call(o,this),this.frame.appendChild(this.colorPickerDiv),this.frame.appendChild(this.arrowDiv),this.frame.appendChild(this.brightnessLabel),this.frame.appendChild(this.brightnessDiv),this.frame.appendChild(this.opacityLabel),this.frame.appendChild(this.opacityDiv),this.frame.appendChild(this.newColorDiv),this.frame.appendChild(this.initialColorDiv),this.frame.appendChild(this.cancelButton),this.frame.appendChild(this.applyButton),this.frame.appendChild(this.saveButton),this.frame.appendChild(this.loadButton)}},{key:"_bindHammer",value:function(){var t=this;this.drag={},this.pinch={},this.hammer=new C_(this.colorPickerCanvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.on("hammer.input",(function(e){e.isFirst&&t._moveSelector(e)})),this.hammer.on("tap",(function(e){t._moveSelector(e)})),this.hammer.on("panstart",(function(e){t._moveSelector(e)})),this.hammer.on("panmove",(function(e){t._moveSelector(e)})),this.hammer.on("panend",(function(e){t._moveSelector(e)}))}},{key:"_generateHueCircle",value:function(){if(!1===this.generated){var t=this.colorPickerCanvas.getContext("2d");void 0===this.pixelRation&&(this.pixelRatio=(window.devicePixelRatio||1)/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)),t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0);var e,i,o,n,r=this.colorPickerCanvas.clientWidth,s=this.colorPickerCanvas.clientHeight;t.clearRect(0,0,r,s),this.centerCoordinates={x:.5*r,y:.5*s},this.r=.49*r;var a,g=2*Math.PI/360,l=1/360,h=1/this.r;for(o=0;o<360;o++)for(n=0;n<this.r;n++)e=this.centerCoordinates.x+n*Math.sin(g*o),i=this.centerCoordinates.y+n*Math.cos(g*o),a=B_(o*l,n*h,1),t.fillStyle="rgb("+a.r+","+a.g+","+a.b+")",t.fillRect(e-.5,i-.5,2,2);t.strokeStyle="rgba(0,0,0,1)",t.circle(this.centerCoordinates.x,this.centerCoordinates.y,this.r),t.stroke(),this.hueCircle=t.getImageData(0,0,r,s)}this.generated=!0}},{key:"_moveSelector",value:function(t){var e=this.colorPickerDiv.getBoundingClientRect(),i=t.center.x-e.left,o=t.center.y-e.top,n=.5*this.colorPickerDiv.clientHeight,r=.5*this.colorPickerDiv.clientWidth,s=i-r,a=o-n,g=Math.atan2(s,a),l=.98*Math.min(Math.sqrt(s*s+a*a),r),h=Math.cos(g)*l+n,c=Math.sin(g)*l+r;this.colorPickerSelector.style.top=h-.5*this.colorPickerSelector.clientHeight+"px",this.colorPickerSelector.style.left=c-.5*this.colorPickerSelector.clientWidth+"px";var u=g/(2*Math.PI);u=u<0?u+1:u;var d=l/this.r,A=$_(this.color.r,this.color.g,this.color.b);A.h=u,A.s=d;var I=B_(A.h,A.s,A.v);I.a=this.color.a,this.color=I,this.initialColorDiv.style.backgroundColor="rgba("+this.initialColor.r+","+this.initialColor.g+","+this.initialColor.b+","+this.initialColor.a+")",this.newColorDiv.style.backgroundColor="rgba("+this.color.r+","+this.color.g+","+this.color.b+","+this.color.a+")"}}]),t}();function X_(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e.length<1)throw new TypeError("Invalid arguments.");if(1===e.length)return document.createTextNode(e[0]);var o=document.createElement(e[0]);return o.appendChild(X_.apply(void 0,vf(wf(e).call(e,1)))),o}var Z_,K_=!1,Q_="background: #FFeeee; color: #dd0000",J_=p_,q_=function(){function t(e,i,o){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){return!1};yd(this,t),this.parent=e,this.changedOptions=[],this.container=i,this.allowCreation=!1,this.hideOption=r,this.options={},this.initialized=!1,this.popupCounter=0,this.defaultOptions={enabled:!1,filter:!0,container:void 0,showButton:!0},Lg(this.options,this.defaultOptions),this.configureOptions=o,this.moduleOptions={},this.domElements=[],this.popupDiv={},this.popupLimit=5,this.popupHistory={},this.colorPicker=new Y_(n),this.wrapper=void 0}return Sp(t,[{key:"setOptions",value:function(t){if(void 0!==t){this.popupHistory={},this._removePopup();var e=!0;if("string"==typeof t)this.options.filter=t;else if(Nf(t))this.options.filter=t.join();else if("object"===Ep(t)){if(null==t)throw new TypeError("options cannot be null");void 0!==t.container&&(this.options.container=t.container),void 0!==dm(t)&&(this.options.filter=dm(t)),void 0!==t.showButton&&(this.options.showButton=t.showButton),void 0!==t.enabled&&(e=t.enabled)}else"boolean"==typeof t?(this.options.filter=!0,e=t):"function"==typeof t&&(this.options.filter=t,e=!0);!1===dm(this.options)&&(e=!1),this.options.enabled=e}this._clean()}},{key:"setModuleOptions",value:function(t){this.moduleOptions=t,!0===this.options.enabled&&(this._clean(),void 0!==this.options.container&&(this.container=this.options.container),this._create())}},{key:"_create",value:function(){this._clean(),this.changedOptions=[];var t=dm(this.options),e=0,i=!1;for(var o in this.configureOptions)Object.prototype.hasOwnProperty.call(this.configureOptions,o)&&(this.allowCreation=!1,i=!1,"function"==typeof t?i=(i=t(o,[]))||this._handleObject(this.configureOptions[o],[o],!0):!0!==t&&-1===Wm(t).call(t,o)||(i=!0),!1!==i&&(this.allowCreation=!0,e>0&&this._makeItem([]),this._makeHeader(o),this._handleObject(this.configureOptions[o],[o])),e++);this._makeButton(),this._push()}},{key:"_push",value:function(){this.wrapper=document.createElement("div"),this.wrapper.className="vis-configuration-wrapper",this.container.appendChild(this.wrapper);for(var t=0;t<this.domElements.length;t++)this.wrapper.appendChild(this.domElements[t]);this._showPopupIfNeeded()}},{key:"_clean",value:function(){for(var t=0;t<this.domElements.length;t++)this.wrapper.removeChild(this.domElements[t]);void 0!==this.wrapper&&(this.container.removeChild(this.wrapper),this.wrapper=void 0),this.domElements=[],this._removePopup()}},{key:"_getValue",value:function(t){for(var e=this.moduleOptions,i=0;i<t.length;i++){if(void 0===e[t[i]]){e=void 0;break}e=e[t[i]]}return e}},{key:"_makeItem",value:function(t){if(!0===this.allowCreation){var e=document.createElement("div");e.className="vis-configuration vis-config-item vis-config-s"+t.length;for(var i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];return sv(o).call(o,(function(t){e.appendChild(t)})),this.domElements.push(e),this.domElements.length}return 0}},{key:"_makeHeader",value:function(t){var e=document.createElement("div");e.className="vis-configuration vis-config-header",e.innerText=t,this._makeItem([],e)}},{key:"_makeLabel",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=document.createElement("div");if(o.className="vis-configuration vis-config-label vis-config-s"+e.length,!0===i){for(;o.firstChild;)o.removeChild(o.firstChild);o.appendChild(X_("i","b",t))}else o.innerText=t+":";return o}},{key:"_makeDropdown",value:function(t,e,i){var o=document.createElement("select");o.className="vis-configuration vis-config-select";var n=0;void 0!==e&&-1!==Wm(t).call(t,e)&&(n=Wm(t).call(t,e));for(var r=0;r<t.length;r++){var s=document.createElement("option");s.value=t[r],r===n&&(s.selected="selected"),s.innerText=t[r],o.appendChild(s)}var a=this;o.onchange=function(){a._update(this.value,i)};var g=this._makeLabel(i[i.length-1],i);this._makeItem(i,g,o)}},{key:"_makeRange",value:function(t,e,i){var o=t[0],n=t[1],r=t[2],s=t[3],a=document.createElement("input");a.className="vis-configuration vis-config-range";try{a.type="range",a.min=n,a.max=r}catch(t){}a.step=s;var g="",l=0;if(void 0!==e){var h=1.2;e<0&&e*h<n?(a.min=Math.ceil(e*h),l=a.min,g="range increased"):e/h<n&&(a.min=Math.ceil(e/h),l=a.min,g="range increased"),e*h>r&&1!==r&&(a.max=Math.ceil(e*h),l=a.max,g="range increased"),a.value=e}else a.value=o;var c=document.createElement("input");c.className="vis-configuration vis-config-rangeinput",c.value=a.value;var u=this;a.onchange=function(){c.value=this.value,u._update(Number(this.value),i)},a.oninput=function(){c.value=this.value};var d=this._makeLabel(i[i.length-1],i),A=this._makeItem(i,d,a,c);""!==g&&this.popupHistory[A]!==l&&(this.popupHistory[A]=l,this._setupPopup(g,A))}},{key:"_makeButton",value:function(){var t=this;if(!0===this.options.showButton){var e=document.createElement("div");e.className="vis-configuration vis-config-button",e.innerText="generate options",e.onclick=function(){t._printOptions()},e.onmouseover=function(){e.className="vis-configuration vis-config-button hover"},e.onmouseout=function(){e.className="vis-configuration vis-config-button"},this.optionsContainer=document.createElement("div"),this.optionsContainer.className="vis-configuration vis-config-option-container",this.domElements.push(this.optionsContainer),this.domElements.push(e)}}},{key:"_setupPopup",value:function(t,e){var i=this;if(!0===this.initialized&&!0===this.allowCreation&&this.popupCounter<this.popupLimit){var o=document.createElement("div");o.id="vis-configuration-popup",o.className="vis-configuration-popup",o.innerText=t,o.onclick=function(){i._removePopup()},this.popupCounter+=1,this.popupDiv={html:o,index:e}}}},{key:"_removePopup",value:function(){void 0!==this.popupDiv.html&&(this.popupDiv.html.parentNode.removeChild(this.popupDiv.html),clearTimeout(this.popupDiv.hideTimeout),clearTimeout(this.popupDiv.deleteTimeout),this.popupDiv={})}},{key:"_showPopupIfNeeded",value:function(){var t=this;if(void 0!==this.popupDiv.html){var e=this.domElements[this.popupDiv.index].getBoundingClientRect();this.popupDiv.html.style.left=e.left+"px",this.popupDiv.html.style.top=e.top-30+"px",document.body.appendChild(this.popupDiv.html),this.popupDiv.hideTimeout=fb((function(){t.popupDiv.html.style.opacity=0}),1500),this.popupDiv.deleteTimeout=fb((function(){t._removePopup()}),1800)}}},{key:"_makeCheckbox",value:function(t,e,i){var o=document.createElement("input");o.type="checkbox",o.className="vis-configuration vis-config-checkbox",o.checked=t,void 0!==e&&(o.checked=e,e!==t&&("object"===Ep(t)?e!==t.enabled&&this.changedOptions.push({path:i,value:e}):this.changedOptions.push({path:i,value:e})));var n=this;o.onchange=function(){n._update(this.checked,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,o)}},{key:"_makeTextInput",value:function(t,e,i){var o=document.createElement("input");o.type="text",o.className="vis-configuration vis-config-text",o.value=e,e!==t&&this.changedOptions.push({path:i,value:e});var n=this;o.onchange=function(){n._update(this.value,i)};var r=this._makeLabel(i[i.length-1],i);this._makeItem(i,r,o)}},{key:"_makeColorField",value:function(t,e,i){var o=this,n=t[1],r=document.createElement("div");"none"!==(e=void 0===e?n:e)?(r.className="vis-configuration vis-config-colorBlock",r.style.backgroundColor=e):r.className="vis-configuration vis-config-colorBlock none",e=void 0===e?n:e,r.onclick=function(){o._showColorPicker(e,r,i)};var s=this._makeLabel(i[i.length-1],i);this._makeItem(i,s,r)}},{key:"_showColorPicker",value:function(t,e,i){var o=this;e.onclick=function(){},this.colorPicker.insertTo(e),this.colorPicker.show(),this.colorPicker.setColor(t),this.colorPicker.setUpdateCallback((function(t){var n="rgba("+t.r+","+t.g+","+t.b+","+t.a+")";e.style.backgroundColor=n,o._update(n,i)})),this.colorPicker.setCloseCallback((function(){e.onclick=function(){o._showColorPicker(t,e,i)}}))}},{key:"_handleObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!1,n=dm(this.options),r=!1;for(var s in t)if(Object.prototype.hasOwnProperty.call(t,s)){o=!0;var a=t[s],g=R_(e,s);if("function"==typeof n&&!1===(o=n(s,e))&&!Nf(a)&&"string"!=typeof a&&"boolean"!=typeof a&&a instanceof Object&&(this.allowCreation=!1,o=this._handleObject(a,g,!0),this.allowCreation=!1===i),!1!==o){r=!0;var l=this._getValue(g);if(Nf(a))this._handleArray(a,l,g);else if("string"==typeof a)this._makeTextInput(a,l,g);else if("boolean"==typeof a)this._makeCheckbox(a,l,g);else if(a instanceof Object){if(!this.hideOption(e,s,this.moduleOptions))if(void 0!==a.enabled){var h=R_(g,"enabled"),c=this._getValue(h);if(!0===c){var u=this._makeLabel(s,g,!0);this._makeItem(g,u),r=this._handleObject(a,g)||r}else this._makeCheckbox(a,c,g)}else{var d=this._makeLabel(s,g,!0);this._makeItem(g,d),r=this._handleObject(a,g)||r}}else console.error("dont know how to handle",a,s,g)}}return r}},{key:"_handleArray",value:function(t,e,i){"string"==typeof t[0]&&"color"===t[0]?(this._makeColorField(t,e,i),t[1]!==e&&this.changedOptions.push({path:i,value:e})):"string"==typeof t[0]?(this._makeDropdown(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:e})):"number"==typeof t[0]&&(this._makeRange(t,e,i),t[0]!==e&&this.changedOptions.push({path:i,value:Number(e)}))}},{key:"_update",value:function(t,e){var i=this._constructOptions(t,e);this.parent.body&&this.parent.body.emitter&&this.parent.body.emitter.emit&&this.parent.body.emitter.emit("configChange",i),this.initialized=!0,this.parent.setOptions(i)}},{key:"_constructOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i;t="false"!==(t="true"===t||t)&&t;for(var n=0;n<e.length;n++)"global"!==e[n]&&(void 0===o[e[n]]&&(o[e[n]]={}),n!==e.length-1?o=o[e[n]]:o[e[n]]=t);return i}},{key:"_printOptions",value:function(){for(var t=this.getOptions();this.optionsContainer.firstChild;)this.optionsContainer.removeChild(this.optionsContainer.firstChild);this.optionsContainer.appendChild(X_("pre","const options = "+Jm(t,null,2)))}},{key:"getOptions",value:function(){for(var t={},e=0;e<this.changedOptions.length;e++)this._constructOptions(this.changedOptions[e].value,this.changedOptions[e].path,t);return t}}]),t}(),tT=C_,eT=function(){function t(e,i){yd(this,t),this.container=e,this.overflowMethod=i||"cap",this.x=0,this.y=0,this.padding=5,this.hidden=!1,this.frame=document.createElement("div"),this.frame.className="vis-tooltip",this.container.appendChild(this.frame)}return Sp(t,[{key:"setPosition",value:function(t,e){this.x=Lm(t),this.y=Lm(e)}},{key:"setText",value:function(t){if(t instanceof Element){for(;this.frame.firstChild;)this.frame.removeChild(this.frame.firstChild);this.frame.appendChild(t)}else this.frame.innerText=t}},{key:"show",value:function(t){if(void 0===t&&(t=!0),!0===t){var e=this.frame.clientHeight,i=this.frame.clientWidth,o=this.frame.parentNode.clientHeight,n=this.frame.parentNode.clientWidth,r=0,s=0;if("flip"==this.overflowMethod){var a=!1,g=!0;this.y-e<this.padding&&(g=!1),this.x+i>n-this.padding&&(a=!0),r=a?this.x-i:this.x,s=g?this.y-e:this.y}else(s=this.y-e)+e+this.padding>o&&(s=o-e-this.padding),s<this.padding&&(s=this.padding),(r=this.x)+i+this.padding>n&&(r=n-i-this.padding),r<this.padding&&(r=this.padding);this.frame.style.left=r+"px",this.frame.style.top=s+"px",this.frame.style.visibility="visible",this.hidden=!1}else this.hide()}},{key:"hide",value:function(){this.hidden=!0,this.frame.style.left="0",this.frame.style.top="0",this.frame.style.visibility="hidden"}},{key:"destroy",value:function(){this.frame.parentNode.removeChild(this.frame)}}]),t}(),iT=Q_,oT=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"validate",value:function(e,i,o){K_=!1,Z_=i;var n=i;return void 0!==o&&(n=i[o]),t.parse(e,n,[]),K_}},{key:"parse",value:function(e,i,o){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.check(n,e,i,o)}},{key:"check",value:function(e,i,o,n){if(void 0!==o[e]||void 0!==o.__any__){var r=e,s=!0;void 0===o[e]&&void 0!==o.__any__&&(r="__any__",s="object"===t.getType(i[e]));var a=o[r];s&&void 0!==a.__type__&&(a=a.__type__),t.checkFields(e,i,o,r,a,n)}else t.getSuggestion(e,o,n)}},{key:"checkFields",value:function(e,i,o,n,r,s){var a=function(i){console.error("%c"+i+t.printLocation(s,e),Q_)},g=t.getType(i[e]),l=r[g];void 0!==l?"array"===t.getType(l)&&-1===Wm(l).call(l,i[e])?(a('Invalid option detected in "'+e+'". Allowed values are:'+t.print(l)+' not "'+i[e]+'". '),K_=!0):"object"===g&&"__any__"!==n&&(s=R_(s,e),t.parse(i[e],o[n],s)):void 0===r.any&&(a('Invalid type received for "'+e+'". Expected: '+t.print(Uf(r))+". Received ["+g+'] "'+i[e]+'"'),K_=!0)}},{key:"getType",value:function(t){var e=Ep(t);return"object"===e?null===t?"null":t instanceof Boolean?"boolean":t instanceof Number?"number":t instanceof String?"string":Nf(t)?"array":t instanceof Date?"date":void 0!==t.nodeType?"dom":!0===t._isAMomentObject?"moment":"object":"number"===e?"number":"boolean"===e?"boolean":"string"===e?"string":void 0===e?"undefined":e}},{key:"getSuggestion",value:function(e,i,o){var n,r=t.findInOptions(e,i,o,!1),s=t.findInOptions(e,Z_,[],!0);n=void 0!==r.indexMatch?" in "+t.printLocation(r.path,e,"")+'Perhaps it was incomplete? Did you mean: "'+r.indexMatch+'"?\n\n':s.distance<=4&&r.distance>s.distance?" in "+t.printLocation(r.path,e,"")+"Perhaps it was misplaced? Matching option found at: "+t.printLocation(s.path,s.closestMatch,""):r.distance<=8?'. Did you mean "'+r.closestMatch+'"?'+t.printLocation(r.path,e):". Did you mean one of these: "+t.print(Uf(i))+t.printLocation(o,e),console.error('%cUnknown option detected: "'+e+'"'+n,Q_),K_=!0}},{key:"findInOptions",value:function(e,i,o){var n,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=1e9,a="",g=[],l=e.toLowerCase(),h=void 0;for(var c in i){var u=void 0;if(void 0!==i[c].__type__&&!0===r){var d=t.findInOptions(e,i[c],R_(o,c));s>d.distance&&(a=d.closestMatch,g=d.path,s=d.distance,h=d.indexMatch)}else{var A;-1!==Wm(A=c.toLowerCase()).call(A,l)&&(h=c),s>(u=t.levenshteinDistance(e,c))&&(a=c,g=wf(n=o).call(n),s=u)}}return{closestMatch:a,path:g,distance:s,indexMatch:h}}},{key:"printLocation",value:function(t,e){for(var i="\n\n"+(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Problem value found at: \n")+"options = {\n",o=0;o<t.length;o++){for(var n=0;n<o+1;n++)i+="  ";i+=t[o]+": {\n"}for(var r=0;r<t.length+1;r++)i+="  ";i+=e+"\n";for(var s=0;s<t.length+1;s++){for(var a=0;a<t.length-s;a++)i+="  ";i+="}\n"}return i+"\n\n"}},{key:"print",value:function(t){return Jm(t).replace(/(")|(\[)|(\])|(,"__type__")/g,"").replace(/(,)/g,", ")}},{key:"levenshteinDistance",value:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;var i,o,n=[];for(i=0;i<=e.length;i++)n[i]=[i];for(o=0;o<=t.length;o++)n[0][o]=o;for(i=1;i<=e.length;i++)for(o=1;o<=t.length;o++)e.charAt(i-1)==t.charAt(o-1)?n[i][o]=n[i-1][o-1]:n[i][o]=Math.min(n[i-1][o-1]+1,Math.min(n[i][o-1]+1,n[i-1][o]+1));return n[e.length][t.length]}}]),t}();var nT={fontsize:"font.size",fontcolor:"font.color",labelfontcolor:"font.color",fontname:"font.face",color:["color.border","color.background"],fillcolor:"color.background",tooltip:"title",labeltooltip:"title"},rT=Xm(nT);rT.color="color.color",rT.style="dashes";var sT={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},aT={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},gT="",lT=0,hT="",cT="",uT=sT.NULL;function dT(){lT++,hT=gT.charAt(lT)}function AT(){return gT.charAt(lT+1)}function IT(t){var e=t.charCodeAt(0);return e<47?35===e||46===e:e<59?e>47:e<91?e>64:e<96?95===e:e<123&&e>96}function CT(t,e){if(t||(t={}),e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function pT(t,e,i){for(var o=e.split("."),n=t;o.length;){var r=o.shift();o.length?(n[r]||(n[r]={}),n=n[r]):n[r]=i}}function fT(t,e){for(var i,o,n=null,r=[t],s=t;s.parent;)r.push(s.parent),s=s.parent;if(s.nodes)for(i=0,o=s.nodes.length;i<o;i++)if(e.id===s.nodes[i].id){n=s.nodes[i];break}for(n||(n={id:e.id},t.node&&(n.attr=CT(n.attr,t.node))),i=r.length-1;i>=0;i--){var a,g=r[i];g.nodes||(g.nodes=[]),-1===Wm(a=g.nodes).call(a,n)&&g.nodes.push(n)}e.attr&&(n.attr=CT(n.attr,e.attr))}function vT(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var i=CT({},t.edge);e.attr=CT(i,e.attr)}}function mT(t,e,i,o,n){var r={from:e,to:i,type:o};return t.edge&&(r.attr=CT({},t.edge)),r.attr=CT(r.attr||{},n),null!=n&&n.hasOwnProperty("arrows")&&null!=n.arrows&&(r.arrows={to:{enabled:!0,type:n.arrows.type}},n.arrows=null),r}function bT(){for(uT=sT.NULL,cT="";" "===hT||"\t"===hT||"\n"===hT||"\r"===hT;)dT();do{var t=!1;if("#"===hT){for(var e=lT-1;" "===gT.charAt(e)||"\t"===gT.charAt(e);)e--;if("\n"===gT.charAt(e)||""===gT.charAt(e)){for(;""!=hT&&"\n"!=hT;)dT();t=!0}}if("/"===hT&&"/"===AT()){for(;""!=hT&&"\n"!=hT;)dT();t=!0}if("/"===hT&&"*"===AT()){for(;""!=hT;){if("*"===hT&&"/"===AT()){dT(),dT();break}dT()}t=!0}for(;" "===hT||"\t"===hT||"\n"===hT||"\r"===hT;)dT()}while(t);if(""!==hT){var i=hT+AT();if(aT[i])return uT=sT.DELIMITER,cT=i,dT(),void dT();if(aT[hT])return uT=sT.DELIMITER,cT=hT,void dT();if(IT(hT)||"-"===hT){for(cT+=hT,dT();IT(hT);)cT+=hT,dT();return"false"===cT?cT=!1:"true"===cT?cT=!0:isNaN(Number(cT))||(cT=Number(cT)),void(uT=sT.IDENTIFIER)}if('"'===hT){for(dT();""!=hT&&('"'!=hT||'"'===hT&&'"'===AT());)'"'===hT?(cT+=hT,dT()):"\\"===hT&&"n"===AT()?(cT+="\n",dT()):cT+=hT,dT();if('"'!=hT)throw kT('End of string " expected');return dT(),void(uT=sT.IDENTIFIER)}for(uT=sT.UNKNOWN;""!=hT;)cT+=hT,dT();throw new SyntaxError('Syntax error in part "'+OT(cT,30)+'"')}uT=sT.DELIMITER}function yT(t){for(;""!==cT&&"}"!=cT;)_T(t),";"===cT&&bT()}function _T(t){var e=TT(t);if(e)ET(t,e);else{var i=function(t){return"node"===cT?(bT(),t.node=wT(),"node"):"edge"===cT?(bT(),t.edge=wT(),"edge"):"graph"===cT?(bT(),t.graph=wT(),"graph"):null}(t);if(!i){if(uT!=sT.IDENTIFIER)throw kT("Identifier expected");var o=cT;if(bT(),"="===cT){if(bT(),uT!=sT.IDENTIFIER)throw kT("Identifier expected");t[o]=cT,bT()}else!function(t,e){var i={id:e},o=wT();o&&(i.attr=o),fT(t,i),ET(t,e)}(t,o)}}}function TT(t){var e=null;if("subgraph"===cT&&((e={}).type="subgraph",bT(),uT===sT.IDENTIFIER&&(e.id=cT,bT())),"{"===cT){if(bT(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,yT(e),"}"!=cT)throw kT("Angle bracket } expected");bT(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function ET(t,e){for(;"->"===cT||"--"===cT;){var i,o=cT;bT();var n=TT(t);if(n)i=n;else{if(uT!=sT.IDENTIFIER)throw kT("Identifier or subgraph expected");fT(t,{id:i=cT}),bT()}vT(t,mT(t,e,i,o,wT())),e=i}}function wT(){for(var t,e,i=null,o={dashed:!0,solid:!1,dotted:[1,5]},n={dot:"circle",box:"box",crow:"crow",curve:"curve",icurve:"inv_curve",normal:"triangle",inv:"inv_triangle",diamond:"diamond",tee:"bar",vee:"vee"},r=new Array,s=new Array;"["===cT;){for(bT(),i={};""!==cT&&"]"!=cT;){if(uT!=sT.IDENTIFIER)throw kT("Attribute name expected");var a=cT;if(bT(),"="!=cT)throw kT("Equal sign = expected");if(bT(),uT!=sT.IDENTIFIER)throw kT("Attribute value expected");var g=cT;"style"===a&&(g=o[g]),"arrowhead"===a&&(a="arrows",g={to:{enabled:!0,type:n[g]}}),"arrowtail"===a&&(a="arrows",g={from:{enabled:!0,type:n[g]}}),r.push({attr:i,name:a,value:g}),s.push(a),bT(),","==cT&&bT()}if("]"!=cT)throw kT("Bracket ] expected");bT()}if(im(s).call(s,"dir")){var l={arrows:{}};for(t=0;t<r.length;t++)if("arrows"===r[t].name)if(null!=r[t].value.to)l.arrows.to=t;else{if(null==r[t].value.from)throw kT("Invalid value of arrows");l.arrows.from=t}else"dir"===r[t].name&&(l.dir=t);var h,c,u=r[l.dir].value;if(!im(s).call(s,"arrows"))if("both"===u)r.push({attr:r[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=r.length-1,r.push({attr:r[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=r.length-1;else if("forward"===u)r.push({attr:r[l.dir].attr,name:"arrows",value:{to:{enabled:!0}}}),l.arrows.to=r.length-1;else if("back"===u)r.push({attr:r[l.dir].attr,name:"arrows",value:{from:{enabled:!0}}}),l.arrows.from=r.length-1;else{if("none"!==u)throw kT('Invalid dir type "'+u+'"');r.push({attr:r[l.dir].attr,name:"arrows",value:""}),l.arrows.to=r.length-1}if("both"===u)l.arrows.to&&l.arrows.from?(c=r[l.arrows.to].value.to.type,h=r[l.arrows.from].value.from.type,r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}},$v(r).call(r,l.arrows.from,1)):l.arrows.to?(c=r[l.arrows.to].value.to.type,h="arrow",r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}):l.arrows.from&&(c="arrow",h=r[l.arrows.from].value.from.type,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}});else if("back"===u)l.arrows.to&&l.arrows.from?(c="",h=r[l.arrows.from].value.from.type,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}):l.arrows.to?(c="",h="arrow",l.arrows.from=l.arrows.to,r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}):l.arrows.from&&(c="",h=r[l.arrows.from].value.from.type,r[l.arrows.to]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}),r[l.arrows.from]={attr:r[l.arrows.from].attr,name:r[l.arrows.from].name,value:{from:{enabled:!0,type:r[l.arrows.from].value.from.type}}};else if("none"===u){var d;r[d=l.arrows.to?l.arrows.to:l.arrows.from]={attr:r[d].attr,name:r[d].name,value:""}}else{if("forward"!==u)throw kT('Invalid dir type "'+u+'"');l.arrows.to&&l.arrows.from||l.arrows.to?(c=r[l.arrows.to].value.to.type,h="",r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}):l.arrows.from&&(c="arrow",h="",l.arrows.to=l.arrows.from,r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:c},from:{enabled:!0,type:h}}}),r[l.arrows.to]={attr:r[l.arrows.to].attr,name:r[l.arrows.to].name,value:{to:{enabled:!0,type:r[l.arrows.to].value.to.type}}}}$v(r).call(r,l.dir,1)}if(im(s).call(s,"penwidth")){var A=[];for(e=r.length,t=0;t<e;t++)"width"!==r[t].name&&("penwidth"===r[t].name&&(r[t].name="width"),A.push(r[t]));r=A}for(e=r.length,t=0;t<e;t++)pT(r[t].attr,r[t].name,r[t].value);return i}function kT(t){return new SyntaxError(t+', got "'+OT(cT,30)+'" (char '+lT+")")}function OT(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function ST(t,e,i){for(var o=e.split("."),n=o.pop(),r=t,s=0;s<o.length;s++){var a=o[s];a in r||(r[a]={}),r=r[a]}return r[n]=i,t}function RT(t,e){var i={};for(var o in t)if(t.hasOwnProperty(o)){var n=e[o];Nf(n)?sv(n).call(n,(function(e){ST(i,e,t[o])})):ST(i,"string"==typeof n?n:o,t[o])}return i}function xT(t){var e,i=function(t){return gT=t,function(){var t={};if(lT=0,hT=gT.charAt(0),bT(),"strict"===cT&&(t.strict=!0,bT()),"graph"!==cT&&"digraph"!==cT||(t.type=cT,bT()),uT===sT.IDENTIFIER&&(t.id=cT,bT()),"{"!=cT)throw kT("Angle bracket { expected");if(bT(),yT(t),"}"!=cT)throw kT("Angle bracket } expected");if(bT(),""!==cT)throw kT("End of file expected");return bT(),delete t.node,delete t.edge,delete t.graph,t}()}(t),o={nodes:[],edges:[],options:{}};if(i.nodes&&sv(e=i.nodes).call(e,(function(t){var e={id:t.id,label:String(t.label||t.id)};CT(e,RT(t.attr,nT)),e.image&&(e.shape="image"),o.nodes.push(e)})),i.edges){var n,r=function(t){var e={from:t.from,to:t.to};return CT(e,RT(t.attr,rT)),null==e.arrows&&"->"===t.type&&(e.arrows="to"),e};sv(n=i.edges).call(n,(function(t){var e,i,n,s,a,g,l;e=t.from instanceof Object?t.from.nodes:{id:t.from},i=t.to instanceof Object?t.to.nodes:{id:t.to},t.from instanceof Object&&t.from.edges&&sv(n=t.from.edges).call(n,(function(t){var e=r(t);o.edges.push(e)})),a=i,g=function(e,i){var n=mT(o,e.id,i.id,t.type,t.attr),s=r(n);o.edges.push(s)},Nf(s=e)?sv(s).call(s,(function(t){Nf(a)?sv(a).call(a,(function(e){g(t,e)})):g(t,a)})):Nf(a)?sv(a).call(a,(function(t){g(s,t)})):g(s,a),t.to instanceof Object&&t.to.edges&&sv(l=t.to.edges).call(l,(function(t){var e=r(t);o.edges.push(e)}))}))}return i.attr&&(o.options=i.attr),o}var DT=Object.freeze({__proto__:null,cn:{addDescription:"åå»ç©ºç½å¤æ¾ç½®æ°èç¹ã",addEdge:"æ·»å è¿æ¥çº¿",addNode:"æ·»å èç¹",back:"è¿å",close:"éé",createEdgeError:"æ æ³å°è¿æ¥çº¿è¿æ¥å°ç¾¤éã",del:"å é¤éå®",deleteClusterError:"æ æ³å é¤ç¾¤éã",edgeDescription:"åå»æä¸ªèç¹å¹¶å°è¯¥è¿æ¥çº¿æå¨å°å¦ä¸ä¸ªèç¹ä»¥è¿æ¥å®ä»¬ã",edit:"ç¼è¾",editClusterError:"æ æ³ç¼è¾ç¾¤éã",editEdge:"ç¼è¾è¿æ¥çº¿",editEdgeDescription:"åå»æ§å¶èç¹å¹¶å°å®ä»¬æå°èç¹ä¸è¿æ¥ã",editNode:"ç¼è¾èç¹"},cs:{addDescription:"KluknutÃ­m do prÃ¡zdnÃ©ho prostoru mÅ¯Å¾ete pÅidat novÃ½ vrchol.",addEdge:"PÅidat hranu",addNode:"PÅidat vrchol",back:"ZpÄt",close:"ZavÅÃ­t",createEdgeError:"Nelze pÅipojit hranu ke shluku.",del:"Smazat vÃ½bÄr",deleteClusterError:"Nelze mazat shluky.",edgeDescription:"PÅetaÅ¾enÃ­m z jednoho vrcholu do druhÃ©ho mÅ¯Å¾ete spojit tyto vrcholy novou hranou.",edit:"Upravit",editClusterError:"Nelze upravovat shluky.",editEdge:"Upravit hranu",editEdgeDescription:"PÅetaÅ¾enÃ­m kontrolnÃ­ho vrcholu hrany ji mÅ¯Å¾ete pÅipojit k jinÃ©mu vrcholu.",editNode:"Upravit vrchol"},de:{addDescription:"Klicke auf eine freie Stelle, um einen neuen Knoten zu plazieren.",addEdge:"Kante hinzufÃ¼gen",addNode:"Knoten hinzufÃ¼gen",back:"ZurÃ¼ck",close:"SchlieÃen",createEdgeError:"Es ist nicht mÃ¶glich, Kanten mit Clustern zu verbinden.",del:"LÃ¶sche Auswahl",deleteClusterError:"Cluster kÃ¶nnen nicht gelÃ¶scht werden.",edgeDescription:"Klicke auf einen Knoten und ziehe die Kante zu einem anderen Knoten, um diese zu verbinden.",edit:"Editieren",editClusterError:"Cluster kÃ¶nnen nicht editiert werden.",editEdge:"Kante editieren",editEdgeDescription:"Klicke auf die Verbindungspunkte und ziehe diese auf einen Knoten, um sie zu verbinden.",editNode:"Knoten editieren"},en:{addDescription:"Click in an empty space to place a new node.",addEdge:"Add Edge",addNode:"Add Node",back:"Back",close:"Close",createEdgeError:"Cannot link edges to a cluster.",del:"Delete selected",deleteClusterError:"Clusters cannot be deleted.",edgeDescription:"Click on a node and drag the edge to another node to connect them.",edit:"Edit",editClusterError:"Clusters cannot be edited.",editEdge:"Edit Edge",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",editNode:"Edit Node"},es:{addDescription:"Haga clic en un lugar vacÃ­o para colocar un nuevo nodo.",addEdge:"AÃ±adir arista",addNode:"AÃ±adir nodo",back:"AtrÃ¡s",close:"Cerrar",createEdgeError:"No se puede conectar una arista a un grupo.",del:"Eliminar selecciÃ³n",deleteClusterError:"No es posible eliminar grupos.",edgeDescription:"Haga clic en un nodo y arrastre la arista hacia otro nodo para conectarlos.",edit:"Editar",editClusterError:"No es posible editar grupos.",editEdge:"Editar arista",editEdgeDescription:"Haga clic en un punto de control y arrastrelo a un nodo para conectarlo.",editNode:"Editar nodo"},fr:{addDescription:"Cliquez dans un endroit vide pour placer un nÅud.",addEdge:"Ajouter un lien",addNode:"Ajouter un nÅud",back:"Retour",close:"Fermer",createEdgeError:"Impossible de crÃ©er un lien vers un cluster.",del:"Effacer la sÃ©lection",deleteClusterError:"Les clusters ne peuvent pas Ãªtre effacÃ©s.",edgeDescription:"Cliquez sur un nÅud et glissez le lien vers un autre nÅud pour les connecter.",edit:"Ãditer",editClusterError:"Les clusters ne peuvent pas Ãªtre Ã©ditÃ©s.",editEdge:"Ãditer le lien",editEdgeDescription:"Cliquez sur les points de contrÃ´le et glissez-les pour connecter un nÅud.",editNode:"Ãditer le nÅud"},it:{addDescription:"Clicca per aggiungere un nuovo nodo",addEdge:"Aggiungi un vertice",addNode:"Aggiungi un nodo",back:"Indietro",close:"Chiudere",createEdgeError:"Non si possono collegare vertici ad un cluster",del:"Cancella la selezione",deleteClusterError:"I cluster non possono essere cancellati",edgeDescription:"Clicca su un nodo e trascinalo ad un altro nodo per connetterli.",edit:"Modifica",editClusterError:"I clusters non possono essere modificati.",editEdge:"Modifica il vertice",editEdgeDescription:"Clicca sui Punti di controllo e trascinali ad un nodo per connetterli.",editNode:"Modifica il nodo"},nl:{addDescription:"Klik op een leeg gebied om een nieuwe node te maken.",addEdge:"Link toevoegen",addNode:"Node toevoegen",back:"Terug",close:"Sluiten",createEdgeError:"Kan geen link maken naar een cluster.",del:"Selectie verwijderen",deleteClusterError:"Clusters kunnen niet worden verwijderd.",edgeDescription:"Klik op een node en sleep de link naar een andere node om ze te verbinden.",edit:"Wijzigen",editClusterError:"Clusters kunnen niet worden aangepast.",editEdge:"Link wijzigen",editEdgeDescription:"Klik op de verbindingspunten en sleep ze naar een node om daarmee te verbinden.",editNode:"Node wijzigen"},pt:{addDescription:"Clique em um espaÃ§o em branco para adicionar um novo nÃ³",addEdge:"Adicionar aresta",addNode:"Adicionar nÃ³",back:"Voltar",close:"Fechar",createEdgeError:"NÃ£o foi possÃ­vel linkar arestas a um cluster.",del:"Remover selecionado",deleteClusterError:"Clusters nÃ£o puderam ser removidos.",edgeDescription:"Clique em um nÃ³ e arraste a aresta atÃ© outro nÃ³ para conectÃ¡-los",edit:"Editar",editClusterError:"Clusters nÃ£o puderam ser editados.",editEdge:"Editar aresta",editEdgeDescription:"Clique nos pontos de controle e os arraste para um nÃ³ para conectÃ¡-los",editNode:"Editar nÃ³"},ru:{addDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð² ÑÐ²Ð¾Ð±Ð¾Ð´Ð½Ð¾Ðµ Ð¼ÐµÑÑÐ¾, ÑÑÐ¾Ð±Ñ Ð´Ð¾Ð±Ð°Ð²Ð¸ÑÑ Ð½Ð¾Ð²ÑÐ¹ ÑÐ·ÐµÐ».",addEdge:"ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ ÑÐµÐ±ÑÐ¾",addNode:"ÐÐ¾Ð±Ð°Ð²Ð¸ÑÑ ÑÐ·ÐµÐ»",back:"ÐÐ°Ð·Ð°Ð´",close:"ÐÐ°ÐºÑÑÐ²Ð°ÑÑ",createEdgeError:"ÐÐµÐ²Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑ ÑÐµÐ±ÑÐ° Ð² ÐºÐ»Ð°ÑÑÐµÑ.",del:"Ð£Ð´Ð°Ð»Ð¸ÑÑ Ð²ÑÐ±ÑÐ°Ð½Ð½Ð¾Ðµ",deleteClusterError:"ÐÐ»Ð°ÑÑÐµÑÑ Ð½Ðµ Ð¼Ð¾Ð³ÑÑ Ð±ÑÑÑ ÑÐ´Ð°Ð»ÐµÐ½Ñ",edgeDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð½Ð° ÑÐ·ÐµÐ» Ð¸ Ð¿ÑÐ¾ÑÑÐ½Ð¸ÑÐµ ÑÐµÐ±ÑÐ¾ Ðº Ð´ÑÑÐ³Ð¾Ð¼Ñ ÑÐ·Ð»Ñ, ÑÑÐ¾Ð±Ñ ÑÐ¾ÐµÐ´Ð¸Ð½Ð¸ÑÑ Ð¸Ñ.",edit:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ",editClusterError:"ÐÐ»Ð°ÑÑÐµÑÑ Ð½ÐµÐ´Ð¾ÑÑÑÐ¿Ð½Ñ Ð´Ð»Ñ ÑÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°Ð½Ð¸Ñ.",editEdge:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ ÑÐµÐ±ÑÐ¾",editEdgeDescription:"ÐÐ»Ð¸ÐºÐ½Ð¸ÑÐµ Ð½Ð° ÐºÐ¾Ð½ÑÑÐ¾Ð»ÑÐ½ÑÐµ ÑÐ¾ÑÐºÐ¸ Ð¸ Ð¿ÐµÑÐµÑÐ°ÑÐ¸ÑÐµ Ð¸Ñ Ð² ÑÐ·ÐµÐ», ÑÑÐ¾Ð±Ñ Ð¿Ð¾Ð´ÐºÐ»ÑÑÐ¸ÑÑÑÑ Ðº Ð½ÐµÐ¼Ñ.",editNode:"Ð ÐµÐ´Ð°ÐºÑÐ¸ÑÐ¾Ð²Ð°ÑÑ ÑÐ·ÐµÐ»"},uk:{addDescription:"KÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° Ð²ÑÐ»ÑÐ½Ðµ Ð¼ÑÑÑÐµ, ÑÐ¾Ð± Ð´Ð¾Ð´Ð°ÑÐ¸ Ð½Ð¾Ð²Ð¸Ð¹ Ð²ÑÐ·Ð¾Ð».",addEdge:"ÐÐ¾Ð´Ð°ÑÐ¸ ÐºÑÐ°Ð¹",addNode:"ÐÐ¾Ð´Ð°ÑÐ¸ Ð²ÑÐ·Ð¾Ð»",back:"ÐÐ°Ð·Ð°Ð´",close:"ÐÐ°ÐºÑÐ¸ÑÐ¸",createEdgeError:"ÐÐµ Ð¼Ð¾Ð¶Ð»Ð¸Ð²Ð¾ Ð¾Ð±'ÑÐ´Ð½Ð°ÑÐ¸ ÐºÑÐ°Ñ Ð² Ð³ÑÑÐ¿Ñ.",del:"ÐÐ¸Ð´Ð°Ð»Ð¸ÑÐ¸ Ð¾Ð±ÑÐ°Ð½Ðµ",deleteClusterError:"ÐÑÑÐ¿Ð¸ Ð½Ðµ Ð¼Ð¾Ð¶ÑÑÑ Ð±ÑÑÐ¸ Ð²Ð¸Ð´Ð°Ð»ÐµÐ½Ñ.",edgeDescription:"ÐÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° Ð²ÑÐ·Ð¾Ð» Ñ Ð¿ÐµÑÐµÑÑÐ³Ð½ÑÑÑ ÐºÑÐ°Ð¹ Ð´Ð¾ ÑÐ½ÑÐ¾Ð³Ð¾ Ð²ÑÐ·Ð»Ð°, ÑÐ¾Ð± ÑÑ Ð·'ÑÐ´Ð½Ð°ÑÐ¸.",edit:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸",editClusterError:"ÐÑÑÐ¿Ð¸ Ð½ÐµÐ´Ð¾ÑÑÑÐ¿Ð½Ñ Ð´Ð»Ñ ÑÐµÐ´Ð°Ð³ÑÐ²Ð°Ð½Ð½Ñ.",editEdge:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸ ÐºÑÐ°Ð¹",editEdgeDescription:"ÐÐ»ÑÐºÐ½ÑÑÑ Ð½Ð° ÐºÐ¾Ð½ÑÑÐ¾Ð»ÑÐ½Ñ ÑÐ¾ÑÐºÐ¸ Ñ Ð¿ÐµÑÐµÑÑÐ³Ð½ÑÑÑ ÑÑ Ñ Ð²ÑÐ·Ð¾Ð», ÑÐ¾Ð± Ð¿ÑÐ´ÐºÐ»ÑÑÐ¸ÑÐ¸ÑÑ Ð´Ð¾ Ð½ÑÐ¾Ð³Ð¾.",editNode:"Ð ÐµÐ´Ð°Ð³ÑÐ²Ð°ÑÐ¸ Ð²ÑÐ·Ð¾Ð»"}}),MT=function(){function t(){yd(this,t),this.NUM_ITERATIONS=4,this.image=new Image,this.canvas=document.createElement("canvas")}return Sp(t,[{key:"init",value:function(){if(!this.initialized()){this.src=this.image.src;var t=this.image.width,e=this.image.height;this.width=t,this.height=e;var i=Math.floor(e/2),o=Math.floor(e/4),n=Math.floor(e/8),r=Math.floor(e/16),s=Math.floor(t/2),a=Math.floor(t/4),g=Math.floor(t/8),l=Math.floor(t/16);this.canvas.width=3*a,this.canvas.height=i,this.coordinates=[[0,0,s,i],[s,0,a,o],[s,o,g,n],[5*g,o,l,r]],this._fillMipMap()}}},{key:"initialized",value:function(){return void 0!==this.coordinates}},{key:"_fillMipMap",value:function(){var t=this.canvas.getContext("2d"),e=this.coordinates[0];t.drawImage(this.image,e[0],e[1],e[2],e[3]);for(var i=1;i<this.NUM_ITERATIONS;i++){var o=this.coordinates[i-1],n=this.coordinates[i];t.drawImage(this.canvas,o[0],o[1],o[2],o[3],n[0],n[1],n[2],n[3])}}},{key:"drawImageAtPosition",value:function(t,e,i,o,n,r){if(this.initialized())if(e>2){e*=.5;for(var s=0;e>2&&s<this.NUM_ITERATIONS;)e*=.5,s+=1;s>=this.NUM_ITERATIONS&&(s=this.NUM_ITERATIONS-1);var a=this.coordinates[s];t.drawImage(this.canvas,a[0],a[1],a[2],a[3],i,o,n,r)}else t.drawImage(this.image,i,o,n,r)}}]),t}(),NT=function(){function t(e){yd(this,t),this.images={},this.imageBroken={},this.callback=e}return Sp(t,[{key:"_tryloadBrokenUrl",value:function(t,e,i){void 0!==t&&void 0!==i&&(void 0!==e?(i.image.onerror=function(){console.error("Could not load brokenImage:",e)},i.image.src=e):console.warn("No broken url image defined"))}},{key:"_redrawWithImage",value:function(t){this.callback&&this.callback(t)}},{key:"load",value:function(t,e){var i=this,o=this.images[t];if(o)return o;var n=new MT;return this.images[t]=n,n.image.onload=function(){i._fixImageCoordinates(n.image),n.init(),i._redrawWithImage(n)},n.image.onerror=function(){console.error("Could not load image:",t),i._tryloadBrokenUrl(t,e,n)},n.image.src=t,n}},{key:"_fixImageCoordinates",value:function(t){0===t.width&&(document.body.appendChild(t),t.width=t.offsetWidth,t.height=t.offsetHeight,document.body.removeChild(t))}}]),t}(),LT={exports:{}},PT=wn((function(){if("function"==typeof ArrayBuffer){var t=new ArrayBuffer(8);Object.isExtensible(t)&&Object.defineProperty(t,"a",{value:8})}})),$T=wn,BT=br,FT=Hn,zT=PT,HT=Object.isExtensible,GT=$T((function(){HT(1)}))||zT?function(t){return!!BT(t)&&(!zT||"ArrayBuffer"!==FT(t))&&(!HT||HT(t))}:HT,UT=!wn((function(){return Object.isExtensible(Object.preventExtensions({}))})),VT=Ya,WT=$n,jT=hg,YT=br,XT=fs,ZT=Ca.f,KT=sA,QT=lA,JT=GT,qT=UT,tE=!1,eE=_s("meta"),iE=0,oE=function(t){ZT(t,eE,{value:{objectID:"O"+iE++,weakData:{}}})},nE=LT.exports={enable:function(){nE.enable=function(){},tE=!0;var t=KT.f,e=WT([].splice),i={};i[eE]=1,t(i).length&&(KT.f=function(i){for(var o=t(i),n=0,r=o.length;n<r;n++)if(o[n]===eE){e(o,n,1);break}return o},VT({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:QT.f}))},fastKey:function(t,e){if(!YT(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!XT(t,eE)){if(!JT(t))return"F";if(!e)return"E";oE(t)}return t[eE].objectID},getWeakData:function(t,e){if(!XT(t,eE)){if(!JT(t))return!0;if(!e)return!1;oE(t)}return t[eE].weakData},onFreeze:function(t){return qT&&tE&&JT(t)&&!XT(t,eE)&&oE(t),t}};jT[eE]=!0;var rE=LT.exports,sE=Ia,aE=qn,gE=ba,lE=Xr,hE=iu,cE=ng,uE=Or,dE=$u,AE=Ru,IE=Kc,CE=TypeError,pE=function(t,e){this.stopped=t,this.result=e},fE=pE.prototype,vE=function(t,e,i){var o,n,r,s,a,g,l,h=i&&i.that,c=!(!i||!i.AS_ENTRIES),u=!(!i||!i.IS_RECORD),d=!(!i||!i.IS_ITERATOR),A=!(!i||!i.INTERRUPTED),I=sE(e,h),C=function(t){return o&&IE(o,"normal",t),new pE(!0,t)},p=function(t){return c?(gE(t),A?I(t[0],t[1],C):I(t[0],t[1])):A?I(t,C):I(t)};if(u)o=t.iterator;else if(d)o=t;else{if(!(n=AE(t)))throw new CE(lE(t)+" is not iterable");if(hE(n)){for(r=0,s=cE(t);s>r;r++)if((a=p(t[r]))&&uE(fE,a))return a;return new pE(!1)}o=dE(t,n)}for(g=u?t.next:o.next;!(l=aE(g,o)).done;){try{a=p(l.value)}catch(t){IE(o,"throw",t)}if("object"==typeof a&&a&&uE(fE,a))return a}return new pE(!1)},mE=Or,bE=TypeError,yE=function(t,e){if(mE(e,t))return t;throw new bE("Incorrect invocation")},_E=Ya,TE=En,EE=rE,wE=wn,kE=La,OE=vE,SE=yE,RE=Xn,xE=br,DE=ur,ME=lc,NE=Ca.f,LE=GA.forEach,PE=Kn,$E=eh.set,BE=eh.getterFor,FE=function(t,e,i){var o,n=-1!==t.indexOf("Map"),r=-1!==t.indexOf("Weak"),s=n?"set":"add",a=TE[t],g=a&&a.prototype,l={};if(PE&&RE(a)&&(r||g.forEach&&!wE((function(){(new a).entries().next()})))){var h=(o=e((function(e,i){$E(SE(e,h),{type:t,collection:new a}),DE(i)||OE(i,e[s],{that:e,AS_ENTRIES:n})}))).prototype,c=BE(t);LE(["add","clear","delete","forEach","get","has","set","keys","values","entries"],(function(t){var e="add"===t||"set"===t;!(t in g)||r&&"clear"===t||kE(h,t,(function(i,o){var n=c(this).collection;if(!e&&r&&!xE(i))return"get"===t&&void 0;var s=n[t](0===i?0:i,o);return e?this:s}))})),r||NE(h,"size",{configurable:!0,get:function(){return c(this).collection.size}})}else o=i.getConstructor(e,t,n,s),EE.enable();return ME(o,t,!1,!0),l[t]=o,_E({global:!0,forced:!0},l),r||i.setStrong(o,t,n),o},zE=Vh,HE=function(t,e,i){for(var o in e)i&&i.unsafe&&t[o]?t[o]=e[o]:zE(t,o,e[o],i);return t},GE=kr,UE=yA,VE=Kn,WE=Ds("species"),jE=function(t){var e=GE(t);VE&&e&&!e[WE]&&UE(e,WE,{configurable:!0,get:function(){return this}})},YE=Mh,XE=yA,ZE=HE,KE=Ia,QE=yE,JE=ur,qE=vE,tw=$c,ew=Bc,iw=jE,ow=Kn,nw=rE.fastKey,rw=eh.set,sw=eh.getterFor,aw={getConstructor:function(t,e,i,o){var n=t((function(t,n){QE(t,r),rw(t,{type:e,index:YE(null),first:void 0,last:void 0,size:0}),ow||(t.size=0),JE(n)||qE(n,t[o],{that:t,AS_ENTRIES:i})})),r=n.prototype,s=sw(e),a=function(t,e,i){var o,n,r=s(t),a=g(t,e);return a?a.value=i:(r.last=a={index:n=nw(e,!0),key:e,value:i,previous:o=r.last,next:void 0,removed:!1},r.first||(r.first=a),o&&(o.next=a),ow?r.size++:t.size++,"F"!==n&&(r.index[n]=a)),t},g=function(t,e){var i,o=s(t),n=nw(e);if("F"!==n)return o.index[n];for(i=o.first;i;i=i.next)if(i.key===e)return i};return ZE(r,{clear:function(){for(var t=s(this),e=t.index,i=t.first;i;)i.removed=!0,i.previous&&(i.previous=i.previous.next=void 0),delete e[i.index],i=i.next;t.first=t.last=void 0,ow?t.size=0:this.size=0},delete:function(t){var e=this,i=s(e),o=g(e,t);if(o){var n=o.next,r=o.previous;delete i.index[o.index],o.removed=!0,r&&(r.next=n),n&&(n.previous=r),i.first===o&&(i.first=n),i.last===o&&(i.last=r),ow?i.size--:e.size--}return!!o},forEach:function(t){for(var e,i=s(this),o=KE(t,arguments.length>1?arguments[1]:void 0);e=e?e.next:i.first;)for(o(e.value,e.key,this);e&&e.removed;)e=e.previous},has:function(t){return!!g(this,t)}}),ZE(r,i?{get:function(t){var e=g(this,t);return e&&e.value},set:function(t,e){return a(this,0===t?0:t,e)}}:{add:function(t){return a(this,t=0===t?0:t,t)}}),ow&&XE(r,"size",{configurable:!0,get:function(){return s(this).size}}),n},setStrong:function(t,e,i){var o=e+" Iterator",n=sw(e),r=sw(o);tw(t,e,(function(t,e){rw(this,{type:o,target:t,state:n(t),kind:e,last:void 0})}),(function(){for(var t=r(this),e=t.kind,i=t.last;i&&i.removed;)i=i.previous;return t.target&&(t.last=i=i?i.next:t.state.first)?ew("keys"===e?i.key:"values"===e?i.value:[i.key,i.value],!1):(t.target=void 0,ew(void 0,!0))}),i?"entries":"values",!i,!0),iw(e)}};FE("Map",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),aw);var gw=_n(yr.Map),lw=function(){function t(){yd(this,t),this.clear(),this._defaultIndex=0,this._groupIndex=0,this._defaultGroups=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}},{border:"#990000",background:"#EE0000",highlight:{border:"#BB0000",background:"#FF3333"},hover:{border:"#BB0000",background:"#FF3333"}},{border:"#FF6000",background:"#FF6000",highlight:{border:"#FF6000",background:"#FF6000"},hover:{border:"#FF6000",background:"#FF6000"}},{border:"#97C2FC",background:"#2B7CE9",highlight:{border:"#D2E5FF",background:"#2B7CE9"},hover:{border:"#D2E5FF",background:"#2B7CE9"}},{border:"#399605",background:"#255C03",highlight:{border:"#399605",background:"#255C03"},hover:{border:"#399605",background:"#255C03"}},{border:"#B70054",background:"#FF007E",highlight:{border:"#B70054",background:"#FF007E"},hover:{border:"#B70054",background:"#FF007E"}},{border:"#AD85E4",background:"#7C29F0",highlight:{border:"#D3BDF0",background:"#7C29F0"},hover:{border:"#D3BDF0",background:"#7C29F0"}},{border:"#4557FA",background:"#000EA1",highlight:{border:"#6E6EFD",background:"#000EA1"},hover:{border:"#6E6EFD",background:"#000EA1"}},{border:"#FFC0CB",background:"#FD5A77",highlight:{border:"#FFD1D9",background:"#FD5A77"},hover:{border:"#FFD1D9",background:"#FD5A77"}},{border:"#C2FABC",background:"#74D66A",highlight:{border:"#E6FFE3",background:"#74D66A"},hover:{border:"#E6FFE3",background:"#74D66A"}},{border:"#EE0000",background:"#990000",highlight:{border:"#FF3333",background:"#BB0000"},hover:{border:"#FF3333",background:"#BB0000"}}],this.options={},this.defaultOptions={useDefaultGroups:!0},Lg(this.options,this.defaultOptions)}return Sp(t,[{key:"setOptions",value:function(t){var e=["useDefaultGroups"];if(void 0!==t)for(var i in t)if(Object.prototype.hasOwnProperty.call(t,i)&&-1===Wm(e).call(e,i)){var o=t[i];this.add(i,o)}}},{key:"clear",value:function(){this._groups=new gw,this._groupNames=[]}},{key:"get",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._groups.get(t);if(void 0===i&&e)if(!1===this.options.useDefaultGroups&&this._groupNames.length>0){var o=this._groupIndex%this._groupNames.length;++this._groupIndex,(i={}).color=this._groups.get(this._groupNames[o]),this._groups.set(t,i)}else{var n=this._defaultIndex%this._defaultGroups.length;this._defaultIndex++,(i={}).color=this._defaultGroups[n],this._groups.set(t,i)}return i}},{key:"add",value:function(t,e){return this._groups.has(t)||this._groupNames.push(t),this._groups.set(t,e),e}}]),t}();Ya({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});var hw=_n(yr.Number.isNaN),cw=En.isFinite;Ya({target:"Number",stat:!0},{isFinite:Number.isFinite||function(t){return"number"==typeof t&&cw(t)}});var uw=_n(yr.Number.isFinite),dw=GA.some;Ya({target:"Array",proto:!0,forced:!Zf("some")},{some:function(t){return dw(this,t,arguments.length>1?arguments[1]:void 0)}});var Aw=Kg("Array").some,Iw=Or,Cw=Aw,pw=Array.prototype,fw=_n((function(t){var e=t.some;return t===pw||Iw(pw,t)&&e===pw.some?Cw:e}));function vw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var mw=Ym,bw=_n(mw);Ya({target:"Object",stat:!0},{setPrototypeOf:_c});var yw=yr.Object.setPrototypeOf,_w=_n(yw),Tw=_n(el);function Ew(t,e){var i;return Ew=_w?Tw(i=_w).call(i):function(t,e){return t.__proto__=e,t},Ew(t,e)}function ww(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=bw(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),xd(t,"prototype",{writable:!1}),e&&Ew(t,e)}function kw(t,e){if(e&&("object"===Ep(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return vw(t)}var Ow=sm,Sw=_n(Ow);function Rw(t){var e;return Rw=_w?Tw(e=Sw).call(e):function(t){return t.__proto__||Sw(t)},Rw(t)}function xw(t,e,i){return(e=kp(e))in t?xd(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var Dw={exports:{}},Mw={exports:{}};!function(t){var e=mp,i=_p;function o(n){return t.exports=o="function"==typeof e&&"symbol"==typeof i?function(t){return typeof t}:function(t){return t&&"function"==typeof e&&t.constructor===e&&t!==e.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,o(n)}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports}(Mw);var Nw=Mw.exports,Lw=rv,Pw=fs,$w=Df,Bw=Zn,Fw=Ca,zw=br,Hw=La,Gw=Error,Uw=$n("".replace),Vw=String(new Gw("zxcasd").stack),Ww=/\n\s*at [^:]*:[^\n]*/,jw=Ww.test(Vw),Yw=sr,Xw=!wn((function(){var t=new Error("a");return!("stack"in t)||(Object.defineProperty(t,"stack",Yw(1,7)),7!==t.stack)})),Zw=La,Kw=Xw,Qw=Error.captureStackTrace,Jw=wl,qw=Ya,tk=Or,ek=Gh,ik=_c,ok=Mh,nk=La,rk=sr,sk=function(t,e,i,o){Kw&&(Qw?Qw(t,e):Zw(t,"stack",function(t,e){if(jw&&"string"==typeof t&&!Gw.prepareStackTrace)for(;e--;)t=Uw(t,Ww,"");return t}(i,o)))},ak=vE,gk=Ds("toStringTag"),lk=Error,hk=[].push,ck=function(t,e){var i,o,n,r=tk(uk,this);ik?i=ik(new lk,r?ek(this):uk):(i=r?this:ok(uk),nk(i,gk,"Error")),void 0!==e&&nk(i,"message",function(t,e){return void 0===t?arguments.length<2?"":e:Jw(t)}(e)),sk(i,ck,i.stack,1),arguments.length>2&&(o=i,zw(n=arguments[2])&&"cause"in n&&Hw(o,"cause",n.cause));var s=[];return ak(t,hk,{that:s}),nk(i,"errors",s),i};ik?ik(ck,lk):function(t,e,i){for(var o=$w(e),n=Fw.f,r=Bw.f,s=0;s<o.length;s++){var a=o[s];Pw(t,a)||i&&Pw(i,a)||n(t,a,r(e,a))}}(ck,lk,{name:!0});var uk=ck.prototype=ok(lk.prototype,{constructor:rk(1,ck),message:rk(1,""),name:rk(1,"AggregateError")});qw({global:!0,constructor:!0,arity:2},{AggregateError:ck});var dk,Ak,Ik,Ck,pk="process"===Hn(En.process),fk=mu,vk=Xr,mk=TypeError,bk=function(t){if(fk(t))return t;throw new mk(vk(t)+" is not a constructor")},yk=ba,_k=bk,Tk=ur,Ek=Ds("species"),wk=function(t,e){var i,o=yk(t).constructor;return void 0===o||Tk(i=yk(o)[Ek])?e:_k(i)},kk=/(?:ipad|iphone|ipod).*applewebkit/i.test(Sr),Ok=En,Sk=Dn,Rk=Ia,xk=Xn,Dk=fs,Mk=wn,Nk=Ch,Lk=Pg,Pk=Ws,$k=eb,Bk=kk,Fk=pk,zk=Ok.setImmediate,Hk=Ok.clearImmediate,Gk=Ok.process,Uk=Ok.Dispatch,Vk=Ok.Function,Wk=Ok.MessageChannel,jk=Ok.String,Yk=0,Xk={},Zk="onreadystatechange";Mk((function(){dk=Ok.location}));var Kk=function(t){if(Dk(Xk,t)){var e=Xk[t];delete Xk[t],e()}},Qk=function(t){return function(){Kk(t)}},Jk=function(t){Kk(t.data)},qk=function(t){Ok.postMessage(jk(t),dk.protocol+"//"+dk.host)};zk&&Hk||(zk=function(t){$k(arguments.length,1);var e=xk(t)?t:Vk(t),i=Lk(arguments,1);return Xk[++Yk]=function(){Sk(e,void 0,i)},Ak(Yk),Yk},Hk=function(t){delete Xk[t]},Fk?Ak=function(t){Gk.nextTick(Qk(t))}:Uk&&Uk.now?Ak=function(t){Uk.now(Qk(t))}:Wk&&!Bk?(Ck=(Ik=new Wk).port2,Ik.port1.onmessage=Jk,Ak=Rk(Ck.postMessage,Ck)):Ok.addEventListener&&xk(Ok.postMessage)&&!Ok.importScripts&&dk&&"file:"!==dk.protocol&&!Mk(qk)?(Ak=qk,Ok.addEventListener("message",Jk,!1)):Ak=Zk in Pk("script")?function(t){Nk.appendChild(Pk("script"))[Zk]=function(){Nk.removeChild(this),Kk(t)}}:function(t){setTimeout(Qk(t),0)});var tO={set:zk,clear:Hk},eO=function(){this.head=null,this.tail=null};eO.prototype={add:function(t){var e={item:t,next:null},i=this.tail;i?i.next=e:this.head=e,this.tail=e},get:function(){var t=this.head;if(t)return null===(this.head=t.next)&&(this.tail=null),t.item}};var iO,oO,nO,rO,sO,aO=eO,gO=/ipad|iphone|ipod/i.test(Sr)&&"undefined"!=typeof Pebble,lO=/web0s(?!.*chrome)/i.test(Sr),hO=En,cO=Ia,uO=Zn.f,dO=tO.set,AO=aO,IO=kk,CO=gO,pO=lO,fO=pk,vO=hO.MutationObserver||hO.WebKitMutationObserver,mO=hO.document,bO=hO.process,yO=hO.Promise,_O=uO(hO,"queueMicrotask"),TO=_O&&_O.value;if(!TO){var EO=new AO,wO=function(){var t,e;for(fO&&(t=bO.domain)&&t.exit();e=EO.get();)try{e()}catch(t){throw EO.head&&iO(),t}t&&t.enter()};IO||fO||pO||!vO||!mO?!CO&&yO&&yO.resolve?((rO=yO.resolve(void 0)).constructor=yO,sO=cO(rO.then,rO),iO=function(){sO(wO)}):fO?iO=function(){bO.nextTick(wO)}:(dO=cO(dO,hO),iO=function(){dO(wO)}):(oO=!0,nO=mO.createTextNode(""),new vO(wO).observe(nO,{characterData:!0}),iO=function(){nO.data=oO=!oO}),TO=function(t){EO.head||iO(),EO.add(t)}}var kO=TO,OO=function(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}},SO=En.Promise,RO="object"==typeof Deno&&Deno&&"object"==typeof Deno.version,xO=!RO&&!pk&&"object"==typeof window&&"object"==typeof document,DO=En,MO=SO,NO=Xn,LO=ca,PO=su,$O=Ds,BO=xO,FO=RO,zO=Pr,HO=MO&&MO.prototype,GO=$O("species"),UO=!1,VO=NO(DO.PromiseRejectionEvent),WO={CONSTRUCTOR:LO("Promise",(function(){var t=PO(MO),e=t!==String(MO);if(!e&&66===zO)return!0;if(!HO.catch||!HO.finally)return!0;if(!zO||zO<51||!/native code/.test(t)){var i=new MO((function(t){t(1)})),o=function(t){t((function(){}),(function(){}))};if((i.constructor={})[GO]=o,!(UO=i.then((function(){}))instanceof o))return!0}return!e&&(BO||FO)&&!VO})),REJECTION_EVENT:VO,SUBCLASSING:UO},jO={},YO=Jr,XO=TypeError,ZO=function(t){var e,i;this.promise=new t((function(t,o){if(void 0!==e||void 0!==i)throw new XO("Bad Promise constructor");e=t,i=o})),this.resolve=YO(e),this.reject=YO(i)};jO.f=function(t){return new ZO(t)};var KO,QO,JO=Ya,qO=pk,tS=En,eS=qn,iS=Vh,oS=lc,nS=jE,rS=Jr,sS=Xn,aS=br,gS=yE,lS=wk,hS=tO.set,cS=kO,uS=OO,dS=aO,AS=eh,IS=SO,CS=jO,pS="Promise",fS=WO.CONSTRUCTOR,vS=WO.REJECTION_EVENT,mS=AS.getterFor(pS),bS=AS.set,yS=IS&&IS.prototype,_S=IS,TS=yS,ES=tS.TypeError,wS=tS.document,kS=tS.process,OS=CS.f,SS=OS,RS=!!(wS&&wS.createEvent&&tS.dispatchEvent),xS="unhandledrejection",DS=function(t){var e;return!(!aS(t)||!sS(e=t.then))&&e},MS=function(t,e){var i,o,n,r=e.value,s=1===e.state,a=s?t.ok:t.fail,g=t.resolve,l=t.reject,h=t.domain;try{a?(s||(2===e.rejection&&BS(e),e.rejection=1),!0===a?i=r:(h&&h.enter(),i=a(r),h&&(h.exit(),n=!0)),i===t.promise?l(new ES("Promise-chain cycle")):(o=DS(i))?eS(o,i,g,l):g(i)):l(r)}catch(t){h&&!n&&h.exit(),l(t)}},NS=function(t,e){t.notified||(t.notified=!0,cS((function(){for(var i,o=t.reactions;i=o.get();)MS(i,t);t.notified=!1,e&&!t.rejection&&PS(t)})))},LS=function(t,e,i){var o,n;RS?((o=wS.createEvent("Event")).promise=e,o.reason=i,o.initEvent(t,!1,!0),tS.dispatchEvent(o)):o={promise:e,reason:i},!vS&&(n=tS["on"+t])?n(o):t===xS&&function(t,e){try{1===arguments.length?console.error(t):console.error(t,e)}catch(t){}}("Unhandled promise rejection",i)},PS=function(t){eS(hS,tS,(function(){var e,i=t.facade,o=t.value;if($S(t)&&(e=uS((function(){qO?kS.emit("unhandledRejection",o,i):LS(xS,i,o)})),t.rejection=qO||$S(t)?2:1,e.error))throw e.value}))},$S=function(t){return 1!==t.rejection&&!t.parent},BS=function(t){eS(hS,tS,(function(){var e=t.facade;qO?kS.emit("rejectionHandled",e):LS("rejectionhandled",e,t.value)}))},FS=function(t,e,i){return function(o){t(e,o,i)}},zS=function(t,e,i){t.done||(t.done=!0,i&&(t=i),t.value=e,t.state=2,NS(t,!0))},HS=function(t,e,i){if(!t.done){t.done=!0,i&&(t=i);try{if(t.facade===e)throw new ES("Promise can't be resolved itself");var o=DS(e);o?cS((function(){var i={done:!1};try{eS(o,e,FS(HS,i,t),FS(zS,i,t))}catch(e){zS(i,e,t)}})):(t.value=e,t.state=1,NS(t,!1))}catch(e){zS({done:!1},e,t)}}};fS&&(TS=(_S=function(t){gS(this,TS),rS(t),eS(KO,this);var e=mS(this);try{t(FS(HS,e),FS(zS,e))}catch(t){zS(e,t)}}).prototype,(KO=function(t){bS(this,{type:pS,done:!1,notified:!1,parent:!1,reactions:new dS,rejection:!1,state:0,value:void 0})}).prototype=iS(TS,"then",(function(t,e){var i=mS(this),o=OS(lS(this,_S));return i.parent=!0,o.ok=!sS(t)||t,o.fail=sS(e)&&e,o.domain=qO?kS.domain:void 0,0===i.state?i.reactions.add(o):cS((function(){MS(o,i)})),o.promise})),QO=function(){var t=new KO,e=mS(t);this.promise=t,this.resolve=FS(HS,e),this.reject=FS(zS,e)},CS.f=OS=function(t){return t===_S||void 0===t?new QO(t):SS(t)}),JO({global:!0,constructor:!0,wrap:!0,forced:fS},{Promise:_S}),oS(_S,pS,!1,!0),nS(pS);var GS=SO,US=WO.CONSTRUCTOR||!qu((function(t){GS.all(t).then(void 0,(function(){}))})),VS=qn,WS=Jr,jS=jO,YS=OO,XS=vE;Ya({target:"Promise",stat:!0,forced:US},{all:function(t){var e=this,i=jS.f(e),o=i.resolve,n=i.reject,r=YS((function(){var i=WS(e.resolve),r=[],s=0,a=1;XS(t,(function(t){var g=s++,l=!1;a++,VS(i,e,t).then((function(t){l||(l=!0,r[g]=t,--a||o(r))}),n)})),--a||o(r)}));return r.error&&n(r.value),i.promise}});var ZS=Ya,KS=WO.CONSTRUCTOR;SO&&SO.prototype,ZS({target:"Promise",proto:!0,forced:KS,real:!0},{catch:function(t){return this.then(void 0,t)}});var QS=qn,JS=Jr,qS=jO,tR=OO,eR=vE;Ya({target:"Promise",stat:!0,forced:US},{race:function(t){var e=this,i=qS.f(e),o=i.reject,n=tR((function(){var n=JS(e.resolve);eR(t,(function(t){QS(n,e,t).then(i.resolve,o)}))}));return n.error&&o(n.value),i.promise}});var iR=qn,oR=jO;Ya({target:"Promise",stat:!0,forced:WO.CONSTRUCTOR},{reject:function(t){var e=oR.f(this);return iR(e.reject,void 0,t),e.promise}});var nR=ba,rR=br,sR=jO,aR=function(t,e){if(nR(t),rR(e)&&e.constructor===t)return e;var i=sR.f(t);return(0,i.resolve)(e),i.promise},gR=Ya,lR=SO,hR=WO.CONSTRUCTOR,cR=aR,uR=kr("Promise"),dR=!hR;gR({target:"Promise",stat:!0,forced:!0},{resolve:function(t){return cR(dR&&this===uR?lR:this,t)}});var AR=qn,IR=Jr,CR=jO,pR=OO,fR=vE;Ya({target:"Promise",stat:!0,forced:US},{allSettled:function(t){var e=this,i=CR.f(e),o=i.resolve,n=i.reject,r=pR((function(){var i=IR(e.resolve),n=[],r=0,s=1;fR(t,(function(t){var a=r++,g=!1;s++,AR(i,e,t).then((function(t){g||(g=!0,n[a]={status:"fulfilled",value:t},--s||o(n))}),(function(t){g||(g=!0,n[a]={status:"rejected",reason:t},--s||o(n))}))})),--s||o(n)}));return r.error&&n(r.value),i.promise}});var vR=qn,mR=Jr,bR=kr,yR=jO,_R=OO,TR=vE,ER="No one promise resolved";Ya({target:"Promise",stat:!0,forced:US},{any:function(t){var e=this,i=bR("AggregateError"),o=yR.f(e),n=o.resolve,r=o.reject,s=_R((function(){var o=mR(e.resolve),s=[],a=0,g=1,l=!1;TR(t,(function(t){var h=a++,c=!1;g++,vR(o,e,t).then((function(t){c||l||(l=!0,n(t))}),(function(t){c||l||(c=!0,s[h]=t,--g||r(new i(s,ER)))}))})),--g||r(new i(s,ER))}));return s.error&&r(s.value),o.promise}});var wR=Ya,kR=SO,OR=wn,SR=kr,RR=Xn,xR=wk,DR=aR,MR=kR&&kR.prototype;wR({target:"Promise",proto:!0,real:!0,forced:!!kR&&OR((function(){MR.finally.call({then:function(){}},(function(){}))}))},{finally:function(t){var e=xR(this,SR("Promise")),i=RR(t);return this.then(i?function(i){return DR(e,t()).then((function(){return i}))}:t,i?function(i){return DR(e,t()).then((function(){throw i}))}:t)}});var NR=yr.Promise,LR=jO;Ya({target:"Promise",stat:!0},{withResolvers:function(){var t=LR.f(this);return{promise:t.promise,resolve:t.resolve,reject:t.reject}}});var PR=NR,$R=jO,BR=OO;Ya({target:"Promise",stat:!0,forced:!0},{try:function(t){var e=$R.f(this),i=BR(t);return(i.error?e.reject:e.resolve)(i.value),e.promise}});var FR=PR,zR=Iv;!function(t){var e=Nw.default,i=Rd,o=mp,n=mw,r=Ow,s=Lw,a=Wp,g=yw,l=FR,h=zR,c=df;function u(){t.exports=u=function(){return A},t.exports.__esModule=!0,t.exports.default=t.exports;var d,A={},I=Object.prototype,C=I.hasOwnProperty,p=i||function(t,e,i){t[e]=i.value},f="function"==typeof o?o:{},v=f.iterator||"@@iterator",m=f.asyncIterator||"@@asyncIterator",b=f.toStringTag||"@@toStringTag";function y(t,e,o){return i(t,e,{value:o,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{y({},"")}catch(d){y=function(t,e,i){return t[e]=i}}function _(t,e,i,o){var r=e&&e.prototype instanceof R?e:R,s=n(r.prototype),a=new G(o||[]);return p(s,"_invoke",{value:B(t,i,a)}),s}function T(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}A.wrap=_;var E="suspendedStart",w="suspendedYield",k="executing",O="completed",S={};function R(){}function x(){}function D(){}var M={};y(M,v,(function(){return this}));var N=r&&r(r(U([])));N&&N!==I&&C.call(N,v)&&(M=N);var L=D.prototype=R.prototype=n(M);function P(t){var e;s(e=["next","throw","return"]).call(e,(function(e){y(t,e,(function(t){return this._invoke(e,t)}))}))}function $(t,i){function o(n,r,s,a){var g=T(t[n],t,r);if("throw"!==g.type){var l=g.arg,h=l.value;return h&&"object"==e(h)&&C.call(h,"__await")?i.resolve(h.__await).then((function(t){o("next",t,s,a)}),(function(t){o("throw",t,s,a)})):i.resolve(h).then((function(t){l.value=t,s(l)}),(function(t){return o("throw",t,s,a)}))}a(g.arg)}var n;p(this,"_invoke",{value:function(t,e){function r(){return new i((function(i,n){o(t,e,i,n)}))}return n=n?n.then(r,r):r()}})}function B(t,e,i){var o=E;return function(n,r){if(o===k)throw new Error("Generator is already running");if(o===O){if("throw"===n)throw r;return{value:d,done:!0}}for(i.method=n,i.arg=r;;){var s=i.delegate;if(s){var a=F(s,i);if(a){if(a===S)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(o===E)throw o=O,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);o=k;var g=T(t,e,i);if("normal"===g.type){if(o=i.done?O:w,g.arg===S)continue;return{value:g.arg,done:i.done}}"throw"===g.type&&(o=O,i.method="throw",i.arg=g.arg)}}}function F(t,e){var i=e.method,o=t.iterator[i];if(o===d)return e.delegate=null,"throw"===i&&t.iterator.return&&(e.method="return",e.arg=d,F(t,e),"throw"===e.method)||"return"!==i&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+i+"' method")),S;var n=T(o,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,S;var r=n.arg;return r?r.done?(e[t.resultName]=r.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=d),e.delegate=null,S):r:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,S)}function z(t){var e,i={tryLoc:t[0]};1 in t&&(i.catchLoc=t[1]),2 in t&&(i.finallyLoc=t[2],i.afterLoc=t[3]),a(e=this.tryEntries).call(e,i)}function H(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function G(t){this.tryEntries=[{tryLoc:"root"}],s(t).call(t,z,this),this.reset(!0)}function U(t){if(t||""===t){var i=t[v];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,n=function e(){for(;++o<t.length;)if(C.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=d,e.done=!0,e};return n.next=n}}throw new TypeError(e(t)+" is not iterable")}return x.prototype=D,p(L,"constructor",{value:D,configurable:!0}),p(D,"constructor",{value:x,configurable:!0}),x.displayName=y(D,b,"GeneratorFunction"),A.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===x||"GeneratorFunction"===(e.displayName||e.name))},A.mark=function(t){return g?g(t,D):(t.__proto__=D,y(t,b,"GeneratorFunction")),t.prototype=n(L),t},A.awrap=function(t){return{__await:t}},P($.prototype),y($.prototype,m,(function(){return this})),A.AsyncIterator=$,A.async=function(t,e,i,o,n){void 0===n&&(n=l);var r=new $(_(t,e,i,o),n);return A.isGeneratorFunction(e)?r:r.next().then((function(t){return t.done?t.value:r.next()}))},P(L),y(L,b,"Generator"),y(L,v,(function(){return this})),y(L,"toString",(function(){return"[object Generator]"})),A.keys=function(t){var e=Object(t),i=[];for(var o in e)a(i).call(i,o);return h(i).call(i),function t(){for(;i.length;){var o=i.pop();if(o in e)return t.value=o,t.done=!1,t}return t.done=!0,t}},A.values=U,G.prototype={constructor:G,reset:function(t){var e;if(this.prev=0,this.next=0,this.sent=this._sent=d,this.done=!1,this.delegate=null,this.method="next",this.arg=d,s(e=this.tryEntries).call(e,H),!t)for(var i in this)"t"===i.charAt(0)&&C.call(this,i)&&!isNaN(+c(i).call(i,1))&&(this[i]=d)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function i(i,o){return r.type="throw",r.arg=t,e.next=i,o&&(e.method="next",e.arg=d),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var n=this.tryEntries[o],r=n.completion;if("root"===n.tryLoc)return i("end");if(n.tryLoc<=this.prev){var s=C.call(n,"catchLoc"),a=C.call(n,"finallyLoc");if(s&&a){if(this.prev<n.catchLoc)return i(n.catchLoc,!0);if(this.prev<n.finallyLoc)return i(n.finallyLoc)}else if(s){if(this.prev<n.catchLoc)return i(n.catchLoc,!0)}else{if(!a)throw new Error("try statement without catch or finally");if(this.prev<n.finallyLoc)return i(n.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&C.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var n=o;break}}n&&("break"===t||"continue"===t)&&n.tryLoc<=e&&e<=n.finallyLoc&&(n=null);var r=n?n.completion:{};return r.type=t,r.arg=e,n?(this.method="next",this.next=n.finallyLoc,S):this.complete(r)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),S},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),H(i),S}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var n=o.arg;H(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,i){return this.delegate={iterator:U(t),resultName:e,nextLoc:i},"next"===this.method&&(this.arg=d),S}},A}t.exports=u,t.exports.__esModule=!0,t.exports.default=t.exports}(Dw);var HR=(0,Dw.exports)(),GR=HR;try{regeneratorRuntime=HR}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=HR:Function("r","regeneratorRuntime = r")(HR)}var UR=_n(GR),VR=Jr,WR=Is,jR=cr,YR=ng,XR=TypeError,ZR=function(t){return function(e,i,o,n){VR(i);var r=WR(e),s=jR(r),a=YR(r),g=t?a-1:0,l=t?-1:1;if(o<2)for(;;){if(g in s){n=s[g],g+=l;break}if(g+=l,t?g<0:a<=g)throw new XR("Reduce of empty array with no initial value")}for(;t?g>=0:a>g;g+=l)g in s&&(n=i(n,s[g],g,r));return n}},KR=[ZR(!1),ZR(!0)][0];Ya({target:"Array",proto:!0,forced:!pk&&Pr>79&&Pr<83||!Zf("reduce")},{reduce:function(t){var e=arguments.length;return KR(this,t,e,e>1?arguments[1]:void 0)}});var QR=Kg("Array").reduce,JR=Or,qR=QR,tx=Array.prototype,ex=_n((function(t){var e=t.reduce;return t===tx||JR(tx,t)&&e===tx.reduce?qR:e})),ix=Md,ox=ng,nx=Ld,rx=Ia,sx=function(t,e,i,o,n,r,s,a){for(var g,l,h=n,c=0,u=!!s&&rx(s,a);c<o;)c in i&&(g=u?u(i[c],c,e):i[c],r>0&&ix(g)?(l=ox(g),h=sx(t,e,g,l,h,r-1)-1):(nx(h+1),t[h]=g),h++),c++;return h},ax=sx,gx=Jr,lx=Is,hx=ng,cx=Hd;Ya({target:"Array",proto:!0},{flatMap:function(t){var e,i=lx(this),o=hx(i);return gx(t),(e=cx(i,0)).length=ax(e,i,i,o,0,1,t,arguments.length>1?arguments[1]:void 0),e}}),Kg("Array").flatMap,Array.prototype,FE("Set",(function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}}),aw);var ux=_n(yr.Set),dx=_n(yp),Ax=_n($u),Ix=IA,Cx=Math.floor,px=function(t,e){var i=t.length,o=Cx(i/2);return i<8?fx(t,e):vx(t,px(Ix(t,0,o),e),px(Ix(t,o),e),e)},fx=function(t,e){for(var i,o,n=t.length,r=1;r<n;){for(o=r,i=t[r];o&&e(t[o-1],i)>0;)t[o]=t[--o];o!==r++&&(t[o]=i)}return t},vx=function(t,e,i,o){for(var n=e.length,r=i.length,s=0,a=0;s<n||a<r;)t[s+a]=s<n&&a<r?o(e[s],i[a])<=0?e[s++]:i[a++]:s<n?e[s++]:i[a++];return t},mx=px,bx=Sr.match(/firefox\/(\d+)/i),yx=!!bx&&+bx[1],_x=/MSIE|Trident/.test(Sr),Tx=Sr.match(/AppleWebKit\/(\d+)\./),Ex=!!Tx&&+Tx[1],wx=Ya,kx=$n,Ox=Jr,Sx=Is,Rx=ng,xx=vv,Dx=wl,Mx=wn,Nx=mx,Lx=Zf,Px=yx,$x=_x,Bx=Pr,Fx=Ex,zx=[],Hx=kx(zx.sort),Gx=kx(zx.push),Ux=Mx((function(){zx.sort(void 0)})),Vx=Mx((function(){zx.sort(null)})),Wx=Lx("sort"),jx=!Mx((function(){if(Bx)return Bx<70;if(!(Px&&Px>3)){if($x)return!0;if(Fx)return Fx<603;var t,e,i,o,n="";for(t=65;t<76;t++){switch(e=String.fromCharCode(t),t){case 66:case 69:case 70:case 72:i=3;break;case 68:case 71:i=4;break;default:i=2}for(o=0;o<47;o++)zx.push({k:e+o,v:i})}for(zx.sort((function(t,e){return e.v-t.v})),o=0;o<zx.length;o++)e=zx[o].k.charAt(0),n.charAt(n.length-1)!==e&&(n+=e);return"DGBEFHACIJK"!==n}}));wx({target:"Array",proto:!0,forced:Ux||!Vx||!Wx||!jx},{sort:function(t){void 0!==t&&Ox(t);var e=Sx(this);if(jx)return void 0===t?Hx(e):Hx(e,t);var i,o,n=[],r=Rx(e);for(o=0;o<r;o++)o in e&&Gx(n,e[o]);for(Nx(n,function(t){return function(e,i){return void 0===i?-1:void 0===e?1:void 0!==t?+t(e,i)||0:Dx(e)>Dx(i)?1:-1}}(t)),i=Rx(n),o=0;o<i;)e[o]=n[o++];for(;o<r;)xx(e,o++);return e}});var Yx=Kg("Array").sort,Xx=Or,Zx=Yx,Kx=Array.prototype,Qx=_n((function(t){var e=t.sort;return t===Kx||Xx(Kx,t)&&e===Kx.sort?Zx:e})),Jx=Kg("Array").keys,qx=_l,tD=fs,eD=Or,iD=Jx,oD=Array.prototype,nD={DOMTokenList:!0,NodeList:!0},rD=_n((function(t){var e=t.keys;return t===oD||eD(oD,t)&&e===oD.keys||tD(nD,qx(t))?iD:e})),sD=Kg("Array").values,aD=_l,gD=fs,lD=Or,hD=sD,cD=Array.prototype,uD={DOMTokenList:!0,NodeList:!0},dD=_n((function(t){var e=t.values;return t===cD||lD(cD,t)&&e===cD.values||gD(uD,aD(t))?hD:e})),AD=Kg("Array").entries,ID=_l,CD=fs,pD=Or,fD=AD,vD=Array.prototype,mD={DOMTokenList:!0,NodeList:!0},bD=_n((function(t){var e=t.entries;return t===vD||pD(vD,t)&&e===vD.entries||CD(mD,ID(t))?fD:e})),yD=_n(Sd),_D=Ya,TD=Dn,ED=Yg,wD=bk,kD=ba,OD=br,SD=Mh,RD=wn,xD=kr("Reflect","construct"),DD=Object.prototype,MD=[].push,ND=RD((function(){function t(){}return!(xD((function(){}),[],t)instanceof t)})),LD=!RD((function(){xD((function(){}))})),PD=ND||LD;_D({target:"Reflect",stat:!0,forced:PD,sham:PD},{construct:function(t,e){wD(t),kD(e);var i=arguments.length<3?t:wD(arguments[2]);if(LD&&!ND)return xD(t,e,i);if(t===i){switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3])}var o=[null];return TD(MD,o,e),new(TD(ED,t,o))}var n=i.prototype,r=SD(OD(n)?n:DD),s=TD(t,r,e);return OD(s)?s:r}});var $D=_n(yr.Reflect.construct),BD=_n(yr.Object.getOwnPropertySymbols),FD={exports:{}},zD=Ya,HD=wn,GD=fr,UD=Zn.f,VD=Kn;zD({target:"Object",stat:!0,forced:!VD||HD((function(){UD(1)})),sham:!VD},{getOwnPropertyDescriptor:function(t,e){return UD(GD(t),e)}});var WD=yr.Object,jD=FD.exports=function(t,e){return WD.getOwnPropertyDescriptor(t,e)};WD.getOwnPropertyDescriptor.sham&&(jD.sham=!0);var YD=FD.exports,XD=_n(YD),ZD=Df,KD=fr,QD=Zn,JD=Tu;Ya({target:"Object",stat:!0,sham:!Kn},{getOwnPropertyDescriptors:function(t){for(var e,i,o=KD(t),n=QD.f,r=ZD(o),s={},a=0;r.length>a;)void 0!==(i=n(o,e=r[a++]))&&JD(s,e,i);return s}});var qD=_n(yr.Object.getOwnPropertyDescriptors),tM={exports:{}},eM=Ya,iM=Kn,oM=gh.f;eM({target:"Object",stat:!0,forced:Object.defineProperties!==oM,sham:!iM},{defineProperties:oM});var nM=yr.Object,rM=tM.exports=function(t,e){return nM.defineProperties(t,e)};nM.defineProperties.sham&&(rM.sham=!0);var sM=_n(tM.exports);let aM;const gM=new Uint8Array(16);function lM(){if(!aM&&(aM="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!aM))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return aM(gM)}const hM=[];for(let t=0;t<256;++t)hM.push((t+256).toString(16).slice(1));var cM,uM={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function dM(t,e,i){if(uM.randomUUID&&!e&&!t)return uM.randomUUID();const o=(t=t||{}).random||(t.rng||lM)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,e){i=i||0;for(let t=0;t<16;++t)e[i+t]=o[t];return e}return function(t,e=0){return hM[t[e+0]]+hM[t[e+1]]+hM[t[e+2]]+hM[t[e+3]]+"-"+hM[t[e+4]]+hM[t[e+5]]+"-"+hM[t[e+6]]+hM[t[e+7]]+"-"+hM[t[e+8]]+hM[t[e+9]]+"-"+hM[t[e+10]]+hM[t[e+11]]+hM[t[e+12]]+hM[t[e+13]]+hM[t[e+14]]+hM[t[e+15]]}(o)}function AM(t,e){var i=Uf(t);if(BD){var o=BD(t);e&&(o=dm(o).call(o,(function(e){return XD(t,e).enumerable}))),i.push.apply(i,o)}return i}function IM(t){for(var e=1;e<arguments.length;e++){var i,o,n=null!=arguments[e]?arguments[e]:{};e%2?sv(i=AM(Object(n),!0)).call(i,(function(e){xw(t,e,n[e])})):qD?sM(t,qD(n)):sv(o=AM(Object(n))).call(o,(function(e){yD(t,e,XD(n,e))}))}return t}function CM(t,e){var i=void 0!==mf&&bd(t)||t["@@iterator"];if(!i){if(Nf(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return pM(t,e);var o=wf(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?ed(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?pM(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function pM(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function fM(t){return"string"==typeof t||"number"==typeof t}var vM=function(){function t(e){yd(this,t),xw(this,"delay",void 0),xw(this,"max",void 0),xw(this,"_queue",[]),xw(this,"_timeout",null),xw(this,"_extended",null),this.delay=null,this.max=1/0,this.setOptions(e)}return Sp(t,[{key:"setOptions",value:function(t){t&&void 0!==t.delay&&(this.delay=t.delay),t&&void 0!==t.max&&(this.max=t.max),this._flushIfNeeded()}},{key:"destroy",value:function(){if(this.flush(),this._extended){for(var t=this._extended.object,e=this._extended.methods,i=0;i<e.length;i++){var o=e[i];o.original?t[o.name]=o.original:delete t[o.name]}this._extended=null}}},{key:"replace",value:function(t,e){var i=this,o=t[e];if(!o)throw new Error("Method "+e+" undefined");t[e]=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];i.queue({args:e,fn:o,context:this})}}},{key:"queue",value:function(t){"function"==typeof t?this._queue.push({fn:t}):this._queue.push(t),this._flushIfNeeded()}},{key:"_flushIfNeeded",value:function(){var t=this;this._queue.length>this.max&&this.flush(),null!=this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this.queue.length>0&&"number"==typeof this.delay&&(this._timeout=fb((function(){t.flush()}),this.delay))}},{key:"flush",value:function(){var t,e;sv(t=$v(e=this._queue).call(e,0)).call(t,(function(t){t.fn.apply(t.context||t.fn,t.args||[])}))}}],[{key:"extend",value:function(e,i){var o=new t(i);if(void 0!==e.flush)throw new Error("Target object already has a property flush");e.flush=function(){o.flush()};var n=[{name:"flush",original:void 0}];if(i&&i.replace)for(var r=0;r<i.replace.length;r++){var s=i.replace[r];n.push({name:s,original:e[s]}),o.replace(e,s)}return o._extended={object:e,methods:n},o}}]),t}(),mM=function(){function t(){yd(this,t),xw(this,"_subscribers",{"*":[],add:[],remove:[],update:[]}),xw(this,"subscribe",t.prototype.on),xw(this,"unsubscribe",t.prototype.off)}return Sp(t,[{key:"_trigger",value:function(t,e,i){var o,n;if("*"===t)throw new Error("Cannot trigger event *");sv(o=Ef(n=[]).call(n,vf(this._subscribers[t]),vf(this._subscribers["*"]))).call(o,(function(o){o(t,e,null!=i?i:null)}))}},{key:"on",value:function(t,e){"function"==typeof e&&this._subscribers[t].push(e)}},{key:"off",value:function(t,e){var i;this._subscribers[t]=dm(i=this._subscribers[t]).call(i,(function(t){return t!==e}))}}]),t}();cM=dx;var bM=function(){function t(e){yd(this,t),xw(this,"_pairs",void 0),this._pairs=e}return Sp(t,[{key:cM,value:UR.mark((function t(){var e,i,o,n,r;return UR.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=CM(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return o=ff(i.value,2),n=o[0],r=o[1],t.next=7,[n,r];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"entries",value:UR.mark((function t(){var e,i,o,n,r;return UR.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=CM(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return o=ff(i.value,2),n=o[0],r=o[1],t.next=7,[n,r];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"keys",value:UR.mark((function t(){var e,i,o,n;return UR.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=CM(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return o=ff(i.value,1),n=o[0],t.next=7,n;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"values",value:UR.mark((function t(){var e,i,o,n;return UR.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=CM(this._pairs),t.prev=1,e.s();case 3:if((i=e.n()).done){t.next=9;break}return o=ff(i.value,2),n=o[1],t.next=7,n;case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),e.e(t.t0);case 14:return t.prev=14,e.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,this,[[1,11,14,17]])}))},{key:"toIdArray",value:function(){var t;return zf(t=vf(this._pairs)).call(t,(function(t){return t[0]}))}},{key:"toItemArray",value:function(){var t;return zf(t=vf(this._pairs)).call(t,(function(t){return t[1]}))}},{key:"toEntryArray",value:function(){return vf(this._pairs)}},{key:"toObjectMap",value:function(){var t,e=Xm(null),i=CM(this._pairs);try{for(i.s();!(t=i.n()).done;){var o=ff(t.value,2),n=o[0],r=o[1];e[n]=r}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"toMap",value:function(){return new gw(this._pairs)}},{key:"toIdSet",value:function(){return new ux(this.toIdArray())}},{key:"toItemSet",value:function(){return new ux(this.toItemArray())}},{key:"cache",value:function(){return new t(vf(this._pairs))}},{key:"distinct",value:function(t){var e,i=new ux,o=CM(this._pairs);try{for(o.s();!(e=o.n()).done;){var n=ff(e.value,2),r=n[0],s=n[1];i.add(t(s,r))}}catch(t){o.e(t)}finally{o.f()}return i}},{key:"filter",value:function(e){var i=this._pairs;return new t(xw({},dx,UR.mark((function t(){var o,n,r,s,a;return UR.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=CM(i),t.prev=1,o.s();case 3:if((n=o.n()).done){t.next=10;break}if(r=ff(n.value,2),s=r[0],a=r[1],!e(a,s)){t.next=8;break}return t.next=8,[s,a];case 8:t.next=3;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(1),o.e(t.t0);case 15:return t.prev=15,o.f(),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[1,12,15,18]])}))))}},{key:"forEach",value:function(t){var e,i=CM(this._pairs);try{for(i.s();!(e=i.n()).done;){var o=ff(e.value,2),n=o[0];t(o[1],n)}}catch(t){i.e(t)}finally{i.f()}}},{key:"map",value:function(e){var i=this._pairs;return new t(xw({},dx,UR.mark((function t(){var o,n,r,s,a;return UR.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=CM(i),t.prev=1,o.s();case 3:if((n=o.n()).done){t.next=9;break}return r=ff(n.value,2),s=r[0],a=r[1],t.next=7,[s,e(a,s)];case 7:t.next=3;break;case 9:t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),o.e(t.t0);case 14:return t.prev=14,o.f(),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[1,11,14,17]])}))))}},{key:"max",value:function(t){var e=Ax(this._pairs),i=e.next();if(i.done)return null;for(var o=i.value[1],n=t(i.value[1],i.value[0]);!(i=e.next()).done;){var r=ff(i.value,2),s=r[0],a=r[1],g=t(a,s);g>n&&(n=g,o=a)}return o}},{key:"min",value:function(t){var e=Ax(this._pairs),i=e.next();if(i.done)return null;for(var o=i.value[1],n=t(i.value[1],i.value[0]);!(i=e.next()).done;){var r=ff(i.value,2),s=r[0],a=r[1],g=t(a,s);g<n&&(n=g,o=a)}return o}},{key:"reduce",value:function(t,e){var i,o=CM(this._pairs);try{for(o.s();!(i=o.n()).done;){var n=ff(i.value,2),r=n[0];e=t(e,n[1],r)}}catch(t){o.e(t)}finally{o.f()}return e}},{key:"sort",value:function(e){var i=this;return new t(xw({},dx,(function(){var t;return Ax(Qx(t=vf(i._pairs)).call(t,(function(t,i){var o=ff(t,2),n=o[0],r=o[1],s=ff(i,2),a=s[0],g=s[1];return e(r,g,n,a)})))})))}}]),t}(),yM=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e){var i;return yd(this,n),xw(vw(i=o.call(this)),"flush",void 0),xw(vw(i),"length",void 0),xw(vw(i),"_options",void 0),xw(vw(i),"_data",void 0),xw(vw(i),"_idProp",void 0),xw(vw(i),"_queue",null),t&&!Nf(t)&&(e=t,t=[]),i._options=e||{},i._data=new gw,i.length=0,i._idProp=i._options.fieldId||"id",t&&t.length&&i.add(t),i.setOptions(e),i}return Sp(n,[{key:"idProp",get:function(){return this._idProp}},{key:"setOptions",value:function(t){t&&void 0!==t.queue&&(!1===t.queue?this._queue&&(this._queue.destroy(),this._queue=null):(this._queue||(this._queue=vM.extend(this,{replace:["add","update","remove"]})),t.queue&&"object"===Ep(t.queue)&&this._queue.setOptions(t.queue)))}},{key:"add",value:function(t,e){var i,o=this,n=[];if(Nf(t)){var r=zf(t).call(t,(function(t){return t[o._idProp]}));if(fw(r).call(r,(function(t){return o._data.has(t)})))throw new Error("A duplicate id was found in the parameter array.");for(var s=0,a=t.length;s<a;s++)i=this._addItem(t[s]),n.push(i)}else{if(!t||"object"!==Ep(t))throw new Error("Unknown dataType");i=this._addItem(t),n.push(i)}return n.length&&this._trigger("add",{items:n},e),n}},{key:"update",value:function(t,e){var i=this,o=[],n=[],r=[],s=[],a=this._idProp,g=function(t){var e=t[a];if(null!=e&&i._data.has(e)){var g=t,l=Lg({},i._data.get(e)),h=i._updateItem(g);n.push(h),s.push(g),r.push(l)}else{var c=i._addItem(t);o.push(c)}};if(Nf(t))for(var l=0,h=t.length;l<h;l++)t[l]&&"object"===Ep(t[l])?g(t[l]):console.warn("Ignoring input item, which is not an object at index "+l);else{if(!t||"object"!==Ep(t))throw new Error("Unknown dataType");g(t)}if(o.length&&this._trigger("add",{items:o},e),n.length){var c={items:n,oldData:r,data:s};this._trigger("update",c,e)}return Ef(o).call(o,n)}},{key:"updateOnly",value:function(t,e){var i,o=this;Nf(t)||(t=[t]);var n=zf(i=zf(t).call(t,(function(t){var e=o._data.get(t[o._idProp]);if(null==e)throw new Error("Updating non-existent items is not allowed.");return{oldData:e,update:t}}))).call(i,(function(t){var e=t.oldData,i=t.update,n=e[o._idProp],r=function(t){for(var e,i=arguments.length,o=new Array(i>1?i-1:0),n=1;n<i;n++)o[n-1]=arguments[n];return c_.apply(void 0,Ef(e=[{},t]).call(e,o))}(e,i);return o._data.set(n,r),{id:n,oldData:e,updatedData:r}}));if(n.length){var r={items:zf(n).call(n,(function(t){return t.id})),oldData:zf(n).call(n,(function(t){return t.oldData})),data:zf(n).call(n,(function(t){return t.updatedData}))};return this._trigger("update",r,e),r.items}return[]}},{key:"get",value:function(t,e){var i=void 0,o=void 0,n=void 0;fM(t)?(i=t,n=e):Nf(t)?(o=t,n=e):n=t;var r,s=n&&"Object"===n.returnType?"Object":"Array",a=n&&dm(n),g=[],l=void 0,h=void 0,c=void 0;if(null!=i)(l=this._data.get(i))&&a&&!a(l)&&(l=void 0);else if(null!=o)for(var u=0,d=o.length;u<d;u++)null==(l=this._data.get(o[u]))||a&&!a(l)||g.push(l);else for(var A,I=0,C=(h=vf(rD(A=this._data).call(A))).length;I<C;I++)c=h[I],null==(l=this._data.get(c))||a&&!a(l)||g.push(l);if(n&&n.order&&null==i&&this._sort(g,n.order),n&&n.fields){var p=n.fields;if(null!=i&&null!=l)l=this._filterFields(l,p);else for(var f=0,v=g.length;f<v;f++)g[f]=this._filterFields(g[f],p)}if("Object"==s){for(var m={},b=0,y=g.length;b<y;b++){var _=g[b];m[_[this._idProp]]=_}return m}return null!=i?null!==(r=l)&&void 0!==r?r:null:g}},{key:"getIds",value:function(t){var e=this._data,i=t&&dm(t),o=t&&t.order,n=vf(rD(e).call(e)),r=[];if(i)if(o){for(var s=[],a=0,g=n.length;a<g;a++){var l=n[a],h=this._data.get(l);null!=h&&i(h)&&s.push(h)}this._sort(s,o);for(var c=0,u=s.length;c<u;c++)r.push(s[c][this._idProp])}else for(var d=0,A=n.length;d<A;d++){var I=n[d],C=this._data.get(I);null!=C&&i(C)&&r.push(C[this._idProp])}else if(o){for(var p=[],f=0,v=n.length;f<v;f++){var m=n[f];p.push(e.get(m))}this._sort(p,o);for(var b=0,y=p.length;b<y;b++)r.push(p[b][this._idProp])}else for(var _=0,T=n.length;_<T;_++){var E=n[_],w=e.get(E);null!=w&&r.push(w[this._idProp])}return r}},{key:"getDataSet",value:function(){return this}},{key:"forEach",value:function(t,e){var i=e&&dm(e),o=this._data,n=vf(rD(o).call(o));if(e&&e.order)for(var r=this.get(e),s=0,a=r.length;s<a;s++){var g=r[s];t(g,g[this._idProp])}else for(var l=0,h=n.length;l<h;l++){var c=n[l],u=this._data.get(c);null==u||i&&!i(u)||t(u,c)}}},{key:"map",value:function(t,e){for(var i=e&&dm(e),o=[],n=this._data,r=vf(rD(n).call(n)),s=0,a=r.length;s<a;s++){var g=r[s],l=this._data.get(g);null==l||i&&!i(l)||o.push(t(l,g))}return e&&e.order&&this._sort(o,e.order),o}},{key:"_filterFields",value:function(t,e){var i;return t?ex(i=Nf(e)?e:Uf(e)).call(i,(function(e,i){return e[i]=t[i],e}),{}):t}},{key:"_sort",value:function(t,e){if("string"==typeof e){var i=e;Qx(t).call(t,(function(t,e){var o=t[i],n=e[i];return o>n?1:o<n?-1:0}))}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");Qx(t).call(t,e)}}},{key:"remove",value:function(t,e){for(var i=[],o=[],n=Nf(t)?t:[t],r=0,s=n.length;r<s;r++){var a=this._remove(n[r]);if(a){var g=a[this._idProp];null!=g&&(i.push(g),o.push(a))}}return i.length&&this._trigger("remove",{items:i,oldData:o},e),i}},{key:"_remove",value:function(t){var e;if(fM(t)?e=t:t&&"object"===Ep(t)&&(e=t[this._idProp]),null!=e&&this._data.has(e)){var i=this._data.get(e)||null;return this._data.delete(e),--this.length,i}return null}},{key:"clear",value:function(t){for(var e,i=vf(rD(e=this._data).call(e)),o=[],n=0,r=i.length;n<r;n++)o.push(this._data.get(i[n]));return this._data.clear(),this.length=0,this._trigger("remove",{items:i,oldData:o},t),i}},{key:"max",value:function(t){var e,i,o=null,n=null,r=CM(dD(e=this._data).call(e));try{for(r.s();!(i=r.n()).done;){var s=i.value,a=s[t];"number"==typeof a&&(null==n||a>n)&&(o=s,n=a)}}catch(t){r.e(t)}finally{r.f()}return o||null}},{key:"min",value:function(t){var e,i,o=null,n=null,r=CM(dD(e=this._data).call(e));try{for(r.s();!(i=r.n()).done;){var s=i.value,a=s[t];"number"==typeof a&&(null==n||a<n)&&(o=s,n=a)}}catch(t){r.e(t)}finally{r.f()}return o||null}},{key:"distinct",value:function(t){for(var e=this._data,i=vf(rD(e).call(e)),o=[],n=0,r=0,s=i.length;r<s;r++){for(var a=i[r],g=e.get(a)[t],l=!1,h=0;h<n;h++)if(o[h]==g){l=!0;break}l||void 0===g||(o[n]=g,n++)}return o}},{key:"_addItem",value:function(t){var e=function(t,e){return null==t[e]&&(t[e]=dM()),t}(t,this._idProp),i=e[this._idProp];if(this._data.has(i))throw new Error("Cannot add item: item with id "+i+" already exists");return this._data.set(i,e),++this.length,i}},{key:"_updateItem",value:function(t){var e=t[this._idProp];if(null==e)throw new Error("Cannot update item: item has no id (item: "+Jm(t)+")");var i=this._data.get(e);if(!i)throw new Error("Cannot update item: no item with id "+e+" found");return this._data.set(e,IM(IM({},i),t)),e}},{key:"stream",value:function(t){if(t){var e=this._data;return new bM(xw({},dx,UR.mark((function i(){var o,n,r,s;return UR.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:o=CM(t),i.prev=1,o.s();case 3:if((n=o.n()).done){i.next=11;break}if(r=n.value,null==(s=e.get(r))){i.next=9;break}return i.next=9,[r,s];case 9:i.next=3;break;case 11:i.next=16;break;case 13:i.prev=13,i.t0=i.catch(1),o.e(i.t0);case 16:return i.prev=16,o.f(),i.finish(16);case 19:case"end":return i.stop()}}),i,null,[[1,13,16,19]])}))))}var i;return new bM(xw({},dx,il(i=bD(this._data)).call(i,this._data)))}}]),n}(mM);function _M(t,e){return"object"===Ep(e)&&null!==e&&t===e.idProp&&"function"==typeof sv(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof zf(e)&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.stream&&function(t,e){return"object"===Ep(e)&&null!==e&&t===e.idProp&&"function"==typeof e.add&&"function"==typeof e.clear&&"function"==typeof e.distinct&&"function"==typeof sv(e)&&"function"==typeof e.get&&"function"==typeof e.getDataSet&&"function"==typeof e.getIds&&"number"==typeof e.length&&"function"==typeof zf(e)&&"function"==typeof e.max&&"function"==typeof e.min&&"function"==typeof e.off&&"function"==typeof e.on&&"function"==typeof e.remove&&"function"==typeof e.setOptions&&"function"==typeof e.stream&&"function"==typeof e.update&&"function"==typeof e.updateOnly}(t,e.getDataSet())}var TM=En,EM=wn,wM=wl,kM=ym.trim,OM=Am,SM=$n("".charAt),RM=TM.parseFloat,xM=TM.Symbol,DM=xM&&xM.iterator,MM=1/RM(OM+"-0")!=-1/0||DM&&!EM((function(){RM(Object(DM))}))?function(t){var e=kM(wM(t)),i=RM(e);return 0===i&&"-"===SM(e,0)?-0:i}:RM;Ya({global:!0,forced:parseFloat!==MM},{parseFloat:MM});var NM=_n(yr.parseFloat),LM=Ya,PM=wn,$M=lA.f;LM({target:"Object",stat:!0,forced:PM((function(){return!Object.getOwnPropertyNames(1)}))},{getOwnPropertyNames:$M});var BM=yr.Object,FM=_n((function(t){return BM.getOwnPropertyNames(t)}));function zM(t,e){var i=["node","edge","label"],o=!0,n=W_(e,"chosen");if("boolean"==typeof n)o=n;else if("object"===Ep(n)){if(-1===Wm(i).call(i,t))throw new Error("choosify: subOption '"+t+"' should be one of '"+i.join("', '")+"'");var r=W_(e,["chosen",t]);"boolean"!=typeof r&&"function"!=typeof r||(o=r)}return o}function HM(t,e,i){if(t.width<=0||t.height<=0)return!1;if(void 0!==i){var o={x:e.x-i.x,y:e.y-i.y};if(0!==i.angle){var n=-i.angle;e={x:Math.cos(n)*o.x-Math.sin(n)*o.y,y:Math.sin(n)*o.x+Math.cos(n)*o.y}}else e=o}var r=t.x+t.width,s=t.y+t.width;return t.left<e.x&&r>e.x&&t.top<e.y&&s>e.y}function GM(t){return"string"==typeof t&&""!==t}function UM(t,e,i,o){var n=o.x,r=o.y;if("function"==typeof o.distanceToBorder){var s=o.distanceToBorder(t,e),a=Math.sin(e)*s,g=Math.cos(e)*s;g===s?(n+=s,r=o.y):a===s?(n=o.x,r-=s):(n+=g,r-=a)}else o.shape.width>o.shape.height?(n=o.x+.5*o.shape.width,r=o.y-i):(n=o.x+i,r=o.y-.5*o.shape.height);return{x:n,y:r}}var VM=function(){function t(e){yd(this,t),this.measureText=e,this.current=0,this.width=0,this.height=0,this.lines=[]}return Sp(t,[{key:"_add",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"normal";void 0===this.lines[t]&&(this.lines[t]={width:0,height:0,blocks:[]});var o=e;void 0!==e&&""!==e||(o=" ");var n=this.measureText(o,i),r=Lg({},dD(n));r.text=e,r.width=n.width,r.mod=i,void 0!==e&&""!==e||(r.width=0),this.lines[t].blocks.push(r),this.lines[t].width+=r.width}},{key:"curWidth",value:function(){var t=this.lines[this.current];return void 0===t?0:t.width}},{key:"append",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e)}},{key:"newLine",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal";this._add(this.current,t,e),this.current++}},{key:"determineLineHeights",value:function(){for(var t=0;t<this.lines.length;t++){var e=this.lines[t],i=0;if(void 0!==e.blocks)for(var o=0;o<e.blocks.length;o++){var n=e.blocks[o];i<n.height&&(i=n.height)}e.height=i}}},{key:"determineLabelSize",value:function(){for(var t=0,e=0,i=0;i<this.lines.length;i++){var o=this.lines[i];o.width>t&&(t=o.width),e+=o.height}this.width=t,this.height=e}},{key:"removeEmptyBlocks",value:function(){for(var t=[],e=0;e<this.lines.length;e++){var i=this.lines[e];if(0!==i.blocks.length&&(e!==this.lines.length-1||0!==i.width)){var o={};Lg(o,i),o.blocks=[];for(var n=void 0,r=[],s=0;s<i.blocks.length;s++){var a=i.blocks[s];0!==a.width?r.push(a):void 0===n&&(n=a)}0===r.length&&void 0!==n&&r.push(n),o.blocks=r,t.push(o)}}return t}},{key:"finalize",value:function(){this.determineLineHeights(),this.determineLabelSize();var t=this.removeEmptyBlocks();return{width:this.width,height:this.height,lines:t}}}]),t}(),WM={"<b>":/<b>/,"<i>":/<i>/,"<code>":/<code>/,"</b>":/<\/b>/,"</i>":/<\/i>/,"</code>":/<\/code>/,"*":/\*/,_:/_/,"`":/`/,afterBold:/[^*]/,afterItal:/[^_]/,afterMono:/[^`]/},jM=function(){function t(e){yd(this,t),this.text=e,this.bold=!1,this.ital=!1,this.mono=!1,this.spacing=!1,this.position=0,this.buffer="",this.modStack=[],this.blocks=[]}return Sp(t,[{key:"mod",value:function(){return 0===this.modStack.length?"normal":this.modStack[0]}},{key:"modName",value:function(){return 0===this.modStack.length?"normal":"mono"===this.modStack[0]?"mono":this.bold&&this.ital?"boldital":this.bold?"bold":this.ital?"ital":void 0}},{key:"emitBlock",value:function(){this.spacing&&(this.add(" "),this.spacing=!1),this.buffer.length>0&&(this.blocks.push({text:this.buffer,mod:this.modName()}),this.buffer="")}},{key:"add",value:function(t){" "===t&&(this.spacing=!0),this.spacing&&(this.buffer+=" ",this.spacing=!1)," "!=t&&(this.buffer+=t)}},{key:"parseWS",value:function(t){return!!/[ \t]/.test(t)&&(this.mono?this.add(t):this.spacing=!0,!0)}},{key:"setTag",value:function(t){this.emitBlock(),this[t]=!0,this.modStack.unshift(t)}},{key:"unsetTag",value:function(t){this.emitBlock(),this[t]=!1,this.modStack.shift()}},{key:"parseStartTag",value:function(t,e){return!(this.mono||this[t]||!this.match(e)||(this.setTag(t),0))}},{key:"match",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=ff(this.prepareRegExp(t),2),o=i[0],n=i[1],r=o.test(this.text.substr(this.position,n));return r&&e&&(this.position+=n-1),r}},{key:"parseEndTag",value:function(t,e,i){var o=this.mod()===t;return!(!(o="mono"===t?o&&this.mono:o&&!this.mono)||!this.match(e)||(void 0!==i?(this.position===this.text.length-1||this.match(i,!1))&&this.unsetTag(t):this.unsetTag(t),0))}},{key:"replace",value:function(t,e){return!!this.match(t)&&(this.add(e),this.position+=length-1,!0)}},{key:"prepareRegExp",value:function(t){var e,i;if(t instanceof RegExp)i=t,e=1;else{var o=WM[t];i=void 0!==o?o:new RegExp(t),e=t.length}return[i,e]}}]),t}(),YM=function(){function t(e,i,o,n){var r=this;yd(this,t),this.ctx=e,this.parent=i,this.selected=o,this.hover=n,this.lines=new VM((function(t,i){if(void 0===t)return 0;var s=r.parent.getFormattingValues(e,o,n,i),a=0;return""!==t&&(a=r.ctx.measureText(t).width),{width:a,values:s}}))}return Sp(t,[{key:"process",value:function(t){if(!GM(t))return this.lines.finalize();var e=this.parent.fontOptions;t=(t=t.replace(/\r\n/g,"\n")).replace(/\r/g,"\n");var i=String(t).split("\n"),o=i.length;if(e.multi)for(var n=0;n<o;n++){var r=this.splitBlocks(i[n],e.multi);if(void 0!==r)if(0!==r.length){if(e.maxWdt>0)for(var s=0;s<r.length;s++){var a=r[s].mod,g=r[s].text;this.splitStringIntoLines(g,a,!0)}else for(var l=0;l<r.length;l++){var h=r[l].mod,c=r[l].text;this.lines.append(c,h)}this.lines.newLine()}else this.lines.newLine("")}else if(e.maxWdt>0)for(var u=0;u<o;u++)this.splitStringIntoLines(i[u]);else for(var d=0;d<o;d++)this.lines.newLine(i[d]);return this.lines.finalize()}},{key:"decodeMarkupSystem",value:function(t){var e="none";return"markdown"===t||"md"===t?e="markdown":!0!==t&&"html"!==t||(e="html"),e}},{key:"splitHtmlBlocks",value:function(t){for(var e=new jM(t),i=function(t){return!!/&/.test(t)&&(e.replace(e.text,"&lt;","<")||e.replace(e.text,"&amp;","&")||e.add("&"),!0)};e.position<e.text.length;){var o=e.text.charAt(e.position);e.parseWS(o)||/</.test(o)&&(e.parseStartTag("bold","<b>")||e.parseStartTag("ital","<i>")||e.parseStartTag("mono","<code>")||e.parseEndTag("bold","</b>")||e.parseEndTag("ital","</i>")||e.parseEndTag("mono","</code>"))||i(o)||e.add(o),e.position++}return e.emitBlock(),e.blocks}},{key:"splitMarkdownBlocks",value:function(t){for(var e=this,i=new jM(t),o=!0,n=function(t){return!!/\\/.test(t)&&(i.position<e.text.length+1&&(i.position++,t=e.text.charAt(i.position),/ \t/.test(t)?i.spacing=!0:(i.add(t),o=!1)),!0)};i.position<i.text.length;){var r=i.text.charAt(i.position);i.parseWS(r)||n(r)||(o||i.spacing)&&(i.parseStartTag("bold","*")||i.parseStartTag("ital","_")||i.parseStartTag("mono","`"))||i.parseEndTag("bold","*","afterBold")||i.parseEndTag("ital","_","afterItal")||i.parseEndTag("mono","`","afterMono")||(i.add(r),o=!1),i.position++}return i.emitBlock(),i.blocks}},{key:"splitBlocks",value:function(t,e){var i=this.decodeMarkupSystem(e);return"none"===i?[{text:t,mod:"normal"}]:"markdown"===i?this.splitMarkdownBlocks(t):"html"===i?this.splitHtmlBlocks(t):void 0}},{key:"overMaxWidth",value:function(t){var e=this.ctx.measureText(t).width;return this.lines.curWidth()+e>this.parent.fontOptions.maxWdt}},{key:"getLongestFit",value:function(t){for(var e="",i=0;i<t.length;){var o=e+(""===e?"":" ")+t[i];if(this.overMaxWidth(o))break;e=o,i++}return i}},{key:"getLongestFitWord",value:function(t){for(var e=0;e<t.length&&!this.overMaxWidth(wf(t).call(t,0,e));)e++;return e}},{key:"splitStringIntoLines",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"normal",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this.parent.getFormattingValues(this.ctx,this.selected,this.hover,e);for(var o=(t=(t=t.replace(/^( +)/g,"$1\r")).replace(/([^\r][^ ]*)( +)/g,"$1\r$2\r")).split("\r");o.length>0;){var n=this.getLongestFit(o);if(0===n){var r=o[0],s=this.getLongestFitWord(r);this.lines.newLine(wf(r).call(r,0,s),e),o[0]=wf(r).call(r,s)}else{var a=n;" "===o[n-1]?n--:" "===o[a]&&a++;var g=wf(o).call(o,0,n).join("");n==o.length&&i?this.lines.append(g,e):this.lines.newLine(g,e),o=wf(o).call(o,a)}}}}]),t}(),XM=["bold","ital","boldital","mono"],ZM=function(){function t(e,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];yd(this,t),this.body=e,this.pointToSelf=!1,this.baseSize=void 0,this.fontOptions={},this.setOptions(i),this.size={top:0,left:0,width:0,height:0,yLine:0},this.isEdgeLabel=o}return Sp(t,[{key:"setOptions",value:function(t){if(this.elementOptions=t,this.initFontOptions(t.font),GM(t.label)?this.labelDirty=!0:t.label=void 0,void 0!==t.font&&null!==t.font)if("string"==typeof t.font)this.baseSize=this.fontOptions.size;else if("object"===Ep(t.font)){var e=t.font.size;void 0!==e&&(this.baseSize=e)}}},{key:"initFontOptions",value:function(e){var i=this;D_(XM,(function(t){i.fontOptions[t]={}})),t.parseFontString(this.fontOptions,e)?this.fontOptions.vadjust=0:D_(e,(function(t,e){null!=t&&"object"!==Ep(t)&&(i.fontOptions[e]=t)}))}},{key:"constrain",value:function(t){var e={constrainWidth:!1,maxWdt:-1,minWdt:-1,constrainHeight:!1,minHgt:-1,valign:"middle"},i=W_(t,"widthConstraint");if("number"==typeof i)e.maxWdt=Number(i),e.minWdt=Number(i);else if("object"===Ep(i)){var o=W_(t,["widthConstraint","maximum"]);"number"==typeof o&&(e.maxWdt=Number(o));var n=W_(t,["widthConstraint","minimum"]);"number"==typeof n&&(e.minWdt=Number(n))}var r=W_(t,"heightConstraint");if("number"==typeof r)e.minHgt=Number(r);else if("object"===Ep(r)){var s=W_(t,["heightConstraint","minimum"]);"number"==typeof s&&(e.minHgt=Number(s));var a=W_(t,["heightConstraint","valign"]);"string"==typeof a&&("top"!==a&&"bottom"!==a||(e.valign=a))}return e}},{key:"update",value:function(t,e){this.setOptions(t,!0),this.propagateFonts(e),S_(this.fontOptions,this.constrain(e)),this.fontOptions.chooser=zM("label",e)}},{key:"adjustSizes",value:function(t){var e=t?t.right+t.left:0;this.fontOptions.constrainWidth&&(this.fontOptions.maxWdt-=e,this.fontOptions.minWdt-=e);var i=t?t.top+t.bottom:0;this.fontOptions.constrainHeight&&(this.fontOptions.minHgt-=i)}},{key:"addFontOptionsToPile",value:function(t,e){for(var i=0;i<e.length;++i)this.addFontToPile(t,e[i])}},{key:"addFontToPile",value:function(t,e){if(void 0!==e&&void 0!==e.font&&null!==e.font){var i=e.font;t.push(i)}}},{key:"getBasicOptions",value:function(e){for(var i={},o=0;o<e.length;++o){var n=e[o],r={};t.parseFontString(r,n)&&(n=r),D_(n,(function(t,e){void 0!==t&&(Object.prototype.hasOwnProperty.call(i,e)||(-1!==Wm(XM).call(XM,e)?i[e]={}:i[e]=t))}))}return i}},{key:"getFontOption",value:function(e,i,o){for(var n,r=0;r<e.length;++r){var s=e[r];if(Object.prototype.hasOwnProperty.call(s,i)){if(null==(n=s[i]))continue;var a={};if(t.parseFontString(a,n)&&(n=a),Object.prototype.hasOwnProperty.call(n,o))return n[o]}}if(Object.prototype.hasOwnProperty.call(this.fontOptions,o))return this.fontOptions[o];throw new Error("Did not find value for multi-font for property: '"+o+"'")}},{key:"getFontOptions",value:function(t,e){for(var i={},o=["color","size","face","mod","vadjust"],n=0;n<o.length;++n){var r=o[n];i[r]=this.getFontOption(t,e,r)}return i}},{key:"propagateFonts",value:function(t){var e=this,i=[];this.addFontOptionsToPile(i,t),this.fontOptions=this.getBasicOptions(i);for(var o=function(){var t=XM[n],o=e.fontOptions[t];D_(e.getFontOptions(i,t),(function(t,e){o[e]=t})),o.size=Number(o.size),o.vadjust=Number(o.vadjust)},n=0;n<XM.length;++n)o()}},{key:"draw",value:function(t,e,i,o,n){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";if(void 0!==this.elementOptions.label){var s=this.fontOptions.size*this.body.view.scale;this.elementOptions.label&&s<this.elementOptions.scaling.label.drawThreshold-1||(s>=this.elementOptions.scaling.label.maxVisible&&(s=Number(this.elementOptions.scaling.label.maxVisible)/this.body.view.scale),this.calculateLabelSize(t,o,n,e,i,r),this._drawBackground(t),this._drawText(t,e,this.size.yLine,r,s))}}},{key:"_drawBackground",value:function(t){if(void 0!==this.fontOptions.background&&"none"!==this.fontOptions.background){t.fillStyle=this.fontOptions.background;var e=this.getSize();t.fillRect(e.left,e.top,e.width,e.height)}}},{key:"_drawText",value:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"middle",n=arguments.length>4?arguments[4]:void 0,r=ff(this._setAlignment(t,e,i,o),2);e=r[0],i=r[1],t.textAlign="left",e-=this.size.width/2,this.fontOptions.valign&&this.size.height>this.size.labelHeight&&("top"===this.fontOptions.valign&&(i-=(this.size.height-this.size.labelHeight)/2),"bottom"===this.fontOptions.valign&&(i+=(this.size.height-this.size.labelHeight)/2));for(var s=0;s<this.lineCount;s++){var a=this.lines[s];if(a&&a.blocks){var g=0;this.isEdgeLabel||"center"===this.fontOptions.align?g+=(this.size.width-a.width)/2:"right"===this.fontOptions.align&&(g+=this.size.width-a.width);for(var l=0;l<a.blocks.length;l++){var h=a.blocks[l];t.font=h.font;var c=ff(this._getColor(h.color,n,h.strokeColor),2),u=c[0],d=c[1];h.strokeWidth>0&&(t.lineWidth=h.strokeWidth,t.strokeStyle=d,t.lineJoin="round"),t.fillStyle=u,h.strokeWidth>0&&t.strokeText(h.text,e+g,i+h.vadjust),t.fillText(h.text,e+g,i+h.vadjust),g+=h.width}i+=a.height}}}},{key:"_setAlignment",value:function(t,e,i,o){return this.isEdgeLabel&&"horizontal"!==this.fontOptions.align&&!1===this.pointToSelf?(e=0,i=0,"top"===this.fontOptions.align?(t.textBaseline="alphabetic",i-=4):"bottom"===this.fontOptions.align?(t.textBaseline="hanging",i+=4):t.textBaseline="middle"):t.textBaseline=o,[e,i]}},{key:"_getColor",value:function(t,e,i){var o=t||"#000000",n=i||"#ffffff";if(e<=this.elementOptions.scaling.label.drawThreshold){var r=Math.max(0,Math.min(1,1-(this.elementOptions.scaling.label.drawThreshold-e)));o=N_(o,r),n=N_(n,r)}return[o,n]}},{key:"getTextSize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this._processLabel(t,e,i),{width:this.size.width,height:this.size.height,lineCount:this.lineCount}}},{key:"getSize",value:function(){var t=this.size.left,e=this.size.top-1;if(this.isEdgeLabel){var i=.5*-this.size.width;switch(this.fontOptions.align){case"middle":t=i,e=.5*-this.size.height;break;case"top":t=i,e=-(this.size.height+2);break;case"bottom":t=i,e=2}}return{left:t,top:e,width:this.size.width,height:this.size.height}}},{key:"calculateLabelSize",value:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"middle";this._processLabel(t,e,i),this.size.left=o-.5*this.size.width,this.size.top=n-.5*this.size.height,this.size.yLine=n+.5*(1-this.lineCount)*this.fontOptions.size,"hanging"===r&&(this.size.top+=.5*this.fontOptions.size,this.size.top+=4,this.size.yLine+=4)}},{key:"getFormattingValues",value:function(t,e,i,o){var n=function(t,e,i){return"normal"===e?"mod"===i?"":t[i]:void 0!==t[e][i]?t[e][i]:t[i]},r={color:n(this.fontOptions,o,"color"),size:n(this.fontOptions,o,"size"),face:n(this.fontOptions,o,"face"),mod:n(this.fontOptions,o,"mod"),vadjust:n(this.fontOptions,o,"vadjust"),strokeWidth:this.fontOptions.strokeWidth,strokeColor:this.fontOptions.strokeColor};(e||i)&&("normal"===o&&!0===this.fontOptions.chooser&&this.elementOptions.labelHighlightBold?r.mod="bold":"function"==typeof this.fontOptions.chooser&&this.fontOptions.chooser(r,this.elementOptions.id,e,i));var s="";return void 0!==r.mod&&""!==r.mod&&(s+=r.mod+" "),s+=r.size+"px "+r.face,t.font=s.replace(/"/g,""),r.font=t.font,r.height=r.size,r}},{key:"differentState",value:function(t,e){return t!==this.selectedState||e!==this.hoverState}},{key:"_processLabelText",value:function(t,e,i,o){return new YM(t,this,e,i).process(o)}},{key:"_processLabel",value:function(t,e,i){if(!1!==this.labelDirty||this.differentState(e,i)){var o=this._processLabelText(t,e,i,this.elementOptions.label);this.fontOptions.minWdt>0&&o.width<this.fontOptions.minWdt&&(o.width=this.fontOptions.minWdt),this.size.labelHeight=o.height,this.fontOptions.minHgt>0&&o.height<this.fontOptions.minHgt&&(o.height=this.fontOptions.minHgt),this.lines=o.lines,this.lineCount=o.lines.length,this.size.width=o.width,this.size.height=o.height,this.selectedState=e,this.hoverState=i,this.labelDirty=!1}}},{key:"visible",value:function(){return 0!==this.size.width&&0!==this.size.height&&void 0!==this.elementOptions.label&&!(this.fontOptions.size*this.body.view.scale<this.elementOptions.scaling.label.drawThreshold-1)}}],[{key:"parseFontString",value:function(t,e){if(!e||"string"!=typeof e)return!1;var i=e.split(" ");return t.size=+i[0].replace("px",""),t.face=i[1],t.color=i[2],!0}}]),t}(),KM=function(){function t(e,i,o){yd(this,t),this.body=i,this.labelModule=o,this.setOptions(e),this.top=void 0,this.left=void 0,this.height=void 0,this.width=void 0,this.radius=void 0,this.margin=void 0,this.refreshNeeded=!0,this.boundingBox={top:0,left:0,right:0,bottom:0}}return Sp(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"_setMargins",value:function(t){this.margin={},this.options.margin&&("object"==Ep(this.options.margin)?(this.margin.top=this.options.margin.top,this.margin.right=this.options.margin.right,this.margin.bottom=this.options.margin.bottom,this.margin.left=this.options.margin.left):(this.margin.top=this.options.margin,this.margin.right=this.options.margin,this.margin.bottom=this.options.margin,this.margin.left=this.options.margin)),t.adjustSizes(this.margin)}},{key:"_distanceToBorder",value:function(t,e){var i=this.options.borderWidth;return t&&this.resize(t),Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}},{key:"enableShadow",value:function(t,e){e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"enableBorderDashes",value:function(t,e){if(!1!==e.borderDashes)if(void 0!==t.setLineDash){var i=e.borderDashes;!0===i&&(i=[5,15]),t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1}},{key:"disableBorderDashes",value:function(t,e){!1!==e.borderDashes&&(void 0!==t.setLineDash?t.setLineDash([0]):(console.warn("setLineDash is not supported in this browser. The dashed borders cannot be used."),this.options.shapeProperties.borderDashes=!1,e.borderDashes=!1))}},{key:"needsRefresh",value:function(t,e){return!0===this.refreshNeeded?(this.refreshNeeded=!1,!0):void 0===this.width||this.labelModule.differentState(t,e)}},{key:"initContextForDraw",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.lineWidth=Math.min(this.width,i),t.strokeStyle=e.borderColor,t.fillStyle=e.color}},{key:"performStroke",value:function(t,e){var i=e.borderWidth/this.body.view.scale;t.save(),i>0&&(this.enableBorderDashes(t,e),t.stroke(),this.disableBorderDashes(t,e)),t.restore()}},{key:"performFill",value:function(t,e){t.save(),t.fillStyle=e.color,this.enableShadow(t,e),wb(t).call(t),this.disableShadow(t,e),t.restore(),this.performStroke(t,e)}},{key:"_addBoundingBoxMargin",value:function(t){this.boundingBox.left-=t,this.boundingBox.top-=t,this.boundingBox.bottom+=t,this.boundingBox.right+=t}},{key:"_updateBoundingBox",value:function(t,e,i,o,n){void 0!==i&&this.resize(i,o,n),this.left=t-this.width/2,this.top=e-this.height/2,this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width}},{key:"updateBoundingBox",value:function(t,e,i,o,n){this._updateBoundingBox(t,e,i,o,n)}},{key:"getDimensionsFromLabel",value:function(t,e,i){this.textSize=this.labelModule.getTextSize(t,e,i);var o=this.textSize.width,n=this.textSize.height;return 0===o&&(o=14,n=14),{width:o,height:n}}}]),t}();var QM=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){var r;return yd(this,n),(r=o.call(this,t,e,i))._setMargins(i),r}return Sp(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var o=this.getDimensionsFromLabel(t,e,i);this.width=o.width+this.margin.right+this.margin.left,this.height=o.height+this.margin.top+this.margin.bottom,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,r),nl(t,this.left,this.top,this.width,this.height,r.borderRadius),this.performFill(t,r),this.updateBoundingBox(e,i,t,o,n),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,o,n)}},{key:"updateBoundingBox",value:function(t,e,i,o,n){this._updateBoundingBox(t,e,i,o,n);var r=this.options.shapeProperties.borderRadius;this._addBoundingBoxMargin(r)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var i=this.options.borderWidth;return Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i}}]),n}(KM);var JM=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){var r;return yd(this,n),(r=o.call(this,t,e,i)).labelOffset=0,r.selected=!1,r}return Sp(n,[{key:"setOptions",value:function(t,e,i){this.options=t,void 0===e&&void 0===i||this.setImages(e,i)}},{key:"setImages",value:function(t,e){e&&this.selected?(this.imageObj=e,this.imageObjAlt=t):(this.imageObj=t,this.imageObjAlt=e)}},{key:"switchImages",value:function(t){var e=t&&!this.selected||!t&&this.selected;if(this.selected=t,void 0!==this.imageObjAlt&&e){var i=this.imageObj;this.imageObj=this.imageObjAlt,this.imageObjAlt=i}}},{key:"_getImagePadding",value:function(){var t={top:0,right:0,bottom:0,left:0};if(this.options.imagePadding){var e=this.options.imagePadding;"object"==Ep(e)?(t.top=e.top,t.right=e.right,t.bottom=e.bottom,t.left=e.left):(t.top=e,t.right=e,t.bottom=e,t.left=e)}return t}},{key:"_resizeImage",value:function(){var t,e;if(!1===this.options.shapeProperties.useImageSize){var i=1,o=1;this.imageObj.width&&this.imageObj.height&&(this.imageObj.width>this.imageObj.height?i=this.imageObj.width/this.imageObj.height:o=this.imageObj.height/this.imageObj.width),t=2*this.options.size*i,e=2*this.options.size*o}else{var n=this._getImagePadding();t=this.imageObj.width+n.left+n.right,e=this.imageObj.height+n.top+n.bottom}this.width=t,this.height=e,this.radius=.5*this.width}},{key:"_drawRawCircle",value:function(t,e,i,o){this.initContextForDraw(t,o),ol(t,e,i,o.size),this.performFill(t,o)}},{key:"_drawImageAtPosition",value:function(t,e){if(0!=this.imageObj.width){t.globalAlpha=void 0!==e.opacity?e.opacity:1,this.enableShadow(t,e);var i=1;!0===this.options.shapeProperties.interpolation&&(i=this.imageObj.width/this.width/this.body.view.scale);var o=this._getImagePadding(),n=this.left+o.left,r=this.top+o.top,s=this.width-o.left-o.right,a=this.height-o.top-o.bottom;this.imageObj.drawImageAtPosition(t,i,n,r,s,a),this.disableShadow(t,e)}}},{key:"_drawImageLabel",value:function(t,e,i,o,n){var r=0;if(void 0!==this.height){r=.5*this.height;var s=this.labelModule.getTextSize(t,o,n);s.lineCount>=1&&(r+=s.height/2)}var a=i+r;this.options.label&&(this.labelOffset=r),this.labelModule.draw(t,e,a,o,n,"hanging")}}]),n}(KM);var qM=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){var r;return yd(this,n),(r=o.call(this,t,e,i))._setMargins(i),r}return Sp(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var o=this.getDimensionsFromLabel(t,e,i),n=Math.max(o.width+this.margin.right+this.margin.left,o.height+this.margin.top+this.margin.bottom);this.options.size=n/2,this.width=n,this.height=n,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n),this.left=e-this.width/2,this.top=i-this.height/2,this._drawRawCircle(t,e,i,r),this.updateBoundingBox(e,i),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,i,o,n)}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),.5*this.width}}]),n}(JM);var tN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i,r,s){var a;return yd(this,n),(a=o.call(this,t,e,i)).setImages(r,s),a}return Sp(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var o=2*this.options.size;return this.width=o,this.height=o,void(this.radius=.5*this.width)}this.needsRefresh(e,i)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,o,n,r){this.switchImages(o),this.resize();var s=e,a=i;"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=i,s+=this.width/2,a+=this.height/2):(this.left=e-this.width/2,this.top=i-this.height/2),this._drawRawCircle(t,s,a,r),t.save(),t.clip(),this._drawImageAtPosition(t,r),t.restore(),this._drawImageLabel(t,s,a,o,n),this.updateBoundingBox(e,i)}},{key:"updateBoundingBox",value:function(t,e){"top-left"===this.options.shapeProperties.coordinateOrigin?(this.boundingBox.top=e,this.boundingBox.left=t,this.boundingBox.right=t+2*this.options.size,this.boundingBox.bottom=e+2*this.options.size):(this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size),this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset)}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),.5*this.width}}]),n}(JM);var eN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{size:this.options.size};if(this.needsRefresh(e,i)){var n,r;this.labelModule.getTextSize(t,e,i);var s=2*o.size;this.width=null!==(n=this.customSizeWidth)&&void 0!==n?n:s,this.height=null!==(r=this.customSizeHeight)&&void 0!==r?r:s,this.radius=.5*this.width}}},{key:"_drawShape",value:function(t,e,i,o,n,r,s,a){var g,l=this;return this.resize(t,r,s,a),this.left=o-this.width/2,this.top=n-this.height/2,this.initContextForDraw(t,a),(g=e,Object.prototype.hasOwnProperty.call(gl,g)?gl[g]:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),o=1;o<e;o++)i[o-1]=arguments[o];CanvasRenderingContext2D.prototype[g].call(t,i)})(t,o,n,a.size),this.performFill(t,a),void 0!==this.options.icon&&void 0!==this.options.icon.code&&(t.font=(r?"bold ":"")+this.height/2+"px "+(this.options.icon.face||"FontAwesome"),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",t.fillText(this.options.icon.code,o,n)),{drawExternalLabel:function(){if(void 0!==l.options.label){l.labelModule.calculateLabelSize(t,r,s,o,n,"hanging");var e=n+.5*l.height+.5*l.labelModule.size.height;l.labelModule.draw(t,o,e,r,s,"hanging")}l.updateBoundingBox(o,n)}}}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-this.options.size,this.boundingBox.left=t-this.options.size,this.boundingBox.right=t+this.options.size,this.boundingBox.bottom=e+this.options.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height))}}]),n}(KM);function iN(t,e){var i=Uf(t);if(BD){var o=BD(t);e&&(o=dm(o).call(o,(function(e){return XD(t,e).enumerable}))),i.push.apply(i,o)}return i}function oN(t){for(var e=1;e<arguments.length;e++){var i,o,n=null!=arguments[e]?arguments[e]:{};e%2?sv(i=iN(Object(n),!0)).call(i,(function(e){xw(t,e,n[e])})):qD?sM(t,qD(n)):sv(o=iN(Object(n))).call(o,(function(e){yD(t,e,XD(n,e))}))}return t}var nN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i,r){var s;return yd(this,n),(s=o.call(this,t,e,i,r)).ctxRenderer=r,s}return Sp(n,[{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n,r),this.left=e-this.width/2,this.top=i-this.height/2,t.save();var s=this.ctxRenderer({ctx:t,id:this.options.id,x:e,y:i,state:{selected:o,hover:n},style:oN({},r),label:this.options.label});if(null!=s.drawNode&&s.drawNode(),t.restore(),s.drawExternalLabel){var a=s.drawExternalLabel;s.drawExternalLabel=function(){t.save(),a(),t.restore()}}return s.nodeDimensions&&(this.customSizeWidth=s.nodeDimensions.width,this.customSizeHeight=s.nodeDimensions.height),s}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(eN);var rN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){var r;return yd(this,n),(r=o.call(this,t,e,i))._setMargins(i),r}return Sp(n,[{key:"resize",value:function(t,e,i){if(this.needsRefresh(e,i)){var o=this.getDimensionsFromLabel(t,e,i).width+this.margin.right+this.margin.left;this.width=o,this.height=o,this.radius=this.width/2}}},{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n),this.left=e-this.width/2,this.top=i-this.height/2,this.initContextForDraw(t,r),sl(t,e-this.width/2,i-this.height/2,this.width,this.height),this.performFill(t,r),this.updateBoundingBox(e,i,t,o,n),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,o,n)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(KM);var sN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"diamond",4,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(eN);var aN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"circle",2,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t){return t&&this.resize(t),this.options.size}}]),n}(eN);var gN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(this.needsRefresh(e,i)){var o=this.getDimensionsFromLabel(t,e,i);this.height=2*o.height,this.width=o.width+o.height,this.radius=.5*this.width}}},{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n),this.left=e-.5*this.width,this.top=i-.5*this.height,this.initContextForDraw(t,r),rl(t,this.left,this.top,this.width,this.height),this.performFill(t,r),this.updateBoundingBox(e,i,t,o,n),this.labelModule.draw(t,e,i,o,n)}},{key:"distanceToBorder",value:function(t,e){t&&this.resize(t);var i=.5*this.width,o=.5*this.height,n=Math.sin(e)*i,r=Math.cos(e)*o;return i*o/Math.sqrt(n*n+r*r)}}]),n}(KM);var lN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){var r;return yd(this,n),(r=o.call(this,t,e,i))._setMargins(i),r}return Sp(n,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.iconSize={width:Number(this.options.icon.size),height:Number(this.options.icon.size)},this.width=this.iconSize.width+this.margin.right+this.margin.left,this.height=this.iconSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,o,n,r){var s=this;return this.resize(t,o,n),this.options.icon.size=this.options.icon.size||50,this.left=e-this.width/2,this.top=i-this.height/2,this._icon(t,e,i,o,n,r),{drawExternalLabel:function(){void 0!==s.options.label&&s.labelModule.draw(t,s.left+s.iconSize.width/2+s.margin.left,i+s.height/2+5,o),s.updateBoundingBox(e,i)}}}},{key:"updateBoundingBox",value:function(t,e){this.boundingBox.top=e-.5*this.options.icon.size,this.boundingBox.left=t-.5*this.options.icon.size,this.boundingBox.right=t+.5*this.options.icon.size,this.boundingBox.bottom=e+.5*this.options.icon.size,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelModule.size.height+5))}},{key:"_icon",value:function(t,e,i,o,n,r){var s=Number(this.options.icon.size);void 0!==this.options.icon.code?(t.font=[null!=this.options.icon.weight?this.options.icon.weight:o?"bold":"",(null!=this.options.icon.weight&&o?5:0)+s+"px",this.options.icon.face].join(" "),t.fillStyle=this.options.icon.color||"black",t.textAlign="center",t.textBaseline="middle",this.enableShadow(t,r),t.fillText(this.options.icon.code,e,i),this.disableShadow(t,r)):console.error("When using the icon shape, you need to define the code in the icon options object. This can be done per node or globally.")}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(KM);var hN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i,r,s){var a;return yd(this,n),(a=o.call(this,t,e,i)).setImages(r,s),a}return Sp(n,[{key:"resize",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.selected,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.hover;if(void 0===this.imageObj.src||void 0===this.imageObj.width||void 0===this.imageObj.height){var o=2*this.options.size;return this.width=o,void(this.height=o)}this.needsRefresh(e,i)&&this._resizeImage()}},{key:"draw",value:function(t,e,i,o,n,r){t.save(),this.switchImages(o),this.resize();var s=e,a=i;if("top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=e,this.top=i,s+=this.width/2,a+=this.height/2):(this.left=e-this.width/2,this.top=i-this.height/2),!0===this.options.shapeProperties.useBorderWithImage){var g=this.options.borderWidth,l=this.options.borderWidthSelected||2*this.options.borderWidth,h=(o?l:g)/this.body.view.scale;t.lineWidth=Math.min(this.width,h),t.beginPath();var c=o?this.options.color.highlight.border:n?this.options.color.hover.border:this.options.color.border,u=o?this.options.color.highlight.background:n?this.options.color.hover.background:this.options.color.background;void 0!==r.opacity&&(c=N_(c,r.opacity),u=N_(u,r.opacity)),t.strokeStyle=c,t.fillStyle=u,t.rect(this.left-.5*t.lineWidth,this.top-.5*t.lineWidth,this.width+t.lineWidth,this.height+t.lineWidth),wb(t).call(t),this.performStroke(t,r),t.closePath()}this._drawImageAtPosition(t,r),this._drawImageLabel(t,s,a,o,n),this.updateBoundingBox(e,i),t.restore()}},{key:"updateBoundingBox",value:function(t,e){this.resize(),"top-left"===this.options.shapeProperties.coordinateOrigin?(this.left=t,this.top=e):(this.left=t-this.width/2,this.top=e-this.height/2),this.boundingBox.left=this.left,this.boundingBox.top=this.top,this.boundingBox.bottom=this.top+this.height,this.boundingBox.right=this.left+this.width,void 0!==this.options.label&&this.labelModule.size.width>0&&(this.boundingBox.left=Math.min(this.boundingBox.left,this.labelModule.size.left),this.boundingBox.right=Math.max(this.boundingBox.right,this.labelModule.size.left+this.labelModule.size.width),this.boundingBox.bottom=Math.max(this.boundingBox.bottom,this.boundingBox.bottom+this.labelOffset))}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(JM);var cN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"square",2,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(eN);var uN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"hexagon",4,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(eN);var dN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"star",4,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(eN);var AN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){var r;return yd(this,n),(r=o.call(this,t,e,i))._setMargins(i),r}return Sp(n,[{key:"resize",value:function(t,e,i){this.needsRefresh(e,i)&&(this.textSize=this.labelModule.getTextSize(t,e,i),this.width=this.textSize.width+this.margin.right+this.margin.left,this.height=this.textSize.height+this.margin.top+this.margin.bottom,this.radius=.5*this.width)}},{key:"draw",value:function(t,e,i,o,n,r){this.resize(t,o,n),this.left=e-this.width/2,this.top=i-this.height/2,this.enableShadow(t,r),this.labelModule.draw(t,this.left+this.textSize.width/2+this.margin.left,this.top+this.textSize.height/2+this.margin.top,o,n),this.disableShadow(t,r),this.updateBoundingBox(e,i,t,o,n)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(KM);var IN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"triangle",3,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(eN);var CN=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"draw",value:function(t,e,i,o,n,r){return this._drawShape(t,"triangleDown",3,e,i,o,n,r)}},{key:"distanceToBorder",value:function(t,e){return this._distanceToBorder(t,e)}}]),n}(eN);function pN(t,e){var i=Uf(t);if(BD){var o=BD(t);e&&(o=dm(o).call(o,(function(e){return XD(t,e).enumerable}))),i.push.apply(i,o)}return i}function fN(t){for(var e=1;e<arguments.length;e++){var i,o,n=null!=arguments[e]?arguments[e]:{};e%2?sv(i=pN(Object(n),!0)).call(i,(function(e){xw(t,e,n[e])})):qD?sM(t,qD(n)):sv(o=pN(Object(n))).call(o,(function(e){yD(t,e,XD(n,e))}))}return t}var vN=function(){function t(e,i,o,n,r,s){yd(this,t),this.options=G_(r),this.globalOptions=r,this.defaultOptions=s,this.body=i,this.edges=[],this.id=void 0,this.imagelist=o,this.grouplist=n,this.x=void 0,this.y=void 0,this.baseSize=this.options.size,this.baseFontSize=this.options.font.size,this.predefinedPosition=!1,this.selected=!1,this.hover=!1,this.labelModule=new ZM(this.body,this.options,!1),this.setOptions(e)}return Sp(t,[{key:"attachEdge",value:function(t){var e;-1===Wm(e=this.edges).call(e,t)&&this.edges.push(t)}},{key:"detachEdge",value:function(t){var e,i,o=Wm(e=this.edges).call(e,t);-1!=o&&$v(i=this.edges).call(i,o,1)}},{key:"setOptions",value:function(e){var i=this.options.shape;if(e){if(void 0!==e.color&&(this._localColor=e.color),void 0!==e.id&&(this.id=e.id),void 0===this.id)throw new Error("Node must have an id");t.checkMass(e,this.id),void 0!==e.x&&(null===e.x?(this.x=void 0,this.predefinedPosition=!1):(this.x=Lm(e.x),this.predefinedPosition=!0)),void 0!==e.y&&(null===e.y?(this.y=void 0,this.predefinedPosition=!1):(this.y=Lm(e.y),this.predefinedPosition=!0)),void 0!==e.size&&(this.baseSize=e.size),void 0!==e.value&&(e.value=NM(e.value)),t.parseOptions(this.options,e,!0,this.globalOptions,this.grouplist);var o=[e,this.options,this.defaultOptions];return this.chooser=zM("node",o),this._load_images(),this.updateLabelModule(e),void 0!==e.opacity&&t.checkOpacity(e.opacity)&&(this.options.opacity=e.opacity),this.updateShape(i),void 0!==e.hidden||void 0!==e.physics}}},{key:"_load_images",value:function(){if(("circularImage"===this.options.shape||"image"===this.options.shape)&&void 0===this.options.image)throw new Error("Option image must be defined for node type '"+this.options.shape+"'");if(void 0!==this.options.image){if(void 0===this.imagelist)throw new Error("Internal Error: No images provided");if("string"==typeof this.options.image)this.imageObj=this.imagelist.load(this.options.image,this.options.brokenImage,this.id);else{if(void 0===this.options.image.unselected)throw new Error("No unselected image provided");this.imageObj=this.imagelist.load(this.options.image.unselected,this.options.brokenImage,this.id),void 0!==this.options.image.selected?this.imageObjAlt=this.imagelist.load(this.options.image.selected,this.options.brokenImage,this.id):this.imageObjAlt=void 0}}}},{key:"getFormattingValues",value:function(){var t={color:this.options.color.background,opacity:this.options.opacity,borderWidth:this.options.borderWidth,borderColor:this.options.color.border,size:this.options.size,borderDashes:this.options.shapeProperties.borderDashes,borderRadius:this.options.shapeProperties.borderRadius,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y};if(this.selected||this.hover?!0===this.chooser?this.selected?(null!=this.options.borderWidthSelected?t.borderWidth=this.options.borderWidthSelected:t.borderWidth*=2,t.color=this.options.color.highlight.background,t.borderColor=this.options.color.highlight.border,t.shadow=this.options.shadow.enabled):this.hover&&(t.color=this.options.color.hover.background,t.borderColor=this.options.color.hover.border,t.shadow=this.options.shadow.enabled):"function"==typeof this.chooser&&(this.chooser(t,this.options.id,this.selected,this.hover),!1===t.shadow&&(t.shadowColor===this.options.shadow.color&&t.shadowSize===this.options.shadow.size&&t.shadowX===this.options.shadow.x&&t.shadowY===this.options.shadow.y||(t.shadow=!0))):t.shadow=this.options.shadow.enabled,void 0!==this.options.opacity){var e=this.options.opacity;t.borderColor=N_(t.borderColor,e),t.color=N_(t.color,e),t.shadowColor=N_(t.shadowColor,e)}return t}},{key:"updateLabelModule",value:function(e){void 0!==this.options.label&&null!==this.options.label||(this.options.label=""),t.updateGroupOptions(this.options,fN(fN({},e),{},{color:e&&e.color||this._localColor||void 0}),this.grouplist);var i=this.grouplist.get(this.options.group,!1),o=[e,this.options,i,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,o),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateShape",value:function(t){if(t===this.options.shape&&this.shape)this.shape.setOptions(this.options,this.imageObj,this.imageObjAlt);else switch(this.options.shape){case"box":this.shape=new QM(this.options,this.body,this.labelModule);break;case"circle":this.shape=new qM(this.options,this.body,this.labelModule);break;case"circularImage":this.shape=new tN(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"custom":this.shape=new nN(this.options,this.body,this.labelModule,this.options.ctxRenderer);break;case"database":this.shape=new rN(this.options,this.body,this.labelModule);break;case"diamond":this.shape=new sN(this.options,this.body,this.labelModule);break;case"dot":this.shape=new aN(this.options,this.body,this.labelModule);break;case"ellipse":default:this.shape=new gN(this.options,this.body,this.labelModule);break;case"icon":this.shape=new lN(this.options,this.body,this.labelModule);break;case"image":this.shape=new hN(this.options,this.body,this.labelModule,this.imageObj,this.imageObjAlt);break;case"square":this.shape=new cN(this.options,this.body,this.labelModule);break;case"hexagon":this.shape=new uN(this.options,this.body,this.labelModule);break;case"star":this.shape=new dN(this.options,this.body,this.labelModule);break;case"text":this.shape=new AN(this.options,this.body,this.labelModule);break;case"triangle":this.shape=new IN(this.options,this.body,this.labelModule);break;case"triangleDown":this.shape=new CN(this.options,this.body,this.labelModule)}this.needsRefresh()}},{key:"select",value:function(){this.selected=!0,this.needsRefresh()}},{key:"unselect",value:function(){this.selected=!1,this.needsRefresh()}},{key:"needsRefresh",value:function(){this.shape.refreshNeeded=!0}},{key:"getTitle",value:function(){return this.options.title}},{key:"distanceToBorder",value:function(t,e){return this.shape.distanceToBorder(t,e)}},{key:"isFixed",value:function(){return this.options.fixed.x&&this.options.fixed.y}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"getLabelSize",value:function(){return this.labelModule.size()}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var o=this.options.scaling.customScalingFunction(t,e,i,this.options.value),n=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var r=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+o*r}this.options.size=this.options.scaling.min+o*n}else this.options.size=this.baseSize,this.options.font.size=this.baseFontSize;this.updateLabelModule()}},{key:"draw",value:function(t){var e=this.getFormattingValues();return this.shape.draw(t,this.x,this.y,this.selected,this.hover,e)||{}}},{key:"updateBoundingBox",value:function(t){this.shape.updateBoundingBox(this.x,this.y,t)}},{key:"resize",value:function(t){var e=this.getFormattingValues();this.shape.resize(t,this.selected,this.hover,e)}},{key:"getItemsOnPoint",value:function(t){var e=[];return this.labelModule.visible()&&HM(this.labelModule.getSize(),t)&&e.push({nodeId:this.id,labelId:0}),HM(this.shape.boundingBox,t)&&e.push({nodeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){return this.shape.left<t.right&&this.shape.left+this.shape.width>t.left&&this.shape.top<t.bottom&&this.shape.top+this.shape.height>t.top}},{key:"isBoundingBoxOverlappingWith",value:function(t){return this.shape.boundingBox.left<t.right&&this.shape.boundingBox.right>t.left&&this.shape.boundingBox.top<t.bottom&&this.shape.boundingBox.bottom>t.top}}],[{key:"checkOpacity",value:function(t){return 0<=t&&t<=1}},{key:"checkCoordinateOrigin",value:function(t){return void 0===t||"center"===t||"top-left"===t}},{key:"updateGroupOptions",value:function(e,i,o){var n;if(void 0!==o){var r=e.group;if(void 0!==i&&void 0!==i.group&&r!==i.group)throw new Error("updateGroupOptions: group values in options don't match.");if("number"==typeof r||"string"==typeof r&&""!=r){var s=o.get(r);void 0!==s.opacity&&void 0===i.opacity&&(t.checkOpacity(s.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+s.opacity),s.opacity=void 0));var a=dm(n=FM(i)).call(n,(function(t){return null!=i[t]}));a.push("font"),O_(a,e,s),e.color=P_(e.color)}}}},{key:"parseOptions",value:function(e,i){var o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=arguments.length>4?arguments[4]:void 0;if(O_(["color","fixed","shadow"],e,i,o),t.checkMass(i),void 0!==e.opacity&&(t.checkOpacity(e.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+e.opacity),e.opacity=void 0)),void 0!==i.opacity&&(t.checkOpacity(i.opacity)||(console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+i.opacity),i.opacity=void 0)),i.shapeProperties&&!t.checkCoordinateOrigin(i.shapeProperties.coordinateOrigin)&&console.error("Invalid option for node coordinateOrigin, found: "+i.shapeProperties.coordinateOrigin),U_(e,i,"shadow",n),void 0!==i.color&&null!==i.color){var s=P_(i.color);w_(e.color,s)}else!0===o&&null===i.color&&(e.color=G_(n.color));void 0!==i.fixed&&null!==i.fixed&&("boolean"==typeof i.fixed?(e.fixed.x=i.fixed,e.fixed.y=i.fixed):(void 0!==i.fixed.x&&"boolean"==typeof i.fixed.x&&(e.fixed.x=i.fixed.x),void 0!==i.fixed.y&&"boolean"==typeof i.fixed.y&&(e.fixed.y=i.fixed.y))),!0===o&&null===i.font&&(e.font=G_(n.font)),t.updateGroupOptions(e,i,r),void 0!==i.scaling&&U_(e.scaling,i.scaling,"label",n.scaling)}},{key:"checkMass",value:function(t,e){if(void 0!==t.mass&&t.mass<=0){var i="";void 0!==e&&(i=" in node id: "+e),console.error("%cNegative or zero mass disallowed"+i+", setting mass to 1.",iT),t.mass=1}}}]),t}();function mN(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var bN=function(){function t(e,i,o,n){var r,s=this;if(yd(this,t),this.body=e,this.images=i,this.groups=o,this.layoutEngine=n,this.body.functions.createNode=il(r=this.create).call(r,this),this.nodesListeners={add:function(t,e){s.add(e.items)},update:function(t,e){s.update(e.items,e.data,e.oldData)},remove:function(t,e){s.remove(e.items)}},this.defaultOptions={borderWidth:1,borderWidthSelected:void 0,brokenImage:void 0,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},opacity:void 0,fixed:{x:!1,y:!1},font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:0,strokeColor:"#ffffff",align:"center",vadjust:0,multi:!1,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"monospace",vadjust:2}},group:void 0,hidden:!1,icon:{face:"FontAwesome",code:void 0,size:50,color:"#2B7CE9"},image:void 0,imagePadding:{top:0,right:0,bottom:0,left:0},label:void 0,labelHighlightBold:!0,level:void 0,margin:{top:5,right:5,bottom:5,left:5},mass:1,physics:!0,scaling:{min:10,max:30,label:{enabled:!1,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,o){if(e===t)return.5;var n=1/(e-t);return Math.max(0,(o-t)*n)}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},shape:"ellipse",shapeProperties:{borderDashes:!1,borderRadius:6,interpolation:!0,useImageSize:!1,useBorderWithImage:!1,coordinateOrigin:"center"},size:25,title:void 0,value:void 0,x:void 0,y:void 0},this.defaultOptions.mass<=0)throw"Internal error: mass in defaultOptions of NodesHandler may not be zero or negative";this.options=G_(this.defaultOptions),this.bindEventListeners()}return Sp(t,[{key:"bindEventListeners",value:function(){var t,e,i=this;this.body.emitter.on("refreshNodes",il(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",il(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",(function(){D_(i.nodesListeners,(function(t,e){i.body.data.nodes&&i.body.data.nodes.off(e,t)})),delete i.body.functions.createNode,delete i.nodesListeners.add,delete i.nodesListeners.update,delete i.nodesListeners.remove,delete i.nodesListeners}))}},{key:"setOptions",value:function(t){if(void 0!==t){if(vN.parseOptions(this.options,t),void 0!==t.opacity&&(hw(t.opacity)||!uw(t.opacity)||t.opacity<0||t.opacity>1?console.error("Invalid option for node opacity. Value must be between 0 and 1, found: "+t.opacity):this.options.opacity=t.opacity),void 0!==t.shape)for(var e in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&this.body.nodes[e].updateShape();if(void 0!==t.font||void 0!==t.widthConstraint||void 0!==t.heightConstraint)for(var i=0,o=Uf(this.body.nodes);i<o.length;i++){var n=o[i];this.body.nodes[n].updateLabelModule(),this.body.nodes[n].needsRefresh()}if(void 0!==t.size)for(var r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.body.nodes[r].needsRefresh();void 0===t.hidden&&void 0===t.physics||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.data.nodes;if(_M("id",t))this.body.data.nodes=t;else if(Nf(t))this.body.data.nodes=new yM,this.body.data.nodes.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.nodes=new yM}if(i&&D_(this.nodesListeners,(function(t,e){i.off(e,t)})),this.body.nodes={},this.body.data.nodes){var o=this;D_(this.nodesListeners,(function(t,e){o.body.data.nodes.on(e,t)}));var n=this.body.data.nodes.getIds();this.add(n,!0)}!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=[],n=0;n<t.length;n++){e=t[n];var r=this.body.data.nodes.get(e),s=this.create(r);o.push(s),this.body.nodes[e]=s}this.layoutEngine.positionInitially(o),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t,e,i){for(var o=this.body.nodes,n=!1,r=0;r<t.length;r++){var s=t[r],a=o[s],g=e[r];void 0!==a?a.setOptions(g)&&(n=!0):(n=!0,a=this.create(g),o[s]=a)}n||void 0===i||(n=fw(e).call(e,(function(t,e){var o=i[e];return o&&o.level!==t.level}))),!0===n?this.body.emitter.emit("_dataChanged"):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){for(var e=this.body.nodes,i=0;i<t.length;i++)delete e[t[i]];this.body.emitter.emit("_dataChanged")}},{key:"create",value:function(t){return new(arguments.length>1&&void 0!==arguments[1]?arguments[1]:vN)(t,this.body,this.images,this.groups,this.options,this.defaultOptions)}},{key:"refresh",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];D_(this.body.nodes,(function(i,o){var n=t.body.data.nodes.get(o);void 0!==n&&(!0===e&&i.setOptions({x:null,y:null}),i.setOptions({fixed:!1}),i.setOptions(n))}))}},{key:"getPositions",value:function(t){var e={};if(void 0!==t){if(!0===Nf(t)){for(var i=0;i<t.length;i++)if(void 0!==this.body.nodes[t[i]]){var o=this.body.nodes[t[i]];e[t[i]]={x:Math.round(o.x),y:Math.round(o.y)}}}else if(void 0!==this.body.nodes[t]){var n=this.body.nodes[t];e[t]={x:Math.round(n.x),y:Math.round(n.y)}}}else for(var r=0;r<this.body.nodeIndices.length;r++){var s=this.body.nodes[this.body.nodeIndices[r]];e[this.body.nodeIndices[r]]={x:Math.round(s.x),y:Math.round(s.y)}}return e}},{key:"getPosition",value:function(t){if(null==t)throw new TypeError("No id was specified for getPosition method.");if(null==this.body.nodes[t])throw new ReferenceError("NodeId provided for getPosition does not exist. Provided: ".concat(t));return{x:Math.round(this.body.nodes[t].x),y:Math.round(this.body.nodes[t].y)}}},{key:"storePositions",value:function(){var t,e=[],i=this.body.data.nodes.getDataSet(),o=function(t,e){var i=void 0!==mf&&bd(t)||t["@@iterator"];if(!i){if(Nf(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return mN(t,e);var o=wf(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?ed(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?mN(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}(i.get());try{for(o.s();!(t=o.n()).done;){var n=t.value,r=n.id,s=this.body.nodes[r],a=Math.round(s.x),g=Math.round(s.y);n.x===a&&n.y===g||e.push({id:r,x:a,y:g})}}catch(t){o.e(t)}finally{o.f()}i.update(e)}},{key:"getBoundingBox",value:function(t){if(void 0!==this.body.nodes[t])return this.body.nodes[t].shape.boundingBox}},{key:"getConnectedNodes",value:function(t,e){var i=[];if(void 0!==this.body.nodes[t])for(var o=this.body.nodes[t],n={},r=0;r<o.edges.length;r++){var s=o.edges[r];"to"!==e&&s.toId==o.id?void 0===n[s.fromId]&&(i.push(s.fromId),n[s.fromId]=!0):"from"!==e&&s.fromId==o.id&&void 0===n[s.toId]&&(i.push(s.toId),n[s.toId]=!0)}return i}},{key:"getConnectedEdges",value:function(t){var e=[];if(void 0!==this.body.nodes[t])for(var i=this.body.nodes[t],o=0;o<i.edges.length;o++)e.push(i.edges[o].id);else console.error("NodeId provided for getConnectedEdges does not exist. Provided: ",t);return e}},{key:"moveNode",value:function(t,e,i){var o=this;void 0!==this.body.nodes[t]?(this.body.nodes[t].x=Number(e),this.body.nodes[t].y=Number(i),fb((function(){o.body.emitter.emit("startSimulation")}),0)):console.error("Node id supplied to moveNode does not exist. Provided: ",t)}}]),t}(),yN=fs,_N=qn,TN=br,EN=ba,wN=Zn,kN=Gh;Ya({target:"Reflect",stat:!0},{get:function t(e,i){var o,n,r=arguments.length<3?e:arguments[2];return EN(e)===r?e[i]:(o=wN.f(e,i))?function(t){return void 0!==t&&(yN(t,"value")||yN(t,"writable"))}(o)?o.value:void 0===o.get?void 0:_N(o.get,r):TN(n=kN(e))?t(n,i,r):void 0}});var ON=_n(yr.Reflect.get),SN=_n(YD);function RN(){var t;return RN="undefined"!=typeof Reflect&&ON?Tw(t=ON).call(t):function(t,e,i){var o=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rw(t)););return t}(t,e);if(o){var n=SN(o,e);return n.get?n.get.call(arguments.length<3?t:i):n.value}},RN.apply(this,arguments)}var xN=Ya,DN=Math.hypot,MN=Math.abs,NN=Math.sqrt;xN({target:"Math",stat:!0,arity:2,forced:!!DN&&DN(1/0,NaN)!==1/0},{hypot:function(t,e){for(var i,o,n=0,r=0,s=arguments.length,a=0;r<s;)a<(i=MN(arguments[r++]))?(n=n*(o=a/i)*o+1,a=i):n+=i>0?(o=i/a)*o:i;return a===1/0?1/0:a*NN(n)}});var LN=_n(yr.Math.hypot);function PN(t){var e=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=Rw(t);if(e){var n=Rw(this).constructor;i=$D(o,arguments,n)}else i=o.apply(this,arguments);return kw(this,i)}}var $N=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"transform",value:function(t,e){Nf(t)||(t=[t]);for(var i=e.point.x,o=e.point.y,n=e.angle,r=e.length,s=0;s<t.length;++s){var a=t[s],g=a.x*Math.cos(n)-a.y*Math.sin(n),l=a.x*Math.sin(n)+a.y*Math.cos(n);a.x=i+r*g,a.y=o+r*l}}},{key:"drawPath",value:function(t,e){t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var i=1;i<e.length;++i)t.lineTo(e[i].x,e[i].y);t.closePath()}}]),t}(),BN=function(t){ww(i,t);var e=PN(i);function i(){return yd(this,i),e.apply(this,arguments)}return Sp(i,null,[{key:"draw",value:function(t,e){if(e.image){t.save(),t.translate(e.point.x,e.point.y),t.rotate(Math.PI/2+e.angle);var i=null!=e.imageWidth?e.imageWidth:e.image.width,o=null!=e.imageHeight?e.imageHeight:e.image.height;e.image.drawImageAtPosition(t,1,-i/2,0,i,o),t.restore()}return!1}}]),i}($N),FN=function(t){ww(i,t);var e=PN(i);function i(){return yd(this,i),e.apply(this,arguments)}return Sp(i,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:0},{x:-1,y:.3},{x:-.9,y:0},{x:-1,y:-.3}];return $N.transform(i,e),$N.drawPath(t,i),!0}}]),i}($N),zN=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"draw",value:function(t,e){var i=[{x:-1,y:0},{x:0,y:.3},{x:-.4,y:0},{x:0,y:-.3}];return $N.transform(i,e),$N.drawPath(t,i),!0}}]),t}(),HN=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"draw",value:function(t,e){var i={x:-.4,y:0};$N.transform(i,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var o=Math.PI,n=e.angle-o/2,r=e.angle+o/2;return t.beginPath(),t.arc(i.x,i.y,.4*e.length,n,r,!1),t.stroke(),!0}}]),t}(),GN=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"draw",value:function(t,e){var i={x:-.3,y:0};$N.transform(i,e),t.strokeStyle=t.fillStyle,t.fillStyle="rgba(0, 0, 0, 0)";var o=Math.PI,n=e.angle+o/2,r=e.angle+3*o/2;return t.beginPath(),t.arc(i.x,i.y,.4*e.length,n,r,!1),t.stroke(),!0}}]),t}(),UN=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"draw",value:function(t,e){var i=[{x:.02,y:0},{x:-1,y:.3},{x:-1,y:-.3}];return $N.transform(i,e),$N.drawPath(t,i),!0}}]),t}(),VN=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-1,y:0}];return $N.transform(i,e),$N.drawPath(t,i),!0}}]),t}(),WN=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"draw",value:function(t,e){var i={x:-.4,y:0};return $N.transform(i,e),ol(t,i.x,i.y,.4*e.length),!0}}]),t}(),jN=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.5},{x:0,y:-.5},{x:-.15,y:-.5},{x:-.15,y:.5}];return $N.transform(i,e),$N.drawPath(t,i),!0}}]),t}(),YN=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:.3},{x:0,y:-.3},{x:-.6,y:-.3},{x:-.6,y:.3}];return $N.transform(i,e),$N.drawPath(t,i),!0}}]),t}(),XN=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"draw",value:function(t,e){var i=[{x:0,y:0},{x:-.5,y:-.3},{x:-1,y:0},{x:-.5,y:.3}];return $N.transform(i,e),$N.drawPath(t,i),!0}}]),t}(),ZN=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"draw",value:function(t,e){var i=[{x:-1,y:.3},{x:-.5,y:0},{x:-1,y:-.3},{x:0,y:0}];return $N.transform(i,e),$N.drawPath(t,i),!0}}]),t}(),KN=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"draw",value:function(t,e){var i;switch(e.type&&(i=e.type.toLowerCase()),i){case"image":return BN.draw(t,e);case"circle":return WN.draw(t,e);case"box":return YN.draw(t,e);case"crow":return zN.draw(t,e);case"curve":return HN.draw(t,e);case"diamond":return XN.draw(t,e);case"inv_curve":return GN.draw(t,e);case"triangle":return UN.draw(t,e);case"inv_triangle":return VN.draw(t,e);case"bar":return jN.draw(t,e);case"vee":return ZN.draw(t,e);default:return FN.draw(t,e)}}}]),t}();function QN(t,e){var i=Uf(t);if(BD){var o=BD(t);e&&(o=dm(o).call(o,(function(e){return XD(t,e).enumerable}))),i.push.apply(i,o)}return i}function JN(t){for(var e=1;e<arguments.length;e++){var i,o,n=null!=arguments[e]?arguments[e]:{};e%2?sv(i=QN(Object(n),!0)).call(i,(function(e){xw(t,e,n[e])})):qD?sM(t,qD(n)):sv(o=QN(Object(n))).call(o,(function(e){yD(t,e,XD(n,e))}))}return t}var qN=function(){function t(e,i,o){yd(this,t),this._body=i,this._labelModule=o,this.color={},this.colorDirty=!0,this.hoverWidth=1.5,this.selectionWidth=2,this.setOptions(e),this.fromPoint=this.from,this.toPoint=this.to}return Sp(t,[{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to]}},{key:"cleanup",value:function(){return!1}},{key:"setOptions",value:function(t){this.options=t,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.id=this.options.id}},{key:"drawLine",value:function(t,e,i,o){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.getViaNode();t.strokeStyle=this.getColor(t,e),t.lineWidth=e.width,!1!==e.dashes?this._drawDashedLine(t,e,n):this._drawLine(t,e,n)}},{key:"_drawLine",value:function(t,e,i,o,n){if(this.from!=this.to)this._line(t,e,i,o,n);else{var r=ff(this._getCircleData(t),3),s=r[0],a=r[1],g=r[2];this._circle(t,e,s,a,g)}}},{key:"_drawDashedLine",value:function(t,e,i,o,n){t.lineCap="round";var r=Nf(e.dashes)?e.dashes:[5,5];if(void 0!==t.setLineDash){if(t.save(),t.setLineDash(r),t.lineDashOffset=0,this.from!=this.to)this._line(t,e,i);else{var s=ff(this._getCircleData(t),3),a=s[0],g=s[1],l=s[2];this._circle(t,e,a,g,l)}t.setLineDash([0]),t.lineDashOffset=0,t.restore()}else{if(this.from!=this.to)al(t,this.from.x,this.from.y,this.to.x,this.to.y,r);else{var h=ff(this._getCircleData(t),3),c=h[0],u=h[1],d=h[2];this._circle(t,e,c,u,d)}this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}}},{key:"findBorderPosition",value:function(t,e,i){return this.from!=this.to?this._findBorderPosition(t,e,i):this._findBorderPositionCircle(t,e,i)}},{key:"findBorderPositions",value:function(t){if(this.from!=this.to)return{from:this._findBorderPosition(this.from,t),to:this._findBorderPosition(this.to,t)};var e,i=ff(wf(e=this._getCircleData(t)).call(e,0,2),2),o=i[0],n=i[1];return{from:this._findBorderPositionCircle(this.from,t,{x:o,y:n,low:.25,high:.6,direction:-1}),to:this._findBorderPositionCircle(this.from,t,{x:o,y:n,low:.6,high:.8,direction:1})}}},{key:"_getCircleData",value:function(t){var e=this.options.selfReference.size;void 0!==t&&void 0===this.from.shape.width&&this.from.shape.resize(t);var i=UM(t,this.options.selfReference.angle,e,this.from);return[i.x,i.y,e]}},{key:"_pointOnCircle",value:function(t,e,i,o){var n=2*o*Math.PI;return{x:t+i*Math.cos(n),y:e-i*Math.sin(n)}}},{key:"_findBorderPositionCircle",value:function(t,e,i){var o,n=i.x,r=i.y,s=i.low,a=i.high,g=i.direction,l=this.options.selfReference.size,h=.5*(s+a),c=0;!0===this.options.arrowStrikethrough&&(-1===g?c=this.options.endPointOffset.from:1===g&&(c=this.options.endPointOffset.to));var u=0;do{h=.5*(s+a),o=this._pointOnCircle(n,r,l,h);var d=Math.atan2(t.y-o.y,t.x-o.x),A=t.distanceToBorder(e,d)+c-Math.sqrt(Math.pow(o.x-t.x,2)+Math.pow(o.y-t.y,2));if(Math.abs(A)<.05)break;A>0?g>0?s=h:a=h:g>0?a=h:s=h,++u}while(s<=a&&u<10);return JN(JN({},o),{},{t:h})}},{key:"getLineWidth",value:function(t,e){return!0===t?Math.max(this.selectionWidth,.3/this._body.view.scale):!0===e?Math.max(this.hoverWidth,.3/this._body.view.scale):Math.max(this.options.width,.3/this._body.view.scale)}},{key:"getColor",value:function(t,e){if(!1!==e.inheritsColor){if("both"===e.inheritsColor&&this.from.id!==this.to.id){var i=t.createLinearGradient(this.from.x,this.from.y,this.to.x,this.to.y),o=this.from.options.color.highlight.border,n=this.to.options.color.highlight.border;return!1===this.from.selected&&!1===this.to.selected?(o=N_(this.from.options.color.border,e.opacity),n=N_(this.to.options.color.border,e.opacity)):!0===this.from.selected&&!1===this.to.selected?n=this.to.options.color.border:!1===this.from.selected&&!0===this.to.selected&&(o=this.from.options.color.border),i.addColorStop(0,o),i.addColorStop(1,n),i}return"to"===e.inheritsColor?N_(this.to.options.color.border,e.opacity):N_(this.from.options.color.border,e.opacity)}return N_(e.color,e.opacity)}},{key:"_circle",value:function(t,e,i,o,n){this.enableShadow(t,e);var r=0,s=2*Math.PI;if(!this.options.selfReference.renderBehindTheNode){var a=this.options.selfReference.angle,g=this.options.selfReference.angle+Math.PI,l=this._findBorderPositionCircle(this.from,t,{x:i,y:o,low:a,high:g,direction:-1}),h=this._findBorderPositionCircle(this.from,t,{x:i,y:o,low:a,high:g,direction:1});r=Math.atan2(l.y-o,l.x-i),s=Math.atan2(h.y-o,h.x-i)}t.beginPath(),t.arc(i,o,n,r,s,!1),t.stroke(),this.disableShadow(t,e)}},{key:"getDistanceToEdge",value:function(t,e,i,o,n,r){if(this.from!=this.to)return this._getDistanceToEdge(t,e,i,o,n,r);var s=ff(this._getCircleData(void 0),3),a=s[0],g=s[1],l=s[2],h=a-n,c=g-r;return Math.abs(Math.sqrt(h*h+c*c)-l)}},{key:"_getDistanceToLine",value:function(t,e,i,o,n,r){var s=i-t,a=o-e,g=((n-t)*s+(r-e)*a)/(s*s+a*a);g>1?g=1:g<0&&(g=0);var l=t+g*s-n,h=e+g*a-r;return Math.sqrt(l*l+h*h)}},{key:"getArrowData",value:function(t,e,i,o,n,r){var s,a,g,l,h,c,u,d=r.width;"from"===e?(g=this.from,l=this.to,h=r.fromArrowScale<0,c=Math.abs(r.fromArrowScale),u=r.fromArrowType):"to"===e?(g=this.to,l=this.from,h=r.toArrowScale<0,c=Math.abs(r.toArrowScale),u=r.toArrowType):(g=this.to,l=this.from,h=r.middleArrowScale<0,c=Math.abs(r.middleArrowScale),u=r.middleArrowType);var A=15*c+3*d;if(g!=l){var I=A/LN(g.x-l.x,g.y-l.y);if("middle"!==e)if(!0===this.options.smooth.enabled){var C=this._findBorderPosition(g,t,{via:i}),p=this.getPoint(C.t+I*("from"===e?1:-1),i);s=Math.atan2(C.y-p.y,C.x-p.x),a=C}else s=Math.atan2(g.y-l.y,g.x-l.x),a=this._findBorderPosition(g,t);else{var f=(h?-I:I)/2,v=this.getPoint(.5+f,i),m=this.getPoint(.5-f,i);s=Math.atan2(v.y-m.y,v.x-m.x),a=this.getPoint(.5,i)}}else{var b=ff(this._getCircleData(t),3),y=b[0],_=b[1],T=b[2];if("from"===e){var E=this.options.selfReference.angle,w=this.options.selfReference.angle+Math.PI,k=this._findBorderPositionCircle(this.from,t,{x:y,y:_,low:E,high:w,direction:-1});s=-2*k.t*Math.PI+1.5*Math.PI+.1*Math.PI,a=k}else if("to"===e){var O=this.options.selfReference.angle,S=this.options.selfReference.angle+Math.PI,R=this._findBorderPositionCircle(this.from,t,{x:y,y:_,low:O,high:S,direction:1});s=-2*R.t*Math.PI+1.5*Math.PI-1.1*Math.PI,a=R}else{var x=this.options.selfReference.angle/(2*Math.PI);a=this._pointOnCircle(y,_,T,x),s=-2*x*Math.PI+1.5*Math.PI+.1*Math.PI}}return{point:a,core:{x:a.x-.9*A*Math.cos(s),y:a.y-.9*A*Math.sin(s)},angle:s,length:A,type:u}}},{key:"drawArrowHead",value:function(t,e,i,o,n){t.strokeStyle=this.getColor(t,e),t.fillStyle=t.strokeStyle,t.lineWidth=e.width,KN.draw(t,n)&&(this.enableShadow(t,e),wb(t).call(t),this.disableShadow(t,e))}},{key:"enableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor=e.shadowColor,t.shadowBlur=e.shadowSize,t.shadowOffsetX=e.shadowX,t.shadowOffsetY=e.shadowY)}},{key:"disableShadow",value:function(t,e){!0===e.shadow&&(t.shadowColor="rgba(0,0,0,0)",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}},{key:"drawBackground",value:function(t,e){if(!1!==e.background){var i={strokeStyle:t.strokeStyle,lineWidth:t.lineWidth,dashes:t.dashes};t.strokeStyle=e.backgroundColor,t.lineWidth=e.backgroundSize,this.setStrokeDashed(t,e.backgroundDashes),t.stroke(),t.strokeStyle=i.strokeStyle,t.lineWidth=i.lineWidth,t.dashes=i.dashes,this.setStrokeDashed(t,e.dashes)}}},{key:"setStrokeDashed",value:function(t,e){if(!1!==e)if(void 0!==t.setLineDash){var i=Nf(e)?e:[5,5];t.setLineDash(i)}else console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.");else void 0!==t.setLineDash?t.setLineDash([]):console.warn("setLineDash is not supported in this browser. The dashed stroke cannot be used.")}}]),t}();function tL(t,e){var i=Uf(t);if(BD){var o=BD(t);e&&(o=dm(o).call(o,(function(e){return XD(t,e).enumerable}))),i.push.apply(i,o)}return i}function eL(t){for(var e=1;e<arguments.length;e++){var i,o,n=null!=arguments[e]?arguments[e]:{};e%2?sv(i=tL(Object(n),!0)).call(i,(function(e){xw(t,e,n[e])})):qD?sM(t,qD(n)):sv(o=tL(Object(n))).call(o,(function(e){yD(t,e,XD(n,e))}))}return t}var iL=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"_findBorderPositionBezier",value:function(t,e){var i,o,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._getViaCoordinates(),r=!1,s=1,a=0,g=this.to,l=this.options.endPointOffset?this.options.endPointOffset.to:0;t.id===this.from.id&&(g=this.from,r=!0,l=this.options.endPointOffset?this.options.endPointOffset.from:0),!1===this.options.arrowStrikethrough&&(l=0);var h=0;do{o=.5*(a+s),i=this.getPoint(o,n);var c=Math.atan2(g.y-i.y,g.x-i.x),u=g.distanceToBorder(e,c)+l-Math.sqrt(Math.pow(i.x-g.x,2)+Math.pow(i.y-g.y,2));if(Math.abs(u)<.2)break;u<0?!1===r?a=o:s=o:!1===r?s=o:a=o,++h}while(a<=s&&h<10);return eL(eL({},i),{},{t:o})}},{key:"_getDistanceToBezierEdge",value:function(t,e,i,o,n,r,s){var a,g,l,h,c,u=1e9,d=t,A=e;for(g=1;g<10;g++)l=.1*g,h=Math.pow(1-l,2)*t+2*l*(1-l)*s.x+Math.pow(l,2)*i,c=Math.pow(1-l,2)*e+2*l*(1-l)*s.y+Math.pow(l,2)*o,g>0&&(u=(a=this._getDistanceToLine(d,A,h,c,n,r))<u?a:u),d=h,A=c;return u}},{key:"_bezierCurve",value:function(t,e,i,o){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),null!=i&&null!=i.x?null!=o&&null!=o.x?t.bezierCurveTo(i.x,i.y,o.x,o.y,this.toPoint.x,this.toPoint.y):t.quadraticCurveTo(i.x,i.y,this.toPoint.x,this.toPoint.y):t.lineTo(this.toPoint.x,this.toPoint.y),this.drawBackground(t,e),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}}]),n}(qN);var oL=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){var r;return yd(this,n),(r=o.call(this,t,e,i)).via=r.via,r._boundFunction=function(){r.positionBezierNode()},r._body.emitter.on("_repositionBezierNodes",r._boundFunction),r}return Sp(n,[{key:"setOptions",value:function(t){RN(Rw(n.prototype),"setOptions",this).call(this,t);var e=!1;this.options.physics!==t.physics&&(e=!0),this.options=t,this.id=this.options.id,this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],this.setupSupportNode(),this.connect(),!0===e&&(this.via.setOptions({physics:this.options.physics}),this.positionBezierNode())}},{key:"connect",value:function(){this.from=this._body.nodes[this.options.from],this.to=this._body.nodes[this.options.to],void 0===this.from||void 0===this.to||!1===this.options.physics||this.from.id===this.to.id?this.via.setOptions({physics:!1}):this.via.setOptions({physics:!0})}},{key:"cleanup",value:function(){return this._body.emitter.off("_repositionBezierNodes",this._boundFunction),void 0!==this.via&&(delete this._body.nodes[this.via.id],this.via=void 0,!0)}},{key:"setupSupportNode",value:function(){if(void 0===this.via){var t="edgeId:"+this.id,e=this._body.functions.createNode({id:t,shape:"circle",physics:!0,hidden:!0});this._body.nodes[t]=e,this.via=e,this.via.parentEdgeId=this.id,this.positionBezierNode()}}},{key:"positionBezierNode",value:function(){void 0!==this.via&&void 0!==this.from&&void 0!==this.to?(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y)):void 0!==this.via&&(this.via.x=0,this.via.y=0)}},{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"_getViaCoordinates",value:function(){return this.via}},{key:"getViaNode",value:function(){return this.via}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.via;if(this.from===this.to){var i=ff(this._getCircleData(),3),o=i[0],n=i[1],r=i[2],s=2*Math.PI*(1-t);return{x:o+r*Math.sin(s),y:n+r-r*(1-Math.cos(s))}}return{x:Math.pow(1-t,2)*this.fromPoint.x+2*t*(1-t)*e.x+Math.pow(t,2)*this.toPoint.x,y:Math.pow(1-t,2)*this.fromPoint.y+2*t*(1-t)*e.y+Math.pow(t,2)*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e,this.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,o,n,r){return this._getDistanceToBezierEdge(t,e,i,o,n,r,this.via)}}]),n}(iL);var nL=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"_line",value:function(t,e,i){this._bezierCurve(t,e,i)}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_getViaCoordinates",value:function(){var t,e,i=this.options.smooth.roundness,o=this.options.smooth.type,n=Math.abs(this.from.x-this.to.x),r=Math.abs(this.from.y-this.to.y);if("discrete"===o||"diagonalCross"===o){var s,a;s=a=n<=r?i*r:i*n,this.from.x>this.to.x&&(s=-s),this.from.y>=this.to.y&&(a=-a);var g=this.from.x+s,l=this.from.y+a;return"discrete"===o&&(n<=r?g=n<i*r?this.from.x:g:l=r<i*n?this.from.y:l),{x:g,y:l}}if("straightCross"===o){var h=(1-i)*n,c=(1-i)*r;return n<=r?(h=0,this.from.y<this.to.y&&(c=-c)):(this.from.x<this.to.x&&(h=-h),c=0),{x:this.to.x+h,y:this.to.y+c}}if("horizontal"===o){var u=(1-i)*n;return this.from.x<this.to.x&&(u=-u),{x:this.to.x+u,y:this.from.y}}if("vertical"===o){var d=(1-i)*r;return this.from.y<this.to.y&&(d=-d),{x:this.from.x,y:this.to.y+d}}if("curvedCW"===o){n=this.to.x-this.from.x,r=this.from.y-this.to.y;var A=Math.sqrt(n*n+r*r),I=Math.PI,C=(Math.atan2(r,n)+(.5*i+.5)*I)%(2*I);return{x:this.from.x+(.5*i+.5)*A*Math.sin(C),y:this.from.y+(.5*i+.5)*A*Math.cos(C)}}if("curvedCCW"===o){n=this.to.x-this.from.x,r=this.from.y-this.to.y;var p=Math.sqrt(n*n+r*r),f=Math.PI,v=(Math.atan2(r,n)+(.5*-i+.5)*f)%(2*f);return{x:this.from.x+(.5*i+.5)*p*Math.sin(v),y:this.from.y+(.5*i+.5)*p*Math.cos(v)}}t=e=n<=r?i*r:i*n,this.from.x>this.to.x&&(t=-t),this.from.y>=this.to.y&&(e=-e);var m=this.from.x+t,b=this.from.y+e;return n<=r?m=this.from.x<=this.to.x?this.to.x<m?this.to.x:m:this.to.x>m?this.to.x:m:b=this.from.y>=this.to.y?this.to.y>b?this.to.y:b:this.to.y<b?this.to.y:b,{x:m,y:b}}},{key:"_findBorderPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this._findBorderPositionBezier(t,e,i.via)}},{key:"_getDistanceToEdge",value:function(t,e,i,o,n,r){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates();return this._getDistanceToBezierEdge(t,e,i,o,n,r,s)}},{key:"getPoint",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),i=t;return{x:Math.pow(1-i,2)*this.fromPoint.x+2*i*(1-i)*e.x+Math.pow(i,2)*this.toPoint.x,y:Math.pow(1-i,2)*this.fromPoint.y+2*i*(1-i)*e.y+Math.pow(i,2)*this.toPoint.y}}}]),n}(iL);var rL=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"_line",value:function(t,e,i){var o=i[0],n=i[1];this._bezierCurve(t,e,o,n)}},{key:"_getViaCoordinates",value:function(){var t,e,i,o,n=this.from.x-this.to.x,r=this.from.y-this.to.y,s=this.options.smooth.roundness;return(Math.abs(n)>Math.abs(r)||!0===this.options.smooth.forceDirection||"horizontal"===this.options.smooth.forceDirection)&&"vertical"!==this.options.smooth.forceDirection?(e=this.from.y,o=this.to.y,t=this.from.x-s*n,i=this.to.x+s*n):(e=this.from.y-s*r,o=this.to.y+s*r,t=this.from.x,i=this.to.x),[{x:t,y:e},{x:i,y:o}]}},{key:"getViaNode",value:function(){return this._getViaCoordinates()}},{key:"_findBorderPosition",value:function(t,e){return this._findBorderPositionBezier(t,e)}},{key:"_getDistanceToEdge",value:function(t,e,i,o,n,r){var s=ff(arguments.length>6&&void 0!==arguments[6]?arguments[6]:this._getViaCoordinates(),2),a=s[0],g=s[1];return this._getDistanceToBezierEdge2(t,e,i,o,n,r,a,g)}},{key:"getPoint",value:function(t){var e=ff(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this._getViaCoordinates(),2),i=e[0],o=e[1],n=t,r=[Math.pow(1-n,3),3*n*Math.pow(1-n,2),3*Math.pow(n,2)*(1-n),Math.pow(n,3)];return{x:r[0]*this.fromPoint.x+r[1]*i.x+r[2]*o.x+r[3]*this.toPoint.x,y:r[0]*this.fromPoint.y+r[1]*i.y+r[2]*o.y+r[3]*this.toPoint.y}}}]),n}(function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"_getDistanceToBezierEdge2",value:function(t,e,i,o,n,r,s,a){for(var g=1e9,l=t,h=e,c=[0,0,0,0],u=1;u<10;u++){var d=.1*u;c[0]=Math.pow(1-d,3),c[1]=3*d*Math.pow(1-d,2),c[2]=3*Math.pow(d,2)*(1-d),c[3]=Math.pow(d,3);var A=c[0]*t+c[1]*s.x+c[2]*a.x+c[3]*i,I=c[0]*e+c[1]*s.y+c[2]*a.y+c[3]*o;if(u>0){var C=this._getDistanceToLine(l,h,A,I,n,r);g=C<g?C:g}l=A,h=I}return g}}]),n}(iL));var sL=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"_line",value:function(t,e){t.beginPath(),t.moveTo(this.fromPoint.x,this.fromPoint.y),t.lineTo(this.toPoint.x,this.toPoint.y),this.enableShadow(t,e),t.stroke(),this.disableShadow(t,e)}},{key:"getViaNode",value:function(){}},{key:"getPoint",value:function(t){return{x:(1-t)*this.fromPoint.x+t*this.toPoint.x,y:(1-t)*this.fromPoint.y+t*this.toPoint.y}}},{key:"_findBorderPosition",value:function(t,e){var i=this.to,o=this.from;t.id===this.from.id&&(i=this.from,o=this.to);var n=Math.atan2(i.y-o.y,i.x-o.x),r=i.x-o.x,s=i.y-o.y,a=Math.sqrt(r*r+s*s),g=(a-t.distanceToBorder(e,n))/a;return{x:(1-g)*o.x+g*i.x,y:(1-g)*o.y+g*i.y,t:0}}},{key:"_getDistanceToEdge",value:function(t,e,i,o,n,r){return this._getDistanceToLine(t,e,i,o,n,r)}}]),n}(qN),aL=function(){function t(e,i,o,n,r){if(yd(this,t),void 0===i)throw new Error("No body provided");this.options=G_(n),this.globalOptions=n,this.defaultOptions=r,this.body=i,this.imagelist=o,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.selected=!1,this.hover=!1,this.labelDirty=!0,this.baseWidth=this.options.width,this.baseFontSize=this.options.font.size,this.from=void 0,this.to=void 0,this.edgeType=void 0,this.connected=!1,this.labelModule=new ZM(this.body,this.options,!0),this.setOptions(e)}return Sp(t,[{key:"setOptions",value:function(e){if(e){var i=void 0!==e.physics&&this.options.physics!==e.physics||void 0!==e.hidden&&(this.options.hidden||!1)!==(e.hidden||!1)||void 0!==e.from&&this.options.from!==e.from||void 0!==e.to&&this.options.to!==e.to;t.parseOptions(this.options,e,!0,this.globalOptions),void 0!==e.id&&(this.id=e.id),void 0!==e.from&&(this.fromId=e.from),void 0!==e.to&&(this.toId=e.to),void 0!==e.title&&(this.title=e.title),void 0!==e.value&&(e.value=NM(e.value));var o=[e,this.options,this.defaultOptions];return this.chooser=zM("edge",o),this.updateLabelModule(e),i=this.updateEdgeType()||i,this._setInteractionWidths(),this.connect(),i}}},{key:"getFormattingValues",value:function(){var t=!0===this.options.arrows.to||!0===this.options.arrows.to.enabled,e=!0===this.options.arrows.from||!0===this.options.arrows.from.enabled,i=!0===this.options.arrows.middle||!0===this.options.arrows.middle.enabled,o=this.options.color.inherit,n={toArrow:t,toArrowScale:this.options.arrows.to.scaleFactor,toArrowType:this.options.arrows.to.type,toArrowSrc:this.options.arrows.to.src,toArrowImageWidth:this.options.arrows.to.imageWidth,toArrowImageHeight:this.options.arrows.to.imageHeight,middleArrow:i,middleArrowScale:this.options.arrows.middle.scaleFactor,middleArrowType:this.options.arrows.middle.type,middleArrowSrc:this.options.arrows.middle.src,middleArrowImageWidth:this.options.arrows.middle.imageWidth,middleArrowImageHeight:this.options.arrows.middle.imageHeight,fromArrow:e,fromArrowScale:this.options.arrows.from.scaleFactor,fromArrowType:this.options.arrows.from.type,fromArrowSrc:this.options.arrows.from.src,fromArrowImageWidth:this.options.arrows.from.imageWidth,fromArrowImageHeight:this.options.arrows.from.imageHeight,arrowStrikethrough:this.options.arrowStrikethrough,color:o?void 0:this.options.color.color,inheritsColor:o,opacity:this.options.color.opacity,hidden:this.options.hidden,length:this.options.length,shadow:this.options.shadow.enabled,shadowColor:this.options.shadow.color,shadowSize:this.options.shadow.size,shadowX:this.options.shadow.x,shadowY:this.options.shadow.y,dashes:this.options.dashes,width:this.options.width,background:this.options.background.enabled,backgroundColor:this.options.background.color,backgroundSize:this.options.background.size,backgroundDashes:this.options.background.dashes};if(this.selected||this.hover)if(!0===this.chooser){if(this.selected){var r=this.options.selectionWidth;"function"==typeof r?n.width=r(n.width):"number"==typeof r&&(n.width+=r),n.width=Math.max(n.width,.3/this.body.view.scale),n.color=this.options.color.highlight,n.shadow=this.options.shadow.enabled}else if(this.hover){var s=this.options.hoverWidth;"function"==typeof s?n.width=s(n.width):"number"==typeof s&&(n.width+=s),n.width=Math.max(n.width,.3/this.body.view.scale),n.color=this.options.color.hover,n.shadow=this.options.shadow.enabled}}else"function"==typeof this.chooser&&(this.chooser(n,this.options.id,this.selected,this.hover),void 0!==n.color&&(n.inheritsColor=!1),!1===n.shadow&&(n.shadowColor===this.options.shadow.color&&n.shadowSize===this.options.shadow.size&&n.shadowX===this.options.shadow.x&&n.shadowY===this.options.shadow.y||(n.shadow=!0)));else n.shadow=this.options.shadow.enabled,n.width=Math.max(n.width,.3/this.body.view.scale);return n}},{key:"updateLabelModule",value:function(t){var e=[t,this.options,this.globalOptions,this.defaultOptions];this.labelModule.update(this.options,e),void 0!==this.labelModule.baseSize&&(this.baseFontSize=this.labelModule.baseSize)}},{key:"updateEdgeType",value:function(){var t=this.options.smooth,e=!1,i=!0;return void 0!==this.edgeType&&((this.edgeType instanceof oL&&!0===t.enabled&&"dynamic"===t.type||this.edgeType instanceof rL&&!0===t.enabled&&"cubicBezier"===t.type||this.edgeType instanceof nL&&!0===t.enabled&&"dynamic"!==t.type&&"cubicBezier"!==t.type||this.edgeType instanceof sL&&!1===t.type.enabled)&&(i=!1),!0===i&&(e=this.cleanup())),!0===i?!0===t.enabled?"dynamic"===t.type?(e=!0,this.edgeType=new oL(this.options,this.body,this.labelModule)):"cubicBezier"===t.type?this.edgeType=new rL(this.options,this.body,this.labelModule):this.edgeType=new nL(this.options,this.body,this.labelModule):this.edgeType=new sL(this.options,this.body,this.labelModule):this.edgeType.setOptions(this.options),e}},{key:"connect",value:function(){this.disconnect(),this.from=this.body.nodes[this.fromId]||void 0,this.to=this.body.nodes[this.toId]||void 0,this.connected=void 0!==this.from&&void 0!==this.to,!0===this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this)),this.edgeType.connect()}},{key:"disconnect",value:function(){this.from&&(this.from.detachEdge(this),this.from=void 0),this.to&&(this.to.detachEdge(this),this.to=void 0),this.connected=!1}},{key:"getTitle",value:function(){return this.title}},{key:"isSelected",value:function(){return this.selected}},{key:"getValue",value:function(){return this.options.value}},{key:"setValueRange",value:function(t,e,i){if(void 0!==this.options.value){var o=this.options.scaling.customScalingFunction(t,e,i,this.options.value),n=this.options.scaling.max-this.options.scaling.min;if(!0===this.options.scaling.label.enabled){var r=this.options.scaling.label.max-this.options.scaling.label.min;this.options.font.size=this.options.scaling.label.min+o*r}this.options.width=this.options.scaling.min+o*n}else this.options.width=this.baseWidth,this.options.font.size=this.baseFontSize;this._setInteractionWidths(),this.updateLabelModule()}},{key:"_setInteractionWidths",value:function(){"function"==typeof this.options.hoverWidth?this.edgeType.hoverWidth=this.options.hoverWidth(this.options.width):this.edgeType.hoverWidth=this.options.hoverWidth+this.options.width,"function"==typeof this.options.selectionWidth?this.edgeType.selectionWidth=this.options.selectionWidth(this.options.width):this.edgeType.selectionWidth=this.options.selectionWidth+this.options.width}},{key:"draw",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var i=this.edgeType.getViaNode();this.edgeType.drawLine(t,e,this.selected,this.hover,i),this.drawLabel(t,i)}}},{key:"drawArrows",value:function(t){var e=this.getFormattingValues();if(!e.hidden){var i=this.edgeType.getViaNode(),o={};this.edgeType.fromPoint=this.edgeType.from,this.edgeType.toPoint=this.edgeType.to,e.fromArrow&&(o.from=this.edgeType.getArrowData(t,"from",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.fromPoint=o.from.core),e.fromArrowSrc&&(o.from.image=this.imagelist.load(e.fromArrowSrc)),e.fromArrowImageWidth&&(o.from.imageWidth=e.fromArrowImageWidth),e.fromArrowImageHeight&&(o.from.imageHeight=e.fromArrowImageHeight)),e.toArrow&&(o.to=this.edgeType.getArrowData(t,"to",i,this.selected,this.hover,e),!1===e.arrowStrikethrough&&(this.edgeType.toPoint=o.to.core),e.toArrowSrc&&(o.to.image=this.imagelist.load(e.toArrowSrc)),e.toArrowImageWidth&&(o.to.imageWidth=e.toArrowImageWidth),e.toArrowImageHeight&&(o.to.imageHeight=e.toArrowImageHeight)),e.middleArrow&&(o.middle=this.edgeType.getArrowData(t,"middle",i,this.selected,this.hover,e),e.middleArrowSrc&&(o.middle.image=this.imagelist.load(e.middleArrowSrc)),e.middleArrowImageWidth&&(o.middle.imageWidth=e.middleArrowImageWidth),e.middleArrowImageHeight&&(o.middle.imageHeight=e.middleArrowImageHeight)),e.fromArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,o.from),e.middleArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,o.middle),e.toArrow&&this.edgeType.drawArrowHead(t,e,this.selected,this.hover,o.to)}}},{key:"drawLabel",value:function(t,e){if(void 0!==this.options.label){var i,o=this.from,n=this.to;if(this.labelModule.differentState(this.selected,this.hover)&&this.labelModule.getTextSize(t,this.selected,this.hover),o.id!=n.id){this.labelModule.pointToSelf=!1,i=this.edgeType.getPoint(.5,e),t.save();var r=this._getRotation(t);0!=r.angle&&(t.translate(r.x,r.y),t.rotate(r.angle)),this.labelModule.draw(t,i.x,i.y,this.selected,this.hover),t.restore()}else{this.labelModule.pointToSelf=!0;var s=UM(t,this.options.selfReference.angle,this.options.selfReference.size,o);i=this._pointOnCircle(s.x,s.y,this.options.selfReference.size,this.options.selfReference.angle),this.labelModule.draw(t,i.x,i.y,this.selected,this.hover)}}}},{key:"getItemsOnPoint",value:function(t){var e=[];if(this.labelModule.visible()){var i=this._getRotation();HM(this.labelModule.getSize(),t,i)&&e.push({edgeId:this.id,labelId:0})}var o={left:t.x,top:t.y};return this.isOverlappingWith(o)&&e.push({edgeId:this.id}),e}},{key:"isOverlappingWith",value:function(t){if(this.connected){var e=this.from.x,i=this.from.y,o=this.to.x,n=this.to.y,r=t.left,s=t.top;return this.edgeType.getDistanceToEdge(e,i,o,n,r,s)<10}return!1}},{key:"_getRotation",value:function(t){var e=this.edgeType.getViaNode(),i=this.edgeType.getPoint(.5,e);void 0!==t&&this.labelModule.calculateLabelSize(t,this.selected,this.hover,i.x,i.y);var o={x:i.x,y:this.labelModule.size.yLine,angle:0};if(!this.labelModule.visible())return o;if("horizontal"===this.options.font.align)return o;var n=this.from.y-this.to.y,r=this.from.x-this.to.x,s=Math.atan2(n,r);return(s<-1&&r<0||s>0&&r<0)&&(s+=Math.PI),o.angle=s,o}},{key:"_pointOnCircle",value:function(t,e,i,o){return{x:t+i*Math.cos(o),y:e-i*Math.sin(o)}}},{key:"select",value:function(){this.selected=!0}},{key:"unselect",value:function(){this.selected=!1}},{key:"cleanup",value:function(){return this.edgeType.cleanup()}},{key:"remove",value:function(){this.cleanup(),this.disconnect(),delete this.body.edges[this.id]}},{key:"endPointsValid",value:function(){return void 0!==this.body.nodes[this.fromId]&&void 0!==this.body.nodes[this.toId]}}],[{key:"parseOptions",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(k_(["endPointOffset","arrowStrikethrough","id","from","hidden","hoverWidth","labelHighlightBold","length","line","opacity","physics","scaling","selectionWidth","selfReferenceSize","selfReference","to","title","value","width","font","chosen","widthConstraint"],t,e,i),void 0!==e.endPointOffset&&void 0!==e.endPointOffset.from&&(uw(e.endPointOffset.from)?t.endPointOffset.from=e.endPointOffset.from:(t.endPointOffset.from=void 0!==o.endPointOffset.from?o.endPointOffset.from:0,console.error("endPointOffset.from is not a valid number"))),void 0!==e.endPointOffset&&void 0!==e.endPointOffset.to&&(uw(e.endPointOffset.to)?t.endPointOffset.to=e.endPointOffset.to:(t.endPointOffset.to=void 0!==o.endPointOffset.to?o.endPointOffset.to:0,console.error("endPointOffset.to is not a valid number"))),GM(e.label)?t.label=e.label:GM(t.label)||(t.label=void 0),U_(t,e,"smooth",o),U_(t,e,"shadow",o),U_(t,e,"background",o),void 0!==e.dashes&&null!==e.dashes?t.dashes=e.dashes:!0===i&&null===e.dashes&&(t.dashes=Xm(o.dashes)),void 0!==e.scaling&&null!==e.scaling?(void 0!==e.scaling.min&&(t.scaling.min=e.scaling.min),void 0!==e.scaling.max&&(t.scaling.max=e.scaling.max),U_(t.scaling,e.scaling,"label",o.scaling)):!0===i&&null===e.scaling&&(t.scaling=Xm(o.scaling)),void 0!==e.arrows&&null!==e.arrows)if("string"==typeof e.arrows){var r=e.arrows.toLowerCase();t.arrows.to.enabled=-1!=Wm(r).call(r,"to"),t.arrows.middle.enabled=-1!=Wm(r).call(r,"middle"),t.arrows.from.enabled=-1!=Wm(r).call(r,"from")}else{if("object"!==Ep(e.arrows))throw new Error("The arrow newOptions can only be an object or a string. Refer to the documentation. You used:"+Jm(e.arrows));U_(t.arrows,e.arrows,"to",o.arrows),U_(t.arrows,e.arrows,"middle",o.arrows),U_(t.arrows,e.arrows,"from",o.arrows)}else!0===i&&null===e.arrows&&(t.arrows=Xm(o.arrows));if(void 0!==e.color&&null!==e.color){var s=__(e.color)?{color:e.color,highlight:e.color,hover:e.color,inherit:!1,opacity:1}:e.color,a=t.color;if(n)S_(a,o.color,!1,i);else for(var g in a)Object.prototype.hasOwnProperty.call(a,g)&&delete a[g];if(__(a))a.color=a,a.highlight=a,a.hover=a,a.inherit=!1,void 0===s.opacity&&(a.opacity=1);else{var l=!1;void 0!==s.color&&(a.color=s.color,l=!0),void 0!==s.highlight&&(a.highlight=s.highlight,l=!0),void 0!==s.hover&&(a.hover=s.hover,l=!0),void 0!==s.inherit&&(a.inherit=s.inherit),void 0!==s.opacity&&(a.opacity=Math.min(1,Math.max(0,s.opacity))),!0===l?a.inherit=!1:void 0===a.inherit&&(a.inherit="from")}}else!0===i&&null===e.color&&(t.color=G_(o.color));!0===i&&null===e.font&&(t.font=G_(o.font)),Object.prototype.hasOwnProperty.call(e,"selfReferenceSize")&&(console.warn("The selfReferenceSize property has been deprecated. Please use selfReference property instead. The selfReference can be set like thise selfReference:{size:30, angle:Math.PI / 4}"),t.selfReference.size=e.selfReferenceSize)}}]),t}(),gL=function(){function t(e,i,o){var n,r=this;yd(this,t),this.body=e,this.images=i,this.groups=o,this.body.functions.createEdge=il(n=this.create).call(n,this),this.edgesListeners={add:function(t,e){r.add(e.items)},update:function(t,e){r.update(e.items)},remove:function(t,e){r.remove(e.items)}},this.options={},this.defaultOptions={arrows:{to:{enabled:!1,scaleFactor:1,type:"arrow"},middle:{enabled:!1,scaleFactor:1,type:"arrow"},from:{enabled:!1,scaleFactor:1,type:"arrow"}},endPointOffset:{from:0,to:0},arrowStrikethrough:!0,color:{color:"#848484",highlight:"#848484",hover:"#848484",inherit:"from",opacity:1},dashes:!1,font:{color:"#343434",size:14,face:"arial",background:"none",strokeWidth:2,strokeColor:"#ffffff",align:"horizontal",multi:!1,vadjust:0,bold:{mod:"bold"},boldital:{mod:"bold italic"},ital:{mod:"italic"},mono:{mod:"",size:15,face:"courier new",vadjust:2}},hidden:!1,hoverWidth:1.5,label:void 0,labelHighlightBold:!0,length:void 0,physics:!0,scaling:{min:1,max:15,label:{enabled:!0,min:14,max:30,maxVisible:30,drawThreshold:5},customScalingFunction:function(t,e,i,o){if(e===t)return.5;var n=1/(e-t);return Math.max(0,(o-t)*n)}},selectionWidth:1.5,selfReference:{size:20,angle:Math.PI/4,renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:10,x:5,y:5},background:{enabled:!1,color:"rgba(111,111,111,1)",size:10,dashes:!1},smooth:{enabled:!0,type:"dynamic",forceDirection:"none",roundness:.5},title:void 0,width:1,value:void 0},S_(this.options,this.defaultOptions),this.bindEventListeners()}return Sp(t,[{key:"bindEventListeners",value:function(){var t,e,i=this;this.body.emitter.on("_forceDisableDynamicCurves",(function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];"dynamic"===t&&(t="continuous");var o=!1;for(var n in i.body.edges)if(Object.prototype.hasOwnProperty.call(i.body.edges,n)){var r=i.body.edges[n],s=i.body.data.edges.get(n);if(null!=s){var a=s.smooth;void 0!==a&&!0===a.enabled&&"dynamic"===a.type&&(void 0===t?r.setOptions({smooth:!1}):r.setOptions({smooth:{type:t}}),o=!0)}}!0===e&&!0===o&&i.body.emitter.emit("_dataChanged")})),this.body.emitter.on("_dataUpdated",(function(){i.reconnectEdges()})),this.body.emitter.on("refreshEdges",il(t=this.refresh).call(t,this)),this.body.emitter.on("refresh",il(e=this.refresh).call(e,this)),this.body.emitter.on("destroy",(function(){D_(i.edgesListeners,(function(t,e){i.body.data.edges&&i.body.data.edges.off(e,t)})),delete i.body.functions.createEdge,delete i.edgesListeners.add,delete i.edgesListeners.update,delete i.edgesListeners.remove,delete i.edgesListeners}))}},{key:"setOptions",value:function(t){if(void 0!==t){aL.parseOptions(this.options,t,!0,this.defaultOptions,!0);var e=!1;if(void 0!==t.smooth)for(var i in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,i)&&(e=this.body.edges[i].updateEdgeType()||e);if(void 0!==t.font)for(var o in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,o)&&this.body.edges[o].updateLabelModule();void 0===t.hidden&&void 0===t.physics&&!0!==e||this.body.emitter.emit("_dataChanged")}}},{key:"setData",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=this.body.data.edges;if(_M("id",t))this.body.data.edges=t;else if(Nf(t))this.body.data.edges=new yM,this.body.data.edges.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.body.data.edges=new yM}if(o&&D_(this.edgesListeners,(function(t,e){o.off(e,t)})),this.body.edges={},this.body.data.edges){D_(this.edgesListeners,(function(t,i){e.body.data.edges.on(i,t)}));var n=this.body.data.edges.getIds();this.add(n,!0)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===i&&this.body.emitter.emit("_dataChanged")}},{key:"add",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=this.body.edges,o=this.body.data.edges,n=0;n<t.length;n++){var r=t[n],s=i[r];s&&s.disconnect();var a=o.get(r,{showInternalIds:!0});i[r]=this.create(a)}this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),!1===e&&this.body.emitter.emit("_dataChanged")}},{key:"update",value:function(t){for(var e=this.body.edges,i=this.body.data.edges,o=!1,n=0;n<t.length;n++){var r=t[n],s=i.get(r),a=e[r];void 0!==a?(a.disconnect(),o=a.setOptions(s)||o,a.connect()):(this.body.edges[r]=this.create(s),o=!0)}!0===o?(this.body.emitter.emit("_adjustEdgesForHierarchicalLayout"),this.body.emitter.emit("_dataChanged")):this.body.emitter.emit("_dataUpdated")}},{key:"remove",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(0!==t.length){var i=this.body.edges;D_(t,(function(t){var e=i[t];void 0!==e&&e.remove()})),e&&this.body.emitter.emit("_dataChanged")}}},{key:"refresh",value:function(){var t=this;D_(this.body.edges,(function(e,i){var o=t.body.data.edges.get(i);void 0!==o&&e.setOptions(o)}))}},{key:"create",value:function(t){return new aL(t,this.body,this.images,this.options,this.defaultOptions)}},{key:"reconnectEdges",value:function(){var t,e=this.body.nodes,i=this.body.edges;for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(e[t].edges=[]);for(t in i)if(Object.prototype.hasOwnProperty.call(i,t)){var o=i[t];o.from=null,o.to=null,o.connect()}}},{key:"getConnectedNodes",value:function(t){var e=[];if(void 0!==this.body.edges[t]){var i=this.body.edges[t];void 0!==i.fromId&&e.push(i.fromId),void 0!==i.toId&&e.push(i.toId)}return e}},{key:"_updateState",value:function(){this._addMissingEdges(),this._removeInvalidEdges()}},{key:"_removeInvalidEdges",value:function(){var t=this,e=[];D_(this.body.edges,(function(i,o){var n=t.body.nodes[i.toId],r=t.body.nodes[i.fromId];void 0!==n&&!0===n.isCluster||void 0!==r&&!0===r.isCluster||void 0!==n&&void 0!==r||e.push(o)})),this.remove(e,!1)}},{key:"_addMissingEdges",value:function(){var t=this.body.data.edges;if(null!=t){var e=this.body.edges,i=[];sv(t).call(t,(function(t,o){void 0===e[o]&&i.push(o)})),this.add(i,!0)}}}]),t}(),lL=function(){function t(e,i,o){yd(this,t),this.body=e,this.physicsBody=i,this.barnesHutTree,this.setOptions(o),this._rng=I_("BARNES HUT SOLVER")}return Sp(t,[{key:"setOptions",value:function(t){this.options=t,this.thetaInversed=1/this.options.theta,this.overlapAvoidanceFactor=1-Math.max(0,Math.min(1,this.options.avoidOverlap))}},{key:"solve",value:function(){if(0!==this.options.gravitationalConstant&&this.physicsBody.physicsNodeIndices.length>0){var t,e=this.body.nodes,i=this.physicsBody.physicsNodeIndices,o=i.length,n=this._formBarnesHutTree(e,i);this.barnesHutTree=n;for(var r=0;r<o;r++)(t=e[i[r]]).options.mass>0&&this._getForceContributions(n.root,t)}}},{key:"_getForceContributions",value:function(t,e){this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e)}},{key:"_getForceContribution",value:function(t,e){if(t.childrenCount>0){var i=t.centerOfMass.x-e.x,o=t.centerOfMass.y-e.y,n=Math.sqrt(i*i+o*o);n*t.calcSize>this.thetaInversed?this._calculateForces(n,i,o,e,t):4===t.childrenCount?this._getForceContributions(t,e):t.children.data.id!=e.id&&this._calculateForces(n,i,o,e,t)}}},{key:"_calculateForces",value:function(t,e,i,o,n){0===t&&(e=t=.1),this.overlapAvoidanceFactor<1&&o.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*o.shape.radius,t-o.shape.radius));var r=this.options.gravitationalConstant*n.mass*o.options.mass/Math.pow(t,3),s=e*r,a=i*r;this.physicsBody.forces[o.id].x+=s,this.physicsBody.forces[o.id].y+=a}},{key:"_formBarnesHutTree",value:function(t,e){for(var i,o=e.length,n=t[e[0]].x,r=t[e[0]].y,s=t[e[0]].x,a=t[e[0]].y,g=1;g<o;g++){var l=t[e[g]],h=l.x,c=l.y;l.options.mass>0&&(h<n&&(n=h),h>s&&(s=h),c<r&&(r=c),c>a&&(a=c))}var u=Math.abs(s-n)-Math.abs(a-r);u>0?(r-=.5*u,a+=.5*u):(n+=.5*u,s-=.5*u);var d=Math.max(1e-5,Math.abs(s-n)),A=.5*d,I=.5*(n+s),C=.5*(r+a),p={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:I-A,maxX:I+A,minY:C-A,maxY:C+A},size:d,calcSize:1/d,children:{data:null},maxWidth:0,level:0,childrenCount:4}};this._splitBranch(p.root);for(var f=0;f<o;f++)(i=t[e[f]]).options.mass>0&&this._placeInTree(p.root,i);return p}},{key:"_updateBranchMass",value:function(t,e){var i=t.centerOfMass,o=t.mass+e.options.mass,n=1/o;i.x=i.x*t.mass+e.x*e.options.mass,i.x*=n,i.y=i.y*t.mass+e.y*e.options.mass,i.y*=n,t.mass=o;var r=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<r?r:t.maxWidth}},{key:"_placeInTree",value:function(t,e,i){1==i&&void 0!==i||this._updateBranchMass(t,e);var o,n=t.children.NW.range;o=n.maxX>e.x?n.maxY>e.y?"NW":"SW":n.maxY>e.y?"NE":"SE",this._placeInRegion(t,e,o)}},{key:"_placeInRegion",value:function(t,e,i){var o=t.children[i];switch(o.childrenCount){case 0:o.children.data=e,o.childrenCount=1,this._updateBranchMass(o,e);break;case 1:o.children.data.x===e.x&&o.children.data.y===e.y?(e.x+=this._rng(),e.y+=this._rng()):(this._splitBranch(o),this._placeInTree(o,e));break;case 4:this._placeInTree(o,e)}}},{key:"_splitBranch",value:function(t){var e=null;1===t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)}},{key:"_insertRegion",value:function(t,e){var i,o,n,r,s=.5*t.size;switch(e){case"NW":i=t.range.minX,o=t.range.minX+s,n=t.range.minY,r=t.range.minY+s;break;case"NE":i=t.range.minX+s,o=t.range.maxX,n=t.range.minY,r=t.range.minY+s;break;case"SW":i=t.range.minX,o=t.range.minX+s,n=t.range.minY+s,r=t.range.maxY;break;case"SE":i=t.range.minX+s,o=t.range.maxX,n=t.range.minY+s,r=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:o,minY:n,maxY:r},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}}},{key:"_debug",value:function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))}},{key:"_drawBranch",value:function(t,e,i){void 0===i&&(i="#FF0000"),4===t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=i,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}}]),t}(),hL=function(){function t(e,i,o){yd(this,t),this._rng=I_("REPULSION SOLVER"),this.body=e,this.physicsBody=i,this.setOptions(o)}return Sp(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,o,n,r,s,a,g=this.body.nodes,l=this.physicsBody.physicsNodeIndices,h=this.physicsBody.forces,c=this.options.nodeDistance,u=-2/3/c,d=4/3,A=0;A<l.length-1;A++){s=g[l[A]];for(var I=A+1;I<l.length;I++)t=(a=g[l[I]]).x-s.x,e=a.y-s.y,0===(i=Math.sqrt(t*t+e*e))&&(t=i=.1*this._rng()),i<2*c&&(r=i<.5*c?1:u*i+d,o=t*(r/=i),n=e*r,h[s.id].x-=o,h[s.id].y-=n,h[a.id].x+=o,h[a.id].y+=n)}}}]),t}(),cL=function(){function t(e,i,o){yd(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return Sp(t,[{key:"setOptions",value:function(t){this.options=t,this.overlapAvoidanceFactor=Math.max(0,Math.min(1,this.options.avoidOverlap||0))}},{key:"solve",value:function(){for(var t=this.body.nodes,e=this.physicsBody.physicsNodeIndices,i=this.physicsBody.forces,o=this.options.nodeDistance,n=0;n<e.length-1;n++)for(var r=t[e[n]],s=n+1;s<e.length;s++){var a=t[e[s]];if(r.level===a.level){var g=o+this.overlapAvoidanceFactor*((r.shape.radius||0)/2+(a.shape.radius||0)/2),l=a.x-r.x,h=a.y-r.y,c=Math.sqrt(l*l+h*h),u=void 0;u=c<g?-Math.pow(.05*c,2)+Math.pow(.05*g,2):0,0!==c&&(u/=c);var d=l*u,A=h*u;i[r.id].x-=d,i[r.id].y-=A,i[a.id].x+=d,i[a.id].y+=A}}}}]),t}(),uL=function(){function t(e,i,o){yd(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return Sp(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,o,n,r=this.physicsBody.physicsEdgeIndices,s=this.body.edges,a=0;a<r.length;a++)!0===(e=s[r[a]]).connected&&e.toId!==e.fromId&&void 0!==this.body.nodes[e.toId]&&void 0!==this.body.nodes[e.fromId]&&(void 0!==e.edgeType.via?(t=void 0===e.options.length?this.options.springLength:e.options.length,i=e.to,o=e.edgeType.via,n=e.from,this._calculateSpringForce(i,o,.5*t),this._calculateSpringForce(o,n,.5*t)):(t=void 0===e.options.length?1.5*this.options.springLength:e.options.length,this._calculateSpringForce(e.from,e.to,t)))}},{key:"_calculateSpringForce",value:function(t,e,i){var o=t.x-e.x,n=t.y-e.y,r=Math.max(Math.sqrt(o*o+n*n),.01),s=this.options.springConstant*(i-r)/r,a=o*s,g=n*s;void 0!==this.physicsBody.forces[t.id]&&(this.physicsBody.forces[t.id].x+=a,this.physicsBody.forces[t.id].y+=g),void 0!==this.physicsBody.forces[e.id]&&(this.physicsBody.forces[e.id].x-=a,this.physicsBody.forces[e.id].y-=g)}}]),t}(),dL=function(){function t(e,i,o){yd(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return Sp(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,o,n,r,s,a,g,l,h=this.body.edges,c=.5,u=this.physicsBody.physicsEdgeIndices,d=this.physicsBody.physicsNodeIndices,A=this.physicsBody.forces,I=0;I<d.length;I++){var C=d[I];A[C].springFx=0,A[C].springFy=0}for(var p=0;p<u.length;p++)!0===(e=h[u[p]]).connected&&(t=void 0===e.options.length?this.options.springLength:e.options.length,i=e.from.x-e.to.x,o=e.from.y-e.to.y,a=0===(a=Math.sqrt(i*i+o*o))?.01:a,n=i*(s=this.options.springConstant*(t-a)/a),r=o*s,e.to.level!=e.from.level?(void 0!==A[e.toId]&&(A[e.toId].springFx-=n,A[e.toId].springFy-=r),void 0!==A[e.fromId]&&(A[e.fromId].springFx+=n,A[e.fromId].springFy+=r)):(void 0!==A[e.toId]&&(A[e.toId].x-=c*n,A[e.toId].y-=c*r),void 0!==A[e.fromId]&&(A[e.fromId].x+=c*n,A[e.fromId].y+=c*r)));s=1;for(var f=0;f<d.length;f++){var v=d[f];g=Math.min(s,Math.max(-s,A[v].springFx)),l=Math.min(s,Math.max(-s,A[v].springFy)),A[v].x+=g,A[v].y+=l}for(var m=0,b=0,y=0;y<d.length;y++){var _=d[y];m+=A[_].x,b+=A[_].y}for(var T=m/d.length,E=b/d.length,w=0;w<d.length;w++){var k=d[w];A[k].x-=T,A[k].y-=E}}}]),t}(),AL=function(){function t(e,i,o){yd(this,t),this.body=e,this.physicsBody=i,this.setOptions(o)}return Sp(t,[{key:"setOptions",value:function(t){this.options=t}},{key:"solve",value:function(){for(var t,e,i,o,n=this.body.nodes,r=this.physicsBody.physicsNodeIndices,s=this.physicsBody.forces,a=0;a<r.length;a++)t=-(o=n[r[a]]).x,e=-o.y,i=Math.sqrt(t*t+e*e),this._calculateForces(i,t,e,s,o)}},{key:"_calculateForces",value:function(t,e,i,o,n){var r=0===t?0:this.options.centralGravity/t;o[n.id].x=e*r,o[n.id].y=i*r}}]),t}();var IL=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){var r;return yd(this,n),(r=o.call(this,t,e,i))._rng=I_("FORCE ATLAS 2 BASED REPULSION SOLVER"),r}return Sp(n,[{key:"_calculateForces",value:function(t,e,i,o,n){0===t&&(e=t=.1*this._rng()),this.overlapAvoidanceFactor<1&&o.shape.radius&&(t=Math.max(.1+this.overlapAvoidanceFactor*o.shape.radius,t-o.shape.radius));var r=o.edges.length+1,s=this.options.gravitationalConstant*n.mass*o.options.mass*r/Math.pow(t,2),a=e*s,g=i*s;this.physicsBody.forces[o.id].x+=a,this.physicsBody.forces[o.id].y+=g}}]),n}(lL);var CL=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i){return yd(this,n),o.call(this,t,e,i)}return Sp(n,[{key:"_calculateForces",value:function(t,e,i,o,n){if(t>0){var r=n.edges.length+1,s=this.options.centralGravity*r*n.options.mass;o[n.id].x=e*s,o[n.id].y=i*s}}}]),n}(AL),pL=function(){function t(e){yd(this,t),this.body=e,this.physicsBody={physicsNodeIndices:[],physicsEdgeIndices:[],forces:{},velocities:{}},this.physicsEnabled=!0,this.simulationInterval=1e3/60,this.requiresTimeout=!0,this.previousStates={},this.referenceState={},this.freezeCache={},this.renderTimer=void 0,this.adaptiveTimestep=!1,this.adaptiveTimestepEnabled=!1,this.adaptiveCounter=0,this.adaptiveInterval=3,this.stabilized=!1,this.startedStabilization=!1,this.stabilizationIterations=0,this.ready=!1,this.options={},this.defaultOptions={enabled:!0,barnesHut:{theta:.5,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09,avoidOverlap:0},forceAtlas2Based:{theta:.5,gravitationalConstant:-50,centralGravity:.01,springConstant:.08,springLength:100,damping:.4,avoidOverlap:0},repulsion:{centralGravity:.2,springLength:200,springConstant:.05,nodeDistance:100,damping:.09,avoidOverlap:0},hierarchicalRepulsion:{centralGravity:0,springLength:100,springConstant:.01,nodeDistance:120,damping:.09},maxVelocity:50,minVelocity:.75,solver:"barnesHut",stabilization:{enabled:!0,iterations:1e3,updateInterval:50,onlyDynamicEdges:!1,fit:!0},timestep:.5,adaptiveTimestep:!0,wind:{x:0,y:0}},Lg(this.options,this.defaultOptions),this.timestep=.5,this.layoutFailed=!1,this.bindEventListeners()}return Sp(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("initPhysics",(function(){t.initPhysics()})),this.body.emitter.on("_layoutFailed",(function(){t.layoutFailed=!0})),this.body.emitter.on("resetPhysics",(function(){t.stopSimulation(),t.ready=!1})),this.body.emitter.on("disablePhysics",(function(){t.physicsEnabled=!1,t.stopSimulation()})),this.body.emitter.on("restorePhysics",(function(){t.setOptions(t.options),!0===t.ready&&t.startSimulation()})),this.body.emitter.on("startSimulation",(function(){!0===t.ready&&t.startSimulation()})),this.body.emitter.on("stopSimulation",(function(){t.stopSimulation()})),this.body.emitter.on("destroy",(function(){t.stopSimulation(!1),t.body.emitter.off()})),this.body.emitter.on("_dataChanged",(function(){t.updatePhysicsData()}))}},{key:"setOptions",value:function(t){if(void 0!==t)if(!1===t)this.options.enabled=!1,this.physicsEnabled=!1,this.stopSimulation();else if(!0===t)this.options.enabled=!0,this.physicsEnabled=!0,this.startSimulation();else{this.physicsEnabled=!0,O_(["stabilization"],this.options,t),U_(this.options,t,"stabilization"),void 0===t.enabled&&(this.options.enabled=!0),!1===this.options.enabled&&(this.physicsEnabled=!1,this.stopSimulation());var e=this.options.wind;e&&(("number"!=typeof e.x||hw(e.x))&&(e.x=0),("number"!=typeof e.y||hw(e.y))&&(e.y=0)),this.timestep=this.options.timestep}this.init()}},{key:"init",value:function(){var t;"forceAtlas2Based"===this.options.solver?(t=this.options.forceAtlas2Based,this.nodesSolver=new IL(this.body,this.physicsBody,t),this.edgesSolver=new uL(this.body,this.physicsBody,t),this.gravitySolver=new CL(this.body,this.physicsBody,t)):"repulsion"===this.options.solver?(t=this.options.repulsion,this.nodesSolver=new hL(this.body,this.physicsBody,t),this.edgesSolver=new uL(this.body,this.physicsBody,t),this.gravitySolver=new AL(this.body,this.physicsBody,t)):"hierarchicalRepulsion"===this.options.solver?(t=this.options.hierarchicalRepulsion,this.nodesSolver=new cL(this.body,this.physicsBody,t),this.edgesSolver=new dL(this.body,this.physicsBody,t),this.gravitySolver=new AL(this.body,this.physicsBody,t)):(t=this.options.barnesHut,this.nodesSolver=new lL(this.body,this.physicsBody,t),this.edgesSolver=new uL(this.body,this.physicsBody,t),this.gravitySolver=new AL(this.body,this.physicsBody,t)),this.modelOptions=t}},{key:"initPhysics",value:function(){!0===this.physicsEnabled&&!0===this.options.enabled?!0===this.options.stabilization.enabled?this.stabilize():(this.stabilized=!1,this.ready=!0,this.body.emitter.emit("fit",{},this.layoutFailed),this.startSimulation()):(this.ready=!0,this.body.emitter.emit("fit"))}},{key:"startSimulation",value:function(){var t;!0===this.physicsEnabled&&!0===this.options.enabled?(this.stabilized=!1,this.adaptiveTimestep=!1,this.body.emitter.emit("_resizeNodes"),void 0===this.viewFunction&&(this.viewFunction=il(t=this.simulationStep).call(t,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))):this.body.emitter.emit("_redraw")}},{key:"stopSimulation",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.stabilized=!0,!0===t&&this._emitStabilized(),void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.viewFunction=void 0,!0===t&&this.body.emitter.emit("_stopRendering"))}},{key:"simulationStep",value:function(){var t=Yf();this.physicsTick(),(Yf()-t<.4*this.simulationInterval||!0===this.runDoubleSpeed)&&!1===this.stabilized&&(this.physicsTick(),this.runDoubleSpeed=!0),!0===this.stabilized&&this.stopSimulation()}},{key:"_emitStabilized",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.stabilizationIterations;(this.stabilizationIterations>1||!0===this.startedStabilization)&&fb((function(){t.body.emitter.emit("stabilized",{iterations:e}),t.startedStabilization=!1,t.stabilizationIterations=0}),0)}},{key:"physicsStep",value:function(){this.gravitySolver.solve(),this.nodesSolver.solve(),this.edgesSolver.solve(),this.moveNodes()}},{key:"adjustTimeStep",value:function(){!0===this._evaluateStepQuality()?this.timestep=1.2*this.timestep:this.timestep/1.2<this.options.timestep?this.timestep=this.options.timestep:(this.adaptiveCounter=-1,this.timestep=Math.max(this.options.timestep,this.timestep/1.2))}},{key:"physicsTick",value:function(){this._startStabilizing(),!0!==this.stabilized&&(!0===this.adaptiveTimestep&&!0===this.adaptiveTimestepEnabled?(this.adaptiveCounter%this.adaptiveInterval==0?(this.timestep=2*this.timestep,this.physicsStep(),this.revert(),this.timestep=.5*this.timestep,this.physicsStep(),this.physicsStep(),this.adjustTimeStep()):this.physicsStep(),this.adaptiveCounter+=1):(this.timestep=this.options.timestep,this.physicsStep()),!0===this.stabilized&&this.revert(),this.stabilizationIterations++)}},{key:"updatePhysicsData",value:function(){this.physicsBody.forces={},this.physicsBody.physicsNodeIndices=[],this.physicsBody.physicsEdgeIndices=[];var t=this.body.nodes,e=this.body.edges;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&!0===t[i].options.physics&&this.physicsBody.physicsNodeIndices.push(t[i].id);for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&!0===e[o].options.physics&&this.physicsBody.physicsEdgeIndices.push(e[o].id);for(var n=0;n<this.physicsBody.physicsNodeIndices.length;n++){var r=this.physicsBody.physicsNodeIndices[n];this.physicsBody.forces[r]={x:0,y:0},void 0===this.physicsBody.velocities[r]&&(this.physicsBody.velocities[r]={x:0,y:0})}for(var s in this.physicsBody.velocities)void 0===t[s]&&delete this.physicsBody.velocities[s]}},{key:"revert",value:function(){var t=Uf(this.previousStates),e=this.body.nodes,i=this.physicsBody.velocities;this.referenceState={};for(var o=0;o<t.length;o++){var n=t[o];void 0!==e[n]?!0===e[n].options.physics&&(this.referenceState[n]={positions:{x:e[n].x,y:e[n].y}},i[n].x=this.previousStates[n].vx,i[n].y=this.previousStates[n].vy,e[n].x=this.previousStates[n].x,e[n].y=this.previousStates[n].y):delete this.previousStates[n]}}},{key:"_evaluateStepQuality",value:function(){var t,e,i=this.body.nodes,o=this.referenceState;for(var n in this.referenceState)if(Object.prototype.hasOwnProperty.call(this.referenceState,n)&&void 0!==i[n]&&(t=i[n].x-o[n].positions.x,e=i[n].y-o[n].positions.y,Math.sqrt(Math.pow(t,2)+Math.pow(e,2))>.3))return!1;return!0}},{key:"moveNodes",value:function(){for(var t=this.physicsBody.physicsNodeIndices,e=0,i=0,o=0;o<t.length;o++){var n=t[o],r=this._performStep(n);e=Math.max(e,r),i+=r}this.adaptiveTimestepEnabled=i/t.length<5,this.stabilized=e<this.options.minVelocity}},{key:"calculateComponentVelocity",value:function(t,e,i){t+=(e-this.modelOptions.damping*t)/i*this.timestep;var o=this.options.maxVelocity||1e9;return Math.abs(t)>o&&(t=t>0?o:-o),t}},{key:"_performStep",value:function(t){var e=this.body.nodes[t],i=this.physicsBody.forces[t];this.options.wind&&(i.x+=this.options.wind.x,i.y+=this.options.wind.y);var o=this.physicsBody.velocities[t];return this.previousStates[t]={x:e.x,y:e.y,vx:o.x,vy:o.y},!1===e.options.fixed.x?(o.x=this.calculateComponentVelocity(o.x,i.x,e.options.mass),e.x+=o.x*this.timestep):(i.x=0,o.x=0),!1===e.options.fixed.y?(o.y=this.calculateComponentVelocity(o.y,i.y,e.options.mass),e.y+=o.y*this.timestep):(i.y=0,o.y=0),Math.sqrt(Math.pow(o.x,2)+Math.pow(o.y,2))}},{key:"_freezeNodes",value:function(){var t=this.body.nodes;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)&&t[e].x&&t[e].y){var i=t[e].options.fixed;this.freezeCache[e]={x:i.x,y:i.y},i.x=!0,i.y=!0}}},{key:"_restoreFrozenNodes",value:function(){var t=this.body.nodes;for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&void 0!==this.freezeCache[e]&&(t[e].options.fixed.x=this.freezeCache[e].x,t[e].options.fixed.y=this.freezeCache[e].y);this.freezeCache={}}},{key:"stabilize",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.stabilization.iterations;"number"!=typeof e&&(e=this.options.stabilization.iterations,console.error("The stabilize method needs a numeric amount of iterations. Switching to default: ",e)),0!==this.physicsBody.physicsNodeIndices.length?(this.adaptiveTimestep=this.options.adaptiveTimestep,this.body.emitter.emit("_resizeNodes"),this.stopSimulation(),this.stabilized=!1,this.body.emitter.emit("_blockRedraw"),this.targetIterations=e,!0===this.options.stabilization.onlyDynamicEdges&&this._freezeNodes(),this.stabilizationIterations=0,fb((function(){return t._stabilizationBatch()}),0)):this.ready=!0}},{key:"_startStabilizing",value:function(){return!0!==this.startedStabilization&&(this.body.emitter.emit("startStabilizing"),this.startedStabilization=!0,!0)}},{key:"_stabilizationBatch",value:function(){var t=this,e=function(){return!1===t.stabilized&&t.stabilizationIterations<t.targetIterations},i=function(){t.body.emitter.emit("stabilizationProgress",{iterations:t.stabilizationIterations,total:t.targetIterations})};this._startStabilizing()&&i();for(var o,n=0;e()&&n<this.options.stabilization.updateInterval;)this.physicsTick(),n++;i(),e()?fb(il(o=this._stabilizationBatch).call(o,this),0):this._finalizeStabilization()}},{key:"_finalizeStabilization",value:function(){this.body.emitter.emit("_allowRedraw"),!0===this.options.stabilization.fit&&this.body.emitter.emit("fit"),!0===this.options.stabilization.onlyDynamicEdges&&this._restoreFrozenNodes(),this.body.emitter.emit("stabilizationIterationsDone"),this.body.emitter.emit("_requestRedraw"),!0===this.stabilized?this._emitStabilized():this.startSimulation(),this.ready=!0}},{key:"_drawForces",value:function(t){for(var e=0;e<this.physicsBody.physicsNodeIndices.length;e++){var i=this.physicsBody.physicsNodeIndices[e],o=this.body.nodes[i],n=this.physicsBody.forces[i],r=Math.sqrt(Math.pow(n.x,2)+Math.pow(n.x,2)),s=Math.min(Math.max(5,r),15),a=3*s,g=F_((180-180*Math.min(1,Math.max(0,.03*r)))/360,1,1),l={x:o.x+20*n.x,y:o.y+20*n.y};t.lineWidth=s,t.strokeStyle=g,t.beginPath(),t.moveTo(o.x,o.y),t.lineTo(l.x,l.y),t.stroke();var h=Math.atan2(n.y,n.x);t.fillStyle=g,KN.draw(t,{type:"arrow",point:l,angle:h,length:a}),wb(t).call(t)}}}]),t}(),fL=function(){function t(){yd(this,t)}return Sp(t,null,[{key:"getRange",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=1e9,n=-1e9,r=1e9,s=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)r>(e=t[i[a]]).shape.boundingBox.left&&(r=e.shape.boundingBox.left),s<e.shape.boundingBox.right&&(s=e.shape.boundingBox.right),o>e.shape.boundingBox.top&&(o=e.shape.boundingBox.top),n<e.shape.boundingBox.bottom&&(n=e.shape.boundingBox.bottom);return 1e9===r&&-1e9===s&&1e9===o&&-1e9===n&&(o=0,n=0,r=0,s=0),{minX:r,maxX:s,minY:o,maxY:n}}},{key:"getRangeCore",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=1e9,n=-1e9,r=1e9,s=-1e9;if(i.length>0)for(var a=0;a<i.length;a++)r>(e=t[i[a]]).x&&(r=e.x),s<e.x&&(s=e.x),o>e.y&&(o=e.y),n<e.y&&(n=e.y);return 1e9===r&&-1e9===s&&1e9===o&&-1e9===n&&(o=0,n=0,r=0,s=0),{minX:r,maxX:s,minY:o,maxY:n}}},{key:"findCenter",value:function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}}},{key:"cloneOptions",value:function(t,e){var i={};return void 0===e||"node"===e?(S_(i,t.options,!0),i.x=t.x,i.y=t.y,i.amountOfConnections=t.edges.length):S_(i,t.options,!0),i}}]),t}();var vL=function(t){ww(n,t);var e,i,o=(e=n,i=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}(),function(){var t,o=Rw(e);if(i){var n=Rw(this).constructor;t=$D(o,arguments,n)}else t=o.apply(this,arguments);return kw(this,t)});function n(t,e,i,r,s,a){var g;return yd(this,n),(g=o.call(this,t,e,i,r,s,a)).isCluster=!0,g.containedNodes={},g.containedEdges={},g}return Sp(n,[{key:"_openChildCluster",value:function(t){var e=this,i=this.body.nodes[t];if(void 0===this.containedNodes[t])throw new Error("node with id: "+t+" not in current cluster");if(!i.isCluster)throw new Error("node with id: "+t+" is not a cluster");delete this.containedNodes[t],D_(i.edges,(function(t){delete e.containedEdges[t.id]})),D_(i.containedNodes,(function(t,i){e.containedNodes[i]=t})),i.containedNodes={},D_(i.containedEdges,(function(t,i){e.containedEdges[i]=t})),i.containedEdges={},D_(i.edges,(function(t){D_(e.edges,(function(i){var o,n,r=Wm(o=i.clusteringEdgeReplacingIds).call(o,t.id);-1!==r&&(D_(t.clusteringEdgeReplacingIds,(function(t){i.clusteringEdgeReplacingIds.push(t),e.body.edges[t].edgeReplacedById=i.id})),$v(n=i.clusteringEdgeReplacingIds).call(n,r,1))}))})),i.edges=[]}}]),n}(vN),mL=function(){function t(e){var i=this;yd(this,t),this.body=e,this.clusteredNodes={},this.clusteredEdges={},this.options={},this.defaultOptions={},Lg(this.options,this.defaultOptions),this.body.emitter.on("_resetData",(function(){i.clusteredNodes={},i.clusteredEdges={}}))}return Sp(t,[{key:"clusterByHubsize",value:function(t,e){void 0===t?t=this._getHubSize():"object"===Ep(t)&&(e=this._checkOptions(t),t=this._getHubSize());for(var i=[],o=0;o<this.body.nodeIndices.length;o++){var n=this.body.nodes[this.body.nodeIndices[o]];n.edges.length>=t&&i.push(n.id)}for(var r=0;r<i.length;r++)this.clusterByConnection(i[r],e,!0);this.body.emitter.emit("_dataChanged")}},{key:"cluster",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(void 0===e.joinCondition)throw new Error("Cannot call clusterByNodeData without a joinCondition function in the options.");e=this._checkOptions(e);var o={},n={};D_(this.body.nodes,(function(i,r){i.options&&!0===e.joinCondition(i.options)&&(o[r]=i,D_(i.edges,(function(e){void 0===t.clusteredEdges[e.id]&&(n[e.id]=e)})))})),this._cluster(o,n,e,i)}},{key:"clusterByEdgeCount",value:function(t,e){var i=this,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];e=this._checkOptions(e);for(var n,r,s,a=[],g={},l=function(){var o={},l={},c=i.body.nodeIndices[h],u=i.body.nodes[c];if(void 0===g[c]){s=0,r=[];for(var d=0;d<u.edges.length;d++)n=u.edges[d],void 0===i.clusteredEdges[n.id]&&(n.toId!==n.fromId&&s++,r.push(n));if(s===t){for(var A=function(t){if(void 0===e.joinCondition||null===e.joinCondition)return!0;var i=fL.cloneOptions(t);return e.joinCondition(i)},I=!0,C=0;C<r.length;C++){n=r[C];var p=i._getConnectedId(n,c);if(!A(u)){I=!1;break}l[n.id]=n,o[c]=u,o[p]=i.body.nodes[p],g[c]=!0}if(Uf(o).length>0&&Uf(l).length>0&&!0===I){var f=function(){for(var t=0;t<a.length;++t)for(var e in o)if(void 0!==a[t].nodes[e])return a[t]}();if(void 0!==f){for(var v in o)void 0===f.nodes[v]&&(f.nodes[v]=o[v]);for(var m in l)void 0===f.edges[m]&&(f.edges[m]=l[m])}else a.push({nodes:o,edges:l})}}}},h=0;h<this.body.nodeIndices.length;h++)l();for(var c=0;c<a.length;c++)this._cluster(a[c].nodes,a[c].edges,e,!1);!0===o&&this.body.emitter.emit("_dataChanged")}},{key:"clusterOutliers",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(1,t,e)}},{key:"clusterBridges",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.clusterByEdgeCount(2,t,e)}},{key:"clusterByConnection",value:function(t,e){var i,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No nodeId supplied to clusterByConnection!");if(void 0===this.body.nodes[t])throw new Error("The nodeId given to clusterByConnection does not exist!");var n=this.body.nodes[t];void 0===(e=this._checkOptions(e,n)).clusterNodeProperties.x&&(e.clusterNodeProperties.x=n.x),void 0===e.clusterNodeProperties.y&&(e.clusterNodeProperties.y=n.y),void 0===e.clusterNodeProperties.fixed&&(e.clusterNodeProperties.fixed={},e.clusterNodeProperties.fixed.x=n.options.fixed.x,e.clusterNodeProperties.fixed.y=n.options.fixed.y);var r={},s={},a=n.id,g=fL.cloneOptions(n);r[a]=n;for(var l=0;l<n.edges.length;l++){var h=n.edges[l];if(void 0===this.clusteredEdges[h.id]){var c=this._getConnectedId(h,a);if(void 0===this.clusteredNodes[c])if(c!==a)if(void 0===e.joinCondition)s[h.id]=h,r[c]=this.body.nodes[c];else{var u=fL.cloneOptions(this.body.nodes[c]);!0===e.joinCondition(g,u)&&(s[h.id]=h,r[c]=this.body.nodes[c])}else s[h.id]=h}}var d=zf(i=Uf(r)).call(i,(function(t){return r[t].id}));for(var A in r)if(Object.prototype.hasOwnProperty.call(r,A))for(var I=r[A],C=0;C<I.edges.length;C++){var p=I.edges[C];Wm(d).call(d,this._getConnectedId(p,I.id))>-1&&(s[p.id]=p)}this._cluster(r,s,e,o)}},{key:"_createClusterEdges",value:function(t,e,i,o){for(var n,r,s,a,g,l,h=Uf(t),c=[],u=0;u<h.length;u++){s=t[r=h[u]];for(var d=0;d<s.edges.length;d++)n=s.edges[d],void 0===this.clusteredEdges[n.id]&&(n.toId==n.fromId?e[n.id]=n:n.toId==r?(a=i.id,l=g=n.fromId):(a=n.toId,g=i.id,l=a),void 0===t[l]&&c.push({edge:n,fromId:g,toId:a}))}for(var A=[],I=function(t){for(var e=0;e<A.length;e++){var i=A[e],o=t.fromId===i.fromId&&t.toId===i.toId,n=t.fromId===i.toId&&t.toId===i.fromId;if(o||n)return i}return null},C=0;C<c.length;C++){var p=c[C],f=p.edge,v=I(p);null===v?(v=this._createClusteredEdge(p.fromId,p.toId,f,o),A.push(v)):v.clusteringEdgeReplacingIds.push(f.id),this.body.edges[f.id].edgeReplacedById=v.id,this._backupEdgeOptions(f),f.setOptions({physics:!1})}}},{key:"_checkOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return void 0===t.clusterEdgeProperties&&(t.clusterEdgeProperties={}),void 0===t.clusterNodeProperties&&(t.clusterNodeProperties={}),t}},{key:"_cluster",value:function(t,e,i){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&void 0!==this.clusteredNodes[r]&&n.push(r);for(var s=0;s<n.length;++s)delete t[n[s]];if(0!=Uf(t).length&&(1!=Uf(t).length||1==i.clusterNodeProperties.allowSingleNodeCluster)){var a=S_({},i.clusterNodeProperties);if(void 0!==i.processProperties){var g=[];for(var l in t)if(Object.prototype.hasOwnProperty.call(t,l)){var h=fL.cloneOptions(t[l]);g.push(h)}var c=[];for(var u in e)if(Object.prototype.hasOwnProperty.call(e,u)&&"clusterEdge:"!==u.substr(0,12)){var d=fL.cloneOptions(e[u],"edge");c.push(d)}if(!(a=i.processProperties(a,g,c)))throw new Error("The processProperties function does not return properties!")}void 0===a.id&&(a.id="cluster:"+dM());var A=a.id;void 0===a.label&&(a.label="cluster");var I=void 0;void 0===a.x&&(I=this._getClusterPosition(t),a.x=I.x),void 0===a.y&&(void 0===I&&(I=this._getClusterPosition(t)),a.y=I.y),a.id=A;var C=this.body.functions.createNode(a,vL);C.containedNodes=t,C.containedEdges=e,C.clusterEdgeProperties=i.clusterEdgeProperties,this.body.nodes[a.id]=C,this._clusterEdges(t,e,a,i.clusterEdgeProperties),a.id=void 0,!0===o&&this.body.emitter.emit("_dataChanged")}}},{key:"_backupEdgeOptions",value:function(t){void 0===this.clusteredEdges[t.id]&&(this.clusteredEdges[t.id]={physics:t.options.physics})}},{key:"_restoreEdge",value:function(t){var e=this.clusteredEdges[t.id];void 0!==e&&(t.setOptions({physics:e.physics}),delete this.clusteredEdges[t.id])}},{key:"isCluster",value:function(t){return void 0!==this.body.nodes[t]?!0===this.body.nodes[t].isCluster:(console.error("Node does not exist."),!1)}},{key:"_getClusterPosition",value:function(t){for(var e,i=Uf(t),o=t[i[0]].x,n=t[i[0]].x,r=t[i[0]].y,s=t[i[0]].y,a=1;a<i.length;a++)o=(e=t[i[a]]).x<o?e.x:o,n=e.x>n?e.x:n,r=e.y<r?e.y:r,s=e.y>s?e.y:s;return{x:.5*(o+n),y:.5*(r+s)}}},{key:"openCluster",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(void 0===t)throw new Error("No clusterNodeId supplied to openCluster.");var o=this.body.nodes[t];if(void 0===o)throw new Error("The clusterNodeId supplied to openCluster does not exist.");if(!0!==o.isCluster||void 0===o.containedNodes||void 0===o.containedEdges)throw new Error("The node:"+t+" is not a valid cluster.");var n=this.findNode(t),r=Wm(n).call(n,t)-1;if(r>=0){var s=n[r];return this.body.nodes[s]._openChildCluster(t),delete this.body.nodes[t],void(!0===i&&this.body.emitter.emit("_dataChanged"))}var a=o.containedNodes,g=o.containedEdges;if(void 0!==e&&void 0!==e.releaseFunction&&"function"==typeof e.releaseFunction){var l={},h={x:o.x,y:o.y};for(var c in a)if(Object.prototype.hasOwnProperty.call(a,c)){var u=this.body.nodes[c];l[c]={x:u.x,y:u.y}}var d=e.releaseFunction(h,l);for(var A in a)if(Object.prototype.hasOwnProperty.call(a,A)){var I=this.body.nodes[A];void 0!==d[A]&&(I.x=void 0===d[A].x?o.x:d[A].x,I.y=void 0===d[A].y?o.y:d[A].y)}}else D_(a,(function(t){!1===t.options.fixed.x&&(t.x=o.x),!1===t.options.fixed.y&&(t.y=o.y)}));for(var C in a)if(Object.prototype.hasOwnProperty.call(a,C)){var p=this.body.nodes[C];p.vx=o.vx,p.vy=o.vy,p.setOptions({physics:!0}),delete this.clusteredNodes[C]}for(var f=[],v=0;v<o.edges.length;v++)f.push(o.edges[v]);for(var m=0;m<f.length;m++){for(var b=f[m],y=this._getConnectedId(b,t),_=this.clusteredNodes[y],T=0;T<b.clusteringEdgeReplacingIds.length;T++){var E=b.clusteringEdgeReplacingIds[T],w=this.body.edges[E];if(void 0!==w)if(void 0!==_){var k=this.body.nodes[_.clusterId];k.containedEdges[w.id]=w,delete g[w.id];var O=w.fromId,S=w.toId;w.toId==y?S=_.clusterId:O=_.clusterId,this._createClusteredEdge(O,S,w,k.clusterEdgeProperties,{hidden:!1,physics:!0})}else this._restoreEdge(w)}b.remove()}for(var R in g)Object.prototype.hasOwnProperty.call(g,R)&&this._restoreEdge(g[R]);delete this.body.nodes[t],!0===i&&this.body.emitter.emit("_dataChanged")}},{key:"getNodesInCluster",value:function(t){var e=[];if(!0===this.isCluster(t)){var i=this.body.nodes[t].containedNodes;for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.push(this.body.nodes[o].id)}return e}},{key:"findNode",value:function(t){for(var e,i=[],o=0;void 0!==this.clusteredNodes[t]&&o<100;){if(void 0===(e=this.body.nodes[t]))return[];i.push(e.id),t=this.clusteredNodes[t].clusterId,o++}return void 0===(e=this.body.nodes[t])?[]:(i.push(e.id),Cv(i).call(i),i)}},{key:"updateClusteredNode",value:function(t,e){if(void 0===t)throw new Error("No clusteredNodeId supplied to updateClusteredNode.");if(void 0===e)throw new Error("No newOptions supplied to updateClusteredNode.");if(void 0===this.body.nodes[t])throw new Error("The clusteredNodeId supplied to updateClusteredNode does not exist.");this.body.nodes[t].setOptions(e),this.body.emitter.emit("_dataChanged")}},{key:"updateEdge",value:function(t,e){if(void 0===t)throw new Error("No startEdgeId supplied to updateEdge.");if(void 0===e)throw new Error("No newOptions supplied to updateEdge.");if(void 0===this.body.edges[t])throw new Error("The startEdgeId supplied to updateEdge does not exist.");for(var i=this.getClusteredEdges(t),o=0;o<i.length;o++)this.body.edges[i[o]].setOptions(e);this.body.emitter.emit("_dataChanged")}},{key:"getClusteredEdges",value:function(t){for(var e=[],i=0;void 0!==t&&void 0!==this.body.edges[t]&&i<100;)e.push(this.body.edges[t].id),t=this.body.edges[t].edgeReplacedById,i++;return Cv(e).call(e),e}},{key:"getBaseEdge",value:function(t){return this.getBaseEdges(t)[0]}},{key:"getBaseEdges",value:function(t){for(var e=[t],i=[],o=[],n=0;e.length>0&&n<100;){var r=e.pop();if(void 0!==r){var s=this.body.edges[r];if(void 0!==s){n++;var a=s.clusteringEdgeReplacingIds;if(void 0===a)o.push(r);else for(var g=0;g<a.length;++g){var l=a[g];-1===Wm(e).call(e,a)&&-1===Wm(i).call(i,a)&&e.push(l)}i.push(r)}}}return o}},{key:"_getConnectedId",value:function(t,e){return t.toId!=e?t.toId:(t.fromId,t.fromId)}},{key:"_getHubSize",value:function(){for(var t=0,e=0,i=0,o=0,n=0;n<this.body.nodeIndices.length;n++){var r=this.body.nodes[this.body.nodeIndices[n]];r.edges.length>o&&(o=r.edges.length),t+=r.edges.length,e+=Math.pow(r.edges.length,2),i+=1}t/=i;var s=(e/=i)-Math.pow(t,2),a=Math.sqrt(s),g=Math.floor(t+2*a);return g>o&&(g=o),g}},{key:"_createClusteredEdge",value:function(t,e,i,o,n){var r=fL.cloneOptions(i,"edge");S_(r,o),r.from=t,r.to=e,r.id="clusterEdge:"+dM(),void 0!==n&&S_(r,n);var s=this.body.functions.createEdge(r);return s.clusteringEdgeReplacingIds=[i.id],s.connect(),this.body.edges[s.id]=s,s}},{key:"_clusterEdges",value:function(t,e,i,o){if(e instanceof aL){var n=e,r={};r[n.id]=n,e=r}if(t instanceof vN){var s=t,a={};a[s.id]=s,t=a}if(null==i)throw new Error("_clusterEdges: parameter clusterNode required");for(var g in void 0===o&&(o=i.clusterEdgeProperties),this._createClusterEdges(t,e,i,o),e)if(Object.prototype.hasOwnProperty.call(e,g)&&void 0!==this.body.edges[g]){var l=this.body.edges[g];this._backupEdgeOptions(l),l.setOptions({physics:!1})}for(var h in t)Object.prototype.hasOwnProperty.call(t,h)&&(this.clusteredNodes[h]={clusterId:i.id,node:this.body.nodes[h]},this.body.nodes[h].setOptions({physics:!1}))}},{key:"_getClusterNodeForNode",value:function(t){if(void 0!==t){var e=this.clusteredNodes[t];if(void 0!==e){var i=e.clusterId;if(void 0!==i)return this.body.nodes[i]}}}},{key:"_filter",value:function(t,e){var i=[];return D_(t,(function(t){e(t)&&i.push(t)})),i}},{key:"_updateState",value:function(){var t,e=this,i=[],o={},n=function(t){D_(e.body.nodes,(function(e){!0===e.isCluster&&t(e)}))};for(t in this.clusteredNodes)Object.prototype.hasOwnProperty.call(this.clusteredNodes,t)&&void 0===this.body.nodes[t]&&i.push(t);n((function(t){for(var e=0;e<i.length;e++)delete t.containedNodes[i[e]]}));for(var r=0;r<i.length;r++)delete this.clusteredNodes[i[r]];D_(this.clusteredEdges,(function(t){var i=e.body.edges[t];void 0!==i&&i.endPointsValid()||(o[t]=t)})),n((function(t){D_(t.containedEdges,(function(t,e){t.endPointsValid()||o[e]||(o[e]=e)}))})),D_(this.body.edges,(function(t,i){var n=!0,r=t.clusteringEdgeReplacingIds;if(void 0!==r){var s=0;D_(r,(function(t){var i=e.body.edges[t];void 0!==i&&i.endPointsValid()&&(s+=1)})),n=s>0}t.endPointsValid()&&n||(o[i]=i)})),n((function(t){D_(o,(function(i){delete t.containedEdges[i],D_(t.edges,(function(n,r){n.id!==i?n.clusteringEdgeReplacingIds=e._filter(n.clusteringEdgeReplacingIds,(function(t){return!o[t]})):t.edges[r]=null})),t.edges=e._filter(t.edges,(function(t){return null!==t}))}))})),D_(o,(function(t){delete e.clusteredEdges[t]})),D_(o,(function(t){delete e.body.edges[t]})),D_(Uf(this.body.edges),(function(t){var i=e.body.edges[t],o=e._isClusteredNode(i.fromId)||e._isClusteredNode(i.toId);if(o!==e._isClusteredEdge(i.id))if(o){var n=e._getClusterNodeForNode(i.fromId);void 0!==n&&e._clusterEdges(e.body.nodes[i.fromId],i,n);var r=e._getClusterNodeForNode(i.toId);void 0!==r&&e._clusterEdges(e.body.nodes[i.toId],i,r)}else delete e._clusterEdges[t],e._restoreEdge(i)}));for(var s=!1,a=!0,g=function(){var t=[];n((function(e){var i=Uf(e.containedNodes).length,o=!0===e.options.allowSingleNodeCluster;(o&&i<1||!o&&i<2)&&t.push(e.id)}));for(var i=0;i<t.length;++i)e.openCluster(t[i],{},!1);a=t.length>0,s=s||a};a;)g();s&&this._updateState()}},{key:"_isClusteredNode",value:function(t){return void 0!==this.clusteredNodes[t]}},{key:"_isClusteredEdge",value:function(t){return void 0!==this.clusteredEdges[t]}}]),t}(),bL=function(){function t(e,i){var o;yd(this,t),void 0!==window&&(o=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),window.requestAnimationFrame=void 0===o?function(t){t()}:o,this.body=e,this.canvas=i,this.redrawRequested=!1,this.renderTimer=void 0,this.requiresTimeout=!0,this.renderingActive=!1,this.renderRequests=0,this.allowRedraw=!0,this.dragging=!1,this.zooming=!1,this.options={},this.defaultOptions={hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1},Lg(this.options,this.defaultOptions),this._determineBrowserMethod(),this.bindEventListeners()}return Sp(t,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.on("dragStart",(function(){e.dragging=!0})),this.body.emitter.on("dragEnd",(function(){e.dragging=!1})),this.body.emitter.on("zoom",(function(){e.zooming=!0,window.clearTimeout(e.zoomTimeoutId),e.zoomTimeoutId=fb((function(){var t;e.zooming=!1,il(t=e._requestRedraw).call(t,e)()}),250)})),this.body.emitter.on("_resizeNodes",(function(){e._resizeNodes()})),this.body.emitter.on("_redraw",(function(){!1===e.renderingActive&&e._redraw()})),this.body.emitter.on("_blockRedraw",(function(){e.allowRedraw=!1})),this.body.emitter.on("_allowRedraw",(function(){e.allowRedraw=!0,e.redrawRequested=!1})),this.body.emitter.on("_requestRedraw",il(t=this._requestRedraw).call(t,this)),this.body.emitter.on("_startRendering",(function(){e.renderRequests+=1,e.renderingActive=!0,e._startRendering()})),this.body.emitter.on("_stopRendering",(function(){e.renderRequests-=1,e.renderingActive=e.renderRequests>0,e.renderTimer=void 0})),this.body.emitter.on("destroy",(function(){e.renderRequests=0,e.allowRedraw=!1,e.renderingActive=!1,!0===e.requiresTimeout?clearTimeout(e.renderTimer):window.cancelAnimationFrame(e.renderTimer),e.body.emitter.off()}))}},{key:"setOptions",value:function(t){void 0!==t&&k_(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag"],this.options,t)}},{key:"_requestNextFrame",value:function(t,e){if("undefined"!=typeof window){var i,o=window;return!0===this.requiresTimeout?i=fb(t,e):o.requestAnimationFrame&&(i=o.requestAnimationFrame(t)),i}}},{key:"_startRendering",value:function(){var t;!0===this.renderingActive&&void 0===this.renderTimer&&(this.renderTimer=this._requestNextFrame(il(t=this._renderStep).call(t,this),this.simulationInterval))}},{key:"_renderStep",value:function(){!0===this.renderingActive&&(this.renderTimer=void 0,!0===this.requiresTimeout&&this._startRendering(),this._redraw(),!1===this.requiresTimeout&&this._startRendering())}},{key:"redraw",value:function(){this.body.emitter.emit("setSize"),this._redraw()}},{key:"_requestRedraw",value:function(){var t=this;!0!==this.redrawRequested&&!1===this.renderingActive&&!0===this.allowRedraw&&(this.redrawRequested=!0,this._requestNextFrame((function(){t._redraw(!1)}),0))}},{key:"_redraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!0===this.allowRedraw){this.body.emitter.emit("initRedraw"),this.redrawRequested=!1;var e={drawExternalLabels:null};0!==this.canvas.frame.canvas.width&&0!==this.canvas.frame.canvas.height||this.canvas.setSize(),this.canvas.setTransform();var i=this.canvas.getContext(),o=this.canvas.frame.canvas.clientWidth,n=this.canvas.frame.canvas.clientHeight;if(i.clearRect(0,0,o,n),0===this.canvas.frame.clientWidth)return;if(i.save(),i.translate(this.body.view.translation.x,this.body.view.translation.y),i.scale(this.body.view.scale,this.body.view.scale),i.beginPath(),this.body.emitter.emit("beforeDrawing",i),i.closePath(),!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawEdges(i),!1===this.dragging||!0===this.dragging&&!1===this.options.hideNodesOnDrag){var r=this._drawNodes(i,t).drawExternalLabels;e.drawExternalLabels=r}!1===t&&(!1===this.dragging||!0===this.dragging&&!1===this.options.hideEdgesOnDrag)&&(!1===this.zooming||!0===this.zooming&&!1===this.options.hideEdgesOnZoom)&&this._drawArrows(i),null!=e.drawExternalLabels&&e.drawExternalLabels(),!1===t&&this._drawSelectionBox(i),i.beginPath(),this.body.emitter.emit("afterDrawing",i),i.closePath(),i.restore(),!0===t&&i.clearRect(0,0,o,n)}}},{key:"_resizeNodes",value:function(){this.canvas.setTransform();var t=this.canvas.getContext();t.save(),t.translate(this.body.view.translation.x,this.body.view.translation.y),t.scale(this.body.view.scale,this.body.view.scale);var e,i=this.body.nodes;for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&((e=i[o]).resize(t),e.updateBoundingBox(t,e.selected));t.restore()}},{key:"_drawNodes",value:function(t){for(var e,i,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.body.nodes,r=this.body.nodeIndices,s=[],a=[],g=this.canvas.DOMtoCanvas({x:-20,y:-20}),l=this.canvas.DOMtoCanvas({x:this.canvas.frame.canvas.clientWidth+20,y:this.canvas.frame.canvas.clientHeight+20}),h={top:g.y,left:g.x,bottom:l.y,right:l.x},c=[],u=0;u<r.length;u++)if((e=n[r[u]]).hover)a.push(r[u]);else if(e.isSelected())s.push(r[u]);else if(!0===o){var d=e.draw(t);null!=d.drawExternalLabel&&c.push(d.drawExternalLabel)}else if(!0===e.isBoundingBoxOverlappingWith(h)){var A=e.draw(t);null!=A.drawExternalLabel&&c.push(A.drawExternalLabel)}else e.updateBoundingBox(t,e.selected);var I=s.length,C=a.length;for(i=0;i<I;i++){var p=(e=n[s[i]]).draw(t);null!=p.drawExternalLabel&&c.push(p.drawExternalLabel)}for(i=0;i<C;i++){var f=(e=n[a[i]]).draw(t);null!=f.drawExternalLabel&&c.push(f.drawExternalLabel)}return{drawExternalLabels:function(){for(var t=0,e=c;t<e.length;t++)(0,e[t])()}}}},{key:"_drawEdges",value:function(t){for(var e=this.body.edges,i=this.body.edgeIndices,o=0;o<i.length;o++){var n=e[i[o]];!0===n.connected&&n.draw(t)}}},{key:"_drawArrows",value:function(t){for(var e=this.body.edges,i=this.body.edgeIndices,o=0;o<i.length;o++){var n=e[i[o]];!0===n.connected&&n.drawArrows(t)}}},{key:"_determineBrowserMethod",value:function(){if("undefined"!=typeof window){var t=navigator.userAgent.toLowerCase();this.requiresTimeout=!1,(-1!=Wm(t).call(t,"msie 9.0")||-1!=Wm(t).call(t,"safari")&&Wm(t).call(t,"chrome")<=-1)&&(this.requiresTimeout=!0)}else this.requiresTimeout=!0}},{key:"_drawSelectionBox",value:function(t){if(this.body.selectionBox.show){t.beginPath();var e=this.body.selectionBox.position.end.x-this.body.selectionBox.position.start.x,i=this.body.selectionBox.position.end.y-this.body.selectionBox.position.start.y;t.rect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,i),t.fillStyle="rgba(151, 194, 252, 0.2)",t.fillRect(this.body.selectionBox.position.start.x,this.body.selectionBox.position.start.y,e,i),t.strokeStyle="rgba(151, 194, 252, 1)",t.stroke()}else t.closePath()}}]),t}(),yL=_n(yr.setInterval);function _L(t,e){e.inputHandler=function(t){t.isFirst&&e(t)},t.on("hammer.input",e.inputHandler)}function TL(t,e){return e.inputHandler=function(t){t.isFinal&&e(t)},t.on("hammer.input",e.inputHandler)}var EL=function(){function t(e){yd(this,t),this.body=e,this.pixelRatio=1,this.cameraState={},this.initialized=!1,this.canvasViewCenter={},this._cleanupCallbacks=[],this.options={},this.defaultOptions={autoResize:!0,height:"100%",width:"100%"},Lg(this.options,this.defaultOptions),this.bindEventListeners()}return Sp(t,[{key:"bindEventListeners",value:function(){var t,e=this;this.body.emitter.once("resize",(function(t){0!==t.width&&(e.body.view.translation.x=.5*t.width),0!==t.height&&(e.body.view.translation.y=.5*t.height)})),this.body.emitter.on("setSize",il(t=this.setSize).call(t,this)),this.body.emitter.on("destroy",(function(){e.hammerFrame.destroy(),e.hammer.destroy(),e._cleanUp()}))}},{key:"setOptions",value:function(t){var e=this;if(void 0!==t&&k_(["width","height","autoResize"],this.options,t),this._cleanUp(),!0===this.options.autoResize){var i;if(window.ResizeObserver){var o=new ResizeObserver((function(){!0===e.setSize()&&e.body.emitter.emit("_requestRedraw")})),n=this.frame;o.observe(n),this._cleanupCallbacks.push((function(){o.unobserve(n)}))}else{var r=yL((function(){!0===e.setSize()&&e.body.emitter.emit("_requestRedraw")}),1e3);this._cleanupCallbacks.push((function(){clearInterval(r)}))}var s=il(i=this._onResize).call(i,this);window.addEventListener("resize",s),this._cleanupCallbacks.push((function(){window.removeEventListener("resize",s)}))}}},{key:"_cleanUp",value:function(){var t,e,i;sv(t=Cv(e=$v(i=this._cleanupCallbacks).call(i,0)).call(e)).call(t,(function(t){try{t()}catch(t){console.error(t)}}))}},{key:"_onResize",value:function(){this.setSize(),this.body.emitter.emit("_redraw")}},{key:"_getCameraState",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.pixelRatio;!0===this.initialized&&(this.cameraState.previousWidth=this.frame.canvas.width/t,this.cameraState.previousHeight=this.frame.canvas.height/t,this.cameraState.scale=this.body.view.scale,this.cameraState.position=this.DOMtoCanvas({x:.5*this.frame.canvas.width/t,y:.5*this.frame.canvas.height/t}))}},{key:"_setCameraState",value:function(){if(void 0!==this.cameraState.scale&&0!==this.frame.canvas.clientWidth&&0!==this.frame.canvas.clientHeight&&0!==this.pixelRatio&&this.cameraState.previousWidth>0&&this.cameraState.previousHeight>0){var t=this.frame.canvas.width/this.pixelRatio/this.cameraState.previousWidth,e=this.frame.canvas.height/this.pixelRatio/this.cameraState.previousHeight,i=this.cameraState.scale;1!=t&&1!=e?i=.5*this.cameraState.scale*(t+e):1!=t?i=this.cameraState.scale*t:1!=e&&(i=this.cameraState.scale*e),this.body.view.scale=i;var o=this.DOMtoCanvas({x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight}),n={x:o.x-this.cameraState.position.x,y:o.y-this.cameraState.position.y};this.body.view.translation.x+=n.x*this.body.view.scale,this.body.view.translation.y+=n.y*this.body.view.scale}}},{key:"_prepareValue",value:function(t){if("number"==typeof t)return t+"px";if("string"==typeof t){if(-1!==Wm(t).call(t,"%")||-1!==Wm(t).call(t,"px"))return t;if(-1===Wm(t).call(t,"%"))return t+"px"}throw new Error("Could not use the value supplied for width or height:"+t)}},{key:"_create",value:function(){for(;this.body.container.hasChildNodes();)this.body.container.removeChild(this.body.container.firstChild);if(this.frame=document.createElement("div"),this.frame.className="vis-network",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.tabIndex=0,this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),this.frame.canvas.getContext)this._setPixelRatio(),this.setTransform();else{var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerText="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}this.body.container.appendChild(this.frame),this.body.view.scale=1,this.body.view.translation={x:.5*this.frame.canvas.clientWidth,y:.5*this.frame.canvas.clientHeight},this._bindHammer()}},{key:"_bindHammer",value:function(){var t=this;void 0!==this.hammer&&this.hammer.destroy(),this.drag={},this.pinch={},this.hammer=new tT(this.frame.canvas),this.hammer.get("pinch").set({enable:!0}),this.hammer.get("pan").set({threshold:5,direction:tT.DIRECTION_ALL}),_L(this.hammer,(function(e){t.body.eventListeners.onTouch(e)})),this.hammer.on("tap",(function(e){t.body.eventListeners.onTap(e)})),this.hammer.on("doubletap",(function(e){t.body.eventListeners.onDoubleTap(e)})),this.hammer.on("press",(function(e){t.body.eventListeners.onHold(e)})),this.hammer.on("panstart",(function(e){t.body.eventListeners.onDragStart(e)})),this.hammer.on("panmove",(function(e){t.body.eventListeners.onDrag(e)})),this.hammer.on("panend",(function(e){t.body.eventListeners.onDragEnd(e)})),this.hammer.on("pinch",(function(e){t.body.eventListeners.onPinch(e)})),this.frame.canvas.addEventListener("wheel",(function(e){t.body.eventListeners.onMouseWheel(e)})),this.frame.canvas.addEventListener("mousemove",(function(e){t.body.eventListeners.onMouseMove(e)})),this.frame.canvas.addEventListener("contextmenu",(function(e){t.body.eventListeners.onContext(e)})),this.hammerFrame=new tT(this.frame),TL(this.hammerFrame,(function(e){t.body.eventListeners.onRelease(e)}))}},{key:"setSize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.options.width,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.height;t=this._prepareValue(t),e=this._prepareValue(e);var i=!1,o=this.frame.canvas.width,n=this.frame.canvas.height,r=this.pixelRatio;if(this._setPixelRatio(),t!=this.options.width||e!=this.options.height||this.frame.style.width!=t||this.frame.style.height!=e)this._getCameraState(r),this.frame.style.width=t,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),this.frame.canvas.height=Math.round(this.frame.canvas.clientHeight*this.pixelRatio),this.options.width=t,this.options.height=e,this.canvasViewCenter={x:.5*this.frame.clientWidth,y:.5*this.frame.clientHeight},i=!0;else{var s=Math.round(this.frame.canvas.clientWidth*this.pixelRatio),a=Math.round(this.frame.canvas.clientHeight*this.pixelRatio);this.frame.canvas.width===s&&this.frame.canvas.height===a||this._getCameraState(r),this.frame.canvas.width!==s&&(this.frame.canvas.width=s,i=!0),this.frame.canvas.height!==a&&(this.frame.canvas.height=a,i=!0)}return!0===i&&(this.body.emitter.emit("resize",{width:Math.round(this.frame.canvas.width/this.pixelRatio),height:Math.round(this.frame.canvas.height/this.pixelRatio),oldWidth:Math.round(o/this.pixelRatio),oldHeight:Math.round(n/this.pixelRatio)}),this._setCameraState()),this.initialized=!0,i}},{key:"getContext",value:function(){return this.frame.canvas.getContext("2d")}},{key:"_determinePixelRatio",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");var e=1;return"undefined"!=typeof window&&(e=window.devicePixelRatio||1),e/(t.webkitBackingStorePixelRatio||t.mozBackingStorePixelRatio||t.msBackingStorePixelRatio||t.oBackingStorePixelRatio||t.backingStorePixelRatio||1)}},{key:"_setPixelRatio",value:function(){this.pixelRatio=this._determinePixelRatio()}},{key:"setTransform",value:function(){var t=this.getContext();if(void 0===t)throw new Error("Could not get canvax context");t.setTransform(this.pixelRatio,0,0,this.pixelRatio,0,0)}},{key:"_XconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.x)/this.body.view.scale}},{key:"_XconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.x}},{key:"_YconvertDOMtoCanvas",value:function(t){return(t-this.body.view.translation.y)/this.body.view.scale}},{key:"_YconvertCanvasToDOM",value:function(t){return t*this.body.view.scale+this.body.view.translation.y}},{key:"canvasToDOM",value:function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}}},{key:"DOMtoCanvas",value:function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}}}]),t}(),wL=function(){function t(e,i){var o,n,r=this;yd(this,t),this.body=e,this.canvas=i,this.animationSpeed=1/this.renderRefreshRate,this.animationEasingFunction="easeInOutQuint",this.easingTime=0,this.sourceScale=0,this.targetScale=0,this.sourceTranslation=0,this.targetTranslation=0,this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0,this.touchTime=0,this.viewFunction=void 0,this.body.emitter.on("fit",il(o=this.fit).call(o,this)),this.body.emitter.on("animationFinished",(function(){r.body.emitter.emit("_stopRendering")})),this.body.emitter.on("unlockNode",il(n=this.releaseNode).call(n,this))}return Sp(t,[{key:"setOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.options=t}},{key:"fit",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=function(t,e){var i=Lg({nodes:e,minZoomLevel:Number.MIN_VALUE,maxZoomLevel:1},null!=t?t:{});if(!Nf(i.nodes))throw new TypeError("Nodes has to be an array of ids.");if(0===i.nodes.length&&(i.nodes=e),!("number"==typeof i.minZoomLevel&&i.minZoomLevel>0))throw new TypeError("Min zoom level has to be a number higher than zero.");if(!("number"==typeof i.maxZoomLevel&&i.minZoomLevel<=i.maxZoomLevel))throw new TypeError("Max zoom level has to be a number higher than min zoom level.");return i}(t,this.body.nodeIndices);var i,o,n=this.canvas.frame.canvas.clientWidth,r=this.canvas.frame.canvas.clientHeight;if(0===n||0===r)o=1,i=fL.getRange(this.body.nodes,t.nodes);else if(!0===e){var s=0;for(var a in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,a)&&!0===this.body.nodes[a].predefinedPosition&&(s+=1);if(s>.5*this.body.nodeIndices.length)return void this.fit(t,!1);i=fL.getRange(this.body.nodes,t.nodes),o=12.662/(this.body.nodeIndices.length+7.4147)+.0964822,o*=Math.min(n/600,r/600)}else{this.body.emitter.emit("_resizeNodes"),i=fL.getRange(this.body.nodes,t.nodes);var g=n/(1.1*Math.abs(i.maxX-i.minX)),l=r/(1.1*Math.abs(i.maxY-i.minY));o=g<=l?g:l}o>t.maxZoomLevel?o=t.maxZoomLevel:o<t.minZoomLevel&&(o=t.minZoomLevel);var h={position:fL.findCenter(i),scale:o,animation:t.animation};this.moveTo(h)}},{key:"focus",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0!==this.body.nodes[t]){var i={x:this.body.nodes[t].x,y:this.body.nodes[t].y};e.position=i,e.lockedOnNode=t,this.moveTo(e)}else console.error("Node: "+t+" cannot be found.")}},{key:"moveTo",value:function(t){if(void 0!==t){if(null!=t.offset){if(null!=t.offset.x){if(t.offset.x=+t.offset.x,!uw(t.offset.x))throw new TypeError('The option "offset.x" has to be a finite number.')}else t.offset.x=0;if(null!=t.offset.y){if(t.offset.y=+t.offset.y,!uw(t.offset.y))throw new TypeError('The option "offset.y" has to be a finite number.')}else t.offset.x=0}else t.offset={x:0,y:0};if(null!=t.position){if(null!=t.position.x){if(t.position.x=+t.position.x,!uw(t.position.x))throw new TypeError('The option "position.x" has to be a finite number.')}else t.position.x=0;if(null!=t.position.y){if(t.position.y=+t.position.y,!uw(t.position.y))throw new TypeError('The option "position.y" has to be a finite number.')}else t.position.x=0}else t.position=this.getViewPosition();if(null!=t.scale){if(t.scale=+t.scale,!(t.scale>0))throw new TypeError('The option "scale" has to be a number greater than zero.')}else t.scale=this.body.view.scale;void 0===t.animation&&(t.animation={duration:0}),!1===t.animation&&(t.animation={duration:0}),!0===t.animation&&(t.animation={}),void 0===t.animation.duration&&(t.animation.duration=1e3),void 0===t.animation.easingFunction&&(t.animation.easingFunction="easeInOutQuad"),this.animateView(t)}else t={}}},{key:"animateView",value:function(t){if(void 0!==t){this.animationEasingFunction=t.animation.easingFunction,this.releaseNode(),!0===t.locked&&(this.lockedOnNodeId=t.lockedOnNode,this.lockedOnNodeOffset=t.offset),0!=this.easingTime&&this._transitionRedraw(!0),this.sourceScale=this.body.view.scale,this.sourceTranslation=this.body.view.translation,this.targetScale=t.scale,this.body.view.scale=this.targetScale;var e,i,o=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),n=o.x-t.position.x,r=o.y-t.position.y;this.targetTranslation={x:this.sourceTranslation.x+n*this.targetScale+t.offset.x,y:this.sourceTranslation.y+r*this.targetScale+t.offset.y},0===t.animation.duration?null!=this.lockedOnNodeId?(this.viewFunction=il(e=this._lockedRedraw).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction)):(this.body.view.scale=this.targetScale,this.body.view.translation=this.targetTranslation,this.body.emitter.emit("_requestRedraw")):(this.animationSpeed=1/(60*t.animation.duration*.001)||1/60,this.animationEasingFunction=t.animation.easingFunction,this.viewFunction=il(i=this._transitionRedraw).call(i,this),this.body.emitter.on("initRedraw",this.viewFunction),this.body.emitter.emit("_startRendering"))}}},{key:"_lockedRedraw",value:function(){var t=this.body.nodes[this.lockedOnNodeId].x,e=this.body.nodes[this.lockedOnNodeId].y,i=this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight}),o=i.x-t,n=i.y-e,r=this.body.view.translation,s={x:r.x+o*this.body.view.scale+this.lockedOnNodeOffset.x,y:r.y+n*this.body.view.scale+this.lockedOnNodeOffset.y};this.body.view.translation=s}},{key:"releaseNode",value:function(){void 0!==this.lockedOnNodeId&&void 0!==this.viewFunction&&(this.body.emitter.off("initRedraw",this.viewFunction),this.lockedOnNodeId=void 0,this.lockedOnNodeOffset=void 0)}},{key:"_transitionRedraw",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.easingTime+=this.animationSpeed,this.easingTime=!0===t?1:this.easingTime;var e,i=V_[this.animationEasingFunction](this.easingTime);(this.body.view.scale=this.sourceScale+(this.targetScale-this.sourceScale)*i,this.body.view.translation={x:this.sourceTranslation.x+(this.targetTranslation.x-this.sourceTranslation.x)*i,y:this.sourceTranslation.y+(this.targetTranslation.y-this.sourceTranslation.y)*i},this.easingTime>=1)&&(this.body.emitter.off("initRedraw",this.viewFunction),this.easingTime=0,null!=this.lockedOnNodeId&&(this.viewFunction=il(e=this._lockedRedraw).call(e,this),this.body.emitter.on("initRedraw",this.viewFunction)),this.body.emitter.emit("animationFinished"))}},{key:"getScale",value:function(){return this.body.view.scale}},{key:"getViewPosition",value:function(){return this.canvas.DOMtoCanvas({x:.5*this.canvas.frame.canvas.clientWidth,y:.5*this.canvas.frame.canvas.clientHeight})}}]),t}();function kL(t){var e,i=t&&t.preventDefault||!1,o=t&&t.container||window,n={},r={keydown:{},keyup:{}},s={};for(e=97;e<=122;e++)s[String.fromCharCode(e)]={code:e-97+65,shift:!1};for(e=65;e<=90;e++)s[String.fromCharCode(e)]={code:e,shift:!0};for(e=0;e<=9;e++)s[""+e]={code:48+e,shift:!1};for(e=1;e<=12;e++)s["F"+e]={code:111+e,shift:!1};for(e=0;e<=9;e++)s["num"+e]={code:96+e,shift:!1};s["num*"]={code:106,shift:!1},s["num+"]={code:107,shift:!1},s["num-"]={code:109,shift:!1},s["num/"]={code:111,shift:!1},s["num."]={code:110,shift:!1},s.left={code:37,shift:!1},s.up={code:38,shift:!1},s.right={code:39,shift:!1},s.down={code:40,shift:!1},s.space={code:32,shift:!1},s.enter={code:13,shift:!1},s.shift={code:16,shift:void 0},s.esc={code:27,shift:!1},s.backspace={code:8,shift:!1},s.tab={code:9,shift:!1},s.ctrl={code:17,shift:!1},s.alt={code:18,shift:!1},s.delete={code:46,shift:!1},s.pageup={code:33,shift:!1},s.pagedown={code:34,shift:!1},s["="]={code:187,shift:!1},s["-"]={code:189,shift:!1},s["]"]={code:221,shift:!1},s["["]={code:219,shift:!1};var a=function(t){l(t,"keydown")},g=function(t){l(t,"keyup")},l=function(t,e){if(void 0!==r[e][t.keyCode]){for(var o=r[e][t.keyCode],n=0;n<o.length;n++)(void 0===o[n].shift||1==o[n].shift&&1==t.shiftKey||0==o[n].shift&&0==t.shiftKey)&&o[n].fn(t);1==i&&t.preventDefault()}};return n.bind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);void 0===r[i][s[t].code]&&(r[i][s[t].code]=[]),r[i][s[t].code].push({fn:e,shift:s[t].shift})},n.bindAll=function(t,e){for(var i in void 0===e&&(e="keydown"),s)s.hasOwnProperty(i)&&n.bind(i,t,e)},n.getKey=function(t){for(var e in s)if(s.hasOwnProperty(e)){if(1==t.shiftKey&&1==s[e].shift&&t.keyCode==s[e].code)return e;if(0==t.shiftKey&&0==s[e].shift&&t.keyCode==s[e].code)return e;if(t.keyCode==s[e].code&&"shift"==e)return e}return"unknown key, currently not supported"},n.unbind=function(t,e,i){if(void 0===i&&(i="keydown"),void 0===s[t])throw new Error("unsupported key: "+t);if(void 0!==e){var o=[],n=r[i][s[t].code];if(void 0!==n)for(var a=0;a<n.length;a++)n[a].fn==e&&n[a].shift==s[t].shift||o.push(r[i][s[t].code][a]);r[i][s[t].code]=o}else r[i][s[t].code]=[]},n.reset=function(){r={keydown:{},keyup:{}}},n.destroy=function(){r={keydown:{},keyup:{}},o.removeEventListener("keydown",a,!0),o.removeEventListener("keyup",g,!0)},o.addEventListener("keydown",a,!0),o.addEventListener("keyup",g,!0),n}ll("div.vis-network div.vis-navigation div.vis-button {\n  width: 34px;\n  height: 34px;\n  -moz-border-radius: 17px;\n  border-radius: 17px;\n  position: absolute;\n  display: inline-block;\n  background-position: 2px 2px;\n  background-repeat: no-repeat;\n  cursor: pointer;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\ndiv.vis-network div.vis-navigation div.vis-button:hover {\n  box-shadow: 0 0 3px 3px rgba(56, 207, 21, 0.3);\n}\n\ndiv.vis-network div.vis-navigation div.vis-button:active {\n  box-shadow: 0 0 1px 3px rgba(56, 207, 21, 0.95);\n}\n\ndiv.vis-network div.vis-navigation div.vis-button.vis-up {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABphJREFUeNqcV2twU9cR/nbPlVTHxpKRbNnBLyEbPyJisLEcPwgwUMKQtjNJAzNJZkgNNJOmJaZAaDKlxaXDTIBAcJtOOzSYKSkdiimhAdIMjyT4bYgBYxA2BgcUQPLrCiGDR4qt2x+yXTASFt1/957d7zt3z3d39xDCMQWUfgAz/RI/T4pSTAJpAGL8rECAXX7QFQGq9wOHOxYO1oCgjAdJj1wtB095Giv9TFuZAIWHAziATMPhTAwiHgUkYPXFJu92lMP/2MTpB1AKUCVEgNAcleUo1M+2F8TO6crSTncb1QleAOj2OTSX3Ge1p+Va42m5JrnzbnsCE8Ov+EHgpa0LPLvCJjZ/whuIlN8wAcXG+e1LUn9hm238QU84p1Ld83nsXvuO7Lq+LzKYGAT6/dn58m/HJTYf4O3EShkT8Irpzab1Uz9sGevT5+tWn+j6NB4A5hp/5NSr43xjfd5rW5tT9e3OAhCBiCua5/WsDEls/hdvYklZSwDefmrT8eXmtzuDkb5YZ33p9ndylICAVjWxf39xw/5g5Luv/9H84ZWNcwNEypZT87rXjqyJB85UYDMJYN3U7UdLJ6/6JlgqV517teRqf9uTlug8e1zEk27HgD22o98WsTBh8fWxvjm6ApdONbGvse8LM5NUPOm1Cfabuz3nACAgxX0QEFTJAnjNvLJ+Sepb14KRHnN+Ev+1XJOhZs3Qu1mbG97J2NQgsXroa1dtxrGuf8cHi1mUtPTay0lv1DMJSCRVLtoX+FgGgDQNysBAcez89l9nbbsQSji7rlXkEhjPxb/QatHOcFu0M9zz419oFSRhj/3PuaHiyqasv1Con9NGxHAYUsoCxAqImbYSgCWmFbZQwdsur7N0eC4m6tT6/jUZ750Zeb82c+OZGLWh/2p/W+Kfrmy0hIp/aVKpTSIJEqu2QgFx2iE8CwDp0RbH7Ljng/4yXr+XT3QdyhYsodS0slGr0g2OrEUK7eCrKW82SqzCVz3/yfb6vRwM4xn9rN7JkRkOQRLmfJn2LBPxQjDBqp9lD7XbX7X8pKTP160zR2bdeiX5jYeU/nLSTztNkem3XL5eXbltRUkonBxdgZ2IIUmahUxERQSCVT+rK5hzQ89xQ6P8VaaK1f5VmRvqQ4G+lba+nlnlb5brMhvlk7FBiaPzuwQEmEQhg5BOxMjWTncHc2501cQLkjDTsMCWpyuRQxFP0xXIJfp5FyVW4Zy7KajC06ItbiIGg6ZITBxDxIgbrr1jTSM0fibGIHz8O9sKK0GAibEua9spANh4aY2VmcEg+DEkiBgR/L2hYFgGtcErkQQAMVJgBxyy9hboZzv32v+Kpr7qbEECTAIMAoaJa3qPTmNiiAAgJAjk6J5xhu6HDAIgQYGLmI29PocmMcI8MNYvT1ckfzD9H/ub5br4e4Me9WfOKqtyX6Ud2cwC449PRamifDm6Auc0rTXokci+Xo1EAgBckiDuYGLjpTvntcGIA+SFcp6uUAaAI879VhWrRteYAqn/edq758brXJ1327QMhgJcZjA3EBjNrgZjOG1PkAjyTGENMjZPq5ECQ0MDE9ERBqFZrk0OJ3i4x/7vyIjBxGERt3takgVJEAp9xq3f769WiPDNvSsJdT3HDOEASPelmoBRYT3Kzt5uMtwauJEgSOCpwrk1DIJCoNUMwj9v7MweP9XSQ8/hJPp496fZTAICvLqcyv2B7nRbrgCA03JN5h8ub7A8VqpB437xHvsOy3l3cyaB4L2uqxhti1WLMcSgZQCw7+bOooO3Pk4JBZIYYXISMV5sKH59UePM10GESRGpIf/bE92HU452HywSJIGIllctrhp6YAK5+fHds0lLtJFMXNwkV6fFqA29mROefqiMJj1h6um4a5vY/92dKGaBxIhU5zJTWW2cJmEgGOmeb3c8FxAfb9mdf2RzyGGv5MvU7QwuEySwKHFp/c/M71zA/2F7b1RajnYdLAqMukMVu2YcfmDYE2MD7H+7/Xlq6cRIJqm4zXM+qd3TGjVBir43KSLlXjiELe5TsX+3/yW/ST45PaAHbKmccWh12AP93JNZywj0kSABIobpiXRHjtZ6faout2tyZMadGLXBCxBcvl6NfaAz+tKdFmObpzWl2+tIIBACYy0t/yj34M7HvsKUK+CGassvicX7alYDwwq+vykIEqPVa+Q9gdYk5+V+UE7lj3+FGbuBM/X5JUT8QwIVSSSZiTgmoFR2MfiqYFFPfjpkyrfWPopwxP47AP1pK1g9/dqeAAAAAElFTkSuQmCC');\n  bottom: 50px;\n  left: 55px;\n}\ndiv.vis-network div.vis-navigation div.vis-button.vis-down {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABpdJREFUeNqcV21QlNcVfp5zX9ikoAvLEsAIIgsoHwpqWAQUNKLNaNv8iZ1JMkNG6/Qj/dDUyCSTtCHpmEkwVk3TToZRMjXj5MOG2KidjIkxQYSAQUAtX6IgIN8su8KCoOzbH4sk4q5g77/33uee555z7rnneYmZDB2MKcJKlyYbqOsZVIgGEOgSHQoy4AKbFFjqAo5dWn/rNAh9OpO852oeJHYxtrmEu4WALhMbxG2ZE9uFAlImDRLY/t/y0b3Ig+u+iWOKsAlgIZSb0OIf15kWtKo1NXh1d5xxiSPEN2wUAHrGOg11jirjWVtJyFnb6YgrzoYwocClu0DI5guPDb43Y2LLp/Iaqf9JCGSErGvIifxd7aqQn/TOJCvFvZ8Hf9haEH+m/6sFQgHBv1Sts/15WmJLkeyl6FuFwFPzny1/ZdE7Nfg/xhv1uUmH2w6kggQp+yqze7d5JbZ8Im+KpucSwI6EN7/cYtlxZarBCts3ptfrtq9odjaGKihE+sV0vRC3u8RqWmmbij149W+Wd5p2rnET6bsqsntyb6+pO3KqkE8FvLxo74lNUX9s9uTJb8/9fG2L81KoogJFYfCm3b9usNq0MXxzw1RsUkDqQICPqf/b/q8sQi3j4WdmtV47OFgNAO6r+DEUFAtFAc9YtpXmRP6hxVsI24cvhyoqnFtrK6jM7isgBa3Dl0O94TeGb255MvzXpUIFjVrhxo/dzgoARBuwFQJkBK9reCnurxfvXX8CRW3yW1G749vT2Br7ysW0oNX1pKDTPG+rm1gHRbibAHLm/7522sKnQCZqFgCUaBCqaS/bEw9vqtWoQROf3dBBiT6KTACImZ3YueqhDdOWjDbFQ4IzIl4elNUX5begU1HD6lPRmULKeghhDcpqnUmZuD3+nkgTH6gZEE9ctlZSoGmG9UIynSCsQVndMyX+IZGiBoHMjHh2SreCglClaSBiSEG8cYnD24bv7CWms/3FocO3hnw13plTggAFb196NdlPM44tC0zrSg5ItXmyEz070UEKCMRqQgkkBQ9NvL2eSJ+revoJTORSpoT6do4/7/7UShBFHQexM+HdfyUHWO8iN/uaRzX3/QjUSLlnqM72F4cCRIY5u9Zf+Y+BAv4AvzpkQ7WAIBRujA/7Vg6cia9xlId6InafVEAAGnQMUCSkb6zTMPdBy8hU3JjrphIq+CrD+Mvxeyumrr+4IH9y7o2GF5eDghuuGx4L2zbWZ9Dc0RoQRbkkFNRdP2/0BH7EtLJLKCjr+zqh2l5u8haZ847vTBW24kRFQXKAtcsT5oqz3igQENIoECkjBJUDZSGewBlBj/ammjLrdX1c/t70ero34gMte9IByLLAjPrUwKweT5jawQshdIuGMiF5XEBU2koivBl9NeEfJeYHwuxtI81zPrn2z6ip60c6DkV1jLTOCTaE2HNjd5Z4s9MwWBOhqEHp/I9cWDtUrJNoHm4KO9P7hdnTBoMYXI8Gb6gVCg63FS53jg9O5tA57tSOdHywnCAygrJrfcTgUe5U2cvNHSPtYYoKCWlrTgsIneB2AfFR+4F4b6f9ZdTzF6P8Ytud407/dy/nL7k9X9i8J9l5y+Ef6RfbnjPvWa8N5suez+KFCgqyPY95Lnd3stv2AcBZ2+mFbze+lui1xc3dXCUUlPafXNx4/aKxcajWWNp/MklRw8/mPFntbd+h1oLE847KhQQxejVg36QQqD0MPTzHv42Ux+uGasJNBnPfwllJd71kkX7RQ3WDNf7dox3BLcNNs6vt34bbbvYHJhlTGp6O+JVHb0/2HJtX1PH+aqECqG/5YN1nlXcokGvvO6vCc4x+QskotxVHB/qa+xbOWuzw8NB3nuo+Ht0z2hHsuGU3GrWAoZfi3jrxgHpw3BPpobaCH7vbqOw6mHI836vYW3Eqcq9AtioqbJy7ufQ3lhfu8sR+s9+3vL8klACsQSu7AnxMY1MxH7YXJp7oPpLulrrj+9575Ni2aeVt1teWfEWfHQLCaspseHzOU7VWU+aM5G2NoyL4i+6j8XWDNQsmGsKu/cv+nTtjQb/mm7hfENyvqEAK5v8opjPJaL26KGBpd5TfguuBvuZRgBgY6zO0jlyZXXe9JqR+8MK8ntHOMHfHIkhu2b/0yIH7/oXJ0yFlxYnPUdRbvuILgO7+y+91l6Ka6M+cnCf4fMSypXvymHf/vzBTD3CuNGUFKT8lmK5Rs5ASqKiBlAGBXFaiSuni0fkp1pJ7Ed4e/xsAqLk46EWsG1EAAAAASUVORK5CYII=');\n  bottom: 10px;\n  left: 55px;\n}\ndiv.vis-network div.vis-navigation div.vis-button.vis-left {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABt5JREFUeNqsl2lUlOcVx//3Pi9DZRsGBgYiS2RYBQKIjAhEJW4pNrXNMbZpWtTGNkttYmJMG5soSZckRk+0p+dYPYY0Gk0ihlhRj63GhVUgBhDD5oIOy8AAMwzD4lCYtx+GqCQKuNyP7/Pc+3u2+7/3JUzEZFBYLh62S7yIZDmVBEIBqOwsQ4DNdtBFASq2A4cuZAwVgCCPF5LGHM0Chz+E1XamzUyAzCMO7IhMI+5MDCK+HpCANd+U2rYgC/Y7BoflYgVA2RAOoNYtyjDTe45+hk96e5QywaJR+NsAwDhocK61VCjLTYWaclNB0OW+en8mhl22g8C/rn7U+uGEwdov+C0i+Q0mIFWzoD7zwVU1czQ/6pjIreR3HPX5VL9jalHXiQgmBoH+XLHAtH5csDaXtxDLLzIBv5jyfOmG2H9U4S7snbpX43KaPpgBIhDx1rPzOlbfPC5GQT/nd1mS1zABa6PfPf5y5F/rcJeWpp7fPkly6f7KXBRCoOSATFfXll19x74HDsvFCghsJAG8HrvlvytCXm7EPVqc5wyzp5NX15muE1omKXXyMnd9yy5r5Q3wPghvJzrLAlimXV38+7D1DbhPFq1M6O4b6rPVWKsCBfHi5EWWv9TkQBYAEPpLvERMC9N8FtRvjt9dPl6wwo5jPvuas7WV5jNqEjz8wA+CBsaan+w9x1hrrXJtuaZX97ooLfqPLCUEGRR+iOwAsF2X98Uc30W3fb02u41frVqeVmo6FUkkwCAwCWxJ2Ls/0TPFNBb8TNdp9WvnVz4OAKdmX2QOzcMsAAjziDGMBd3asCF6SXHyknJTfqQTK+zpvhnVKT5zawCgzFTgN94pJXvP7gxxjTAIkpB+MnSWRMQZYEDnPVt/K4ejbZ/77726Lb6h95tAAiPELaJ1bcTbRfGeM8xv1azWSeyEa0P9igk+Nr1+oNFfkpwzJCJKIQA679ntN08yDXYo3qh+LuUrc0E4EcNL4dP7VNDzpU8FP3vpekoQQ5CEw4bPdEfa9+sAgEZUmkmAAAS5hLQ9p11XGO+pM8V5JLUfMeQARDMlEMKIGFOVCZYb0C7Fz0oeXmIZ6nZzYoV9od/jVS+GbahUOnn9b7T6sEOviUGyA8bMDlUa0W79wBW/bZf+lrY98cDBUI8YCxGDgHCJiVVEDN8R7QWAE8Z/+1mGut2i3eP1r0S+XRztkdBzq6NbF7WpbF3UprKxjvfHxbrfttla/QBArVDbJJIAQCURMRg8ugrKIAKBSNxzHtN3VdmxY0iQYSZmTeegwTlgknYAAB7RZBh2Nm7urbeeC1r19ROT52kWn3shfH2Fu1AO3RxjY/0fdac7/hPPJMDE11GC+HpBJmIEuAS3Oa6w01lybMbMgvgCE6O255zy24DeCr/Bvckn9+u8ZjXYIYvjxoMJy8oeXZrT9GHIqMWTwA2oI6cFMeDIcAiSEOyibXsmZG0hAFzuq1OyY6xBAnMJgdPOmks08zU/bbsB9x18P37PqS/b8+o/a96ZcLm3PmBH46Z5x40HW1eFvl4Uq0w0MwiCBOb7/qTsd6GvVY537DXWas1Iw1AiNJnOgwJi+bXhAbE08OnvaXSIW0TvYw88eaF/uM/WNdju3m5r9TlhPBzVNNDoPGC/5tRma/GJ80xqjPPUjVuvP2narrMOWd1Jlv/E1fN782UiNPZf9C/qOKa+ndOz2j+cz046sn+6KrVOsODirpOxld0lUxmEBK/ktvGgFd2l6taBZn9BAtEz5xYIvAn4/8rFKkgstAyZ6Yf+S67ezlkiSU73XXRV6xqh93TyssR4JF75efBvymLdE03jgT/Wb5tutLWpGbTm7wHZxQQAT+yDuKLyHRIk4cnAZ4pfCF9/HvfR9uh3xBxtz00BANsVDylnac6wAICaHMiBmW5NRLy4trcq0MtZ3RnpHme5H9AvjYeCc1t3pzMJgOSVnyw4eHZUB9Kyu68iMFPpysSppab8UJVC3Rnp/pDlXqF7mnYsdKQbv7cr6fDGW/Zczbt6jgUtV6kIlFxuyg/tH+6zJXmlGe8G+mlzdsyB1j3pTAwZ9q3/Sspbc9tmDwD0H3UffXCFlyuTlFpnPRdYb612c5c8+idPCu6fCLDKUubzsf6fSaWm0wmO9hbvZU8fDR2zoZ97OuppAu0UJEDEmOISZohT6q7Gek5rD3GN6FEp1DaAYB7sdNYPXPao7anS1Fmrg402g7+jYhGIaOXOaQc+uONfmCwZXJIf8xKx2KRgxYgOS+CROuyoyQKCxIhkOr4T6JWgxGnvZ1HWnf/CfHcBXxcnpRHxYwRKkUjSErFKkAQiNjP4kmBRTHbKm5KkKxwL+K39fwDX1XGF8ct++QAAAABJRU5ErkJggg==');\n  bottom: 10px;\n  left: 15px;\n}\ndiv.vis-network div.vis-navigation div.vis-button.vis-right {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABs1JREFUeNqsl3tQlOcVxp9z3m+XygK7C4sLxkW5o4CAkYssFSkRjabjJEOSJm1IbZx2krapiZdeprW0NVVJ0pqMM0kYJQlqkoZImGioE1ItiCAgIsFwE4Es99vCslwChf36xy5EW1A0Pn9+73fO772e93kJC5EMCszFd20SbyFZNpJAAACtjWUI8KAN1CRAJTbg9LXNU+dBkG+Xkm7Zmg4OWoUdNqZXmQCZHQFsz0yOcCYGEc8mJGDnl2UTh5AO2x2DA3OxDaAsCDvQ32VF11qP9aZYz6SeFeooi17pPQEAvZNdTnWWKnWFuVhfYT7v0zza4M3EsMk2EPgnNZusby8Y7P8x/5lI/gMTYNSnNKQt/0Xtev1DfQtZlaK+M54fmDJXXhg4G8zEINBfqlLMe28L9s/lQ8Tyr5iAJ32fK/tj+OFq3IUO1O+JyGk7GgsiEPFrlQ/07bixXdwEPckHWZJ3MgG7Qw9+/mLIS/W4SyXoNvQskpyHLg1e8CNQ3NI0laoje7Tg/8CBudgGgQwSwO/DD322ze/FFnxLRWhiBzUK94GLA2f9mSTjfU+7mjqyrVe+AX8I4aGgShbA0/47Sn4ZuLcR90ih6qih0anRiVprtUEQb43bYtlXmwNZAEDAj/ACMW1M8ExpeDXyWMVCEl4yF7vntR/zLeov8JJlWfZR+Y3N92+cx/reOmu1quNrk27EWW0xvWspJcigoNNkA4C3Yk59vH7xltvu3ktDxe7PX34ilQCQfeci1j2xfn94ZrGCneY8uxcHCnW/vbr9EQD4d2ITc8AprAOAQLewroVAAaB8oMiLiRHvmVy7znNTjWCFrXKoJOSHFQ+kvnF9f+jco07s91MFdwmSkHQuYB0T8WYwIcYj0bTQdRufGlFKJMFVaCb/GvZW6aGI4yeXOwd2mr/u05zsyDY+W5X64Nm+fO85NpuJiCFJTpslIoonADEeiT2zIzIXuh+o25PQNtbsNVMOBUn2g08MiSTHN3uZjNTEDr4dnX/6H+1H/XPasmKvW+sMGfW/MXzende4K3h/ibvSYxIAItyie/K7cgCitQxCIBFjpTrKMgM+WPfrhLbxFi9iMQtlYjAJSCSBSYBAIPBNI3p86TPXj8bk56R4PVylFE626uFLQc9efiTVPDmgBIAAtzALEYNBQRITa4kYix21FwBax655CVagPLk7806Pj1qo/7MraF/FQ14/aMhszYhvGqn3KTef89rklWrSKXUTkn3mtJK9Bzf3XJA0e/PcrdgxIwSCDPmbZMQgABJkDBKzvn+yy2npIv9xAPB1Ceo2jTZ7Gc8afipIgEhAkACDwcSQQZBIIGnx5it7gg+U3wgcnbZKR1r+FnW+v2DVtDwtXCXNSKz797oAwDzZ7ySRAIBBFsTXmBh1w1+oZ4J3h+wv9lUFdbMDOrO+5IAqWIGZthuV13nC77nKRx8r7PssyibLIkoT1/h65HsfzWyu5tF6NYNB4EYJzKUETqgcLNVv0D/cDQBrNAnm9+LOfTLfNB5u2hf5z+6TMexYji+tVdrM5leMbWOtSwQx/F1C2rcuebIqwSO568a4WmuN3mEYSiUi+pRl2l1pLvYBsKArUKVwnZRYgdHpMWVG4+/WXhwoDBXE7OmkHzJ6JNemLfv51bniGqzVPoIkyLbpfK7ZMFIkE6FlrMn7Ql+BbiHg+zXGbgLjylDpyosD58KZmKM0cfWHI9//aD5o1VCZrnO83VuQQOja5PMCfwK8n3K2ChIbLVOD9KB36le3A+u/s2Q81C2yRavQmQNdVnamLnmq4nHD9jpB0rwm77jpjTW9E906Bu18fWlWCQHAox9CtGoXTwmS8IThZyXPB+29inuoE6bMsDM9ufEAMNHqJuU8ljMtAKA2B7IhzaWNiLfWjVQb3J10/SGuEZZ7Af1X7+lluZ3HkpgEQPL291M+qbzJgXQcG60ypKlVTGwsMxcFaJW6/hDXVZZvCz3RlrmRiQHwy9nRn2bM6bnas4cLfH6s1RIorsJcFDA2PToR7Z7QezfQD9qzwvI6TyTZC47ttXeiT+2c1+wBgOndoTPLt7mrmCRjvfULQ4O1xsVVchu7b9GysYUAqy3lnsdNb0aXmQuj7PYWL2etuRl6S0OfXLjiGQIdEY6K5esc2BWhjvkqXLO6x08VPKxV6iYAwuBkv5NpvNmtbrhaX2+tWdY70eVNINhtLW0/sjrv6B0/YdJlcGlR2AvE4hUlKwHQ7BU5cz8LRx0HaPY7gXb53L/67+mUfudPmP/twOWS6AQi/j6B4iWS/IlYK+yGYJDB1wWLErLRKd/omOJbAWf03wEAyO9m+/TtS3AAAAAASUVORK5CYII=');\n  bottom: 10px;\n  left: 95px;\n}\ndiv.vis-network div.vis-navigation div.vis-button.vis-zoomIn {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABiBJREFUeNqkV2tQlOcVfp7zvgvDRe66y8htXUBR1GoFI+BtFJvRtjPJBGeaH2a8DGmbttgSTWbSJEw6TWOsrbbpTIeJZGqaTipTa6LJZDTVUTYQdNAohoso6qLucnERN0Axcb/8+HaJUHDX9Pz6vnnPe57vXJ5zzkeEIwaYcwBL/VrW0TCKqZANINEvBhSk3w9eUmC9HzjcsfarOhBGKJN84GkVJHcetvqFu4SAIYELYlpm4LpQQMqoQQKVnzeO7EYV/A8NnHMAGwHWQJmAjtg895LkFa7FU1d258UvGLBGpI4AQM9dd2TrwNn4016n9bS3LqNzsD1VKPAbfhCyqflR31thAzv+La+QxotCoNi6pn1D1s9aVli/3xtOVk72fjT1XVf17E9uHZspFBD8zdk13pdCAjsOyG6KUSEEnrT/tPHluW+cw7eQ19q2z6/t2rsYJEjZ07S6d+ukwI5/yQ7RxnYC2DZnx8dbHNs6xxs85T2R9GprZcmVwYs2BYWsmBzP83m7nIVJS73jdfdd+7PjjUu/XWUCGTtPre7ZHjxTY3Kq8DoV8Ou5u49snPGrKxN58syZ9aVXBztsigoUBd+Xt2NbfZ8llaVvah+vOz9hcX+CJenWp7eOOYS6ePpTU1w39vk+AwCzFPdDQbFGFPCUY2v9hqxfXJ0shNeHLtsUFc6UequbVvdVkwLX0GXbZPpl6Zuu/ij9x/VCBU1dU7bfdFYAIDsSFRCgeOqa9hfy/nDhwfwTKOrRd0U95n0iqch9+cKS5JVtpMCdkllhAhugCHcRwAb7z1tCEp8CCXAWAJRoCFXIYnti+sYWTQ0tll0wQMk+hGUAkBOX714xbV1IyuhxHhIMC/iR5OV9M2JmuhU1Vh7PXiakrIUQhcnLXeHQxPT4GyAtFqgwgAPF5iIFWkeu1SSLCKAweXn3/ZR5rXV7SddQpy3YDoNems9qTI5hGCitm1MOAAx0aaFCerTd84zjBed3Egq9ADA/rqD7Q3ctQC4REDmkYHb8goGgsR2tz5V0DV+xUdQoqAQ81RybU4IgFWgACgpaLLCIBUo0bv63y/aXy6+WBHWz4/IHSIGAuVooiaRgWqD3AsDVoQ6bEgtOrfJUhwrf0WUtk+r8sL6wvHvk5ijVUiJSRrQZuURtfoGMuaCoRyfP/yMy0XykgAA0DPRTxNp31x2ZFuUYBgB7bK7HNdhpKz6WXq6oQCooKghMKhkgji77vBoA1jkXlAvVfRQjFMUcmxSkRWd6gpjeu32R2kxTvyhKh1DQeud8fFBh26zfOe0xuR4JgAbzywCoRSzfeDUKatJKUQK+CjKiHZ6nZ2xzBnU7B9vixTy7qCHSQEhJU3+DtdT6mAcAFiWUeP/xyPH3Jwrfo3XzysemRcEA8F5RY8h6aPE1WwMLQ4OQ/EBANHmdGWHlzZyxk3ayB0m771yGooYy+KE0l35x0iBxZehS6ie9R1PCMaDvCzWDXA4hZ283ptwcvp6qqDBnyao6AWEQrBQQ/7y+d3YoA+NBTAaElo973p8tVFCQyipW+c3pdNu7BwBOe+tm/eniK/kPFWowpMfvuKrzzw80zSKIkWsJe0bHYu163BNwMwDsv7G36ODNtzMnM5IWZfeQgscbisvLPl1aDhLTo7I8k+n/p+dw5pGeg0WKGiS31K6vvTdmA7nx9uDZ9A3xMUIpbvSezE6MSOmbNWXewHhD6dH23o7BlqQvvrwTK6KQFpXl2WyvcE6LTB2eCPSdrurvmcUnO/cVfPD6pMteyfGs3QKpUFQoS9tU/xPH8xe+Tdd693pN/pHug0Xmqntvz1uLDo9Z9v5nnrn+dvujrI1JMUJd3OY7n97ua46douOGpkdlDoUDeG7g1NS/u/5a0Og9scCsB+ysWXSoMuyFftWJvM0E31SBjmWPznHPjy+8NjdhYfeMmJl3EiNSRgCi/25fpGu4M671zjlrm685s2fEnUoQ5lrLLW8uPLj3oX9hqgxIw8n8X1LU7yMkItCHzREZrGQV6ONmy5TggHk247sL/1jFqof/hRn/AWfqC0pI+QHBIk3tICXRrFTpF8hlJaqefh6yFxQ6HwQYlK8HAKyt3WsWxl7fAAAAAElFTkSuQmCC');\n  bottom: 10px;\n  right: 15px;\n}\ndiv.vis-network div.vis-navigation div.vis-button.vis-zoomOut {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABV5JREFUeNq0l2tQVVUYht/3W/vACMr16IFRQDiAgChpgiikMqY1WjnN9KsfGOXYTOVgkvbDUsZuXrK0qZmGUSvNspjI8TZOmo6AGBoZYly8YB6Qw80DBwQ6jJ3dj30OZZmiwvtv77XW96y91l7v9y1iMNLBuCI84tZkIXU9gwqxAILdokNBOtzgJQWWuYEDFxfcLAGh3y0k79iaD4mfjOVu4WYhoItngBiR6RkuFJAyEJBA3m/lri3Ih/uewXFFyAG4A8oAWkcm2meEzrFNH53Vkhg4xWnxCXcBQGu/3bfGeTbwjKPUcsZRElnfUxcuFLh1Nwh5vurx7s8GDbZ+L+tI/U0hkGGZX5c9/pXqOZYn2gazK8Vth0fvsRUknbx+bIJQQPCts/Mda+4KthbJFoqeKwSejX6pfO2kjytxH1pfuyqlsGH7dJAgZWvFo23L/9muboF+JxtE0/OEwMqJG46uSHinFvepTPO8lhGaX+fPHSdjCKaPy/b3v7az58h/wHFFyIHCRirgjUlbfsiJWXEFD6iUoOkdQaaQ6z9dP2YVahljF4+yXdvZ/evf4G+hQk2sEAUsti4vWxa35gKGSBMDp3T23OxxVXdXRijKovSFzrerC6ELAMT6IhcCZIyeX7c68YPzGGLlxq89PyM0q5YU2M1RuQAg0EERbiaA7Ohl1RgmPTM2p1qjBk1Mm6GDErsfswAgLiDZPmfMwrbhAqeHzm6P8Z9gV9SQdTx2lpCyAEKkhc62YZiVEjTdRgo0zXeBRnImAaSFzm7xdjjtOBGyvmZVZkNvfZjXDhU14+BToFEDKRAQpAJ0HRTjP6XHpYUKEX7RzS9bV5c+FJTmAICUgNSWQ/ZCgJwhIOJIQVLgFKcXvKHm9cyGvithFDUAFQqECho1CBUIggYapAJ1QEFBExNMYoISDU1/NIR9cvndTG/c2IBkp2fC8ZpQgknBGI/3AsDvvRfDlJhwem5zwYMs7VNlaUtbXE1h3mezj9mlGSsXrBkzkFsGKGoDmedBJLfLjxQQgAYdHRSxtPfbfceNsPYBQPTI+GZbT31YxrGIpYoKpIKigkAgFOggNBrbQBBCBaEM2L+iGGmTgnF+Uc1epqO/3VejAoAOUZSLQkFN17lAb4eVCe+VRvvHN4sH6t1feqAmMUGoPHvvhdLzTjzfKoj0sza/GLOy1Bu3vqc20Pgl5YIGkVOEZFZ0nLLMszzdDADTgjIdX6Uf3zfUx6m6u8riKRhOCcmDAqLCURo53Oe4rrsyUlGD0nlIqubdKNZJXOm9FH6y7Yh5uKBnO8vNTX2N4YoKE2fMLREQOsE8AfFN4/ak4QIfbd2XJFRQkLx85ruN7NTp2AoAZxwlCR9dWJc81NDdtoLkc86KBIJwXQ3aOpCPqwuhR2SPbCBlUc2NyogQX3N7wqgU51BAf2w9EFXUtCtLqADqS76ev6/ilgrk2q6esxHZgf5CySh3FMcG+5jbE0ZNdj4odHdDwWPGcZNNO1MPbrxtzdW4s+tI5HPBwQTTzziKY3v/7HGlhmS23g90T+OO5L1Nu7MMw3Fv/Tx1f97/FnsAYPui8/D4nBB/oZZR230uoq67auQoLaB37Iio3sEAK52nR39p+zS13HFiilHeYtOOabdC71jQzz2R+ALBbcrjWNF+cfaUwLSrk4KmtsT4T+gK9jG7AKKjv93X1lcfUNNVaantropqddnDCcIoa7lk29S92+/5CpOvQ04VJ79KUe/7iI/Hh40U6c3PyuPjhmWKN8G8Fvnw1A/zmX/vV5h/T+CXstRMUp4kOFOjZiUlWBkFQYdALitRZXRzf3RqWumdgF79NQDBOa2V/iYSHAAAAABJRU5ErkJggg==');\n  bottom: 10px;\n  right: 55px;\n}\ndiv.vis-network div.vis-navigation div.vis-button.vis-zoomExtends {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAABptJREFUeNqsl21QlNcVx///cx9hIipuAJHasgHlRdw0xay7yK7smg6sb2DSdtqZduLUNENmOk1tQuM4U7UzTvshSRlFZzoNCWSSSTJp+6VNkLCAeQHBoCCgqNBE0wUqL+KuwIiiZZ9+eHa3aAS3Sf8zO8/L3nt+95x7z7n3YWlpKUQEJAEgch9+Jola9xEC2ADBVgAOKqwCYAqKDgUJBIHPBWwFWQNdbyZFBwAC0GGIAHQSj3/8HHRdhzYbdDfwg4IjAsGvICgXAroYBiCEDkBBACBZoyST4gDwQqh7mQ4cEkhQD0EBIIggRMQAh2EiEvEYAGrdR3YSqIYCIEDaotVDeYnu/ryEjSOr43PHl8WmTBPA6PRQ7IWJrvhT/ubkU/7m1EvX+1KEUh7Ug+WkPEXgdUSkR+xrd0NJ4qjr8AEI9pGAI7mo78mHfnF+Y/K2K7iHUheuvJG6cOUNz/LvDwPobrpSl/Ruf2VOy9UPs4RSTSANwH4Y449EVdnt9ojHIeghCHYLgR+n/7zt4Np32tIWZU4hSpnjVk1t/caPfOO3/f++MNH5TVJcisoEoo4ksgbsXwYfdR1+kQplQuCFNS82Pp/9+158RTkTC0ce0OKutQeOp5PME0qcUBqyBmwGOC8vz4AWVOyE4CUqYO/Dh+p3pj//Bb6mHllqCyxd8ODVT69+uFKoOYTSnzFg7SJpzHFNQYWiQrUIsCN9V+uOh375zz179pSGI1FSUuK12+2+aGDt7e3muro6T/h57969lZdvDrT+ZbA6n0B1nfPVN7e0PjMjIgIIdkEAR1JR329yDvaE0+l/hQKA1Wr1bd682SsikUW7K+O3PesTNvaSAiXaLhGBvO86RFEoJ4Adac+eDxsgiZKSEm9NTY3n5MmT5mjBHR0d5vr6es+mTZu8SqnI+x+s+Ol5jRo0auX1jtepQaEAADKWWIbcy7ZGUmb79u1eu93uI+mtra31HLj5TGDs9rBJICCNn1GRCKGCUJAUuzzw6CfbTB6Px7t27VofAG/YXl6Ceyw9LmvIN3UxZUafKRACWyCELcHVP3vk4fDabDZf+2N/D9g+fsLEEFSooFGDogZNFkBRgSCsTcWm066jgRAU4et/F5u9nxRosmCLRmE+QdgSXCNzhW/s9rDJ63wVJx77V+V8YS6UNaW8BdOcqzx+3Ujt0F8Bcr1GMIMU5CzJHZ+rg6IGCYV2PimoyIK6lzIWrxkPTVGmRoqJFCyLTZmeq4MB5f3BVADnbpcQkzStUQMAk0YKBPfzxlhA95NQQe43QBotBECAFFyZHo6dz6CKCizAPFPivzUWqxm2AqIgnwkFvZNn4uczGK3Hah7wpet98UZ85R8aKScIcXYEWpMLkx8fvleHpNjlAWtTsakQa0pVKGcJQqMGUqCHBvfdjp/gTP6xwFzg85PdyaH2J4SUowKiw3889e4KBACnT582W5uKTV2uusAdUFlgzBcFQoFGDT35HwW+82mhqaenxwwA4WtYfRNnUkMZUqsJpEkn8cXU5yktYw2JjsTCMQDwer0ekt6GhgZPUVGRd3fu7qjqdU9Mj7mlpcVD0tvS0uKxWCyVANB5rS3x8s3BFEUFgTTLtuZndQHLBMSfB6pyZtfqMDQ3NzfqTcJisficTqc3BI+8bxh9L8corarM3fnDoIT+rACAU/7m7MOfHbCEwQDQ2Njo6erqinqTOHfuXNjjiI23+ystZ8c7smmkWgVJcN++fRARfLDhlacEUqVEQ1nm77xPrHjSh/+Djo3WmN/s/6OHEOgIPr2h63tVuq5Dud1ukETWoK3zorkzTiiONn/TKlNM4lj24m+Pf13o2wOVHqGA5MsAXjKPrDaqnMvlQnjTzhy0Nlw0d5oI5p3yN62amrk+ve5B5+hXgb47WGX52+V3NgoFOvQKAGUkkTqcbZy5XC7XHYf4zEFr3aXU7jih5uidPPOtvsmzixZr8VMrHjBHddLsHj+Z9Fb/n9a1+T/JDaXey0IpEzEKkHnU8Jj79++PeEwSSimQRGP+Gz8j5DVFBVKQtjBj6JGlNt/D8Y+OpMdlTphiEqcB4tqtsVjfjUtLLkx0J/dOnjWPTg+lEARIEHwaQJVQIYggACC/qxi6rn8ZHL4XETSsf0MU1HOk/CFGYgAwskUqY5eBitRxzn7/a0V1EEBwdqkN6jPI7y4xPmHmC5unbWdQRMqP2d86qANOksU6gvmArNQRNClqABnQgYuK0krI+wCOAyH3DK/vqOXhaf3PAO7mIRjDNV25AAAAAElFTkSuQmCC');\n  bottom: 50px;\n  right: 15px;\n}\n");var OL=function(){function t(e,i){var o=this;yd(this,t),this.body=e,this.canvas=i,this.iconsCreated=!1,this.navigationHammers=[],this.boundFunctions={},this.touchTime=0,this.activated=!1,this.body.emitter.on("activate",(function(){o.activated=!0,o.configureKeyboardBindings()})),this.body.emitter.on("deactivate",(function(){o.activated=!1,o.configureKeyboardBindings()})),this.body.emitter.on("destroy",(function(){void 0!==o.keycharm&&o.keycharm.destroy()})),this.options={}}return Sp(t,[{key:"setOptions",value:function(t){void 0!==t&&(this.options=t,this.create())}},{key:"create",value:function(){!0===this.options.navigationButtons?!1===this.iconsCreated&&this.loadNavigationElements():!0===this.iconsCreated&&this.cleanNavigation(),this.configureKeyboardBindings()}},{key:"cleanNavigation",value:function(){if(0!=this.navigationHammers.length){for(var t=0;t<this.navigationHammers.length;t++)this.navigationHammers[t].destroy();this.navigationHammers=[]}this.navigationDOM&&this.navigationDOM.wrapper&&this.navigationDOM.wrapper.parentNode&&this.navigationDOM.wrapper.parentNode.removeChild(this.navigationDOM.wrapper),this.iconsCreated=!1}},{key:"loadNavigationElements",value:function(){var t=this;this.cleanNavigation(),this.navigationDOM={};var e=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],i=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","_fit"];this.navigationDOM.wrapper=document.createElement("div"),this.navigationDOM.wrapper.className="vis-navigation",this.canvas.frame.appendChild(this.navigationDOM.wrapper);for(var o=0;o<e.length;o++){this.navigationDOM[e[o]]=document.createElement("div"),this.navigationDOM[e[o]].className="vis-button vis-"+e[o],this.navigationDOM.wrapper.appendChild(this.navigationDOM[e[o]]);var n,r,s=new tT(this.navigationDOM[e[o]]);_L(s,"_fit"===i[o]?il(n=this._fit).call(n,this):il(r=this.bindToRedraw).call(r,this,i[o])),this.navigationHammers.push(s)}var a=new tT(this.canvas.frame);TL(a,(function(){t._stopMovement()})),this.navigationHammers.push(a),this.iconsCreated=!0}},{key:"bindToRedraw",value:function(t){var e;void 0===this.boundFunctions[t]&&(this.boundFunctions[t]=il(e=this[t]).call(e,this),this.body.emitter.on("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_startRendering"))}},{key:"unbindFromRedraw",value:function(t){void 0!==this.boundFunctions[t]&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"),delete this.boundFunctions[t])}},{key:"_fit",value:function(){(new Date).valueOf()-this.touchTime>700&&(this.body.emitter.emit("fit",{duration:700}),this.touchTime=(new Date).valueOf())}},{key:"_stopMovement",value:function(){for(var t in this.boundFunctions)Object.prototype.hasOwnProperty.call(this.boundFunctions,t)&&(this.body.emitter.off("initRedraw",this.boundFunctions[t]),this.body.emitter.emit("_stopRendering"));this.boundFunctions={}}},{key:"_moveUp",value:function(){this.body.view.translation.y+=this.options.keyboard.speed.y}},{key:"_moveDown",value:function(){this.body.view.translation.y-=this.options.keyboard.speed.y}},{key:"_moveLeft",value:function(){this.body.view.translation.x+=this.options.keyboard.speed.x}},{key:"_moveRight",value:function(){this.body.view.translation.x-=this.options.keyboard.speed.x}},{key:"_zoomIn",value:function(){var t=this.body.view.scale,e=this.body.view.scale*(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,o=e/t,n=(1-o)*this.canvas.canvasViewCenter.x+i.x*o,r=(1-o)*this.canvas.canvasViewCenter.y+i.y*o;this.body.view.scale=e,this.body.view.translation={x:n,y:r},this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:null})}},{key:"_zoomOut",value:function(){var t=this.body.view.scale,e=this.body.view.scale/(1+this.options.keyboard.speed.zoom),i=this.body.view.translation,o=e/t,n=(1-o)*this.canvas.canvasViewCenter.x+i.x*o,r=(1-o)*this.canvas.canvasViewCenter.y+i.y*o;this.body.view.scale=e,this.body.view.translation={x:n,y:r},this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:null})}},{key:"configureKeyboardBindings",value:function(){var t,e,i,o,n,r,s,a,g,l,h,c,u,d,A,I,C,p,f,v,m,b,y,_,T=this;void 0!==this.keycharm&&this.keycharm.destroy(),!0===this.options.keyboard.enabled&&(!0===this.options.keyboard.bindToWindow?this.keycharm=kL({container:window,preventDefault:!0}):this.keycharm=kL({container:this.canvas.frame,preventDefault:!0}),this.keycharm.reset(),!0===this.activated&&(il(t=this.keycharm).call(t,"up",(function(){T.bindToRedraw("_moveUp")}),"keydown"),il(e=this.keycharm).call(e,"down",(function(){T.bindToRedraw("_moveDown")}),"keydown"),il(i=this.keycharm).call(i,"left",(function(){T.bindToRedraw("_moveLeft")}),"keydown"),il(o=this.keycharm).call(o,"right",(function(){T.bindToRedraw("_moveRight")}),"keydown"),il(n=this.keycharm).call(n,"=",(function(){T.bindToRedraw("_zoomIn")}),"keydown"),il(r=this.keycharm).call(r,"num+",(function(){T.bindToRedraw("_zoomIn")}),"keydown"),il(s=this.keycharm).call(s,"num-",(function(){T.bindToRedraw("_zoomOut")}),"keydown"),il(a=this.keycharm).call(a,"-",(function(){T.bindToRedraw("_zoomOut")}),"keydown"),il(g=this.keycharm).call(g,"[",(function(){T.bindToRedraw("_zoomOut")}),"keydown"),il(l=this.keycharm).call(l,"]",(function(){T.bindToRedraw("_zoomIn")}),"keydown"),il(h=this.keycharm).call(h,"pageup",(function(){T.bindToRedraw("_zoomIn")}),"keydown"),il(c=this.keycharm).call(c,"pagedown",(function(){T.bindToRedraw("_zoomOut")}),"keydown"),il(u=this.keycharm).call(u,"up",(function(){T.unbindFromRedraw("_moveUp")}),"keyup"),il(d=this.keycharm).call(d,"down",(function(){T.unbindFromRedraw("_moveDown")}),"keyup"),il(A=this.keycharm).call(A,"left",(function(){T.unbindFromRedraw("_moveLeft")}),"keyup"),il(I=this.keycharm).call(I,"right",(function(){T.unbindFromRedraw("_moveRight")}),"keyup"),il(C=this.keycharm).call(C,"=",(function(){T.unbindFromRedraw("_zoomIn")}),"keyup"),il(p=this.keycharm).call(p,"num+",(function(){T.unbindFromRedraw("_zoomIn")}),"keyup"),il(f=this.keycharm).call(f,"num-",(function(){T.unbindFromRedraw("_zoomOut")}),"keyup"),il(v=this.keycharm).call(v,"-",(function(){T.unbindFromRedraw("_zoomOut")}),"keyup"),il(m=this.keycharm).call(m,"[",(function(){T.unbindFromRedraw("_zoomOut")}),"keyup"),il(b=this.keycharm).call(b,"]",(function(){T.unbindFromRedraw("_zoomIn")}),"keyup"),il(y=this.keycharm).call(y,"pageup",(function(){T.unbindFromRedraw("_zoomIn")}),"keyup"),il(_=this.keycharm).call(_,"pagedown",(function(){T.unbindFromRedraw("_zoomOut")}),"keyup")))}}]),t}();function SL(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}var RL=function(){function t(e,i,o){var n,r,s,a,g,l,h,c,u,d,A,I,C;yd(this,t),this.body=e,this.canvas=i,this.selectionHandler=o,this.navigationHandler=new OL(e,i),this.body.eventListeners.onTap=il(n=this.onTap).call(n,this),this.body.eventListeners.onTouch=il(r=this.onTouch).call(r,this),this.body.eventListeners.onDoubleTap=il(s=this.onDoubleTap).call(s,this),this.body.eventListeners.onHold=il(a=this.onHold).call(a,this),this.body.eventListeners.onDragStart=il(g=this.onDragStart).call(g,this),this.body.eventListeners.onDrag=il(l=this.onDrag).call(l,this),this.body.eventListeners.onDragEnd=il(h=this.onDragEnd).call(h,this),this.body.eventListeners.onMouseWheel=il(c=this.onMouseWheel).call(c,this),this.body.eventListeners.onPinch=il(u=this.onPinch).call(u,this),this.body.eventListeners.onMouseMove=il(d=this.onMouseMove).call(d,this),this.body.eventListeners.onRelease=il(A=this.onRelease).call(A,this),this.body.eventListeners.onContext=il(I=this.onContext).call(I,this),this.touchTime=0,this.drag={},this.pinch={},this.popup=void 0,this.popupObj=void 0,this.popupTimer=void 0,this.body.functions.getPointer=il(C=this.getPointer).call(C,this),this.options={},this.defaultOptions={dragNodes:!0,dragView:!0,hover:!1,keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02},bindToWindow:!0,autoFocus:!0},navigationButtons:!1,tooltipDelay:300,zoomView:!0,zoomSpeed:1},Lg(this.options,this.defaultOptions),this.bindEventListeners()}return Sp(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("destroy",(function(){clearTimeout(t.popupTimer),delete t.body.functions.getPointer}))}},{key:"setOptions",value:function(t){void 0!==t&&(O_(["hideEdgesOnDrag","hideEdgesOnZoom","hideNodesOnDrag","keyboard","multiselect","selectable","selectConnectedEdges"],this.options,t),U_(this.options,t,"keyboard"),t.tooltip&&(Lg(this.options.tooltip,t.tooltip),t.tooltip.color&&(this.options.tooltip.color=P_(t.tooltip.color)))),this.navigationHandler.setOptions(this.options)}},{key:"getPointer",value:function(t){return{x:t.x-(e=this.canvas.frame.canvas,e.getBoundingClientRect().left),y:t.y-x_(this.canvas.frame.canvas)};var e}},{key:"onTouch",value:function(t){(new Date).valueOf()-this.touchTime>50&&(this.drag.pointer=this.getPointer(t.center),this.drag.pinched=!1,this.pinch.scale=this.body.view.scale,this.touchTime=(new Date).valueOf())}},{key:"onTap",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect&&(t.changedPointers[0].ctrlKey||t.changedPointers[0].metaKey);this.checkSelectionChanges(e,i),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e)}},{key:"onDoubleTap",value:function(t){var e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("doubleClick",t,e)}},{key:"onHold",value:function(t){var e=this.getPointer(t.center),i=this.selectionHandler.options.multiselect;this.checkSelectionChanges(e,i),this.selectionHandler.commitAndEmit(e,t),this.selectionHandler.generateClickEvent("click",t,e),this.selectionHandler.generateClickEvent("hold",t,e)}},{key:"onRelease",value:function(t){if((new Date).valueOf()-this.touchTime>10){var e=this.getPointer(t.center);this.selectionHandler.generateClickEvent("release",t,e),this.touchTime=(new Date).valueOf()}}},{key:"onContext",value:function(t){var e=this.getPointer({x:t.clientX,y:t.clientY});this.selectionHandler.generateClickEvent("oncontext",t,e)}},{key:"checkSelectionChanges",value:function(t){!0===(arguments.length>1&&void 0!==arguments[1]&&arguments[1])?this.selectionHandler.selectAdditionalOnPoint(t):this.selectionHandler.selectOnPoint(t)}},{key:"_determineDifference",value:function(t,e){var i=function(t,e){for(var i=[],o=0;o<t.length;o++){var n=t[o];-1===Wm(e).call(e,n)&&i.push(n)}return i};return{nodes:i(t.nodes,e.nodes),edges:i(t.edges,e.edges)}}},{key:"onDragStart",value:function(t){if(!this.drag.dragging){void 0===this.drag.pointer&&this.onTouch(t);var e=this.selectionHandler.getNodeAt(this.drag.pointer);if(this.drag.dragging=!0,this.drag.selection=[],this.drag.translation=Lg({},this.body.view.translation),this.drag.nodeId=void 0,t.srcEvent.shiftKey){this.body.selectionBox.show=!0;var i=this.getPointer(t.center);this.body.selectionBox.position.start={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)}}else if(void 0!==e&&!0===this.options.dragNodes){this.drag.nodeId=e.id,!1===e.isSelected()&&this.selectionHandler.setSelection({nodes:[e.id]}),this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer);var o,n=function(t,e){var i=void 0!==mf&&bd(t)||t["@@iterator"];if(!i){if(Nf(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return SL(t,e);var o=wf(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?ed(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?SL(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}(this.selectionHandler.getSelectedNodes());try{for(n.s();!(o=n.n()).done;){var r=o.value,s={id:r.id,node:r,x:r.x,y:r.y,xFixed:r.options.fixed.x,yFixed:r.options.fixed.y};r.options.fixed.x=!0,r.options.fixed.y=!0,this.drag.selection.push(s)}}catch(t){n.e(t)}finally{n.f()}}else this.selectionHandler.generateClickEvent("dragStart",t,this.drag.pointer,void 0,!0)}}},{key:"onDrag",value:function(t){var e=this;if(!0!==this.drag.pinched){this.body.emitter.emit("unlockNode");var i=this.getPointer(t.center),o=this.drag.selection;if(o&&o.length&&!0===this.options.dragNodes){this.selectionHandler.generateClickEvent("dragging",t,i);var n=i.x-this.drag.pointer.x,r=i.y-this.drag.pointer.y;sv(o).call(o,(function(t){var i=t.node;!1===t.xFixed&&(i.x=e.canvas._XconvertDOMtoCanvas(e.canvas._XconvertCanvasToDOM(t.x)+n)),!1===t.yFixed&&(i.y=e.canvas._YconvertDOMtoCanvas(e.canvas._YconvertCanvasToDOM(t.y)+r))})),this.body.emitter.emit("startSimulation")}else{if(t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);this.body.selectionBox.position.end={x:this.canvas._XconvertDOMtoCanvas(i.x),y:this.canvas._YconvertDOMtoCanvas(i.y)},this.body.emitter.emit("_requestRedraw")}if(!0===this.options.dragView&&!t.srcEvent.shiftKey){if(this.selectionHandler.generateClickEvent("dragging",t,i,void 0,!0),void 0===this.drag.pointer)return void this.onDragStart(t);var s=i.x-this.drag.pointer.x,a=i.y-this.drag.pointer.y;this.body.view.translation={x:this.drag.translation.x+s,y:this.drag.translation.y+a},this.body.emitter.emit("_requestRedraw")}}}}},{key:"onDragEnd",value:function(t){var e=this;if(this.drag.dragging=!1,this.body.selectionBox.show){var i;this.body.selectionBox.show=!1;var o=this.body.selectionBox.position,n={minX:Math.min(o.start.x,o.end.x),minY:Math.min(o.start.y,o.end.y),maxX:Math.max(o.start.x,o.end.x),maxY:Math.max(o.start.y,o.end.y)},r=dm(i=this.body.nodeIndices).call(i,(function(t){var i=e.body.nodes[t];return i.x>=n.minX&&i.x<=n.maxX&&i.y>=n.minY&&i.y<=n.maxY}));sv(r).call(r,(function(t){return e.selectionHandler.selectObject(e.body.nodes[t])}));var s=this.getPointer(t.center);this.selectionHandler.commitAndEmit(s,t),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw")}else{var a=this.drag.selection;a&&a.length?(sv(a).call(a,(function(t){t.node.options.fixed.x=t.xFixed,t.node.options.fixed.y=t.yFixed})),this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center)),this.body.emitter.emit("startSimulation")):(this.selectionHandler.generateClickEvent("dragEnd",t,this.getPointer(t.center),void 0,!0),this.body.emitter.emit("_requestRedraw"))}}},{key:"onPinch",value:function(t){var e=this.getPointer(t.center);this.drag.pinched=!0,void 0===this.pinch.scale&&(this.pinch.scale=1);var i=this.pinch.scale*t.scale;this.zoom(i,e)}},{key:"zoom",value:function(t,e){if(!0===this.options.zoomView){var i=this.body.view.scale;t<1e-5&&(t=1e-5),t>10&&(t=10);var o=void 0;void 0!==this.drag&&!0===this.drag.dragging&&(o=this.canvas.DOMtoCanvas(this.drag.pointer));var n=this.body.view.translation,r=t/i,s=(1-r)*e.x+n.x*r,a=(1-r)*e.y+n.y*r;if(this.body.view.scale=t,this.body.view.translation={x:s,y:a},null!=o){var g=this.canvas.canvasToDOM(o);this.drag.pointer.x=g.x,this.drag.pointer.y=g.y}this.body.emitter.emit("_requestRedraw"),i<t?this.body.emitter.emit("zoom",{direction:"+",scale:this.body.view.scale,pointer:e}):this.body.emitter.emit("zoom",{direction:"-",scale:this.body.view.scale,pointer:e})}}},{key:"onMouseWheel",value:function(t){if(!0===this.options.zoomView){if(0!==t.deltaY){var e=this.body.view.scale;e*=1+(t.deltaY<0?1:-1)*(.1*this.options.zoomSpeed);var i=this.getPointer({x:t.clientX,y:t.clientY});this.zoom(e,i)}t.preventDefault()}}},{key:"onMouseMove",value:function(t){var e=this,i=this.getPointer({x:t.clientX,y:t.clientY}),o=!1;void 0!==this.popup&&(!1===this.popup.hidden&&this._checkHidePopup(i),!1===this.popup.hidden&&(o=!0,this.popup.setPosition(i.x+3,i.y-5),this.popup.show())),this.options.keyboard.autoFocus&&!1===this.options.keyboard.bindToWindow&&!0===this.options.keyboard.enabled&&this.canvas.frame.focus(),!1===o&&(void 0!==this.popupTimer&&(clearInterval(this.popupTimer),this.popupTimer=void 0),this.drag.dragging||(this.popupTimer=fb((function(){return e._checkShowPopup(i)}),this.options.tooltipDelay))),!0===this.options.hover&&this.selectionHandler.hoverObject(t,i)}},{key:"_checkShowPopup",value:function(t){var e=this.canvas._XconvertDOMtoCanvas(t.x),i=this.canvas._YconvertDOMtoCanvas(t.y),o={left:e,top:i,right:e,bottom:i},n=void 0===this.popupObj?void 0:this.popupObj.id,r=!1,s="node";if(void 0===this.popupObj){for(var a,g=this.body.nodeIndices,l=this.body.nodes,h=[],c=0;c<g.length;c++)!0===(a=l[g[c]]).isOverlappingWith(o)&&(r=!0,void 0!==a.getTitle()&&h.push(g[c]));h.length>0&&(this.popupObj=l[h[h.length-1]],r=!0)}if(void 0===this.popupObj&&!1===r){for(var u,d=this.body.edgeIndices,A=this.body.edges,I=[],C=0;C<d.length;C++)!0===(u=A[d[C]]).isOverlappingWith(o)&&!0===u.connected&&void 0!==u.getTitle()&&I.push(d[C]);I.length>0&&(this.popupObj=A[I[I.length-1]],s="edge")}void 0!==this.popupObj?this.popupObj.id!==n&&(void 0===this.popup&&(this.popup=new eT(this.canvas.frame)),this.popup.popupTargetType=s,this.popup.popupTargetId=this.popupObj.id,this.popup.setPosition(t.x+3,t.y-5),this.popup.setText(this.popupObj.getTitle()),this.popup.show(),this.body.emitter.emit("showPopup",this.popupObj.id)):void 0!==this.popup&&(this.popup.hide(),this.body.emitter.emit("hidePopup"))}},{key:"_checkHidePopup",value:function(t){var e=this.selectionHandler._pointerToPositionObject(t),i=!1;if("node"===this.popup.popupTargetType){if(void 0!==this.body.nodes[this.popup.popupTargetId]&&!0===(i=this.body.nodes[this.popup.popupTargetId].isOverlappingWith(e))){var o=this.selectionHandler.getNodeAt(t);i=void 0!==o&&o.id===this.popup.popupTargetId}}else void 0===this.selectionHandler.getNodeAt(t)&&void 0!==this.body.edges[this.popup.popupTargetId]&&(i=this.body.edges[this.popup.popupTargetId].isOverlappingWith(e));!1===i&&(this.popupObj=void 0,this.popup.hide(),this.body.emitter.emit("hidePopup"))}}]),t}(),xL=$n,DL=HE,ML=rE.getWeakData,NL=yE,LL=ba,PL=ur,$L=br,BL=vE,FL=fs,zL=eh.set,HL=eh.getterFor,GL=GA.find,UL=GA.findIndex,VL=xL([].splice),WL=0,jL=function(t){return t.frozen||(t.frozen=new YL)},YL=function(){this.entries=[]},XL=function(t,e){return GL(t.entries,(function(t){return t[0]===e}))};YL.prototype={get:function(t){var e=XL(this,t);if(e)return e[1]},has:function(t){return!!XL(this,t)},set:function(t,e){var i=XL(this,t);i?i[1]=e:this.entries.push([t,e])},delete:function(t){var e=UL(this.entries,(function(e){return e[0]===t}));return~e&&VL(this.entries,e,1),!!~e}};var ZL,KL=UT,QL=En,JL=$n,qL=HE,tP=rE,eP=FE,iP={getConstructor:function(t,e,i,o){var n=t((function(t,n){NL(t,r),zL(t,{type:e,id:WL++,frozen:void 0}),PL(n)||BL(n,t[o],{that:t,AS_ENTRIES:i})})),r=n.prototype,s=HL(e),a=function(t,e,i){var o=s(t),n=ML(LL(e),!0);return!0===n?jL(o).set(e,i):n[o.id]=i,t};return DL(r,{delete:function(t){var e=s(this);if(!$L(t))return!1;var i=ML(t);return!0===i?jL(e).delete(t):i&&FL(i,e.id)&&delete i[e.id]},has:function(t){var e=s(this);if(!$L(t))return!1;var i=ML(t);return!0===i?jL(e).has(t):i&&FL(i,e.id)}}),DL(r,i?{get:function(t){var e=s(this);if($L(t)){var i=ML(t);return!0===i?jL(e).get(t):i?i[e.id]:void 0}},set:function(t,e){return a(this,t,e)}}:{add:function(t){return a(this,t,!0)}}),n}},oP=br,nP=eh.enforce,rP=wn,sP=Bl,aP=Object,gP=Array.isArray,lP=aP.isExtensible,hP=aP.isFrozen,cP=aP.isSealed,uP=aP.freeze,dP=aP.seal,AP={},IP={},CP=!QL.ActiveXObject&&"ActiveXObject"in QL,pP=function(t){return function(){return t(this,arguments.length?arguments[0]:void 0)}},fP=eP("WeakMap",pP,iP),vP=fP.prototype,mP=JL(vP.set);if(sP)if(CP){ZL=iP.getConstructor(pP,"WeakMap",!0),tP.enable();var bP=JL(vP.delete),yP=JL(vP.has),_P=JL(vP.get);qL(vP,{delete:function(t){if(oP(t)&&!lP(t)){var e=nP(this);return e.frozen||(e.frozen=new ZL),bP(this,t)||e.frozen.delete(t)}return bP(this,t)},has:function(t){if(oP(t)&&!lP(t)){var e=nP(this);return e.frozen||(e.frozen=new ZL),yP(this,t)||e.frozen.has(t)}return yP(this,t)},get:function(t){if(oP(t)&&!lP(t)){var e=nP(this);return e.frozen||(e.frozen=new ZL),yP(this,t)?_P(this,t):e.frozen.get(t)}return _P(this,t)},set:function(t,e){if(oP(t)&&!lP(t)){var i=nP(this);i.frozen||(i.frozen=new ZL),yP(this,t)?mP(this,t,e):i.frozen.set(t,e)}else mP(this,t,e);return this}})}else KL&&rP((function(){var t=uP([]);return mP(new fP,t,1),!hP(t)}))&&qL(vP,{set:function(t,e){var i;return gP(t)&&(hP(t)?i=AP:cP(t)&&(i=IP)),mP(this,t,e),i===AP&&uP(t),i===IP&&dP(t),this}});var TP,EP,wP,kP,OP,SP=_n(yr.WeakMap);function RP(t,e,i,o){if("a"===i&&!o)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof e?t!==e||!o:!e.has(t))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===i?o:"a"===i?o.call(t):o?o.value:e.get(t)}function xP(t,e,i,o,n){if("m"===o)throw new TypeError("Private method is not writable");if("a"===o&&!n)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof e?t!==e||!n:!e.has(t))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===o?n.call(t,i):n?n.value=i:e.set(t,i),i}function DP(t,e){var i=void 0!==mf&&bd(t)||t["@@iterator"];if(!i){if(Nf(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return MP(t,e);var o=wf(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?ed(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?MP(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function MP(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function NP(t,e){var i,o=new ux,n=DP(e);try{for(n.s();!(i=n.n()).done;){var r=i.value;t.has(r)||o.add(r)}}catch(t){n.e(t)}finally{n.f()}return o}"function"==typeof SuppressedError&&SuppressedError;var LP=function(){function t(){yd(this,t),TP.set(this,new ux),EP.set(this,new ux)}return Sp(t,[{key:"size",get:function(){return RP(this,EP,"f").size}},{key:"add",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var o=0,n=e;o<n.length;o++){var r=n[o];RP(this,EP,"f").add(r)}}},{key:"delete",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];for(var o=0,n=e;o<n.length;o++){var r=n[o];RP(this,EP,"f").delete(r)}}},{key:"clear",value:function(){RP(this,EP,"f").clear()}},{key:"getSelection",value:function(){return vf(RP(this,EP,"f"))}},{key:"getChanges",value:function(){return{added:vf(NP(RP(this,TP,"f"),RP(this,EP,"f"))),deleted:vf(NP(RP(this,EP,"f"),RP(this,TP,"f"))),previous:vf(new ux(RP(this,TP,"f"))),current:vf(new ux(RP(this,EP,"f")))}}},{key:"commit",value:function(){var t=this.getChanges();xP(this,TP,RP(this,EP,"f"),"f"),xP(this,EP,new ux(RP(this,TP,"f")),"f");var e,i=DP(t.added);try{for(i.s();!(e=i.n()).done;)e.value.select()}catch(t){i.e(t)}finally{i.f()}var o,n=DP(t.deleted);try{for(n.s();!(o=n.n()).done;)o.value.unselect()}catch(t){n.e(t)}finally{n.f()}return t}}]),t}();TP=new SP,EP=new SP;var PP=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};yd(this,t),wP.set(this,new LP),kP.set(this,new LP),OP.set(this,void 0),xP(this,OP,e,"f")}return Sp(t,[{key:"sizeNodes",get:function(){return RP(this,wP,"f").size}},{key:"sizeEdges",get:function(){return RP(this,kP,"f").size}},{key:"getNodes",value:function(){return RP(this,wP,"f").getSelection()}},{key:"getEdges",value:function(){return RP(this,kP,"f").getSelection()}},{key:"addNodes",value:function(){var t;(t=RP(this,wP,"f")).add.apply(t,arguments)}},{key:"addEdges",value:function(){var t;(t=RP(this,kP,"f")).add.apply(t,arguments)}},{key:"deleteNodes",value:function(t){RP(this,wP,"f").delete(t)}},{key:"deleteEdges",value:function(t){RP(this,kP,"f").delete(t)}},{key:"clear",value:function(){RP(this,wP,"f").clear(),RP(this,kP,"f").clear()}},{key:"commit",value:function(){for(var t,e,i={nodes:RP(this,wP,"f").commit(),edges:RP(this,kP,"f").commit()},o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return(t=RP(this,OP,"f")).call.apply(t,Ef(e=[this,i]).call(e,n)),i}}]),t}();function $P(t,e){var i=void 0!==mf&&bd(t)||t["@@iterator"];if(!i){if(Nf(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return BP(t,e);var o=wf(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?ed(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?BP(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}function BP(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}wP=new SP,kP=new SP,OP=new SP;var FP=function(){function t(e,i){var o=this;yd(this,t),this.body=e,this.canvas=i,this._selectionAccumulator=new PP,this.hoverObj={nodes:{},edges:{}},this.options={},this.defaultOptions={multiselect:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0},Lg(this.options,this.defaultOptions),this.body.emitter.on("_dataChanged",(function(){o.updateSelection()}))}return Sp(t,[{key:"setOptions",value:function(t){void 0!==t&&k_(["multiselect","hoverConnectedEdges","selectable","selectConnectedEdges"],this.options,t)}},{key:"selectOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);this.unselectAll(),void 0!==i&&(e=this.selectObject(i)),this.body.emitter.emit("_requestRedraw")}return e}},{key:"selectAdditionalOnPoint",value:function(t){var e=!1;if(!0===this.options.selectable){var i=this.getNodeAt(t)||this.getEdgeAt(t);void 0!==i&&(e=!0,!0===i.isSelected()?this.deselectObject(i):this.selectObject(i),this.body.emitter.emit("_requestRedraw"))}return e}},{key:"_initBaseEvent",value:function(t,e){var i={};return i.pointer={DOM:{x:e.x,y:e.y},canvas:this.canvas.DOMtoCanvas(e)},i.event=t,i}},{key:"generateClickEvent",value:function(t,e,i,o){var n=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=this._initBaseEvent(e,i);if(!0===n)r.nodes=[],r.edges=[];else{var s=this.getSelection();r.nodes=s.nodes,r.edges=s.edges}void 0!==o&&(r.previousSelection=o),"click"==t&&(r.items=this.getClickedItems(i)),void 0!==e.controlEdge&&(r.controlEdge=e.controlEdge),this.body.emitter.emit(t,r)}},{key:"selectObject",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.options.selectConnectedEdges;if(void 0!==t){var i;if(t instanceof vN)!0===e&&(i=this._selectionAccumulator).addEdges.apply(i,vf(t.edges)),this._selectionAccumulator.addNodes(t);else this._selectionAccumulator.addEdges(t);return!0}return!1}},{key:"deselectObject",value:function(t){!0===t.isSelected()&&(t.selected=!1,this._removeFromSelection(t))}},{key:"_getAllNodesOverlappingWith",value:function(t){for(var e=[],i=this.body.nodes,o=0;o<this.body.nodeIndices.length;o++){var n=this.body.nodeIndices[o];i[n].isOverlappingWith(t)&&e.push(n)}return e}},{key:"_pointerToPositionObject",value:function(t){var e=this.canvas.DOMtoCanvas(t);return{left:e.x-1,top:e.y+1,right:e.x+1,bottom:e.y-1}}},{key:"getNodeAt",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this._pointerToPositionObject(t),o=this._getAllNodesOverlappingWith(i);return o.length>0?!0===e?this.body.nodes[o[o.length-1]]:o[o.length-1]:void 0}},{key:"_getEdgesOverlappingWith",value:function(t,e){for(var i=this.body.edges,o=0;o<this.body.edgeIndices.length;o++){var n=this.body.edgeIndices[o];i[n].isOverlappingWith(t)&&e.push(n)}}},{key:"_getAllEdgesOverlappingWith",value:function(t){var e=[];return this._getEdgesOverlappingWith(t,e),e}},{key:"getEdgeAt",value:function(t){for(var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.canvas.DOMtoCanvas(t),o=10,n=null,r=this.body.edges,s=0;s<this.body.edgeIndices.length;s++){var a=this.body.edgeIndices[s],g=r[a];if(g.connected){var l=g.from.x,h=g.from.y,c=g.to.x,u=g.to.y,d=g.edgeType.getDistanceToEdge(l,h,c,u,i.x,i.y);d<o&&(n=a,o=d)}}return null!==n?!0===e?this.body.edges[n]:n:void 0}},{key:"_addToHover",value:function(t){t instanceof vN?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t}},{key:"_removeFromSelection",value:function(t){var e;t instanceof vN?(this._selectionAccumulator.deleteNodes(t),(e=this._selectionAccumulator).deleteEdges.apply(e,vf(t.edges))):this._selectionAccumulator.deleteEdges(t)}},{key:"unselectAll",value:function(){this._selectionAccumulator.clear()}},{key:"getSelectedNodeCount",value:function(){return this._selectionAccumulator.sizeNodes}},{key:"getSelectedEdgeCount",value:function(){return this._selectionAccumulator.sizeEdges}},{key:"_hoverConnectedEdges",value:function(t){for(var e=0;e<t.edges.length;e++){var i=t.edges[e];i.hover=!0,this._addToHover(i)}}},{key:"emitBlurEvent",value:function(t,e,i){var o=this._initBaseEvent(t,e);!0===i.hover&&(i.hover=!1,i instanceof vN?(o.node=i.id,this.body.emitter.emit("blurNode",o)):(o.edge=i.id,this.body.emitter.emit("blurEdge",o)))}},{key:"emitHoverEvent",value:function(t,e,i){var o=this._initBaseEvent(t,e),n=!1;return!1===i.hover&&(i.hover=!0,this._addToHover(i),n=!0,i instanceof vN?(o.node=i.id,this.body.emitter.emit("hoverNode",o)):(o.edge=i.id,this.body.emitter.emit("hoverEdge",o))),n}},{key:"hoverObject",value:function(t,e){var i=this.getNodeAt(e);void 0===i&&(i=this.getEdgeAt(e));var o=!1;for(var n in this.hoverObj.nodes)Object.prototype.hasOwnProperty.call(this.hoverObj.nodes,n)&&(void 0===i||i instanceof vN&&i.id!=n||i instanceof aL)&&(this.emitBlurEvent(t,e,this.hoverObj.nodes[n]),delete this.hoverObj.nodes[n],o=!0);for(var r in this.hoverObj.edges)Object.prototype.hasOwnProperty.call(this.hoverObj.edges,r)&&(!0===o?(this.hoverObj.edges[r].hover=!1,delete this.hoverObj.edges[r]):(void 0===i||i instanceof aL&&i.id!=r||i instanceof vN&&!i.hover)&&(this.emitBlurEvent(t,e,this.hoverObj.edges[r]),delete this.hoverObj.edges[r],o=!0));if(void 0!==i){var s=Uf(this.hoverObj.edges).length,a=Uf(this.hoverObj.nodes).length;(o||i instanceof aL&&0===s&&0===a||i instanceof vN&&0===s&&0===a)&&(o=this.emitHoverEvent(t,e,i)),i instanceof vN&&!0===this.options.hoverConnectedEdges&&this._hoverConnectedEdges(i)}!0===o&&this.body.emitter.emit("_requestRedraw")}},{key:"commitWithoutEmitting",value:function(){this._selectionAccumulator.commit()}},{key:"commitAndEmit",value:function(t,e){var i=!1,o=this._selectionAccumulator.commit(),n={nodes:o.nodes.previous,edges:o.edges.previous};o.edges.deleted.length>0&&(this.generateClickEvent("deselectEdge",e,t,n),i=!0),o.nodes.deleted.length>0&&(this.generateClickEvent("deselectNode",e,t,n),i=!0),o.nodes.added.length>0&&(this.generateClickEvent("selectNode",e,t),i=!0),o.edges.added.length>0&&(this.generateClickEvent("selectEdge",e,t),i=!0),!0===i&&this.generateClickEvent("select",e,t)}},{key:"getSelection",value:function(){return{nodes:this.getSelectedNodeIds(),edges:this.getSelectedEdgeIds()}}},{key:"getSelectedNodes",value:function(){return this._selectionAccumulator.getNodes()}},{key:"getSelectedEdges",value:function(){return this._selectionAccumulator.getEdges()}},{key:"getSelectedNodeIds",value:function(){var t;return zf(t=this._selectionAccumulator.getNodes()).call(t,(function(t){return t.id}))}},{key:"getSelectedEdgeIds",value:function(){var t;return zf(t=this._selectionAccumulator.getEdges()).call(t,(function(t){return t.id}))}},{key:"setSelection",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t||!t.nodes&&!t.edges)throw new TypeError("Selection must be an object with nodes and/or edges properties");if((e.unselectAll||void 0===e.unselectAll)&&this.unselectAll(),t.nodes){var i,o=$P(t.nodes);try{for(o.s();!(i=o.n()).done;){var n=i.value,r=this.body.nodes[n];if(!r)throw new RangeError('Node with id "'+n+'" not found');this.selectObject(r,e.highlightEdges)}}catch(t){o.e(t)}finally{o.f()}}if(t.edges){var s,a=$P(t.edges);try{for(a.s();!(s=a.n()).done;){var g=s.value,l=this.body.edges[g];if(!l)throw new RangeError('Edge with id "'+g+'" not found');this.selectObject(l)}}catch(t){a.e(t)}finally{a.f()}}this.body.emitter.emit("_requestRedraw"),this._selectionAccumulator.commit()}},{key:"selectNodes",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({nodes:t},{highlightEdges:e})}},{key:"selectEdges",value:function(t){if(!t||void 0===t.length)throw"Selection must be an array with ids";this.setSelection({edges:t})}},{key:"updateSelection",value:function(){for(var t in this._selectionAccumulator.getNodes())Object.prototype.hasOwnProperty.call(this.body.nodes,t.id)||this._selectionAccumulator.deleteNodes(t);for(var e in this._selectionAccumulator.getEdges())Object.prototype.hasOwnProperty.call(this.body.edges,e.id)||this._selectionAccumulator.deleteEdges(e)}},{key:"getClickedItems",value:function(t){for(var e=this.canvas.DOMtoCanvas(t),i=[],o=this.body.nodeIndices,n=this.body.nodes,r=o.length-1;r>=0;r--){var s=n[o[r]].getItemsOnPoint(e);i.push.apply(i,s)}for(var a=this.body.edgeIndices,g=this.body.edges,l=a.length-1;l>=0;l--){var h=g[a[l]].getItemsOnPoint(e);i.push.apply(i,h)}return i}}]),t}();function zP(t){var e=function(){if("undefined"==typeof Reflect||!$D)return!1;if($D.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call($D(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,o=Rw(t);if(e){var n=Rw(this).constructor;i=$D(o,arguments,n)}else i=o.apply(this,arguments);return kw(this,i)}}var HP=function(){function t(){yd(this,t)}return Sp(t,[{key:"abstract",value:function(){throw new Error("Can't instantiate abstract class!")}},{key:"fake_use",value:function(){}},{key:"curveType",value:function(){return this.abstract()}},{key:"getPosition",value:function(t){return this.fake_use(t),this.abstract()}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;this.fake_use(t,e,i),this.abstract()}},{key:"getTreeSize",value:function(t){return this.fake_use(t),this.abstract()}},{key:"sort",value:function(t){this.fake_use(t),this.abstract()}},{key:"fix",value:function(t,e){this.fake_use(t,e),this.abstract()}},{key:"shift",value:function(t,e){this.fake_use(t,e),this.abstract()}}]),t}(),GP=function(t){ww(i,t);var e=zP(i);function i(t){var o;return yd(this,i),(o=e.call(this)).layout=t,o}return Sp(i,[{key:"curveType",value:function(){return"horizontal"}},{key:"getPosition",value:function(t){return t.x}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.x=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_x,max:e.max_x}}},{key:"sort",value:function(t){Qx(t).call(t,(function(t,e){return t.x-e.x}))}},{key:"fix",value:function(t,e){t.y=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.y=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].x+=e}}]),i}(HP),UP=function(t){ww(i,t);var e=zP(i);function i(t){var o;return yd(this,i),(o=e.call(this)).layout=t,o}return Sp(i,[{key:"curveType",value:function(){return"vertical"}},{key:"getPosition",value:function(t){return t.y}},{key:"setPosition",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;void 0!==i&&this.layout.hierarchical.addToOrdering(t,i),t.y=e}},{key:"getTreeSize",value:function(t){var e=this.layout.hierarchical.getTreeSize(this.layout.body.nodes,t);return{min:e.min_y,max:e.max_y}}},{key:"sort",value:function(t){Qx(t).call(t,(function(t,e){return t.y-e.y}))}},{key:"fix",value:function(t,e){t.x=this.layout.options.hierarchical.levelSeparation*e,t.options.fixed.x=!0}},{key:"shift",value:function(t,e){this.layout.body.nodes[t].y+=e}}]),i}(HP),VP=GA.every;Ya({target:"Array",proto:!0,forced:!Zf("every")},{every:function(t){return VP(this,t,arguments.length>1?arguments[1]:void 0)}});var WP=Kg("Array").every,jP=Or,YP=WP,XP=Array.prototype,ZP=_n((function(t){var e=t.every;return t===XP||jP(XP,t)&&e===XP.every?YP:e}));function KP(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}function QP(t,e){var i=new ux;return sv(t).call(t,(function(t){var e;sv(e=t.edges).call(e,(function(t){t.connected&&i.add(t)}))})),sv(i).call(i,(function(t){var i=t.from.id,o=t.to.id;null==e[i]&&(e[i]=0),(null==e[o]||e[i]>=e[o])&&(e[o]=e[i]+1)})),e}function JP(t,e,i,o){var n,r,s=Xm(null),a=ex(n=vf(dD(o).call(o))).call(n,(function(t,e){return t+1+e.edges.length}),0),g=i+"Id",l="to"===i?1:-1,h=function(t,e){var i=void 0!==mf&&bd(t)||t["@@iterator"];if(!i){if(Nf(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return KP(t,e);var o=wf(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?ed(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?KP(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}(o);try{var c,u=function(){var n=ff(r.value,2),h=n[0],c=n[1];if(!o.has(h)||!t(c))return 0;s[h]=0;for(var u,d,A=[c],I=0,C=function(){var t,n;if(!o.has(h))return 0;var r=s[u.id]+l;if(sv(t=dm(n=u.edges).call(n,(function(t){return t.connected&&t.to!==t.from&&t[i]!==u&&o.has(t.toId)&&o.has(t.fromId)}))).call(t,(function(t){var o=t[g],n=s[o];(null==n||e(r,n))&&(s[o]=r,A.push(t[i]))})),I>a)return{v:{v:QP(o,s)}};++I};u=A.pop();)if(0!==(d=C())&&d)return d.v};for(h.s();!(r=h.n()).done;)if(0!==(c=u())&&c)return c.v}catch(t){h.e(t)}finally{h.f()}return s}var qP=function(){function t(){yd(this,t),this.childrenReference={},this.parentReference={},this.trees={},this.distributionOrdering={},this.levels={},this.distributionIndex={},this.isTree=!1,this.treeIndex=-1}return Sp(t,[{key:"addRelation",value:function(t,e){void 0===this.childrenReference[t]&&(this.childrenReference[t]=[]),this.childrenReference[t].push(e),void 0===this.parentReference[e]&&(this.parentReference[e]=[]),this.parentReference[e].push(t)}},{key:"checkIfTree",value:function(){for(var t in this.parentReference)if(this.parentReference[t].length>1)return void(this.isTree=!1);this.isTree=!0}},{key:"numTrees",value:function(){return this.treeIndex+1}},{key:"setTreeIndex",value:function(t,e){void 0!==e&&void 0===this.trees[t.id]&&(this.trees[t.id]=e,this.treeIndex=Math.max(e,this.treeIndex))}},{key:"ensureLevel",value:function(t){void 0===this.levels[t]&&(this.levels[t]=0)}},{key:"getMaxLevel",value:function(t){var e=this,i={};return function t(o){if(void 0!==i[o])return i[o];var n=e.levels[o];if(e.childrenReference[o]){var r=e.childrenReference[o];if(r.length>0)for(var s=0;s<r.length;s++)n=Math.max(n,t(r[s]))}return i[o]=n,n}(t)}},{key:"levelDownstream",value:function(t,e){void 0===this.levels[e.id]&&(void 0===this.levels[t.id]&&(this.levels[t.id]=0),this.levels[e.id]=this.levels[t.id]+1)}},{key:"setMinLevelToZero",value:function(t){var e=1e9;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&void 0!==this.levels[i]&&(e=Math.min(this.levels[i],e));for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&void 0!==this.levels[o]&&(this.levels[o]-=e)}},{key:"getTreeSize",value:function(t,e){var i=1e9,o=-1e9,n=1e9,r=-1e9;for(var s in this.trees)if(Object.prototype.hasOwnProperty.call(this.trees,s)&&this.trees[s]===e){var a=t[s];i=Math.min(a.x,i),o=Math.max(a.x,o),n=Math.min(a.y,n),r=Math.max(a.y,r)}return{min_x:i,max_x:o,min_y:n,max_y:r}}},{key:"hasSameParent",value:function(t,e){var i=this.parentReference[t.id],o=this.parentReference[e.id];if(void 0===i||void 0===o)return!1;for(var n=0;n<i.length;n++)for(var r=0;r<o.length;r++)if(i[n]==o[r])return!0;return!1}},{key:"inSameSubNetwork",value:function(t,e){return this.trees[t.id]===this.trees[e.id]}},{key:"getLevels",value:function(){return Uf(this.distributionOrdering)}},{key:"addToOrdering",value:function(t,e){void 0===this.distributionOrdering[e]&&(this.distributionOrdering[e]=[]);var i=!1,o=this.distributionOrdering[e];for(var n in o)if(o[n]===t){i=!0;break}i||(this.distributionOrdering[e].push(t),this.distributionIndex[t.id]=this.distributionOrdering[e].length-1)}}]),t}(),t$=function(){function t(e){yd(this,t),this.body=e,this._resetRNG(Math.random()+":"+Yf()),this.setPhysics=!1,this.options={},this.optionsBackup={physics:{}},this.defaultOptions={randomSeed:void 0,improvedLayout:!0,clusterThreshold:150,hierarchical:{enabled:!1,levelSeparation:150,nodeSpacing:100,treeSpacing:200,blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:"UD",sortMethod:"hubsize"}},Lg(this.options,this.defaultOptions),this.bindEventListeners()}return Sp(t,[{key:"bindEventListeners",value:function(){var t=this;this.body.emitter.on("_dataChanged",(function(){t.setupHierarchicalLayout()})),this.body.emitter.on("_dataLoaded",(function(){t.layoutNetwork()})),this.body.emitter.on("_resetHierarchicalLayout",(function(){t.setupHierarchicalLayout()})),this.body.emitter.on("_adjustEdgesForHierarchicalLayout",(function(){if(!0===t.options.hierarchical.enabled){var e=t.direction.curveType();t.body.emitter.emit("_forceDisableDynamicCurves",e,!1)}}))}},{key:"setOptions",value:function(t,e){if(void 0!==t){var i=this.options.hierarchical,o=i.enabled;if(k_(["randomSeed","improvedLayout","clusterThreshold"],this.options,t),U_(this.options,t,"hierarchical"),void 0!==t.randomSeed&&this._resetRNG(t.randomSeed),!0===i.enabled)return!0===o&&this.body.emitter.emit("refresh",!0),"RL"===i.direction||"DU"===i.direction?i.levelSeparation>0&&(i.levelSeparation*=-1):i.levelSeparation<0&&(i.levelSeparation*=-1),this.setDirectionStrategy(),this.body.emitter.emit("_resetHierarchicalLayout"),this.adaptAllOptionsForHierarchicalLayout(e);if(!0===o)return this.body.emitter.emit("refresh"),S_(e,this.optionsBackup)}return e}},{key:"_resetRNG",value:function(t){this.initialRandomSeed=t,this._rng=I_(this.initialRandomSeed)}},{key:"adaptAllOptionsForHierarchicalLayout",value:function(t){if(!0===this.options.hierarchical.enabled){var e=this.optionsBackup.physics;void 0===t.physics||!0===t.physics?(t.physics={enabled:void 0===e.enabled||e.enabled,solver:"hierarchicalRepulsion"},e.enabled=void 0===e.enabled||e.enabled,e.solver=e.solver||"barnesHut"):"object"===Ep(t.physics)?(e.enabled=void 0===t.physics.enabled||t.physics.enabled,e.solver=t.physics.solver||"barnesHut",t.physics.solver="hierarchicalRepulsion"):!1!==t.physics&&(e.solver="barnesHut",t.physics={solver:"hierarchicalRepulsion"});var i=this.direction.curveType();if(void 0===t.edges)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges={smooth:!1};else if(void 0===t.edges.smooth)this.optionsBackup.edges={smooth:{enabled:!0,type:"dynamic"}},t.edges.smooth=!1;else if("boolean"==typeof t.edges.smooth)this.optionsBackup.edges={smooth:t.edges.smooth},t.edges.smooth={enabled:t.edges.smooth,type:i};else{var o=t.edges.smooth;void 0!==o.type&&"dynamic"!==o.type&&(i=o.type),this.optionsBackup.edges={smooth:{enabled:void 0===o.enabled||o.enabled,type:void 0===o.type?"dynamic":o.type,roundness:void 0===o.roundness?.5:o.roundness,forceDirection:void 0!==o.forceDirection&&o.forceDirection}},t.edges.smooth={enabled:void 0===o.enabled||o.enabled,type:i,roundness:void 0===o.roundness?.5:o.roundness,forceDirection:void 0!==o.forceDirection&&o.forceDirection}}this.body.emitter.emit("_forceDisableDynamicCurves",i)}return t}},{key:"positionInitially",value:function(t){if(!0!==this.options.hierarchical.enabled){this._resetRNG(this.initialRandomSeed);for(var e=t.length+50,i=0;i<t.length;i++){var o=t[i],n=2*Math.PI*this._rng();void 0===o.x&&(o.x=e*Math.cos(n)),void 0===o.y&&(o.y=e*Math.sin(n))}}}},{key:"layoutNetwork",value:function(){if(!0!==this.options.hierarchical.enabled&&!0===this.options.improvedLayout){for(var t=this.body.nodeIndices,e=0,i=0;i<t.length;i++)!0===this.body.nodes[t[i]].predefinedPosition&&(e+=1);if(e<.5*t.length){var o=0,n=this.options.clusterThreshold,r={clusterNodeProperties:{shape:"ellipse",label:"",group:"",font:{multi:!1}},clusterEdgeProperties:{label:"",font:{multi:!1},smooth:{enabled:!1}}};if(t.length>n){for(var s=t.length;t.length>n&&o<=10;){o+=1;var a=t.length;if(o%3==0?this.body.modules.clustering.clusterBridges(r):this.body.modules.clustering.clusterOutliers(r),a==t.length&&o%3!=0)return this._declusterAll(),this.body.emitter.emit("_layoutFailed"),void console.info("This network could not be positioned by this version of the improved layout algorithm. Please disable improvedLayout for better performance.")}this.body.modules.kamadaKawai.setOptions({springLength:Math.max(150,2*s)})}o>10&&console.info("The clustering didn't succeed within the amount of interations allowed, progressing with partial result."),this.body.modules.kamadaKawai.solve(t,this.body.edgeIndices,!0),this._shiftToCenter();for(var g=0;g<t.length;g++){var l=this.body.nodes[t[g]];!1===l.predefinedPosition&&(l.x+=70*(.5-this._rng()),l.y+=70*(.5-this._rng()))}this._declusterAll(),this.body.emitter.emit("_repositionBezierNodes")}}}},{key:"_shiftToCenter",value:function(){for(var t=fL.getRangeCore(this.body.nodes,this.body.nodeIndices),e=fL.findCenter(t),i=0;i<this.body.nodeIndices.length;i++){var o=this.body.nodes[this.body.nodeIndices[i]];o.x-=e.x,o.y-=e.y}}},{key:"_declusterAll",value:function(){for(var t=!0;!0===t;){t=!1;for(var e=0;e<this.body.nodeIndices.length;e++)!0===this.body.nodes[this.body.nodeIndices[e]].isCluster&&(t=!0,this.body.modules.clustering.openCluster(this.body.nodeIndices[e],{},!1));!0===t&&this.body.emitter.emit("_dataChanged")}}},{key:"getSeed",value:function(){return this.initialRandomSeed}},{key:"setupHierarchicalLayout",value:function(){if(!0===this.options.hierarchical.enabled&&this.body.nodeIndices.length>0){var t,e,i=!1,o=!1;for(e in this.lastNodeOnLevel={},this.hierarchical=new qP,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,e)&&(void 0!==(t=this.body.nodes[e]).options.level?(i=!0,this.hierarchical.levels[e]=t.options.level):o=!0);if(!0===o&&!0===i)throw new Error("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes.");if(!0===o){var n=this.options.hierarchical.sortMethod;"hubsize"===n?this._determineLevelsByHubsize():"directed"===n?this._determineLevelsDirected():"custom"===n&&this._determineLevelsCustomCallback()}for(var r in this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,r)&&this.hierarchical.ensureLevel(r);var s=this._getDistribution();this._generateMap(),this._placeNodesByHierarchy(s),this._condenseHierarchy(),this._shiftToCenter()}}},{key:"_condenseHierarchy",value:function(){var t=this,e=!1,i={},o=function(e,i){var o=t.hierarchical.trees;for(var n in o)Object.prototype.hasOwnProperty.call(o,n)&&o[n]===e&&t.direction.shift(n,i)},n=function e(i,o){if(!o[i.id]&&(o[i.id]=!0,t.hierarchical.childrenReference[i.id])){var n=t.hierarchical.childrenReference[i.id];if(n.length>0)for(var r=0;r<n.length;r++)e(t.body.nodes[n[r]],o)}},r=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e9,o=1e9,n=1e9,r=1e9,s=-1e9;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var g=t.body.nodes[a],l=t.hierarchical.levels[g.id],h=t.direction.getPosition(g),c=ff(t._getSpaceAroundNode(g,e),2),u=c[0],d=c[1];o=Math.min(u,o),n=Math.min(d,n),l<=i&&(r=Math.min(h,r),s=Math.max(h,s))}return[r,s,o,n]},s=function(e,i,o){for(var n=t.hierarchical,r=0;r<i.length;r++){var s=i[r],a=n.distributionOrdering[s];if(a.length>1)for(var g=0;g<a.length-1;g++){var l=a[g],h=a[g+1];n.hasSameParent(l,h)&&n.inSameSubNetwork(l,h)&&e(l,h,o)}}},a=function(i,o){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=t.direction.getPosition(i),g=t.direction.getPosition(o),l=Math.abs(g-a),h=t.options.hierarchical.nodeSpacing;if(l>h){var c={},u={};n(i,c),n(o,u);var d=function(e,i){var o=t.hierarchical.getMaxLevel(e.id),n=t.hierarchical.getMaxLevel(i.id);return Math.min(o,n)}(i,o),A=r(c,d),I=r(u,d),C=A[1],p=I[0],f=I[2];if(Math.abs(C-p)>h){var v=C-p+h;v<-f+h&&(v=-f+h),v<0&&(t._shiftBlock(o.id,v),e=!0,!0===s&&t._centerParent(o))}}},g=function(o,s){for(var a=s.id,g=s.edges,l=t.hierarchical.levels[s.id],h=t.options.hierarchical.levelSeparation*t.options.hierarchical.levelSeparation,c={},u=[],d=0;d<g.length;d++){var A=g[d];if(A.toId!=A.fromId){var I=A.toId==a?A.from:A.to;c[g[d].id]=I,t.hierarchical.levels[I.id]<l&&u.push(A)}}var C=function(e,i){for(var o=0,n=0;n<i.length;n++)if(void 0!==c[i[n].id]){var r=t.direction.getPosition(c[i[n].id])-e;o+=r/Math.sqrt(r*r+h)}return o},p=function(e,i){for(var o=0,n=0;n<i.length;n++)if(void 0!==c[i[n].id]){var r=t.direction.getPosition(c[i[n].id])-e;o-=h*Math.pow(r*r+h,-1.5)}return o},f=function(e,i){for(var o=t.direction.getPosition(s),n={},r=0;r<e;r++){var a=C(o,i),g=p(o,i);if(void 0!==n[o-=Math.max(-40,Math.min(40,Math.round(a/g)))])break;n[o]=r}return o},v=f(o,u);!function(o){var a=t.direction.getPosition(s);if(void 0===i[s.id]){var g={};n(s,g),i[s.id]=g}var l=r(i[s.id]),h=l[2],c=l[3],u=o-a,d=0;u>0?d=Math.min(u,c-t.options.hierarchical.nodeSpacing):u<0&&(d=-Math.min(-u,h-t.options.hierarchical.nodeSpacing)),0!=d&&(t._shiftBlock(s.id,d),e=!0)}(v),function(i){var o=t.direction.getPosition(s),n=ff(t._getSpaceAroundNode(s),2),r=n[0],a=n[1],g=i-o,l=o;g>0?l=Math.min(o+(a-t.options.hierarchical.nodeSpacing),i):g<0&&(l=Math.max(o-(r-t.options.hierarchical.nodeSpacing),i)),l!==o&&(t.direction.setPosition(s,l),e=!0)}(v=f(o,g))};!0===this.options.hierarchical.blockShifting&&(function(){var i=t.hierarchical.getLevels();i=Cv(i).call(i);for(var o=0;o<5&&(e=!1,s(a,i,!0),!0===e);o++);}(),function(){for(var e in t.body.nodes)Object.prototype.hasOwnProperty.call(t.body.nodes,e)&&t._centerParent(t.body.nodes[e])}()),!0===this.options.hierarchical.edgeMinimization&&function(){var i=t.hierarchical.getLevels();i=Cv(i).call(i);for(var o=0;o<20;o++){e=!1;for(var n=0;n<i.length;n++)for(var r=i[n],s=t.hierarchical.distributionOrdering[r],a=0;a<s.length;a++)g(1e3,s[a]);if(!0!==e)break}}(),!0===this.options.hierarchical.parentCentralization&&function(){var e=t.hierarchical.getLevels();e=Cv(e).call(e);for(var i=0;i<e.length;i++)for(var o=e[i],n=t.hierarchical.distributionOrdering[o],r=0;r<n.length;r++)t._centerParent(n[r])}(),function(){for(var e=function(){for(var e=[],i=0;i<t.hierarchical.numTrees();i++)e.push(t.direction.getTreeSize(i));return e}(),i=0,n=0;n<e.length-1;n++)i+=e[n].max-e[n+1].min+t.options.hierarchical.treeSpacing,o(n+1,i)}()}},{key:"_getSpaceAroundNode",value:function(t,e){var i=!0;void 0===e&&(i=!1);var o=this.hierarchical.levels[t.id];if(void 0!==o){var n=this.hierarchical.distributionIndex[t.id],r=this.direction.getPosition(t),s=this.hierarchical.distributionOrdering[o],a=1e9,g=1e9;if(0!==n){var l=s[n-1];(!0===i&&void 0===e[l.id]||!1===i)&&(a=r-this.direction.getPosition(l))}if(n!=s.length-1){var h=s[n+1];if(!0===i&&void 0===e[h.id]||!1===i){var c=this.direction.getPosition(h);g=Math.min(g,c-r)}}return[a,g]}return[0,0]}},{key:"_centerParent",value:function(t){if(this.hierarchical.parentReference[t.id])for(var e=this.hierarchical.parentReference[t.id],i=0;i<e.length;i++){var o=e[i],n=this.body.nodes[o],r=this.hierarchical.childrenReference[o];if(void 0!==r){var s=this._getCenterPosition(r),a=this.direction.getPosition(n),g=ff(this._getSpaceAroundNode(n),2),l=g[0],h=g[1],c=a-s;(c<0&&Math.abs(c)<h-this.options.hierarchical.nodeSpacing||c>0&&Math.abs(c)<l-this.options.hierarchical.nodeSpacing)&&this.direction.setPosition(n,s)}}}},{key:"_placeNodesByHierarchy",value:function(t){for(var e in this.positionedNodes={},t)if(Object.prototype.hasOwnProperty.call(t,e)){var i,o=Uf(t[e]);o=this._indexArrayToNodes(o),Qx(i=this.direction).call(i,o);for(var n=0,r=0;r<o.length;r++){var s=o[r];if(void 0===this.positionedNodes[s.id]){var a=this.options.hierarchical.nodeSpacing,g=a*n;n>0&&(g=this.direction.getPosition(o[r-1])+a),this.direction.setPosition(s,g,e),this._validatePositionAndContinue(s,e,g),n++}}}}},{key:"_placeBranchNodes",value:function(t,e){var i,o=this.hierarchical.childrenReference[t];if(void 0!==o){for(var n=[],r=0;r<o.length;r++)n.push(this.body.nodes[o[r]]);Qx(i=this.direction).call(i,n);for(var s=0;s<n.length;s++){var a=n[s],g=this.hierarchical.levels[a.id];if(!(g>e&&void 0===this.positionedNodes[a.id]))return;var l,h=this.options.hierarchical.nodeSpacing;l=0===s?this.direction.getPosition(this.body.nodes[t]):this.direction.getPosition(n[s-1])+h,this.direction.setPosition(a,l,g),this._validatePositionAndContinue(a,g,l)}var c=this._getCenterPosition(n);this.direction.setPosition(this.body.nodes[t],c,e)}}},{key:"_validatePositionAndContinue",value:function(t,e,i){if(this.hierarchical.isTree){if(void 0!==this.lastNodeOnLevel[e]){var o=this.direction.getPosition(this.body.nodes[this.lastNodeOnLevel[e]]);if(i-o<this.options.hierarchical.nodeSpacing){var n=o+this.options.hierarchical.nodeSpacing-i,r=this._findCommonParent(this.lastNodeOnLevel[e],t.id);this._shiftBlock(r.withChild,n)}}this.lastNodeOnLevel[e]=t.id,this.positionedNodes[t.id]=!0,this._placeBranchNodes(t.id,e)}}},{key:"_indexArrayToNodes",value:function(t){for(var e=[],i=0;i<t.length;i++)e.push(this.body.nodes[t[i]]);return e}},{key:"_getDistribution",value:function(){var t,e,i={};for(t in this.body.nodes)if(Object.prototype.hasOwnProperty.call(this.body.nodes,t)){e=this.body.nodes[t];var o=void 0===this.hierarchical.levels[t]?0:this.hierarchical.levels[t];this.direction.fix(e,o),void 0===i[o]&&(i[o]={}),i[o][t]=e}return i}},{key:"_getActiveEdges",value:function(t){var e=this,i=[];return D_(t.edges,(function(t){var o;-1!==Wm(o=e.body.edgeIndices).call(o,t.id)&&i.push(t)})),i}},{key:"_getHubSizes",value:function(){var t=this,e={};D_(this.body.nodeIndices,(function(i){var o=t.body.nodes[i],n=t._getActiveEdges(o).length;e[n]=!0}));var i=[];return D_(e,(function(t){i.push(Number(t))})),Qx(i).call(i,(function(t,e){return e-t})),i}},{key:"_determineLevelsByHubsize",value:function(){for(var t=this,e=function(e,i){t.hierarchical.levelDownstream(e,i)},i=this._getHubSizes(),o=function(){var o=i[n];if(0===o)return 1;D_(t.body.nodeIndices,(function(i){var n=t.body.nodes[i];o===t._getActiveEdges(n).length&&t._crawlNetwork(e,i)}))},n=0;n<i.length&&!o();++n);}},{key:"_determineLevelsCustomCallback",value:function(){var t=this;this._crawlNetwork((function(e,i,o){var n=t.hierarchical.levels[e.id];void 0===n&&(n=t.hierarchical.levels[e.id]=1e5);var r=(fL.cloneOptions(e,"node"),fL.cloneOptions(i,"node"),void fL.cloneOptions(o,"edge"));t.hierarchical.levels[i.id]=n+r})),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_determineLevelsDirected",value:function(){var t,e=this,i=ex(t=this.body.nodeIndices).call(t,(function(t,i){return t.set(i,e.body.nodes[i]),t}),new gw);"roots"===this.options.hierarchical.shakeTowards?this.hierarchical.levels=function(t){return JP((function(e){var i,o;return ZP(i=dm(o=e.edges).call(o,(function(e){return t.has(e.toId)}))).call(i,(function(t){return t.from===e}))}),(function(t,e){return e<t}),"to",t)}(i):this.hierarchical.levels=function(t){return JP((function(e){var i,o;return ZP(i=dm(o=e.edges).call(o,(function(e){return t.has(e.toId)}))).call(i,(function(t){return t.to===e}))}),(function(t,e){return e>t}),"from",t)}(i),this.hierarchical.setMinLevelToZero(this.body.nodes)}},{key:"_generateMap",value:function(){var t=this;this._crawlNetwork((function(e,i){t.hierarchical.levels[i.id]>t.hierarchical.levels[e.id]&&t.hierarchical.addRelation(e.id,i.id)})),this.hierarchical.checkIfTree()}},{key:"_crawlNetwork",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},i=arguments.length>1?arguments[1]:void 0,o={},n=function i(n,r){if(void 0===o[n.id]){var s;t.hierarchical.setTreeIndex(n,r),o[n.id]=!0;for(var a=t._getActiveEdges(n),g=0;g<a.length;g++){var l=a[g];!0===l.connected&&(s=l.toId==n.id?l.from:l.to,n.id!=s.id&&(e(n,s,l),i(s,r)))}}};if(void 0===i)for(var r=0,s=0;s<this.body.nodeIndices.length;s++){var a=this.body.nodeIndices[s];void 0===o[a]&&(n(this.body.nodes[a],r),r+=1)}else{var g=this.body.nodes[i];if(void 0===g)return void console.error("Node not found:",i);n(g)}}},{key:"_shiftBlock",value:function(t,e){var i=this,o={};!function t(n){if(!o[n]){o[n]=!0,i.direction.shift(n,e);var r=i.hierarchical.childrenReference[n];if(void 0!==r)for(var s=0;s<r.length;s++)t(r[s])}}(t)}},{key:"_findCommonParent",value:function(t,e){var i=this,o={};return function t(e,o){var n=i.hierarchical.parentReference[o];if(void 0!==n)for(var r=0;r<n.length;r++){var s=n[r];e[s]=!0,t(e,s)}}(o,t),function t(e,o){var n=i.hierarchical.parentReference[o];if(void 0!==n)for(var r=0;r<n.length;r++){var s=n[r];if(void 0!==e[s])return{foundParent:s,withChild:o};var a=t(e,s);if(null!==a.foundParent)return a}return{foundParent:null,withChild:o}}(o,e)}},{key:"setDirectionStrategy",value:function(){var t="UD"===this.options.hierarchical.direction||"DU"===this.options.hierarchical.direction;this.direction=t?new GP(this):new UP(this)}},{key:"_getCenterPosition",value:function(t){for(var e=1e9,i=-1e9,o=0;o<t.length;o++){var n=void 0;if(void 0!==t[o].id)n=t[o];else{var r=t[o];n=this.body.nodes[r]}var s=this.direction.getPosition(n);e=Math.min(e,s),i=Math.max(i,s)}return.5*(e+i)}}]),t}();function e$(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,o=new Array(e);i<e;i++)o[i]=t[i];return o}ll("div.vis-network div.vis-manipulation {\n  box-sizing: content-box;\n\n  border-width: 0;\n  border-bottom: 1px;\n  border-style: solid;\n  border-color: #d6d9d8;\n  background: #ffffff; /* Old browsers */\n  background: -moz-linear-gradient(\n    top,\n    #ffffff 0%,\n    #fcfcfc 48%,\n    #fafafa 50%,\n    #fcfcfc 100%\n  ); /* FF3.6+ */\n  background: -webkit-gradient(\n    linear,\n    left top,\n    left bottom,\n    color-stop(0%, #ffffff),\n    color-stop(48%, #fcfcfc),\n    color-stop(50%, #fafafa),\n    color-stop(100%, #fcfcfc)\n  ); /* Chrome,Safari4+ */\n  background: -webkit-linear-gradient(\n    top,\n    #ffffff 0%,\n    #fcfcfc 48%,\n    #fafafa 50%,\n    #fcfcfc 100%\n  ); /* Chrome10+,Safari5.1+ */\n  background: -o-linear-gradient(\n    top,\n    #ffffff 0%,\n    #fcfcfc 48%,\n    #fafafa 50%,\n    #fcfcfc 100%\n  ); /* Opera 11.10+ */\n  background: -ms-linear-gradient(\n    top,\n    #ffffff 0%,\n    #fcfcfc 48%,\n    #fafafa 50%,\n    #fcfcfc 100%\n  ); /* IE10+ */\n  background: linear-gradient(\n    to bottom,\n    #ffffff 0%,\n    #fcfcfc 48%,\n    #fafafa 50%,\n    #fcfcfc 100%\n  ); /* W3C */\n  filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#fcfcfc',GradientType=0 ); /* IE6-9 */\n\n  padding-top: 4px;\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 28px;\n}\n\ndiv.vis-network div.vis-edit-mode,\ndiv.vis-network button.vis-edit-mode {\n  position: absolute;\n  left: 0;\n  top: 5px;\n  height: 30px;\n}\n\n/* FIXME: shouldn't the vis-close button be a child of the vis-manipulation div? */\n\ndiv.vis-network button.vis-close {\n  position: absolute;\n  right: 0;\n  top: 0;\n  width: 30px;\n  height: 30px;\n\n  background-color: transparent;\n  background-position: 20px 3px;\n  background-repeat: no-repeat;\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAcAAAAHCAYAAADEUlfTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAADvGaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iCiAgICAgICAgICAgIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIKICAgICAgICAgICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZXhpZj0iaHR0cDovL25zLmFkb2JlLmNvbS9leGlmLzEuMC8iPgogICAgICAgICA8eG1wOkNyZWF0b3JUb29sPkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3htcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhtcDpDcmVhdGVEYXRlPjIwMTQtMDItMTRUMTE6NTU6MzUrMDE6MDA8L3htcDpDcmVhdGVEYXRlPgogICAgICAgICA8eG1wOk1ldGFkYXRhRGF0ZT4yMDE0LTAyLTE0VDEyOjA1OjE3KzAxOjAwPC94bXA6TWV0YWRhdGFEYXRlPgogICAgICAgICA8eG1wOk1vZGlmeURhdGU+MjAxNC0wMi0xNFQxMjowNToxNyswMTowMDwveG1wOk1vZGlmeURhdGU+CiAgICAgICAgIDx4bXBNTTpJbnN0YW5jZUlEPnhtcC5paWQ6NjU0YmM5YmQtMWI2Yi1jYjRhLTllOWQtNWY2MzgxNDVjZjk0PC94bXBNTTpJbnN0YW5jZUlEPgogICAgICAgICA8eG1wTU06RG9jdW1lbnRJRD54bXAuZGlkOjk4MmM2MGIwLWUzZjMtMDk0MC04MjU0LTFiZTliNWE0ZTE4MzwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjk4MmM2MGIwLWUzZjMtMDk0MC04MjU0LTFiZTliNWE0ZTE4MzwveG1wTU06T3JpZ2luYWxEb2N1bWVudElEPgogICAgICAgICA8eG1wTU06SGlzdG9yeT4KICAgICAgICAgICAgPHJkZjpTZXE+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmNyZWF0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo5ODJjNjBiMC1lM2YzLTA5NDAtODI1NC0xYmU5YjVhNGUxODM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMTRUMTE6NTU6MzUrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjIxODYxNmM2LTM1MWMtNDI0OS04YWFkLWJkZDQ2ZTczNWE0NDwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0xNFQxMTo1NTozNSswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6NjU0YmM5YmQtMWI2Yi1jYjRhLTllOWQtNWY2MzgxNDVjZjk0PC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAyLTE0VDEyOjA1OjE3KzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgPC9yZGY6U2VxPgogICAgICAgICA8L3htcE1NOkhpc3Rvcnk+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDAwMC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDAwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjc8L2V4aWY6UGl4ZWxYRGltZW5zaW9uPgogICAgICAgICA8ZXhpZjpQaXhlbFlEaW1lbnNpb24+NzwvZXhpZjpQaXhlbFlEaW1lbnNpb24+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgIAo8P3hwYWNrZXQgZW5kPSJ3Ij8+cZUZMwAAACBjSFJNAAB6JQAAgIMAAPn/AACA6QAAdTAAAOpgAAA6mAAAF2+SX8VGAAAA2ElEQVR42gDLADT/AS0tLUQFBQUVFxcXtPHx8fPl5eUNCAgITCkpKesEHx8fGgYGBjH+/v4a+Pj4qgQEBFU6OjodMTExzwQUFBSvEBAQEfX19SD19fVqNDQ0CElJSd/9/f2vAwEBAfrn5+fkBwcHLRYWFgsXFxfz29vbo9LS0uwDDQ0NDfPz81orKysXIyMj+ODg4Avh4eEa/f391gMkJCRYPz8/KUhISOMCAgKh8fHxHRsbGx4UFBQQBDk5OeY7Ozv7CAgItPb29vMEBASaJSUlTQ0NDesDAEwpT0Ko8Ri2AAAAAElFTkSuQmCC');\n  border: none;\n  cursor: pointer;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\ndiv.vis-network button.vis-close:hover {\n  opacity: 0.6;\n}\n\ndiv.vis-network div.vis-manipulation button.vis-button,\ndiv.vis-network div.vis-edit-mode button.vis-button {\n  float: left;\n  font-family: verdana;\n  font-size: 12px;\n  border: none;\n  box-sizing: content-box;\n  -moz-border-radius: 15px;\n  border-radius: 15px;\n  background-color: transparent;\n  background-position: 0px 0px;\n  background-repeat: no-repeat;\n  height: 24px;\n  margin-left: 10px;\n  cursor: pointer;\n  padding: 0px 8px 0px 8px;\n  -webkit-touch-callout: none;\n  -webkit-user-select: none;\n  -khtml-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n}\n\ndiv.vis-network div.vis-manipulation button.vis-button:hover {\n  box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.2);\n}\n\ndiv.vis-network div.vis-manipulation button.vis-button:active {\n  box-shadow: 1px 1px 8px rgba(0, 0, 0, 0.5);\n}\n\ndiv.vis-network div.vis-manipulation button.vis-button.vis-back {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAEEOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNC0wMi0wNFQxNTowMTowOSswMTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDItMDRUMTU6MDE6MDkrMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOmI2YjQwMjVkLTAxNjQtMzU0OC1hOTdlLTQ4ZmYxMWM3NTYzMzwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6RUE2MEEyNEUxOTg0RTMxMUFEQUZFRkU2RUMzMzNFMDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDEtMjNUMTk6MTg6MDcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDpmOWQ3OGY4ZC1lNzY0LTc1NDgtODZiNy1iNmQ1OGMzZDg2OTc8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMDRUMTU6MDE6MDkrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOmI2YjQwMjVkLTAxNjQtMzU0OC1hOTdlLTQ4ZmYxMWM3NTYzMzwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0wNFQxNTowMTowOSswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOmY5ZDc4ZjhkLWU3NjQtNzU0OC04NmI3LWI2ZDU4YzNkODY5Nzwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDA5MC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDkwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4jq1U/AAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAVTSURBVHjanFVfTFNnFP+d77ve8qeVFbBrpcVgRrCRFikFByLxwSAaE32oRCHD6JMxxhhn8G2RxxH3MsOTbyYsmCAxPMmMMYtkIUYmK60OO0qAK23BFlNob0uh3x7WS5jLZPpLbm6+k/P9zrm5v9855PF4UFhYCABgjIExBgAgIqRSqRIi6gDQRkQ1RGTB3wgR0e8AHgH4Sa/XR/EBiAiJRAJ04cIF5Ofng4g2n0gkUkxENwF0c843LzHGQEQQQkCLExEA9ALotVgsUQAQQmgNQhJCbF5kjCEUCl0moj4t5na7fTU1NUpVVVXUYrEkASAcDhe8efOmxOfzWScmJqoBdBNR99LS0hWz2dynNSSEAF28eBGFhYVgjCEcDn9HRD1EhIMHD3o9Hs9kWVlZAh9BKBQqGB4edr58+dKZ+6JbJpOpBwBWV1fB6+rqIMsyIpHIFcZYL2MMra2tY5cuXRrfuXNnBtvAYDBk3G63oqpqZm5uzgrgSDKZjBoMhueZTAbc5XIhFouVEtFTxhiOHTs2dv78eS8+Efv374+oqpqZnZ21cs5PJJPJPlmWkyynnBuMMTQ0NHi7uro+mVyDx+Pxulwu71ZOlkqlSonoJhGhvb39s8k1nDx50ss5hyRJN9PpdKlERB2aWjSVaEilUvzBgwcORVEs5eXloXPnzk1sV8BkMiUdDofP7/dXZ7PZDilnIhw4cGBeS1pbW2P37t1zBwKBikQiUUREWFhYsHHO0d7evm0Ru90+/+rVq2rO+XGJiJxEhMrKyhgAjI6OWoeHh5tWVla+4JzDZrO9bW5unhwcHGzz+/32np4e+xaDbfoHAMxmc6ijo2O0oqIiJkkSNjY2HBIRmRljMJvNyWfPnln7+/tPMMZQXl6+0NbW9qK2tjYcj8floaEhqKpq+HCkbD3PzMwYBgYG0NXV9UuusFna2kEgELAQEQ4dOvSis7PzN41Ar9dnrl27NqCNkv/C3bt3zy4tLVmICJxzEBFJRBQmorLFxcWCqqqq0Pj4eO3Y2JhbUZTdra2tL2pra8OJRGLHnTt3zkqS9K+huHU4EhHMZnMoGo0W5OIh7nK5jjLGKq1W69vDhw8rRqMxMjc3t2t5eXnX5ORklc/nM+fl5SWnpqa+0uv1K/n5+Ws6nW5NluXNd15e3ppOp1uz2WyzZ86cGQ0Gg6ZAIFCZzWZ/lYjokRDiuN/vt7W0tMw3NTUpbrd78P79++5gMFgRiUTKHj58WMYYQ3V19etTp05tq6Lp6Wkb5xxCiEfc7XZPM8a6FxcXTfX19a/1en2Gcy5qamreNjY2/qGq6joRZe12+9Tp06e3JY/FYgWPHz8+mhvr3/CWlpbk+vp6PmOseWVlBS6XS9GSJUkSdrs93NDQ8Oe+ffvC/8fJIyMjddFo9Esi6pVleVjT2m0A8Hq9zqGhIefnjoknT544A4GAM/eDbxMReFNTE0pKSpKqqsaI6Pj8/LxVVdWM3W6PfCr5xMTE1zllXS0uLn6aSqXAGxsbodPpoNfrn6uqCs75EUVRrJFIZMfevXsXdTrdxseIE4mEPDIyUu/3++tynd8yGo29RIR0Og26fv06ioqKwBgD5xzv3r27zBjrIyJIkgSHwzFZWVmp7NmzJ1ZaWpoAgGg0WqgoSvHMzIw1GAw6tvjhitFo7NPW5fv370Hd3d0oKCgA53zTQMvLy+VCiKuSJH0rSdLmztZytIWv5RPRD0T0Y3Fx8dzWfby6ugopHo//w4mcc8iyPMc5v5FOp7/PZrOdQohWInIC2C2EgBBigYi8Qoifs9lsv06nWyIiaFxagXg8jr8GAGxuIe7LBeWhAAAAAElFTkSuQmCC');\n}\n\ndiv.vis-network div.vis-manipulation div.vis-none:hover {\n  box-shadow: 1px 1px 8px rgba(0, 0, 0, 0);\n  cursor: default;\n}\ndiv.vis-network div.vis-manipulation div.vis-none:active {\n  box-shadow: 1px 1px 8px rgba(0, 0, 0, 0);\n}\ndiv.vis-network div.vis-manipulation div.vis-none {\n  padding: 0px;\n  line-height: 23px;\n}\ndiv.vis-network div.vis-manipulation div.notification {\n  margin: 2px;\n  font-weight: bold;\n}\n\ndiv.vis-network div.vis-manipulation button.vis-button.vis-add {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAEEOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNC0wMi0wNFQxNDo0MDoyOSswMTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDItMDRUMTQ6NDA6MjkrMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjVkNWIwNmQwLTVmMjAtOGE0NC1hMzIwLWZmMTEzMzQwNDc0YjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6RUE2MEEyNEUxOTg0RTMxMUFEQUZFRkU2RUMzMzNFMDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDEtMjNUMTk6MTg6MDcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo2OWVmYWE1NS01ZTI5LTIzNGUtYTUzMy0xNDkxYjM1NDNmYmE8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMDRUMTQ6NDA6MjkrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjVkNWIwNmQwLTVmMjAtOGE0NC1hMzIwLWZmMTEzMzQwNDc0Yjwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0wNFQxNDo0MDoyOSswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjY5ZWZhYTU1LTVlMjktMjM0ZS1hNTMzLTE0OTFiMzU0M2ZiYTwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDA5MC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDkwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz5WKqp9AAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAYXSURBVHjafFZtUFTXGX7e9z27sveuMCwYV8ElrA7YSFYHtJUPkaaI0aRqG8wP00zUzljDINNSA/2ROtpO24SxnahlxjYd7SSjmUkymcxYlDhQPzHGisEVp8HwYWCVVVgEsrsuLnL74+5uqTF9Z+7cO/d8PO95zvO851BlZSV0XQcAMDOYGQBARDhX3JRmMDYZwLPMWAzGHACYIgwS46oBNBNwtOL8CwE8EkSEUCgE2rJlC2w2G4go8Zwo/bMDgnoG6gxLfAAAYvPDMCCszKTAMIAGAhrWnf15AAAMwwARIRKJgDZv3gy73Q4iAjPjxIr9VVOMRhbAYKB8zvrO0llrfEsdKwLZek6YAPSFvtSu3GtLawu0ZJ6625SHGBQB1T88t6MxvopgMAjaunUrdF0HM+P4yv27DMYeJmB1RqW3Jnf3tQX2p0L4P9EXuqEd7PmDp+XuMU9sRbvXnnt1TxxACgoKYLVacbzsQDUJGkSATe6qi28uPtzusM6Kxie6NHLGUX3lxVUNX9StPHnn4wy3njuUYcu6n2pNi66avcEXnByP/nv8aiaIyrqz2gO5A9+9FI1GIfn5+WhZdTAdjFMkwMvZOy7uWnTAOz3L4Yk71m3t69fdfTDoUGTBeHTUfiHQ6lo7Z2OXJvpDAChKe+aOCdKRKWxZ2+1qb3yyd3GYmRkQ7GQBVs99wfv6on3eR2k4PdTkDEbH7IuS8/svld/561PJS/pDk1/bzwx94pze7xc5v/H+YPY6r5BAkdrJzODTK46lE6PeYEJt7u+8j+OZwCBiEAgAoNgKJoEQf6PvNvdrXgtZoNhSf7q0KZ3B2AQmVMze0Jmt54S/DcDCVig2NcvEUGxJAE4Pl+YOr0iv6BRSIPAmBeBZAmHlE2sH4p1uhrq1s0MnnEQMBsf8wRASAICQQCCITN1X7/sOuc0kgOVp3/fPs2WHv+coG7gQOJUnLGsUCTxEjPzUohEA+NfIWUdtx0+efzA1kSSkIGyBAQNCKgHAEBAJ3u79U7kiAcWoem/gb5Fd33nrH3kp+SMWtuAB+GllMJxMjCx9QRgA3uiqL5kwHiTlpxb3smlfMDGYGPP1hcMAkJvs8ScpfdJspdj+MK6Pf+5+u29vyb4lR4+BGEziVESAkEpw6Av1OhUpHCz4qOXbzFWz4Ncdj/v/o08Lt92ODDgZDCEFJYoUGH4mzugP92puPTf0pD3H7wvfdFZdqSxnMtWjoGAAmG9fOLxjwesdjT2/XzIQ7ks3sycYMSEwGHNtWf5bkX5NkYCJBxUBXiGV0XHvosOt54Zey33j/K+8P33++vjnbiGJbbLE+J9SANAb6nJ2B79wcUwETAwQQ7fMjPzMvfP8ja87HUIKMOiaAqMZhrGmLdAy78eZrwwsTS0eObTs+IdtgVanxBUExqGbb5VzrIISGIoUXsmqbgEhJldCQWqRf27SvPAn/o8XmgLhZsUkR4ll37mhk3n94Z4OlzY/7NLcYZfm7o1z2zT4vsvUNSXqprBCkmiTFbPX90/fh8GIT2sf+zTPdDMf4dVnNg4z+E0ixsGeBs9jd5ViSgLHjCb/peaR+MD3d4/ZJg2llyuG2Vwy7QWAs8PNnn1f7vkGSGxAzE6mk+kxkx/p/4unffSCR0hAoL1EBCYiPNdWNcwkNQTCR7feWX6g+7f/A7I8rcw/U6UEe0Ndrhc/W7mtL9ztmqlSgstSS/zTJ28dalpOpkRryrwbhwBACgsLMWPGDOT4ll3qyeqAkJTdCF7P/CrUY/GkLL1rE+2hTbSH8+0Lb/WEuhzhyaA905blf9Vd/895WnZwLHrPevir/cvOB1oLYpTtLrm6oYGIMDExAaqtrUVKSgqYGSKCk0WHq5ikkWEWtNL0imv5qUW+RclLRjJsrhBAuH1/QL8R7HR4xy5nescuP23E6hOA6mLv+sb4uTw6Ogqqq6uDpmkQkcStorX4XRcM1FjZ+kvFFjCJKU1WpkNJJUqIMtX1RyLeX3JtQ0JRhmGYZ/L27duRnJycuFGISOJ9pqh5lrB6iYgqGOxRrOaa54DcZmKvkJxk8JHC9rKh+KVhOsD4+Dj+MwADIf8n5m4xGwAAAABJRU5ErkJggg==');\n}\n\ndiv.vis-network div.vis-manipulation button.vis-button.vis-edit,\ndiv.vis-network div.vis-edit-mode button.vis-button.vis-edit {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAEEOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNC0wMi0wNVQxNDoxMjoyNSswMTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDItMDVUMTQ6MTI6MjUrMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjY5OTM3ZGZjLTJjNzQtYTU0YS05OTIzLTQyMmZhNDNkMjljNDwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6RUE2MEEyNEUxOTg0RTMxMUFEQUZFRkU2RUMzMzNFMDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDEtMjNUMTk6MTg6MDcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDozOWNhNzE5ZC03YzNlLTUyNGEtYmY1NS03NGVmMmM1MzE0YTc8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMDVUMTQ6MTI6MjUrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjY5OTM3ZGZjLTJjNzQtYTU0YS05OTIzLTQyMmZhNDNkMjljNDwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0wNVQxNDoxMjoyNSswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjM5Y2E3MTlkLTdjM2UtNTI0YS1iZjU1LTc0ZWYyYzUzMTRhNzwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDA5MC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDkwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4ykninAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAYpSURBVHjafFZtTFvnFX7Oea+NudiY2Hwam4CBlgQwXdKREDKUoYg0jbRJ29RJ2VZ1mjRFUxSpA3VTfkzJfkQbS7spU6rtx5Z2UtppScjaHxvLuiatWi2jLEoMIUDCh23g2gbj7+tPuPvhOurawPl1dc99n+c55z33fV46ceIEZFkGADAziAgAQERoe/9ZK4GPM/AcgbsIXAcABCgMvkfAqAa89eDoJyF8LogIqqqChoaGYDAYHr8kItS8uc8iIH6iAa9IkAo5EAQX8pqmgUVBCBggYFgDhv0/GAsBgKZpICJkMhnQ4OAgZFkGEYGZUXmp+0cS+CKBwWA0DVRPOg5Zl2q6zaHyJlnVAMQXVTkwHrUqH0Xsvn+tdQAAMQDgpPLS2MViFY8rkGUZzIzaS/t/xqCzGggtz9e697zsnKhoLUtim4jOq/LE6x7X0nsh16dEZ5a/O3a2SCAOHjwInU6Hujd6ThJ4mCDQ+b2G232v7v6vwarPbQn8MGlMr+X0kpE3Wr5Zt5hL5HPhqYSdQIfKJ+yhxDPKWC6Xg+jt7UXD5b5KBt1kCHS85Ljd8/On3NupfnhFaZj4rWff1B98B1R/hnUmKd36bdtCNl4g0en4edNE/cXwLq8qMTMIPAQwmo/WuHvObA8+9c58k/dKtD0TyZWXN5YGA7ej7epKxspM//7SoNOdWc/Jyq2wiwhDzPxT8cP0jys3VMM7OmL0/77zn4Ydui3b8uiK0jD7RrA77c9Wd57cefPpF+2T6bWsFPWkaiPTCWvTsZpHFU+XrS+8G3AR08F6X+1FJvBxQQzHQOWk2SmrW4FPX/U2LVwPuDZj+fJKl2khPpeyAqA9rzR/YqwuiWXX8taN/CabGkrVuq9YJlkQQDjOAJ5jAhz9Vt9W4N5/rNp8I+vtMV/aZm4zLnUNNt0urdYnF68HWoJj4Wo1mLGUNRr8LEgDgNqeCh8xQIKOsgC7iAjVe83rT9zQa8uNM28u70kspessu8q8zq/V3NcZpVzb9+0zmVhOvvvrhaMVzrJg0zeq7xMVCCwdpnWSGBqjUyJwLTFgbvxie3w31uoWR1Y74r60rdxZqrR8q85t2W2MGCp12bm/KC3hyaSTiMhxuGrKcahqpbjOaDOoEhOEoFqJQCCJvqA85I6bfTdDjQlf2lbxVNlS6wt19yy7jRHZZlDnrinNj/6sHMhnNw2Ogco7O79e5fm/xQywRBBCEAuwn4gQ96bkYj4Vyuq9N1Z3Bj4Od5bs0MXt/dZZ21ctiqFan174q985P+Lfp+U1g7XDON/1ctP458WlVjLyJhOISZE0wM0S1QfuRC3lTjkJAKKEtNC9eIOhSh9xHLZOJRZTFuXDsEoStLkR/768ummsaJG9Pb9oe+9J+xaeSVokiQDSJphAo5uaBuWjiKP4QTqS1cUWU7ayesN66wu22frD1vmVW6GW6T8u9eVjGyZzs+w78Nqu0a2mbvVu1KEJQAgeZRL0liQYyx+GOmKeQpu0rMYsAJPNEFGD2dLodLIy6c9Ys7G8yeSUl3tf2/X3rcBVJSOv34l3sCBogi7z1LH/rBHjl4IJ93/ncQFAnjeImJD0Z8zuCwu9q3djDXqTlAKID5xv+9t2R8n8VcUFBljQ8Gyfe40BYBM4DwDLt8Kue79ZcFkbzfEdbUbv+oN4c9KTtsfm1MbYQqqh+2zrVZYKs/7Ef+byimt1POYiJhDhPBFBIiIEXhxfs7/dfYoIF+auBfYTE/pebx/V8hqBP2ODvD34yvuh/WCAmU75Bx6sIgaI/v5+6PV6JLqUsYr7dpDAoehs0h73pHTWrvKgThYbRSt9UmSjef3MpaUvBz4O72UmADgTOPJguGiZor+/HyUlJWBmJFz+D8xTtlUiOpbwpmrmrweeSXrT+g11k4SBN3RGKUcAVCVdFhyP1nreDbY//NPyEXUlU/Pp4XYycGT6V0Ux2WwWdO7cOZSWlkII8diX7SPPNgDaKdbxoNAxwATBAEkEEgSWCEQAqPAMwqvMdCEwMO0tVqZpWsGTT58+DaPR+PhGIYQAAAgh0P7B3ioW/B0iGiCGiwXbCuOHFSJys6AbYFye2T+xWhT3WYJEIoH/DQBMw3kes8OJPgAAAABJRU5ErkJggg==');\n}\n\ndiv.vis-network div.vis-edit-mode button.vis-button.vis-edit.vis-edit-mode {\n  background-color: #fcfcfc;\n  border: 1px solid #cccccc;\n}\n\ndiv.vis-network div.vis-manipulation button.vis-button.vis-connect {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAEEOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNC0wMi0wNFQxNDozODo1NyswMTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDItMDRUMTQ6Mzg6NTcrMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjlmYjUwMDU0LWE3ODEtMWQ0OC05ZTllLTU2ZWQ5YzhlYjdjNjwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6RUE2MEEyNEUxOTg0RTMxMUFEQUZFRkU2RUMzMzNFMDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDEtMjNUMTk6MTg6MDcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDo3ZWRhMjI0MC0yYTQxLTNlNDQtYWM2My1iNzNiYTE5OWI3Y2E8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMDRUMTQ6Mzg6NTcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjlmYjUwMDU0LWE3ODEtMWQ0OC05ZTllLTU2ZWQ5YzhlYjdjNjwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0wNFQxNDozODo1NyswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjdlZGEyMjQwLTJhNDEtM2U0NC1hYzYzLWI3M2JhMTk5YjdjYTwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDA5MC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDkwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4ubxs+AAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAUtSURBVHjajJZ/bNT1Gcdfz/P53PV6B4W7VltLqdAaplIOiMOoyxxJCSs/Gv/yB4gzJroAosmmDklwkYWR0bQsdmkykoojTpcsWYLxD/lRZdMQkTHRtkLZRqG0tIVe7662vTu43n32x/VKZ/jh89cn38/zvN7P5/l88zwf2blzJz6fDwARQUSm1n8s31CM0/VAnbNmsUPuAsDpgEO+Bg4C7//iyv5hvmMiQiqVQpqamvB6vVNwEeG1JZtCBrYi/MrkAwDNgjhwAlbzICBLA0rDb0+/839C6XQaaWxspLCw8Dp86cbNmqVFJQddE6KzdjZ9D89g+B6fSyCOcyn1nxil+O9xKg5HqWFSHGXLjrP7W/ICqVQK2bNnDz6fDxFh65KNvxbHDhF4rJj2bXPo+IGfcW5h5xL4f99P+FCEMIAob75x9t0dAMlkElNXV4e1lteXbNqiQoMaeOFOjrdU868SD2luYyEP6dUh+sYmSHeOU6GO5Z8VLx5+NNZxIpPJ5AS2L3upROCoCvz8Lo7vnkf77cAHhpiz/zIL9vWz8L8p/NvupmM0Q7pjnAoLqz8tDrc8MnQqYVUVhVdF4LEg7b+rvDn8wDDlH0WoPpukLJImSBaMwjcJqmwWts2jPZLG/8kwYVFeVdXXZcFf4yVDc2cNKfBFmD9X+0ncCP58F48eG+Feo2CAUkvs4dl0V/uJvdXLiiV+ut++n7YLSfxPfMMG54ChzB3WIesVWB2i82bw1AR6fJR7C4VsfYiv6u/k3A9nEgP4zXke8DiYHyAOMK+QxPIgnZ9GqSHr1itQJ8DK2fTerDQ+S/bHRXQJaHSCwNIZ2Xh+7+S3VAmwNMBA/tuPZtErgKquUmdMWIFlRURvdamRNEXGwIWrlP47pTMzLiunxghGMwTLvcTWlHAp77s4QNSrYMQtss6ZMgWqCm5cHoDHO1nbk6K8zEN8+3zatv2Hn1b59EqJZdxmYUERg9P9KwpIiAOTdWUWBXuLzB/vZG3P1Un4PNp2d1MbmyD45TWCxuCsQm0x56bHGHFYEZwxok7toAA9Sfw3hCcoL/NOwi9QO5wmWO1j4JEgZxTkodmcWRGkf3pcX0r8xoAaBixKu4U5/xwndM+0tpAvS6mP+PZK2nb1UBvPEKwKMLDvPj4ESGc55lGy303sdJKQdZB2rkMdctAB/4gzN+/Q2ENNd4LyUi/xN+bTtquX2thk5nk4wI3gAF+OMNcA1nFQDfK+BY5GqbkwWabTY5QZhXWlnNx1ntrY1Rz87fuvw29m/Sn8J+PUGAFj5T19baA1IspuBZp7cx1x4SwG1cEf+lgRSROs8jGwb+Ht4QB/GSSsAhYano39LWIBxNEIbP14hPDuiyS2VtJuHXQlKKvxM/jiXDq/D/xPlwifGMkJZB2NIoKpr69nxeiZxLHicFSFVWfGqBidIP3LSjrWltD94CyufF/4kQgPuVz2Lz93+dDRa9eu5QQ8Hg8/iXee+Dy4CKMs7xqn4nwKz9IirhQqmVuB42m8ey+x7LMoD6iAON782eChhqmRuXfvXgKBAKqKqtI0/8nNKrQI4BVYXkzHgzPpC88gWuHL/caXrhLoGiN0apSKr0ZZRBZM7q2w5ZnLR1oAnHOMjY0hra2tFBQUYIyZmstvVT1Z6eDlAuEVq7merxmwueNPDXy9PvybjKP5mctHLk4/XTKZRJqbm/H7/VNw1VyEMYbW4FN3WNWnnchKoy5sHeVGBRX6VWi3ymFx7r11Ix8MTX/y5C2RSPC/AQB61erowbpqSwAAAABJRU5ErkJggg==');\n}\n\ndiv.vis-network div.vis-manipulation button.vis-button.vis-delete {\n  background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAEEOaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/Pgo8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjUtYzAyMSA3OS4xNTQ5MTEsIDIwMTMvMTAvMjktMTE6NDc6MTYgICAgICAgICI+CiAgIDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIKICAgICAgICAgICAgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIgogICAgICAgICAgICB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIKICAgICAgICAgICAgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIKICAgICAgICAgICAgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiCiAgICAgICAgICAgIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIKICAgICAgICAgICAgeG1sbnM6dGlmZj0iaHR0cDovL25zLmFkb2JlLmNvbS90aWZmLzEuMC8iCiAgICAgICAgICAgIHhtbG5zOmV4aWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vZXhpZi8xLjAvIj4KICAgICAgICAgPHhtcDpDcmVhdG9yVG9vbD5BZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpPC94bXA6Q3JlYXRvclRvb2w+CiAgICAgICAgIDx4bXA6Q3JlYXRlRGF0ZT4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC94bXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhtcDpNZXRhZGF0YURhdGU+MjAxNC0wMi0wNFQxNDo0MTowNCswMTowMDwveG1wOk1ldGFkYXRhRGF0ZT4KICAgICAgICAgPHhtcDpNb2RpZnlEYXRlPjIwMTQtMDItMDRUMTQ6NDE6MDQrMDE6MDA8L3htcDpNb2RpZnlEYXRlPgogICAgICAgICA8ZGM6Zm9ybWF0PmltYWdlL3BuZzwvZGM6Zm9ybWF0PgogICAgICAgICA8eG1wTU06SW5zdGFuY2VJRD54bXAuaWlkOjc3NDkzYmUxLTEyZGItOTg0NC1iNDYyLTg2NGVmNGIzMzM3MTwveG1wTU06SW5zdGFuY2VJRD4KICAgICAgICAgPHhtcE1NOkRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwveG1wTU06RG9jdW1lbnRJRD4KICAgICAgICAgPHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC94bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDx4bXBNTTpIaXN0b3J5PgogICAgICAgICAgICA8cmRmOlNlcT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+Y3JlYXRlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdEV2dDppbnN0YW5jZUlEPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6d2hlbj4yMDE0LTAxLTIyVDE5OjI0OjUxKzAxOjAwPC9zdEV2dDp3aGVuPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6c29mdHdhcmVBZ2VudD5BZG9iZSBQaG90b3Nob3AgQ1M2IChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPnNhdmVkPC9zdEV2dDphY3Rpb24+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDppbnN0YW5jZUlEPnhtcC5paWQ6RUE2MEEyNEUxOTg0RTMxMUFEQUZFRkU2RUMzMzNFMDM8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDEtMjNUMTk6MTg6MDcrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDUzYgKFdpbmRvd3MpPC9zdEV2dDpzb2Z0d2FyZUFnZW50PgogICAgICAgICAgICAgICAgICA8c3RFdnQ6Y2hhbmdlZD4vPC9zdEV2dDpjaGFuZ2VkPgogICAgICAgICAgICAgICA8L3JkZjpsaT4KICAgICAgICAgICAgICAgPHJkZjpsaSByZGY6cGFyc2VUeXBlPSJSZXNvdXJjZSI+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDphY3Rpb24+c2F2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0Omluc3RhbmNlSUQ+eG1wLmlpZDowNmE3NWYwMy04MDdhLWUzNGYtYjk1Zi1jZGU2MjM0Mzg4OGY8L3N0RXZ0Omluc3RhbmNlSUQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDp3aGVuPjIwMTQtMDItMDRUMTQ6NDE6MDQrMDE6MDA8L3N0RXZ0OndoZW4+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpzb2Z0d2FyZUFnZW50PkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cyk8L3N0RXZ0OnNvZnR3YXJlQWdlbnQ+CiAgICAgICAgICAgICAgICAgIDxzdEV2dDpjaGFuZ2VkPi88L3N0RXZ0OmNoYW5nZWQ+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5jb252ZXJ0ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+ZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZzwvc3RFdnQ6cGFyYW1ldGVycz4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgICAgIDxyZGY6bGkgcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6YWN0aW9uPmRlcml2ZWQ8L3N0RXZ0OmFjdGlvbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnBhcmFtZXRlcnM+Y29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9wbmc8L3N0RXZ0OnBhcmFtZXRlcnM+CiAgICAgICAgICAgICAgIDwvcmRmOmxpPgogICAgICAgICAgICAgICA8cmRmOmxpIHJkZjpwYXJzZVR5cGU9IlJlc291cmNlIj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmFjdGlvbj5zYXZlZDwvc3RFdnQ6YWN0aW9uPgogICAgICAgICAgICAgICAgICA8c3RFdnQ6aW5zdGFuY2VJRD54bXAuaWlkOjc3NDkzYmUxLTEyZGItOTg0NC1iNDYyLTg2NGVmNGIzMzM3MTwvc3RFdnQ6aW5zdGFuY2VJRD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OndoZW4+MjAxNC0wMi0wNFQxNDo0MTowNCswMTowMDwvc3RFdnQ6d2hlbj4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OnNvZnR3YXJlQWdlbnQ+QWRvYmUgUGhvdG9zaG9wIENDIChXaW5kb3dzKTwvc3RFdnQ6c29mdHdhcmVBZ2VudD4KICAgICAgICAgICAgICAgICAgPHN0RXZ0OmNoYW5nZWQ+Lzwvc3RFdnQ6Y2hhbmdlZD4KICAgICAgICAgICAgICAgPC9yZGY6bGk+CiAgICAgICAgICAgIDwvcmRmOlNlcT4KICAgICAgICAgPC94bXBNTTpIaXN0b3J5PgogICAgICAgICA8eG1wTU06RGVyaXZlZEZyb20gcmRmOnBhcnNlVHlwZT0iUmVzb3VyY2UiPgogICAgICAgICAgICA8c3RSZWY6aW5zdGFuY2VJRD54bXAuaWlkOjA2YTc1ZjAzLTgwN2EtZTM0Zi1iOTVmLWNkZTYyMzQzODg4Zjwvc3RSZWY6aW5zdGFuY2VJRD4KICAgICAgICAgICAgPHN0UmVmOmRvY3VtZW50SUQ+eG1wLmRpZDpFQTc2MkY5Njc0ODNFMzExOTQ4QkQxM0UyQkU3OTlBMTwvc3RSZWY6ZG9jdW1lbnRJRD4KICAgICAgICAgICAgPHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD54bXAuZGlkOjczQjYyQUFEOTE4M0UzMTE5NDhCRDEzRTJCRTc5OUExPC9zdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ+CiAgICAgICAgIDwveG1wTU06RGVyaXZlZEZyb20+CiAgICAgICAgIDxwaG90b3Nob3A6Q29sb3JNb2RlPjM8L3Bob3Rvc2hvcDpDb2xvck1vZGU+CiAgICAgICAgIDxwaG90b3Nob3A6SUNDUHJvZmlsZT5zUkdCIElFQzYxOTY2LTIuMTwvcGhvdG9zaG9wOklDQ1Byb2ZpbGU+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlhSZXNvbHV0aW9uPjcyMDA5MC8xMDAwMDwvdGlmZjpYUmVzb2x1dGlvbj4KICAgICAgICAgPHRpZmY6WVJlc29sdXRpb24+NzIwMDkwLzEwMDAwPC90aWZmOllSZXNvbHV0aW9uPgogICAgICAgICA8dGlmZjpSZXNvbHV0aW9uVW5pdD4yPC90aWZmOlJlc29sdXRpb25Vbml0PgogICAgICAgICA8ZXhpZjpDb2xvclNwYWNlPjE8L2V4aWY6Q29sb3JTcGFjZT4KICAgICAgICAgPGV4aWY6UGl4ZWxYRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWERpbWVuc2lvbj4KICAgICAgICAgPGV4aWY6UGl4ZWxZRGltZW5zaW9uPjI0PC9leGlmOlBpeGVsWURpbWVuc2lvbj4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgCjw/eHBhY2tldCBlbmQ9InciPz4aYJzYAAAAIGNIUk0AAHolAACAgwAA+f8AAIDpAAB1MAAA6mAAADqYAAAXb5JfxUYAAAYGSURBVHjalJZ7UJTnFcZ/73m/72PdJY1RbhoQp6lkXRAvmIYxdCUadLVOozPNtGObap1JsKipjiShbdoRbeKEiQHpQK3xj0xa03aamTbaTGyAYV1QGeqFi+JyiZFLAlmESBkWRmS3fyzslGkmnZ5/v/M873Oe75zzvqqoqAibzQaAiKCUAkApRdHIK/NFsx2NR91nOSILADDoJyzNaM4xxbtvPHh0iC+JiYkJ1OHDh4mJiUEpFSXPv/ziPC28TIiXDCOSrAClQDSEpsCwJPIhrEBRQpiSytXlQwDhcBilFPfu3UMVFxdjt9ujFTzfcLBADCoEEAFr1ZbrrNjch2vtEImPBgHob7fTcWE+bVXJNJ/NiFQlEGLvieXHKmYqGB8fRx05cgSbzYaIsPvywV8pKFaA7fGtLTzz61YWpo/xVTHQbufsq5lcez9zWuWhk5mvFwMEg0H0+vXrMU2Tn1wp3CtCiQ5DjGd3A/m/v8IDCZP8r4iNmyRrWx/j/5qktykZpXKzAjVDVxPzGqemptDr1q1jX3NRnIJarcDKK2hgR2ULXRfncv7UYv7xpovhnhiW5Mz+kefeSKO6LJ1A1xzEuk/Ojm4mRibpuZaMZW3OCtRUND60NmiICCIUShisx7a2sLMiQn4s77uEQgIabnqdfHIlgT1/qQeg8vs5dHhdCNB1wYn3RIiC995j26stjAbsNH+YiZJCESnS1Y/XxIXu8r4YIPv/VkVs3CTnTy2ms34xro1+sp9po6sxlTu34ultmsPVvy6is86FCHgO+DDs49zpjufBpCG+seYOC9OHaTidieicb9ouVAhKtouAseI710ma7pLuqwmgYfHqAFt+6WdLoQ/LBl11Lm7VudAa8vb72PCin9TlAWIsGGhLACD+kSAZnusYBii1XQAPYWDllt6ov2lrBkDBR2+6Ofuak2//3M+G/T4wAAPW7fPhKfRTVeqk9qQbFKRmDUTxS3N7QYGYmwzCkqklBGlPDEcTNv+sg9tNCbTXuvBWujE0bHrZj9JE1B/wU1Pm5PwJN6YBS9a2kVvQEcWnrh5GTFD3lxkYkqRMgYQlwVldUvDnen73LHTUuqitdKM0eAr9AFQfd1J/yo2aJn+2sn4Wdn5qEFODJskgBIjx5T0uCrQA08pnIjS9PERDjPnfOKXAMEBECUoGEIHBj+2zkt76UQ6dXheGAev3+cg74Kf6uJPqcicbfuond7cPy4SOiy7+tD9nFvZurx00KOk3CNEC+mE+vjSPBc7IWqgqTaPT60IMcO/xsXGa3HfKjRgRdbl7/KDg0jtubje6aHj7c7J3dgLQ2zoPwwQ91SooOQdAW1VKVMHty0kA5Bb48BycJn/LjWFGbLv4thvvb53kFvjJ+XEdWkPfjQVR/CcNKYgGMc8JWt5Fa2j+MIPPuyI2pa4IoHSkt6vLIuRaQ9q32khzt4GCxtNu6k46GeiIR2lIfDQQsafPzq1LGRGL9Gk9d+vrwewvfHPQOoexQVjxdB/auk/zmaUMdsfz6bVUtIalT7bxveP1ZHh6GPDPYeSzeD69kcpIfxymFWLNrka+ljhBTWkWwz2JiJT84YHnz2iPx0P20PkmRF5i6HYiwZFJsn/YzdezbzE3cQibY5xV266z6RfXohakb+xB9CjanCD9qTbW7Grk4WV38VZm0l6dhQiEw9taHSuDqrS0FIfDwXM3X9mHMsvRAk/sauDpQy38P+GtzOTGB9mEpkD0C2dS8n8zOjqK9ng8WJZFU+JTjasGvaCNXPpvJBPoMlm0OoDNMfWVxONfWNSUPUZ7TUQ56tCZlPwSgMnJSVRpaSmxsbFE1raw82ZxAZZRQUiBYUKGp5UlOX2krBzmoUVjiIKhHge9rfPo+Wcy3ZeXIYASgL1/X5RfMXMvj46OosrLy7HZbGitUUohIuzoem0RofALaOsghgWGjky0MiJTL8b0lOvI8hN1DKXKP0jd3TNTWDgcJhgMoo4ePYrD4Yi+KmaeLlprnrtXFo9h/AAlG1AqE8yFmBrC+jO0bgH9EVpO/1F2Dc5g//OAsbEx/j0Af+USsQynL1UAAAAASUVORK5CYII=');\n}\n/* top right bottom left */\ndiv.vis-network div.vis-manipulation div.vis-label,\ndiv.vis-network div.vis-edit-mode div.vis-label {\n  margin: 0 0 0 23px;\n  line-height: 25px;\n}\ndiv.vis-network div.vis-manipulation div.vis-separator-line {\n  float: left;\n  display: inline-block;\n  width: 1px;\n  height: 21px;\n  background-color: #bdbdbd;\n  margin: 0px 7px 0 15px; /*top right bottom left*/\n}\n\n/* TODO: is this redundant?\ndiv.network-navigation_wrapper {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n}\n*/\n");var i$=function(){function t(e,i,o,n){var r,s,a=this;yd(this,t),this.body=e,this.canvas=i,this.selectionHandler=o,this.interactionHandler=n,this.editMode=!1,this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._domEventListenerCleanupQueue=[],this.temporaryUIFunctions={},this.temporaryEventFunctions=[],this.touchTime=0,this.temporaryIds={nodes:[],edges:[]},this.guiEnabled=!1,this.inMode=!1,this.selectedControlNode=void 0,this.options={},this.defaultOptions={enabled:!1,initiallyActive:!1,addNode:!0,addEdge:!0,editNode:void 0,editEdge:!0,deleteNode:!0,deleteEdge:!0,controlNodeStyle:{shape:"dot",size:6,color:{background:"#ff0000",border:"#3c3c3c",highlight:{background:"#07f968",border:"#3c3c3c"}},borderWidth:2,borderWidthSelected:2}},Lg(this.options,this.defaultOptions),this.body.emitter.on("destroy",(function(){a._clean()})),this.body.emitter.on("_dataChanged",il(r=this._restore).call(r,this)),this.body.emitter.on("_resetData",il(s=this._restore).call(s,this))}return Sp(t,[{key:"_restore",value:function(){!1!==this.inMode&&(!0===this.options.initiallyActive?this.enableEditMode():this.disableEditMode())}},{key:"setOptions",value:function(t,e,i){void 0!==e&&(void 0!==e.locale?this.options.locale=e.locale:this.options.locale=i.locale,void 0!==e.locales?this.options.locales=e.locales:this.options.locales=i.locales),void 0!==t&&("boolean"==typeof t?this.options.enabled=t:(this.options.enabled=!0,S_(this.options,t)),!0===this.options.initiallyActive&&(this.editMode=!0),this._setup())}},{key:"toggleEditMode",value:function(){!0===this.editMode?this.disableEditMode():this.enableEditMode()}},{key:"enableEditMode",value:function(){this.editMode=!0,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="block",this.closeDiv.style.display="block",this.editModeDiv.style.display="none",this.showManipulatorToolbar())}},{key:"disableEditMode",value:function(){this.editMode=!1,this._clean(),!0===this.guiEnabled&&(this.manipulationDiv.style.display="none",this.closeDiv.style.display="none",this.editModeDiv.style.display="block",this._createEditButton())}},{key:"showManipulatorToolbar",value:function(){if(this._clean(),this.manipulationDOM={},!0===this.guiEnabled){var t,e;this.editMode=!0,this.manipulationDiv.style.display="block",this.closeDiv.style.display="block";var i=this.selectionHandler.getSelectedNodeCount(),o=this.selectionHandler.getSelectedEdgeCount(),n=i+o,r=this.options.locales[this.options.locale],s=!1;!1!==this.options.addNode&&(this._createAddNodeButton(r),s=!0),!1!==this.options.addEdge&&(!0===s?this._createSeperator(1):s=!0,this._createAddEdgeButton(r)),1===i&&"function"==typeof this.options.editNode?(!0===s?this._createSeperator(2):s=!0,this._createEditNodeButton(r)):1===o&&0===i&&!1!==this.options.editEdge&&(!0===s?this._createSeperator(3):s=!0,this._createEditEdgeButton(r)),0!==n&&(i>0&&!1!==this.options.deleteNode||0===i&&!1!==this.options.deleteEdge)&&(!0===s&&this._createSeperator(4),this._createDeleteButton(r)),this._bindElementEvents(this.closeDiv,il(t=this.toggleEditMode).call(t,this)),this._temporaryBindEvent("select",il(e=this.showManipulatorToolbar).call(e,this))}this.body.emitter.emit("_redraw")}},{key:"addNodeMode",value:function(){var t;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addNode",!0===this.guiEnabled){var e,i=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(i),this._createSeperator(),this._createDescription(i.addDescription||this.options.locales.en.addDescription),this._bindElementEvents(this.closeDiv,il(e=this.toggleEditMode).call(e,this))}this._temporaryBindEvent("click",il(t=this._performAddNode).call(t,this))}},{key:"editNode",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean();var e=this.selectionHandler.getSelectedNodes()[0];if(void 0!==e){if(this.inMode="editNode","function"!=typeof this.options.editNode)throw new Error("No function has been configured to handle the editing of nodes.");if(!0!==e.isCluster){var i=S_({},e.options,!1);if(i.x=e.x,i.y=e.y,2!==this.options.editNode.length)throw new Error("The function for edit does not support two arguments (data, callback)");this.options.editNode(i,(function(e){null!=e&&"editNode"===t.inMode&&t.body.data.nodes.getDataSet().update(e),t.showManipulatorToolbar()}))}else alert(this.options.locales[this.options.locale].editClusterError||this.options.locales.en.editClusterError)}else this.showManipulatorToolbar()}},{key:"addEdgeMode",value:function(){var t,e,i,o,n;if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="addEdge",!0===this.guiEnabled){var r,s=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(s),this._createSeperator(),this._createDescription(s.edgeDescription||this.options.locales.en.edgeDescription),this._bindElementEvents(this.closeDiv,il(r=this.toggleEditMode).call(r,this))}this._temporaryBindUI("onTouch",il(t=this._handleConnect).call(t,this)),this._temporaryBindUI("onDragEnd",il(e=this._finishConnect).call(e,this)),this._temporaryBindUI("onDrag",il(i=this._dragControlNode).call(i,this)),this._temporaryBindUI("onRelease",il(o=this._finishConnect).call(o,this)),this._temporaryBindUI("onDragStart",il(n=this._dragStartEdge).call(n,this)),this._temporaryBindUI("onHold",(function(){}))}},{key:"editEdgeMode",value:function(){if(!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="editEdge","object"!==Ep(this.options.editEdge)||"function"!=typeof this.options.editEdge.editWithoutDrag||(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0===this.edgeBeingEditedId)){if(!0===this.guiEnabled){var t,e=this.options.locales[this.options.locale];this.manipulationDOM={},this._createBackButton(e),this._createSeperator(),this._createDescription(e.editEdgeDescription||this.options.locales.en.editEdgeDescription),this._bindElementEvents(this.closeDiv,il(t=this.toggleEditMode).call(t,this))}if(this.edgeBeingEditedId=this.selectionHandler.getSelectedEdgeIds()[0],void 0!==this.edgeBeingEditedId){var i,o,n,r,s=this.body.edges[this.edgeBeingEditedId],a=this._getNewTargetNode(s.from.x,s.from.y),g=this._getNewTargetNode(s.to.x,s.to.y);this.temporaryIds.nodes.push(a.id),this.temporaryIds.nodes.push(g.id),this.body.nodes[a.id]=a,this.body.nodeIndices.push(a.id),this.body.nodes[g.id]=g,this.body.nodeIndices.push(g.id),this._temporaryBindUI("onTouch",il(i=this._controlNodeTouch).call(i,this)),this._temporaryBindUI("onTap",(function(){})),this._temporaryBindUI("onHold",(function(){})),this._temporaryBindUI("onDragStart",il(o=this._controlNodeDragStart).call(o,this)),this._temporaryBindUI("onDrag",il(n=this._controlNodeDrag).call(n,this)),this._temporaryBindUI("onDragEnd",il(r=this._controlNodeDragEnd).call(r,this)),this._temporaryBindUI("onMouseMove",(function(){})),this._temporaryBindEvent("beforeDrawing",(function(t){var e=s.edgeType.findBorderPositions(t);!1===a.selected&&(a.x=e.from.x,a.y=e.from.y),!1===g.selected&&(g.x=e.to.x,g.y=e.to.y)})),this.body.emitter.emit("_redraw")}else this.showManipulatorToolbar()}else{var l=this.body.edges[this.edgeBeingEditedId];this._performEditEdge(l.from.id,l.to.id)}}},{key:"deleteSelected",value:function(){var t=this;!0!==this.editMode&&this.enableEditMode(),this._clean(),this.inMode="delete";var e=this.selectionHandler.getSelectedNodeIds(),i=this.selectionHandler.getSelectedEdgeIds(),o=void 0;if(e.length>0){for(var n=0;n<e.length;n++)if(!0===this.body.nodes[e[n]].isCluster)return void alert(this.options.locales[this.options.locale].deleteClusterError||this.options.locales.en.deleteClusterError);"function"==typeof this.options.deleteNode&&(o=this.options.deleteNode)}else i.length>0&&"function"==typeof this.options.deleteEdge&&(o=this.options.deleteEdge);if("function"==typeof o){var r={nodes:e,edges:i};if(2!==o.length)throw new Error("The function for delete does not support two arguments (data, callback)");o(r,(function(e){null!=e&&"delete"===t.inMode?(t.body.data.edges.getDataSet().remove(e.edges),t.body.data.nodes.getDataSet().remove(e.nodes),t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar()):(t.body.emitter.emit("startSimulation"),t.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().remove(i),this.body.data.nodes.getDataSet().remove(e),this.body.emitter.emit("startSimulation"),this.showManipulatorToolbar()}},{key:"_setup",value:function(){!0===this.options.enabled?(this.guiEnabled=!0,this._createWrappers(),!1===this.editMode?this._createEditButton():this.showManipulatorToolbar()):(this._removeManipulationDOM(),this.guiEnabled=!1)}},{key:"_createWrappers",value:function(){var t,e;void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="vis-manipulation",!0===this.editMode?this.manipulationDiv.style.display="block":this.manipulationDiv.style.display="none",this.canvas.frame.appendChild(this.manipulationDiv)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="vis-edit-mode",!0===this.editMode?this.editModeDiv.style.display="none":this.editModeDiv.style.display="block",this.canvas.frame.appendChild(this.editModeDiv)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("button"),this.closeDiv.className="vis-close",this.closeDiv.setAttribute("aria-label",null!==(t=null===(e=this.options.locales[this.options.locale])||void 0===e?void 0:e.close)&&void 0!==t?t:this.options.locales.en.close),this.closeDiv.style.display=this.manipulationDiv.style.display,this.canvas.frame.appendChild(this.closeDiv))}},{key:"_getNewTargetNode",value:function(t,e){var i=S_({},this.options.controlNodeStyle);i.id="targetNode"+dM(),i.hidden=!1,i.physics=!1,i.x=t,i.y=e;var o=this.body.functions.createNode(i);return o.shape.boundingBox={left:t,right:t,top:e,bottom:e},o}},{key:"_createEditButton",value:function(){var t;this._clean(),this.manipulationDOM={},y_(this.editModeDiv);var e=this.options.locales[this.options.locale],i=this._createButton("editMode","vis-edit vis-edit-mode",e.edit||this.options.locales.en.edit);this.editModeDiv.appendChild(i),this._bindElementEvents(i,il(t=this.toggleEditMode).call(t,this))}},{key:"_clean",value:function(){this.inMode=!1,!0===this.guiEnabled&&(y_(this.editModeDiv),y_(this.manipulationDiv),this._cleanupDOMEventListeners()),this._cleanupTemporaryNodesAndEdges(),this._unbindTemporaryUIs(),this._unbindTemporaryEvents(),this.body.emitter.emit("restorePhysics")}},{key:"_cleanupDOMEventListeners",value:function(){var t,e,i=function(t,e){var i=void 0!==mf&&bd(t)||t["@@iterator"];if(!i){if(Nf(t)||(i=function(t,e){var i;if(t){if("string"==typeof t)return e$(t,e);var o=wf(i=Object.prototype.toString.call(t)).call(i,8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?ed(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e$(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var o=0,n=function(){};return{s:n,n:function(){return o>=t.length?{done:!0}:{done:!1,value:t[o++]}},e:function(t){throw t},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return s=t.done,t},e:function(t){a=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(a)throw r}}}}($v(t=this._domEventListenerCleanupQueue).call(t,0));try{for(i.s();!(e=i.n()).done;)(0,e.value)()}catch(t){i.e(t)}finally{i.f()}}},{key:"_removeManipulationDOM",value:function(){this._clean(),y_(this.manipulationDiv),y_(this.editModeDiv),y_(this.closeDiv),this.manipulationDiv&&this.canvas.frame.removeChild(this.manipulationDiv),this.editModeDiv&&this.canvas.frame.removeChild(this.editModeDiv),this.closeDiv&&this.canvas.frame.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0}},{key:"_createSeperator",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.manipulationDOM["seperatorLineDiv"+t]=document.createElement("div"),this.manipulationDOM["seperatorLineDiv"+t].className="vis-separator-line",this.manipulationDiv.appendChild(this.manipulationDOM["seperatorLineDiv"+t])}},{key:"_createAddNodeButton",value:function(t){var e,i=this._createButton("addNode","vis-add",t.addNode||this.options.locales.en.addNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,il(e=this.addNodeMode).call(e,this))}},{key:"_createAddEdgeButton",value:function(t){var e,i=this._createButton("addEdge","vis-connect",t.addEdge||this.options.locales.en.addEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,il(e=this.addEdgeMode).call(e,this))}},{key:"_createEditNodeButton",value:function(t){var e,i=this._createButton("editNode","vis-edit",t.editNode||this.options.locales.en.editNode);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,il(e=this.editNode).call(e,this))}},{key:"_createEditEdgeButton",value:function(t){var e,i=this._createButton("editEdge","vis-edit",t.editEdge||this.options.locales.en.editEdge);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,il(e=this.editEdgeMode).call(e,this))}},{key:"_createDeleteButton",value:function(t){var e,i;i=this.options.rtl?"vis-delete-rtl":"vis-delete";var o=this._createButton("delete",i,t.del||this.options.locales.en.del);this.manipulationDiv.appendChild(o),this._bindElementEvents(o,il(e=this.deleteSelected).call(e,this))}},{key:"_createBackButton",value:function(t){var e,i=this._createButton("back","vis-back",t.back||this.options.locales.en.back);this.manipulationDiv.appendChild(i),this._bindElementEvents(i,il(e=this.showManipulatorToolbar).call(e,this))}},{key:"_createButton",value:function(t,e,i){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"vis-label";return this.manipulationDOM[t+"Div"]=document.createElement("button"),this.manipulationDOM[t+"Div"].className="vis-button "+e,this.manipulationDOM[t+"Label"]=document.createElement("div"),this.manipulationDOM[t+"Label"].className=o,this.manipulationDOM[t+"Label"].innerText=i,this.manipulationDOM[t+"Div"].appendChild(this.manipulationDOM[t+"Label"]),this.manipulationDOM[t+"Div"]}},{key:"_createDescription",value:function(t){this.manipulationDOM.descriptionLabel=document.createElement("div"),this.manipulationDOM.descriptionLabel.className="vis-none",this.manipulationDOM.descriptionLabel.innerText=t,this.manipulationDiv.appendChild(this.manipulationDOM.descriptionLabel)}},{key:"_temporaryBindEvent",value:function(t,e){this.temporaryEventFunctions.push({event:t,boundFunction:e}),this.body.emitter.on(t,e)}},{key:"_temporaryBindUI",value:function(t,e){if(void 0===this.body.eventListeners[t])throw new Error("This UI function does not exist. Typo? You tried: "+t+" possible are: "+Jm(Uf(this.body.eventListeners)));this.temporaryUIFunctions[t]=this.body.eventListeners[t],this.body.eventListeners[t]=e}},{key:"_unbindTemporaryUIs",value:function(){for(var t in this.temporaryUIFunctions)Object.prototype.hasOwnProperty.call(this.temporaryUIFunctions,t)&&(this.body.eventListeners[t]=this.temporaryUIFunctions[t],delete this.temporaryUIFunctions[t]);this.temporaryUIFunctions={}}},{key:"_unbindTemporaryEvents",value:function(){for(var t=0;t<this.temporaryEventFunctions.length;t++){var e=this.temporaryEventFunctions[t].event,i=this.temporaryEventFunctions[t].boundFunction;this.body.emitter.off(e,i)}this.temporaryEventFunctions=[]}},{key:"_bindElementEvents",value:function(t,e){var i=new tT(t,{});_L(i,e),this._domEventListenerCleanupQueue.push((function(){i.destroy()}));var o=function(t){var i=t.keyCode,o=t.key;"Enter"!==o&&" "!==o&&13!==i&&32!==i||e()};t.addEventListener("keyup",o,!1),this._domEventListenerCleanupQueue.push((function(){t.removeEventListener("keyup",o,!1)}))}},{key:"_cleanupTemporaryNodesAndEdges",value:function(){for(var t=0;t<this.temporaryIds.edges.length;t++){var e;this.body.edges[this.temporaryIds.edges[t]].disconnect(),delete this.body.edges[this.temporaryIds.edges[t]];var i,o=Wm(e=this.body.edgeIndices).call(e,this.temporaryIds.edges[t]);-1!==o&&$v(i=this.body.edgeIndices).call(i,o,1)}for(var n=0;n<this.temporaryIds.nodes.length;n++){var r;delete this.body.nodes[this.temporaryIds.nodes[n]];var s,a=Wm(r=this.body.nodeIndices).call(r,this.temporaryIds.nodes[n]);-1!==a&&$v(s=this.body.nodeIndices).call(s,a,1)}this.temporaryIds={nodes:[],edges:[]}}},{key:"_controlNodeTouch",value:function(t){this.selectionHandler.unselectAll(),this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Lg({},this.body.view.translation)}},{key:"_controlNodeDragStart",value:function(){var t=this.lastTouch,e=this.selectionHandler._pointerToPositionObject(t),i=this.body.nodes[this.temporaryIds.nodes[0]],o=this.body.nodes[this.temporaryIds.nodes[1]],n=this.body.edges[this.edgeBeingEditedId];this.selectedControlNode=void 0;var r=i.isOverlappingWith(e),s=o.isOverlappingWith(e);!0===r?(this.selectedControlNode=i,n.edgeType.from=i):!0===s&&(this.selectedControlNode=o,n.edgeType.to=o),void 0!==this.selectedControlNode&&this.selectionHandler.selectObject(this.selectedControlNode),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDrag",value:function(t){this.body.emitter.emit("disablePhysics");var e=this.body.functions.getPointer(t.center),i=this.canvas.DOMtoCanvas(e);void 0!==this.selectedControlNode?(this.selectedControlNode.x=i.x,this.selectedControlNode.y=i.y):this.interactionHandler.onDrag(t),this.body.emitter.emit("_redraw")}},{key:"_controlNodeDragEnd",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),o=this.body.edges[this.edgeBeingEditedId];if(void 0!==this.selectedControlNode){this.selectionHandler.unselectAll();for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),r=void 0,s=n.length-1;s>=0;s--)if(n[s]!==this.selectedControlNode.id){r=this.body.nodes[n[s]];break}if(void 0!==r&&void 0!==this.selectedControlNode)if(!0===r.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var a=this.body.nodes[this.temporaryIds.nodes[0]];this.selectedControlNode.id===a.id?this._performEditEdge(r.id,o.to.id):this._performEditEdge(o.from.id,r.id)}else o.updateEdgeType(),this.body.emitter.emit("restorePhysics");this.body.emitter.emit("_redraw")}}},{key:"_handleConnect",value:function(t){if((new Date).valueOf()-this.touchTime>100){this.lastTouch=this.body.functions.getPointer(t.center),this.lastTouch.translation=Lg({},this.body.view.translation),this.interactionHandler.drag.pointer=this.lastTouch,this.interactionHandler.drag.translation=this.lastTouch.translation;var e=this.lastTouch,i=this.selectionHandler.getNodeAt(e);if(void 0!==i)if(!0===i.isCluster)alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError);else{var o=this._getNewTargetNode(i.x,i.y);this.body.nodes[o.id]=o,this.body.nodeIndices.push(o.id);var n=this.body.functions.createEdge({id:"connectionEdge"+dM(),from:i.id,to:o.id,physics:!1,smooth:{enabled:!0,type:"continuous",roundness:.5}});this.body.edges[n.id]=n,this.body.edgeIndices.push(n.id),this.temporaryIds.nodes.push(o.id),this.temporaryIds.edges.push(n.id)}this.touchTime=(new Date).valueOf()}}},{key:"_dragControlNode",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),o=void 0;void 0!==this.temporaryIds.edges[0]&&(o=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),r=void 0,s=n.length-1;s>=0;s--){var a;if(-1===Wm(a=this.temporaryIds.nodes).call(a,n[s])){r=this.body.nodes[n[s]];break}}if(t.controlEdge={from:o,to:r?r.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragging",t,e),void 0!==this.temporaryIds.nodes[0]){var g=this.body.nodes[this.temporaryIds.nodes[0]];g.x=this.canvas._XconvertDOMtoCanvas(e.x),g.y=this.canvas._YconvertDOMtoCanvas(e.y),this.body.emitter.emit("_redraw")}else this.interactionHandler.onDrag(t)}},{key:"_finishConnect",value:function(t){var e=this.body.functions.getPointer(t.center),i=this.selectionHandler._pointerToPositionObject(e),o=void 0;void 0!==this.temporaryIds.edges[0]&&(o=this.body.edges[this.temporaryIds.edges[0]].fromId);for(var n=this.selectionHandler._getAllNodesOverlappingWith(i),r=void 0,s=n.length-1;s>=0;s--){var a;if(-1===Wm(a=this.temporaryIds.nodes).call(a,n[s])){r=this.body.nodes[n[s]];break}}this._cleanupTemporaryNodesAndEdges(),void 0!==r&&(!0===r.isCluster?alert(this.options.locales[this.options.locale].createEdgeError||this.options.locales.en.createEdgeError):void 0!==this.body.nodes[o]&&void 0!==this.body.nodes[r.id]&&this._performAddEdge(o,r.id)),t.controlEdge={from:o,to:r?r.id:void 0},this.selectionHandler.generateClickEvent("controlNodeDragEnd",t,e),this.body.emitter.emit("_redraw")}},{key:"_dragStartEdge",value:function(t){var e=this.lastTouch;this.selectionHandler.generateClickEvent("dragStart",t,e,void 0,!0)}},{key:"_performAddNode",value:function(t){var e=this,i={id:dM(),x:t.pointer.canvas.x,y:t.pointer.canvas.y,label:"new"};if("function"==typeof this.options.addNode){if(2!==this.options.addNode.length)throw this.showManipulatorToolbar(),new Error("The function for add does not support two arguments (data,callback)");this.options.addNode(i,(function(t){null!=t&&"addNode"===e.inMode&&e.body.data.nodes.getDataSet().add(t),e.showManipulatorToolbar()}))}else this.body.data.nodes.getDataSet().add(i),this.showManipulatorToolbar()}},{key:"_performAddEdge",value:function(t,e){var i=this,o={from:t,to:e};if("function"==typeof this.options.addEdge){if(2!==this.options.addEdge.length)throw new Error("The function for connect does not support two arguments (data,callback)");this.options.addEdge(o,(function(t){null!=t&&"addEdge"===i.inMode&&(i.body.data.edges.getDataSet().add(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().add(o),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}},{key:"_performEditEdge",value:function(t,e){var i=this,o={id:this.edgeBeingEditedId,from:t,to:e,label:this.body.data.edges.get(this.edgeBeingEditedId).label},n=this.options.editEdge;if("object"===Ep(n)&&(n=n.editWithoutDrag),"function"==typeof n){if(2!==n.length)throw new Error("The function for edit does not support two arguments (data, callback)");n(o,(function(t){null==t||"editEdge"!==i.inMode?(i.body.edges[o.id].updateEdgeType(),i.body.emitter.emit("_redraw"),i.showManipulatorToolbar()):(i.body.data.edges.getDataSet().update(t),i.selectionHandler.unselectAll(),i.showManipulatorToolbar())}))}else this.body.data.edges.getDataSet().update(o),this.selectionHandler.unselectAll(),this.showManipulatorToolbar()}}]),t}(),o$="string",n$="boolean",r$="number",s$="array",a$="object",g$=["arrow","bar","box","circle","crow","curve","diamond","image","inv_curve","inv_triangle","triangle","vee"],l$={borderWidth:{number:r$},borderWidthSelected:{number:r$,undefined:"undefined"},brokenImage:{string:o$,undefined:"undefined"},chosen:{label:{boolean:n$,function:"function"},node:{boolean:n$,function:"function"},__type__:{object:a$,boolean:n$}},color:{border:{string:o$},background:{string:o$},highlight:{border:{string:o$},background:{string:o$},__type__:{object:a$,string:o$}},hover:{border:{string:o$},background:{string:o$},__type__:{object:a$,string:o$}},__type__:{object:a$,string:o$}},opacity:{number:r$,undefined:"undefined"},fixed:{x:{boolean:n$},y:{boolean:n$},__type__:{object:a$,boolean:n$}},font:{align:{string:o$},color:{string:o$},size:{number:r$},face:{string:o$},background:{string:o$},strokeWidth:{number:r$},strokeColor:{string:o$},vadjust:{number:r$},multi:{boolean:n$,string:o$},bold:{color:{string:o$},size:{number:r$},face:{string:o$},mod:{string:o$},vadjust:{number:r$},__type__:{object:a$,string:o$}},boldital:{color:{string:o$},size:{number:r$},face:{string:o$},mod:{string:o$},vadjust:{number:r$},__type__:{object:a$,string:o$}},ital:{color:{string:o$},size:{number:r$},face:{string:o$},mod:{string:o$},vadjust:{number:r$},__type__:{object:a$,string:o$}},mono:{color:{string:o$},size:{number:r$},face:{string:o$},mod:{string:o$},vadjust:{number:r$},__type__:{object:a$,string:o$}},__type__:{object:a$,string:o$}},group:{string:o$,number:r$,undefined:"undefined"},heightConstraint:{minimum:{number:r$},valign:{string:o$},__type__:{object:a$,boolean:n$,number:r$}},hidden:{boolean:n$},icon:{face:{string:o$},code:{string:o$},size:{number:r$},color:{string:o$},weight:{string:o$,number:r$},__type__:{object:a$}},id:{string:o$,number:r$},image:{selected:{string:o$,undefined:"undefined"},unselected:{string:o$,undefined:"undefined"},__type__:{object:a$,string:o$}},imagePadding:{top:{number:r$},right:{number:r$},bottom:{number:r$},left:{number:r$},__type__:{object:a$,number:r$}},label:{string:o$,undefined:"undefined"},labelHighlightBold:{boolean:n$},level:{number:r$,undefined:"undefined"},margin:{top:{number:r$},right:{number:r$},bottom:{number:r$},left:{number:r$},__type__:{object:a$,number:r$}},mass:{number:r$},physics:{boolean:n$},scaling:{min:{number:r$},max:{number:r$},label:{enabled:{boolean:n$},min:{number:r$},max:{number:r$},maxVisible:{number:r$},drawThreshold:{number:r$},__type__:{object:a$,boolean:n$}},customScalingFunction:{function:"function"},__type__:{object:a$}},shadow:{enabled:{boolean:n$},color:{string:o$},size:{number:r$},x:{number:r$},y:{number:r$},__type__:{object:a$,boolean:n$}},shape:{string:["custom","ellipse","circle","database","box","text","image","circularImage","diamond","dot","star","triangle","triangleDown","square","icon","hexagon"]},ctxRenderer:{function:"function"},shapeProperties:{borderDashes:{boolean:n$,array:s$},borderRadius:{number:r$},interpolation:{boolean:n$},useImageSize:{boolean:n$},useBorderWithImage:{boolean:n$},coordinateOrigin:{string:["center","top-left"]},__type__:{object:a$}},size:{number:r$},title:{string:o$,dom:"dom",undefined:"undefined"},value:{number:r$,undefined:"undefined"},widthConstraint:{minimum:{number:r$},maximum:{number:r$},__type__:{object:a$,boolean:n$,number:r$}},x:{number:r$},y:{number:r$},__type__:{object:a$}},h$={configure:{enabled:{boolean:n$},filter:{boolean:n$,string:o$,array:s$,function:"function"},container:{dom:"dom"},showButton:{boolean:n$},__type__:{object:a$,boolean:n$,string:o$,array:s$,function:"function"}},edges:{arrows:{to:{enabled:{boolean:n$},scaleFactor:{number:r$},type:{string:g$},imageHeight:{number:r$},imageWidth:{number:r$},src:{string:o$},__type__:{object:a$,boolean:n$}},middle:{enabled:{boolean:n$},scaleFactor:{number:r$},type:{string:g$},imageWidth:{number:r$},imageHeight:{number:r$},src:{string:o$},__type__:{object:a$,boolean:n$}},from:{enabled:{boolean:n$},scaleFactor:{number:r$},type:{string:g$},imageWidth:{number:r$},imageHeight:{number:r$},src:{string:o$},__type__:{object:a$,boolean:n$}},__type__:{string:["from","to","middle"],object:a$}},endPointOffset:{from:{number:r$},to:{number:r$},__type__:{object:a$,number:r$}},arrowStrikethrough:{boolean:n$},background:{enabled:{boolean:n$},color:{string:o$},size:{number:r$},dashes:{boolean:n$,array:s$},__type__:{object:a$,boolean:n$}},chosen:{label:{boolean:n$,function:"function"},edge:{boolean:n$,function:"function"},__type__:{object:a$,boolean:n$}},color:{color:{string:o$},highlight:{string:o$},hover:{string:o$},inherit:{string:["from","to","both"],boolean:n$},opacity:{number:r$},__type__:{object:a$,string:o$}},dashes:{boolean:n$,array:s$},font:{color:{string:o$},size:{number:r$},face:{string:o$},background:{string:o$},strokeWidth:{number:r$},strokeColor:{string:o$},align:{string:["horizontal","top","middle","bottom"]},vadjust:{number:r$},multi:{boolean:n$,string:o$},bold:{color:{string:o$},size:{number:r$},face:{string:o$},mod:{string:o$},vadjust:{number:r$},__type__:{object:a$,string:o$}},boldital:{color:{string:o$},size:{number:r$},face:{string:o$},mod:{string:o$},vadjust:{number:r$},__type__:{object:a$,string:o$}},ital:{color:{string:o$},size:{number:r$},face:{string:o$},mod:{string:o$},vadjust:{number:r$},__type__:{object:a$,string:o$}},mono:{color:{string:o$},size:{number:r$},face:{string:o$},mod:{string:o$},vadjust:{number:r$},__type__:{object:a$,string:o$}},__type__:{object:a$,string:o$}},hidden:{boolean:n$},hoverWidth:{function:"function",number:r$},label:{string:o$,undefined:"undefined"},labelHighlightBold:{boolean:n$},length:{number:r$,undefined:"undefined"},physics:{boolean:n$},scaling:{min:{number:r$},max:{number:r$},label:{enabled:{boolean:n$},min:{number:r$},max:{number:r$},maxVisible:{number:r$},drawThreshold:{number:r$},__type__:{object:a$,boolean:n$}},customScalingFunction:{function:"function"},__type__:{object:a$}},selectionWidth:{function:"function",number:r$},selfReferenceSize:{number:r$},selfReference:{size:{number:r$},angle:{number:r$},renderBehindTheNode:{boolean:n$},__type__:{object:a$}},shadow:{enabled:{boolean:n$},color:{string:o$},size:{number:r$},x:{number:r$},y:{number:r$},__type__:{object:a$,boolean:n$}},smooth:{enabled:{boolean:n$},type:{string:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"]},roundness:{number:r$},forceDirection:{string:["horizontal","vertical","none"],boolean:n$},__type__:{object:a$,boolean:n$}},title:{string:o$,undefined:"undefined"},width:{number:r$},widthConstraint:{maximum:{number:r$},__type__:{object:a$,boolean:n$,number:r$}},value:{number:r$,undefined:"undefined"},__type__:{object:a$}},groups:{useDefaultGroups:{boolean:n$},__any__:l$,__type__:{object:a$}},interaction:{dragNodes:{boolean:n$},dragView:{boolean:n$},hideEdgesOnDrag:{boolean:n$},hideEdgesOnZoom:{boolean:n$},hideNodesOnDrag:{boolean:n$},hover:{boolean:n$},keyboard:{enabled:{boolean:n$},speed:{x:{number:r$},y:{number:r$},zoom:{number:r$},__type__:{object:a$}},bindToWindow:{boolean:n$},autoFocus:{boolean:n$},__type__:{object:a$,boolean:n$}},multiselect:{boolean:n$},navigationButtons:{boolean:n$},selectable:{boolean:n$},selectConnectedEdges:{boolean:n$},hoverConnectedEdges:{boolean:n$},tooltipDelay:{number:r$},zoomView:{boolean:n$},zoomSpeed:{number:r$},__type__:{object:a$}},layout:{randomSeed:{undefined:"undefined",number:r$,string:o$},improvedLayout:{boolean:n$},clusterThreshold:{number:r$},hierarchical:{enabled:{boolean:n$},levelSeparation:{number:r$},nodeSpacing:{number:r$},treeSpacing:{number:r$},blockShifting:{boolean:n$},edgeMinimization:{boolean:n$},parentCentralization:{boolean:n$},direction:{string:["UD","DU","LR","RL"]},sortMethod:{string:["hubsize","directed"]},shakeTowards:{string:["leaves","roots"]},__type__:{object:a$,boolean:n$}},__type__:{object:a$}},manipulation:{enabled:{boolean:n$},initiallyActive:{boolean:n$},addNode:{boolean:n$,function:"function"},addEdge:{boolean:n$,function:"function"},editNode:{function:"function"},editEdge:{editWithoutDrag:{function:"function"},__type__:{object:a$,boolean:n$,function:"function"}},deleteNode:{boolean:n$,function:"function"},deleteEdge:{boolean:n$,function:"function"},controlNodeStyle:l$,__type__:{object:a$,boolean:n$}},nodes:l$,physics:{enabled:{boolean:n$},barnesHut:{theta:{number:r$},gravitationalConstant:{number:r$},centralGravity:{number:r$},springLength:{number:r$},springConstant:{number:r$},damping:{number:r$},avoidOverlap:{number:r$},__type__:{object:a$}},forceAtlas2Based:{theta:{number:r$},gravitationalConstant:{number:r$},centralGravity:{number:r$},springLength:{number:r$},springConstant:{number:r$},damping:{number:r$},avoidOverlap:{number:r$},__type__:{object:a$}},repulsion:{centralGravity:{number:r$},springLength:{number:r$},springConstant:{number:r$},nodeDistance:{number:r$},damping:{number:r$},__type__:{object:a$}},hierarchicalRepulsion:{centralGravity:{number:r$},springLength:{number:r$},springConstant:{number:r$},nodeDistance:{number:r$},damping:{number:r$},avoidOverlap:{number:r$},__type__:{object:a$}},maxVelocity:{number:r$},minVelocity:{number:r$},solver:{string:["barnesHut","repulsion","hierarchicalRepulsion","forceAtlas2Based"]},stabilization:{enabled:{boolean:n$},iterations:{number:r$},updateInterval:{number:r$},onlyDynamicEdges:{boolean:n$},fit:{boolean:n$},__type__:{object:a$,boolean:n$}},timestep:{number:r$},adaptiveTimestep:{boolean:n$},wind:{x:{number:r$},y:{number:r$},__type__:{object:a$}},__type__:{object:a$,boolean:n$}},autoResize:{boolean:n$},clickToUse:{boolean:n$},locale:{string:o$},locales:{__any__:{any:"any"},__type__:{object:a$}},height:{string:o$},width:{string:o$},__type__:{object:a$}},c$={nodes:{borderWidth:[1,0,10,1],borderWidthSelected:[2,0,10,1],color:{border:["color","#2B7CE9"],background:["color","#97C2FC"],highlight:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]},hover:{border:["color","#2B7CE9"],background:["color","#D2E5FF"]}},opacity:[0,0,1,.1],fixed:{x:!1,y:!1},font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[0,0,50,1],strokeColor:["color","#ffffff"]},hidden:!1,labelHighlightBold:!0,physics:!0,scaling:{min:[10,0,200,1],max:[30,0,200,1],label:{enabled:!1,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},shape:["ellipse","box","circle","database","diamond","dot","square","star","text","triangle","triangleDown","hexagon"],shapeProperties:{borderDashes:!1,borderRadius:[6,0,20,1],interpolation:!0,useImageSize:!1},size:[25,0,200,1]},edges:{arrows:{to:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},middle:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"},from:{enabled:!1,scaleFactor:[1,0,3,.05],type:"arrow"}},endPointOffset:{from:[0,-10,10,1],to:[0,-10,10,1]},arrowStrikethrough:!0,color:{color:["color","#848484"],highlight:["color","#848484"],hover:["color","#848484"],inherit:["from","to","both",!0,!1],opacity:[1,0,1,.05]},dashes:!1,font:{color:["color","#343434"],size:[14,0,100,1],face:["arial","verdana","tahoma"],background:["color","none"],strokeWidth:[2,0,50,1],strokeColor:["color","#ffffff"],align:["horizontal","top","middle","bottom"]},hidden:!1,hoverWidth:[1.5,0,5,.1],labelHighlightBold:!0,physics:!0,scaling:{min:[1,0,100,1],max:[15,0,100,1],label:{enabled:!0,min:[14,0,200,1],max:[30,0,200,1],maxVisible:[30,0,200,1],drawThreshold:[5,0,20,1]}},selectionWidth:[1.5,0,5,.1],selfReferenceSize:[20,0,200,1],selfReference:{size:[20,0,200,1],angle:[Math.PI/2,-6*Math.PI,6*Math.PI,Math.PI/8],renderBehindTheNode:!0},shadow:{enabled:!1,color:"rgba(0,0,0,0.5)",size:[10,0,20,1],x:[5,-30,30,1],y:[5,-30,30,1]},smooth:{enabled:!0,type:["dynamic","continuous","discrete","diagonalCross","straightCross","horizontal","vertical","curvedCW","curvedCCW","cubicBezier"],forceDirection:["horizontal","vertical","none"],roundness:[.5,0,1,.05]},width:[1,0,30,1]},layout:{hierarchical:{enabled:!1,levelSeparation:[150,20,500,5],nodeSpacing:[100,20,500,5],treeSpacing:[200,20,500,5],blockShifting:!0,edgeMinimization:!0,parentCentralization:!0,direction:["UD","DU","LR","RL"],sortMethod:["hubsize","directed"],shakeTowards:["leaves","roots"]}},interaction:{dragNodes:!0,dragView:!0,hideEdgesOnDrag:!1,hideEdgesOnZoom:!1,hideNodesOnDrag:!1,hover:!1,keyboard:{enabled:!1,speed:{x:[10,0,40,1],y:[10,0,40,1],zoom:[.02,0,.1,.005]},bindToWindow:!0,autoFocus:!0},multiselect:!1,navigationButtons:!1,selectable:!0,selectConnectedEdges:!0,hoverConnectedEdges:!0,tooltipDelay:[300,0,1e3,25],zoomView:!0,zoomSpeed:[1,.1,2,.1]},manipulation:{enabled:!1,initiallyActive:!1},physics:{enabled:!0,barnesHut:{theta:[.5,.1,1,.05],gravitationalConstant:[-2e3,-3e4,0,50],centralGravity:[.3,0,10,.05],springLength:[95,0,500,5],springConstant:[.04,0,1.2,.005],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},forceAtlas2Based:{theta:[.5,.1,1,.05],gravitationalConstant:[-50,-500,0,1],centralGravity:[.01,0,1,.005],springLength:[95,0,500,5],springConstant:[.08,0,1.2,.005],damping:[.4,0,1,.01],avoidOverlap:[0,0,1,.01]},repulsion:{centralGravity:[.2,0,10,.05],springLength:[200,0,500,5],springConstant:[.05,0,1.2,.005],nodeDistance:[100,0,500,5],damping:[.09,0,1,.01]},hierarchicalRepulsion:{centralGravity:[.2,0,10,.05],springLength:[100,0,500,5],springConstant:[.01,0,1.2,.005],nodeDistance:[120,0,500,5],damping:[.09,0,1,.01],avoidOverlap:[0,0,1,.01]},maxVelocity:[50,0,150,1],minVelocity:[.1,.01,.5,.01],solver:["barnesHut","forceAtlas2Based","repulsion","hierarchicalRepulsion"],timestep:[.5,.01,1,.01],wind:{x:[0,-10,10,.1],y:[0,-10,10,.1]}}},u$=function(t,e,i){var o;return!(!im(t).call(t,"physics")||!im(o=c$.physics.solver).call(o,e)||i.physics.solver===e||"wind"===e)},d$=function(){function t(){yd(this,t)}return Sp(t,[{key:"getDistances",value:function(t,e,i){for(var o={},n=t.edges,r=0;r<e.length;r++){var s={};o[e[r]]=s;for(var a=0;a<e.length;a++)s[e[a]]=r==a?0:1e9}for(var g=0;g<i.length;g++){var l=n[i[g]];!0===l.connected&&void 0!==o[l.fromId]&&void 0!==o[l.toId]&&(o[l.fromId][l.toId]=1,o[l.toId][l.fromId]=1)}for(var h=e.length,c=0;c<h;c++)for(var u=e[c],d=o[u],A=0;A<h-1;A++)for(var I=e[A],C=o[I],p=A+1;p<h;p++){var f=e[p],v=o[f],m=Math.min(C[f],C[u]+d[f]);C[f]=m,v[I]=m}return o}}]),t}(),A$=function(){function t(e,i,o){yd(this,t),this.body=e,this.springLength=i,this.springConstant=o,this.distanceSolver=new d$}return Sp(t,[{key:"setOptions",value:function(t){t&&(t.springLength&&(this.springLength=t.springLength),t.springConstant&&(this.springConstant=t.springConstant))}},{key:"solve",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.distanceSolver.getDistances(this.body,t,e);this._createL_matrix(o),this._createK_matrix(o),this._createE_matrix();for(var n=0,r=Math.max(1e3,Math.min(10*this.body.nodeIndices.length,6e3)),s=1e9,a=0,g=0,l=0,h=0,c=0;s>.01&&n<r;){n+=1;var u=ff(this._getHighestEnergyNode(i),4);for(a=u[0],s=u[1],g=u[2],l=u[3],h=s,c=0;h>1&&c<5;){c+=1,this._moveNode(a,g,l);var d=ff(this._getEnergy(a),3);h=d[0],g=d[1],l=d[2]}}}},{key:"_getHighestEnergyNode",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,o=0,n=e[0],r=0,s=0,a=0;a<e.length;a++){var g=e[a];if(!0!==i[g].predefinedPosition||!0===i[g].isCluster&&!0===t||!0!==i[g].options.fixed.x||!0!==i[g].options.fixed.y){var l=ff(this._getEnergy(g),3),h=l[0],c=l[1],u=l[2];o<h&&(o=h,n=g,r=c,s=u)}}return[n,o,r,s]}},{key:"_getEnergy",value:function(t){var e=ff(this.E_sums[t],2),i=e[0],o=e[1];return[Math.sqrt(Math.pow(i,2)+Math.pow(o,2)),i,o]}},{key:"_moveNode",value:function(t,e,i){for(var o=this.body.nodeIndices,n=this.body.nodes,r=0,s=0,a=0,g=n[t].x,l=n[t].y,h=this.K_matrix[t],c=this.L_matrix[t],u=0;u<o.length;u++){var d=o[u];if(d!==t){var A=n[d].x,I=n[d].y,C=h[d],p=c[d],f=1/Math.pow(Math.pow(g-A,2)+Math.pow(l-I,2),1.5);r+=C*(1-p*Math.pow(l-I,2)*f),s+=C*(p*(g-A)*(l-I)*f),a+=C*(1-p*Math.pow(g-A,2)*f)}}var v=(e/r+i/s)/(s/r-a/s),m=-(s*v+e)/r;n[t].x+=m,n[t].y+=v,this._updateE_matrix(t)}},{key:"_createL_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springLength;this.L_matrix=[];for(var o=0;o<e.length;o++){this.L_matrix[e[o]]={};for(var n=0;n<e.length;n++)this.L_matrix[e[o]][e[n]]=i*t[e[o]][e[n]]}}},{key:"_createK_matrix",value:function(t){var e=this.body.nodeIndices,i=this.springConstant;this.K_matrix=[];for(var o=0;o<e.length;o++){this.K_matrix[e[o]]={};for(var n=0;n<e.length;n++)this.K_matrix[e[o]][e[n]]=i*Math.pow(t[e[o]][e[n]],-2)}}},{key:"_createE_matrix",value:function(){var t=this.body.nodeIndices,e=this.body.nodes;this.E_matrix={},this.E_sums={};for(var i=0;i<t.length;i++)this.E_matrix[t[i]]=[];for(var o=0;o<t.length;o++){for(var n=t[o],r=e[n].x,s=e[n].y,a=0,g=0,l=o;l<t.length;l++){var h=t[l];if(h!==n){var c=e[h].x,u=e[h].y,d=1/Math.sqrt(Math.pow(r-c,2)+Math.pow(s-u,2));this.E_matrix[n][l]=[this.K_matrix[n][h]*(r-c-this.L_matrix[n][h]*(r-c)*d),this.K_matrix[n][h]*(s-u-this.L_matrix[n][h]*(s-u)*d)],this.E_matrix[h][o]=this.E_matrix[n][l],a+=this.E_matrix[n][l][0],g+=this.E_matrix[n][l][1]}}this.E_sums[n]=[a,g]}}},{key:"_updateE_matrix",value:function(t){for(var e=this.body.nodeIndices,i=this.body.nodes,o=this.E_matrix[t],n=this.K_matrix[t],r=this.L_matrix[t],s=i[t].x,a=i[t].y,g=0,l=0,h=0;h<e.length;h++){var c=e[h];if(c!==t){var u=o[h],d=u[0],A=u[1],I=i[c].x,C=i[c].y,p=1/Math.sqrt(Math.pow(s-I,2)+Math.pow(a-C,2)),f=n[c]*(s-I-r[c]*(s-I)*p),v=n[c]*(a-C-r[c]*(a-C)*p);o[h]=[f,v],g+=f,l+=v;var m=this.E_sums[c];m[0]+=f-d,m[1]+=v-A}}this.E_sums[t]=[g,l]}}]),t}();function I$(t,e,i){var o,n,r,s,a=this;if(!(this instanceof I$))throw new SyntaxError("Constructor must be called with the new operator");this.options={},this.defaultOptions={locale:"en",locales:DT,clickToUse:!1},Lg(this.options,this.defaultOptions),this.body={container:t,nodes:{},nodeIndices:[],edges:{},edgeIndices:[],emitter:{on:il(o=this.on).call(o,this),off:il(n=this.off).call(n,this),emit:il(r=this.emit).call(r,this),once:il(s=this.once).call(s,this)},eventListeners:{onTap:function(){},onTouch:function(){},onDoubleTap:function(){},onHold:function(){},onDragStart:function(){},onDrag:function(){},onDragEnd:function(){},onMouseWheel:function(){},onPinch:function(){},onMouseMove:function(){},onRelease:function(){},onContext:function(){}},data:{nodes:null,edges:null},functions:{createNode:function(){},createEdge:function(){},getPointer:function(){}},modules:{},view:{scale:1,translation:{x:0,y:0}},selectionBox:{show:!1,position:{start:{x:0,y:0},end:{x:0,y:0}}}},this.bindEventListeners(),this.images=new NT((function(){return a.body.emitter.emit("_requestRedraw")})),this.groups=new lw,this.canvas=new EL(this.body),this.selectionHandler=new FP(this.body,this.canvas),this.interactionHandler=new RL(this.body,this.canvas,this.selectionHandler),this.view=new wL(this.body,this.canvas),this.renderer=new bL(this.body,this.canvas),this.physics=new pL(this.body),this.layoutEngine=new t$(this.body),this.clustering=new mL(this.body),this.manipulation=new i$(this.body,this.canvas,this.selectionHandler,this.interactionHandler),this.nodesHandler=new bN(this.body,this.images,this.groups,this.layoutEngine),this.edgesHandler=new gL(this.body,this.images,this.groups),this.body.modules.kamadaKawai=new A$(this.body,150,.05),this.body.modules.clustering=this.clustering,this.canvas._create(),this.setOptions(i),this.setData(e)}cl(I$.prototype),I$.prototype.setOptions=function(t){var e=this;if(null===t&&(t=void 0),void 0!==t){if(!0===oT.validate(t,h$)&&console.error("%cErrors have been found in the supplied options object.",iT),k_(["locale","locales","clickToUse"],this.options,t),void 0!==t.locale&&(t.locale=function(t,e){try{var i=ff(e.split(/[-_ /]/,2),2),o=i[0],n=i[1],r=null!=o?o.toLowerCase():null,s=null!=n?n.toUpperCase():null;if(r&&s){var a,g=r+"-"+s;if(Object.prototype.hasOwnProperty.call(t,g))return g;console.warn(Ef(a="Unknown variant ".concat(s," of language ")).call(a,r,"."))}if(r){var l=r;if(Object.prototype.hasOwnProperty.call(t,l))return l;console.warn("Unknown language ".concat(r))}return console.warn("Unknown locale ".concat(e,", falling back to English.")),"en"}catch(t){return console.error(t),console.warn("Unexpected error while normalizing locale ".concat(e,", falling back to English.")),"en"}}(t.locales||this.options.locales,t.locale)),t=this.layoutEngine.setOptions(t.layout,t),this.canvas.setOptions(t),this.groups.setOptions(t.groups),this.nodesHandler.setOptions(t.nodes),this.edgesHandler.setOptions(t.edges),this.physics.setOptions(t.physics),this.manipulation.setOptions(t.manipulation,t,this.options),this.interactionHandler.setOptions(t.interaction),this.renderer.setOptions(t.interaction),this.selectionHandler.setOptions(t.interaction),void 0!==t.groups&&this.body.emitter.emit("refreshNodes"),"configure"in t&&(this.configurator||(this.configurator=new q_(this,this.body.container,c$,this.canvas.pixelRatio,u$)),this.configurator.setOptions(t.configure)),this.configurator&&!0===this.configurator.options.enabled){var i={nodes:{},edges:{},layout:{},interaction:{},manipulation:{},physics:{},global:{}};S_(i.nodes,this.nodesHandler.options),S_(i.edges,this.edgesHandler.options),S_(i.layout,this.layoutEngine.options),S_(i.interaction,this.selectionHandler.options),S_(i.interaction,this.renderer.options),S_(i.interaction,this.interactionHandler.options),S_(i.manipulation,this.manipulation.options),S_(i.physics,this.physics.options),S_(i.global,this.canvas.options),S_(i.global,this.options),this.configurator.setModuleOptions(i)}void 0!==t.clickToUse?!0===t.clickToUse?void 0===this.activator&&(this.activator=new J_(this.canvas.frame),this.activator.on("change",(function(){e.body.emitter.emit("activate")}))):(void 0!==this.activator&&(this.activator.destroy(),delete this.activator),this.body.emitter.emit("activate")):this.body.emitter.emit("activate"),this.canvas.setSize(),this.body.emitter.emit("startSimulation")}},I$.prototype._updateVisibleIndices=function(){var t=this.body.nodes,e=this.body.edges;for(var i in this.body.nodeIndices=[],this.body.edgeIndices=[],t)Object.prototype.hasOwnProperty.call(t,i)&&(this.clustering._isClusteredNode(i)||!1!==t[i].options.hidden||this.body.nodeIndices.push(t[i].id));for(var o in e)if(Object.prototype.hasOwnProperty.call(e,o)){var n=e[o],r=t[n.fromId],s=t[n.toId],a=void 0!==r&&void 0!==s;!this.clustering._isClusteredEdge(o)&&!1===n.options.hidden&&a&&!1===r.options.hidden&&!1===s.options.hidden&&this.body.edgeIndices.push(n.id)}},I$.prototype.bindEventListeners=function(){var t=this;this.body.emitter.on("_dataChanged",(function(){t.edgesHandler._updateState(),t.body.emitter.emit("_dataUpdated")})),this.body.emitter.on("_dataUpdated",(function(){t.clustering._updateState(),t._updateVisibleIndices(),t._updateValueRange(t.body.nodes),t._updateValueRange(t.body.edges),t.body.emitter.emit("startSimulation"),t.body.emitter.emit("_requestRedraw")}))},I$.prototype.setData=function(t){if(this.body.emitter.emit("resetPhysics"),this.body.emitter.emit("_resetData"),this.selectionHandler.unselectAll(),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){console.warn("The dot property has been deprecated. Please use the static convertDot method to convert DOT into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertDot(dotString);");var e=xT(t.dot);this.setData(e)}else if(t&&t.gephi){console.warn("The gephi property has been deprecated. Please use the static convertGephi method to convert gephi into vis.network format and use the normal data format with nodes and edges. This converter is used like this: var data = vis.network.convertGephi(gephiJson);");var i=function(t,e){var i,o={edges:{inheritColor:!1},nodes:{fixed:!1,parseColor:!1}};null!=e&&(null!=e.fixed&&(o.nodes.fixed=e.fixed),null!=e.parseColor&&(o.nodes.parseColor=e.parseColor),null!=e.inheritColor&&(o.edges.inheritColor=e.inheritColor));var n=t.edges,r=zf(n).call(n,(function(t){var e={from:t.source,id:t.id,to:t.target};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),"Directed"===t.type&&(e.arrows="to"),t.color&&!1===o.edges.inheritColor&&(e.color=t.color),e}));return{nodes:zf(i=t.nodes).call(i,(function(t){var e={id:t.id,fixed:o.nodes.fixed&&null!=t.x&&null!=t.y};return null!=t.attributes&&(e.attributes=t.attributes),null!=t.label&&(e.label=t.label),null!=t.size&&(e.size=t.size),null!=t.attributes&&null!=t.attributes.title&&(e.title=t.attributes.title),null!=t.title&&(e.title=t.title),null!=t.x&&(e.x=t.x),null!=t.y&&(e.y=t.y),null!=t.color&&(!0===o.nodes.parseColor?e.color=t.color:e.color={background:t.color,border:t.color,highlight:{background:t.color,border:t.color},hover:{background:t.color,border:t.color}}),e})),edges:r}}(t.gephi);this.setData(i)}else this.nodesHandler.setData(t&&t.nodes,!0),this.edgesHandler.setData(t&&t.edges,!0),this.body.emitter.emit("_dataChanged"),this.body.emitter.emit("_dataLoaded"),this.body.emitter.emit("initPhysics")},I$.prototype.destroy=function(){for(var t in this.body.emitter.emit("destroy"),this.body.emitter.off(),this.off(),delete this.groups,delete this.canvas,delete this.selectionHandler,delete this.interactionHandler,delete this.view,delete this.renderer,delete this.physics,delete this.layoutEngine,delete this.clustering,delete this.manipulation,delete this.nodesHandler,delete this.edgesHandler,delete this.configurator,delete this.images,this.body.nodes)Object.prototype.hasOwnProperty.call(this.body.nodes,t)&&delete this.body.nodes[t];for(var e in this.body.edges)Object.prototype.hasOwnProperty.call(this.body.edges,e)&&delete this.body.edges[e];y_(this.body.container)},I$.prototype._updateValueRange=function(t){var e,i=void 0,o=void 0,n=0;for(e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var r=t[e].getValue();void 0!==r&&(i=void 0===i?r:Math.min(r,i),o=void 0===o?r:Math.max(r,o),n+=r)}if(void 0!==i&&void 0!==o)for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&t[e].setValueRange(i,o,n)},I$.prototype.isActive=function(){return!this.activator||this.activator.active},I$.prototype.setSize=function(){return this.canvas.setSize.apply(this.canvas,arguments)},I$.prototype.canvasToDOM=function(){return this.canvas.canvasToDOM.apply(this.canvas,arguments)},I$.prototype.DOMtoCanvas=function(){return this.canvas.DOMtoCanvas.apply(this.canvas,arguments)},I$.prototype.findNode=function(){return this.clustering.findNode.apply(this.clustering,arguments)},I$.prototype.isCluster=function(){return this.clustering.isCluster.apply(this.clustering,arguments)},I$.prototype.openCluster=function(){return this.clustering.openCluster.apply(this.clustering,arguments)},I$.prototype.cluster=function(){return this.clustering.cluster.apply(this.clustering,arguments)},I$.prototype.getNodesInCluster=function(){return this.clustering.getNodesInCluster.apply(this.clustering,arguments)},I$.prototype.clusterByConnection=function(){return this.clustering.clusterByConnection.apply(this.clustering,arguments)},I$.prototype.clusterByHubsize=function(){return this.clustering.clusterByHubsize.apply(this.clustering,arguments)},I$.prototype.updateClusteredNode=function(){return this.clustering.updateClusteredNode.apply(this.clustering,arguments)},I$.prototype.getClusteredEdges=function(){return this.clustering.getClusteredEdges.apply(this.clustering,arguments)},I$.prototype.getBaseEdge=function(){return this.clustering.getBaseEdge.apply(this.clustering,arguments)},I$.prototype.getBaseEdges=function(){return this.clustering.getBaseEdges.apply(this.clustering,arguments)},I$.prototype.updateEdge=function(){return this.clustering.updateEdge.apply(this.clustering,arguments)},I$.prototype.clusterOutliers=function(){return this.clustering.clusterOutliers.apply(this.clustering,arguments)},I$.prototype.getSeed=function(){return this.layoutEngine.getSeed.apply(this.layoutEngine,arguments)},I$.prototype.enableEditMode=function(){return this.manipulation.enableEditMode.apply(this.manipulation,arguments)},I$.prototype.disableEditMode=function(){return this.manipulation.disableEditMode.apply(this.manipulation,arguments)},I$.prototype.addNodeMode=function(){return this.manipulation.addNodeMode.apply(this.manipulation,arguments)},I$.prototype.editNode=function(){return this.manipulation.editNode.apply(this.manipulation,arguments)},I$.prototype.editNodeMode=function(){return console.warn("Deprecated: Please use editNode instead of editNodeMode."),this.manipulation.editNode.apply(this.manipulation,arguments)},I$.prototype.addEdgeMode=function(){return this.manipulation.addEdgeMode.apply(this.manipulation,arguments)},I$.prototype.editEdgeMode=function(){return this.manipulation.editEdgeMode.apply(this.manipulation,arguments)},I$.prototype.deleteSelected=function(){return this.manipulation.deleteSelected.apply(this.manipulation,arguments)},I$.prototype.getPositions=function(){return this.nodesHandler.getPositions.apply(this.nodesHandler,arguments)},I$.prototype.getPosition=function(){return this.nodesHandler.getPosition.apply(this.nodesHandler,arguments)},I$.prototype.storePositions=function(){return this.nodesHandler.storePositions.apply(this.nodesHandler,arguments)},I$.prototype.moveNode=function(){return this.nodesHandler.moveNode.apply(this.nodesHandler,arguments)},I$.prototype.getBoundingBox=function(){return this.nodesHandler.getBoundingBox.apply(this.nodesHandler,arguments)},I$.prototype.getConnectedNodes=function(t){return void 0!==this.body.nodes[t]?this.nodesHandler.getConnectedNodes.apply(this.nodesHandler,arguments):this.edgesHandler.getConnectedNodes.apply(this.edgesHandler,arguments)},I$.prototype.getConnectedEdges=function(){return this.nodesHandler.getConnectedEdges.apply(this.nodesHandler,arguments)},I$.prototype.startSimulation=function(){return this.physics.startSimulation.apply(this.physics,arguments)},I$.prototype.stopSimulation=function(){return this.physics.stopSimulation.apply(this.physics,arguments)},I$.prototype.stabilize=function(){return this.physics.stabilize.apply(this.physics,arguments)},I$.prototype.getSelection=function(){return this.selectionHandler.getSelection.apply(this.selectionHandler,arguments)},I$.prototype.setSelection=function(){return this.selectionHandler.setSelection.apply(this.selectionHandler,arguments)},I$.prototype.getSelectedNodes=function(){return this.selectionHandler.getSelectedNodeIds.apply(this.selectionHandler,arguments)},I$.prototype.getSelectedEdges=function(){return this.selectionHandler.getSelectedEdgeIds.apply(this.selectionHandler,arguments)},I$.prototype.getNodeAt=function(){var t=this.selectionHandler.getNodeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},I$.prototype.getEdgeAt=function(){var t=this.selectionHandler.getEdgeAt.apply(this.selectionHandler,arguments);return void 0!==t&&void 0!==t.id?t.id:t},I$.prototype.selectNodes=function(){return this.selectionHandler.selectNodes.apply(this.selectionHandler,arguments)},I$.prototype.selectEdges=function(){return this.selectionHandler.selectEdges.apply(this.selectionHandler,arguments)},I$.prototype.unselectAll=function(){this.selectionHandler.unselectAll.apply(this.selectionHandler,arguments),this.selectionHandler.commitWithoutEmitting.apply(this.selectionHandler),this.redraw()},I$.prototype.redraw=function(){return this.renderer.redraw.apply(this.renderer,arguments)},I$.prototype.getScale=function(){return this.view.getScale.apply(this.view,arguments)},I$.prototype.getViewPosition=function(){return this.view.getViewPosition.apply(this.view,arguments)},I$.prototype.fit=function(){return this.view.fit.apply(this.view,arguments)},I$.prototype.moveTo=function(){return this.view.moveTo.apply(this.view,arguments)},I$.prototype.focus=function(){return this.view.focus.apply(this.view,arguments)},I$.prototype.releaseNode=function(){return this.view.releaseNode.apply(this.view,arguments)},I$.prototype.getOptionsFromConfigurator=function(){var t={};return this.configurator&&(t=this.configurator.getOptions.apply(this.configurator)),t};const C$=[{num:0,name:"Life begins to happen",nodes:2,edges:[[0,1]],target:[0]},{num:1,name:"Ten spoons of spinach",nodes:5,edges:[[0,1],[1,0],[0,2],[2,0],[0,3],[3,0],[1,2],[2,1],[1,3],[3,1],[2,3],[3,2]],target:[4]},{num:2,name:"Emails open on my phone",nodes:7,edges:[[0,1],[2,1],[3,6],[4,6],[5,6]],target:[3,4,5]},{num:3,name:"Cherry or rye",nodes:7,edges:[[0,1],[1,0],[1,2],[2,1],[2,3],[3,2],[3,4],[4,3],[4,5],[5,4],[5,0],[0,5],[3,6],[6,3]],target:[0]},{num:4,name:"Sweet in floral print",nodes:7,edges:[[0,1],[1,2],[2,0],[3,4],[4,5],[5,6],[6,3]],target:[0,1,2]},{num:5,name:"Taqueria on the roof",nodes:9,edges:[[0,1],[1,2],[2,3],[4,5],[5,6],[6,7],[7,8]],target:[3]},{num:6,name:"Bomb in your Benz",nodes:9,edges:[[0,1],[0,2],[1,3],[1,4],[2,5],[2,6],[6,7],[6,8]],target:[5]},{num:7,name:"My bacon my oink",nodes:10,edges:[[0,1],[1,0],[0,2],[2,0],[0,3],[3,0],[1,2],[2,1],[1,5],[5,1],[2,4],[4,2],[3,6],[6,3],[3,8],[8,3],[4,6],[6,4],[4,7],[7,4],[5,7],[7,5],[6,8],[8,6],[7,9],[9,7],[5,9],[9,5],[8,9],[9,8]],target:[2,6,7]}];var p$=i(72),f$=i.n(p$),v$=i(825),m$=i.n(v$),b$=i(659),y$=i.n(b$),_$=i(56),T$=i.n(_$),E$=i(540),w$=i.n(E$),k$=i(113),O$=i.n(k$),S$=i(523),R$={};R$.styleTagTransform=O$(),R$.setAttributes=T$(),R$.insert=y$().bind(null,"head"),R$.domAPI=m$(),R$.insertStyleElement=w$(),f$()(S$.A,R$),S$.A&&S$.A.locals&&S$.A.locals,Jt.defineBlocks(Ne),document.getElementById("networkbox");const x$=document.getElementById("blocklyDiv");var D$=document.getElementById("levels-list");const M$=ce(x$,{toolbox:{kind:"flyoutToolbox",contents:[{kind:"block",type:"binary_op"},{kind:"block",type:"not"},{kind:"block",type:"node"},{kind:"block",type:"target_node"},{kind:"block",type:"points_to"},{kind:"block",type:"eq"},{kind:"block",type:"quantifier"}]}});var N$=new class{constructor(){this.level=-1,this.size=0,this.edglist=[],this.targets=[],this.selected=[];var t=["y"].concat(Array.from(Array(99).keys()).map((t=>`x${t}`)));this.fop=new vn(t,[],["eq","R"],[]),this.fom=void 0}erdosRenyi(t,e){this.size=t;let i=Array.from(Array(t).keys()),o=[].concat(...i.map((t=>i.map((e=>[t,e])))));return Array.from(o.filter((t=>Math.random()<e)))}fromEdgeList(t,e){this.size=t;let i=Array.from(Array(t).keys());this.fom=new mn(i,{},{},{eq:(t,e)=>t==e,R:(t,i)=>e.some((e=>e[0]===t&&e[1]===i))})}getSat(t){let e=Array.from(Array(this.fom.universe.length).keys()),i=Array.from(e.map((e=>this.fom.evaluateFormulaInContext(t,{y:e}))));return e.filter((t=>i[t]))}runRandomGraph(t,e){var i=this.erdosRenyi(t,e);this.edglist=i,this.fromEdgeList(t,i),this.fom.parser=this.fop,this.level=-1,this.target=[]}runLevelGraph(t){var e=t.nodes,i=t.edges;this.edglist=i,this.fromEdgeList(e,i),this.fom.parser=this.fop,this.target=t.target}};N$.runRandomGraph(20,.1);var L$=new class{constructor(){this.visNodes=void 0,this.visEdges=void 0,this.network=void 0}visNodesList(t){let e=Array.from(Array(t).keys()).map((t=>({id:t,label:"",color:{background:"black",border:"orange",highlight:{background:"black",border:"orange"}},borderWidth:0})));this.visNodes=new yM(e)}visEdgesList(t){var e=[];for(let o=0;o<t.length;o++){var i=t[o];e.some((t=>t.from===i[1]&&t.to===i[0]))||(t.slice(o).some((t=>t[0]===i[1]&&t[1]===i[0]))?e.push({from:i[0],to:i[1],width:1}):e.push({from:i[0],to:i[1],width:1,arrows:"to"}))}this.visEdges=new yM(e)}setNodeColor(t,e,i){this.visNodes.update({id:t,color:{background:e,border:i,highlight:{background:e,border:i}}})}setNodeBorder(t,e){this.visNodes.update({id:t,borderWidth:e,borderWidthSelected:e})}highlightSelected(t){Array.from(Array(this.visNodes.length).keys());for(let e=0;e<this.visNodes.length;e++)t.includes(e)?this.setNodeBorder(e,3):this.setNodeBorder(e,0)}render(){scroll(0,0);var t={nodes:this.visNodes,edges:this.visEdges};this.network=new I$(document.getElementById("networkbox"),t,{edges:{color:{inherit:!1}}})}styleNodes(t){for(let e=0;e<this.visNodes.length;e++)t.includes(e)?this.setNodeColor(e,"#22A7F0","orange"):this.setNodeColor(e,"black","orange")}markLevelCompleted(t){document.getElementById(`level-marker-${t}`).innerHTML=" â"}};L$.visNodesList(20),L$.visEdgesList(N$.edglist);var P$=new class{constructor(t,e){this.model=t,this.view=e}randomize(){this.model.runRandomGraph(20,.1),this.view.visNodesList(this.model.size),this.view.visEdgesList(this.model.edglist),this.view.render()}runLevel(t){this.model.runLevelGraph(t),this.model.level=t.num,this.view.visNodesList(this.model.size),this.view.visEdgesList(this.model.edglist),this.view.render(),this.view.styleNodes(this.model.target)}tryPredicate(t){var e=this.model.getSat(t);this.view.highlightSelected(e);var i=-1!=this.model.level&&e.toString()===this.model.target.toString();return i&&this.view.markLevelCompleted(this.model.level),i}}(N$,L$);P$.randomize(),i.g.c=P$,i.g.levels=C$;for(let t in C$){var $$=C$[t],B$=document.createElement("li"),F$=document.createElement("a"),z$=document.createElement("a");z$.textContent=" â",z$.id=`level-marker-${t}`,F$.textContent=$$.name,F$.href=`javascript:c.runLevel(levels[${t}])`,B$.appendChild(F$),B$.appendChild(z$),D$.appendChild(B$)}const H$=()=>{const t=Le.workspaceToCode(M$);try{P$.tryPredicate(t)}catch(t){P$.tryPredicate("~(eq(y,y))")}};!function(t){const e=window.localStorage?.getItem(pn);e&&(ai.disable(),ln.workspaces.load(JSON.parse(e),t,!1),ai.enable())}(M$),H$(),M$.addChangeListener((t=>{t.isUiEvent||function(t){const e=ln.workspaces.save(t);window.localStorage?.setItem(pn,JSON.stringify(e))}(M$)})),M$.addChangeListener((t=>{t.isUiEvent||t.type==w.FINISHED_LOADING||M$.isDragging()||H$()}))})()})();